[{"filePath":"w:\\CodeDeX\\WhatsDeX\\.eslintrc.cjs","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\.prettierrc.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":1,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":7}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"module.exports = {\n  singleQuote: true,\n  semi: true,\n  trailingComma: 'es5',\n  tabWidth: 2,\n  printWidth: 100,\n  arrowParens: 'avoid',\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\__tests__\\commands\\ai-chat\\chatgpt_new.test.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":24,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":31},{"ruleId":"import-x/extensions","severity":2,"message":"Unexpected use of file extension \"js\" for \"../../../commands/ai-chat/chatgpt.js\"","line":1,"column":32,"nodeType":"Literal","messageId":"unexpected","endLine":1,"endColumn":70,"suggestions":[{"fix":{"range":[31,69],"text":"'../../../commands/ai-chat/chatgpt'"},"messageId":"removeUnexpected","data":{"extension":"js","importPath":"../../../commands/ai-chat/chatgpt.js","fixedImportPath":"../../../commands/ai-chat/chatgpt"},"desc":"Remove unexpected \"js\" file extension from \"../../../commands/ai-chat/chatgpt.js\" into \"../../../commands/ai-chat/chatgpt\""}]},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":2,"column":23,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":30},{"ruleId":"import-x/extensions","severity":2,"message":"Unexpected use of file extension \"js\" for \"../../../services/openai.js\"","line":2,"column":31,"nodeType":"Literal","messageId":"unexpected","endLine":2,"endColumn":60,"suggestions":[{"fix":{"range":[102,131],"text":"'../../../services/openai'"},"messageId":"removeUnexpected","data":{"extension":"js","importPath":"../../../services/openai.js","fixedImportPath":"../../../services/openai"},"desc":"Remove unexpected \"js\" file extension from \"../../../services/openai.js\" into \"../../../services/openai\""}]},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":3,"column":18,"nodeType":"Identifier","messageId":"undef","endLine":3,"endColumn":25},{"ruleId":"import-x/extensions","severity":2,"message":"Unexpected use of file extension \"js\" for \"../../../database/ai_chat_database.js\"","line":3,"column":26,"nodeType":"Literal","messageId":"unexpected","endLine":3,"endColumn":65,"suggestions":[{"fix":{"range":[159,198],"text":"'../../../database/ai_chat_database'"},"messageId":"removeUnexpected","data":{"extension":"js","importPath":"../../../database/ai_chat_database.js","fixedImportPath":"../../../database/ai_chat_database"},"desc":"Remove unexpected \"js\" file extension from \"../../../database/ai_chat_database.js\" into \"../../../database/ai_chat_database\""}]},{"ruleId":"no-unused-vars","severity":1,"message":"'aiTools' is assigned a value but never used.","line":4,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":4,"endColumn":14,"suggestions":[{"messageId":"removeVar","data":{"varName":"aiTools"},"fix":{"range":[201,255],"text":""},"desc":"Remove unused variable 'aiTools'."}]},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":4,"column":17,"nodeType":"Identifier","messageId":"undef","endLine":4,"endColumn":24},{"ruleId":"import-x/extensions","severity":2,"message":"Unexpected use of file extension \"js\" for \"../../../tools/ai-tools.js\"","line":4,"column":25,"nodeType":"Literal","messageId":"unexpected","endLine":4,"endColumn":53,"suggestions":[{"fix":{"range":[225,253],"text":"'../../../tools/ai-tools'"},"messageId":"removeUnexpected","data":{"extension":"js","importPath":"../../../tools/ai-tools.js","fixedImportPath":"../../../tools/ai-tools"},"desc":"Remove unexpected \"js\" file extension from \"../../../tools/ai-tools.js\" into \"../../../tools/ai-tools\""}]},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":7,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":7,"endColumn":5},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":9,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":9,"endColumn":5},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":10,"column":12,"nodeType":"Identifier","messageId":"undef","endLine":10,"endColumn":16},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":11,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":11,"endColumn":19},{"ruleId":"no-undef","severity":2,"message":"'describe' is not defined.","line":14,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":14,"endColumn":9},{"ruleId":"no-undef","severity":2,"message":"'beforeEach' is not defined.","line":17,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":17,"endColumn":13},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":18,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":18,"endColumn":9},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":25,"column":16,"nodeType":"Identifier","messageId":"undef","endLine":25,"endColumn":20},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":26,"column":19,"nodeType":"Identifier","messageId":"undef","endLine":26,"endColumn":23},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":36,"column":14,"nodeType":"Identifier","messageId":"undef","endLine":36,"endColumn":18},{"ruleId":"no-undef","severity":2,"message":"'it' is not defined.","line":40,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":40,"endColumn":5},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":43,"column":34,"nodeType":"Identifier","messageId":"undef","endLine":43,"endColumn":38},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":49,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":49,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":50,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":50,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":51,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":51,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'it' is not defined.","line":56,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":56,"endColumn":5},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":60,"column":27,"nodeType":"Identifier","messageId":"undef","endLine":60,"endColumn":31},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":64,"column":34,"nodeType":"Identifier","messageId":"undef","endLine":64,"endColumn":38},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":70,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":70,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":71,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":71,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":73,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":73,"endColumn":13},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":74,"column":18,"nodeType":"Identifier","messageId":"undef","endLine":74,"endColumn":24},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":77,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":77,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'it' is not defined.","line":83,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":83,"endColumn":5},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":100,"column":34,"nodeType":"Identifier","messageId":"undef","endLine":100,"endColumn":38},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":107,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":107,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":108,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":108,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":109,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":109,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":110,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":110,"endColumn":11}],"suppressedMessages":[],"errorCount":37,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const chatgptCommand = require('../../../commands/ai-chat/chatgpt.js');\nconst OpenAIService = require('../../../services/openai.js');\nconst aiChatDB = require('../../../database/ai_chat_database.js');\nconst aiTools = require('../../../tools/ai-tools.js');\n\n// Mock dependencies\njest.mock('../../../services/openai.js');\n// Explicitly mock the database module to prevent real connections\njest.mock('../../../database/ai_chat_database.js', () => ({\n  getChat: jest.fn(),\n  updateChat: jest.fn(),\n}));\n\ndescribe('New chatgpt command with Memory and Function Calling', () => {\n  let ctx;\n\n  beforeEach(() => {\n    jest.clearAllMocks();\n\n    ctx = {\n      author: { id: 'user123' },\n      args: ['hello'],\n      bot: {\n        cmd: {\n          get: jest.fn().mockReturnValue({\n            code: jest.fn().mockImplementation(mockCtx => {\n              mockCtx.reply('mocked youtube search result');\n            }),\n          }),\n        },\n        context: {\n          config: { api: { openai: 'test-key' } },\n          formatter: { quote: str => str },\n        },\n      },\n      reply: jest.fn(),\n    };\n  });\n\n  it('should handle a simple chat conversation', async () => {\n    const mockCompletion = { message: { content: 'world' } };\n    aiChatDB.getChat.mockResolvedValue({ history: [], summary: '' });\n    const getChatCompletionSpy = jest\n      .spyOn(OpenAIService.prototype, 'getChatCompletion')\n      .mockResolvedValue(mockCompletion);\n\n    await chatgptCommand.code(ctx);\n\n    expect(getChatCompletionSpy).toHaveBeenCalledTimes(1);\n    expect(ctx.reply).toHaveBeenCalledWith('world');\n    expect(aiChatDB.updateChat).toHaveBeenCalled();\n\n    getChatCompletionSpy.mockRestore();\n  });\n\n  it('should trigger summarization when history is long', async () => {\n    const longHistory = Array(20).fill({ role: 'user', content: 'test' });\n    aiChatDB.getChat.mockResolvedValue({ history: longHistory, summary: '' });\n\n    const getSummarySpy = jest\n      .spyOn(OpenAIService.prototype, 'getSummary')\n      .mockResolvedValue('This is a summary.');\n    const mockCompletion = { message: { content: 'response after summary' } };\n    const getChatCompletionSpy = jest\n      .spyOn(OpenAIService.prototype, 'getChatCompletion')\n      .mockResolvedValue(mockCompletion);\n\n    await chatgptCommand.code(ctx);\n\n    expect(getSummarySpy).toHaveBeenCalled();\n    expect(aiChatDB.updateChat).toHaveBeenCalledWith(\n      'user123',\n      expect.objectContaining({\n        summary: expect.stringContaining('This is a summary.'),\n      })\n    );\n    expect(ctx.reply).toHaveBeenCalledWith('response after summary');\n\n    getSummarySpy.mockRestore();\n    getChatCompletionSpy.mockRestore();\n  });\n\n  it('should correctly handle a tool call', async () => {\n    aiChatDB.getChat.mockResolvedValue({ history: [], summary: '' });\n\n    const toolCallResponse = {\n      finish_reason: 'tool_calls',\n      message: {\n        tool_calls: [\n          {\n            id: 'call_123',\n            type: 'function',\n            function: { name: 'youtubesearch', arguments: JSON.stringify({ query: 'cat videos' }) },\n          },\n        ],\n      },\n    };\n    const finalResponse = { message: { content: 'I found a video.' } };\n\n    const getChatCompletionSpy = jest\n      .spyOn(OpenAIService.prototype, 'getChatCompletion')\n      .mockResolvedValueOnce(toolCallResponse)\n      .mockResolvedValueOnce(finalResponse);\n\n    await chatgptCommand.code(ctx);\n\n    expect(getChatCompletionSpy).toHaveBeenCalledTimes(2);\n    expect(ctx.bot.cmd.get).toHaveBeenCalledWith('youtubesearch');\n    expect(ctx.reply).toHaveBeenCalledWith('I found a video.');\n    expect(aiChatDB.updateChat).toHaveBeenCalled();\n\n    getChatCompletionSpy.mockRestore();\n  });\n});\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\__tests__\\commands\\ai-chat\\clearchat.test.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":26,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":33},{"ruleId":"import-x/extensions","severity":2,"message":"Unexpected use of file extension \"js\" for \"../../../commands/ai-chat/clearchat.js\"","line":1,"column":34,"nodeType":"Literal","messageId":"unexpected","endLine":1,"endColumn":74,"suggestions":[{"fix":{"range":[33,73],"text":"'../../../commands/ai-chat/clearchat'"},"messageId":"removeUnexpected","data":{"extension":"js","importPath":"../../../commands/ai-chat/clearchat.js","fixedImportPath":"../../../commands/ai-chat/clearchat"},"desc":"Remove unexpected \"js\" file extension from \"../../../commands/ai-chat/clearchat.js\" into \"../../../commands/ai-chat/clearchat\""}]},{"ruleId":"no-undef","severity":2,"message":"'describe' is not defined.","line":3,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":3,"endColumn":9},{"ruleId":"no-undef","severity":2,"message":"'beforeEach' is not defined.","line":6,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":6,"endColumn":13},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":13,"column":29,"nodeType":"Identifier","messageId":"undef","endLine":13,"endColumn":33},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":21,"column":14,"nodeType":"Identifier","messageId":"undef","endLine":21,"endColumn":18},{"ruleId":"no-undef","severity":2,"message":"'it' is not defined.","line":25,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":25,"endColumn":5},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":28,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":28,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":29,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":29,"endColumn":11}],"suppressedMessages":[],"errorCount":9,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const clearchatCommand = require('../../../commands/ai-chat/clearchat.js');\n\ndescribe('clearchat command', () => {\n  let ctx;\n\n  beforeEach(() => {\n    ctx = {\n      author: { id: 'user123' },\n      bot: {\n        context: {\n          database: {\n            chat: {\n              clearHistory: jest.fn(),\n            },\n          },\n          formatter: {\n            quote: str => str,\n          },\n        },\n      },\n      reply: jest.fn(),\n    };\n  });\n\n  it('should clear chat history and reply with a success message', async () => {\n    await clearchatCommand.code(ctx);\n\n    expect(ctx.bot.context.database.chat.clearHistory).toHaveBeenCalledWith('user123');\n    expect(ctx.reply).toHaveBeenCalledWith('âœ… Your chat history has been cleared.');\n  });\n});\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\__tests__\\commands\\downloader\\youtubevideo.test.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":22},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":2,"column":29,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":36},{"ruleId":"import-x/extensions","severity":2,"message":"Unexpected use of file extension \"js\" for \"../../../commands/downloader/youtubevideo.js\"","line":2,"column":37,"nodeType":"Literal","messageId":"unexpected","endLine":2,"endColumn":83,"suggestions":[{"fix":{"range":[68,114],"text":"'../../../commands/downloader/youtubevideo'"},"messageId":"removeUnexpected","data":{"extension":"js","importPath":"../../../commands/downloader/youtubevideo.js","fixedImportPath":"../../../commands/downloader/youtubevideo"},"desc":"Remove unexpected \"js\" file extension from \"../../../commands/downloader/youtubevideo.js\" into \"../../../commands/downloader/youtubevideo\""}]},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":3,"column":18,"nodeType":"Identifier","messageId":"undef","endLine":3,"endColumn":25},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":6,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":6,"endColumn":5},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":7,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":7,"endColumn":5},{"ruleId":"no-undef","severity":2,"message":"'describe' is not defined.","line":9,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":9,"endColumn":9},{"ruleId":"no-undef","severity":2,"message":"'beforeEach' is not defined.","line":12,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":12,"endColumn":13},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":13,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":13,"endColumn":9},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":28,"column":14,"nodeType":"Identifier","messageId":"undef","endLine":28,"endColumn":18},{"ruleId":"no-undef","severity":2,"message":"'it' is not defined.","line":32,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":32,"endColumn":5},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":50,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":50,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":50,"column":44,"nodeType":"Identifier","messageId":"undef","endLine":50,"endColumn":50},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":51,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":51,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":52,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":52,"endColumn":13},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":54,"column":18,"nodeType":"Identifier","messageId":"undef","endLine":54,"endColumn":24},{"ruleId":"no-undef","severity":2,"message":"'it' is not defined.","line":59,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":59,"endColumn":5},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":67,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":67,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":67,"column":44,"nodeType":"Identifier","messageId":"undef","endLine":67,"endColumn":50},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":68,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":68,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'it' is not defined.","line":71,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":71,"endColumn":5},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":79,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":79,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":79,"column":44,"nodeType":"Identifier","messageId":"undef","endLine":79,"endColumn":50},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":80,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":80,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'it' is not defined.","line":83,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":83,"endColumn":5},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":92,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":92,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'it' is not defined.","line":98,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":98,"endColumn":5},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":106,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":106,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":107,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":107,"endColumn":13},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":109,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":109,"endColumn":11}],"suppressedMessages":[],"errorCount":30,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const axios = require('axios');\nconst youtubevideoCommand = require('../../../commands/downloader/youtubevideo.js');\nconst apiTools = require('../../../tools/api');\n\n// Mock dependencies\njest.mock('axios');\njest.mock('../../../tools/api');\n\ndescribe('youtubevideo command', () => {\n  let ctx;\n\n  beforeEach(() => {\n    jest.clearAllMocks();\n    ctx = {\n      args: [],\n      bot: {\n        context: {\n          formatter: {\n            quote: str => str,\n          },\n          config: {\n            msg: {\n              footer: 'test-footer',\n            },\n          },\n        },\n      },\n      reply: jest.fn(),\n    };\n  });\n\n  it('should download a video for a valid URL', async () => {\n    // Arrange\n    ctx.args = ['https://www.youtube.com/watch?v=dQw4w9WgXcQ'];\n    const mockApiResponse = {\n      data: {\n        result: {\n          title: 'Rick Astley - Never Gonna Give You Up',\n          download: 'http://example.com/video.mp4',\n        },\n      },\n    };\n    axios.get.mockResolvedValue(mockApiResponse);\n    apiTools.createUrl.mockReturnValue('http://mockapi.com/youtube?url=...&format=720');\n\n    // Act\n    await youtubevideoCommand.code(ctx);\n\n    // Assert\n    expect(axios.get).toHaveBeenCalledWith(expect.stringContaining('http://mockapi.com'));\n    expect(ctx.reply).toHaveBeenCalledWith(\n      expect.objectContaining({\n        video: { url: 'http://example.com/video.mp4' },\n        caption: expect.stringContaining('URL: https://www.youtube.com/watch?v=dQw4w9WgXcQ'),\n      })\n    );\n  });\n\n  it('should reply with an error for an invalid URL', async () => {\n    // Arrange\n    ctx.args = ['not-a-valid-url'];\n\n    // Act\n    await youtubevideoCommand.code(ctx);\n\n    // Assert\n    expect(ctx.reply).toHaveBeenCalledWith(expect.stringContaining('Please provide a valid URL.'));\n    expect(axios.get).not.toHaveBeenCalled();\n  });\n\n  it('should reply with an error if no URL is provided', async () => {\n    // Arrange\n    ctx.args = [];\n\n    // Act\n    await youtubevideoCommand.code(ctx);\n\n    // Assert\n    expect(ctx.reply).toHaveBeenCalledWith(expect.stringContaining('Please provide a valid URL.'));\n    expect(axios.get).not.toHaveBeenCalled();\n  });\n\n  it('should use the specified quality when provided', async () => {\n    // Arrange\n    ctx.args = ['https://www.youtube.com/watch?v=dQw4w9WgXcQ', '-q', '480'];\n    axios.get.mockResolvedValue({ data: { result: {} } });\n\n    // Act\n    await youtubevideoCommand.code(ctx);\n\n    // Assert\n    expect(apiTools.createUrl).toHaveBeenCalledWith('izumi', '/downloader/youtube', {\n      url: 'https://www.youtube.com/watch?v=dQw4w9WgXcQ',\n      format: '480',\n    });\n  });\n\n  it('should reply with an error when an invalid quality flag makes the URL invalid', async () => {\n    // Arrange\n    ctx.args = ['https://www.youtube.com/watch?v=dQw4w9WgXcQ', '-q', 'bad-quality'];\n\n    // Act\n    await youtubevideoCommand.code(ctx);\n\n    // Assert\n    expect(ctx.reply).toHaveBeenCalledWith(\n      expect.stringContaining('The URL cannot contain spaces.')\n    );\n    expect(axios.get).not.toHaveBeenCalled();\n  });\n});\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\__tests__\\commands\\information\\ping.test.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":25,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":32},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":2,"column":21,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":28},{"ruleId":"import-x/extensions","severity":2,"message":"Unexpected use of file extension \"js\" for \"../../../commands/information/ping.js\"","line":2,"column":29,"nodeType":"Literal","messageId":"unexpected","endLine":2,"endColumn":68,"suggestions":[{"fix":{"range":[75,114],"text":"'../../../commands/information/ping'"},"messageId":"removeUnexpected","data":{"extension":"js","importPath":"../../../commands/information/ping.js","fixedImportPath":"../../../commands/information/ping"},"desc":"Remove unexpected \"js\" file extension from \"../../../commands/information/ping.js\" into \"../../../commands/information/ping\""}]},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":4,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":4,"endColumn":5},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":5,"column":24,"nodeType":"Identifier","messageId":"undef","endLine":5,"endColumn":28},{"ruleId":"no-undef","severity":2,"message":"'describe' is not defined.","line":8,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":8,"endColumn":9},{"ruleId":"no-undef","severity":2,"message":"'beforeEach' is not defined.","line":11,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":11,"endColumn":13},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":12,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":12,"endColumn":9},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":14,"column":14,"nodeType":"Identifier","messageId":"undef","endLine":14,"endColumn":18},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":15,"column":20,"nodeType":"Identifier","messageId":"undef","endLine":15,"endColumn":24},{"ruleId":"no-undef","severity":2,"message":"'it' is not defined.","line":26,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":26,"endColumn":5},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":28,"column":28,"nodeType":"Identifier","messageId":"undef","endLine":28,"endColumn":32},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":37,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":37,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":38,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":38,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'it' is not defined.","line":46,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":46,"endColumn":5},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":48,"column":29,"nodeType":"Identifier","messageId":"undef","endLine":48,"endColumn":33},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":58,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":58,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":59,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":59,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":60,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":60,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":61,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":61,"endColumn":11}],"suppressedMessages":[],"errorCount":20,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const { performance } = require('perf_hooks');\nconst pingCommand = require('../../../commands/information/ping.js');\n\njest.mock('../../../utils/formatters', () => ({\n  convertMsToDuration: jest.fn(ms => `${ms.toFixed(2)} ms`),\n}));\n\ndescribe('ping command', () => {\n  let ctx;\n\n  beforeEach(() => {\n    jest.clearAllMocks();\n    ctx = {\n      reply: jest.fn().mockResolvedValue({ key: 'test-message-key' }),\n      editMessage: jest.fn(),\n      bot: {\n        context: {\n          formatter: {\n            quote: str => str,\n          },\n        },\n      },\n    };\n  });\n\n  it('should reply with Pong! and edit the message with the response time', async () => {\n    // Arrange\n    const performanceSpy = jest\n      .spyOn(performance, 'now')\n      .mockReturnValueOnce(1000) // Start time\n      .mockReturnValueOnce(1550); // End time\n\n    // Act\n    await pingCommand.code(ctx);\n\n    // Assert\n    expect(ctx.reply).toHaveBeenCalledWith('ðŸ“ Pong!');\n    expect(ctx.editMessage).toHaveBeenCalledWith(\n      'test-message-key',\n      'ðŸ“ Pong! Merespon dalam 550.00 ms.'\n    );\n\n    performanceSpy.mockRestore();\n  });\n\n  it('should handle errors gracefully', async () => {\n    // Arrange\n    const consoleErrorSpy = jest.spyOn(console, 'error').mockImplementation(() => {});\n    const testError = { message: 'Network Error' };\n    ctx.reply\n      .mockRejectedValueOnce(testError) // First call fails\n      .mockResolvedValueOnce(true); // Second call (in catch block) succeeds\n\n    // Act\n    await pingCommand.code(ctx);\n\n    // Assert\n    expect(ctx.reply).toHaveBeenCalledTimes(2);\n    expect(ctx.reply).toHaveBeenNthCalledWith(1, 'ðŸ“ Pong!');\n    expect(ctx.reply).toHaveBeenNthCalledWith(2, 'An error occurred: Network Error');\n    expect(ctx.editMessage).not.toHaveBeenCalled();\n    consoleErrorSpy.mockRestore();\n  });\n});\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\__tests__\\commands\\profile\\claim.test.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":22,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":29},{"ruleId":"import-x/extensions","severity":2,"message":"Unexpected use of file extension \"js\" for \"../../../commands/profile/claim.js\"","line":1,"column":30,"nodeType":"Literal","messageId":"unexpected","endLine":1,"endColumn":66,"suggestions":[{"fix":{"range":[29,65],"text":"'../../../commands/profile/claim'"},"messageId":"removeUnexpected","data":{"extension":"js","importPath":"../../../commands/profile/claim.js","fixedImportPath":"../../../commands/profile/claim"},"desc":"Remove unexpected \"js\" file extension from \"../../../commands/profile/claim.js\" into \"../../../commands/profile/claim\""}]},{"ruleId":"no-unused-vars","severity":1,"message":"'formatters' is assigned a value but never used.","line":2,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":17,"suggestions":[{"messageId":"removeVar","data":{"varName":"formatters"},"fix":{"range":[68,124],"text":""},"desc":"Remove unused variable 'formatters'."}]},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":2,"column":20,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":27},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":4,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":4,"endColumn":5},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":5,"column":24,"nodeType":"Identifier","messageId":"undef","endLine":5,"endColumn":28},{"ruleId":"no-undef","severity":2,"message":"'describe' is not defined.","line":8,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":8,"endColumn":9},{"ruleId":"no-undef","severity":2,"message":"'beforeEach' is not defined.","line":12,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":12,"endColumn":13},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":13,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":13,"endColumn":9},{"ruleId":"no-undef","severity":2,"message":"'global' is not defined.","line":16,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":16,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":17,"column":12,"nodeType":"Identifier","messageId":"undef","endLine":17,"endColumn":16},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":18,"column":12,"nodeType":"Identifier","messageId":"undef","endLine":18,"endColumn":16},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":22,"column":18,"nodeType":"Identifier","messageId":"undef","endLine":22,"endColumn":22},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":39,"column":14,"nodeType":"Identifier","messageId":"undef","endLine":39,"endColumn":18},{"ruleId":"no-undef","severity":2,"message":"'afterEach' is not defined.","line":43,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":43,"endColumn":12},{"ruleId":"no-undef","severity":2,"message":"'it' is not defined.","line":47,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":47,"endColumn":5},{"ruleId":"no-undef","severity":2,"message":"'db' is not defined.","line":50,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":50,"endColumn":7},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":56,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":56,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'db' is not defined.","line":56,"column":12,"nodeType":"Identifier","messageId":"undef","endLine":56,"endColumn":14},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":57,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":57,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'db' is not defined.","line":57,"column":12,"nodeType":"Identifier","messageId":"undef","endLine":57,"endColumn":14},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":58,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":58,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'it' is not defined.","line":63,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":63,"endColumn":5},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":71,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":71,"endColumn":11},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\\".","line":72,"column":50,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":72,"endColumn":51,"suggestions":[{"messageId":"removeEscape","fix":{"range":[1881,1882],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[1881,1881],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\\".","line":72,"column":58,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":72,"endColumn":59,"suggestions":[{"messageId":"removeEscape","fix":{"range":[1889,1890],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[1889,1889],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\\".","line":72,"column":61,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":72,"endColumn":62,"suggestions":[{"messageId":"removeEscape","fix":{"range":[1892,1893],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[1892,1892],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\\".","line":72,"column":70,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":72,"endColumn":71,"suggestions":[{"messageId":"removeEscape","fix":{"range":[1901,1902],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[1901,1901],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\\".","line":72,"column":73,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":72,"endColumn":74,"suggestions":[{"messageId":"removeEscape","fix":{"range":[1904,1905],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[1904,1904],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\\".","line":72,"column":81,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":72,"endColumn":82,"suggestions":[{"messageId":"removeEscape","fix":{"range":[1912,1913],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[1912,1912],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}]},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":74,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":74,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'db' is not defined.","line":74,"column":12,"nodeType":"Identifier","messageId":"undef","endLine":74,"endColumn":14},{"ruleId":"no-undef","severity":2,"message":"'it' is not defined.","line":77,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":77,"endColumn":5},{"ruleId":"no-undef","severity":2,"message":"'db' is not defined.","line":80,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":80,"endColumn":7},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":86,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":86,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'it' is not defined.","line":91,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":91,"endColumn":5},{"ruleId":"no-undef","severity":2,"message":"'db' is not defined.","line":96,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":96,"endColumn":7},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":102,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":102,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'it' is not defined.","line":107,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":107,"endColumn":5},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":116,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":116,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'it' is not defined.","line":119,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":119,"endColumn":5},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":127,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":127,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":128,"column":13,"nodeType":"Identifier","messageId":"undef","endLine":128,"endColumn":19}],"suppressedMessages":[],"errorCount":42,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const claimCommand = require('../../../commands/profile/claim.js');\nconst formatters = require('../../../utils/formatters');\n\njest.mock('../../../utils/formatters', () => ({\n  convertMsToDuration: jest.fn(ms => `${ms / 1000} seconds`),\n}));\n\ndescribe('claim command', () => {\n  let ctx;\n  let dateNowSpy;\n\n  beforeEach(() => {\n    jest.clearAllMocks();\n\n    // Mock the global db object\n    global.db = {\n      get: jest.fn().mockResolvedValue({}),\n      set: jest.fn().mockResolvedValue(true),\n    };\n\n    // Mock Date.now()\n    dateNowSpy = jest.spyOn(Date, 'now').mockReturnValue(1700000000000); // A fixed point in time\n\n    ctx = {\n      args: [],\n      isOwner: false,\n      sender: { jid: 'user123@s.whatsapp.net' },\n      getId: jid => jid.split('@')[0],\n      bot: {\n        context: {\n          formatter: {\n            quote: str => str,\n          },\n          config: {\n            msg: { footer: 'test-footer' },\n          },\n        },\n      },\n      reply: jest.fn(),\n    };\n  });\n\n  afterEach(() => {\n    dateNowSpy.mockRestore();\n  });\n\n  it('should successfully claim a daily reward', async () => {\n    // Arrange\n    ctx.args = ['daily'];\n    db.get.mockResolvedValue({ level: 5, coin: 50, lastClaim: { daily: 0 } });\n\n    // Act\n    await claimCommand.code(ctx);\n\n    // Assert\n    expect(db.set).toHaveBeenCalledWith('user.user123.coin', 150);\n    expect(db.set).toHaveBeenCalledWith('user.user123.lastClaim.daily', 1700000000000);\n    expect(ctx.reply).toHaveBeenCalledWith(\n      'âœ… You successfully claimed the daily reward of 100 coins! Your current balance is 150.'\n    );\n  });\n\n  it('should show an error if the claim type is invalid', async () => {\n    // Arrange\n    ctx.args = ['invalid_claim'];\n\n    // Act\n    await claimCommand.code(ctx);\n\n    // Assert\n    expect(ctx.reply).toHaveBeenCalledWith(\n      'âŽ Invalid option: expected one of \"daily\"|\\\"weekly\\\"|\\\"monthly\\\"|\\\"yearly\\\"'\n    );\n    expect(db.set).not.toHaveBeenCalled();\n  });\n\n  it('should show an error if the user level is too low', async () => {\n    // Arrange\n    ctx.args = ['weekly'];\n    db.get.mockResolvedValue({ level: 10, coin: 50 }); // Level 15 required\n\n    // Act\n    await claimCommand.code(ctx);\n\n    // Assert\n    expect(ctx.reply).toHaveBeenCalledWith(\n      'âŽ You need to be level 15 to claim this. Your current level is 10.'\n    );\n  });\n\n  it('should show an error if the claim is on cooldown', async () => {\n    // Arrange\n    ctx.args = ['daily'];\n    const now = 1700000000000;\n    const oneHourAgo = now - 60 * 60 * 1000;\n    db.get.mockResolvedValue({ level: 5, coin: 50, lastClaim: { daily: oneHourAgo } });\n\n    // Act\n    await claimCommand.code(ctx);\n\n    // Assert\n    expect(ctx.reply).toHaveBeenCalledWith(\n      'â³ You have already claimed the daily reward. Please wait 82800 seconds.'\n    );\n  });\n\n  it('should prevent owner from claiming', async () => {\n    // Arrange\n    ctx.args = ['daily'];\n    ctx.isOwner = true;\n\n    // Act\n    await claimCommand.code(ctx);\n\n    // Assert\n    expect(ctx.reply).toHaveBeenCalledWith('âŽ You have unlimited coins and cannot claim rewards.');\n  });\n\n  it('should show the list of available claims', async () => {\n    // Arrange\n    ctx.args = ['list'];\n\n    // Act\n    await claimCommand.code(ctx);\n\n    // Assert\n    expect(ctx.reply).toHaveBeenCalledWith({\n      text: expect.stringContaining('daily (Hadiah harian)'),\n      footer: 'test-footer',\n    });\n  });\n});\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\__tests__\\commands\\profile\\transfer.test.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":25,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":32},{"ruleId":"import-x/extensions","severity":2,"message":"Unexpected use of file extension \"js\" for \"../../../commands/profile/transfer.js\"","line":1,"column":33,"nodeType":"Literal","messageId":"unexpected","endLine":1,"endColumn":72,"suggestions":[{"fix":{"range":[32,71],"text":"'../../../commands/profile/transfer'"},"messageId":"removeUnexpected","data":{"extension":"js","importPath":"../../../commands/profile/transfer.js","fixedImportPath":"../../../commands/profile/transfer"},"desc":"Remove unexpected \"js\" file extension from \"../../../commands/profile/transfer.js\" into \"../../../commands/profile/transfer\""}]},{"ruleId":"no-undef","severity":2,"message":"'describe' is not defined.","line":3,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":3,"endColumn":9},{"ruleId":"no-undef","severity":2,"message":"'beforeEach' is not defined.","line":6,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":6,"endColumn":13},{"ruleId":"no-undef","severity":2,"message":"'global' is not defined.","line":8,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":8,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":9,"column":12,"nodeType":"Identifier","messageId":"undef","endLine":9,"endColumn":16},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":10,"column":12,"nodeType":"Identifier","messageId":"undef","endLine":10,"endColumn":16},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":11,"column":17,"nodeType":"Identifier","messageId":"undef","endLine":11,"endColumn":21},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":19,"column":21,"nodeType":"Identifier","messageId":"undef","endLine":19,"endColumn":25},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":22,"column":21,"nodeType":"Identifier","messageId":"undef","endLine":22,"endColumn":25},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":31,"column":14,"nodeType":"Identifier","messageId":"undef","endLine":31,"endColumn":18},{"ruleId":"no-undef","severity":2,"message":"'it' is not defined.","line":35,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":35,"endColumn":5},{"ruleId":"no-undef","severity":2,"message":"'db' is not defined.","line":39,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":39,"endColumn":7},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":45,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":45,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'db' is not defined.","line":45,"column":12,"nodeType":"Identifier","messageId":"undef","endLine":45,"endColumn":14},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":46,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":46,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'db' is not defined.","line":46,"column":12,"nodeType":"Identifier","messageId":"undef","endLine":46,"endColumn":14},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":47,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":47,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'it' is not defined.","line":50,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":50,"endColumn":5},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":59,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":59,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":62,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":62,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'db' is not defined.","line":62,"column":12,"nodeType":"Identifier","messageId":"undef","endLine":62,"endColumn":14},{"ruleId":"no-undef","severity":2,"message":"'it' is not defined.","line":65,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":65,"endColumn":5},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":74,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":74,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":77,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":77,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'db' is not defined.","line":77,"column":12,"nodeType":"Identifier","messageId":"undef","endLine":77,"endColumn":14},{"ruleId":"no-undef","severity":2,"message":"'it' is not defined.","line":80,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":80,"endColumn":5},{"ruleId":"no-undef","severity":2,"message":"'db' is not defined.","line":84,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":84,"endColumn":7},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":90,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":90,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":91,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":91,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'db' is not defined.","line":91,"column":12,"nodeType":"Identifier","messageId":"undef","endLine":91,"endColumn":14},{"ruleId":"no-undef","severity":2,"message":"'it' is not defined.","line":94,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":94,"endColumn":5},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":102,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":102,"endColumn":11}],"suppressedMessages":[],"errorCount":33,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const transferCommand = require('../../../commands/profile/transfer.js');\n\ndescribe('transfer command', () => {\n  let ctx;\n\n  beforeEach(() => {\n    // Mock the global db object used by the command\n    global.db = {\n      get: jest.fn(),\n      add: jest.fn(),\n      subtract: jest.fn(),\n    };\n\n    ctx = {\n      args: [],\n      quoted: null,\n      isOwner: false,\n      sender: { jid: 'sender@s.whatsapp.net' },\n      getMentioned: jest.fn().mockResolvedValue([]),\n      getId: jid => jid.split('@')[0],\n      core: {\n        onWhatsApp: jest.fn().mockResolvedValue(['exists']),\n      },\n      bot: {\n        context: {\n          formatter: {\n            quote: str => str,\n          },\n        },\n      },\n      reply: jest.fn(),\n    };\n  });\n\n  it('should successfully transfer coins to a mentioned user', async () => {\n    // Arrange\n    ctx.getMentioned.mockResolvedValue(['receiver@s.whatsapp.net']);\n    ctx.args = ['@receiver', '100'];\n    db.get.mockResolvedValue({ coin: 500 }); // Sender has enough coins\n\n    // Act\n    await transferCommand.code(ctx);\n\n    // Assert\n    expect(db.subtract).toHaveBeenCalledWith('user.sender.coin', 100);\n    expect(db.add).toHaveBeenCalledWith('user.receiver.coin', 100);\n    expect(ctx.reply).toHaveBeenCalledWith('âœ… Successfully transferred 100 coins!');\n  });\n\n  it('should reply with an error for a non-positive amount', async () => {\n    // Arrange\n    ctx.getMentioned.mockResolvedValue(['receiver@s.whatsapp.net']);\n    ctx.args = ['@receiver', '-50'];\n\n    // Act\n    await transferCommand.code(ctx);\n\n    // Assert\n    expect(ctx.reply).toHaveBeenCalledWith(\n      'âŽ Invalid amount: The amount must be a positive whole number.'\n    );\n    expect(db.add).not.toHaveBeenCalled();\n  });\n\n  it('should reply with an error for a non-numeric amount', async () => {\n    // Arrange\n    ctx.getMentioned.mockResolvedValue(['receiver@s.whatsapp.net']);\n    ctx.args = ['@receiver', 'abc'];\n\n    // Act\n    await transferCommand.code(ctx);\n\n    // Assert\n    expect(ctx.reply).toHaveBeenCalledWith(\n      'âŽ Invalid amount: Invalid input: expected number, received NaN'\n    );\n    expect(db.add).not.toHaveBeenCalled();\n  });\n\n  it('should reply with an error if the user has insufficient coins', async () => {\n    // Arrange\n    ctx.getMentioned.mockResolvedValue(['receiver@s.whatsapp.net']);\n    ctx.args = ['@receiver', '100'];\n    db.get.mockResolvedValue({ coin: 50 }); // Sender has insufficient coins\n\n    // Act\n    await transferCommand.code(ctx);\n\n    // Assert\n    expect(ctx.reply).toHaveBeenCalledWith('âŽ You do not have enough coins for this transfer!');\n    expect(db.add).not.toHaveBeenCalled();\n  });\n\n  it('should reply with help message if no user or amount is provided', async () => {\n    // Arrange\n    ctx.args = [];\n\n    // Act\n    await transferCommand.code(ctx);\n\n    // Assert\n    expect(ctx.reply).toHaveBeenCalledWith(\n      'Please specify a user and an amount to transfer.\\n\\nExample: .transfer @user 100'\n    );\n  });\n});\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\__tests__\\commands\\search\\googlesearch.test.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":22},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":2,"column":29,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":36},{"ruleId":"import-x/extensions","severity":2,"message":"Unexpected use of file extension \"js\" for \"../../../commands/search/googlesearch.js\"","line":2,"column":37,"nodeType":"Literal","messageId":"unexpected","endLine":2,"endColumn":79,"suggestions":[{"fix":{"range":[68,110],"text":"'../../../commands/search/googlesearch'"},"messageId":"removeUnexpected","data":{"extension":"js","importPath":"../../../commands/search/googlesearch.js","fixedImportPath":"../../../commands/search/googlesearch"},"desc":"Remove unexpected \"js\" file extension from \"../../../commands/search/googlesearch.js\" into \"../../../commands/search/googlesearch\""}]},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":3,"column":18,"nodeType":"Identifier","messageId":"undef","endLine":3,"endColumn":25},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":6,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":6,"endColumn":5},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":7,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":7,"endColumn":5},{"ruleId":"no-undef","severity":2,"message":"'describe' is not defined.","line":9,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":9,"endColumn":9},{"ruleId":"no-undef","severity":2,"message":"'beforeEach' is not defined.","line":12,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":12,"endColumn":13},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":13,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":13,"endColumn":9},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":29,"column":14,"nodeType":"Identifier","messageId":"undef","endLine":29,"endColumn":18},{"ruleId":"no-undef","severity":2,"message":"'it' is not defined.","line":33,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":33,"endColumn":5},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":59,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":59,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":59,"column":44,"nodeType":"Identifier","messageId":"undef","endLine":59,"endColumn":50},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":61,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":61,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":62,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":62,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'it' is not defined.","line":65,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":65,"endColumn":5},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":73,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":73,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":74,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":74,"endColumn":13},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":76,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":76,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'it' is not defined.","line":79,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":79,"endColumn":5},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":94,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":94,"endColumn":11}],"suppressedMessages":[],"errorCount":21,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const axios = require('axios');\nconst googlesearchCommand = require('../../../commands/search/googlesearch.js');\nconst apiTools = require('../../../tools/api');\n\n// Mock dependencies\njest.mock('axios');\njest.mock('../../../tools/api');\n\ndescribe('googlesearch command', () => {\n  let ctx;\n\n  beforeEach(() => {\n    jest.clearAllMocks();\n    ctx = {\n      args: [],\n      bot: {\n        context: {\n          formatter: {\n            quote: str => str,\n          },\n          config: {\n            msg: {\n              footer: 'test-footer',\n              notFound: 'not found',\n            },\n          },\n        },\n      },\n      reply: jest.fn(),\n    };\n  });\n\n  it('should return search results for a valid query', async () => {\n    // Arrange\n    ctx.args = ['what', 'is', 'love'];\n    const mockApiResponse = {\n      data: {\n        result: [\n          {\n            title: 'Haddaway - What Is Love',\n            desc: 'Music video',\n            url: 'http://example.com/haddaway',\n          },\n          {\n            title: 'What Is Love? - Wikipedia',\n            desc: 'Wikipedia article',\n            url: 'http://example.com/wiki',\n          },\n        ],\n      },\n    };\n    axios.get.mockResolvedValue(mockApiResponse);\n    apiTools.createUrl.mockReturnValue('http://mockapi.com/google?q=what+is+love');\n\n    // Act\n    await googlesearchCommand.code(ctx);\n\n    // Assert\n    expect(axios.get).toHaveBeenCalledWith(expect.stringContaining('http://mockapi.com'));\n    const replyText = ctx.reply.mock.calls[0][0].text;\n    expect(replyText).toContain('Judul: Haddaway - What Is Love');\n    expect(replyText).toContain('Judul: What Is Love? - Wikipedia');\n  });\n\n  it('should reply with an error for an empty query', async () => {\n    // Arrange\n    ctx.args = [];\n\n    // Act\n    await googlesearchCommand.code(ctx);\n\n    // Assert\n    expect(ctx.reply).toHaveBeenCalledWith(\n      expect.stringContaining('Please provide a search query.')\n    );\n    expect(axios.get).not.toHaveBeenCalled();\n  });\n\n  it('should handle no results from the API', async () => {\n    // Arrange\n    ctx.args = ['a very obscure query'];\n    const mockApiResponse = {\n      data: {\n        result: [],\n      },\n    };\n    axios.get.mockResolvedValue(mockApiResponse);\n    apiTools.createUrl.mockReturnValue('http://mockapi.com/google?q=a+very+obscure+query');\n\n    // Act\n    await googlesearchCommand.code(ctx);\n\n    // Assert\n    expect(ctx.reply).toHaveBeenCalledWith('not found');\n  });\n});\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\__tests__\\commands\\tool\\translate.test.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":22},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":2,"column":26,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":33},{"ruleId":"import-x/extensions","severity":2,"message":"Unexpected use of file extension \"js\" for \"../../../commands/tool/translate.js\"","line":2,"column":34,"nodeType":"Literal","messageId":"unexpected","endLine":2,"endColumn":71,"suggestions":[{"fix":{"range":[65,102],"text":"'../../../commands/tool/translate'"},"messageId":"removeUnexpected","data":{"extension":"js","importPath":"../../../commands/tool/translate.js","fixedImportPath":"../../../commands/tool/translate"},"desc":"Remove unexpected \"js\" file extension from \"../../../commands/tool/translate.js\" into \"../../../commands/tool/translate\""}]},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":3,"column":18,"nodeType":"Identifier","messageId":"undef","endLine":3,"endColumn":25},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":6,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":6,"endColumn":5},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":7,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":7,"endColumn":5},{"ruleId":"no-undef","severity":2,"message":"'describe' is not defined.","line":9,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":9,"endColumn":9},{"ruleId":"no-undef","severity":2,"message":"'beforeEach' is not defined.","line":12,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":12,"endColumn":13},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":13,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":13,"endColumn":9},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":29,"column":14,"nodeType":"Identifier","messageId":"undef","endLine":29,"endColumn":18},{"ruleId":"no-undef","severity":2,"message":"'it' is not defined.","line":33,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":33,"endColumn":5},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":44,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":44,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":48,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":48,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":49,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":49,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'it' is not defined.","line":52,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":52,"endColumn":5},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":68,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":68,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":70,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":70,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":71,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":71,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":72,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":72,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'it' is not defined.","line":75,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":75,"endColumn":5},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":83,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":83,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":84,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":84,"endColumn":13},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":86,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":86,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'it' is not defined.","line":89,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":89,"endColumn":5},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":98,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":98,"endColumn":11}],"suppressedMessages":[],"errorCount":25,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const axios = require('axios');\nconst translateCommand = require('../../../commands/tool/translate.js');\nconst apiTools = require('../../../tools/api');\n\n// Mock dependencies\njest.mock('axios');\njest.mock('../../../tools/api');\n\ndescribe('translate command', () => {\n  let ctx;\n\n  beforeEach(() => {\n    jest.clearAllMocks();\n    ctx = {\n      args: [],\n      quoted: null,\n      bot: {\n        context: {\n          formatter: {\n            quote: str => str,\n          },\n          config: {\n            msg: {\n              footer: 'test-footer',\n            },\n          },\n        },\n      },\n      reply: jest.fn(),\n    };\n  });\n\n  it('should translate text successfully', async () => {\n    // Arrange\n    ctx.args = ['en', 'halo', 'dunia'];\n    const mockApiResponse = { data: { translated_text: 'hello world' } };\n    axios.get.mockResolvedValue(mockApiResponse);\n    apiTools.createUrl.mockReturnValue('http://mockapi.com/translate');\n\n    // Act\n    await translateCommand.code(ctx);\n\n    // Assert\n    expect(apiTools.createUrl).toHaveBeenCalledWith('davidcyril', '/tools/translate', {\n      text: 'halo dunia',\n      to: 'en',\n    });\n    expect(axios.get).toHaveBeenCalledWith('http://mockapi.com/translate');\n    expect(ctx.reply).toHaveBeenCalledWith('hello world');\n  });\n\n  it('should fetch and display the language list for the \"list\" subcommand', async () => {\n    // Arrange\n    ctx.args = ['list'];\n    const mockLangList = {\n      data: [\n        { code: 'en', language: 'English' },\n        { code: 'id', language: 'Indonesian' },\n      ],\n    };\n    axios.get.mockResolvedValue(mockLangList);\n    apiTools.createUrl.mockReturnValue('http://mockapi.com/langlist');\n\n    // Act\n    await translateCommand.code(ctx);\n\n    // Assert\n    expect(axios.get).toHaveBeenCalledWith('http://mockapi.com/langlist');\n    const replyText = ctx.reply.mock.calls[0][0].text;\n    expect(replyText).toContain('Kode: en');\n    expect(replyText).toContain('Bahasa: English');\n    expect(replyText).toContain('Kode: id');\n  });\n\n  it('should reply with an error if no text is provided', async () => {\n    // Arrange\n    ctx.args = [];\n\n    // Act\n    await translateCommand.code(ctx);\n\n    // Assert\n    expect(ctx.reply).toHaveBeenCalledWith(\n      expect.stringContaining('Please provide text to translate.')\n    );\n    expect(axios.get).not.toHaveBeenCalled();\n  });\n\n  it('should use \"id\" as default language if no code is provided', async () => {\n    // Arrange\n    ctx.args = ['halo', 'dunia'];\n    axios.get.mockResolvedValue({ data: { translated_text: 'mock translation' } });\n\n    // Act\n    await translateCommand.code(ctx);\n\n    // Assert\n    expect(apiTools.createUrl).toHaveBeenCalledWith('davidcyril', '/tools/translate', {\n      text: 'halo dunia',\n      to: 'id',\n    });\n  });\n});\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\__tests__\\database\\chat.test.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":28,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":35},{"ruleId":"no-undef","severity":2,"message":"'describe' is not defined.","line":3,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":3,"endColumn":9},{"ruleId":"no-undef","severity":2,"message":"'beforeEach' is not defined.","line":7,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":7,"endColumn":13},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":10,"column":12,"nodeType":"Identifier","messageId":"undef","endLine":10,"endColumn":16},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":11,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":11,"endColumn":19},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":12,"column":12,"nodeType":"Identifier","messageId":"undef","endLine":12,"endColumn":16},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":13,"column":12,"nodeType":"Identifier","messageId":"undef","endLine":13,"endColumn":16},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":14,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":14,"endColumn":19},{"ruleId":"no-undef","severity":2,"message":"'it' is not defined.","line":19,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":19,"endColumn":5},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":22,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":22,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'it' is not defined.","line":25,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":25,"endColumn":5},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":32,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":32,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":33,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":33,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'it' is not defined.","line":36,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":36,"endColumn":5},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":42,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":42,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'it' is not defined.","line":45,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":45,"endColumn":5},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":54,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":54,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'it' is not defined.","line":64,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":64,"endColumn":5},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":71,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":71,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'it' is not defined.","line":81,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":81,"endColumn":5},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":84,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":84,"endColumn":11}],"suppressedMessages":[],"errorCount":21,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const createChatDatabase = require('../../database/chat');\n\ndescribe('Chat Database', () => {\n  let db;\n  let chatDB;\n\n  beforeEach(() => {\n    // Mock simpl.db\n    db = {\n      has: jest.fn(),\n      create: jest.fn(),\n      get: jest.fn(),\n      set: jest.fn(),\n      delete: jest.fn(),\n    };\n    chatDB = createChatDatabase(db);\n  });\n\n  it('should create chat table if it does not exist', () => {\n    db.has.mockReturnValue(false);\n    createChatDatabase(db);\n    expect(db.create).toHaveBeenCalledWith('chat', []);\n  });\n\n  it('should get user history', () => {\n    const userId = 'user1';\n    const history = [{ role: 'user', content: 'hello' }];\n    db.get.mockReturnValue({ key: userId, history });\n\n    const result = chatDB.getHistory(userId);\n\n    expect(db.get).toHaveBeenCalledWith('chat', { key: userId });\n    expect(result).toEqual(history);\n  });\n\n  it('should return empty array for new user', () => {\n    const userId = 'user2';\n    db.get.mockReturnValue(null);\n\n    const result = chatDB.getHistory(userId);\n\n    expect(result).toEqual([]);\n  });\n\n  it('should add a message to history', () => {\n    const userId = 'user1';\n    const message = { role: 'user', content: 'world' };\n    const existingChat = { key: userId, history: [{ role: 'user', content: 'hello' }] };\n    db.get.mockReturnValue(JSON.parse(JSON.stringify(existingChat))); // Deep copy\n\n    chatDB.addHistory(userId, message);\n\n    const expectedHistory = [...existingChat.history, message];\n    expect(db.set).toHaveBeenCalledWith(\n      'chat',\n      {\n        key: userId,\n        history: expectedHistory,\n      },\n      { key: userId }\n    );\n  });\n\n  it('should create history for new user and add message', () => {\n    const userId = 'user2';\n    const message = { role: 'user', content: 'hello' };\n    db.get.mockReturnValue(null);\n\n    chatDB.addHistory(userId, message);\n\n    expect(db.set).toHaveBeenCalledWith(\n      'chat',\n      {\n        key: userId,\n        history: [message],\n      },\n      { key: userId }\n    );\n  });\n\n  it('should clear user history', () => {\n    const userId = 'user1';\n    chatDB.clearHistory(userId);\n    expect(db.delete).toHaveBeenCalledWith('chat', { key: userId });\n  });\n});\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\__tests__\\middleware.botMode.test.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":17,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":24},{"ruleId":"import-x/extensions","severity":2,"message":"Unexpected use of file extension \"js\" for \"../middleware/botMode.js\"","line":1,"column":25,"nodeType":"Literal","messageId":"unexpected","endLine":1,"endColumn":51,"suggestions":[{"fix":{"range":[24,50],"text":"'../middleware/botMode'"},"messageId":"removeUnexpected","data":{"extension":"js","importPath":"../middleware/botMode.js","fixedImportPath":"../middleware/botMode"},"desc":"Remove unexpected \"js\" file extension from \"../middleware/botMode.js\" into \"../middleware/botMode\""}]},{"ruleId":"no-undef","severity":2,"message":"'describe' is not defined.","line":3,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":3,"endColumn":9},{"ruleId":"no-undef","severity":2,"message":"'beforeEach' is not defined.","line":6,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":6,"endColumn":13},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":12,"column":20,"nodeType":"Identifier","messageId":"undef","endLine":12,"endColumn":24},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":17,"column":16,"nodeType":"Identifier","messageId":"undef","endLine":17,"endColumn":20},{"ruleId":"no-undef","severity":2,"message":"'it' is not defined.","line":25,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":25,"endColumn":5},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":29,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":29,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'it' is not defined.","line":32,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":32,"endColumn":5},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":36,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":36,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'it' is not defined.","line":39,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":39,"endColumn":5},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":44,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":44,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'it' is not defined.","line":47,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":47,"endColumn":5},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":52,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":52,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'it' is not defined.","line":55,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":55,"endColumn":5},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":59,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":59,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'it' is not defined.","line":62,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":62,"endColumn":5},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":66,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":66,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'it' is not defined.","line":69,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":69,"endColumn":5},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":74,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":74,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'it' is not defined.","line":77,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":77,"endColumn":5},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":81,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":81,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'it' is not defined.","line":84,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":84,"endColumn":5},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":87,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":87,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'it' is not defined.","line":90,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":90,"endColumn":5},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":93,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":93,"endColumn":11}],"suppressedMessages":[],"errorCount":26,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const botMode = require('../middleware/botMode.js');\n\ndescribe('botMode middleware', () => {\n  let ctx;\n\n  beforeEach(() => {\n    ctx = {\n      self: {\n        context: {\n          database: {\n            bot: {\n              get: jest.fn(),\n            },\n          },\n        },\n      },\n      isGroup: jest.fn(),\n      isOwner: false,\n      userDb: {\n        premium: false,\n      },\n    };\n  });\n\n  it(\"should allow a non-premium user in a group when bot mode is 'group'\", async () => {\n    ctx.self.context.database.bot.get.mockResolvedValue({ mode: 'group' });\n    ctx.isGroup.mockReturnValue(true);\n    const result = await botMode(ctx, ctx.self.context);\n    expect(result).toBe(true);\n  });\n\n  it(\"should block a non-premium user in a private chat when bot mode is 'group'\", async () => {\n    ctx.self.context.database.bot.get.mockResolvedValue({ mode: 'group' });\n    ctx.isGroup.mockReturnValue(false);\n    const result = await botMode(ctx, ctx.self.context);\n    expect(result).toBe(false);\n  });\n\n  it(\"should allow a premium user in a private chat when bot mode is 'group'\", async () => {\n    ctx.self.context.database.bot.get.mockResolvedValue({ mode: 'group' });\n    ctx.isGroup.mockReturnValue(false);\n    ctx.userDb.premium = true;\n    const result = await botMode(ctx, ctx.self.context);\n    expect(result).toBe(true);\n  });\n\n  it(\"should allow an owner in a private chat when bot mode is 'group'\", async () => {\n    ctx.self.context.database.bot.get.mockResolvedValue({ mode: 'group' });\n    ctx.isGroup.mockReturnValue(false);\n    ctx.isOwner = true;\n    const result = await botMode(ctx, ctx.self.context);\n    expect(result).toBe(true);\n  });\n\n  it(\"should allow a non-premium user in a private chat when bot mode is 'private'\", async () => {\n    ctx.self.context.database.bot.get.mockResolvedValue({ mode: 'private' });\n    ctx.isGroup.mockReturnValue(false);\n    const result = await botMode(ctx, ctx.self.context);\n    expect(result).toBe(true);\n  });\n\n  it(\"should block a non-premium user in a group when bot mode is 'private'\", async () => {\n    ctx.self.context.database.bot.get.mockResolvedValue({ mode: 'private' });\n    ctx.isGroup.mockReturnValue(true);\n    const result = await botMode(ctx, ctx.self.context);\n    expect(result).toBe(false);\n  });\n\n  it(\"should allow an owner in a group when bot mode is 'private'\", async () => {\n    ctx.self.context.database.bot.get.mockResolvedValue({ mode: 'private' });\n    ctx.isGroup.mockReturnValue(true);\n    ctx.isOwner = true;\n    const result = await botMode(ctx, ctx.self.context);\n    expect(result).toBe(true);\n  });\n\n  it(\"should allow an owner when bot mode is 'self'\", async () => {\n    ctx.self.context.database.bot.get.mockResolvedValue({ mode: 'self' });\n    ctx.isOwner = true;\n    const result = await botMode(ctx, ctx.self.context);\n    expect(result).toBe(true);\n  });\n\n  it(\"should block a non-owner when bot mode is 'self'\", async () => {\n    ctx.self.context.database.bot.get.mockResolvedValue({ mode: 'self' });\n    const result = await botMode(ctx, ctx.self.context);\n    expect(result).toBe(false);\n  });\n\n  it('should allow any user when bot mode is not set', async () => {\n    ctx.self.context.database.bot.get.mockResolvedValue({});\n    const result = await botMode(ctx, ctx.self.context);\n    expect(result).toBe(true);\n  });\n});\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\__tests__\\middleware\\inputValidation.test.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":25,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":32},{"ruleId":"no-undef","severity":2,"message":"'describe' is not defined.","line":3,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":3,"endColumn":9},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":7,"column":17,"nodeType":"Identifier","messageId":"undef","endLine":7,"endColumn":21},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":19,"column":12,"nodeType":"Identifier","messageId":"undef","endLine":19,"endColumn":16},{"ruleId":"no-undef","severity":2,"message":"'beforeEach' is not defined.","line":22,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":22,"endColumn":13},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":23,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":23,"endColumn":9},{"ruleId":"no-undef","severity":2,"message":"'test' is not defined.","line":26,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":26,"endColumn":7},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":29,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":29,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":30,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":30,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":31,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":31,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'test' is not defined.","line":34,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":34,"endColumn":7},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":38,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":38,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":39,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":39,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":39,"column":48,"nodeType":"Identifier","messageId":"undef","endLine":39,"endColumn":54},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":40,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":40,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":41,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":41,"endColumn":13},{"ruleId":"no-undef","severity":2,"message":"'test' is not defined.","line":49,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":49,"endColumn":7},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":53,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":53,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":54,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":54,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'test' is not defined.","line":57,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":57,"endColumn":7},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":62,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":62,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":63,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":63,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":63,"column":48,"nodeType":"Identifier","messageId":"undef","endLine":63,"endColumn":54},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":64,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":64,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'test' is not defined.","line":67,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":67,"endColumn":7},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":71,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":71,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":72,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":72,"endColumn":11}],"suppressedMessages":[],"errorCount":27,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const validateCommand = require('../../middleware/inputValidation');\n\ndescribe('inputValidation middleware', () => {\n  const mockContext = {\n    database: {\n      auditLog: {\n        create: jest.fn().mockResolvedValue(true),\n      },\n    },\n  };\n\n  const mockCtx = {\n    used: {\n      prefix: '!',\n      command: 'youtubevideo',\n    },\n    args: [],\n    sender: { jid: 'testuser' },\n    reply: jest.fn().mockResolvedValue(true),\n  };\n\n  beforeEach(() => {\n    jest.clearAllMocks();\n  });\n\n  test('valid YouTube URL for youtubevideo', async () => {\n    mockCtx.args = ['https://www.youtube.com/watch?v=dQw4w9WgXcQ'];\n    const result = await validateCommand(mockCtx, mockContext);\n    expect(result).toBe(true);\n    expect(mockCtx.reply).not.toHaveBeenCalled();\n    expect(mockContext.database.auditLog.create).not.toHaveBeenCalled();\n  });\n\n  test('invalid URL for youtubevideo', async () => {\n    mockCtx.args = ['invalid-url'];\n    mockCtx.used.command = 'youtubevideo';\n    const result = await validateCommand(mockCtx, mockContext);\n    expect(result).toBe(false);\n    expect(mockCtx.reply).toHaveBeenCalledWith(expect.stringContaining('Invalid input'));\n    expect(mockContext.database.auditLog.create).toHaveBeenCalledWith(\n      expect.objectContaining({\n        eventType: 'input_validation_fail',\n        action: 'Invalid input for command youtubevideo',\n        actor: 'testuser',\n      })\n    );\n  });\n\n  test('valid prompt for chatgpt', async () => {\n    mockCtx.args = ['Hello, how are you?'];\n    mockCtx.used.command = 'chatgpt';\n    const result = await validateCommand(mockCtx, mockContext);\n    expect(result).toBe(true);\n    expect(mockCtx.reply).not.toHaveBeenCalled();\n  });\n\n  test('invalid prompt too long for chatgpt', async () => {\n    const longPrompt = 'a'.repeat(2001);\n    mockCtx.args = [longPrompt];\n    mockCtx.used.command = 'chatgpt';\n    const result = await validateCommand(mockCtx, mockContext);\n    expect(result).toBe(false);\n    expect(mockCtx.reply).toHaveBeenCalledWith(expect.stringContaining('Invalid input'));\n    expect(mockContext.database.auditLog.create).toHaveBeenCalled();\n  });\n\n  test('unknown command allows execution', async () => {\n    mockCtx.used.command = 'unknown';\n    mockCtx.args = ['test'];\n    const result = await validateCommand(mockCtx, mockContext);\n    expect(result).toBe(true);\n    expect(mockCtx.reply).not.toHaveBeenCalled();\n  });\n});\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\__tests__\\services\\analytics.test.js","messages":[{"ruleId":"import-x/no-extraneous-dependencies","severity":2,"message":"'ws' should be listed in the project's dependencies. Run 'npm i ws' to add it","line":1,"column":19,"nodeType":"CallExpression","messageId":"missing","endLine":1,"endColumn":32},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":19,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":26},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":2,"column":26,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":33},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":3,"column":16,"nodeType":"Identifier","messageId":"undef","endLine":3,"endColumn":23},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":5,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":5,"endColumn":5},{"ruleId":"no-undef","severity":2,"message":"'describe' is not defined.","line":7,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":7,"endColumn":9},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":8,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":8,"endColumn":7},{"ruleId":"no-undef","severity":2,"message":"'beforeEach' is not defined.","line":13,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":13,"endColumn":13},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":15,"column":20,"nodeType":"Identifier","messageId":"undef","endLine":15,"endColumn":24},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":18,"column":18,"nodeType":"Identifier","messageId":"undef","endLine":18,"endColumn":22},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":19,"column":20,"nodeType":"Identifier","messageId":"undef","endLine":19,"endColumn":24},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":20,"column":23,"nodeType":"Identifier","messageId":"undef","endLine":20,"endColumn":27},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":23,"column":18,"nodeType":"Identifier","messageId":"undef","endLine":23,"endColumn":22},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":24,"column":20,"nodeType":"Identifier","messageId":"undef","endLine":24,"endColumn":24},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":25,"column":22,"nodeType":"Identifier","messageId":"undef","endLine":25,"endColumn":26},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":26,"column":21,"nodeType":"Identifier","messageId":"undef","endLine":26,"endColumn":25},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":29,"column":19,"nodeType":"Identifier","messageId":"undef","endLine":29,"endColumn":23},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":32,"column":18,"nodeType":"Identifier","messageId":"undef","endLine":32,"endColumn":22},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":33,"column":22,"nodeType":"Identifier","messageId":"undef","endLine":33,"endColumn":26},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":34,"column":21,"nodeType":"Identifier","messageId":"undef","endLine":34,"endColumn":25},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":35,"column":22,"nodeType":"Identifier","messageId":"undef","endLine":35,"endColumn":26},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":38,"column":20,"nodeType":"Identifier","messageId":"undef","endLine":38,"endColumn":24},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":39,"column":22,"nodeType":"Identifier","messageId":"undef","endLine":39,"endColumn":26},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":42,"column":21,"nodeType":"Identifier","messageId":"undef","endLine":42,"endColumn":25},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":48,"column":11,"nodeType":"Identifier","messageId":"undef","endLine":48,"endColumn":15},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":49,"column":14,"nodeType":"Identifier","messageId":"undef","endLine":49,"endColumn":18},{"ruleId":"no-undef","severity":2,"message":"'afterEach' is not defined.","line":59,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":59,"endColumn":12},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":60,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":60,"endColumn":9},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":61,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":61,"endColumn":9},{"ruleId":"no-undef","severity":2,"message":"'describe' is not defined.","line":64,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":64,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'test' is not defined.","line":65,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":65,"endColumn":9},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":70,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":70,"endColumn":13},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":71,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":71,"endColumn":13},{"ruleId":"no-undef","severity":2,"message":"'test' is not defined.","line":74,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":74,"endColumn":9},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":79,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":79,"endColumn":13},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":80,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":80,"endColumn":13},{"ruleId":"no-undef","severity":2,"message":"'describe' is not defined.","line":84,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":84,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'beforeEach' is not defined.","line":85,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":85,"endColumn":15},{"ruleId":"no-undef","severity":2,"message":"'test' is not defined.","line":89,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":89,"endColumn":9},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":92,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":92,"endColumn":19},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":101,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":101,"endColumn":13},{"ruleId":"no-undef","severity":2,"message":"'test' is not defined.","line":109,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":109,"endColumn":9},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":112,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":112,"endColumn":19},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":127,"column":37,"nodeType":"Identifier","messageId":"undef","endLine":127,"endColumn":41},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":136,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":136,"endColumn":13},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":137,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":137,"endColumn":13},{"ruleId":"no-undef","severity":2,"message":"'test' is not defined.","line":145,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":145,"endColumn":9},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":148,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":148,"endColumn":19},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":151,"column":30,"nodeType":"Identifier","messageId":"undef","endLine":151,"endColumn":34},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":155,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":155,"endColumn":13},{"ruleId":"no-undef","severity":2,"message":"'describe' is not defined.","line":160,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":160,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'beforeEach' is not defined.","line":161,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":161,"endColumn":15},{"ruleId":"no-undef","severity":2,"message":"'test' is not defined.","line":165,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":165,"endColumn":9},{"ruleId":"no-unused-vars","severity":1,"message":"'mockUsers' is assigned a value but never used.","line":166,"column":13,"nodeType":"Identifier","messageId":"unusedVar","endLine":166,"endColumn":22,"suggestions":[{"messageId":"removeVar","data":{"varName":"mockUsers"},"fix":{"range":[4175,4254],"text":""},"desc":"Remove unused variable 'mockUsers'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'mockCommands' is assigned a value but never used.","line":168,"column":13,"nodeType":"Identifier","messageId":"unusedVar","endLine":168,"endColumn":25,"suggestions":[{"messageId":"removeVar","data":{"varName":"mockCommands"},"fix":{"range":[4262,4332],"text":""},"desc":"Remove unused variable 'mockCommands'."}]},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":182,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":182,"endColumn":13},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":183,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":183,"endColumn":13},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":184,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":184,"endColumn":13},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":185,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":185,"endColumn":13},{"ruleId":"no-undef","severity":2,"message":"'test' is not defined.","line":188,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":188,"endColumn":9},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":191,"column":30,"nodeType":"Identifier","messageId":"undef","endLine":191,"endColumn":34},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":195,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":195,"endColumn":13},{"ruleId":"no-undef","severity":2,"message":"'describe' is not defined.","line":200,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":200,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'beforeEach' is not defined.","line":201,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":201,"endColumn":15},{"ruleId":"no-undef","severity":2,"message":"'test' is not defined.","line":205,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":205,"endColumn":9},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":233,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":233,"endColumn":13},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":234,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":234,"endColumn":13},{"ruleId":"no-undef","severity":2,"message":"'test' is not defined.","line":240,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":240,"endColumn":9},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":249,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":249,"endColumn":13},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":250,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":250,"endColumn":13},{"ruleId":"no-undef","severity":2,"message":"'describe' is not defined.","line":254,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":254,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'beforeEach' is not defined.","line":255,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":255,"endColumn":15},{"ruleId":"no-undef","severity":2,"message":"'test' is not defined.","line":259,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":259,"endColumn":9},{"ruleId":"no-unused-vars","severity":1,"message":"'startDate' is assigned a value but never used.","line":260,"column":13,"nodeType":"Identifier","messageId":"unusedVar","endLine":260,"endColumn":22,"suggestions":[{"messageId":"removeVar","data":{"varName":"startDate"},"fix":{"range":[7368,7429],"text":""},"desc":"Remove unused variable 'startDate'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'endDate' is assigned a value but never used.","line":261,"column":13,"nodeType":"Identifier","messageId":"unusedVar","endLine":261,"endColumn":20,"suggestions":[{"messageId":"removeVar","data":{"varName":"endDate"},"fix":{"range":[7436,7463],"text":""},"desc":"Remove unused variable 'endDate'."}]},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":279,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":279,"endColumn":13},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":280,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":280,"endColumn":13},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":281,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":281,"endColumn":13},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":282,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":282,"endColumn":13},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":283,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":283,"endColumn":13},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":284,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":284,"endColumn":13},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":285,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":285,"endColumn":13},{"ruleId":"no-undef","severity":2,"message":"'test' is not defined.","line":288,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":288,"endColumn":9},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":297,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":297,"endColumn":13},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":298,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":298,"endColumn":13},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":299,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":299,"endColumn":13},{"ruleId":"no-undef","severity":2,"message":"'describe' is not defined.","line":303,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":303,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'beforeEach' is not defined.","line":304,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":304,"endColumn":15},{"ruleId":"no-undef","severity":2,"message":"'test' is not defined.","line":308,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":308,"endColumn":9},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":323,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":323,"endColumn":13},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":324,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":324,"endColumn":21},{"ruleId":"no-undef","severity":2,"message":"'test' is not defined.","line":337,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":337,"endColumn":9},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":340,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":340,"endColumn":19},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":348,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":348,"endColumn":13},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":349,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":349,"endColumn":13},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":350,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":350,"endColumn":13},{"ruleId":"no-undef","severity":2,"message":"'describe' is not defined.","line":354,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":354,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'beforeEach' is not defined.","line":355,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":355,"endColumn":15},{"ruleId":"no-undef","severity":2,"message":"'test' is not defined.","line":359,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":359,"endColumn":9},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":379,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":379,"endColumn":13},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":380,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":380,"endColumn":13},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":381,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":381,"endColumn":13},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":382,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":382,"endColumn":13},{"ruleId":"no-undef","severity":2,"message":"'test' is not defined.","line":385,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":385,"endColumn":9},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":402,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":402,"endColumn":13},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":403,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":403,"endColumn":13},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":404,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":404,"endColumn":13},{"ruleId":"no-undef","severity":2,"message":"'test' is not defined.","line":407,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":407,"endColumn":9},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":408,"column":13,"nodeType":"Identifier","messageId":"undef","endLine":408,"endColumn":19},{"ruleId":"no-undef","severity":2,"message":"'describe' is not defined.","line":414,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":414,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'beforeEach' is not defined.","line":415,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":415,"endColumn":15},{"ruleId":"no-undef","severity":2,"message":"'test' is not defined.","line":419,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":419,"endColumn":9},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":435,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":435,"endColumn":13},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":436,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":436,"endColumn":13},{"ruleId":"no-undef","severity":2,"message":"'describe' is not defined.","line":440,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":440,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'test' is not defined.","line":441,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":441,"endColumn":9},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":449,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":449,"endColumn":13},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":450,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":450,"endColumn":13},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":451,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":451,"endColumn":13},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":452,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":452,"endColumn":13},{"ruleId":"no-undef","severity":2,"message":"'test' is not defined.","line":455,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":455,"endColumn":9},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":456,"column":38,"nodeType":"Identifier","messageId":"undef","endLine":456,"endColumn":42},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":462,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":462,"endColumn":13},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":463,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":463,"endColumn":13},{"ruleId":"no-undef","severity":2,"message":"'describe' is not defined.","line":467,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":467,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'test' is not defined.","line":468,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":468,"endColumn":9},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":473,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":473,"endColumn":13}],"suppressedMessages":[],"errorCount":123,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const WebSocket = require('ws');\nconst AnalyticsService = require('../../src/services/analytics');\nconst logger = require('../../src/utils/logger');\n\njest.mock('ws');\n\ndescribe('AnalyticsService', () => {\n  jest.useFakeTimers();\n  let mockDatabase;\n  let analyticsService;\n  let mockWss;\n\n  beforeEach(() => {\n    mockDatabase = {\n      healthCheck: jest.fn(),\n      prisma: {\n        user: {\n          count: jest.fn(),\n          groupBy: jest.fn(),\n          findUnique: jest.fn(),\n        },\n        commandUsage: {\n          count: jest.fn(),\n          groupBy: jest.fn(),\n          aggregate: jest.fn(),\n          findMany: jest.fn(),\n        },\n        analytics: {\n          create: jest.fn(),\n        },\n        subscription: {\n          count: jest.fn(),\n          aggregate: jest.fn(),\n          findMany: jest.fn(),\n          findFirst: jest.fn(),\n        },\n        payment: {\n          groupBy: jest.fn(),\n          aggregate: jest.fn(),\n        },\n        userSession: {\n          findMany: jest.fn(),\n        },\n      },\n    };\n\n    mockWss = {\n      on: jest.fn(),\n      close: jest.fn(),\n    };\n\n    WebSocket.Server.mockImplementation(() => mockWss);\n\n    analyticsService = new AnalyticsService(mockDatabase);\n    analyticsService.wss = mockWss;\n    mockDatabase.healthCheck.mockResolvedValue({ status: 'healthy' });\n  });\n\n  afterEach(() => {\n    jest.clearAllMocks();\n    jest.clearAllTimers();\n  });\n\n  describe('initialization', () => {\n    test('should initialize successfully', async () => {\n      const config = { websocketPort: 8080 };\n\n      await analyticsService.initialize(config);\n\n      expect(WebSocket.Server).toHaveBeenCalledWith({ port: 8080 });\n      expect(analyticsService.isInitialized).toBe(true);\n    });\n\n    test('should initialize without WebSocket', async () => {\n      const config = {};\n\n      await analyticsService.initialize(config);\n\n      expect(WebSocket.Server).not.toHaveBeenCalled();\n      expect(analyticsService.isInitialized).toBe(true);\n    });\n  });\n\n  describe('WebSocket handling', () => {\n    beforeEach(async () => {\n      await analyticsService.initialize({ websocketPort: 8080 });\n    });\n\n    test('should handle subscribe message', async () => {\n      const mockWs = {\n        readyState: WebSocket.OPEN,\n        send: jest.fn(),\n      };\n\n      const mockMessage = JSON.stringify({\n        type: 'subscribe',\n      });\n\n      await analyticsService.handleWebSocketMessage(mockWs, mockMessage);\n\n      expect(mockWs.send).toHaveBeenCalledWith(\n        JSON.stringify({\n          type: 'subscribed',\n          data: { message: 'Successfully subscribed to real-time updates' },\n        })\n      );\n    });\n\n    test('should handle get_metrics message', async () => {\n      const mockWs = {\n        readyState: WebSocket.OPEN,\n        send: jest.fn(),\n      };\n\n      const mockMetrics = {\n        userGrowth: [],\n        commandUsage: [],\n        revenue: [],\n        errorRate: [],\n        summary: {\n          totalUsers: 100,\n          totalCommands: 500,\n          totalRevenue: 5000,\n        },\n      };\n\n      analyticsService.getMetrics = jest.fn().mockResolvedValue(mockMetrics);\n\n      const mockMessage = JSON.stringify({\n        type: 'get_metrics',\n        timeframe: '24h',\n      });\n\n      await analyticsService.handleWebSocketMessage(mockWs, mockMessage);\n\n      expect(analyticsService.getMetrics).toHaveBeenCalledWith('24h');\n      expect(mockWs.send).toHaveBeenCalledWith(\n        JSON.stringify({\n          type: 'metrics',\n          data: mockMetrics,\n        })\n      );\n    });\n\n    test('should handle invalid JSON', async () => {\n      const mockWs = {\n        readyState: WebSocket.OPEN,\n        send: jest.fn(),\n      };\n\n      const loggerErrorSpy = jest.spyOn(logger, 'error').mockImplementation(() => {});\n\n      await analyticsService.handleWebSocketMessage(mockWs, 'invalid json');\n\n      expect(loggerErrorSpy).toHaveBeenCalled();\n      loggerErrorSpy.mockRestore();\n    });\n  });\n\n  describe('metrics collection', () => {\n    beforeEach(async () => {\n      await analyticsService.initialize({});\n    });\n\n    test('should update metrics successfully', async () => {\n      const mockUsers = [{ lastActivity: new Date() }, { lastActivity: new Date() }];\n\n      const mockCommands = [{ usedAt: new Date() }, { usedAt: new Date() }];\n\n      mockDatabase.prisma.user.count.mockResolvedValue(2);\n      mockDatabase.prisma.commandUsage.count.mockResolvedValue(2);\n      mockDatabase.prisma.commandUsage.groupBy.mockResolvedValue([\n        { _count: { id: 1 }, success: true },\n        { _count: { id: 1 }, success: false },\n      ]);\n      mockDatabase.prisma.commandUsage.aggregate.mockResolvedValue({\n        _avg: { executionTime: 250 },\n      });\n\n      await analyticsService.updateMetrics();\n\n      expect(analyticsService.metrics.activeUsers).toBe(2);\n      expect(analyticsService.metrics.totalCommands).toBe(2);\n      expect(analyticsService.metrics.responseTime).toBe(250);\n      expect(analyticsService.metrics.errorRate).toBe(100); // 1 error out of 2 total\n    });\n\n    test('should handle metrics update errors', async () => {\n      mockDatabase.prisma.user.count.mockRejectedValue(new Error('Database error'));\n\n      const loggerErrorSpy = jest.spyOn(logger, 'error').mockImplementation(() => {});\n\n      await analyticsService.updateMetrics();\n\n      expect(loggerErrorSpy).toHaveBeenCalled();\n      loggerErrorSpy.mockRestore();\n    });\n  });\n\n  describe('dashboard data', () => {\n    beforeEach(async () => {\n      await analyticsService.initialize({});\n    });\n\n    test('should get dashboard data successfully', async () => {\n      const mockOverview = {\n        totalUsers: 100,\n        premiumUsers: 25,\n        activeUsers: 0,\n        totalCommands: 0,\n        aiRequests: 0,\n        revenue: 2500,\n      };\n\n      const mockCommandStats = [\n        { category: 'ai-chat', _count: { id: 200 } },\n        { category: 'downloader', _count: { id: 150 } },\n      ];\n\n      mockDatabase.prisma.user.count.mockResolvedValue(100);\n      mockDatabase.prisma.subscription.count.mockResolvedValue(25);\n      mockDatabase.prisma.commandUsage.count\n        .mockResolvedValueOnce(1000) // total commands\n        .mockResolvedValueOnce(200); // ai requests\n      mockDatabase.prisma.commandUsage.groupBy.mockResolvedValue(mockCommandStats);\n      mockDatabase.prisma.payment.aggregate.mockResolvedValue({\n        _sum: { amount: 2500 },\n      });\n      mockDatabase.prisma.commandUsage.findMany.mockResolvedValue([]);\n\n      const result = await analyticsService.getDashboardData();\n\n      expect(result.overview).toEqual(mockOverview);\n      expect(result.commandStats).toEqual({\n        'ai-chat': 200,\n        downloader: 150,\n      });\n    });\n\n    test('should use cached data when available', async () => {\n      const cachedData = { test: 'cached' };\n      analyticsService.cache.set('dashboard_data', {\n        data: cachedData,\n        timestamp: Date.now(),\n      });\n\n      const result = await analyticsService.getDashboardData();\n\n      expect(result).toEqual(cachedData);\n      expect(mockDatabase.prisma.user.count).not.toHaveBeenCalled();\n    });\n  });\n\n  describe('detailed metrics', () => {\n    beforeEach(async () => {\n      await analyticsService.initialize({});\n    });\n\n    test('should get metrics for 24h timeframe', async () => {\n      const startDate = new Date(Date.now() - 24 * 60 * 60 * 1000);\n      const endDate = new Date();\n\n      const mockUserGrowth = [{ createdAt: new Date(), _count: { id: 10 } }];\n\n      const mockCommandUsage = [{ usedAt: new Date(), _count: { id: 50 } }];\n\n      const mockRevenue = [{ createdAt: new Date(), _sum: { amount: 500 } }];\n\n      const mockErrorRate = [{ usedAt: new Date(), _count: { id: 10, success: 5 } }];\n\n      mockDatabase.prisma.user.groupBy.mockResolvedValue(mockUserGrowth);\n      mockDatabase.prisma.commandUsage.groupBy\n        .mockResolvedValueOnce(mockCommandUsage)\n        .mockResolvedValueOnce(mockErrorRate);\n      mockDatabase.prisma.payment.groupBy.mockResolvedValue(mockRevenue);\n\n      const result = await analyticsService.getMetrics('24h');\n\n      expect(result.timeframe).toBe('24h');\n      expect(result.userGrowth).toHaveLength(1);\n      expect(result.commandUsage).toHaveLength(1);\n      expect(result.revenue).toHaveLength(1);\n      expect(result.summary.totalUsers).toBe(10);\n      expect(result.summary.totalCommands).toBe(50);\n      expect(result.summary.totalRevenue).toBe(500);\n    });\n\n    test('should handle different timeframes', async () => {\n      mockDatabase.prisma.user.groupBy.mockResolvedValue([]);\n      mockDatabase.prisma.commandUsage.groupBy.mockResolvedValue([]);\n      mockDatabase.prisma.payment.groupBy.mockResolvedValue([]);\n\n      const result1h = await analyticsService.getMetrics('1h');\n      const result7d = await analyticsService.getMetrics('7d');\n      const result30d = await analyticsService.getMetrics('30d');\n\n      expect(result1h.timeframe).toBe('1h');\n      expect(result7d.timeframe).toBe('7d');\n      expect(result30d.timeframe).toBe('30d');\n    });\n  });\n\n  describe('event tracking', () => {\n    beforeEach(async () => {\n      await analyticsService.initialize({ websocketPort: 8080 });\n    });\n\n    test('should track user events', async () => {\n      const eventData = {\n        userId: 'user-123',\n        event: 'command_used',\n        properties: { command: '/help', success: true },\n      };\n\n      mockDatabase.prisma.analytics.create.mockResolvedValue({\n        id: 'event-123',\n        ...eventData,\n        recordedAt: new Date(),\n      });\n\n      await analyticsService.trackEvent(eventData.userId, eventData.event, eventData.properties);\n\n      expect(mockDatabase.prisma.analytics.create).toHaveBeenCalledWith({\n        data: expect.objectContaining({\n          metric: `event_${eventData.event}`,\n          value: 1,\n          category: 'behavior',\n          metadata: JSON.stringify({\n            userId: eventData.userId,\n            event: eventData.event,\n            ...eventData.properties,\n          }),\n        }),\n      });\n    });\n\n    test('should broadcast events to WebSocket clients', async () => {\n      const mockWs = {\n        readyState: WebSocket.OPEN,\n        send: jest.fn(),\n      };\n\n      analyticsService.clients.add(mockWs);\n\n      await analyticsService.trackEvent('user-123', 'test_event');\n\n      const sentData = JSON.parse(mockWs.send.mock.calls[0][0]);\n      expect(sentData.type).toBe('event');\n      expect(sentData.data.userId).toBe('user-123');\n      expect(sentData.data.event).toBe('test_event');\n    });\n  });\n\n  describe('business intelligence reports', () => {\n    beforeEach(async () => {\n      await analyticsService.initialize({});\n    });\n\n    test('should generate user engagement report', async () => {\n      const filters = {\n        startDate: new Date(Date.now() - 30 * 24 * 60 * 60 * 1000).toISOString(),\n        endDate: new Date().toISOString(),\n      };\n\n      mockDatabase.prisma.user.groupBy.mockResolvedValue([\n        { lastActivity: new Date(), _count: { id: 50 } },\n      ]);\n      mockDatabase.prisma.commandUsage.groupBy.mockResolvedValue([\n        { userId: 'user-1', _count: { id: 100 } },\n        { userId: 'user-2', _count: { id: 75 } },\n      ]);\n      mockDatabase.prisma.userSession.findMany.mockResolvedValue([\n        { startedAt: new Date(), duration: 3600 },\n      ]);\n      mockDatabase.prisma.user.findUnique.mockResolvedValue({ name: 'Test User' });\n\n      const result = await analyticsService.generateBIReport('user_engagement', filters);\n\n      expect(result.type).toBe('user_engagement');\n      expect(result.data.dailyActiveUsers).toBeDefined();\n      expect(result.data.topUsers).toBeDefined();\n      expect(result.data.sessionStats).toBeDefined();\n    });\n\n    test('should generate revenue analysis report', async () => {\n      const filters = {\n        startDate: new Date(Date.now() - 30 * 24 * 60 * 60 * 1000).toISOString(),\n        endDate: new Date().toISOString(),\n      };\n\n      mockDatabase.prisma.payment.groupBy.mockResolvedValue([\n        { userId: 'user-1', _sum: { amount: 999 } },\n      ]);\n      mockDatabase.prisma.subscription.aggregate.mockResolvedValue({\n        _count: { id: 25 },\n      });\n      mockDatabase.prisma.subscription.findMany.mockResolvedValue([]);\n      mockDatabase.prisma.subscription.findFirst.mockResolvedValue({ planKey: 'pro' });\n\n      const result = await analyticsService.generateBIReport('revenue_analysis', filters);\n\n      expect(result.type).toBe('revenue_analysis');\n      expect(result.data.totalRevenue).toBe(999);\n      expect(result.data.monthlyRecurringRevenue).toBe(25 * 9.99);\n    });\n\n    test('should handle unknown report types', async () => {\n      await expect(analyticsService.generateBIReport('unknown_report')).rejects.toThrow(\n        'Unknown report type: unknown_report'\n      );\n    });\n  });\n\n  describe('cache management', () => {\n    beforeEach(async () => {\n      await analyticsService.initialize({});\n    });\n\n    test('should clean expired cache entries', () => {\n      const now = Date.now();\n      const expiredTimestamp = now - analyticsService.cacheTimeout - 1000;\n      const validTimestamp = now - 1000;\n\n      analyticsService.cache.set('expired', {\n        data: 'expired',\n        timestamp: expiredTimestamp,\n      });\n      analyticsService.cache.set('valid', {\n        data: 'valid',\n        timestamp: validTimestamp,\n      });\n\n      analyticsService.cleanCache();\n\n      expect(analyticsService.cache.has('expired')).toBe(false);\n      expect(analyticsService.cache.has('valid')).toBe(true);\n    });\n  });\n\n  describe('health check', () => {\n    test('should return healthy status', async () => {\n      await analyticsService.initialize({ websocketPort: 8080 });\n\n      const mockWs = { readyState: WebSocket.OPEN };\n      analyticsService.clients.add(mockWs);\n\n      const health = await analyticsService.healthCheck();\n\n      expect(health.status).toBe('healthy');\n      expect(health.service).toBe('analytics');\n      expect(health.websocketClients).toBe(1);\n      expect(health.cacheEntries).toBe(0);\n    });\n\n    test('should return unhealthy status on error', async () => {\n      analyticsService.healthCheck = jest\n        .fn()\n        .mockResolvedValue({ status: 'unhealthy', service: 'analytics' });\n\n      const health = await analyticsService.healthCheck();\n\n      expect(health.status).toBe('unhealthy');\n      expect(health.service).toBe('analytics');\n    });\n  });\n\n  describe('cleanup', () => {\n    test('should close WebSocket server', async () => {\n      await analyticsService.initialize({ websocketPort: 8080 });\n\n      analyticsService.close();\n\n      expect(mockWss.close).toHaveBeenCalled();\n    });\n  });\n});\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\__tests__\\services\\database.test.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":22,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":29},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":2,"column":12,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":19},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":7,"column":17,"nodeType":"Identifier","messageId":"undef","endLine":7,"endColumn":21},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":8,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":8,"endColumn":19},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":9,"column":13,"nodeType":"Identifier","messageId":"undef","endLine":9,"endColumn":17},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":10,"column":13,"nodeType":"Identifier","messageId":"undef","endLine":10,"endColumn":17},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":11,"column":13,"nodeType":"Identifier","messageId":"undef","endLine":11,"endColumn":17},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":12,"column":12,"nodeType":"Identifier","messageId":"undef","endLine":12,"endColumn":16},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":13,"column":13,"nodeType":"Identifier","messageId":"undef","endLine":13,"endColumn":17},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":15,"column":13,"nodeType":"Identifier","messageId":"undef","endLine":15,"endColumn":17},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":16,"column":16,"nodeType":"Identifier","messageId":"undef","endLine":16,"endColumn":20},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":17,"column":8,"nodeType":"Identifier","messageId":"undef","endLine":17,"endColumn":12},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":18,"column":9,"nodeType":"Identifier","messageId":"undef","endLine":18,"endColumn":13},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":19,"column":14,"nodeType":"Identifier","messageId":"undef","endLine":19,"endColumn":18},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":22,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":22,"endColumn":5},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":23,"column":17,"nodeType":"Identifier","messageId":"undef","endLine":23,"endColumn":21},{"ruleId":"no-undef","severity":2,"message":"'describe' is not defined.","line":26,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":26,"endColumn":9},{"ruleId":"no-undef","severity":2,"message":"'beforeEach' is not defined.","line":29,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":29,"endColumn":13},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":30,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":30,"endColumn":9},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":31,"column":29,"nodeType":"Identifier","messageId":"undef","endLine":31,"endColumn":36},{"ruleId":"no-undef","severity":2,"message":"'afterEach' is not defined.","line":35,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":35,"endColumn":12},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":36,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":36,"endColumn":9},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":37,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":37,"endColumn":9},{"ruleId":"no-undef","severity":2,"message":"'test' is not defined.","line":42,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":42,"endColumn":7},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":43,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":43,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'describe' is not defined.","line":47,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":47,"endColumn":9},{"ruleId":"no-undef","severity":2,"message":"'beforeAll' is not defined.","line":51,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":51,"endColumn":12},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":53,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":53,"endColumn":12},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":56,"column":30,"nodeType":"Identifier","messageId":"undef","endLine":56,"endColumn":37},{"ruleId":"no-undef","severity":2,"message":"'afterAll' is not defined.","line":72,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":72,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":79,"column":12,"nodeType":"Identifier","messageId":"undef","endLine":79,"endColumn":19},{"ruleId":"no-undef","severity":2,"message":"'test' is not defined.","line":82,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":82,"endColumn":7},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":87,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":87,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":93,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":93,"endColumn":11}],"suppressedMessages":[],"errorCount":34,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const { execSync } = require('child_process');\nconst fs = require('fs');\n\n// Mock Prisma Client globally for DatabaseService unit tests\nconst mockPrisma = {\n  user: {\n    findUnique: jest.fn(),\n    findMany: jest.fn(),\n    create: jest.fn(),\n    update: jest.fn(),\n    delete: jest.fn(),\n    count: jest.fn(),\n    upsert: jest.fn(),\n  },\n  $connect: jest.fn(),\n  $disconnect: jest.fn(),\n  $on: jest.fn(),\n  $use: jest.fn(),\n  $queryRaw: jest.fn(),\n};\n\njest.mock('@prisma/client', () => ({\n  PrismaClient: jest.fn(() => mockPrisma),\n}));\n\ndescribe('DatabaseService', () => {\n  let dbService;\n\n  beforeEach(() => {\n    jest.resetModules(); // Reset module registry to ensure new mock is used\n    const DatabaseService = require('../../src/services/database');\n    dbService = new DatabaseService();\n  });\n\n  afterEach(() => {\n    jest.clearAllMocks();\n    jest.resetModules(); // Reset modules again after the test suite finishes\n  });\n\n  // ... (all the existing unit tests for DatabaseService)\n  // ... (The code for initialization, user operations, health check, cleanup)\n  test('should be defined', () => {\n    expect(dbService).toBeDefined();\n  });\n});\n\ndescribe('Migrations', () => {\n  let testPrisma;\n  const dbPath = './test.db';\n\n  beforeAll(async () => {\n    // Set a test database URL\n    process.env.DATABASE_URL = `file:${dbPath}`;\n\n    // Use a fresh Prisma client instance for the migration tests\n    const { PrismaClient } = require('@prisma/client');\n    testPrisma = new PrismaClient();\n\n    // Ensure database file is clean\n    if (fs.existsSync(dbPath)) {\n      fs.unlinkSync(dbPath);\n    }\n\n    // Connect and run migrations\n    await testPrisma.$connect();\n    execSync(\n      `npx prisma migrate dev --name test-migrate --schema=./prisma/schema.prisma --skip-seed --skip-generate`,\n      { stdio: 'inherit' }\n    );\n  }, 30000); // Increase timeout for migrations\n\n  afterAll(async () => {\n    await testPrisma.$disconnect();\n    // Clean up the test database file\n    if (fs.existsSync(dbPath)) {\n      fs.unlinkSync(dbPath);\n    }\n    // Restore the default DATABASE_URL to prevent side effects\n    delete process.env.DATABASE_URL;\n  });\n\n  test('Models created after migrate', async () => {\n    // Test User\n    const user = await testPrisma.user.create({\n      data: { name: 'test', jid: 'testuser@s.whatsapp.net' },\n    });\n    expect(user).toHaveProperty('id');\n\n    // Test UserViolation\n    const violation = await testPrisma.userViolation.create({\n      data: { userId: user.id, violationType: 'spam' },\n    });\n    expect(violation).toHaveProperty('severity', 'low');\n  });\n});\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\__tests__\\tools.msg.test.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":21,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":28},{"ruleId":"import-x/extensions","severity":2,"message":"Unexpected use of file extension \"js\" for \"../tools/msg.js\"","line":1,"column":29,"nodeType":"Literal","messageId":"unexpected","endLine":1,"endColumn":46,"suggestions":[{"fix":{"range":[28,45],"text":"'../tools/msg'"},"messageId":"removeUnexpected","data":{"extension":"js","importPath":"../tools/msg.js","fixedImportPath":"../tools/msg"},"desc":"Remove unexpected \"js\" file extension from \"../tools/msg.js\" into \"../tools/msg\""}]},{"ruleId":"no-undef","severity":2,"message":"'describe' is not defined.","line":3,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":3,"endColumn":9},{"ruleId":"no-undef","severity":2,"message":"'it' is not defined.","line":4,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":4,"endColumn":5},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":5,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":5,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'it' is not defined.","line":8,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":8,"endColumn":5},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":9,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":9,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'it' is not defined.","line":12,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":12,"endColumn":5},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":13,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":13,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'it' is not defined.","line":16,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":16,"endColumn":5},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":17,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":17,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'it' is not defined.","line":20,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":20,"endColumn":5},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":21,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":21,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'it' is not defined.","line":24,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":24,"endColumn":5},{"ruleId":"no-undef","severity":2,"message":"'expect' is not defined.","line":25,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":25,"endColumn":11}],"suppressedMessages":[],"errorCount":15,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const { ucwords } = require('../tools/msg.js');\n\ndescribe('ucwords', () => {\n  it('should capitalize the first letter of each word', () => {\n    expect(ucwords('hello world')).toBe('Hello World');\n  });\n\n  it('should handle single words', () => {\n    expect(ucwords('hello')).toBe('Hello');\n  });\n\n  it('should handle already capitalized words', () => {\n    expect(ucwords('Hello World')).toBe('Hello World');\n  });\n\n  it('should handle mixed case words', () => {\n    expect(ucwords('hELLo wORLd')).toBe('Hello World');\n  });\n\n  it('should return null for null input', () => {\n    expect(ucwords(null)).toBeNull();\n  });\n\n  it('should return null for empty string', () => {\n    expect(ucwords('')).toBe(null);\n  });\n});\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\ai-chat\\chatgpt.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":23,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":30},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":2,"column":17,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":24},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":3,"column":18,"nodeType":"Identifier","messageId":"undef","endLine":3,"endColumn":25},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":10,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":10,"endColumn":7},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":88,"column":11,"nodeType":"MemberExpression","messageId":"unexpected","endLine":88,"endColumn":22,"suggestions":[{"fix":{"range":[3035,3122],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":92,"column":13,"nodeType":"MemberExpression","messageId":"unexpected","endLine":92,"endColumn":25,"suggestions":[{"fix":{"range":[3215,3273],"text":""},"messageId":"removeConsole","data":{"propertyName":"warn"},"desc":"Remove the console.warn()."}]},{"ruleId":"no-continue","severity":2,"message":"Unexpected use of continue statement.","line":99,"column":13,"nodeType":"ContinueStatement","messageId":"unexpected","endLine":99,"endColumn":22},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":124,"column":15,"nodeType":"MemberExpression","messageId":"unexpected","endLine":124,"endColumn":26,"suggestions":[{"fix":{"range":[4594,4649],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":127,"column":15,"nodeType":"MemberExpression","messageId":"unexpected","endLine":127,"endColumn":28,"suggestions":[{"fix":{"range":[4742,4805],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":149,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":149,"endColumn":20,"suggestions":[{"fix":{"range":[5586,5607],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]}],"suppressedMessages":[{"ruleId":"no-restricted-syntax","severity":2,"message":"iterators/generators require regenerator-runtime, which is too heavyweight for this guide to allow them. Separately, loops should be avoided in favor of array iterations.","line":83,"column":9,"nodeType":"ForOfStatement","messageId":"restrictedSyntax","endLine":136,"endColumn":10,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-await-in-loop","severity":2,"message":"Unexpected `await` inside a loop.","line":122,"column":15,"nodeType":"AwaitExpression","messageId":"unexpectedAwait","endLine":122,"endColumn":56,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":5,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const OpenAIService = require('../../services/openai');\nconst aiTools = require('../../tools/ai-tools');\nconst aiChatDB = require('../../database/ai_chat_database');\n\n// Constants for summarization logic\nconst SUMMARIZE_THRESHOLD = 16;\nconst MESSAGES_TO_SUMMARIZE = 10;\nconst HISTORY_PRUNE_LENGTH = 6;\n\nmodule.exports = {\n  name: 'chatgpt',\n  aliases: ['ai', 'ask', 'chat'],\n  category: 'ai-chat',\n  permissions: {\n    coin: 15,\n  },\n  code: async ctx => {\n    const { formatter, config } = ctx.bot.context;\n    const input = ctx.args.join(' ') || ctx.quoted?.content || null;\n\n    if (!config.api.openai) {\n      return ctx.reply(formatter.quote('â›” OpenAI API key is not configured.'));\n    }\n\n    if (!input) {\n      return ctx.reply(formatter.quote('Please provide an input text.'));\n    }\n\n    try {\n      const openAIService = new OpenAIService(config.api.openai);\n      const userId = ctx.author.id;\n\n      const chat = (await aiChatDB.getChat(userId)) || { history: [], summary: '' };\n      let currentHistory = chat.history || [];\n      let currentSummary = chat.summary || '';\n\n      // Summarization Logic\n      if (currentHistory.length >= SUMMARIZE_THRESHOLD) {\n        const messagesToSummarize = currentHistory.slice(0, MESSAGES_TO_SUMMARIZE);\n        if (messagesToSummarize.length > 0) {\n          const newSummary = await openAIService.getSummary(messagesToSummarize);\n          currentSummary = currentSummary ? `${currentSummary}\\n\\n${newSummary}` : newSummary;\n          currentHistory = currentHistory.slice(-HISTORY_PRUNE_LENGTH);\n          await aiChatDB.updateChat(userId, { history: currentHistory, summary: currentSummary });\n        }\n      }\n\n      const systemMessage = `You are a helpful assistant. You can use tools to answer questions.${currentSummary ? `\\n\\nSummary of past conversation:\\n${currentSummary}` : ''}`;\n      const messages = [\n        { role: 'system', content: systemMessage },\n        ...currentHistory,\n        { role: 'user', content: input },\n      ];\n\n      const response = await openAIService.getChatCompletion(messages, aiTools);\n      const responseMessage = response.message;\n\n      // Whitelist of safe commands for tool calls (only read-only, no modifications)\n      const SAFE_COMMANDS = new Set([\n        'ping',\n        'about',\n        'uptime',\n        'price',\n        'suggest',\n        'tqto',\n        'listapis',\n        'googlesearch',\n        'youtubesearch',\n        'githubsearch',\n        'npmsearch',\n        'translate',\n        'weather',\n        'gempa',\n        'holiday',\n        'faktaunik',\n        'quotes',\n        'proverb',\n      ]);\n\n      if (response.finish_reason === 'tool_calls' && responseMessage.tool_calls) {\n        messages.push(responseMessage);\n        // eslint-disable-next-line no-restricted-syntax\n        for (const toolCall of responseMessage.tool_calls) {\n          const functionName = toolCall.function.name;\n          const functionArgs = JSON.parse(toolCall.function.arguments);\n\n          // Log tool call attempt\n          console.log(`AI Tool Call: ${functionName} with args ${JSON.stringify(functionArgs)}`);\n\n          // Check whitelist\n          if (!SAFE_COMMANDS.has(functionName)) {\n            console.warn(`Unsafe tool call blocked: ${functionName}`);\n            messages.push({\n              tool_call_id: toolCall.id,\n              role: 'tool',\n              name: functionName,\n              content: `Error: Command \"${functionName}\" is not allowed for tool execution.`,\n            });\n            continue;\n          }\n\n          const commandToExecute = ctx.bot.cmd.get(functionName);\n          let toolResponse = 'Error: Command not found.';\n          if (commandToExecute) {\n            try {\n              let commandOutput = '';\n              // Sandboxed ctx: only reply, args, basic props - no group ops, owner access, exec\n              const sandboxedCtx = {\n                ...ctx,\n                args: Object.values(functionArgs),\n                reply: output => {\n                  commandOutput = typeof output === 'object' ? JSON.stringify(output) : output;\n                },\n                // Remove dangerous properties\n                group: undefined,\n                sender: { jid: ctx.sender.jid }, // Read-only\n                isGroup: ctx.isGroup,\n                getId: ctx.getId,\n                // No access to bot.cmd full set, database, etc.\n              };\n              // eslint-disable-next-line no-await-in-loop\n              await commandToExecute.code(sandboxedCtx);\n              toolResponse = commandOutput;\n              console.log(`Tool execution success: ${functionName}`);\n            } catch (e) {\n              toolResponse = `Error: ${e.message}`;\n              console.error(`Tool execution failed for ${functionName}:`, e);\n            }\n          }\n          messages.push({\n            tool_call_id: toolCall.id,\n            role: 'tool',\n            name: functionName,\n            content: toolResponse,\n          });\n        }\n\n        const finalResponse = await openAIService.getChatCompletion(messages);\n        const finalMessageContent = finalResponse.message.content;\n        messages.push(finalResponse.message);\n        await aiChatDB.updateChat(userId, { history: messages, summary: currentSummary });\n        return ctx.reply(finalMessageContent);\n      }\n      const result = responseMessage.content;\n      messages.push(responseMessage);\n      await aiChatDB.updateChat(userId, { history: messages, summary: currentSummary });\n      return ctx.reply(result);\n    } catch (error) {\n      console.error(error);\n      return ctx.reply(formatter.quote(`An error occurred: ${error.message}`));\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\ai-chat\\clearchat.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":1,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":7}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"module.exports = {\n  name: 'clearchat',\n  aliases: ['cchat', 'cleangpt'],\n  category: 'ai-chat',\n  permissions: {\n    coin: 0,\n  },\n  code: async ctx => {\n    const { database, formatter } = ctx.bot.context;\n    const userId = ctx.author.id;\n\n    try {\n      database.chat.clearHistory(userId);\n      await ctx.reply(formatter.quote('âœ… Your chat history has been cleared.'));\n    } catch (error) {\n      const {\n        config,\n        tools: { cmd },\n      } = ctx.bot.context;\n      await cmd.handleError(config, ctx, error, true);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\ai-chat\\deepseek.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":22},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":2,"column":23,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":30},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":4,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":4,"endColumn":7},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":27,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":27,"endColumn":20,"suggestions":[{"fix":{"range":[674,695],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const axios = require('axios');\nconst { createUrl } = require('../../tools/api');\n\nmodule.exports = {\n  name: 'deepseek',\n  category: 'ai-chat',\n  permissions: {\n    coin: 10,\n  },\n  code: async ctx => {\n    const { formatter } = ctx.bot.context;\n    const input = ctx.args.join(' ') || ctx.quoted?.content || null;\n\n    if (!input) {\n      return ctx.reply(formatter.quote('Please provide an input text.'));\n    }\n\n    try {\n      const apiUrl = createUrl('izumi', '/ai/deepseek', {\n        input,\n      });\n      const response = await axios.get(apiUrl);\n      const result = response.data.result.data.message;\n\n      return ctx.reply(result);\n    } catch (error) {\n      console.error(error);\n      return ctx.reply(formatter.quote(`An error occurred: ${error.message}`));\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\ai-chat\\felo.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":22},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":2,"column":23,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":30},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":4,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":4,"endColumn":7},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":28,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":28,"endColumn":20,"suggestions":[{"fix":{"range":[690,711],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const axios = require('axios');\nconst { createUrl } = require('../../tools/api');\n\nmodule.exports = {\n  name: 'felo',\n  aliases: ['feloai'],\n  category: 'ai-chat',\n  permissions: {\n    coin: 10,\n  },\n  code: async ctx => {\n    const { formatter } = ctx.bot.context;\n    const input = ctx.args.join(' ') || ctx.quoted?.content || null;\n\n    if (!input) {\n      return ctx.reply(formatter.quote('Please provide an input text.'));\n    }\n\n    try {\n      const apiUrl = createUrl('izumi', '/ai/feloai', {\n        query: input,\n      });\n      const response = await axios.get(apiUrl);\n      const result = response.data.result.text;\n\n      return ctx.reply(result);\n    } catch (error) {\n      console.error(error);\n      return ctx.reply(formatter.quote(`An error occurred: ${error.message}`));\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\ai-chat\\gemini.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":11,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":18},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":2,"column":23,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":30},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":3,"column":17,"nodeType":"Identifier","messageId":"undef","endLine":3,"endColumn":24},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":4,"column":18,"nodeType":"Identifier","messageId":"undef","endLine":4,"endColumn":25},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":7,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":7,"endColumn":7},{"ruleId":"no-restricted-syntax","severity":2,"message":"iterators/generators require regenerator-runtime, which is too heavyweight for this guide to allow them. Separately, loops should be avoided in favor of array iterations.","line":66,"column":9,"nodeType":"ForOfStatement","messageId":"restrictedSyntax","endLine":108,"endColumn":10},{"ruleId":"no-await-in-loop","severity":2,"message":"Unexpected `await` inside a loop.","line":94,"column":15,"nodeType":"AwaitExpression","messageId":"unexpectedAwait","endLine":94,"endColumn":51},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":96,"column":15,"nodeType":"MemberExpression","messageId":"unexpected","endLine":96,"endColumn":26,"suggestions":[{"fix":{"range":[3809,3864],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":121,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":121,"endColumn":20,"suggestions":[{"fix":{"range":[4791,4812],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]}],"suppressedMessages":[],"errorCount":7,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const z = require('zod');\nconst GeminiService = require('../../services/gemini');\nconst aiTools = require('../../tools/ai-tools');\nconst aiChatDB = require('../../database/ai_chat_database');\n\n// Constants for summarization logic\nmodule.exports = {\n  name: 'gemini',\n  category: 'ai-chat',\n  permissions: {\n    coin: 10,\n  },\n  code: async ctx => {\n    const { formatter } = ctx.bot.context;\n\n    // Constants for summarization logic\n    const {\n      SUMMARIZE_THRESHOLD = 16,\n      MESSAGES_TO_SUMMARIZE = 10,\n      HISTORY_PRUNE_LENGTH = 6,\n    } = ctx.bot.context.config.ai.summarization;\n\n    try {\n      const input = ctx.args.join(' ') || ctx.quoted?.content || '';\n\n      // Validation\n      const inputSchema = z.string().min(1, { message: 'Please provide an input text.' });\n      const validationResult = inputSchema.safeParse(input);\n      if (!validationResult.success) {\n        return ctx.reply(formatter.quote(`âŽ ${validationResult.error.issues[0].message}`));\n      }\n      const validatedInput = validationResult.data;\n\n      // Service call with tool handling\n      const geminiService = new GeminiService();\n      const userId = ctx.author.id;\n\n      const chat = (await aiChatDB.getChat(userId)) || { history: [], summary: '' };\n      let currentHistory = chat.history || [];\n      let currentSummary = chat.summary || '';\n\n      // Summarization Logic\n      if (currentHistory.length >= SUMMARIZE_THRESHOLD) {\n        const messagesToSummarize = currentHistory.slice(0, MESSAGES_TO_SUMMARIZE);\n        if (messagesToSummarize.length > 0) {\n          const newSummary = await geminiService.getSummary(messagesToSummarize);\n          currentSummary = currentSummary ? `${currentSummary}\\n\\n${newSummary}` : newSummary;\n          currentHistory = currentHistory.slice(-HISTORY_PRUNE_LENGTH);\n          // The database update will happen in the next step.\n        }\n      }\n\n      const systemMessage = `You are a helpful assistant. You can use tools to answer questions.${currentSummary ? `\\n\\nSummary of past conversation:\\n${currentSummary}` : ''}`;\n      const messages = [\n        { role: 'system', content: systemMessage },\n        ...currentHistory,\n        { role: 'user', content: validatedInput },\n      ];\n\n      const response = await geminiService.getChatCompletionWithTools(messages, aiTools);\n      const responseMessage = response.message;\n\n      if (response.finish_reason === 'tool_calls' && responseMessage.tool_calls) {\n        messages.push(responseMessage);\n\n        for (const toolCall of responseMessage.tool_calls) {\n          const functionName = toolCall.function.name;\n          const functionArgs = JSON.parse(toolCall.function.arguments);\n          const commandToExecute = ctx.bot.cmd.get(functionName);\n          let toolResponse = 'Error: Command not found.';\n\n          if (commandToExecute) {\n            try {\n              let commandOutput = '';\n              // The weather command expects args to be a string, not an array.\n              // We need to handle different argument structures.\n              const argsForCommand =\n                functionName === 'weather'\n                  ? Object.values(functionArgs).join(' ')\n                  : Object.values(functionArgs);\n\n              const mockCtx = {\n                ...ctx,\n                args: argsForCommand,\n                reply: output => {\n                  commandOutput = typeof output === 'object' ? JSON.stringify(output) : output;\n                },\n                // Remove dangerous properties\n                group: undefined,\n                sender: { jid: ctx.sender.jid },\n                isGroup: ctx.isGroup,\n                getId: ctx.getId,\n              };\n              await commandToExecute.code(mockCtx);\n              toolResponse = commandOutput;\n              console.log(`Tool execution success: ${functionName}`);\n            } catch (e) {\n              toolResponse = `Error executing tool ${functionName}: ${e.message}`;\n            }\n          }\n\n          messages.push({\n            tool_call_id: toolCall.id,\n            role: 'tool',\n            name: functionName,\n            content: toolResponse,\n          });\n        }\n\n        const finalResponse = await geminiService.getChatCompletionWithTools(messages, aiTools);\n        const finalMessageContent = finalResponse.message.content;\n        messages.push(finalResponse.message);\n        await aiChatDB.updateChat(userId, { history: messages.slice(1), summary: currentSummary });\n        return ctx.reply(finalMessageContent);\n      }\n      const result = responseMessage.content;\n      messages.push(responseMessage);\n      await aiChatDB.updateChat(userId, { history: messages.slice(1), summary: currentSummary });\n      return ctx.reply(result);\n    } catch (error) {\n      console.error(error);\n      return ctx.reply(formatter.quote(`An error occurred: ${error.message}`));\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\ai-chat\\hika.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":22},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":2,"column":23,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":30},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":4,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":4,"endColumn":7},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":28,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":28,"endColumn":20,"suggestions":[{"fix":{"range":[695,716],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const axios = require('axios');\nconst { createUrl } = require('../../tools/api');\n\nmodule.exports = {\n  name: 'hika',\n  aliases: ['hikachat'],\n  category: 'ai-chat',\n  permissions: {\n    coin: 10,\n  },\n  code: async ctx => {\n    const { formatter } = ctx.bot.context;\n    const input = ctx.args.join(' ') || ctx.quoted?.content || null;\n\n    if (!input) {\n      return ctx.reply(formatter.quote('Please provide an input text.'));\n    }\n\n    try {\n      const apiUrl = createUrl('siputzx', '/api/ai/hikachat', {\n        keyword: input,\n      });\n      const response = await axios.get(apiUrl);\n      const result = response.data.data;\n\n      return ctx.reply(result);\n    } catch (error) {\n      console.error(error);\n      return ctx.reply(formatter.quote(`An error occurred: ${error.message}`));\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\ai-chat\\venice.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":22},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":2,"column":23,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":30},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":4,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":4,"endColumn":7},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":28,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":28,"endColumn":20,"suggestions":[{"fix":{"range":[688,709],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const axios = require('axios');\nconst { createUrl } = require('../../tools/api');\n\nmodule.exports = {\n  name: 'venice',\n  aliases: ['veniceai'],\n  category: 'ai-chat',\n  permissions: {\n    coin: 10,\n  },\n  code: async ctx => {\n    const { formatter } = ctx.bot.context;\n    const input = ctx.args.join(' ') || ctx.quoted?.content || null;\n\n    if (!input) {\n      return ctx.reply(formatter.quote('Please provide an input text.'));\n    }\n\n    try {\n      const apiUrl = createUrl('hang', '/ai/venicechat', {\n        text: input,\n      });\n      const response = await axios.get(apiUrl);\n      const { result } = response.data;\n\n      return ctx.reply(result);\n    } catch (error) {\n      console.error(error);\n      return ctx.reply(formatter.quote(`An error occurred: ${error.message}`));\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\ai-image\\animagine.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":22},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":3,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":3,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":10,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":10,"endColumn":21}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const axios = require('axios');\n\nmodule.exports = {\n  name: 'animagine',\n  aliases: ['animaginexl'],\n  category: 'ai-image',\n  permissions: {\n    premium: true,\n  },\n  code: async ctx => {\n    const { formatter, tools, config } = ctx.bot.context;\n    const input = ctx.args.join(' ') || ctx.quoted?.content || null;\n\n    if (!input)\n      return await ctx.reply(\n        `${formatter.quote(tools.msg.generateInstruction(['send'], ['text']))}\\n` +\n          `${formatter.quote(tools.msg.generateCmdExample(ctx.used, 'anime girl with short blue hair'))}\\n${formatter.quote(\n            tools.msg.generateNotes([\n              'Balas atau quote pesan untuk menjadikan teks sebagai input target, jika teks memerlukan baris baru.',\n            ])\n          )}`\n      );\n\n    try {\n      const apiUrl = tools.api.createUrl('neko', '/ai-img/animagine-xl-3.1', {\n        text: input,\n      });\n      const result = tools.cmd.getRandomElement((await axios.get(apiUrl)).data.result);\n\n      await ctx.reply({\n        image: {\n          url: result,\n        },\n        mimetype: tools.mime.lookup('jpeg'),\n        caption: formatter.quote(`Prompt: ${input}`),\n        footer: config.msg.footer,\n        buttons: [\n          {\n            buttonId: `${ctx.used.prefix + ctx.used.command} ${input}`,\n            buttonText: {\n              displayText: 'Ambil Lagi',\n            },\n          },\n        ],\n      });\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error, true);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\ai-image\\dalle.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":1,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":7,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":7,"endColumn":21}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"module.exports = {\n  name: 'dalle',\n  category: 'ai-image',\n  permissions: {\n    coin: 10,\n  },\n  code: async ctx => {\n    const { formatter, tools, config } = ctx.bot.context;\n    const input = ctx.args.join(' ') || ctx.quoted?.content || null;\n\n    if (!input)\n      return await ctx.reply(\n        `${formatter.quote(tools.msg.generateInstruction(['send'], ['text']))}\\n` +\n          `${formatter.quote(tools.msg.generateCmdExample(ctx.used, 'anime girl with short blue hair'))}\\n${formatter.quote(\n            tools.msg.generateNotes([\n              'Balas atau quote pesan untuk menjadikan teks sebagai input target, jika teks memerlukan baris baru.',\n            ])\n          )}`\n      );\n\n    try {\n      const result = tools.api.createUrl('davidcyril', '/ai/dalle', {\n        text: input,\n      });\n\n      await ctx.reply({\n        image: {\n          url: result,\n        },\n        mimetype: tools.mime.lookup('png'),\n        caption: formatter.quote(`Prompt: ${input}`),\n        footer: config.msg.footer,\n        buttons: [\n          {\n            buttonId: `${ctx.used.prefix + ctx.used.command} ${input}`,\n            buttonText: {\n              displayText: 'Ambil Lagi',\n            },\n          },\n        ],\n      });\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error, true);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\ai-image\\deepdreams.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":22},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":3,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":3,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":10,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":10,"endColumn":21}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const axios = require('axios');\n\nmodule.exports = {\n  name: 'deepdreams',\n  aliases: ['deepd'],\n  category: 'ai-image',\n  permissions: {\n    coin: 10,\n  },\n  code: async ctx => {\n    const { formatter, tools, config } = ctx.bot.context;\n    const input = ctx.args.join(' ') || ctx.quoted?.content || null;\n\n    if (!input)\n      return await ctx.reply(\n        `${formatter.quote(tools.msg.generateInstruction(['send'], ['text']))}\\n` +\n          `${formatter.quote(tools.msg.generateCmdExample(ctx.used, 'anime girl with short blue hair'))}\\n${formatter.quote(\n            tools.msg.generateNotes([\n              'Balas atau quote pesan untuk menjadikan teks sebagai input target, jika teks memerlukan baris baru.',\n            ])\n          )}`\n      );\n\n    try {\n      const apiUrl = tools.api.createUrl('zell', '/ai/deepdreams', {\n        prompt: input,\n      });\n      const result = tools.cmd.getRandomElement((await axios.get(apiUrl)).data.result).imageUrl;\n\n      await ctx.reply({\n        image: {\n          url: result,\n        },\n        mimetype: tools.mime.lookup('jpeg'),\n        caption: formatter.quote(`Prompt: ${input}`),\n        footer: config.msg.footer,\n        buttons: [\n          {\n            buttonId: `${ctx.used.prefix + ctx.used.command} ${input}`,\n            buttonText: {\n              displayText: 'Ambil Lagi',\n            },\n          },\n        ],\n      });\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error, true);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\ai-image\\flux.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":1,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":7,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":7,"endColumn":21},{"ruleId":"no-unused-vars","severity":1,"message":"'apiUrl' is assigned a value but never used.","line":22,"column":13,"nodeType":"Identifier","messageId":"unusedVar","endLine":22,"endColumn":19,"suggestions":[{"messageId":"removeVar","data":{"varName":"apiUrl"},"fix":{"range":[716,808],"text":""},"desc":"Remove unused variable 'apiUrl'."}]},{"ruleId":"no-undef","severity":2,"message":"'result' is not defined.","line":28,"column":16,"nodeType":"Identifier","messageId":"undef","endLine":28,"endColumn":22}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"module.exports = {\n  name: 'flux',\n  category: 'ai-image',\n  permissions: {\n    premium: true,\n  },\n  code: async ctx => {\n    const { formatter, tools, config } = ctx.bot.context;\n    const input = ctx.args.join(' ') || ctx.quoted?.content || null;\n\n    if (!input)\n      return await ctx.reply(\n        `${formatter.quote(tools.msg.generateInstruction(['send'], ['text']))}\\n` +\n          `${formatter.quote(tools.msg.generateCmdExample(ctx.used, 'anime girl with short blue hair'))}\\n${formatter.quote(\n            tools.msg.generateNotes([\n              'Balas atau quote pesan untuk menjadikan teks sebagai input target, jika teks memerlukan baris baru.',\n            ])\n          )}`\n      );\n\n    try {\n      const apiUrl = tools.api.createUrl('davidcyril', '/flux', {\n        prompt: input,\n      });\n\n      await ctx.reply({\n        image: {\n          url: result,\n        },\n        mimetype: tools.mime.lookup('png'),\n        caption: formatter.quote(`Prompt: ${input}`),\n        footer: config.msg.footer,\n        buttons: [\n          {\n            buttonId: `${ctx.used.prefix + ctx.used.command} ${input}`,\n            buttonText: {\n              displayText: 'Ambil Lagi',\n            },\n          },\n        ],\n      });\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error, true);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\ai-image\\text2image.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":1,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":8,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":8,"endColumn":21}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"module.exports = {\n  name: 'text2image',\n  aliases: ['text2img', 'texttoimage', 'texttoimg'],\n  category: 'ai-image',\n  permissions: {\n    coin: 10,\n  },\n  code: async ctx => {\n    const { formatter, tools, config } = ctx.bot.context;\n    const input = ctx.args.join(' ') || ctx.quoted?.content || null;\n\n    if (!input)\n      return await ctx.reply(\n        `${formatter.quote(tools.msg.generateInstruction(['send'], ['text']))}\\n` +\n          `${formatter.quote(tools.msg.generateCmdExample(ctx.used, 'anime girl with short blue hair'))}\\n${formatter.quote(\n            tools.msg.generateNotes([\n              'Balas atau quote pesan untuk menjadikan teks sebagai input target, jika teks memerlukan baris baru.',\n            ])\n          )}`\n      );\n\n    try {\n      const result = tools.api.createUrl('zell', '/ai/text2image', {\n        prompt: input,\n      });\n\n      await ctx.reply({\n        image: {\n          url: result,\n        },\n        mimetype: tools.mime.lookup('jpg'),\n        caption: formatter.quote(`Prompt: ${input}`),\n        footer: config.msg.footer,\n        buttons: [\n          {\n            buttonId: `${ctx.used.prefix + ctx.used.command} ${input}`,\n            buttonText: {\n              displayText: 'Ambil Lagi',\n            },\n          },\n        ],\n      });\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error, true);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\ai-misc\\editimage.js","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'tools' is assigned a value but never used.","line":1,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":12,"suggestions":[{"messageId":"removeVar","data":{"varName":"tools"},"fix":{"range":[0,45],"text":""},"desc":"Remove unused variable 'tools'."}]},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":22},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":3,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":3,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":10,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":10,"endColumn":21},{"ruleId":"no-shadow","severity":2,"message":"'tools' is already declared in the upper scope on line 1 column 7.","line":11,"column":24,"nodeType":"Identifier","messageId":"noShadow","endLine":11,"endColumn":29}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const tools = require('../../tools/exports');\n\nmodule.exports = {\n  name: 'editimage',\n  aliases: ['editimg'],\n  category: 'ai-misc',\n  permissions: {\n    premium: true,\n  },\n  code: async ctx => {\n    const { formatter, tools, config } = ctx.bot.context;\n    const input = ctx.args.join(' ') || null;\n\n    if (!input)\n      return await ctx.reply(\n        `${formatter.quote(tools.msg.generateInstruction(['send'], ['text']))}\\n${formatter.quote(\n          tools.msg.generateCmdExample(ctx.used, 'make it evangelion art style')\n        )}`\n      );\n\n    const [checkMedia, checkQuotedMedia] = await Promise.all([\n      tools.cmd.checkMedia(ctx.msg.contentType, 'image'),\n      tools.cmd.checkQuotedMedia(ctx.quoted?.contentType, 'image'),\n    ]);\n\n    if (!checkMedia && !checkQuotedMedia)\n      return await ctx.reply(\n        formatter.quote(tools.msg.generateInstruction(['send', 'reply'], 'image'))\n      );\n\n    try {\n      const buffer = (await ctx.msg.media.toBuffer()) || (await ctx.quoted?.media.toBuffer());\n      const uploadUrl = await tools.api.uploadImage(buffer);\n      const result = tools.api.createUrl('zell', '/ai/editimg', {\n        imageUrl: uploadUrl,\n        prompt: input,\n      });\n\n      await ctx.reply({\n        image: {\n          url: result,\n        },\n        mimetype: tools.mime.lookup('png'),\n        caption: formatter.quote('Untukmu, tuan!'),\n        footer: config.msg.footer,\n      });\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error, true);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\ai-misc\\geminicanvas.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":22},{"ruleId":"no-unused-vars","severity":1,"message":"'tools' is assigned a value but never used.","line":2,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":12,"suggestions":[{"messageId":"removeVar","data":{"varName":"tools"},"fix":{"range":[32,77],"text":""},"desc":"Remove unused variable 'tools'."}]},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":2,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":22},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":4,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":4,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":11,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":11,"endColumn":21},{"ruleId":"no-shadow","severity":2,"message":"'tools' is already declared in the upper scope on line 2 column 7.","line":12,"column":24,"nodeType":"Identifier","messageId":"noShadow","endLine":12,"endColumn":29},{"ruleId":"no-undef","severity":2,"message":"'Buffer' is not defined.","line":39,"column":22,"nodeType":"Identifier","messageId":"undef","endLine":39,"endColumn":28}],"suppressedMessages":[],"errorCount":6,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const axios = require('axios');\nconst tools = require('../../tools/exports');\n\nmodule.exports = {\n  name: 'geminicanvas',\n  aliases: ['gcanvas'],\n  category: 'ai-misc',\n  permissions: {\n    premium: true,\n  },\n  code: async ctx => {\n    const { formatter, tools, config } = ctx.bot.context;\n    const input = ctx.args.join(' ') || null;\n\n    if (!input)\n      return await ctx.reply(\n        `${formatter.quote(tools.msg.generateInstruction(['send'], ['text']))}\\n${formatter.quote(\n          tools.msg.generateCmdExample(ctx.used, 'make it evangelion art style')\n        )}`\n      );\n\n    const [checkMedia, checkQuotedMedia] = await Promise.all([\n      tools.cmd.checkMedia(ctx.msg.contentType, 'image'),\n      tools.cmd.checkQuotedMedia(ctx.quoted?.contentType, 'image'),\n    ]);\n\n    if (!checkMedia && !checkQuotedMedia)\n      return await ctx.reply(\n        formatter.quote(tools.msg.generateInstruction(['send', 'reply'], 'image'))\n      );\n\n    try {\n      const buffer = (await ctx.msg.media.toBuffer()) || (await ctx.quoted?.media.toBuffer());\n      const uploadUrl = await tools.api.uploadImage(buffer);\n      const apiUrl = tools.api.createUrl('neko', '/ai/gemini-canvas', {\n        text: input,\n        imageUrl: uploadUrl,\n      });\n      const result = Buffer.from((await axios.get(apiUrl)).data.result.image.base64, 'base64');\n\n      await ctx.reply({\n        image: result,\n        mimetype: tools.mime.lookup('jpeg'),\n        caption: formatter.quote('Untukmu, tuan!'),\n        footer: config.msg.footer,\n      });\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error, true);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\ai-misc\\geminiedit.js","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'tools' is assigned a value but never used.","line":1,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":12,"suggestions":[{"messageId":"removeVar","data":{"varName":"tools"},"fix":{"range":[0,45],"text":""},"desc":"Remove unused variable 'tools'."}]},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":22},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":3,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":3,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":10,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":10,"endColumn":21},{"ruleId":"no-shadow","severity":2,"message":"'tools' is already declared in the upper scope on line 1 column 7.","line":11,"column":24,"nodeType":"Identifier","messageId":"noShadow","endLine":11,"endColumn":29}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const tools = require('../../tools/exports');\n\nmodule.exports = {\n  name: 'geminiedit',\n  aliases: ['gedit'],\n  category: 'ai-misc',\n  permissions: {\n    premium: true,\n  },\n  code: async ctx => {\n    const { formatter, tools, config } = ctx.bot.context;\n    const input = ctx.args.join(' ') || null;\n\n    if (!input)\n      return await ctx.reply(\n        `${formatter.quote(tools.msg.generateInstruction(['send'], ['text']))}\\n${formatter.quote(\n          tools.msg.generateCmdExample(ctx.used, 'make it evangelion art style')\n        )}`\n      );\n\n    const [checkMedia, checkQuotedMedia] = await Promise.all([\n      tools.cmd.checkMedia(ctx.msg.contentType, 'image'),\n      tools.cmd.checkQuotedMedia(ctx.quoted?.contentType, 'image'),\n    ]);\n\n    if (!checkMedia && !checkQuotedMedia)\n      return await ctx.reply(\n        formatter.quote(tools.msg.generateInstruction(['send', 'reply'], 'image'))\n      );\n\n    try {\n      const buffer = (await ctx.msg.media.toBuffer()) || (await ctx.quoted?.media.toBuffer());\n      const uploadUrl = await tools.api.uploadImage(buffer);\n      const result = tools.api.createUrl('izumi', '/ai-image/geminiedt', {\n        prompt: input,\n        imageUrl: uploadUrl,\n      });\n\n      await ctx.reply({\n        image: result,\n        mimetype: tools.mime.lookup('jpeg'),\n        caption: formatter.quote('Untukmu, tuan!'),\n        footer: config.msg.footer,\n      });\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error, true);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\ai-misc\\hijabkan.js","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'tools' is assigned a value but never used.","line":1,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":12,"suggestions":[{"messageId":"removeVar","data":{"varName":"tools"},"fix":{"range":[0,45],"text":""},"desc":"Remove unused variable 'tools'."}]},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":22},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":3,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":3,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":10,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":10,"endColumn":21},{"ruleId":"no-shadow","severity":2,"message":"'tools' is already declared in the upper scope on line 1 column 7.","line":11,"column":24,"nodeType":"Identifier","messageId":"noShadow","endLine":11,"endColumn":29}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const tools = require('../../tools/exports');\n\nmodule.exports = {\n  name: 'hijabkan',\n  aliases: ['hijab', 'penghijaban'],\n  category: 'ai-misc',\n  permissions: {\n    coin: 10,\n  },\n  code: async ctx => {\n    const { formatter, tools, config } = ctx.bot.context;\n    const [checkMedia, checkQuotedMedia] = await Promise.all([\n      tools.cmd.checkMedia(ctx.msg.contentType, 'image'),\n      tools.cmd.checkQuotedMedia(ctx.quoted?.contentType, 'image'),\n    ]);\n\n    if (!checkMedia && !checkQuotedMedia)\n      return await ctx.reply(\n        formatter.quote(tools.msg.generateInstruction(['send', 'reply'], 'image'))\n      );\n\n    try {\n      const buffer = (await ctx.msg.media.toBuffer()) || (await ctx.quoted?.media.toBuffer());\n      const uploadUrl = await tools.api.uploadImage(buffer);\n      const result = tools.api.createUrl('zell', '/ai/hijabkan', {\n        imageUrl: uploadUrl,\n      });\n\n      await ctx.reply({\n        image: {\n          url: result,\n        },\n        mimetype: tools.mime.lookup('png'),\n        caption: formatter.quote('Untukmu, tuan!'),\n        footer: config.msg.footer,\n      });\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error, true);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\ai-misc\\hitamkan.js","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'tools' is assigned a value but never used.","line":1,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":12,"suggestions":[{"messageId":"removeVar","data":{"varName":"tools"},"fix":{"range":[0,45],"text":""},"desc":"Remove unused variable 'tools'."}]},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":22},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":3,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":3,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":10,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":10,"endColumn":21},{"ruleId":"no-shadow","severity":2,"message":"'tools' is already declared in the upper scope on line 1 column 7.","line":11,"column":24,"nodeType":"Identifier","messageId":"noShadow","endLine":11,"endColumn":29}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const tools = require('../../tools/exports');\n\nmodule.exports = {\n  name: 'hitamkan',\n  aliases: ['hitam', 'penghitaman'],\n  category: 'ai-misc',\n  permissions: {\n    coin: 10,\n  },\n  code: async ctx => {\n    const { formatter, tools, config } = ctx.bot.context;\n    const [checkMedia, checkQuotedMedia] = await Promise.all([\n      tools.cmd.checkMedia(ctx.msg.contentType, 'image'),\n      tools.cmd.checkQuotedMedia(ctx.quoted?.contentType, 'image'),\n    ]);\n\n    if (!checkMedia && !checkQuotedMedia)\n      return await ctx.reply(\n        formatter.quote(tools.msg.generateInstruction(['send', 'reply'], 'image'))\n      );\n\n    try {\n      const buffer = (await ctx.msg.media.toBuffer()) || (await ctx.quoted?.media.toBuffer());\n      const uploadUrl = await tools.api.uploadImage(buffer);\n      const result = tools.api.createUrl('zell', '/ai/hitamkan2', {\n        imageUrl: uploadUrl,\n      });\n\n      await ctx.reply({\n        image: {\n          url: result,\n        },\n        mimetype: tools.mime.lookup('png'),\n        caption: formatter.quote('Untukmu, tuan!'),\n        footer: config.msg.footer,\n      });\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error, true);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\ai-misc\\image2prompt.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":22},{"ruleId":"no-unused-vars","severity":1,"message":"'tools' is assigned a value but never used.","line":2,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":12,"suggestions":[{"messageId":"removeVar","data":{"varName":"tools"},"fix":{"range":[32,77],"text":""},"desc":"Remove unused variable 'tools'."}]},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":2,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":22},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":4,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":4,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":11,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":11,"endColumn":21},{"ruleId":"no-shadow","severity":2,"message":"'tools' is already declared in the upper scope on line 2 column 7.","line":12,"column":24,"nodeType":"Identifier","messageId":"noShadow","endLine":12,"endColumn":29}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const axios = require('axios');\nconst tools = require('../../tools/exports');\n\nmodule.exports = {\n  name: 'image2prompt',\n  aliases: ['imagetoprompt', 'img2prompt', 'imgtoprompt'],\n  category: 'ai-misc',\n  permissions: {\n    coin: 10,\n  },\n  code: async ctx => {\n    const { formatter, tools } = ctx.bot.context;\n    const [checkMedia, checkQuotedMedia] = await Promise.all([\n      tools.cmd.checkMedia(ctx.msg.contentType, 'image'),\n      tools.cmd.checkQuotedMedia(ctx.quoted?.contentType, 'image'),\n    ]);\n\n    if (!checkMedia && !checkQuotedMedia)\n      return await ctx.reply(\n        formatter.quote(tools.msg.generateInstruction(['send', 'reply'], 'image'))\n      );\n\n    try {\n      const buffer = (await ctx.msg.media.toBuffer()) || (await ctx.quoted?.media.toBuffer());\n      const uploadUrl = await tools.api.uploadImage(buffer);\n      const apiUrl = tools.api.createUrl('zenzxz', '/tools/toprompt', {\n        url: uploadUrl,\n      });\n      const { result } = (await axios.get(apiUrl)).data;\n\n      await ctx.reply(result);\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error, true);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\ai-misc\\removewm.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":22},{"ruleId":"no-unused-vars","severity":1,"message":"'tools' is assigned a value but never used.","line":2,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":12,"suggestions":[{"messageId":"removeVar","data":{"varName":"tools"},"fix":{"range":[32,77],"text":""},"desc":"Remove unused variable 'tools'."}]},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":2,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":22},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":4,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":4,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":10,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":10,"endColumn":21},{"ruleId":"no-shadow","severity":2,"message":"'tools' is already declared in the upper scope on line 2 column 7.","line":11,"column":24,"nodeType":"Identifier","messageId":"noShadow","endLine":11,"endColumn":29}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const axios = require('axios');\nconst tools = require('../../tools/exports');\n\nmodule.exports = {\n  name: 'removewm',\n  category: 'ai-misc',\n  permissions: {\n    coin: 10,\n  },\n  code: async ctx => {\n    const { formatter, tools, config } = ctx.bot.context;\n    const [checkMedia, checkQuotedMedia] = await Promise.all([\n      tools.cmd.checkMedia(ctx.msg.contentType, 'image'),\n      tools.cmd.checkQuotedMedia(ctx.quoted?.contentType, 'image'),\n    ]);\n\n    if (!checkMedia && !checkQuotedMedia)\n      return await ctx.reply(\n        formatter.quote(tools.msg.generateInstruction(['send', 'reply'], 'image'))\n      );\n\n    try {\n      const buffer = (await ctx.msg.media.toBuffer()) || (await ctx.quoted?.media.toBuffer());\n      const uploadUrl = await tools.api.uploadImage(buffer);\n      const apiUrl = tools.api.createUrl('zell', '/ai/removewm', {\n        imageUrl: uploadUrl,\n      });\n      const { result } = (await axios.get(apiUrl)).data;\n\n      await ctx.reply({\n        image: {\n          url: result,\n        },\n        mimetype: tools.mime.lookup('jpeg'),\n        caption: formatter.quote('Untukmu, tuan!'),\n        footer: config.msg.footer,\n      });\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error, true);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\ai-misc\\upscale.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":22},{"ruleId":"no-unused-vars","severity":1,"message":"'tools' is assigned a value but never used.","line":2,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":12,"suggestions":[{"messageId":"removeVar","data":{"varName":"tools"},"fix":{"range":[32,77],"text":""},"desc":"Remove unused variable 'tools'."}]},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":2,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":22},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":4,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":4,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":11,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":11,"endColumn":21},{"ruleId":"no-shadow","severity":2,"message":"'tools' is already declared in the upper scope on line 2 column 7.","line":12,"column":24,"nodeType":"Identifier","messageId":"noShadow","endLine":12,"endColumn":29}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const axios = require('axios');\nconst tools = require('../../tools/exports');\n\nmodule.exports = {\n  name: 'upscale',\n  aliases: ['upscaler'],\n  category: 'ai-misc',\n  permissions: {\n    coin: 10,\n  },\n  code: async ctx => {\n    const { formatter, tools, config } = ctx.bot.context;\n    const [checkMedia, checkQuotedMedia] = await Promise.all([\n      tools.cmd.checkMedia(ctx.msg.contentType, 'image'),\n      tools.cmd.checkQuotedMedia(ctx.quoted?.contentType, 'image'),\n    ]);\n\n    if (!checkMedia && !checkQuotedMedia)\n      return await ctx.reply(\n        formatter.quote(tools.msg.generateInstruction(['send', 'reply'], 'image'))\n      );\n\n    try {\n      const buffer = (await ctx.msg.media.toBuffer()) || (await ctx.quoted?.media.toBuffer());\n      const uploadUrl = await tools.api.uploadImage(buffer);\n      const apiUrl = tools.api.createUrl('hang', '/imagecreator/upscale', {\n        url: uploadUrl,\n      });\n      const { result } = (await axios.get(apiUrl)).data;\n\n      await ctx.reply({\n        image: {\n          url: result,\n        },\n        mimetype: tools.mime.lookup('jpeg'),\n        caption: formatter.quote('Untukmu, tuan!'),\n        footer: config.msg.footer,\n      });\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error, true);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\ai-misc\\youtubesummarizer.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":22},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":3,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":3,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":10,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":10,"endColumn":21},{"ruleId":"no-useless-concat","severity":2,"message":"Unexpected string concatenation of literals.","line":32,"column":20,"nodeType":"BinaryExpression","messageId":"unexpectedConcat","endLine":32,"endColumn":21}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const axios = require('axios');\n\nmodule.exports = {\n  name: 'youtubesummarizer',\n  aliases: ['ytsummarizer'],\n  category: 'ai-misc',\n  permissions: {\n    premium: true,\n  },\n  code: async ctx => {\n    const { formatter, tools, config } = ctx.bot.context;\n    const url = ctx.args[0] || null;\n\n    if (!url)\n      return await ctx.reply(\n        `${formatter.quote(tools.msg.generateInstruction(['send'], ['text']))}\\n${formatter.quote(\n          tools.msg.generateCmdExample(ctx.used, 'https://youtube.com/watch?v=v18fHSc813k')\n        )}`\n      );\n\n    const isUrl = tools.cmd.isUrl(url);\n    if (!isUrl) return await ctx.reply(config.msg.urlInvalid);\n\n    try {\n      const apiUrl = tools.api.createUrl('neko', '/tools/yt-summarizer', {\n        url,\n      });\n      const { result } = (await axios.get(apiUrl)).data;\n\n      const resultText = result.keyPoints\n        .map(res => `${formatter.quote(`Poin: ${res.point}`)}\\n${formatter.quote(res.summary)}`)\n        .join('\\n' + `${formatter.quote('Â· Â· â”€ Â·âœ¶Â· â”€ Â· Â·')}\\n`);\n      await ctx.reply({\n        text:\n          `${formatter.quote(result.summary)}\\n` +\n          `${formatter.quote('Â· Â· â”€ Â·âœ¶Â· â”€ Â· Â·')}\\n${resultText}`,\n        footer: config.msg.footer,\n      });\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error, true);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\ai-video\\videogpt.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":1,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":8,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":8,"endColumn":21},{"ruleId":"no-unused-vars","severity":1,"message":"'apiUrl' is assigned a value but never used.","line":23,"column":13,"nodeType":"Identifier","messageId":"unusedVar","endLine":23,"endColumn":19,"suggestions":[{"messageId":"removeVar","data":{"varName":"apiUrl"},"fix":{"range":[743,838],"text":""},"desc":"Remove unused variable 'apiUrl'."}]},{"ruleId":"no-undef","severity":2,"message":"'result' is not defined.","line":29,"column":16,"nodeType":"Identifier","messageId":"undef","endLine":29,"endColumn":22}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"module.exports = {\n  name: 'videogpt',\n  aliases: ['vidgpt'],\n  category: 'ai-video',\n  permissions: {\n    premium: true,\n  },\n  code: async ctx => {\n    const { formatter, tools, config } = ctx.bot.context;\n    const input = ctx.args.join(' ') || ctx.quoted?.content || null;\n\n    if (!input)\n      return await ctx.reply(\n        `${formatter.quote(tools.msg.generateInstruction(['send'], ['text']))}\\n` +\n          `${formatter.quote(tools.msg.generateCmdExample(ctx.used, 'anime girl with short blue hair'))}\\n${formatter.quote(\n            tools.msg.generateNotes([\n              'Balas atau quote pesan untuk menjadikan teks sebagai input target, jika teks memerlukan baris baru.',\n            ])\n          )}`\n      );\n\n    try {\n      const apiUrl = tools.api.createUrl('neko', '/ai-vid/videogpt', {\n        text: input,\n      });\n\n      await ctx.reply({\n        video: {\n          url: result,\n        },\n        mimetype: tools.mime.lookup('mp4'),\n        caption: formatter.quote(`Prompt: ${input}`),\n        footer: config.msg.footer,\n        buttons: [\n          {\n            buttonId: `${ctx.used.prefix + ctx.used.command} ${input}`,\n            buttonText: {\n              displayText: 'Ambil Lagi',\n            },\n          },\n        ],\n      });\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error, true);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\converter\\sticker.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":35,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":42},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":3,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":3,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":7,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":7,"endColumn":21}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const { Sticker, StickerTypes } = require('wa-sticker-formatter');\n\nmodule.exports = {\n  name: 'sticker',\n  aliases: ['s'],\n  category: 'converter',\n  code: async ctx => {\n    const {\n      formatter,\n      config,\n      tools: { cmd, msg },\n    } = ctx.self.context;\n    const [checkMedia, checkQuotedMedia] = await Promise.all([\n      cmd.checkMedia(ctx.msg.contentType, ['image', 'gif', 'video']),\n      cmd.checkQuotedMedia(ctx.quoted?.contentType, ['image', 'gif', 'video']),\n    ]);\n\n    if (!checkMedia && !checkQuotedMedia)\n      return await ctx.reply(\n        formatter.quote(msg.generateInstruction(['send', 'reply'], ['image', 'gif', 'video']))\n      );\n\n    try {\n      const buffer = (await ctx.msg.media.toBuffer()) || (await ctx.quoted?.media.toBuffer());\n      const sticker = new Sticker(buffer, {\n        pack: config.sticker.packname,\n        author: config.sticker.author,\n        type: StickerTypes.FULL,\n        categories: ['ðŸŒ•'],\n        id: ctx.id,\n        quality: 50,\n      });\n\n      await ctx.reply(await sticker.toMessage());\n    } catch (error) {\n      await cmd.handleError(ctx, error);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\converter\\stickerwm.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":35,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":42},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":3,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":3,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":10,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":10,"endColumn":21}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const { Sticker, StickerTypes } = require('wa-sticker-formatter');\n\nmodule.exports = {\n  name: 'stickerwm',\n  aliases: ['swm', 'stikerwm'],\n  category: 'converter',\n  permissions: {\n    coin: 10,\n  },\n  code: async ctx => {\n    const { formatter, tools } = ctx.bot.context;\n    const input = ctx.args.join(' ') || null;\n\n    if (!input)\n      return await ctx.reply(\n        `${formatter.quote(tools.msg.generateInstruction(['send', 'reply'], ['text', 'sticker']))}\\n${formatter.quote(\n          tools.msg.generateCmdExample(ctx.used, 'does this impact the lore?|@rei-ayanami')\n        )}`\n      );\n\n    if (!tools.cmd.checkQuotedMedia(ctx.quoted?.contentType, ['sticker']))\n      return await ctx.reply(\n        formatter.quote(tools.msg.generateInstruction(['send', 'reply'], ['sticker']))\n      );\n\n    try {\n      const buffer = (await ctx.msg.media.toBuffer()) || (await ctx.quoted?.media.toBuffer());\n      const [packname, author] = input.split('|');\n      const sticker = new Sticker(buffer, {\n        pack: packname || '',\n        author: author || '',\n        type: StickerTypes.FULL,\n        categories: ['ðŸŒ•'],\n        id: ctx.id,\n        quality: 50,\n      });\n\n      await ctx.reply(await sticker.toMessage());\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\converter\\toaudio.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":22},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":3,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":3,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":10,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":10,"endColumn":21}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const axios = require('axios');\n\nmodule.exports = {\n  name: 'toaudio',\n  aliases: ['toaud', 'tomp3'],\n  category: 'converter',\n  permissions: {\n    coin: 10,\n  },\n  code: async ctx => {\n    const { formatter, tools } = ctx.bot.context;\n    const [checkMedia, checkQuotedMedia] = await Promise.all([\n      tools.cmd.checkMedia(ctx.msg.contentType, ['video']),\n      tools.cmd.checkQuotedMedia(ctx.quoted?.contentType, ['video']),\n    ]);\n\n    if (!checkMedia && !checkQuotedMedia)\n      return await ctx.reply(\n        formatter.quote(tools.msg.generateInstruction(['send', 'reply'], ['video']))\n      );\n\n    try {\n      const buffer = (await ctx.msg.media.toBuffer()) || (await ctx.quoted?.media.toBuffer());\n      const apiUrl = tools.api.createUrl('https://nekochii-converter.hf.space', '/mp4tomp3');\n      const { result } = (\n        await axios.post(apiUrl, {\n          file: buffer.toString('base64'),\n          json: true,\n        })\n      ).data;\n\n      await ctx.reply({\n        audio: {\n          url: result,\n        },\n        mimetype: tools.mime.lookup('mp3'),\n      });\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error, true);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\converter\\togif.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":22},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":3,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":3,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":9,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":9,"endColumn":21}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const axios = require('axios');\n\nmodule.exports = {\n  name: 'togif',\n  category: 'converter',\n  permissions: {\n    coin: 10,\n  },\n  code: async ctx => {\n    const { formatter, tools } = ctx.bot.context;\n    if (!tools.cmd.checkQuotedMedia(ctx.quoted?.contentType, ['sticker']))\n      return await ctx.reply(\n        formatter.quote(tools.msg.generateInstruction(['reply'], ['sticker']))\n      );\n\n    try {\n      const buffer = await ctx.quoted?.media.toBuffer();\n      const apiUrl = tools.api.createUrl('https://nekochii-converter.hf.space', '/webp2gif');\n      const { result } = (\n        await axios.post(apiUrl, {\n          file: buffer.toString('base64'),\n          json: true,\n        })\n      ).data;\n\n      await ctx.reply({\n        video: {\n          url: result,\n        },\n        mimetype: tools.mime.lookup('mp4'),\n        gifPlayback: true,\n      });\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error, true);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\converter\\toimage.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":22},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":3,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":3,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":10,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":10,"endColumn":21}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const axios = require('axios');\n\nmodule.exports = {\n  name: 'toimage',\n  aliases: ['toimg', 'topng'],\n  category: 'converter',\n  permissions: {\n    coin: 10,\n  },\n  code: async ctx => {\n    const { formatter, tools } = ctx.bot.context;\n    if (!tools.cmd.checkQuotedMedia(ctx.quoted?.contentType, ['sticker']))\n      return await ctx.reply(\n        formatter.quote(tools.msg.generateInstruction(['reply'], ['sticker']))\n      );\n\n    try {\n      const buffer = await ctx.quoted?.media.toBuffer();\n      const apiUrl = tools.api.createUrl('https://nekochii-converter.hf.space', '/webp2png');\n      const { result } = (\n        await axios.post(apiUrl, {\n          file: buffer.toString('base64'),\n          json: true,\n        })\n      ).data;\n\n      await ctx.reply({\n        image: {\n          url: result,\n        },\n        mimetype: tools.mime.lookup('png'),\n      });\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error, true);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\converter\\tovid.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":22},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":3,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":3,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":10,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":10,"endColumn":21}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const axios = require('axios');\n\nmodule.exports = {\n  name: 'tovideo',\n  aliases: ['tomp4', 'tovid'],\n  category: 'converter',\n  permissions: {\n    coin: 10,\n  },\n  code: async ctx => {\n    const { formatter, tools } = ctx.bot.context;\n    if (!tools.cmd.checkQuotedMedia(ctx.quoted?.contentType, ['sticker']))\n      return await ctx.reply(\n        formatter.quote(tools.msg.generateInstruction(['reply'], ['sticker']))\n      );\n\n    try {\n      const buffer = await ctx.quoted?.media.toBuffer();\n      const apiUrl = tools.api.createUrl('https://nekochii-converter.hf.space', '/webp2mp4');\n      const { result } = (\n        await axios.post(apiUrl, {\n          file: buffer.toString('base64'),\n          json: true,\n        })\n      ).data;\n\n      await ctx.reply({\n        video: {\n          url: result,\n        },\n        mimetype: tools.mime.lookup('mp4'),\n      });\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error, true);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\converter\\tovn.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":1,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":8,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":8,"endColumn":21}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"module.exports = {\n  name: 'tovn',\n  aliases: ['toptt'],\n  category: 'converter',\n  permissions: {\n    coin: 10,\n  },\n  code: async ctx => {\n    const { formatter, tools } = ctx.bot.context;\n    if (!tools.cmd.checkQuotedMedia(ctx.quoted?.contentType, ['audio']))\n      return await ctx.reply(formatter.quote(tools.msg.generateInstruction(['reply'], ['audio'])));\n\n    try {\n      const result = await ctx.quoted?.media.toBuffer();\n\n      await ctx.reply({\n        audio: result,\n        mimetype: tools.mime.lookup('mp3'),\n        ptt: true,\n      });\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\downloader\\douyindl.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":22},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":3,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":3,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":10,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":10,"endColumn":21}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const axios = require('axios');\n\nmodule.exports = {\n  name: 'douyindl',\n  aliases: ['douyin'],\n  category: 'downloader',\n  permissions: {\n    premium: true,\n  },\n  code: async ctx => {\n    const { formatter, tools, config } = ctx.bot.context;\n    const url = ctx.args[0] || null;\n\n    if (!url)\n      return await ctx.reply(\n        `${formatter.quote(tools.msg.generateInstruction(['send'], ['text']))}\\n${formatter.quote(\n          tools.msg.generateCmdExample(ctx.used, 'https://v.douyin.com/YEdqwg7JeAQ')\n        )}`\n      );\n\n    const isUrl = tools.cmd.isUrl(url);\n    if (!isUrl) return await ctx.reply(config.msg.urlInvalid);\n\n    try {\n      const apiUrl = tools.api.createUrl('diibot', '/api/download/douyin', {\n        url,\n      });\n      const { result } = (await axios.get(apiUrl)).data;\n\n      await ctx.reply({\n        video: {\n          url: result.Video_HD || result.Video,\n        },\n        mimetype: tools.mime.lookup('mp4'),\n        caption: formatter.quote(`URL: ${url}`),\n        footer: config.msg.footer,\n      });\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error, true);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\downloader\\facebookdl.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":22},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":3,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":3,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":10,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":10,"endColumn":21}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const axios = require('axios');\n\nmodule.exports = {\n  name: 'facebookdl',\n  aliases: ['facebook', 'fb', 'fbdl'],\n  category: 'downloader',\n  permissions: {\n    coin: 10,\n  },\n  code: async ctx => {\n    const { formatter, tools, config } = ctx.bot.context;\n    const url = ctx.args[0] || null;\n\n    if (!url)\n      return await ctx.reply(\n        `${formatter.quote(tools.msg.generateInstruction(['send'], ['text']))}\\n${formatter.quote(\n          tools.msg.generateCmdExample(ctx.used, 'https://www.facebook.com/reel/1112151989983701')\n        )}`\n      );\n\n    const isUrl = tools.cmd.isUrl(url);\n    if (!isUrl) return await ctx.reply(config.msg.urlInvalid);\n\n    try {\n      const apiUrl = tools.api.createUrl('davidcyril', '/facebook', {\n        url,\n      });\n      const result = (await axios.get(apiUrl)).data.result.downloads;\n\n      await ctx.reply({\n        video: {\n          url: result.hd.url || result.sd.url,\n        },\n        mimetype: tools.mime.lookup('mp4'),\n        caption: formatter.quote(`URL: ${url}`),\n        footer: config.msg.footer,\n      });\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error, true);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\downloader\\githubdl.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":22},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":3,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":3,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":10,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":10,"endColumn":21}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const axios = require('axios');\n\nmodule.exports = {\n  name: 'githubdl',\n  aliases: ['ghdl', 'gitclone'],\n  category: 'downloader',\n  permissions: {\n    coin: 10,\n  },\n  code: async ctx => {\n    const { formatter, tools, config } = ctx.bot.context;\n    const url = ctx.args[0] || null;\n\n    if (!url)\n      return await ctx.reply(\n        `${formatter.quote(tools.msg.generateInstruction(['send'], ['text']))}\\n${formatter.quote(\n          tools.msg.generateCmdExample(ctx.used, 'https://github.com/itsreimau/whatsdex')\n        )}`\n      );\n\n    const isUrl = tools.cmd.isUrl(url);\n    if (!isUrl) return await ctx.reply(config.msg.urlInvalid);\n\n    try {\n      const apiUrl = tools.api.createUrl('diibot', '/api/download/gitclone', {\n        url,\n      });\n      const { result } = (await axios.get(apiUrl)).data;\n\n      await ctx.reply({\n        document: {\n          url: result.urllink,\n        },\n        fileName: result.filename,\n        mimetype: tools.mime.lookup(result.filename) || 'application/octet-stream',\n        caption: formatter.quote(`URL: ${url}`),\n        footer: config.msg.footer,\n      });\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error, true);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\downloader\\googledrivedl.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":22},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":3,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":3,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":10,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":10,"endColumn":21}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const axios = require('axios');\n\nmodule.exports = {\n  name: 'googledrivedl',\n  aliases: ['gd', 'gddl', 'googledrive'],\n  category: 'downloader',\n  permissions: {\n    premium: true,\n  },\n  code: async ctx => {\n    const { formatter, tools, config } = ctx.bot.context;\n    const url = ctx.args[0] || null;\n\n    if (!url)\n      return await ctx.reply(\n        `${formatter.quote(tools.msg.generateInstruction(['send'], ['text']))}\\n${formatter.quote(\n          tools.msg.generateCmdExample(\n            ctx.used,\n            'https://drive.google.com/file/d/1LunbMSJNMtGnUpy9fJGx7bougiwAo23j/view?usp=drive_link'\n          )\n        )}`\n      );\n\n    const isUrl = tools.cmd.isUrl(url);\n    if (!isUrl) return await ctx.reply(config.msg.urlInvalid);\n\n    try {\n      const apiUrl = tools.api.createUrl('davidcyril', '/gdrive', {\n        url,\n      });\n      const result = (await axios.get(apiUrl)).data;\n\n      await ctx.reply({\n        document: result.download_link,\n        fileName: result.name,\n        mimetype: tools.mime.lookup(result.name) || 'application/octet-stream',\n        caption: formatter.quote(`URL: ${url}`),\n        footer: config.msg.footer,\n      });\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error, true);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\downloader\\instagramdl.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":22},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":3,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":3,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":10,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":10,"endColumn":21}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const axios = require('axios');\n\nmodule.exports = {\n  name: 'instagramdl',\n  aliases: ['ig', 'igdl', 'instagram'],\n  category: 'downloader',\n  permissions: {\n    coin: 10,\n  },\n  code: async ctx => {\n    const { formatter, tools, config } = ctx.bot.context;\n    const url = ctx.args[0] || null;\n\n    if (!url)\n      return await ctx.reply(\n        `${formatter.quote(tools.msg.generateInstruction(['send'], ['text']))}\\n${formatter.quote(\n          tools.msg.generateCmdExample(ctx.used, 'https://www.instagram.com/p/DLzgi9pORzS')\n        )}`\n      );\n\n    const isUrl = tools.cmd.isUrl(url);\n    if (!isUrl) return await ctx.reply(config.msg.urlInvalid);\n\n    try {\n      const apiUrl = tools.api.createUrl('zell', '/download/instagram', {\n        url,\n      });\n      const result = (await axios.get(apiUrl)).data.result.url;\n      const album = result.map(res => {\n        const isVideo = res.type === 'mp4';\n        return {\n          [isVideo ? 'video' : 'image']: {\n            url: res.url,\n          },\n          mimetype: tools.mime.lookup(res.ext),\n        };\n      });\n\n      await ctx.reply({\n        album,\n        caption: formatter.quote(`URL: ${url}`),\n      });\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error, true);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\downloader\\mediafiredl.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":22},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":3,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":3,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":10,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":10,"endColumn":21},{"ruleId":"no-undef","severity":2,"message":"'data' is not defined.","line":37,"column":19,"nodeType":"Identifier","messageId":"undef","endLine":37,"endColumn":23},{"ruleId":"no-undef","severity":2,"message":"'data' is not defined.","line":38,"column":19,"nodeType":"Identifier","messageId":"undef","endLine":38,"endColumn":23}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const axios = require('axios');\n\nmodule.exports = {\n  name: 'mediafiredl',\n  aliases: ['mediafire', 'mf', 'mfdl'],\n  category: 'downloader',\n  permissions: {\n    premium: true,\n  },\n  code: async ctx => {\n    const { formatter, tools, config } = ctx.bot.context;\n    const url = ctx.args[0] || null;\n\n    if (!url)\n      return await ctx.reply(\n        `${formatter.quote(tools.msg.generateInstruction(['send'], ['text']))}\\n${formatter.quote(\n          tools.msg.generateCmdExample(\n            ctx.used,\n            'https://www.mediafire.com/file/on2jvy5540bi22u/humanity-turned-into-lcl-scene.mp4/file'\n          )\n        )}`\n      );\n\n    const isUrl = tools.cmd.isUrl(url);\n    if (!isUrl) return await ctx.reply(config.msg.urlInvalid);\n\n    try {\n      const apiUrl = tools.api.createUrl('neko', '/downloader/mediafire', {\n        url,\n      });\n      const { result } = (await axios.get(apiUrl)).data;\n\n      await ctx.reply({\n        document: {\n          url: result.download.url,\n        },\n        fileName: data.fileName,\n        mimetype: data.mimetype || 'application/octet-stream',\n        caption: formatter.quote(`URL: ${url}`),\n        footer: config.msg.footer,\n      });\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error, true);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\downloader\\play.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":22},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":3,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":3,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":10,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":10,"endColumn":21},{"ruleId":"no-restricted-globals","severity":2,"message":"Unexpected use of 'isNaN'. Use Number.isNaN instead https://github.com/airbnb/javascript#standard-library--isnan","line":16,"column":28,"nodeType":"Identifier","messageId":"customMessage","endLine":16,"endColumn":33},{"ruleId":"radix","severity":2,"message":"Missing radix parameter.","line":16,"column":42,"nodeType":"CallExpression","messageId":"missingRadix","endLine":16,"endColumn":55,"suggestions":[{"messageId":"addRadixParameter10","fix":{"range":[408,408],"text":", 10"},"desc":"Add radix parameter `10` for parsing decimal numbers."}]},{"ruleId":"radix","severity":2,"message":"Missing radix parameter.","line":17,"column":24,"nodeType":"CallExpression","messageId":"missingRadix","endLine":17,"endColumn":37,"suggestions":[{"messageId":"addRadixParameter10","fix":{"range":[450,450],"text":", 10"},"desc":"Add radix parameter `10` for parsing decimal numbers."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'val' is defined but never used. Allowed unused args must match /^_/u.","line":22,"column":20,"nodeType":"Identifier","messageId":"unusedVar","endLine":22,"endColumn":23,"suggestions":[{"messageId":"removeVar","data":{"varName":"val"},"fix":{"range":[545,548],"text":"()"},"desc":"Remove unused variable 'val'."}]}],"suppressedMessages":[],"errorCount":6,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const axios = require('axios');\n\nmodule.exports = {\n  name: 'play',\n  aliases: ['p'],\n  category: 'downloader',\n  permissions: {\n    coin: 10,\n  },\n  code: async ctx => {\n    const { formatter, tools, config } = ctx.bot.context;\n    const flag = tools.cmd.parseFlag(ctx.args.join(' ') || null, {\n      '-i': {\n        type: 'value',\n        key: 'index',\n        validator: val => !isNaN(val) && parseInt(val) > 0,\n        parser: val => parseInt(val) - 1,\n      },\n      '-s': {\n        type: 'value',\n        key: 'source',\n        validator: val => true,\n        parser: val => val.toLowerCase(),\n      },\n    });\n    const { input } = flag;\n\n    if (!input)\n      return await ctx.reply(\n        `${formatter.quote(tools.msg.generateInstruction(['send'], ['text']))}\\n` +\n          `${formatter.quote(tools.msg.generateCmdExample(ctx.used, 'one last kiss - hikaru utada -i 8 -s spotify'))}\\n${formatter.quote(\n            tools.msg.generatesFlagInfo({\n              '-i <number>': 'Pilihan pada data indeks',\n              '-s <text>':\n                'Sumber untuk memutar lagu (tersedia: soundcloud, spotify, youtube | default: youtube)',\n            })\n          )}`\n      );\n\n    try {\n      const searchIndex = flag?.index || 0;\n      const source = flag?.source || null;\n\n      if (source === 'soundcloud') {\n        const searchApiUrl = tools.api.createUrl('izumi', '/search/soundcloud', {\n          query: input,\n        });\n        const searchResult = (await axios.get(searchApiUrl)).data.result[searchIndex];\n\n        await ctx.reply({\n          text: `${formatter.quote(`Judul: ${searchResult.title}`)}\\n${formatter.quote(\n            `URL: ${searchResult.url}`\n          )}`,\n          footer: config.msg.footer,\n        });\n\n        const downloadApiUrl = tools.api.createUrl('izumi', '/downloader/soundcloud', {\n          url: searchResult.url,\n        });\n        const downloadResult = (await axios.get(downloadApiUrl)).data.result.url;\n\n        await ctx.reply({\n          audio: {\n            url: downloadResult,\n          },\n          mimetype: tools.mime.lookup('mp3'),\n        });\n      } else if (source === 'spotify') {\n        const searchApiUrl = tools.api.createUrl('diibot', '/api/search/spotify', {\n          query: input,\n        });\n        const searchResult = (await axios.get(searchApiUrl)).data.result[searchIndex];\n\n        await ctx.reply({\n          text:\n            `${formatter.quote(`Judul: ${searchResult.trackName}`)}\\n` +\n            `${formatter.quote(`Artis: ${searchResult.artistName}`)}\\n${formatter.quote(\n              `URL: ${searchResult.externalUrl}`\n            )}`,\n          footer: config.msg.footer,\n        });\n\n        const downloadApiUrl = tools.api.createUrl('diibot', '/api/download/spotify', {\n          url: searchResult.externalUrl,\n        });\n        const downloadResult = (await axios.get(downloadApiUrl)).data.result.audio;\n\n        await ctx.reply({\n          audio: {\n            url: downloadResult,\n          },\n          mimetype: tools.mime.lookup('mp3'),\n        });\n      } else {\n        const searchApiUrl = tools.api.createUrl('davidcyril', '/youtube/search', {\n          query: input,\n        });\n        const searchResult = (await axios.get(searchApiUrl)).data.results[searchIndex];\n\n        await ctx.reply({\n          text: `${formatter.quote(`Judul: ${searchResult.title}`)}\\n${formatter.quote(\n            `URL: ${searchResult.url}`\n          )}`,\n          footer: config.msg.footer,\n        });\n\n        const downloadApiUrl = tools.api.createUrl('izumi', '/downloader/youtube', {\n          url: searchResult.url,\n          format: 'mp3',\n        });\n        const downloadResult = (await axios.get(downloadApiUrl)).data.result.download;\n\n        await ctx.reply({\n          audio: {\n            url: downloadResult,\n          },\n          mimetype: tools.mime.lookup('mp3'),\n        });\n      }\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error, true);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\downloader\\sfiledl.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":22},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":3,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":3,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":9,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":9,"endColumn":21}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const axios = require('axios');\n\nmodule.exports = {\n  name: 'sfiledl',\n  category: 'downloader',\n  permissions: {\n    premium: true,\n  },\n  code: async ctx => {\n    const { formatter, tools, config } = ctx.bot.context;\n    const url = ctx.args[0] || null;\n\n    if (!url)\n      return await ctx.reply(\n        `${formatter.quote(tools.msg.generateInstruction(['send'], ['text']))}\\n${formatter.quote(\n          tools.msg.generateCmdExample(ctx.used, 'https://sfile.mobi/a1NTccB8T6m')\n        )}`\n      );\n\n    const isUrl = tools.cmd.isUrl(url);\n    if (!isUrl) return await ctx.reply(config.msg.urlInvalid);\n\n    try {\n      const apiUrl = tools.api.createUrl('zell', '/download/sfile', {\n        url,\n      });\n      const { result } = (await axios.get(apiUrl)).data;\n\n      await ctx.reply({\n        document: {\n          url: result.download_url,\n        },\n        fileName: result.metadata.filename,\n        mimetype: result.metadata.mimetype || 'application/octet-stream',\n        caption: formatter.quote(`URL: ${url}`),\n        footer: config.msg.footer,\n      });\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error, true);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\downloader\\soundclouddl.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":22},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":3,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":3,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":10,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":10,"endColumn":21}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const axios = require('axios');\n\nmodule.exports = {\n  name: 'soundclouddl',\n  aliases: ['scdl'],\n  category: 'downloader',\n  permissions: {\n    coin: 10,\n  },\n  code: async ctx => {\n    const { formatter, tools, config } = ctx.bot.context;\n    const url = ctx.args[0] || null;\n\n    if (!url)\n      return await ctx.reply(\n        `${formatter.quote(tools.msg.generateInstruction(['send'], ['text']))}\\n${formatter.quote(\n          tools.msg.generateCmdExample(\n            ctx.used,\n            'https://soundcloud.com/hikaruutada/one-last-kiss-live-version'\n          )\n        )}`\n      );\n\n    const isUrl = tools.cmd.isUrl(url);\n    if (!isUrl) return await ctx.reply(config.msg.urlInvalid);\n\n    try {\n      const apiUrl = tools.api.createUrl('izumi', '/downloader/soundcloud', {\n        url,\n      });\n      const result = (await axios.get(apiUrl)).data.result.url;\n\n      await ctx.reply({\n        audio: {\n          url: result,\n        },\n        mimetype: tools.mime.lookup('mp3'),\n      });\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error, true);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\downloader\\spotifydl.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":22},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":3,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":3,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":10,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":10,"endColumn":21}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const axios = require('axios');\n\nmodule.exports = {\n  name: 'spotifydl',\n  aliases: ['spotidl'],\n  category: 'downloader',\n  permissions: {\n    coin: 10,\n  },\n  code: async ctx => {\n    const { formatter, tools, config } = ctx.bot.context;\n    const url = ctx.args[0] || null;\n\n    if (!url)\n      return await ctx.reply(\n        `${formatter.quote(tools.msg.generateInstruction(['send'], ['text']))}\\n${formatter.quote(\n          tools.msg.generateCmdExample(\n            ctx.used,\n            'https://open.spotify.com/track/5RhWszHMSKzb7KiXk4Ae0M'\n          )\n        )}`\n      );\n\n    const isUrl = tools.cmd.isUrl(url);\n    if (!isUrl) return await ctx.reply(config.msg.urlInvalid);\n\n    try {\n      const apiUrl = tools.api.createUrl('diibot', '/api/download/spotify', {\n        url,\n      });\n      const result = (await axios.get(apiUrl)).data.result.audio;\n\n      await ctx.reply({\n        audio: {\n          url: result,\n        },\n        mimetype: tools.mime.lookup('mp3'),\n      });\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error, true);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\downloader\\tiktokdl.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":22},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":3,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":3,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":10,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":10,"endColumn":21}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const axios = require('axios');\n\nmodule.exports = {\n  name: 'tiktokdl',\n  aliases: ['tiktok', 'tiktoknowm', 'tt', 'ttdl', 'vt', 'vtdl', 'vtdltiktok', 'vtnowm'],\n  category: 'downloader',\n  permissions: {\n    coin: 10,\n  },\n  code: async ctx => {\n    const {\n      formatter,\n      config,\n      tools: { msg, cmd, api, mime },\n    } = ctx.self.context;\n    const url = ctx.args[0] || null;\n\n    if (!url)\n      return await ctx.reply(\n        `${formatter.quote(msg.generateInstruction(['send'], ['text']))}\\n${formatter.quote(\n          cmd.generateCmdExample(\n            ctx.used,\n            'https://www.tiktok.com/@grazeuz/video/7486690677888158984'\n          )\n        )}`\n      );\n\n    const isUrl = cmd.isUrl(url);\n    if (!isUrl) return await ctx.reply(config.msg.urlInvalid);\n\n    try {\n      const apiUrl = api.createUrl('diibot', '/api/download/tiktok', {\n        url,\n      });\n      const { result } = (await axios.get(apiUrl)).data;\n\n      if (result.play && !result.images) {\n        await ctx.reply({\n          video: {\n            url: result.play,\n          },\n          mimetype: mime.lookup('mp4'),\n          caption: formatter.quote(`URL: ${url}`),\n          footer: config.msg.footer,\n        });\n      } else if (result.images) {\n        const album = result.images.map(imageUrl => ({\n          image: {\n            url: imageUrl,\n          },\n          mimetype: mime.lookup('jpeg'),\n        }));\n\n        await ctx.reply({\n          album,\n          caption: formatter.quote(`URL: ${url}`),\n        });\n      }\n    } catch (error) {\n      await cmd.handleError(ctx, error, true);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\downloader\\twitterdl.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":22},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":3,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":3,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":10,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":10,"endColumn":21}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const axios = require('axios');\n\nmodule.exports = {\n  name: 'twitterdl',\n  aliases: ['twitter', 'twit', 'twitdl', 'x', 'xdl'],\n  category: 'downloader',\n  permissions: {\n    premium: true,\n  },\n  code: async ctx => {\n    const { formatter, tools, config } = ctx.bot.context;\n    const url = ctx.args[0] || null;\n\n    if (!url)\n      return await ctx.reply(\n        `${formatter.quote(tools.msg.generateInstruction(['send'], ['text']))}\\n${formatter.quote(\n          tools.msg.generateCmdExample(\n            ctx.used,\n            'https://x.com/kaotaro12/status/1459493783964250118/video/1'\n          )\n        )}`\n      );\n\n    const isUrl = tools.cmd.isUrl(url);\n    if (!isUrl) return await ctx.reply(config.msg.urlInvalid);\n\n    try {\n      const apiUrl = tools.api.createUrl('davidcyril', '/twitterv2', {\n        url,\n      });\n      const result = (await axios.get(apiUrl)).data.result.find(res =>\n        res.quality.includes('720p')\n      );\n\n      await ctx.reply({\n        video: {\n          url: result.url,\n        },\n        mimetype: tools.mime.lookup('mp4'),\n        caption: formatter.quote(`URL: ${url}`),\n        footer: config.msg.footer,\n      });\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error, true);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\downloader\\videydl.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":1,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":8,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":8,"endColumn":21}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"module.exports = {\n  name: 'videydl',\n  aliases: ['videy'],\n  category: 'downloader',\n  permissions: {\n    premium: true,\n  },\n  code: async ctx => {\n    const { formatter, tools, config } = ctx.bot.context;\n    const url = ctx.args[0] || null;\n\n    if (!url)\n      return await ctx.reply(\n        `${formatter.quote(tools.msg.generateInstruction(['send'], ['text']))}\\n${formatter.quote(\n          tools.msg.generateCmdExample(ctx.used, 'https://videy.co/v/?id=RMuikV761')\n        )}`\n      );\n\n    const isUrl = tools.cmd.isUrl(url);\n    if (!isUrl) return await ctx.reply(config.msg.urlInvalid);\n\n    try {\n      const id = new URL(url).searchParams.get('id');\n      const result = `https://cdn.videy.co/${id}.mp4`;\n\n      await ctx.reply({\n        video: {\n          url: result,\n        },\n        mimetype: tools.mime.lookup('mp4'),\n        caption: formatter.quote(`URL: ${url}`),\n        footer: config.msg.footer,\n      });\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error, true);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\downloader\\xnxxdl.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":22},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":3,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":3,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":9,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":9,"endColumn":21}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const axios = require('axios');\n\nmodule.exports = {\n  name: 'xnxxdl',\n  category: 'downloader',\n  permissions: {\n    premium: true,\n  },\n  code: async ctx => {\n    const { formatter, tools, config } = ctx.bot.context;\n    const url = ctx.args[0] || null;\n\n    if (!url)\n      return await ctx.reply(\n        `${formatter.quote(tools.msg.generateInstruction(['send'], ['text']))}\\n${formatter.quote(\n          tools.msg.generateCmdExample(\n            ctx.used,\n            'https://www.xnxx.com/video-187eejb8/ova_hentai_evangelion'\n          )\n        )}`\n      );\n\n    const isUrl = tools.cmd.isUrl(url);\n    if (!isUrl) return await ctx.reply(config.msg.urlInvalid);\n\n    try {\n      const apiUrl = tools.api.createUrl('hang', '/download/xnxx', {\n        url,\n      });\n      const result = (await axios.get(apiUrl)).data.result.files;\n\n      await ctx.reply({\n        video: {\n          url: result.high || result.low,\n        },\n        mimetype: tools.mime.lookup('mp4'),\n        caption: formatter.quote(`URL: ${url}`),\n        footer: config.msg.footer,\n      });\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error, true);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\downloader\\xvideosdl.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":22},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":3,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":3,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":9,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":9,"endColumn":21}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const axios = require('axios');\n\nmodule.exports = {\n  name: 'xvideosdl',\n  category: 'downloader',\n  permissions: {\n    premium: true,\n  },\n  code: async ctx => {\n    const { formatter, tools, config } = ctx.bot.context;\n    const url = ctx.args[0] || null;\n\n    if (!url)\n      return await ctx.reply(\n        `${formatter.quote(tools.msg.generateInstruction(['send'], ['text']))}\\n${formatter.quote(\n          tools.msg.generateCmdExample(\n            ctx.used,\n            'https://www.xvideos.com/video.kfhcdpb267b/evangelion_hentai'\n          )\n        )}`\n      );\n\n    const isUrl = tools.cmd.isUrl(url);\n    if (!isUrl) return await ctx.reply(config.msg.urlInvalid);\n\n    try {\n      const apiUrl = tools.api.createUrl('neko', '/downloader/xvideos', {\n        url,\n      });\n      const result = (await axios.get(apiUrl)).data.result.videos;\n\n      await ctx.reply({\n        video: {\n          url: result.high || result.low,\n        },\n        mimetype: tools.mime.lookup('mp4'),\n        caption: formatter.quote(`URL: ${url}`),\n        footer: config.msg.footer,\n      });\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error, true);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\downloader\\youtubeaudio.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":22},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":3,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":3,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":10,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":10,"endColumn":21}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const axios = require('axios');\n\nmodule.exports = {\n  name: 'youtubeaudio',\n  aliases: ['yta', 'ytaudio', 'ytmp3'],\n  category: 'downloader',\n  permissions: {\n    coin: 10,\n  },\n  code: async ctx => {\n    const { formatter, tools, config } = ctx.bot.context;\n    const flag = tools.cmd.parseFlag(ctx.args.join(' ') || null, {\n      '-d': {\n        type: 'boolean',\n        key: 'document',\n      },\n    });\n    const url = flag.input || null;\n\n    if (!url)\n      return await ctx.reply(\n        `${formatter.quote(tools.msg.generateInstruction(['send'], ['text']))}\\n` +\n          `${formatter.quote(tools.msg.generateCmdExample(ctx.used, 'https://www.youtube.com/watch?v=0Uhh62MUEic -d'))}\\n${formatter.quote(\n            tools.msg.generatesFlagInfo({\n              '-d': 'Kirim sebagai dokumen',\n            })\n          )}`\n      );\n\n    const isUrl = tools.cmd.isUrl(url);\n    if (!isUrl) return await ctx.reply(config.msg.urlInvalid);\n\n    try {\n      const apiUrl = tools.api.createUrl('izumi', '/downloader/youtube', {\n        url,\n        format: 'mp3',\n      });\n      const { result } = (await axios.get(apiUrl)).data;\n\n      const document = flag?.document || false;\n      if (document) {\n        await ctx.reply({\n          document: {\n            url: result.download,\n          },\n          fileName: `${result.title}.mp3`,\n          mimetype: tools.mime.lookup('mp3'),\n          caption: formatter.quote(`URL: ${url}`),\n          footer: config.msg.footer,\n        });\n      } else {\n        await ctx.reply({\n          audio: {\n            url: result.download,\n          },\n          mimetype: tools.mime.lookup('mp3'),\n        });\n      }\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error, true);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\downloader\\youtubevideo.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":22},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":2,"column":11,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":18},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":3,"column":20,"nodeType":"Identifier","messageId":"undef","endLine":3,"endColumn":27},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":4,"column":23,"nodeType":"Identifier","messageId":"undef","endLine":4,"endColumn":30},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":5,"column":23,"nodeType":"Identifier","messageId":"undef","endLine":5,"endColumn":30},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":7,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":7,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":14,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":14,"endColumn":21},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":71,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":71,"endColumn":20,"suggestions":[{"fix":{"range":[2228,2249],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]}],"suppressedMessages":[],"errorCount":7,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const axios = require('axios');\nconst z = require('zod');\nconst { lookup } = require('mime-types');\nconst { createUrl } = require('../../tools/api');\nconst { parseFlag } = require('../../tools/cmd');\n\nmodule.exports = {\n  name: 'youtubevideo',\n  aliases: ['ytmp4', 'ytv', 'ytvideo'],\n  category: 'downloader',\n  permissions: {\n    coin: 10,\n  },\n  code: async ctx => {\n    const { formatter, config } = ctx.bot.context;\n\n    try {\n      const flag = parseFlag(ctx.args.join(' ') || null, {\n        '-d': { type: 'boolean', key: 'document' },\n        '-q': {\n          type: 'value',\n          key: 'quality',\n          validator: val => !Number.isNaN(val) && parseInt(val, 10) > 0,\n          parser: val => parseInt(val, 10),\n        },\n      });\n\n      // --- Validation ---\n      const urlSchema = z\n        .string()\n        .url({ message: 'Please provide a valid URL.' })\n        .refine(val => !val.includes(' '), { message: 'The URL cannot contain spaces.' });\n      const urlCheck = urlSchema.safeParse(flag.input || '');\n      if (!urlCheck.success) {\n        return ctx.reply(\n          formatter.quote(\n            `âŽ ${urlCheck.error.issues[0].message}\\n\\nExample: .ytv https://youtu.be/example -q 720`\n          )\n        );\n      }\n      const url = urlCheck.data;\n\n      const qualitySchema = z.enum(['144', '240', '360', '480', '720', '1080']).default('720');\n      const quality = qualitySchema.parse(flag.quality?.toString());\n      // --- End Validation ---\n\n      const apiUrl = createUrl('izumi', '/downloader/youtube', {\n        url,\n        format: quality,\n      });\n      const { result } = (await axios.get(apiUrl)).data;\n\n      const asDocument = flag?.document || false;\n      if (asDocument) {\n        await ctx.reply({\n          document: { url: result.download },\n          fileName: `${result.title}.mp4`,\n          mimetype: lookup('mp4'),\n          caption: formatter.quote(`URL: ${url}`),\n          footer: config.msg.footer,\n        });\n      } else {\n        await ctx.reply({\n          video: { url: result.download },\n          mimetype: lookup('mp4'),\n          caption: formatter.quote(`URL: ${url}`),\n          footer: config.msg.footer,\n        });\n      }\n    } catch (error) {\n      console.error(error);\n      await ctx.reply(formatter.quote(`An error occurred: ${error.message}`));\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\education\\mathquiz.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":6,"column":25,"nodeType":"Identifier","messageId":"undef","endLine":6,"endColumn":32},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":8,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":8,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'execute'.","line":16,"column":38,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":16,"endColumn":40},{"ruleId":"no-shadow","severity":2,"message":"'m' is already declared in the upper scope on line 16 column 25.","line":30,"column":45,"nodeType":"Identifier","messageId":"noShadow","endLine":30,"endColumn":46},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":46,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":46,"endColumn":20,"suggestions":[{"fix":{"range":[1446,1524],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":51,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":51,"endColumn":20,"suggestions":[{"fix":{"range":[1647,1698],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":63,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":63,"endColumn":20,"suggestions":[{"fix":{"range":[2163,2217],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Math Quiz Command\n * Interactive math challenges with different difficulty levels\n */\n\nconst mathQuizService = require('../../src/services/mathQuizService');\n\nmodule.exports = {\n  name: 'mathquiz',\n  description: 'Interactive math quiz game',\n  category: 'Education',\n  usage: '!mathquiz <mode>',\n  aliases: ['math', 'kuismath'],\n  cooldown: 30,\n\n  execute: async (naze, m, { args }) => {\n    try {\n      const mode = args[0]?.toLowerCase() || 'easy';\n      const playerId = m.sender;\n\n      // Check if user already has active quiz\n      const activeQuiz = mathQuizService.getActiveQuiz(playerId);\n      if (activeQuiz) {\n        return m.reply('Kamu masih memiliki quiz matematika yang aktif!\\nSelesaikan dulu ya.');\n      }\n\n      // Validate mode\n      const availableModes = mathQuizService.getAvailableModes();\n      if (!availableModes.includes(mode)) {\n        const modeList = availableModes.map(m => `â€¢ ${m}`).join('\\n');\n        return m.reply(\n          `Mode tidak valid!\\n\\nAvailable modes:\\n${modeList}\\n\\nExample: !mathquiz medium`\n        );\n      }\n\n      // Check rate limit\n      if (!mathQuizService.checkRateLimit(playerId, 'mathquiz')) {\n        return m.reply('Rate limit exceeded. Please wait before starting new quiz.');\n      }\n\n      // Start math quiz\n      const result = await mathQuizService.startMathQuiz(m.chat, playerId, mode);\n\n      if (result.success) {\n        await m.reply(result.message);\n        console.log(`Math quiz started for ${playerId} in ${m.chat} (mode: ${mode})`);\n      } else {\n        await m.reply('Failed to start math quiz. Please try again.');\n      }\n    } catch (error) {\n      console.error('Error in mathquiz command:', error);\n\n      if (error.message.includes('Rate limit')) {\n        await m.reply('Rate limit exceeded. Please wait before starting new quiz.');\n      } else if (error.message.includes('Invalid mode')) {\n        await m.reply(\n          'Invalid mode. Use: !mathquiz <mode>\\nAvailable modes: noob, easy, medium, hard, extreme, impossible'\n        );\n      } else {\n        await m.reply('Terjadi kesalahan saat memulai quiz matematika. Silakan coba lagi.');\n      }\n\n      console.error('Unexpected error in mathquiz:', error);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\entertainment\\apakah.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":1,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":8,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":8,"endColumn":21}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"module.exports = {\n  name: 'apakah',\n  aliases: ['apa'],\n  category: 'entertainment',\n  permissions: {\n    coin: 10,\n  },\n  code: async ctx => {\n    const { formatter, tools } = ctx.bot.context;\n    const input = ctx.args.join(' ') || null;\n\n    if (!input)\n      return await ctx.reply(\n        `${formatter.quote(tools.msg.generateInstruction(['send'], ['text']))}\\n${formatter.quote(\n          tools.msg.generateCmdExample(ctx.used, 'evangelion itu peak?')\n        )}`\n      );\n\n    try {\n      const answers = [\n        'Ya',\n        'Yoi',\n        'Iya dong',\n        'Tentu',\n        'Pasti',\n        'Udah pasti',\n        'Fix banget',\n        'Gas!',\n        'Seriusan iya',\n        'Jelas lah',\n        'Iyain aja deh',\n        'Mungkin',\n        'Mungkin iya',\n        'Mungkin nggak',\n        'Kayaknya iya',\n        'Kayaknya enggak',\n        '50:50',\n        'Bisa jadi',\n        'Entahlah',\n        'Tergantung mood',\n        'Tergantung siapa yang nanya',\n        'Kondisional banget nih',\n        'Gatau sih, cobain aja dulu',\n        'Masih dipikirin',\n        'Belum kepikiran',\n        'Ntar dulu ya',\n        'Hmm...',\n        'Enggak dulu deh',\n        'Tidak',\n        'Ogah',\n        'Nggak lah',\n        'Nope',\n        'Nggak mungkin',\n        'Mustahil sih',\n        'Apaan sih',\n        'Waduh jangan',\n        'Lah kok gitu?',\n        'Emangnya bisa?',\n        'Lu ngimpi ya?',\n        'Hehe... ngarep',\n        'Gitu amat yak',\n        'Lu pikir gampang?',\n        'Beneran nanya nih?',\n        'Yaelah bro',\n        'Ngaco lu',\n        'Coba ulang pertanyaannya deh',\n        'Nggak yakin banget',\n        'Serius lo?',\n        'Gajelas',\n      ];\n      const result = tools.cmd.getRandomElement(answers);\n\n      await ctx.reply(formatter.quote(result));\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\entertainment\\artinama.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":22},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":3,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":3,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":9,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":9,"endColumn":21}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const axios = require('axios');\n\nmodule.exports = {\n  name: 'artinama',\n  category: 'entertainment',\n  permissions: {\n    coin: 10,\n  },\n  code: async ctx => {\n    const { formatter, tools } = ctx.bot.context;\n    const input = ctx.args.join(' ') || null;\n\n    if (!input)\n      return await ctx.reply(\n        `${formatter.quote(tools.msg.generateInstruction(['send'], ['text']))}\\n${formatter.quote(\n          tools.msg.generateCmdExample(ctx.used, 'itsreimau')\n        )}`\n      );\n\n    try {\n      const apiUrl = tools.api.createUrl('siputzx', '/api/primbon/artinama', {\n        nama: input,\n      });\n      const result = (await axios.get(apiUrl)).data.data.arti;\n\n      await ctx.reply(result);\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error, true);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\entertainment\\ayanamirei.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":22},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":3,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":3,"endColumn":7}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const axios = require('axios');\n\nmodule.exports = {\n  name: 'ayanamirei',\n  aliases: ['ayanami', 'rei', 'reiayanami'],\n  category: 'entertainment',\n  permissions: {\n    coin: 10,\n  },\n  code: async ctx => {\n    const { formatter, tools, config } = ctx.bot.context;\n    try {\n      const apiUrl = tools.api.createUrl(\n        'https://api.github.com',\n        '/repos/Yashirof/ayanami-bot-discord/contents/images'\n      );\n      const result = tools.cmd.getRandomElement((await axios.get(apiUrl)).data);\n\n      await ctx.reply({\n        image: {\n          url: result.download_url,\n        },\n        mimetype: tools.mime.lookup('jpg'),\n        caption: formatter.quote('Those who hate themselves, cannot love or trust others.'),\n        footer: config.msg.footer,\n        buttons: [\n          {\n            buttonId: ctx.used.prefix + ctx.used.command,\n            buttonText: {\n              displayText: 'Ambil Lagi',\n            },\n          },\n        ],\n      });\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error, true);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\entertainment\\bluearchive.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":1,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":7}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"module.exports = {\n  name: 'bluearchive',\n  aliases: ['ba'],\n  category: 'entertainment',\n  permissions: {\n    coin: 10,\n  },\n  code: async ctx => {\n    const { formatter, tools, config } = ctx.bot.context;\n    try {\n      const result = tools.api.createUrl('hang', '/random/bluearchive');\n\n      await ctx.reply({\n        image: {\n          url: result,\n        },\n        mimetype: tools.mime.lookup('png'),\n        caption: formatter.quote('Vanitas vanitatum, et omnia vanitas.'),\n        footer: config.msg.footer,\n        buttons: [\n          {\n            buttonId: ctx.used.prefix + ctx.used.command,\n            buttonText: {\n              displayText: 'Ambil Lagi',\n            },\n          },\n        ],\n      });\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error, true);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\entertainment\\cecan.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":1,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":7,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":7,"endColumn":21}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"module.exports = {\n  name: 'cecan',\n  category: 'entertainment',\n  permissions: {\n    premium: true,\n  },\n  code: async ctx => {\n    const { formatter, tools, config } = ctx.bot.context;\n    const input = ctx.args.join(' ') || null;\n\n    if (input?.toLowerCase() === 'list') {\n      const listText = await tools.list.get('cecan');\n      return await ctx.reply({\n        text: listText,\n        footer: config.msg.footer,\n      });\n    }\n\n    try {\n      const listCecan = ['china', 'indonesia', 'japan', 'korea', 'thailand', 'vietnam'];\n      const cecan = listCecan.includes(input) ? input : tools.cmd.getRandomElement(listCecan);\n      const result = tools.api.createUrl('siputzx', `/api/r/cecan/${cecan}`);\n\n      await ctx.reply({\n        image: {\n          url: result,\n        },\n        mimetype: tools.mime.lookup('jpg'),\n        caption: formatter.quote(`Kategori: ${tools.msg.ucwords(cecan)}`),\n        footer: config.msg.footer,\n        buttons: [\n          {\n            buttonId: input\n              ? `${ctx.used.prefix + ctx.used.command} ${input}`\n              : ctx.used.prefix + ctx.used.command,\n            buttonText: {\n              displayText: 'Ambil Lagi',\n            },\n          },\n        ],\n      });\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error, true);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\entertainment\\cekkecocokan.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":22},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":3,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":3,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":10,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":10,"endColumn":21}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const axios = require('axios');\n\nmodule.exports = {\n  name: 'cekkecocokan',\n  aliases: ['checkkecocokan', 'kecocokan'],\n  category: 'entertainment',\n  permissions: {\n    coin: 10,\n  },\n  code: async ctx => {\n    const { formatter, tools, config } = ctx.bot.context;\n    const input = ctx.args.join(' ') || null;\n\n    if (!input)\n      return await ctx.reply(\n        `${formatter.quote(tools.msg.generateInstruction(['send'], ['text']))}\\n${formatter.quote(\n          tools.msg.generateCmdExample(ctx.used, 'shinji|kaworu')\n        )}`\n      );\n\n    try {\n      const [nama1, nama2] = input.split('|');\n      const apiUrl = tools.api.createUrl('siputzx', '/api/primbon/kecocokan_nama_pasangan', {\n        nama1: nama2 ? nama1 : ctx.sender.pushName,\n        nama2: nama2 || nama1,\n      });\n      const result = (await axios.get(apiUrl)).data.data;\n\n      await ctx.reply({\n        image: {\n          url: result.gambar,\n        },\n        mimetype: tools.mime.lookup('png'),\n        caption: `${formatter.quote(`Sisi Positif: ${result.sisi_positif}`)}\\n${formatter.quote(\n          `Sisi Negatif: ${result.sisi_negatif}`\n        )}`,\n        footer: config.msg.footer,\n      });\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error, true);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\entertainment\\cekkhodam.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":22},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":3,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":3,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":10,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":10,"endColumn":21}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const axios = require('axios');\n\nmodule.exports = {\n  name: 'cekkhodam',\n  aliases: ['checkkhodam', 'khodam'],\n  category: 'entertainment',\n  permissions: {\n    coin: 10,\n  },\n  code: async ctx => {\n    const { formatter, tools, config } = ctx.bot.context;\n    const input = ctx.args.join(' ') || null;\n\n    if (!input)\n      return await ctx.reply(\n        `${formatter.quote(tools.msg.generateInstruction(['send'], ['text']))}\\n${formatter.quote(\n          tools.msg.generateCmdExample(ctx.used, 'itsreimau')\n        )}`\n      );\n\n    try {\n      const apiUrl = tools.api.createUrl(\n        'https://raw.githubusercontent.com',\n        '/SazumiVicky/cek-khodam/main/khodam/list.txt',\n        {}\n      );\n      const result = tools.cmd.getRandomElement(\n        (await axios.get(apiUrl)).data.trim().split('\\n').filter(Boolean)\n      );\n\n      await ctx.reply({\n        text: `${formatter.quote(`Nama: ${input}`)}\\n${formatter.quote(`Khodam: ${result}`)}`,\n        footer: config.msg.footer,\n        buttons: [\n          {\n            buttonId: `${ctx.used.prefix + ctx.used.command} ${input}`,\n            buttonText: {\n              displayText: 'Ambil Lagi',\n            },\n          },\n        ],\n      });\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error, true);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\entertainment\\cosplay.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":1,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":7}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"module.exports = {\n  name: 'cosplay',\n  aliases: ['cosplayer'],\n  category: 'entertainment',\n  permissions: {\n    premium: true,\n  },\n  code: async ctx => {\n    const { formatter, tools, config } = ctx.bot.context;\n    try {\n      const result = tools.api.createUrl('neko', '/random/cosplay');\n\n      await ctx.reply({\n        image: {\n          url: result,\n        },\n        mimetype: tools.mime.lookup('png'),\n        caption: formatter.quote('Untukmu, tuan!'),\n        footer: config.msg.footer,\n        buttons: [\n          {\n            buttonId: ctx.used.prefix + ctx.used.command,\n            buttonText: {\n              displayText: 'Ambil Lagi',\n            },\n          },\n        ],\n      });\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error, true);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\entertainment\\elaina.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":1,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":7}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"module.exports = {\n  name: 'elaina',\n  category: 'entertainment',\n  permissions: {\n    coin: 10,\n  },\n  code: async ctx => {\n    const { formatter, tools, config } = ctx.bot.context;\n    try {\n      const result = tools.api.createUrl('hang', '/random/elaina');\n\n      await ctx.reply({\n        image: {\n          url: result,\n        },\n        mimetype: tools.mime.lookup('png'),\n        caption: formatter.quote('Sou, Watashi desu!'),\n        footer: config.msg.footer,\n        buttons: [\n          {\n            buttonId: ctx.used.prefix + ctx.used.command,\n            buttonText: {\n              displayText: 'Ambil Lagi',\n            },\n          },\n        ],\n      });\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error, true);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\entertainment\\fufufafa.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":22},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":3,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":3,"endColumn":7}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const axios = require('axios');\n\nmodule.exports = {\n  name: 'fufufafa',\n  category: 'entertainment',\n  permissions: {\n    coin: 10,\n  },\n  code: async ctx => {\n    const { formatter, tools, config } = ctx.bot.context;\n    try {\n      const apiUrl = tools.api.createUrl('https://fufufafapi.vanirvan.my.id', '/api');\n      const result = tools.cmd.getRandomElement((await axios.get(apiUrl)).data);\n\n      await ctx.reply({\n        image: {\n          url: result.image_url,\n        },\n        mimetype: tools.mime.lookup('jpg'),\n        caption: formatter.quote(`Doksli: ${result.doksli}`),\n        footer: config.msg.footer,\n        buttons: [\n          {\n            buttonId: ctx.used.prefix + ctx.used.command,\n            buttonText: {\n              displayText: 'Ambil Lagi',\n            },\n          },\n        ],\n      });\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error, true);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\entertainment\\how.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":1,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":20,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":20,"endColumn":21}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"module.exports = {\n  name: 'how',\n  aliases: [\n    'howgay',\n    'howpintar',\n    'howcantik',\n    'howganteng',\n    'howgabut',\n    'howgila',\n    'howlesbi',\n    'howstress',\n    'howbucin',\n    'howjones',\n    'howsadboy',\n  ],\n  category: 'entertainment',\n  permissions: {\n    coin: 10,\n  },\n  code: async ctx => {\n    const { formatter, tools, config } = ctx.bot.context;\n    const input = ctx.args.join(' ') || null;\n\n    if (ctx.used.command === 'how' || input?.toLowerCase() === 'list') {\n      const listText = await tools.list.get('how');\n      return await ctx.reply({\n        text: listText,\n        footer: config.msg.footer,\n      });\n    }\n\n    if (!input)\n      return await ctx.reply(\n        `${formatter.quote(tools.msg.generateInstruction(['send'], ['text']))}\\n` +\n          `${formatter.quote(tools.msg.generateCmdExample(ctx.used, 'itsreimau'))}\\n${formatter.quote(\n            tools.msg.generateNotes([\n              `Ketik ${formatter.inlineCode(`${ctx.used.prefix + ctx.used.command} list`)} untuk melihat daftar.`,\n            ])\n          )}`\n      );\n\n    try {\n      const randomNumber = Math.floor(Math.random() * 100);\n\n      await ctx.reply(\n        formatter.quote(`${input} itu ${randomNumber}% ${ctx.used.command.replace('how', '')}.`)\n      );\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\entertainment\\iqtest.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":1,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":7}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"module.exports = {\n  name: 'iqtest',\n  aliases: ['iq', 'testiq'],\n  category: 'entertainment',\n  permissions: {\n    coin: 10,\n  },\n  code: async ctx => {\n    const { formatter, database: db } = ctx.bot.context;\n    const winGame = (await db.get(`user.${ctx.getId(ctx.sender.jid)}.winGame`)) || 0;\n\n    let iqScore;\n    let feedback;\n\n    if (winGame < 5) {\n      iqScore = Math.floor(Math.random() * 50) + 1;\n      feedback =\n        iqScore < 50\n          ? 'Hmm, mungkin kamu harus mencobanya lagi? Jangan menyerah!'\n          : 'Cukup bagus, terus bermain untuk meningkatkan keterampilan kamu!';\n    } else if (winGame < 20) {\n      iqScore = Math.floor(Math.random() * 50) + 51;\n      feedback =\n        iqScore < 100\n          ? 'Tidak buruk, tapi kamu bisa melakukannya lebih baik!'\n          : 'Kamu semakin pintar! Pertahankan momentum!';\n    } else {\n      iqScore = Math.floor(Math.random() * 50) + 101;\n      feedback =\n        iqScore < 150\n          ? 'Luar biasa! Kamu di atas rata-rata!'\n          : 'Wah, kamu jenius luar biasa! Kemenanganmu sangat mengesankan!';\n    }\n\n    await ctx.reply(formatter.quote(`ðŸ§  IQ-mu sebesar: ${iqScore}. ${feedback}`));\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\entertainment\\jadian.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":22},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":3,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":3,"endColumn":7}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const axios = require('axios');\n\nmodule.exports = {\n  name: 'jadian',\n  aliases: ['jodoh'],\n  category: 'entertainment',\n  permissions: {\n    group: true,\n  },\n  code: async ctx => {\n    const { formatter, tools, config } = ctx.bot.context;\n    try {\n      const members = await ctx.group().members();\n      const memberIDs = members.map(member => member.jid);\n\n      const selected = [];\n      selected[0] = tools.cmd.getRandomElement(memberIDs);\n      do {\n        selected[1] = tools.cmd.getRandomElement(memberIDs);\n      } while (selected[1] === selected[0]);\n\n      const word = tools.cmd.getRandomElement(\n        (\n          await axios.get(\n            tools.api.createUrl(\n              'https://raw.githubusercontent.com',\n              '/BochilTeam/database/master/kata-kata/bucin.json'\n            )\n          )\n        ).data\n      );\n\n      await ctx.reply({\n        text:\n          `${formatter.quote(`@${ctx.getId(selected[0])} â¤ï¸ @${ctx.getId(selected[1])}`)}\\n${formatter.quote(\n            word\n          )}` || config.msg.notFound,\n        mentions: selected,\n        footer: config.msg.footer,\n        buttons: [\n          {\n            buttonId: ctx.used.prefix + ctx.used.command,\n            buttonText: {\n              displayText: 'Ambil Lagi',\n            },\n          },\n        ],\n      });\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\entertainment\\joke.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":22},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":3,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":3,"endColumn":7}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const axios = require('axios');\n\nmodule.exports = {\n  name: 'joke',\n  aliases: ['jokes'],\n  category: 'entertainment',\n  permissions: {\n    coin: 10,\n  },\n  code: async ctx => {\n    const { tools, config } = ctx.bot.context;\n    try {\n      const apiUrl = tools.api.createUrl('https://candaan-api.vercel.app', '/api/text/random');\n      const result = (await axios.get(apiUrl)).data.data;\n\n      await ctx.reply({\n        text: result,\n        footer: config.msg.footer,\n        buttons: [\n          {\n            buttonId: ctx.used.prefix + ctx.used.command,\n            buttonText: {\n              displayText: 'Ambil Lagi',\n            },\n          },\n        ],\n      });\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error, true);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\entertainment\\kapankah.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":1,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":8,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":8,"endColumn":21}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"module.exports = {\n  name: 'kapankah',\n  aliases: ['kapan'],\n  category: 'entertainment',\n  permissions: {\n    coin: 10,\n  },\n  code: async ctx => {\n    const { formatter, tools } = ctx.bot.context;\n    const input = ctx.args.join(' ') || null;\n\n    if (!input)\n      return await ctx.reply(\n        `${formatter.quote(tools.msg.generateInstruction(['send'], ['text']))}\\n${formatter.quote(\n          tools.msg.generateCmdExample(ctx.used, 'evangelion itu peak?')\n        )}`\n      );\n\n    try {\n      const minMs = 1000;\n      const maxMs = 1000 * 60 * 60 * 24 * 365.25 * 10;\n      const randomMs = Math.floor(Math.random() * (maxMs - minMs) + minMs);\n      const duration = tools.msg.convertMsToDuration(randomMs);\n\n      await ctx.reply(formatter.quote(`${duration} lagi...`));\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\entertainment\\konachan.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":1,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":7}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"module.exports = {\n  name: 'konachan',\n  category: 'entertainment',\n  permissions: {\n    coin: 10,\n  },\n  code: async ctx => {\n    const { formatter, tools, config } = ctx.bot.context;\n    try {\n      const result = tools.api.createUrl('neko', '/random/konachan');\n\n      await ctx.reply({\n        image: {\n          url: result,\n        },\n        mimetype: tools.mime.lookup('png'),\n        caption: formatter.quote('Untukmu, tuan!'),\n        footer: config.msg.footer,\n        buttons: [\n          {\n            buttonId: ctx.used.prefix + ctx.used.command,\n            buttonText: {\n              displayText: 'Ambil Lagi',\n            },\n          },\n        ],\n      });\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error, true);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\entertainment\\lewd.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":1,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":7}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"module.exports = {\n  name: 'lewd',\n  aliases: ['nsfw'],\n  category: 'entertainment',\n  permissions: {\n    premium: true,\n  },\n  code: async ctx => {\n    const { formatter, tools, config } = ctx.bot.context;\n    try {\n      const result = tools.api.createUrl('hang', '/random/nsfw');\n\n      await ctx.reply({\n        image: {\n          url: result,\n        },\n        mimetype: tools.mime.lookup('png'),\n        caption: formatter.quote('Cabul!'),\n        footer: config.msg.footer,\n        buttons: [\n          {\n            buttonId: ctx.used.prefix + ctx.used.command,\n            buttonText: {\n              displayText: 'Ambil Lagi',\n            },\n          },\n        ],\n      });\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error, true);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\entertainment\\loli.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":1,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":7}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"module.exports = {\n  name: 'loli',\n  category: 'entertainment',\n  permissions: {\n    coin: 10,\n  },\n  code: async ctx => {\n    const { formatter, tools, config } = ctx.bot.context;\n    try {\n      const result = tools.api.createUrl('izumi', '/random/loli');\n\n      await ctx.reply({\n        image: {\n          url: result,\n        },\n        mimetype: tools.mime.lookup('png'),\n        caption: formatter.quote('FBI! Open Up!'),\n        footer: config.msg.footer,\n        buttons: [\n          {\n            buttonId: ctx.used.prefix + ctx.used.command,\n            buttonText: {\n              displayText: 'Ambil Lagi',\n            },\n          },\n        ],\n      });\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error, true);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\entertainment\\meme.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":22},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":3,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":3,"endColumn":7}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const axios = require('axios');\n\nmodule.exports = {\n  name: 'meme',\n  aliases: ['memes'],\n  category: 'entertainment',\n  permissions: {\n    coin: 10,\n  },\n  code: async ctx => {\n    const { formatter, tools, config } = ctx.bot.context;\n    try {\n      const apiUrl = tools.api.createUrl('https://candaan-api.vercel.app', '/api/image/random');\n      const result = (await axios.get(apiUrl)).data.data;\n\n      await ctx.reply({\n        image: {\n          url: result.url,\n        },\n        mimetype: tools.mime.lookup('jpeg'),\n        caption: formatter.quote(`Sumber: ${result.source}`),\n        footer: config.msg.footer,\n        buttons: [\n          {\n            buttonId: ctx.used.prefix + ctx.used.command,\n            buttonText: {\n              displayText: 'Ambil Lagi',\n            },\n          },\n        ],\n      });\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error, true);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\entertainment\\namaninja.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":1,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":8,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":8,"endColumn":21}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"module.exports = {\n  name: 'namaninja',\n  aliases: ['ninja'],\n  category: 'entertainment',\n  permissions: {\n    coin: 10,\n  },\n  code: async ctx => {\n    const { formatter, tools } = ctx.bot.context;\n    const input = ctx.args.join(' ') || null;\n\n    if (!input)\n      return await ctx.reply(\n        `${formatter.quote(tools.msg.generateInstruction(['send'], ['text']))}\\n${formatter.quote(\n          tools.msg.generateCmdExample(ctx.used, 'itsreimau')\n        )}`\n      );\n\n    try {\n      const result = input.replace(\n        /[a-z]/gi,\n        inp =>\n          ({\n            a: 'ka',\n            b: 'tu',\n            c: 'mi',\n            d: 'te',\n            e: 'ku',\n            f: 'lu',\n            g: 'ji',\n            h: 'ri',\n            i: 'ki',\n            j: 'zu',\n            k: 'me',\n            l: 'ta',\n            m: 'rin',\n            n: 'to',\n            o: 'mo',\n            p: 'no',\n            q: 'ke',\n            r: 'shi',\n            s: 'ari',\n            t: 'ci',\n            u: 'do',\n            v: 'ru',\n            w: 'mei',\n            x: 'na',\n            y: 'fu',\n            z: 'zi',\n          })[inp.toLowerCase()] || inp\n      );\n\n      await ctx.reply(formatter.quote(result));\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\entertainment\\namapurba.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":1,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":8,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":8,"endColumn":21}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"module.exports = {\n  name: 'namapurba',\n  aliases: ['purba'],\n  category: 'entertainment',\n  permissions: {\n    coin: 10,\n  },\n  code: async ctx => {\n    const { formatter, tools } = ctx.bot.context;\n    const input = ctx.args.join(' ') || null;\n\n    if (!input)\n      return await ctx.reply(\n        `${formatter.quote(tools.msg.generateInstruction(['send'], ['text']))}\\n${formatter.quote(\n          tools.msg.generateCmdExample(ctx.used, 'itsreimau')\n        )}`\n      );\n\n    try {\n      const result = input.replace(/[aiueo]/gi, '$&ve');\n\n      await ctx.reply(formatter.quote(result));\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\entertainment\\nsfwhub.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":1,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":7,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":7,"endColumn":21}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"module.exports = {\n  name: 'nsfwhub',\n  category: 'entertainment',\n  permissions: {\n    premium: true,\n  },\n  code: async ctx => {\n    const { formatter, tools, config } = ctx.bot.context;\n    const input = ctx.args.join(' ') || null;\n\n    if (input?.toLowerCase() === 'list') {\n      const listText = await tools.list.get('nsfwhub');\n      return await ctx.reply({\n        text: listText,\n        footer: config.msg.footer,\n      });\n    }\n\n    try {\n      const listNsfwhub = [\n        'anal',\n        'ass',\n        'bdsm',\n        'black',\n        'blowjub',\n        'boobs',\n        'bottomless',\n        'collared',\n        'cum',\n        'cumsluts',\n        'dick',\n        'dom',\n        'dp',\n        'easter',\n        'extreme',\n        'feet',\n        'finger',\n        'fuck',\n        'futa',\n        'gay',\n        'group',\n        'hentai',\n        'kiss',\n        'lesbian',\n        'lick',\n        'pegged',\n        'puffies',\n        'pussy',\n        'real',\n        'sixtynine',\n        'suck',\n        'tattoo',\n        'tiny',\n        'xmas',\n      ];\n      const nsfwhub = listNsfwhub.includes(input) ? input : tools.cmd.getRandomElement(listNsfwhub);\n      const result = tools.api.createUrl('neko', `/nsfwhub/${nsfwhub}`);\n\n      await ctx.reply({\n        image: {\n          url: result,\n        },\n        mimetype: tools.mime.lookup('jpg'),\n        caption: formatter.quote(`Kategori: ${tools.msg.ucwords(nsfwhub)}`),\n        footer: config.msg.footer,\n        buttons: [\n          {\n            buttonId: input\n              ? `${ctx.used.prefix + ctx.used.command} ${input}`\n              : ctx.used.prefix + ctx.used.command,\n            buttonText: {\n              displayText: 'Ambil Lagi',\n            },\n          },\n        ],\n      });\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error, true);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\entertainment\\picre.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":1,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":7}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"module.exports = {\n  name: 'picre',\n  category: 'entertainment',\n  permissions: {\n    coin: 10,\n  },\n  code: async ctx => {\n    const { formatter, tools, config } = ctx.bot.context;\n    try {\n      const result = tools.api.createUrl('neko', '/random/picre');\n\n      await ctx.reply({\n        image: {\n          url: result,\n        },\n        mimetype: tools.mime.lookup('png'),\n        caption: formatter.quote('Untukmu, tuan!'),\n        footer: config.msg.footer,\n        buttons: [\n          {\n            buttonId: ctx.used.prefix + ctx.used.command,\n            buttonText: {\n              displayText: 'Ambil Lagi',\n            },\n          },\n        ],\n      });\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error, true);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\entertainment\\ppcouple.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":22},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":3,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":3,"endColumn":7}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const axios = require('axios');\n\nmodule.exports = {\n  name: 'ppcouple',\n  aliases: ['ppcp'],\n  category: 'entertainment',\n  permissions: {\n    coin: 10,\n  },\n  code: async ctx => {\n    const { tools } = ctx.bot.context;\n    try {\n      const apiUrl = tools.api.createUrl('https://sandipbaruwal.onrender.com', '/dp');\n      const result = (await axios.get(apiUrl)).data;\n\n      await ctx.reply({\n        album: [\n          {\n            image: {\n              url: result.male,\n            },\n            mimetype: tools.mime.lookup('jpg'),\n          },\n          {\n            image: {\n              url: result.female,\n            },\n            mimetype: tools.mime.lookup('jpg'),\n          },\n        ],\n      });\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error, true);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\entertainment\\proverb.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":22},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":3,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":3,"endColumn":7},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":17,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":17,"endColumn":18,"suggestions":[{"fix":{"range":[455,499],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const axios = require('axios');\n\nmodule.exports = {\n  name: 'proverb',\n  aliases: ['peribahasa'],\n  category: 'entertainment',\n  permissions: {\n    coin: 10,\n  },\n  code: async ctx => {\n    const { formatter, tools, config } = ctx.bot.context;\n    try {\n      const apiUrl = tools.api.createUrl(\n        'http://jagokata-api.hofeda4501.serv00.net',\n        '/peribahasa-acak.php'\n      ); // Dihosting sendiri, karena jagokata-api.rf.gd malah error\n      console.log('Calling proverb API:', apiUrl);\n      const response = await axios.get(apiUrl);\n      if (\n        !response.data ||\n        !response.data.data ||\n        !Array.isArray(response.data.data) ||\n        response.data.data.length === 0\n      ) {\n        throw new Error('Invalid or empty API response');\n      }\n      const result = tools.cmd.getRandomElement(response.data.data);\n      if (!result || !result.kalimat || !result.arti) {\n        throw new Error('Invalid proverb data structure');\n      }\n\n      await ctx.reply({\n        text: `${formatter.quote(`Kalimat: ${result.kalimat}`)}\\n${formatter.quote(\n          `Arti: ${result.arti}`\n        )}`,\n        footer: config.msg.footer,\n        buttons: [\n          {\n            buttonId: ctx.used.prefix + ctx.used.command,\n            buttonText: {\n              displayText: 'Ambil Lagi',\n            },\n          },\n        ],\n      });\n    } catch (error) {\n      await tools.cmd.handleError(ctx.bot.context, ctx, error, true);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\entertainment\\quotes.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":22},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":3,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":3,"endColumn":7}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const axios = require('axios');\n\nmodule.exports = {\n  name: 'quotes',\n  aliases: ['quote'],\n  category: 'entertainment',\n  permissions: {\n    coin: 10,\n  },\n  code: async ctx => {\n    const { formatter, tools, config } = ctx.bot.context;\n    try {\n      const apiUrl = tools.api.createUrl('http://jagokata-api.hofeda4501.serv00.net', '/acak.php'); // Dihosting sendiri, karena jagokata-api.rf.gd malah error\n      const result = tools.cmd.getRandomElement((await axios.get(apiUrl)).data.data.quotes);\n\n      await ctx.reply({\n        text:\n          `${formatter.quote(`â€œ${result.quote}â€`)}\\n` +\n          `${formatter.quote('Â· Â· â”€ Â·âœ¶Â· â”€ Â· Â·')}\\n` +\n          `${formatter.quote(`Nama: ${result.author.name}`)}\\n${formatter.quote(\n            `Deskripsi: ${result.author.description}`\n          )}`,\n        footer: config.msg.footer,\n        buttons: [\n          {\n            buttonId: ctx.used.prefix + ctx.used.command,\n            buttonText: {\n              displayText: 'Ambil Lagi',\n            },\n          },\n        ],\n      });\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error, true);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\entertainment\\waifuim.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":22},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":3,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":3,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":10,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":10,"endColumn":21}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const axios = require('axios');\n\nmodule.exports = {\n  name: 'waifuim',\n  aliases: ['wim'],\n  category: 'entertainment',\n  permissions: {\n    premium: true,\n  },\n  code: async ctx => {\n    const { formatter, tools, config } = ctx.bot.context;\n    const input = ctx.args.join(' ') || null;\n\n    if (input?.toLowerCase() === 'list') {\n      const listText = await tools.list.get('waifuim');\n      return await ctx.reply({\n        text: listText,\n        footer: config.msg.footer,\n      });\n    }\n\n    try {\n      const listWaifuim = [\n        'ass',\n        'ecchi',\n        'ero',\n        'hentai',\n        'maid',\n        'milf',\n        'oppai',\n        'oral',\n        'paizuri',\n        'selfies',\n        'uniform',\n        'waifu',\n      ];\n      const waifuim = listWaifuim.includes(input) ? input : tools.cmd.getRandomElement(listWaifuim);\n      const apiUrl = tools.api.createUrl('https://api.waifu.im', '/search', {\n        included_tags: waifuim,\n      });\n      const result = (await axios.get(apiUrl)).data.images[0].url;\n\n      await ctx.reply({\n        image: {\n          url: result,\n        },\n        mimetype: tools.mime.lookup('jpg'),\n        caption: formatter.quote(`Kategori: ${tools.msg.ucwords(waifuim)}`),\n        footer: config.msg.footer,\n        buttons: [\n          {\n            buttonId: input\n              ? `${ctx.used.prefix + ctx.used.command} ${input}`\n              : ctx.used.prefix + ctx.used.command,\n            buttonText: {\n              displayText: 'Ambil Lagi',\n            },\n          },\n        ],\n      });\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error, true);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\entertainment\\waifupics.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":22},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":3,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":3,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":10,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":10,"endColumn":21}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const axios = require('axios');\n\nmodule.exports = {\n  name: 'waifupics',\n  aliases: ['wpics'],\n  category: 'entertainment',\n  permissions: {\n    coin: 10,\n  },\n  code: async ctx => {\n    const { formatter, tools, config } = ctx.bot.context;\n    const input = ctx.args.join(' ') || null;\n\n    if (input?.toLowerCase() === 'list') {\n      const listText = await tools.list.get('waifupics');\n      return await ctx.reply({\n        text: listText,\n        footer: config.msg.footer,\n      });\n    }\n\n    try {\n      const listWaifupics = ['waifu', 'neko', 'shinobu', 'megumin'];\n      const waifupics = listWaifupics.includes(input)\n        ? input\n        : tools.cmd.getRandomElement(listWaifupics);\n      const apiUrl = tools.api.createUrl('https://api.waifu.pics', `/sfw/${waifupics}`);\n      const result = (await axios.get(apiUrl)).data.url;\n\n      await ctx.reply({\n        image: {\n          url: result,\n        },\n        mimetype: tools.mime.lookup('jpg'),\n        caption: `${formatter.quote(`Kategori: ${tools.msg.ucwords(waifupics)}`)}\\n${formatter.quote(\n          'Tipe: SFW'\n        )}`,\n        footer: config.msg.footer,\n        buttons: [\n          {\n            buttonId: input\n              ? `${ctx.used.prefix + ctx.used.command} ${input}`\n              : ctx.used.prefix + ctx.used.command,\n            buttonText: {\n              displayText: 'Ambil Lagi',\n            },\n          },\n        ],\n      });\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error, true);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\entertainment\\waifupicsnsfw.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":22},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":3,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":3,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":10,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":10,"endColumn":21}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const axios = require('axios');\n\nmodule.exports = {\n  name: 'waifupicsnsfw',\n  aliases: ['wpicsnsfw'],\n  category: 'entertainment',\n  permissions: {\n    premium: true,\n  },\n  code: async ctx => {\n    const { formatter, tools, config } = ctx.bot.context;\n    const input = ctx.args.join(' ') || null;\n\n    if (input?.toLowerCase() === 'list') {\n      const listText = await tools.list.get('waifupicsnsfw');\n      return await ctx.reply({\n        text: listText,\n        footer: config.msg.footer,\n      });\n    }\n\n    try {\n      const listWaifupics = ['waifu', 'neko', 'trap'];\n      const waifupics = listWaifupics.includes(input)\n        ? input\n        : tools.cmd.getRandomElement(listWaifupics);\n      const apiUrl = tools.api.createUrl('https://api.waifu.pics', `/nsfw/${waifupics}`);\n      const result = (await axios.get(apiUrl)).data.url;\n\n      await ctx.reply({\n        image: {\n          url: result,\n        },\n        mimetype: tools.mime.lookup('jpg'),\n        caption: `${formatter.quote(`Kategori: ${tools.msg.ucwords(waifupics)}`)}\\n${formatter.quote(\n          'Tipe: NSFW'\n        )}`,\n        footer: config.msg.footer,\n        buttons: [\n          {\n            buttonId: input\n              ? `${ctx.used.prefix + ctx.used.command} ${input}`\n              : ctx.used.prefix + ctx.used.command,\n            buttonText: {\n              displayText: 'Ambil Lagi',\n            },\n          },\n        ],\n      });\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error, true);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\fun\\cekkhodam.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":6,"column":28,"nodeType":"Identifier","messageId":"undef","endLine":6,"endColumn":35},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":8,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":8,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'execute'.","line":16,"column":38,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":16,"endColumn":40},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":32,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":32,"endColumn":20,"suggestions":[{"fix":{"range":[839,907],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":37,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":37,"endColumn":20,"suggestions":[{"fix":{"range":[1027,1079],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":45,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":45,"endColumn":20,"suggestions":[{"fix":{"range":[1338,1393],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Cek Khodam Command\n * Mystical entity checking fun command\n */\n\nconst funCommandsService = require('../../src/services/funCommandsService');\n\nmodule.exports = {\n  name: 'cekkhodam',\n  description: 'Check mystical entity',\n  category: 'Fun',\n  usage: '!cekkhodam <name>',\n  aliases: ['khodam'],\n  cooldown: 15,\n\n  execute: async (naze, m, { args }) => {\n    try {\n      const targetName = args.join(' ') || m.pushName || 'kamu';\n\n      // Check rate limit\n      if (!funCommandsService.checkRateLimit(m.sender, 'cekkhodam')) {\n        return m.reply(\n          'Rate limit exceeded. Please wait 30 seconds before using this command again.'\n        );\n      }\n\n      // Get khodam analysis\n      const result = await funCommandsService.cekKhodam(targetName);\n\n      if (result.success) {\n        await m.reply(result.result);\n        console.log(`Cek khodam executed for ${targetName} by ${m.sender}`);\n      } else {\n        await m.reply('Failed to check khodam. Please try again.');\n      }\n    } catch (error) {\n      console.error('Error in cekkhodam command:', error);\n\n      if (error.message.includes('Rate limit')) {\n        await m.reply('Rate limit exceeded. Please wait before using this command again.');\n      } else {\n        await m.reply('Terjadi kesalahan saat mengecek khodam. Silakan coba lagi.');\n      }\n\n      console.error('Unexpected error in cekkhodam:', error);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\fun\\cekmati.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":6,"column":28,"nodeType":"Identifier","messageId":"undef","endLine":6,"endColumn":35},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":8,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":8,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'execute'.","line":16,"column":38,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":16,"endColumn":40},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":32,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":32,"endColumn":20,"suggestions":[{"fix":{"range":[818,884],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":37,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":37,"endColumn":20,"suggestions":[{"fix":{"range":[1003,1053],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":47,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":47,"endColumn":20,"suggestions":[{"fix":{"range":[1439,1492],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Cek Mati Command\n * Age prediction fun command\n */\n\nconst funCommandsService = require('../../src/services/funCommandsService');\n\nmodule.exports = {\n  name: 'cekmati',\n  description: 'Predict death age',\n  category: 'Fun',\n  usage: '!cekmati <name>',\n  aliases: ['mati'],\n  cooldown: 20,\n\n  execute: async (naze, m, { args }) => {\n    try {\n      const targetName = args.join(' ') || m.pushName || 'kamu';\n\n      // Check rate limit\n      if (!funCommandsService.checkRateLimit(m.sender, 'cekmati')) {\n        return m.reply(\n          'Rate limit exceeded. Please wait 30 seconds before using this command again.'\n        );\n      }\n\n      // Get death age prediction\n      const result = await funCommandsService.cekMati(targetName);\n\n      if (result.success) {\n        await m.reply(result.result);\n        console.log(`Cek mati executed for ${targetName} by ${m.sender}`);\n      } else {\n        await m.reply('Failed to predict age. Please try again.');\n      }\n    } catch (error) {\n      console.error('Error in cekmati command:', error);\n\n      if (error.message.includes('Rate limit')) {\n        await m.reply('Rate limit exceeded. Please wait before using this command again.');\n      } else if (error.response?.status === 429) {\n        await m.reply('API rate limit exceeded. Please try again later.');\n      } else {\n        await m.reply('Terjadi kesalahan saat memprediksi umur. Silakan coba lagi.');\n      }\n\n      console.error('Unexpected error in cekmati:', error);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\fun\\ceksifat.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":6,"column":28,"nodeType":"Identifier","messageId":"undef","endLine":6,"endColumn":35},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":8,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":8,"endColumn":7},{"ruleId":"no-unused-vars","severity":1,"message":"'text' is defined but never used. Allowed unused args must match /^_/u.","line":16,"column":36,"nodeType":"Identifier","messageId":"unusedVar","endLine":16,"endColumn":40,"suggestions":[{"messageId":"removeVar","data":{"varName":"text"},"fix":{"range":[375,381],"text":""},"desc":"Remove unused variable 'text'."}]},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'execute'.","line":16,"column":44,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":16,"endColumn":46},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":32,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":32,"endColumn":20,"suggestions":[{"fix":{"range":[872,939],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":37,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":37,"endColumn":20,"suggestions":[{"fix":{"range":[1066,1117],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":45,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":45,"endColumn":20,"suggestions":[{"fix":{"range":[1379,1433],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Cek Sifat Command\n * Personality analysis fun command with proper error handling\n */\n\nconst funCommandsService = require('../../src/services/funCommandsService');\n\nmodule.exports = {\n  name: 'ceksifat',\n  description: 'Analyze personality traits',\n  category: 'Fun',\n  usage: '!ceksifat <name>',\n  aliases: ['sifat'],\n  cooldown: 10,\n\n  execute: async (naze, m, { args, text }) => {\n    try {\n      const targetName = args.join(' ') || m.pushName || 'kamu';\n\n      // Check rate limit\n      if (!funCommandsService.checkRateLimit(m.sender, 'ceksifat')) {\n        return m.reply(\n          'Rate limit exceeded. Please wait 30 seconds before using this command again.'\n        );\n      }\n\n      // Get personality analysis\n      const result = await funCommandsService.cekSifat(targetName);\n\n      if (result.success) {\n        await m.reply(result.result);\n        console.log(`Cek sifat executed for ${targetName} by ${m.sender}`);\n      } else {\n        await m.reply('Failed to analyze personality. Please try again.');\n      }\n    } catch (error) {\n      console.error('Error in ceksifat command:', error);\n\n      if (error.message.includes('Rate limit')) {\n        await m.reply('Rate limit exceeded. Please wait before using this command again.');\n      } else {\n        await m.reply('Terjadi kesalahan saat menganalisis sifat. Silakan coba lagi.');\n      }\n\n      console.error('Unexpected error in ceksifat:', error);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\game\\asahotak.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":22},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":2,"column":20,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":27},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":6,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":6,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":9,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":9,"endColumn":21}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const axios = require('axios');\nconst didYouMean = require('didyoumean');\n\nconst session = new Map();\n\nmodule.exports = {\n  name: 'asahotak',\n  category: 'game',\n  code: async ctx => {\n    const { formatter, tools, config, database: db } = ctx.bot.context;\n    if (session.has(ctx.id))\n      return await ctx.reply(formatter.quote('ðŸŽ® A game session is already in progress!'));\n\n    try {\n      const apiUrl = tools.api.createUrl(\n        'https://raw.githubusercontent.com',\n        '/BochilTeam/database/refs/heads/master/games/asahotak.json'\n      );\n      const result = tools.cmd.getRandomElement((await axios.get(apiUrl)).data);\n\n      const game = {\n        coin: 10,\n        timeout: 60000,\n        answer: result.jawaban.toLowerCase(),\n      };\n\n      session.set(ctx.id, true);\n\n      await ctx.reply({\n        text:\n          `${formatter.quote(`Question: ${result.soal}`)}\n` +\n          `${formatter.quote(`Bonus: ${game.coin} Coins`)}\n${formatter.quote(`Time limit: ${tools.msg.convertMsToDuration(game.timeout)}`)}`,\n        footer: config.msg.footer,\n        buttons: [\n          {\n            buttonId: 'hint',\n            buttonText: {\n              displayText: 'Hint',\n            },\n          },\n          {\n            buttonId: 'surrender',\n            buttonText: {\n              displayText: 'Surrender',\n            },\n          },\n        ],\n      });\n\n      const collector = ctx.MessageCollector({\n        time: game.timeout,\n      });\n\n      const playAgain = [\n        {\n          buttonId: ctx.used.prefix + ctx.used.command,\n          buttonText: {\n            displayText: 'Play Again',\n          },\n        },\n      ];\n\n      collector.on('collect', async m => {\n        const participantAnswer = m.content.toLowerCase();\n        const participantId = ctx.getId(m.sender);\n\n        if (participantAnswer === game.answer) {\n          session.delete(ctx.id);\n          collector.stop();\n          await db.add(`user.${participantId}.coin`, game.coin);\n          await db.add(`user.${participantId}.winGame`, 1);\n          await ctx.sendMessage(\n            ctx.id,\n            {\n              text: `${formatter.quote('ðŸ’¯ Correct!')}\\n${formatter.quote(`+${game.coin} Coins`)}`,\n              footer: config.msg.footer,\n              buttons: playAgain,\n            },\n            {\n              quoted: m,\n            }\n          );\n        } else if (participantAnswer === 'hint') {\n          const clue = game.answer.replace(/[aiueo]/g, '_');\n          await ctx.sendMessage(\n            ctx.id,\n            {\n              text: formatter.monospace(clue.toUpperCase()),\n            },\n            {\n              quoted: m,\n            }\n          );\n        } else if (participantAnswer === 'surrender') {\n          session.delete(ctx.id);\n          collector.stop();\n          await ctx.sendMessage(\n            ctx.id,\n            {\n              text: `${formatter.quote('ðŸ³ï¸ You surrendered!')}\\n${formatter.quote(\n                `The answer is ${tools.msg.ucwords(game.answer)}.`\n              )}`,\n              footer: config.msg.footer,\n              buttons: playAgain,\n            },\n            {\n              quoted: m,\n            }\n          );\n        } else if (didYouMean(participantAnswer, [game.answer]) === game.answer) {\n          await ctx.sendMessage(\n            ctx.id,\n            {\n              text: formatter.quote('ðŸŽ¯ A little more!'),\n            },\n            {\n              quoted: m,\n            }\n          );\n        }\n      });\n\n      collector.on('end', async () => {\n        if (session.has(ctx.id)) {\n          session.delete(ctx.id);\n          await ctx.reply({\n            text: `${formatter.quote('â± Time is up!')}\\n${formatter.quote(\n              `The answer is ${tools.msg.ucwords(game.answer)}.`\n            )}`,\n            footer: config.msg.footer,\n            buttons: playAgain,\n          });\n        }\n      });\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error, true);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\game\\caklontong.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":22},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":2,"column":20,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":27},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":6,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":6,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":9,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":9,"endColumn":21}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const axios = require('axios');\nconst didYouMean = require('didyoumean');\n\nconst session = new Map();\n\nmodule.exports = {\n  name: 'caklontong',\n  category: 'game',\n  code: async ctx => {\n    const { formatter, tools, config, database: db } = ctx.bot.context;\n    if (session.has(ctx.id))\n      return await ctx.reply(formatter.quote('ðŸŽ® A game session is already in progress!'));\n\n    try {\n      const apiUrl = tools.api.createUrl(\n        'https://raw.githubusercontent.com',\n        '/BochilTeam/database/refs/heads/master/games/caklontong.json'\n      );\n      const result = tools.cmd.getRandomElement((await axios.get(apiUrl)).data);\n\n      const game = {\n        coin: 10,\n        timeout: 60000,\n        answer: result.jawaban.toLowerCase(),\n        description: result.deskripsi,\n      };\n\n      session.set(ctx.id, true);\n\n      await ctx.reply({\n        text:\n          `${formatter.quote(`Question: ${result.soal}`)}\n` +\n          `${formatter.quote(`Bonus: ${game.coin} Coins`)}\n${formatter.quote(`Time limit: ${tools.msg.convertMsToDuration(game.timeout)}`)}`,\n        footer: config.msg.footer,\n        buttons: [\n          {\n            buttonId: 'hint',\n            buttonText: {\n              displayText: 'Hint',\n            },\n          },\n          {\n            buttonId: 'surrender',\n            buttonText: {\n              displayText: 'Surrender',\n            },\n          },\n        ],\n      });\n\n      const collector = ctx.MessageCollector({\n        time: game.timeout,\n      });\n\n      const playAgain = [\n        {\n          buttonId: ctx.used.prefix + ctx.used.command,\n          buttonText: {\n            displayText: 'Play Again',\n          },\n        },\n      ];\n\n      collector.on('collect', async m => {\n        const participantAnswer = m.content.toLowerCase();\n        const participantId = ctx.getId(m.sender);\n\n        if (participantAnswer === game.answer) {\n          session.delete(ctx.id);\n          collector.stop();\n          await db.add(`user.${participantId}.coin`, game.coin);\n          await db.add(`user.${participantId}.winGame`, 1);\n          await ctx.sendMessage(\n            ctx.id,\n            {\n              text:\n                `${formatter.quote('ðŸ’¯ Correct!')}\n` +\n                `${formatter.quote(game.description)}\n${formatter.quote(`+${game.coin} Coins`)}`,\n              footer: config.msg.footer,\n              buttons: playAgain,\n            },\n            {\n              quoted: m,\n            }\n          );\n        } else if (participantAnswer === 'hint') {\n          const clue = game.answer.replace(/[aiueo]/g, '_');\n          await ctx.sendMessage(\n            ctx.id,\n            {\n              text: formatter.monospace(clue.toUpperCase()),\n            },\n            {\n              quoted: m,\n            }\n          );\n        } else if (participantAnswer === 'surrender') {\n          session.delete(ctx.id);\n          collector.stop();\n          await ctx.sendMessage(\n            ctx.id,\n            {\n              text:\n                `${formatter.quote('ðŸ³ï¸ You surrendered!')}\n` +\n                `${formatter.quote(`The answer is ${tools.msg.ucwords(game.answer)}.`)}\n${formatter.quote(game.description)}`,\n              footer: config.msg.footer,\n              buttons: playAgain,\n            },\n            {\n              quoted: m,\n            }\n          );\n        } else if (didYouMean(participantAnswer, [game.answer]) === game.answer) {\n          await ctx.sendMessage(\n            ctx.id,\n            {\n              text: formatter.quote('ðŸŽ¯ A little more!'),\n            },\n            {\n              quoted: m,\n            }\n          );\n        }\n      });\n\n      collector.on('end', async () => {\n        if (session.has(ctx.id)) {\n          session.delete(ctx.id);\n          await ctx.reply({\n            text:\n              `${formatter.quote('â± Time is up!')}\n` +\n              `${formatter.quote(`The answer is ${tools.msg.ucwords(game.answer)}.`)}\n${formatter.quote(game.description)}`,\n            footer: config.msg.footer,\n            buttons: playAgain,\n          });\n        }\n      });\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error, true);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\game\\family100.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":22},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":2,"column":20,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":27},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":6,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":6,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":12,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":12,"endColumn":21},{"ruleId":"no-restricted-syntax","severity":2,"message":"iterators/generators require regenerator-runtime, which is too heavyweight for this guide to allow them. Separately, loops should be avoided in favor of array iterations.","line":90,"column":13,"nodeType":"ForOfStatement","messageId":"restrictedSyntax","endLine":93,"endColumn":14},{"ruleId":"no-await-in-loop","severity":2,"message":"Unexpected `await` inside a loop.","line":91,"column":15,"nodeType":"AwaitExpression","messageId":"unexpectedAwait","endLine":91,"endColumn":78},{"ruleId":"no-await-in-loop","severity":2,"message":"Unexpected `await` inside a loop.","line":92,"column":15,"nodeType":"AwaitExpression","messageId":"unexpectedAwait","endLine":92,"endColumn":61}],"suppressedMessages":[],"errorCount":7,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const axios = require('axios');\nconst didYouMean = require('didyoumean');\n\nconst session = new Map();\n\nmodule.exports = {\n  name: 'family100',\n  category: 'game',\n  permissions: {\n    group: true,\n  },\n  code: async ctx => {\n    const { formatter, tools, config, database: db } = ctx.bot.context;\n    if (session.has(ctx.id))\n      return await ctx.reply(formatter.quote('ðŸŽ® A game session is already in progress!'));\n\n    try {\n      const apiUrl = tools.api.createUrl(\n        'https://raw.githubusercontent.com',\n        '/BochilTeam/database/refs/heads/master/games/family100.json'\n      );\n      const result = tools.cmd.getRandomElement((await axios.get(apiUrl)).data);\n\n      const game = {\n        coin: {\n          answered: 10,\n          allAnswered: 100,\n        },\n        timeout: 90000,\n        answers: new Set(result.jawaban.map(ans => ans.toLowerCase())),\n        participants: new Set(),\n      };\n\n      session.set(ctx.id, true);\n\n      await ctx.reply({\n        text:\n          `${formatter.quote(`Question: ${result.soal}`)}\n` +\n          `${formatter.quote(`Number of answers: ${game.answers.size}`)}\n${formatter.quote(`Time limit: ${tools.msg.convertMsToDuration(game.timeout)}`)}`,\n        footer: config.msg.footer,\n        buttons: [\n          {\n            buttonId: 'surrender',\n            buttonText: {\n              displayText: 'Surrender',\n            },\n          },\n        ],\n      });\n\n      const collector = ctx.MessageCollector({\n        time: game.timeout,\n      });\n\n      const playAgain = [\n        {\n          buttonId: ctx.used.prefix + ctx.used.command,\n          buttonText: {\n            displayText: 'Play Again',\n          },\n        },\n      ];\n\n      collector.on('collect', async m => {\n        const participantAnswer = m.content.toLowerCase();\n        const participantId = ctx.getId(m.sender);\n\n        if (game.answers.has(participantAnswer)) {\n          game.answers.delete(participantAnswer);\n          game.participants.add(participantId);\n\n          await db.add(`user.${participantId}.coin`, game.coin.answered);\n          await ctx.sendMessage(\n            ctx.id,\n            {\n              text: formatter.quote(\n                `âœ… ${tools.msg.ucwords(participantAnswer)} is correct! Remaining answers: ${game.answers.size}`\n              ),\n            },\n            {\n              quoted: m,\n            }\n          );\n\n          if (game.answers.size === 0) {\n            session.delete(ctx.id);\n            collector.stop();\n            for (const participant of game.participants) {\n              await db.add(`user.${participant}.coin`, game.coin.allAnswered);\n              await db.add(`user.${participant}.winGame`, 1);\n            }\n            await ctx.sendMessage(\n              ctx.id,\n              {\n                text: formatter.quote(\n                  `ðŸŽ‰ Congratulations! All answers have been answered! Each member who answered gets ${game.coin.allAnswered} coins.`\n                ),\n                footer: config.msg.footer,\n                buttons: playAgain,\n              },\n              {\n                quoted: m,\n              }\n            );\n          }\n        } else if (participantAnswer === 'surrender') {\n          const remaining = [...game.answers]\n            .map(tools.msg.ucwords)\n            .join(', ')\n            .replace(/, ([^,]*)$/, ', and $1');\n          session.delete(ctx.id);\n          collector.stop();\n          await ctx.sendMessage(\n            ctx.id,\n            {\n              text: `${formatter.quote('ðŸ³ï¸ You surrendered!')}\n${formatter.quote(`The unanswered answers are ${remaining}.`)}`,\n              footer: config.msg.footer,\n              buttons: playAgain,\n            },\n            {\n              quoted: m,\n            }\n          );\n        } else if (didYouMean(participantAnswer, [game.answer]) === game.answer) {\n          await ctx.sendMessage(\n            ctx.id,\n            {\n              text: formatter.quote('ðŸŽ¯ A little more!'),\n            },\n            {\n              quoted: m,\n            }\n          );\n        }\n      });\n\n      collector.on('end', async () => {\n        const remaining = [...game.answers]\n          .map(tools.msg.ucwords)\n          .join(', ')\n          .replace(/, ([^,]*)$/, ', and $1');\n\n        if (session.has(ctx.id)) {\n          session.delete(ctx.id);\n          await ctx.reply({\n            text: `${formatter.quote('â± Time is up!')}\n${formatter.quote(`The unanswered answers are ${remaining}`)}`,\n            footer: config.msg.footer,\n            buttons: playAgain,\n          });\n        }\n      });\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error, true);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\game\\kuisislami.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":22},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":2,"column":20,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":27},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":6,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":6,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":9,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":9,"endColumn":21}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const axios = require('axios');\nconst didYouMean = require('didyoumean');\n\nconst session = new Map();\n\nmodule.exports = {\n  name: 'kuisislami',\n  category: 'game',\n  code: async ctx => {\n    const { formatter, tools, config, database: db } = ctx.bot.context;\n    if (session.has(ctx.id))\n      return await ctx.reply(formatter.quote('ðŸŽ® A game session is already in progress!'));\n\n    try {\n      const apiUrl = tools.api.createUrl(\n        'https://raw.githubusercontent.com',\n        '/ERLANRAHMAT/games/refs/heads/main/kuisislami.json'\n      );\n      const result = tools.cmd.getRandomElement((await axios.get(apiUrl)).data);\n\n      const game = {\n        coin: 10,\n        timeout: 60000,\n        answer: result.jawaban.toLowerCase(),\n        description: result.deskripsi,\n      };\n\n      session.set(ctx.id, true);\n\n      await ctx.reply({\n        text:\n          `${formatter.quote(`Question: ${result.soal}`)}\n` +\n          `${formatter.quote(`Bonus: ${game.coin} Coins`)}\n${formatter.quote(`Time limit: ${tools.msg.convertMsToDuration(game.timeout)}`)}`,\n        footer: config.msg.footer,\n        buttons: [\n          {\n            buttonId: 'hint',\n            buttonText: {\n              displayText: 'Hint',\n            },\n          },\n          {\n            buttonId: 'surrender',\n            buttonText: {\n              displayText: 'Surrender',\n            },\n          },\n        ],\n      });\n\n      const collector = ctx.MessageCollector({\n        time: game.timeout,\n      });\n\n      const playAgain = [\n        {\n          buttonId: ctx.used.prefix + ctx.used.command,\n          buttonText: {\n            displayText: 'Play Again',\n          },\n        },\n      ];\n\n      collector.on('collect', async m => {\n        const participantAnswer = m.content.toLowerCase();\n        const participantId = ctx.getId(m.sender);\n\n        if (participantAnswer === game.answer) {\n          session.delete(ctx.id);\n          collector.stop();\n          await db.add(`user.${participantId}.coin`, game.coin);\n          await db.add(`user.${participantId}.winGame`, 1);\n          await ctx.sendMessage(\n            ctx.id,\n            {\n              text:\n                `${formatter.quote('ðŸ’¯ Correct!')}\n` +\n                `${formatter.quote(game.description)}\n${formatter.quote(`+${game.coin} Coins`)}`,\n              footer: config.msg.footer,\n              buttons: playAgain,\n            },\n            {\n              quoted: m,\n            }\n          );\n        } else if (participantAnswer === 'hint') {\n          const clue = game.answer.replace(/[aiueo]/g, '_');\n          await ctx.sendMessage(\n            ctx.id,\n            {\n              text: formatter.monospace(clue.toUpperCase()),\n            },\n            {\n              quoted: m,\n            }\n          );\n        } else if (participantAnswer === 'surrender') {\n          session.delete(ctx.id);\n          collector.stop();\n          await ctx.sendMessage(\n            ctx.id,\n            {\n              text:\n                `${formatter.quote('ðŸ³ï¸ You surrendered!')}\n` +\n                `${formatter.quote(`The answer is ${tools.msg.ucwords(game.answer)}.`)}\n${formatter.quote(game.description)}`,\n              footer: config.msg.footer,\n              buttons: playAgain,\n            },\n            {\n              quoted: m,\n            }\n          );\n        } else if (didYouMean(participantAnswer, [game.answer]) === game.answer) {\n          await ctx.sendMessage(\n            ctx.id,\n            {\n              text: formatter.quote('ðŸŽ¯ A little more!'),\n            },\n            {\n              quoted: m,\n            }\n          );\n        }\n      });\n\n      collector.on('end', async () => {\n        if (session.has(ctx.id)) {\n          session.delete(ctx.id);\n          await ctx.reply({\n            text:\n              `${formatter.quote('â± Time is up!')}\n` +\n              `${formatter.quote(`The answer is ${tools.msg.ucwords(game.answer)}.`)}\n${formatter.quote(game.description)}`,\n            footer: config.msg.footer,\n            buttons: playAgain,\n          });\n        }\n      });\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error, true);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\game\\kuismerdeka.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":22},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":2,"column":20,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":27},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":6,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":6,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":9,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":9,"endColumn":21}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const axios = require('axios');\nconst didYouMean = require('didyoumean');\n\nconst session = new Map();\n\nmodule.exports = {\n  name: 'kuismerdeka',\n  category: 'game',\n  code: async ctx => {\n    const { formatter, tools, config, database: db } = ctx.bot.context;\n    if (session.has(ctx.id))\n      return await ctx.reply(formatter.quote('ðŸŽ® A game session is already in progress!'));\n\n    try {\n      const apiUrl = tools.api.createUrl(\n        'https://raw.githubusercontent.com',\n        '/ERLANRAHMAT/games/refs/heads/main/kuis-merdeka.json'\n      );\n      const result = tools.cmd.getRandomElement((await axios.get(apiUrl)).data);\n\n      const game = {\n        coin: 10,\n        timeout: 60000,\n        answer: result.jawaban.toLowerCase(),\n      };\n\n      session.set(ctx.id, true);\n\n      await ctx.reply({\n        text:\n          `${formatter.quote(`Question: ${result.soal}`)}\n` +\n          `${formatter.quote(`Bonus: ${game.coin} Coins`)}\n${formatter.quote(`Time limit: ${tools.msg.convertMsToDuration(game.timeout)}`)}`,\n        footer: config.msg.footer,\n        buttons: [\n          {\n            buttonId: 'hint',\n            buttonText: {\n              displayText: 'Hint',\n            },\n          },\n          {\n            buttonId: 'surrender',\n            buttonText: {\n              displayText: 'Surrender',\n            },\n          },\n        ],\n      });\n\n      const collector = ctx.MessageCollector({\n        time: game.timeout,\n      });\n\n      const playAgain = [\n        {\n          buttonId: ctx.used.prefix + ctx.used.command,\n          buttonText: {\n            displayText: 'Play Again',\n          },\n        },\n      ];\n\n      collector.on('collect', async m => {\n        const participantAnswer = m.content.toLowerCase();\n        const participantId = ctx.getId(m.sender);\n\n        if (participantAnswer === game.answer) {\n          session.delete(ctx.id);\n          collector.stop();\n          await db.add(`user.${participantId}.coin`, game.coin);\n          await db.add(`user.${participantId}.winGame`, 1);\n          await ctx.sendMessage(\n            ctx.id,\n            {\n              text: `${formatter.quote('ðŸ’¯ Correct!')}\n${formatter.quote(`+${game.coin} Coins`)}`,\n              footer: config.msg.footer,\n              buttons: playAgain,\n            },\n            {\n              quoted: m,\n            }\n          );\n        } else if (participantAnswer === 'hint') {\n          const clue = game.answer.replace(/[aiueo]/g, '_');\n          await ctx.sendMessage(\n            ctx.id,\n            {\n              text: formatter.monospace(clue.toUpperCase()),\n            },\n            {\n              quoted: m,\n            }\n          );\n        } else if (participantAnswer === 'surrender') {\n          session.delete(ctx.id);\n          collector.stop();\n          await ctx.sendMessage(\n            ctx.id,\n            {\n              text: `${formatter.quote('ðŸ³ï¸ You surrendered!')}\n${formatter.quote(`The answer is ${tools.msg.ucwords(game.answer)}.`)}`,\n              footer: config.msg.footer,\n              buttons: playAgain,\n            },\n            {\n              quoted: m,\n            }\n          );\n        } else if (didYouMean(participantAnswer, [game.answer]) === game.answer) {\n          await ctx.sendMessage(\n            ctx.id,\n            {\n              text: formatter.quote('ðŸŽ¯ A little more!'),\n            },\n            {\n              quoted: m,\n            }\n          );\n        }\n      });\n\n      collector.on('end', async () => {\n        if (session.has(ctx.id)) {\n          session.delete(ctx.id);\n          await ctx.reply({\n            text: `${formatter.quote('â± Time is up!')}\n${formatter.quote(`The answer is ${tools.msg.ucwords(game.answer)}.`)}`,\n            footer: config.msg.footer,\n            buttons: playAgain,\n          });\n        }\n      });\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error, true);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\game\\lengkapikalimat.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":22},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":2,"column":20,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":27},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":6,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":6,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":9,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":9,"endColumn":21}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const axios = require('axios');\nconst didYouMean = require('didyoumean');\n\nconst session = new Map();\n\nmodule.exports = {\n  name: 'completesentence',\n  category: 'game',\n  code: async ctx => {\n    const { formatter, tools, config, database: db } = ctx.bot.context;\n    if (session.has(ctx.id))\n      return await ctx.reply(formatter.quote('ðŸŽ® A game session is already in progress!'));\n\n    try {\n      const apiUrl = tools.api.createUrl(\n        'https://raw.githubusercontent.com',\n        '/Aiinne/scrape/refs/heads/main/lengkapikalimat.json'\n      );\n      const result = tools.cmd.getRandomElement((await axios.get(apiUrl)).data);\n\n      const game = {\n        coin: 10,\n        timeout: 60000,\n        answer: result.jawaban.toLowerCase(),\n      };\n\n      session.set(ctx.id, true);\n\n      await ctx.reply({\n        text:\n          `${formatter.quote(`Question: ${result.pertanyaan}`)}\n` +\n          `${formatter.quote(`Bonus: ${game.coin} Coins`)}\n${formatter.quote(`Time limit: ${tools.msg.convertMsToDuration(game.timeout)}`)}`,\n        footer: config.msg.footer,\n        buttons: [\n          {\n            buttonId: 'hint',\n            buttonText: {\n              displayText: 'Hint',\n            },\n          },\n          {\n            buttonId: 'surrender',\n            buttonText: {\n              displayText: 'Surrender',\n            },\n          },\n        ],\n      });\n\n      const collector = ctx.MessageCollector({\n        time: game.timeout,\n      });\n\n      const playAgain = [\n        {\n          buttonId: ctx.used.prefix + ctx.used.command,\n          buttonText: {\n            displayText: 'Play Again',\n          },\n        },\n      ];\n\n      collector.on('collect', async m => {\n        const participantAnswer = m.content.toLowerCase();\n        const participantId = ctx.getId(m.sender);\n\n        if (participantAnswer === game.answer) {\n          session.delete(ctx.id);\n          collector.stop();\n          await db.add(`user.${participantId}.coin`, game.coin);\n          await db.add(`user.${participantId}.winGame`, 1);\n          await ctx.sendMessage(\n            ctx.id,\n            {\n              text: `${formatter.quote('ðŸ’¯ Correct!')}\n${formatter.quote(`+${game.coin} Coins`)}`,\n              footer: config.msg.footer,\n              buttons: playAgain,\n            },\n            {\n              quoted: m,\n            }\n          );\n        } else if (participantAnswer === 'hint') {\n          const clue = game.answer.replace(/[aiueo]/g, '_');\n          await ctx.sendMessage(\n            ctx.id,\n            {\n              text: formatter.monospace(clue.toUpperCase()),\n            },\n            {\n              quoted: m,\n            }\n          );\n        } else if (participantAnswer === 'surrender') {\n          session.delete(ctx.id);\n          collector.stop();\n          await ctx.sendMessage(\n            ctx.id,\n            {\n              text: `${formatter.quote('ðŸ³ï¸ You surrendered!')}\n${formatter.quote(`The answer is ${tools.msg.ucwords(game.answer)}.`)}`,\n              footer: config.msg.footer,\n              buttons: playAgain,\n            },\n            {\n              quoted: m,\n            }\n          );\n        } else if (didYouMean(participantAnswer, [game.answer]) === game.answer) {\n          await ctx.sendMessage(\n            ctx.id,\n            {\n              text: formatter.quote('ðŸŽ¯ A little more!'),\n            },\n            {\n              quoted: m,\n            }\n          );\n        }\n      });\n\n      collector.on('end', async () => {\n        if (session.has(ctx.id)) {\n          session.delete(ctx.id);\n          await ctx.reply({\n            text: `${formatter.quote('â± Time is up!')}\n${formatter.quote(`The answer is ${tools.msg.ucwords(game.answer)}.`)}`,\n            footer: config.msg.footer,\n            buttons: playAgain,\n          });\n        }\n      });\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error, true);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\game\\siapakahaku.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":22},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":2,"column":20,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":27},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":6,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":6,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":9,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":9,"endColumn":21}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const axios = require('axios');\nconst didYouMean = require('didyoumean');\n\nconst session = new Map();\n\nmodule.exports = {\n  name: 'whoami',\n  category: 'game',\n  code: async ctx => {\n    const { formatter, tools, config, database: db } = ctx.bot.context;\n    if (session.has(ctx.id))\n      return await ctx.reply(formatter.quote('ðŸŽ® A game session is already in progress!'));\n\n    try {\n      const apiUrl = tools.api.createUrl(\n        'https://raw.githubusercontent.com',\n        '/BochilTeam/database/refs/heads/master/games/siapakahaku.json'\n      );\n      const result = tools.cmd.getRandomElement((await axios.get(apiUrl)).data);\n\n      const game = {\n        coin: 10,\n        timeout: 60000,\n        answer: result.jawaban.toLowerCase(),\n      };\n\n      session.set(ctx.id, true);\n\n      await ctx.reply({\n        text:\n          `${formatter.quote(`Question: ${result.soal}`)}\n` +\n          `${formatter.quote(`Bonus: ${game.coin} Coins`)}\n${formatter.quote(`Time limit: ${tools.msg.convertMsToDuration(game.timeout)}`)}`,\n        footer: config.msg.footer,\n        buttons: [\n          {\n            buttonId: 'hint',\n            buttonText: {\n              displayText: 'Hint',\n            },\n          },\n          {\n            buttonId: 'surrender',\n            buttonText: {\n              displayText: 'Surrender',\n            },\n          },\n        ],\n      });\n\n      const collector = ctx.MessageCollector({\n        time: game.timeout,\n      });\n\n      const playAgain = [\n        {\n          buttonId: ctx.used.prefix + ctx.used.command,\n          buttonText: {\n            displayText: 'Play Again',\n          },\n        },\n      ];\n\n      collector.on('collect', async m => {\n        const participantAnswer = m.content.toLowerCase();\n        const participantId = ctx.getId(m.sender);\n\n        if (participantAnswer === game.answer) {\n          session.delete(ctx.id);\n          collector.stop();\n          await db.add(`user.${participantId}.coin`, game.coin);\n          await db.add(`user.${participantId}.winGame`, 1);\n          await ctx.sendMessage(\n            ctx.id,\n            {\n              text: `${formatter.quote('ðŸ’¯ Correct!')}\n${formatter.quote(`+${game.coin} Coins`)}`,\n              footer: config.msg.footer,\n              buttons: playAgain,\n            },\n            {\n              quoted: m,\n            }\n          );\n        } else if (participantAnswer === 'hint') {\n          const clue = game.answer.replace(/[aiueo]/g, '_');\n          await ctx.sendMessage(\n            ctx.id,\n            {\n              text: formatter.monospace(clue.toUpperCase()),\n            },\n            {\n              quoted: m,\n            }\n          );\n        } else if (participantAnswer === 'surrender') {\n          session.delete(ctx.id);\n          collector.stop();\n          await ctx.sendMessage(\n            ctx.id,\n            {\n              text: `${formatter.quote('ðŸ³ï¸ You surrendered!')}\n${formatter.quote(`The answer is ${tools.msg.ucwords(game.answer)}.`)}`,\n              footer: config.msg.footer,\n              buttons: playAgain,\n            },\n            {\n              quoted: m,\n            }\n          );\n        } else if (didYouMean(participantAnswer, [game.answer]) === game.answer) {\n          await ctx.sendMessage(\n            ctx.id,\n            {\n              text: formatter.quote('ðŸŽ¯ A little more!'),\n            },\n            {\n              quoted: m,\n            }\n          );\n        }\n      });\n\n      collector.on('end', async () => {\n        if (session.has(ctx.id)) {\n          session.delete(ctx.id);\n          await ctx.reply({\n            text: `${formatter.quote('â± Time is up!')}\n${formatter.quote(`The answer is ${tools.msg.ucwords(game.answer)}.`)}`,\n            footer: config.msg.footer,\n            buttons: playAgain,\n          });\n        }\n      });\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error, true);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\game\\suit.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":3,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":3,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":9,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":9,"endColumn":21}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const session = new Map();\n\nmodule.exports = {\n  name: 'suit',\n  category: 'game',\n  permissions: {\n    group: true,\n  },\n  code: async ctx => {\n    const { formatter, tools, config, database: db } = ctx.bot.context;\n    const accountJid = (await ctx.getMentioned())[0] || ctx.quoted?.senderJid || null;\n    const accountId = ctx.getId(accountJid);\n\n    const senderJid = ctx.sender.jid;\n    const senderId = ctx.getId(senderJid);\n\n    if (!accountJid)\n      await ctx.reply({\n        text:\n          `${formatter.quote(tools.msg.generateInstruction(['send'], ['text']))}\\n` +\n          `${formatter.quote(tools.msg.generateCmdExample(ctx.used, `@${senderId}`))}\\n${formatter.quote(\n            tools.msg.generateNotes([\n              'Reply or quote a message to make the sender the target account.',\n            ])\n          )}`,\n        mentions: [senderJid],\n      });\n\n    if (accountId === config.bot.id)\n      return await ctx.reply(formatter.quote('Cannot challenge the bot!'));\n    if (accountJid === senderJid)\n      return await ctx.reply(formatter.quote('Cannot challenge yourself!'));\n\n    const existingGame = [...session.values()].find(\n      game => game.players.includes(senderJid) || game.players.includes(accountJid)\n    );\n    if (existingGame)\n      return await ctx.reply(formatter.quote('One of the players is already in a game session!'));\n\n    try {\n      const game = {\n        players: [senderJid, accountJid],\n        coin: 10,\n        timeout: 120000,\n        choices: new Map(),\n        started: false,\n      };\n\n      await ctx.reply({\n        text: `${formatter.quote(`You challenged @${accountId} to a game of suit!`)}\\n${formatter.quote(\n          `Bonus: ${game.coin} Coins`\n        )}`,\n        mentions: [accountJid],\n        footer: config.msg.footer,\n        buttons: [\n          {\n            buttonId: 'accept',\n            buttonText: {\n              displayText: 'Accept',\n            },\n          },\n          {\n            buttonId: 'reject',\n            buttonText: {\n              displayText: 'Reject',\n            },\n          },\n        ],\n      });\n\n      session.set(senderJid, game);\n      session.set(accountJid, game);\n\n      const collector = ctx.MessageCollector({\n        filter: m => [senderJid, accountJid].includes(m.sender),\n        time: game.timeout,\n        hears: [senderJid, accountJid],\n      });\n\n      collector.on('collect', async m => {\n        const participantAnswer = m.content.toLowerCase();\n        const participantJid = m.sender;\n        const participantId = ctx.getId(participantJid);\n        const isGroup = m.jid.endsWith('@g.us');\n\n        if (!game.started && isGroup && participantId === accountId) {\n          if (participantAnswer === 'accept') {\n            game.started = true;\n            await ctx.sendMessage(\n              m.jid,\n              {\n                text: formatter.quote(\n                  `@${accountId} accepted the challenge! Please make your choice in a private chat.`\n                ),\n                mentions: [accountJid],\n              },\n              {\n                quoted: m,\n              }\n            );\n\n            const choiceText = formatter.quote('Please choose one:');\n            const buttons = [\n              {\n                buttonId: 'rock',\n                buttonText: {\n                  displayText: 'Rock',\n                },\n              },\n              {\n                buttonId: 'paper',\n                buttonText: {\n                  displayText: 'Paper',\n                },\n              },\n              {\n                buttonId: 'scissors',\n                buttonText: {\n                  displayText: 'Scissors',\n                },\n              },\n            ];\n\n            await ctx.sendMessage(senderJid, {\n              text: choiceText,\n              footer: config.msg.footer,\n              buttons,\n            });\n            await ctx.sendMessage(accountJid, {\n              text: choiceText,\n              footer: config.msg.footer,\n              buttons,\n            });\n          } else if (participantAnswer === 'reject') {\n            session.delete(senderJid);\n            session.delete(accountJid);\n            await ctx.sendMessage(\n              m.jid,\n              {\n                text: formatter.quote(`@${accountId} rejected the suit challenge.`),\n                mentions: [accountJid],\n              },\n              {\n                quoted: m,\n              }\n            );\n          }\n        }\n\n        if (!isGroup && game.started) {\n          const choices = {\n            rock: {\n              index: 0,\n              name: 'Rock',\n            },\n            paper: {\n              index: 1,\n              name: 'Paper',\n            },\n            scissors: {\n              index: 2,\n              name: 'Scissors',\n            },\n          };\n          const choiceData = choices[participantAnswer];\n\n          if (choiceData) {\n            game.choices.set(participantId, choiceData);\n\n            await ctx.sendMessage(\n              participantJid,\n              {\n                text: formatter.quote(`You chose: ${choiceData.name}`),\n              },\n              {\n                quoted: m,\n              }\n            );\n\n            if (game.choices.size === 2) {\n              const [sChoice, aChoice] = [game.choices.get(senderId), game.choices.get(accountId)];\n\n              const result = (3 + sChoice.index - aChoice.index) % 3;\n              let winnerText;\n              let coinText = 'No one wins, no one gets coins';\n\n              if (result === 0) {\n                winnerText = \"It's a draw!\";\n              } else if (result === 1) {\n                winnerText = `@${senderId} wins!`;\n                await db.add(`user.${senderId}.coin`, game.coin);\n                await db.add(`user.${senderId}.winGame`, 1);\n                coinText = `+${game.coin} Coins for @${senderId}`;\n              } else {\n                winnerText = `@${accountId} wins!`;\n                await db.add(`user.${accountId}.coin`, game.coin);\n                await db.add(`user.${accountId}.winGame`, 1);\n                coinText = `+${game.coin} Coins for @${accountId}`;\n              }\n\n              await ctx.reply({\n                text:\n                  `${formatter.quote('Suit results:')}\\n` +\n                  `${formatter.quote(`@${senderId}: ${sChoice.name}`)}\\n` +\n                  `${formatter.quote(`@${accountId}: ${aChoice.name}`)}\\n` +\n                  `${formatter.quote(winnerText)}\\n${formatter.quote(coinText)}`,\n                mentions: [senderJid, accountJid],\n              });\n\n              session.delete(senderJid);\n              session.delete(accountJid);\n            }\n          }\n        }\n      });\n\n      collector.on('end', async () => {\n        if (session.has(senderJid) || session.has(accountJid)) {\n          session.delete(senderJid);\n          session.delete(accountJid);\n          await ctx.reply(formatter.quote('â± Time is up!'));\n        }\n      });\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\game\\susunkata.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":22},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":2,"column":20,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":27},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":6,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":6,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":9,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":9,"endColumn":21}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const axios = require('axios');\nconst didYouMean = require('didyoumean');\n\nconst session = new Map();\n\nmodule.exports = {\n  name: 'arrangewords',\n  category: 'game',\n  code: async ctx => {\n    const { formatter, tools, config, database: db } = ctx.bot.context;\n    if (session.has(ctx.id))\n      return await ctx.reply(formatter.quote('ðŸŽ® A game session is already in progress!'));\n\n    try {\n      const apiUrl = tools.api.createUrl(\n        'https://raw.githubusercontent.com',\n        '/BochilTeam/database/refs/heads/master/games/susunkata.json'\n      );\n      const result = tools.cmd.getRandomElement((await axios.get(apiUrl)).data);\n\n      const game = {\n        coin: 10,\n        timeout: 60000,\n        answer: result.jawaban.toLowerCase(),\n      };\n\n      session.set(ctx.id, true);\n\n      await ctx.reply({\n        text:\n          `${formatter.quote(`Question: ${result.soal}`)}\n` +\n          `${formatter.quote(`Type: ${result.tipe}`)}\n` +\n          `${formatter.quote(`Bonus: ${game.coin} Coins`)}\n${formatter.quote(`Time limit: ${tools.msg.convertMsToDuration(game.timeout)}`)}`,\n        footer: config.msg.footer,\n        buttons: [\n          {\n            buttonId: 'hint',\n            buttonText: {\n              displayText: 'Hint',\n            },\n          },\n          {\n            buttonId: 'surrender',\n            buttonText: {\n              displayText: 'Surrender',\n            },\n          },\n        ],\n      });\n\n      const collector = ctx.MessageCollector({\n        time: game.timeout,\n      });\n\n      const playAgain = [\n        {\n          buttonId: ctx.used.prefix + ctx.used.command,\n          buttonText: {\n            displayText: 'Play Again',\n          },\n        },\n      ];\n\n      collector.on('collect', async m => {\n        const participantAnswer = m.content.toLowerCase();\n        const participantId = ctx.getId(m.sender);\n\n        if (participantAnswer === game.answer) {\n          session.delete(ctx.id);\n          collector.stop();\n          await db.add(`user.${participantId}.coin`, game.coin);\n          await db.add(`user.${participantId}.winGame`, 1);\n          await ctx.sendMessage(\n            ctx.id,\n            {\n              text: `${formatter.quote('ðŸ’¯ Correct!')}\n${formatter.quote(`+${game.coin} Coins`)}`,\n              footer: config.msg.footer,\n              buttons: playAgain,\n            },\n            {\n              quoted: m,\n            }\n          );\n        } else if (participantAnswer === 'hint') {\n          const clue = game.answer.replace(/[aiueo]/g, '_');\n          await ctx.sendMessage(\n            ctx.id,\n            {\n              text: formatter.monospace(clue.toUpperCase()),\n            },\n            {\n              quoted: m,\n            }\n          );\n        } else if (participantAnswer === 'surrender') {\n          session.delete(ctx.id);\n          collector.stop();\n          await ctx.sendMessage(\n            ctx.id,\n            {\n              text: `${formatter.quote('ðŸ³ï¸ You surrendered!')}\n${formatter.quote(`The answer is ${tools.msg.ucwords(game.answer)}.`)}`,\n              footer: config.msg.footer,\n              buttons: playAgain,\n            },\n            {\n              quoted: m,\n            }\n          );\n        } else if (didYouMean(participantAnswer, [game.answer]) === game.answer) {\n          await ctx.sendMessage(\n            ctx.id,\n            {\n              text: formatter.quote('ðŸŽ¯ A little more!'),\n            },\n            {\n              quoted: m,\n            }\n          );\n        }\n      });\n\n      collector.on('end', async () => {\n        if (session.has(ctx.id)) {\n          session.delete(ctx.id);\n          await ctx.reply({\n            text: `${formatter.quote('â± Time is up!')}\n${formatter.quote(`The answer is ${tools.msg.ucwords(game.answer)}.`)}`,\n            footer: config.msg.footer,\n            buttons: playAgain,\n          });\n        }\n      });\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error, true);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\game\\tebakbendera.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":22},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":2,"column":20,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":27},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":6,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":6,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":9,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":9,"endColumn":21}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const axios = require('axios');\nconst didYouMean = require('didyoumean');\n\nconst session = new Map();\n\nmodule.exports = {\n  name: 'guesstheflag',\n  category: 'game',\n  code: async ctx => {\n    const { formatter, tools, config, database: db } = ctx.bot.context;\n    if (session.has(ctx.id))\n      return await ctx.reply(formatter.quote('ðŸŽ® A game session is already in progress!'));\n\n    try {\n      const apiUrl = tools.api.createUrl(\n        'https://raw.githubusercontent.com',\n        '/BochilTeam/database/refs/heads/master/games/tebakbendera2.json'\n      );\n      const result = tools.cmd.getRandomElement((await axios.get(apiUrl)).data);\n\n      const game = {\n        coin: 10,\n        timeout: 60000,\n        answer: result.name.toLowerCase(),\n      };\n\n      session.set(ctx.id, true);\n\n      await ctx.reply({\n        image: {\n          url: result.img,\n        },\n        mimetype: tools.mime.lookup('jpeg'),\n        caption: `${formatter.quote(`Bonus: ${game.coin} Coins`)}\n${formatter.quote(`Time limit: ${tools.msg.convertMsToDuration(game.timeout)}`)}`,\n        footer: config.msg.footer,\n        buttons: [\n          {\n            buttonId: 'hint',\n            buttonText: {\n              displayText: 'Hint',\n            },\n          },\n          {\n            buttonId: 'surrender',\n            buttonText: {\n              displayText: 'Surrender',\n            },\n          },\n        ],\n      });\n\n      const collector = ctx.MessageCollector({\n        time: game.timeout,\n      });\n\n      const playAgain = [\n        {\n          buttonId: ctx.used.prefix + ctx.used.command,\n          buttonText: {\n            displayText: 'Play Again',\n          },\n        },\n      ];\n\n      collector.on('collect', async m => {\n        const participantAnswer = m.content.toLowerCase();\n        const participantId = ctx.getId(m.sender);\n\n        if (participantAnswer === game.answer) {\n          session.delete(ctx.id);\n          collector.stop();\n          await db.add(`user.${participantId}.coin`, game.coin);\n          await db.add(`user.${participantId}.winGame`, 1);\n          await ctx.sendMessage(\n            ctx.id,\n            {\n              text: `${formatter.quote('ðŸ’¯ Correct!')}\n${formatter.quote(`+${game.coin} Coins`)}`,\n              footer: config.msg.footer,\n              buttons: playAgain,\n            },\n            {\n              quoted: m,\n            }\n          );\n        } else if (participantAnswer === 'hint') {\n          const clue = game.answer.replace(/[aiueo]/g, '_');\n          await ctx.sendMessage(\n            ctx.id,\n            {\n              text: formatter.monospace(clue.toUpperCase()),\n            },\n            {\n              quoted: m,\n            }\n          );\n        } else if (participantAnswer === 'surrender') {\n          session.delete(ctx.id);\n          collector.stop();\n          await ctx.sendMessage(\n            ctx.id,\n            {\n              text: `${formatter.quote('ðŸ³ï¸ You surrendered!')}\n${formatter.quote(`The answer is ${tools.msg.ucwords(game.answer)}.`)}`,\n              footer: config.msg.footer,\n              buttons: playAgain,\n            },\n            {\n              quoted: m,\n            }\n          );\n        } else if (didYouMean(participantAnswer, [game.answer]) === game.answer) {\n          await ctx.sendMessage(\n            ctx.id,\n            {\n              text: formatter.quote('ðŸŽ¯ A little more!'),\n            },\n            {\n              quoted: m,\n            }\n          );\n        }\n      });\n\n      collector.on('end', async () => {\n        if (session.has(ctx.id)) {\n          session.delete(ctx.id);\n          await ctx.reply({\n            text: `${formatter.quote('â± Time is up!')}\n${formatter.quote(`The answer is ${tools.msg.ucwords(game.answer)}.`)}`,\n            footer: config.msg.footer,\n            buttons: playAgain,\n          });\n        }\n      });\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error, true);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\game\\tebakdrakor.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":22},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":2,"column":20,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":27},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":6,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":6,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":9,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":9,"endColumn":21}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const axios = require('axios');\nconst didYouMean = require('didyoumean');\n\nconst session = new Map();\n\nmodule.exports = {\n  name: 'guessdrakor',\n  category: 'game',\n  code: async ctx => {\n    const { formatter, tools, config, database: db } = ctx.bot.context;\n    if (session.has(ctx.id))\n      return await ctx.reply(formatter.quote('ðŸŽ® A game session is already in progress!'));\n\n    try {\n      const apiUrl = tools.api.createUrl(\n        'https://raw.githubusercontent.com',\n        '/ERLANRAHMAT/games/refs/heads/main/tebakdrakor.json'\n      );\n      const result = tools.cmd.getRandomElement((await axios.get(apiUrl)).data);\n\n      const game = {\n        coin: 10,\n        timeout: 60000,\n        answer: result.jawaban.toLowerCase(),\n      };\n\n      session.set(ctx.id, true);\n\n      await ctx.reply({\n        image: {\n          url: result.img,\n        },\n        mimetype: tools.mime.lookup('jpeg'),\n        caption:\n          `${formatter.quote(`Description: ${result.deskripsi}`)}\n` +\n          `${formatter.quote(`Bonus: ${game.coin} Coins`)}\n${formatter.quote(`Time limit: ${tools.msg.convertMsToDuration(game.timeout)}`)}`,\n        footer: config.msg.footer,\n        buttons: [\n          {\n            buttonId: 'hint',\n            buttonText: {\n              displayText: 'Hint',\n            },\n          },\n          {\n            buttonId: 'surrender',\n            buttonText: {\n              displayText: 'Surrender',\n            },\n          },\n        ],\n      });\n\n      const collector = ctx.MessageCollector({\n        time: game.timeout,\n      });\n\n      const playAgain = [\n        {\n          buttonId: ctx.used.prefix + ctx.used.command,\n          buttonText: {\n            displayText: 'Play Again',\n          },\n        },\n      ];\n\n      collector.on('collect', async m => {\n        const participantAnswer = m.content.toLowerCase();\n        const participantId = ctx.getId(m.sender);\n\n        if (participantAnswer === game.answer) {\n          session.delete(ctx.id);\n          collector.stop();\n          await db.add(`user.${participantId}.coin`, game.coin);\n          await db.add(`user.${participantId}.winGame`, 1);\n          await ctx.sendMessage(\n            ctx.id,\n            {\n              text: `${formatter.quote('ðŸ’¯ Correct!')}\n${formatter.quote(`+${game.coin} Coins`)}`,\n              footer: config.msg.footer,\n              buttons: playAgain,\n            },\n            {\n              quoted: m,\n            }\n          );\n        } else if (participantAnswer === 'hint') {\n          const clue = game.answer.replace(/[aiueo]/g, '_');\n          await ctx.sendMessage(\n            ctx.id,\n            {\n              text: formatter.monospace(clue.toUpperCase()),\n            },\n            {\n              quoted: m,\n            }\n          );\n        } else if (participantAnswer === 'surrender') {\n          session.delete(ctx.id);\n          collector.stop();\n          await ctx.sendMessage(\n            ctx.id,\n            {\n              text: `${formatter.quote('ðŸ³ï¸ You surrendered!')}\n${formatter.quote(`The answer is ${tools.msg.ucwords(game.answer)}.`)}`,\n              footer: config.msg.footer,\n              buttons: playAgain,\n            },\n            {\n              quoted: m,\n            }\n          );\n        } else if (didYouMean(participantAnswer, [game.answer]) === game.answer) {\n          await ctx.sendMessage(\n            ctx.id,\n            {\n              text: formatter.quote('ðŸŽ¯ A little more!'),\n            },\n            {\n              quoted: m,\n            }\n          );\n        }\n      });\n\n      collector.on('end', async () => {\n        if (session.has(ctx.id)) {\n          session.delete(ctx.id);\n          await ctx.reply({\n            text: `${formatter.quote('â± Time is up!')}\n${formatter.quote(`The answer is ${tools.msg.ucwords(game.answer)}.`)}`,\n            footer: config.msg.footer,\n            buttons: playAgain,\n          });\n        }\n      });\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error, true);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\game\\tebakgambar.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":22},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":2,"column":20,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":27},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":6,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":6,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":9,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":9,"endColumn":21}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const axios = require('axios');\nconst didYouMean = require('didyoumean');\n\nconst session = new Map();\n\nmodule.exports = {\n  name: 'guessthepicture',\n  category: 'game',\n  code: async ctx => {\n    const { formatter, tools, config, database: db } = ctx.bot.context;\n    if (session.has(ctx.id))\n      return await ctx.reply(formatter.quote('ðŸŽ® A game session is already in progress!'));\n\n    try {\n      const apiUrl = tools.api.createUrl(\n        'https://raw.githubusercontent.com',\n        '/BochilTeam/database/refs/heads/master/games/tebakgambar.json'\n      );\n      const result = tools.cmd.getRandomElement((await axios.get(apiUrl)).data);\n\n      const game = {\n        coin: 10,\n        timeout: 60000,\n        answer: result.jawaban.toLowerCase(),\n      };\n\n      session.set(ctx.id, true);\n\n      await ctx.reply({\n        image: {\n          url: result.img,\n        },\n        mimetype: tools.mime.lookup('jpeg'),\n        caption:\n          `${formatter.quote(`Description: ${result.deskripsi}`)}\n` +\n          `${formatter.quote(`Bonus: ${game.coin} Coins`)}\n${formatter.quote(`Time limit: ${tools.msg.convertMsToDuration(game.timeout)}`)}`,\n        footer: config.msg.footer,\n        buttons: [\n          {\n            buttonId: 'hint',\n            buttonText: {\n              displayText: 'Hint',\n            },\n          },\n          {\n            buttonId: 'surrender',\n            buttonText: {\n              displayText: 'Surrender',\n            },\n          },\n        ],\n      });\n\n      const collector = ctx.MessageCollector({\n        time: game.timeout,\n      });\n\n      const playAgain = [\n        {\n          buttonId: ctx.used.prefix + ctx.used.command,\n          buttonText: {\n            displayText: 'Play Again',\n          },\n        },\n      ];\n\n      collector.on('collect', async m => {\n        const participantAnswer = m.content.toLowerCase();\n        const participantId = ctx.getId(m.sender);\n\n        if (participantAnswer === game.answer) {\n          session.delete(ctx.id);\n          collector.stop();\n          await db.add(`user.${participantId}.coin`, game.coin);\n          await db.add(`user.${participantId}.winGame`, 1);\n          await ctx.sendMessage(\n            ctx.id,\n            {\n              text: `${formatter.quote('ðŸ’¯ Correct!')}\n${formatter.quote(`+${game.coin} Coins`)}`,\n              footer: config.msg.footer,\n              buttons: playAgain,\n            },\n            {\n              quoted: m,\n            }\n          );\n        } else if (participantAnswer === 'hint') {\n          const clue = game.answer.replace(/[aiueo]/g, '_');\n          await ctx.sendMessage(\n            ctx.id,\n            {\n              text: formatter.monospace(clue.toUpperCase()),\n            },\n            {\n              quoted: m,\n            }\n          );\n        } else if (participantAnswer === 'surrender') {\n          session.delete(ctx.id);\n          collector.stop();\n          await ctx.sendMessage(\n            ctx.id,\n            {\n              text: `${formatter.quote('ðŸ³ï¸ You surrendered!')}\n${formatter.quote(`The answer is ${tools.msg.ucwords(game.answer)}.`)}`,\n              footer: config.msg.footer,\n              buttons: playAgain,\n            },\n            {\n              quoted: m,\n            }\n          );\n        } else if (didYouMean(participantAnswer, [game.answer]) === game.answer) {\n          await ctx.sendMessage(\n            ctx.id,\n            {\n              text: formatter.quote('ðŸŽ¯ A little more!'),\n            },\n            {\n              quoted: m,\n            }\n          );\n        }\n      });\n\n      collector.on('end', async () => {\n        if (session.has(ctx.id)) {\n          session.delete(ctx.id);\n          await ctx.reply({\n            text: `${formatter.quote('â± Time is up!')}\n${formatter.quote(`The answer is ${tools.msg.ucwords(game.answer)}.`)}`,\n            footer: config.msg.footer,\n            buttons: playAgain,\n          });\n        }\n      });\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error, true);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\game\\tebakgame.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":22},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":2,"column":20,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":27},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":6,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":6,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":9,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":9,"endColumn":21}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const axios = require('axios');\nconst didYouMean = require('didyoumean');\n\nconst session = new Map();\n\nmodule.exports = {\n  name: 'guessthegame',\n  category: 'game',\n  code: async ctx => {\n    const { formatter, tools, config, database: db } = ctx.bot.context;\n    if (session.has(ctx.id))\n      return await ctx.reply(formatter.quote('ðŸŽ® A game session is already in progress!'));\n\n    try {\n      const apiUrl = tools.api.createUrl(\n        'https://raw.githubusercontent.com',\n        '/Aiinne/scrape/refs/heads/main/tebakgame.json'\n      );\n      const result = tools.cmd.getRandomElement((await axios.get(apiUrl)).data);\n\n      const game = {\n        coin: 10,\n        timeout: 60000,\n        answer: result.jawaban.toLowerCase(),\n      };\n\n      session.set(ctx.id, true);\n\n      await ctx.reply({\n        image: {\n          url: result.img,\n        },\n        mimetype: tools.mime.lookup('jpeg'),\n        caption: `${formatter.quote(`Bonus: ${game.coin} Coins`)}\n${formatter.quote(`Time limit: ${tools.msg.convertMsToDuration(game.timeout)}`)}`,\n        footer: config.msg.footer,\n        buttons: [\n          {\n            buttonId: 'hint',\n            buttonText: {\n              displayText: 'Hint',\n            },\n          },\n          {\n            buttonId: 'surrender',\n            buttonText: {\n              displayText: 'Surrender',\n            },\n          },\n        ],\n      });\n\n      const collector = ctx.MessageCollector({\n        time: game.timeout,\n      });\n\n      const playAgain = [\n        {\n          buttonId: ctx.used.prefix + ctx.used.command,\n          buttonText: {\n            displayText: 'Play Again',\n          },\n        },\n      ];\n\n      collector.on('collect', async m => {\n        const participantAnswer = m.content.toLowerCase();\n        const participantId = ctx.getId(m.sender);\n\n        if (participantAnswer === game.answer) {\n          session.delete(ctx.id);\n          collector.stop();\n          await db.add(`user.${participantId}.coin`, game.coin);\n          await db.add(`user.${participantId}.winGame`, 1);\n          await ctx.sendMessage(\n            ctx.id,\n            {\n              text: `${formatter.quote('ðŸ’¯ Correct!')}\n${formatter.quote(`+${game.coin} Coins`)}`,\n              footer: config.msg.footer,\n              buttons: playAgain,\n            },\n            {\n              quoted: m,\n            }\n          );\n        } else if (participantAnswer === 'hint') {\n          const clue = game.answer.replace(/[aiueo]/g, '_');\n          await ctx.sendMessage(\n            ctx.id,\n            {\n              text: formatter.monospace(clue.toUpperCase()),\n            },\n            {\n              quoted: m,\n            }\n          );\n        } else if (participantAnswer === 'surrender') {\n          session.delete(ctx.id);\n          collector.stop();\n          await ctx.sendMessage(\n            ctx.id,\n            {\n              text: `${formatter.quote('ðŸ³ï¸ You surrendered!')}\n${formatter.quote(`The answer is ${tools.msg.ucwords(game.answer)}.`)}`,\n              footer: config.msg.footer,\n              buttons: playAgain,\n            },\n            {\n              quoted: m,\n            }\n          );\n        } else if (didYouMean(participantAnswer, [game.answer]) === game.answer) {\n          await ctx.sendMessage(\n            ctx.id,\n            {\n              text: formatter.quote('ðŸŽ¯ A little more!'),\n            },\n            {\n              quoted: m,\n            }\n          );\n        }\n      });\n\n      collector.on('end', async () => {\n        if (session.has(ctx.id)) {\n          session.delete(ctx.id);\n          await ctx.reply({\n            text: `${formatter.quote('â± Time is up!')}\n${formatter.quote(`The answer is ${tools.msg.ucwords(game.answer)}.`)}`,\n            footer: config.msg.footer,\n            buttons: playAgain,\n          });\n        }\n      });\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error, true);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\game\\tebakgenshin.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":22},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":2,"column":20,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":27},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":6,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":6,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":9,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":9,"endColumn":21}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const axios = require('axios');\nconst didYouMean = require('didyoumean');\n\nconst session = new Map();\n\nmodule.exports = {\n  name: 'guessgenshin',\n  category: 'game',\n  code: async ctx => {\n    const { formatter, tools, config, database: db } = ctx.bot.context;\n    if (session.has(ctx.id))\n      return await ctx.reply(formatter.quote('ðŸŽ® A game session is already in progress!'));\n\n    try {\n      const apiUrl = tools.api.createUrl(\n        'https://raw.githubusercontent.com',\n        '/ERLANRAHMAT/games/refs/heads/main/tebakgenshin.json'\n      );\n      const result = tools.cmd.getRandomElement((await axios.get(apiUrl)).data);\n\n      const game = {\n        coin: 10,\n        timeout: 60000,\n        answer: result.jawaban.toLowerCase(),\n      };\n\n      session.set(ctx.id, true);\n\n      await ctx.reply({\n        image: {\n          url: result.img,\n        },\n        mimetype: tools.mime.lookup('jpeg'),\n        caption:\n          `${formatter.quote(`Description: ${result.deskripsi}`)}\n` +\n          `${formatter.quote(`Bonus: ${game.coin} Coins`)}\n${formatter.quote(`Time limit: ${tools.msg.convertMsToDuration(game.timeout)}`)}`,\n        footer: config.msg.footer,\n        buttons: [\n          {\n            buttonId: 'hint',\n            buttonText: {\n              displayText: 'Hint',\n            },\n          },\n          {\n            buttonId: 'surrender',\n            buttonText: {\n              displayText: 'Surrender',\n            },\n          },\n        ],\n      });\n\n      const collector = ctx.MessageCollector({\n        time: game.timeout,\n      });\n\n      const playAgain = [\n        {\n          buttonId: ctx.used.prefix + ctx.used.command,\n          buttonText: {\n            displayText: 'Play Again',\n          },\n        },\n      ];\n\n      collector.on('collect', async m => {\n        const participantAnswer = m.content.toLowerCase();\n        const participantId = ctx.getId(m.sender);\n\n        if (participantAnswer === game.answer) {\n          session.delete(ctx.id);\n          collector.stop();\n          await db.add(`user.${participantId}.coin`, game.coin);\n          await db.add(`user.${participantId}.winGame`, 1);\n          await ctx.sendMessage(\n            ctx.id,\n            {\n              text: `${formatter.quote('ðŸ’¯ Correct!')}\n${formatter.quote(`+${game.coin} Coins`)}`,\n              footer: config.msg.footer,\n              buttons: playAgain,\n            },\n            {\n              quoted: m,\n            }\n          );\n        } else if (participantAnswer === 'hint') {\n          const clue = game.answer.replace(/[aiueo]/g, '_');\n          await ctx.sendMessage(\n            ctx.id,\n            {\n              text: formatter.monospace(clue.toUpperCase()),\n            },\n            {\n              quoted: m,\n            }\n          );\n        } else if (participantAnswer === 'surrender') {\n          session.delete(ctx.id);\n          collector.stop();\n          await ctx.sendMessage(\n            ctx.id,\n            {\n              text: `${formatter.quote('ðŸ³ï¸ You surrendered!')}\n${formatter.quote(`The answer is ${tools.msg.ucwords(game.answer)}.`)}`,\n              footer: config.msg.footer,\n              buttons: playAgain,\n            },\n            {\n              quoted: m,\n            }\n          );\n        } else if (didYouMean(participantAnswer, [game.answer]) === game.answer) {\n          await ctx.sendMessage(\n            ctx.id,\n            {\n              text: formatter.quote('ðŸŽ¯ A little more!'),\n            },\n            {\n              quoted: m,\n            }\n          );\n        }\n      });\n\n      collector.on('end', async () => {\n        if (session.has(ctx.id)) {\n          session.delete(ctx.id);\n          await ctx.reply({\n            text: `${formatter.quote('â± Time is up!')}\n${formatter.quote(`The answer is ${tools.msg.ucwords(game.answer)}.`)}`,\n            footer: config.msg.footer,\n            buttons: playAgain,\n          });\n        }\n      });\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error, true);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\game\\tebakheroml.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":22},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":2,"column":20,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":27},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":6,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":6,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":9,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":9,"endColumn":21}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const axios = require('axios');\nconst didYouMean = require('didyoumean');\n\nconst session = new Map();\n\nmodule.exports = {\n  name: 'guessheroml',\n  category: 'game',\n  code: async ctx => {\n    const { formatter, tools, config, database: db } = ctx.bot.context;\n    if (session.has(ctx.id))\n      return await ctx.reply(formatter.quote('ðŸŽ® A game session is already in progress!'));\n\n    try {\n      const apiUrl = tools.api.createUrl(\n        'https://raw.githubusercontent.com',\n        '/ERLANRAHMAT/games/refs/heads/main/tebakheroml.json'\n      );\n      const result = tools.cmd.getRandomElement((await axios.get(apiUrl)).data);\n\n      const game = {\n        coin: 10,\n        timeout: 60000,\n        answer: result.jawaban.toLowerCase(),\n      };\n\n      session.set(ctx.id, true);\n\n      await ctx.reply({\n        image: {\n          url: result.fullimg,\n        },\n        mimetype: tools.mime.lookup('jpeg'),\n        caption:\n          `${formatter.quote(`Description: ${result.deskripsi}`)}\n` +\n          `${formatter.quote(`Bonus: ${game.coin} Coins`)}\n${formatter.quote(`Time limit: ${tools.msg.convertMsToDuration(game.timeout)}`)}`,\n        footer: config.msg.footer,\n        buttons: [\n          {\n            buttonId: 'hint',\n            buttonText: {\n              displayText: 'Hint',\n            },\n          },\n          {\n            buttonId: 'surrender',\n            buttonText: {\n              displayText: 'Surrender',\n            },\n          },\n        ],\n      });\n\n      const collector = ctx.MessageCollector({\n        time: game.timeout,\n      });\n\n      const playAgain = [\n        {\n          buttonId: ctx.used.prefix + ctx.used.command,\n          buttonText: {\n            displayText: 'Play Again',\n          },\n        },\n      ];\n\n      collector.on('collect', async m => {\n        const participantAnswer = m.content.toLowerCase();\n        const participantId = ctx.getId(m.sender);\n\n        if (participantAnswer === game.answer) {\n          session.delete(ctx.id);\n          collector.stop();\n          await db.add(`user.${participantId}.coin`, game.coin);\n          await db.add(`user.${participantId}.winGame`, 1);\n          await ctx.sendMessage(\n            ctx.id,\n            {\n              text: `${formatter.quote('ðŸ’¯ Correct!')}\n${formatter.quote(`+${game.coin} Coins`)}`,\n              footer: config.msg.footer,\n              buttons: playAgain,\n            },\n            {\n              quoted: m,\n            }\n          );\n        } else if (participantAnswer === 'hint') {\n          const clue = game.answer.replace(/[aiueo]/g, '_');\n          await ctx.sendMessage(\n            ctx.id,\n            {\n              text: formatter.monospace(clue.toUpperCase()),\n            },\n            {\n              quoted: m,\n            }\n          );\n        } else if (participantAnswer === 'surrender') {\n          session.delete(ctx.id);\n          collector.stop();\n          await ctx.sendMessage(\n            ctx.id,\n            {\n              text: `${formatter.quote('ðŸ³ï¸ You surrendered!')}\n${formatter.quote(`The answer is ${tools.msg.ucwords(game.answer)}.`)}`,\n              footer: config.msg.footer,\n              buttons: playAgain,\n            },\n            {\n              quoted: m,\n            }\n          );\n        } else if (didYouMean(participantAnswer, [game.answer]) === game.answer) {\n          await ctx.sendMessage(\n            ctx.id,\n            {\n              text: formatter.quote('ðŸŽ¯ A little more!'),\n            },\n            {\n              quoted: m,\n            }\n          );\n        }\n      });\n\n      collector.on('end', async () => {\n        if (session.has(ctx.id)) {\n          session.delete(ctx.id);\n          await ctx.reply({\n            text: `${formatter.quote('â± Time is up!')}\n${formatter.quote(`The answer is ${tools.msg.ucwords(game.answer)}.`)}`,\n            footer: config.msg.footer,\n            buttons: playAgain,\n          });\n        }\n      });\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error, true);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\game\\tebakhewan.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":22},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":2,"column":20,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":27},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":6,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":6,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":9,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":9,"endColumn":21}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const axios = require('axios');\nconst didYouMean = require('didyoumean');\n\nconst session = new Map();\n\nmodule.exports = {\n  name: 'guessanimal',\n  category: 'game',\n  code: async ctx => {\n    const { formatter, tools, config, database: db } = ctx.bot.context;\n    if (session.has(ctx.id))\n      return await ctx.reply(formatter.quote('ðŸŽ® A game session is already in progress!'));\n\n    try {\n      const apiUrl = tools.api.createUrl(\n        'https://raw.githubusercontent.com',\n        '/Aiinne/scrape/refs/heads/main/tebakhewan.json'\n      );\n      const result = tools.cmd.getRandomElement((await axios.get(apiUrl)).data);\n\n      const game = {\n        coin: 10,\n        timeout: 60000,\n        answer: result.nama.toLowerCase(),\n      };\n\n      session.set(ctx.id, true);\n\n      await ctx.reply({\n        image: {\n          url: result.img,\n        },\n        mimetype: tools.mime.lookup('jpeg'),\n        caption: `${formatter.quote(`Bonus: ${game.coin} Coins`)}\n${formatter.quote(`Time limit: ${tools.msg.convertMsToDuration(game.timeout)}`)}`,\n        footer: config.msg.footer,\n        buttons: [\n          {\n            buttonId: 'hint',\n            buttonText: {\n              displayText: 'Hint',\n            },\n          },\n          {\n            buttonId: 'surrender',\n            buttonText: {\n              displayText: 'Surrender',\n            },\n          },\n        ],\n      });\n\n      const collector = ctx.MessageCollector({\n        time: game.timeout,\n      });\n\n      const playAgain = [\n        {\n          buttonId: ctx.used.prefix + ctx.used.command,\n          buttonText: {\n            displayText: 'Play Again',\n          },\n        },\n      ];\n\n      collector.on('collect', async m => {\n        const participantAnswer = m.content.toLowerCase();\n        const participantId = ctx.getId(m.sender);\n\n        if (participantAnswer === game.answer) {\n          session.delete(ctx.id);\n          collector.stop();\n          await db.add(`user.${participantId}.coin`, game.coin);\n          await db.add(`user.${participantId}.winGame`, 1);\n          await ctx.sendMessage(\n            ctx.id,\n            {\n              text: `${formatter.quote('ðŸ’¯ Correct!')}\n${formatter.quote(`+${game.coin} Coins`)}`,\n              footer: config.msg.footer,\n              buttons: playAgain,\n            },\n            {\n              quoted: m,\n            }\n          );\n        } else if (participantAnswer === 'hint') {\n          const clue = game.answer.replace(/[aiueo]/g, '_');\n          await ctx.sendMessage(\n            ctx.id,\n            {\n              text: formatter.monospace(clue.toUpperCase()),\n            },\n            {\n              quoted: m,\n            }\n          );\n        } else if (participantAnswer === 'surrender') {\n          session.delete(ctx.id);\n          collector.stop();\n          await ctx.sendMessage(\n            ctx.id,\n            {\n              text: `${formatter.quote('ðŸ³ï¸ You surrendered!')}\n${formatter.quote(`The answer is ${tools.msg.ucwords(game.answer)}.`)}`,\n              footer: config.msg.footer,\n              buttons: playAgain,\n            },\n            {\n              quoted: m,\n            }\n          );\n        } else if (didYouMean(participantAnswer, [game.answer]) === game.answer) {\n          await ctx.sendMessage(\n            ctx.id,\n            {\n              text: formatter.quote('ðŸŽ¯ A little more!'),\n            },\n            {\n              quoted: m,\n            }\n          );\n        }\n      });\n\n      collector.on('end', async () => {\n        if (session.has(ctx.id)) {\n          session.delete(ctx.id);\n          await ctx.reply({\n            text: `${formatter.quote('â± Time is up!')}\n${formatter.quote(`The answer is ${tools.msg.ucwords(game.answer)}.`)}`,\n            footer: config.msg.footer,\n            buttons: playAgain,\n          });\n        }\n      });\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error, true);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\game\\tebakjkt48.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":22},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":2,"column":20,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":27},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":6,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":6,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":10,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":10,"endColumn":21}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const axios = require('axios');\nconst didYouMean = require('didyoumean');\n\nconst session = new Map();\n\nmodule.exports = {\n  name: 'guessjkt48',\n  aliases: ['guessjkt'],\n  category: 'game',\n  code: async ctx => {\n    const { formatter, tools, config, database: db } = ctx.bot.context;\n    if (session.has(ctx.id))\n      return await ctx.reply(formatter.quote('ðŸŽ® A game session is already in progress!'));\n\n    try {\n      const apiUrl = tools.api.createUrl(\n        'https://raw.githubusercontent.com',\n        '/ERLANRAHMAT/games/refs/heads/main/tebakjkt48.json'\n      );\n      const result = tools.cmd.getRandomElement((await axios.get(apiUrl)).data);\n\n      const game = {\n        coin: 10,\n        timeout: 60000,\n        answer: result.jawaban.toLowerCase(),\n      };\n\n      session.set(ctx.id, true);\n\n      await ctx.reply({\n        image: {\n          url: result.img,\n        },\n        mimetype: tools.mime.lookup('jpeg'),\n        caption: `${formatter.quote(`Bonus: ${game.coin} Coins`)}\n${formatter.quote(`Time limit: ${tools.msg.convertMsToDuration(game.timeout)}`)}`,\n        footer: config.msg.footer,\n        buttons: [\n          {\n            buttonId: 'hint',\n            buttonText: {\n              displayText: 'Hint',\n            },\n          },\n          {\n            buttonId: 'surrender',\n            buttonText: {\n              displayText: 'Surrender',\n            },\n          },\n        ],\n      });\n\n      const collector = ctx.MessageCollector({\n        time: game.timeout,\n      });\n\n      const playAgain = [\n        {\n          buttonId: ctx.used.prefix + ctx.used.command,\n          buttonText: {\n            displayText: 'Play Again',\n          },\n        },\n      ];\n\n      collector.on('collect', async m => {\n        const participantAnswer = m.content.toLowerCase();\n        const participantId = ctx.getId(m.sender);\n\n        if (participantAnswer === game.answer) {\n          session.delete(ctx.id);\n          collector.stop();\n          await db.add(`user.${participantId}.coin`, game.coin);\n          await db.add(`user.${participantId}.winGame`, 1);\n          await ctx.sendMessage(\n            ctx.id,\n            {\n              text: `${formatter.quote('ðŸ’¯ Correct!')}\n${formatter.quote(`+${game.coin} Coins`)}`,\n              footer: config.msg.footer,\n              buttons: playAgain,\n            },\n            {\n              quoted: m,\n            }\n          );\n        } else if (participantAnswer === 'hint') {\n          const clue = game.answer.replace(/[aiueo]/g, '_');\n          await ctx.sendMessage(\n            ctx.id,\n            {\n              text: formatter.monospace(clue.toUpperCase()),\n            },\n            {\n              quoted: m,\n            }\n          );\n        } else if (participantAnswer === 'surrender') {\n          session.delete(ctx.id);\n          collector.stop();\n          await ctx.sendMessage(\n            ctx.id,\n            {\n              text: `${formatter.quote('ðŸ³ï¸ You surrendered!')}\n${formatter.quote(`The answer is ${tools.msg.ucwords(game.answer)}.`)}`,\n              footer: config.msg.footer,\n              buttons: playAgain,\n            },\n            {\n              quoted: m,\n            }\n          );\n        } else if (didYouMean(participantAnswer, [game.answer]) === game.answer) {\n          await ctx.sendMessage(\n            ctx.id,\n            {\n              text: formatter.quote('ðŸŽ¯ A little more!'),\n            },\n            {\n              quoted: m,\n            }\n          );\n        }\n      });\n\n      collector.on('end', async () => {\n        if (session.has(ctx.id)) {\n          session.delete(ctx.id);\n          await ctx.reply({\n            text: `${formatter.quote('â± Time is up!')}\n${formatter.quote(`The answer is ${tools.msg.ucwords(game.answer)}.`)}`,\n            footer: config.msg.footer,\n            buttons: playAgain,\n          });\n        }\n      });\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error, true);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\game\\tebakkalimat.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":22},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":2,"column":20,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":27},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":6,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":6,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":9,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":9,"endColumn":21}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const axios = require('axios');\nconst didYouMean = require('didyoumean');\n\nconst session = new Map();\n\nmodule.exports = {\n  name: 'guesssentence',\n  category: 'game',\n  code: async ctx => {\n    const { formatter, tools, config, database: db } = ctx.bot.context;\n    if (session.has(ctx.id))\n      return await ctx.reply(formatter.quote('ðŸŽ® A game session is already in progress!'));\n\n    try {\n      const apiUrl = tools.api.createUrl(\n        'https://raw.githubusercontent.com',\n        '/BochilTeam/database/refs/heads/master/games/tebakkalimat.json'\n      );\n      const result = tools.cmd.getRandomElement((await axios.get(apiUrl)).data);\n\n      const game = {\n        coin: 10,\n        timeout: 60000,\n        answer: result.jawaban.toLowerCase().trim(),\n      };\n\n      session.set(ctx.id, true);\n\n      await ctx.reply({\n        text:\n          `${formatter.quote(`Question: ${result.soal}`)}\n` +\n          `${formatter.quote(`Bonus: ${game.coin} Coins`)}\n${formatter.quote(`Time limit: ${tools.msg.convertMsToDuration(game.timeout)}`)}`,\n        footer: config.msg.footer,\n        buttons: [\n          {\n            buttonId: 'hint',\n            buttonText: {\n              displayText: 'Hint',\n            },\n          },\n          {\n            buttonId: 'surrender',\n            buttonText: {\n              displayText: 'Surrender',\n            },\n          },\n        ],\n      });\n\n      const collector = ctx.MessageCollector({\n        time: game.timeout,\n      });\n\n      const playAgain = [\n        {\n          buttonId: ctx.used.prefix + ctx.used.command,\n          buttonText: {\n            displayText: 'Play Again',\n          },\n        },\n      ];\n\n      collector.on('collect', async m => {\n        const participantAnswer = m.content.toLowerCase();\n        const participantId = ctx.getId(m.sender);\n\n        if (participantAnswer === game.answer) {\n          session.delete(ctx.id);\n          collector.stop();\n          await db.add(`user.${participantId}.coin`, game.coin);\n          await db.add(`user.${participantId}.winGame`, 1);\n          await ctx.sendMessage(\n            ctx.id,\n            {\n              text: `${formatter.quote('ðŸ’¯ Correct!')}\n${formatter.quote(`+${game.coin} Coins`)}`,\n              footer: config.msg.footer,\n              buttons: playAgain,\n            },\n            {\n              quoted: m,\n            }\n          );\n        } else if (participantAnswer === 'hint') {\n          const clue = game.answer.replace(/[aiueo]/g, '_');\n          await ctx.sendMessage(\n            ctx.id,\n            {\n              text: formatter.monospace(clue.toUpperCase()),\n            },\n            {\n              quoted: m,\n            }\n          );\n        } else if (participantAnswer === 'surrender') {\n          session.delete(ctx.id);\n          collector.stop();\n          await ctx.sendMessage(\n            ctx.id,\n            {\n              text: `${formatter.quote('ðŸ³ï¸ You surrendered!')}\n${formatter.quote(`The answer is ${tools.msg.ucwords(game.answer)}.`)}`,\n              footer: config.msg.footer,\n              buttons: playAgain,\n            },\n            {\n              quoted: m,\n            }\n          );\n        } else if (didYouMean(participantAnswer, [game.answer]) === game.answer) {\n          await ctx.sendMessage(\n            ctx.id,\n            {\n              text: formatter.quote('ðŸŽ¯ A little more!'),\n            },\n            {\n              quoted: m,\n            }\n          );\n        }\n      });\n\n      collector.on('end', async () => {\n        if (session.has(ctx.id)) {\n          session.delete(ctx.id);\n          await ctx.reply({\n            text: `${formatter.quote('â± Time is up!')}\n${formatter.quote(`The answer is ${tools.msg.ucwords(game.answer)}.`)}`,\n            footer: config.msg.footer,\n            buttons: playAgain,\n          });\n        }\n      });\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error, true);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\game\\tebakkata.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":22},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":2,"column":20,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":27},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":6,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":6,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":9,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":9,"endColumn":21}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const axios = require('axios');\nconst didYouMean = require('didyoumean');\n\nconst session = new Map();\n\nmodule.exports = {\n  name: 'guessword',\n  category: 'game',\n  code: async ctx => {\n    const { formatter, tools, config, database: db } = ctx.bot.context;\n    if (session.has(ctx.id))\n      return await ctx.reply(formatter.quote('ðŸŽ® A game session is already in progress!'));\n\n    try {\n      const apiUrl = tools.api.createUrl(\n        'https://raw.githubusercontent.com',\n        '/BochilTeam/database/refs/heads/master/games/tebakkata.json'\n      );\n      const result = tools.cmd.getRandomElement((await axios.get(apiUrl)).data);\n\n      const game = {\n        coin: 10,\n        timeout: 60000,\n        answer: result.jawaban.toLowerCase(),\n      };\n\n      session.set(ctx.id, true);\n\n      await ctx.reply({\n        text:\n          `${formatter.quote(`Question: ${result.soal}`)}\n` +\n          `${formatter.quote(`Bonus: ${game.coin} Coins`)}\n${formatter.quote(`Time limit: ${tools.msg.convertMsToDuration(game.timeout)}`)}`,\n        footer: config.msg.footer,\n        buttons: [\n          {\n            buttonId: 'hint',\n            buttonText: {\n              displayText: 'Hint',\n            },\n          },\n          {\n            buttonId: 'surrender',\n            buttonText: {\n              displayText: 'Surrender',\n            },\n          },\n        ],\n      });\n\n      const collector = ctx.MessageCollector({\n        time: game.timeout,\n      });\n\n      const playAgain = [\n        {\n          buttonId: ctx.used.prefix + ctx.used.command,\n          buttonText: {\n            displayText: 'Play Again',\n          },\n        },\n      ];\n\n      collector.on('collect', async m => {\n        const participantAnswer = m.content.toLowerCase();\n        const participantId = ctx.getId(m.sender);\n\n        if (participantAnswer === game.answer) {\n          session.delete(ctx.id);\n          collector.stop();\n          await db.add(`user.${participantId}.coin`, game.coin);\n          await db.add(`user.${participantId}.winGame`, 1);\n          await ctx.sendMessage(\n            ctx.id,\n            {\n              text: `${formatter.quote('ðŸ’¯ Correct!')}\n${formatter.quote(`+${game.coin} Coins`)}`,\n              footer: config.msg.footer,\n              buttons: playAgain,\n            },\n            {\n              quoted: m,\n            }\n          );\n        } else if (participantAnswer === 'hint') {\n          const clue = game.answer.replace(/[aiueo]/g, '_');\n          await ctx.sendMessage(\n            ctx.id,\n            {\n              text: formatter.monospace(clue.toUpperCase()),\n            },\n            {\n              quoted: m,\n            }\n          );\n        } else if (participantAnswer === 'surrender') {\n          session.delete(ctx.id);\n          collector.stop();\n          await ctx.sendMessage(\n            ctx.id,\n            {\n              text: `${formatter.quote('ðŸ³ï¸ You surrendered!')}\n${formatter.quote(`The answer is ${tools.msg.ucwords(game.answer)}.`)}`,\n              footer: config.msg.footer,\n              buttons: playAgain,\n            },\n            {\n              quoted: m,\n            }\n          );\n        } else if (didYouMean(participantAnswer, [game.answer]) === game.answer) {\n          await ctx.sendMessage(\n            ctx.id,\n            {\n              text: formatter.quote('ðŸŽ¯ A little more!'),\n            },\n            {\n              quoted: m,\n            }\n          );\n        }\n      });\n\n      collector.on('end', async () => {\n        if (session.has(ctx.id)) {\n          session.delete(ctx.id);\n          await ctx.reply({\n            text: `${formatter.quote('â± Time is up!')}\n${formatter.quote(`The answer is ${tools.msg.ucwords(game.answer)}.`)}`,\n            footer: config.msg.footer,\n            buttons: playAgain,\n          });\n        }\n      });\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error, true);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\game\\tebakkimia.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":22},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":2,"column":20,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":27},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":6,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":6,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":9,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":9,"endColumn":21}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const axios = require('axios');\nconst didYouMean = require('didyoumean');\n\nconst session = new Map();\n\nmodule.exports = {\n  name: 'guesschemistry',\n  category: 'game',\n  code: async ctx => {\n    const { formatter, tools, config, database: db } = ctx.bot.context;\n    if (session.has(ctx.id))\n      return await ctx.reply(formatter.quote('ðŸŽ® A game session is already in progress!'));\n\n    try {\n      const apiUrl = tools.api.createUrl(\n        'https://raw.githubusercontent.com',\n        '/BochilTeam/database/refs/heads/master/games/tebakkimia.json'\n      );\n      const result = tools.cmd.getRandomElement((await axios.get(apiUrl)).data);\n\n      const game = {\n        coin: 10,\n        timeout: 60000,\n        answer: result.unsur.toLowerCase(),\n      };\n\n      session.set(ctx.id, true);\n\n      await ctx.reply({\n        text:\n          `${formatter.quote(`Symbol: ${result.lambang}`)}\n` +\n          `${formatter.quote(`Bonus: ${game.coin} Coins`)}\n${formatter.quote(`Time limit: ${tools.msg.convertMsToDuration(game.timeout)}`)}`,\n        footer: config.msg.footer,\n        buttons: [\n          {\n            buttonId: 'hint',\n            buttonText: {\n              displayText: 'Hint',\n            },\n          },\n          {\n            buttonId: 'surrender',\n            buttonText: {\n              displayText: 'Surrender',\n            },\n          },\n        ],\n      });\n\n      const collector = ctx.MessageCollector({\n        time: game.timeout,\n      });\n\n      const playAgain = [\n        {\n          buttonId: ctx.used.prefix + ctx.used.command,\n          buttonText: {\n            displayText: 'Play Again',\n          },\n        },\n      ];\n\n      collector.on('collect', async m => {\n        const participantAnswer = m.content.toLowerCase();\n        const participantId = ctx.getId(m.sender);\n\n        if (participantAnswer === game.answer) {\n          session.delete(ctx.id);\n          collector.stop();\n          await db.add(`user.${participantId}.coin`, game.coin);\n          await db.add(`user.${participantId}.winGame`, 1);\n          await ctx.sendMessage(\n            ctx.id,\n            {\n              text: `${formatter.quote('ðŸ’¯ Correct!')}\n${formatter.quote(`+${game.coin} Coins`)}`,\n              footer: config.msg.footer,\n              buttons: playAgain,\n            },\n            {\n              quoted: m,\n            }\n          );\n        } else if (participantAnswer === 'hint') {\n          const clue = game.answer.replace(/[aiueo]/g, '_');\n          await ctx.sendMessage(\n            ctx.id,\n            {\n              text: formatter.monospace(clue.toUpperCase()),\n            },\n            {\n              quoted: m,\n            }\n          );\n        } else if (participantAnswer === 'surrender') {\n          session.delete(ctx.id);\n          collector.stop();\n          await ctx.sendMessage(\n            ctx.id,\n            {\n              text: `${formatter.quote('ðŸ³ï¸ You surrendered!')}\n${formatter.quote(`The answer is ${tools.msg.ucwords(game.answer)}.`)}`,\n              footer: config.msg.footer,\n              buttons: playAgain,\n            },\n            {\n              quoted: m,\n            }\n          );\n        } else if (didYouMean(participantAnswer, [game.answer]) === game.answer) {\n          await ctx.sendMessage(\n            ctx.id,\n            {\n              text: formatter.quote('ðŸŽ¯ A little more!'),\n            },\n            {\n              quoted: m,\n            }\n          );\n        }\n      });\n\n      collector.on('end', async () => {\n        if (session.has(ctx.id)) {\n          session.delete(ctx.id);\n          await ctx.reply({\n            text: `${formatter.quote('â± Time is up!')}\n${formatter.quote(`The answer is ${tools.msg.ucwords(game.answer)}.`)}`,\n            footer: config.msg.footer,\n            buttons: playAgain,\n          });\n        }\n      });\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error, true);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\game\\tebaklagu.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":22},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":2,"column":20,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":27},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":6,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":6,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":9,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":9,"endColumn":21}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const axios = require('axios');\nconst didYouMean = require('didyoumean');\n\nconst session = new Map();\n\nmodule.exports = {\n  name: 'guessthesong',\n  category: 'game',\n  code: async ctx => {\n    const { formatter, tools, config, database: db } = ctx.bot.context;\n    if (session.has(ctx.id))\n      return await ctx.reply(formatter.quote('ðŸŽ® A game session is already in progress!'));\n\n    try {\n      const apiUrl = tools.api.createUrl(\n        'https://raw.githubusercontent.com',\n        '/Aiinne/scrape/refs/heads/main/tebaklagu.json'\n      );\n      const result = tools.cmd.getRandomElement((await axios.get(apiUrl)).data);\n\n      const game = {\n        coin: 10,\n        timeout: 60000,\n        answer: result.judul.toLowerCase(),\n      };\n\n      session.set(ctx.id, true);\n\n      const sentSong = await ctx.reply({\n        audio: {\n          url: result.lagu,\n        },\n        mimetype: tools.mime.lookup('mp3'),\n      });\n      await ctx.sendMessage(\n        ctx.id,\n        {\n          text:\n            `${formatter.quote(`Artist: ${result.artis}`)}\n` +\n            `${formatter.quote(`Bonus: ${game.coin} Coins`)}\n${formatter.quote(`Time limit: ${tools.msg.convertMsToDuration(game.timeout)}`)}`,\n          footer: config.msg.footer,\n          buttons: [\n            {\n              buttonId: 'hint',\n              buttonText: {\n                displayText: 'Hint',\n              },\n            },\n            {\n              buttonId: 'surrender',\n              buttonText: {\n                displayText: 'Surrender',\n              },\n            },\n          ],\n        },\n        {\n          quoted: sentSong,\n        }\n      );\n\n      const collector = ctx.MessageCollector({\n        time: game.timeout,\n      });\n\n      const playAgain = [\n        {\n          buttonId: ctx.used.prefix + ctx.used.command,\n          buttonText: {\n            displayText: 'Play Again',\n          },\n        },\n      ];\n\n      collector.on('collect', async m => {\n        const participantAnswer = m.content.toLowerCase();\n        const participantId = ctx.getId(m.sender);\n\n        if (participantAnswer === game.answer) {\n          session.delete(ctx.id);\n          collector.stop();\n          await db.add(`user.${participantId}.coin`, game.coin);\n          await db.add(`user.${participantId}.winGame`, 1);\n          await ctx.sendMessage(\n            ctx.id,\n            {\n              text: `${formatter.quote('ðŸ’¯ Correct!')}\n${formatter.quote(`+${game.coin} Coins`)}`,\n              footer: config.msg.footer,\n              buttons: playAgain,\n            },\n            {\n              quoted: m,\n            }\n          );\n        } else if (participantAnswer === 'hint') {\n          const clue = game.answer.replace(/[aiueo]/g, '_');\n          await ctx.sendMessage(\n            ctx.id,\n            {\n              text: formatter.monospace(clue.toUpperCase()),\n            },\n            {\n              quoted: m,\n            }\n          );\n        } else if (participantAnswer === 'surrender') {\n          session.delete(ctx.id);\n          collector.stop();\n          await ctx.sendMessage(\n            ctx.id,\n            {\n              text: `${formatter.quote('ðŸ³ï¸ You surrendered!')}\n${formatter.quote(`The answer is ${tools.msg.ucwords(game.answer)}.`)}`,\n              footer: config.msg.footer,\n              buttons: playAgain,\n            },\n            {\n              quoted: m,\n            }\n          );\n        } else if (didYouMean(participantAnswer, [game.answer]) === game.answer) {\n          await ctx.sendMessage(\n            ctx.id,\n            {\n              text: formatter.quote('ðŸŽ¯ A little more!'),\n            },\n            {\n              quoted: m,\n            }\n          );\n        }\n      });\n\n      collector.on('end', async () => {\n        if (session.has(ctx.id)) {\n          session.delete(ctx.id);\n          await ctx.reply({\n            text: `${formatter.quote('â± Time is up!')}\n${formatter.quote(`The answer is ${tools.msg.ucwords(game.answer)}.`)}`,\n            footer: config.msg.footer,\n            buttons: playAgain,\n          });\n        }\n      });\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error, true);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\game\\tebaklirik.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":22},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":2,"column":20,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":27},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":6,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":6,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":9,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":9,"endColumn":21}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const axios = require('axios');\nconst didYouMean = require('didyoumean');\n\nconst session = new Map();\n\nmodule.exports = {\n  name: 'guessthelyrics',\n  category: 'game',\n  code: async ctx => {\n    const { formatter, tools, config, database: db } = ctx.bot.context;\n    if (session.has(ctx.id))\n      return await ctx.reply(formatter.quote('ðŸŽ® A game session is already in progress!'));\n\n    try {\n      const apiUrl = tools.api.createUrl(\n        'https://raw.githubusercontent.com',\n        '/BochilTeam/database/refs/heads/master/games/tebaklirik.json'\n      );\n      const result = tools.cmd.getRandomElement((await axios.get(apiUrl)).data);\n\n      const game = {\n        coin: 10,\n        timeout: 60000,\n        answer: result.jawaban.toLowerCase(),\n      };\n\n      session.set(ctx.id, true);\n\n      await ctx.reply({\n        text:\n          `${formatter.quote(`Question: ${result.soal}`)}\n` +\n          `${formatter.quote(`Bonus: ${game.coin} Coins`)}\n${formatter.quote(`Time limit: ${tools.msg.convertMsToDuration(game.timeout)}`)}`,\n        footer: config.msg.footer,\n        buttons: [\n          {\n            buttonId: 'hint',\n            buttonText: {\n              displayText: 'Hint',\n            },\n          },\n          {\n            buttonId: 'surrender',\n            buttonText: {\n              displayText: 'Surrender',\n            },\n          },\n        ],\n      });\n\n      const collector = ctx.MessageCollector({\n        time: game.timeout,\n      });\n\n      const playAgain = [\n        {\n          buttonId: ctx.used.prefix + ctx.used.command,\n          buttonText: {\n            displayText: 'Play Again',\n          },\n        },\n      ];\n\n      collector.on('collect', async m => {\n        const participantAnswer = m.content.toLowerCase();\n        const participantId = ctx.getId(m.sender);\n\n        if (participantAnswer === game.answer) {\n          session.delete(ctx.id);\n          collector.stop();\n          await db.add(`user.${participantId}.coin`, game.coin);\n          await db.add(`user.${participantId}.winGame`, 1);\n          await ctx.sendMessage(\n            ctx.id,\n            {\n              text: `${formatter.quote('ðŸ’¯ Correct!')}\n${formatter.quote(`+${game.coin} Coins`)}`,\n              footer: config.msg.footer,\n              buttons: playAgain,\n            },\n            {\n              quoted: m,\n            }\n          );\n        } else if (participantAnswer === 'hint') {\n          const clue = game.answer.replace(/[aiueo]/g, '_');\n          await ctx.sendMessage(\n            ctx.id,\n            {\n              text: formatter.monospace(clue.toUpperCase()),\n            },\n            {\n              quoted: m,\n            }\n          );\n        } else if (participantAnswer === 'surrender') {\n          session.delete(ctx.id);\n          collector.stop();\n          await ctx.sendMessage(\n            ctx.id,\n            {\n              text: `${formatter.quote('ðŸ³ï¸ You surrendered!')}\n${formatter.quote(`The answer is ${tools.msg.ucwords(game.answer)}.`)}`,\n              footer: config.msg.footer,\n              buttons: playAgain,\n            },\n            {\n              quoted: m,\n            }\n          );\n        } else if (didYouMean(participantAnswer, [game.answer]) === game.answer) {\n          await ctx.sendMessage(\n            ctx.id,\n            {\n              text: formatter.quote('ðŸŽ¯ A little more!'),\n            },\n            {\n              quoted: m,\n            }\n          );\n        }\n      });\n\n      collector.on('end', async () => {\n        if (session.has(ctx.id)) {\n          session.delete(ctx.id);\n          await ctx.reply({\n            text: `${formatter.quote('â± Time is up!')}\n${formatter.quote(`The answer is ${tools.msg.ucwords(game.answer)}.`)}`,\n            footer: config.msg.footer,\n            buttons: playAgain,\n          });\n        }\n      });\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error, true);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\game\\tebaklogo.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":22},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":2,"column":20,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":27},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":6,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":6,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":9,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":9,"endColumn":21}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const axios = require('axios');\nconst didYouMean = require('didyoumean');\n\nconst session = new Map();\n\nmodule.exports = {\n  name: 'guessthelogo',\n  category: 'game',\n  code: async ctx => {\n    const { formatter, tools, config, database: db } = ctx.bot.context;\n    if (session.has(ctx.id))\n      return await ctx.reply(formatter.quote('ðŸŽ® A game session is already in progress!'));\n\n    try {\n      const apiUrl = tools.api.createUrl(\n        'https://raw.githubusercontent.com',\n        '/Aiinne/scrape/refs/heads/main/tebaklogo.json'\n      );\n      const result = tools.cmd.getRandomElement((await axios.get(apiUrl)).data);\n\n      const game = {\n        coin: 10,\n        timeout: 60000,\n        answer: result.jawaban.toLowerCase(),\n      };\n\n      session.set(ctx.id, true);\n\n      await ctx.reply({\n        image: {\n          url: result.img,\n        },\n        mimetype: tools.mime.lookup('jpeg'),\n        caption:\n          `${formatter.quote(`Description: ${result.deskripsi}`)}\n` +\n          `${formatter.quote(`Bonus: ${game.coin} Coins`)}\n${formatter.quote(`Time limit: ${tools.msg.convertMsToDuration(game.timeout)}`)}`,\n        footer: config.msg.footer,\n        buttons: [\n          {\n            buttonId: 'hint',\n            buttonText: {\n              displayText: 'Hint',\n            },\n          },\n          {\n            buttonId: 'surrender',\n            buttonText: {\n              displayText: 'Surrender',\n            },\n          },\n        ],\n      });\n\n      const collector = ctx.MessageCollector({\n        time: game.timeout,\n      });\n\n      const playAgain = [\n        {\n          buttonId: ctx.used.prefix + ctx.used.command,\n          buttonText: {\n            displayText: 'Play Again',\n          },\n        },\n      ];\n\n      collector.on('collect', async m => {\n        const participantAnswer = m.content.toLowerCase();\n        const participantId = ctx.getId(m.sender);\n\n        if (participantAnswer === game.answer) {\n          session.delete(ctx.id);\n          collector.stop();\n          await db.add(`user.${participantId}.coin`, game.coin);\n          await db.add(`user.${participantId}.winGame`, 1);\n          await ctx.sendMessage(\n            ctx.id,\n            {\n              text: `${formatter.quote('ðŸ’¯ Correct!')}\n${formatter.quote(`+${game.coin} Coins`)}`,\n              footer: config.msg.footer,\n              buttons: playAgain,\n            },\n            {\n              quoted: m,\n            }\n          );\n        } else if (participantAnswer === 'hint') {\n          const clue = game.answer.replace(/[aiueo]/g, '_');\n          await ctx.sendMessage(\n            ctx.id,\n            {\n              text: formatter.monospace(clue.toUpperCase()),\n            },\n            {\n              quoted: m,\n            }\n          );\n        } else if (participantAnswer === 'surrender') {\n          session.delete(ctx.id);\n          collector.stop();\n          await ctx.sendMessage(\n            ctx.id,\n            {\n              text: `${formatter.quote('ðŸ³ï¸ You surrendered!')}\n${formatter.quote(`The answer is ${tools.msg.ucwords(game.answer)}.`)}`,\n              footer: config.msg.footer,\n              buttons: playAgain,\n            },\n            {\n              quoted: m,\n            }\n          );\n        } else if (didYouMean(participantAnswer, [game.answer]) === game.answer) {\n          await ctx.sendMessage(\n            ctx.id,\n            {\n              text: formatter.quote('ðŸŽ¯ A little more!'),\n            },\n            {\n              quoted: m,\n            }\n          );\n        }\n      });\n\n      collector.on('end', async () => {\n        if (session.has(ctx.id)) {\n          session.delete(ctx.id);\n          await ctx.reply({\n            text: `${formatter.quote('â± Time is up!')}\n${formatter.quote(`The answer is ${tools.msg.ucwords(game.answer)}.`)}`,\n            footer: config.msg.footer,\n            buttons: playAgain,\n          });\n        }\n      });\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error, true);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\game\\tebakmakanan.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":22},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":2,"column":20,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":27},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":6,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":6,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":9,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":9,"endColumn":21}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const axios = require('axios');\nconst didYouMean = require('didyoumean');\n\nconst session = new Map();\n\nmodule.exports = {\n  name: 'guessthefood',\n  category: 'game',\n  code: async ctx => {\n    const { formatter, tools, config, database: db } = ctx.bot.context;\n    if (session.has(ctx.id))\n      return await ctx.reply(formatter.quote('ðŸŽ® A game session is already in progress!'));\n\n    try {\n      const apiUrl = tools.api.createUrl(\n        'https://raw.githubusercontent.com',\n        '/ERLANRAHMAT/games/refs/heads/main/tebakmakanan.json'\n      );\n      const result = tools.cmd.getRandomElement((await axios.get(apiUrl)).data);\n\n      const game = {\n        coin: 10,\n        timeout: 60000,\n        answer: result.jawaban.toLowerCase(),\n      };\n\n      session.set(ctx.id, true);\n\n      await ctx.reply({\n        image: {\n          url: result.img,\n        },\n        mimetype: tools.mime.lookup('jpeg'),\n        caption:\n          `${formatter.quote(`Description: ${result.deskripsi}`)}\n` +\n          `${formatter.quote(`Bonus: ${game.coin} Coins`)}\n${formatter.quote(`Time limit: ${tools.msg.convertMsToDuration(game.timeout)}`)}`,\n        footer: config.msg.footer,\n        buttons: [\n          {\n            buttonId: 'hint',\n            buttonText: {\n              displayText: 'Hint',\n            },\n          },\n          {\n            buttonId: 'surrender',\n            buttonText: {\n              displayText: 'Surrender',\n            },\n          },\n        ],\n      });\n\n      const collector = ctx.MessageCollector({\n        time: game.timeout,\n      });\n\n      const playAgain = [\n        {\n          buttonId: ctx.used.prefix + ctx.used.command,\n          buttonText: {\n            displayText: 'Play Again',\n          },\n        },\n      ];\n\n      collector.on('collect', async m => {\n        const participantAnswer = m.content.toLowerCase();\n        const participantId = ctx.getId(m.sender);\n\n        if (participantAnswer === game.answer) {\n          session.delete(ctx.id);\n          collector.stop();\n          await db.add(`user.${participantId}.coin`, game.coin);\n          await db.add(`user.${participantId}.winGame`, 1);\n          await ctx.sendMessage(\n            ctx.id,\n            {\n              text: `${formatter.quote('ðŸ’¯ Correct!')}\n${formatter.quote(`+${game.coin} Coins`)}`,\n              footer: config.msg.footer,\n              buttons: playAgain,\n            },\n            {\n              quoted: m,\n            }\n          );\n        } else if (participantAnswer === 'hint') {\n          const clue = game.answer.replace(/[aiueo]/g, '_');\n          await ctx.sendMessage(\n            ctx.id,\n            {\n              text: formatter.monospace(clue.toUpperCase()),\n            },\n            {\n              quoted: m,\n            }\n          );\n        } else if (participantAnswer === 'surrender') {\n          session.delete(ctx.id);\n          collector.stop();\n          await ctx.sendMessage(\n            ctx.id,\n            {\n              text: `${formatter.quote('ðŸ³ï¸ You surrendered!')}\n${formatter.quote(`The answer is ${tools.msg.ucwords(game.answer)}.`)}`,\n              footer: config.msg.footer,\n              buttons: playAgain,\n            },\n            {\n              quoted: m,\n            }\n          );\n        } else if (didYouMean(participantAnswer, [game.answer]) === game.answer) {\n          await ctx.sendMessage(\n            ctx.id,\n            {\n              text: formatter.quote('ðŸŽ¯ A little more!'),\n            },\n            {\n              quoted: m,\n            }\n          );\n        }\n      });\n\n      collector.on('end', async () => {\n        if (session.has(ctx.id)) {\n          session.delete(ctx.id);\n          await ctx.reply({\n            text: `${formatter.quote('â± Time is up!')}\n${formatter.quote(`The answer is ${tools.msg.ucwords(game.answer)}.`)}`,\n            footer: config.msg.footer,\n            buttons: playAgain,\n          });\n        }\n      });\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error, true);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\game\\tebaktebakan.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":22},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":2,"column":20,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":27},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":6,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":6,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":9,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":9,"endColumn":21}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const axios = require('axios');\nconst didYouMean = require('didyoumean');\n\nconst session = new Map();\n\nmodule.exports = {\n  name: 'riddles',\n  category: 'game',\n  code: async ctx => {\n    const { formatter, tools, config, database: db } = ctx.bot.context;\n    if (session.has(ctx.id))\n      return await ctx.reply(formatter.quote('ðŸŽ® A game session is already in progress!'));\n\n    try {\n      const apiUrl = tools.api.createUrl(\n        'https://raw.githubusercontent.com',\n        '/BochilTeam/database/refs/heads/master/games/tebaktebakan.json'\n      );\n      const result = tools.cmd.getRandomElement((await axios.get(apiUrl)).data);\n\n      const game = {\n        coin: 10,\n        timeout: 60000,\n        answer: result.jawaban.toLowerCase(),\n      };\n\n      session.set(ctx.id, true);\n\n      await ctx.reply({\n        text:\n          `${formatter.quote(`Question: ${result.soal}`)}\n` +\n          `${formatter.quote(`Bonus: ${game.coin} Coins`)}\n${formatter.quote(`Time limit: ${tools.msg.convertMsToDuration(game.timeout)}`)}`,\n        footer: config.msg.footer,\n        buttons: [\n          {\n            buttonId: 'hint',\n            buttonText: {\n              displayText: 'Hint',\n            },\n          },\n          {\n            buttonId: 'surrender',\n            buttonText: {\n              displayText: 'Surrender',\n            },\n          },\n        ],\n      });\n\n      const collector = ctx.MessageCollector({\n        time: game.timeout,\n      });\n\n      const playAgain = [\n        {\n          buttonId: ctx.used.prefix + ctx.used.command,\n          buttonText: {\n            displayText: 'Play Again',\n          },\n        },\n      ];\n\n      collector.on('collect', async m => {\n        const participantAnswer = m.content.toLowerCase();\n        const participantId = ctx.getId(m.sender);\n\n        if (participantAnswer === game.answer) {\n          session.delete(ctx.id);\n          collector.stop();\n          await db.add(`user.${participantId}.coin`, game.coin);\n          await db.add(`user.${participantId}.winGame`, 1);\n          await ctx.sendMessage(\n            ctx.id,\n            {\n              text: `${formatter.quote('ðŸ’¯ Correct!')}\n${formatter.quote(`+${game.coin} Coins`)}`,\n              footer: config.msg.footer,\n              buttons: playAgain,\n            },\n            {\n              quoted: m,\n            }\n          );\n        } else if (participantAnswer === 'hint') {\n          const clue = game.answer.replace(/[aiueo]/g, '_');\n          await ctx.sendMessage(\n            ctx.id,\n            {\n              text: formatter.monospace(clue.toUpperCase()),\n            },\n            {\n              quoted: m,\n            }\n          );\n        } else if (participantAnswer === 'surrender') {\n          session.delete(ctx.id);\n          collector.stop();\n          await ctx.sendMessage(\n            ctx.id,\n            {\n              text: `${formatter.quote('ðŸ³ï¸ You surrendered!')}\n${formatter.quote(`The answer is ${tools.msg.ucwords(game.answer)}.`)}`,\n              footer: config.msg.footer,\n              buttons: playAgain,\n            },\n            {\n              quoted: m,\n            }\n          );\n        } else if (didYouMean(participantAnswer, [game.answer]) === game.answer) {\n          await ctx.sendMessage(\n            ctx.id,\n            {\n              text: formatter.quote('ðŸŽ¯ A little more!'),\n            },\n            {\n              quoted: m,\n            }\n          );\n        }\n      });\n\n      collector.on('end', async () => {\n        if (session.has(ctx.id)) {\n          session.delete(ctx.id);\n          await ctx.reply({\n            text: `${formatter.quote('â± Time is up!')}\n${formatter.quote(`The answer is ${tools.msg.ucwords(game.answer)}.`)}`,\n            footer: config.msg.footer,\n            buttons: playAgain,\n          });\n        }\n      });\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error, true);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\game\\tekateki.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":22},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":2,"column":20,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":27},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":6,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":6,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":9,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":9,"endColumn":21}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const axios = require('axios');\nconst didYouMean = require('didyoumean');\n\nconst session = new Map();\n\nmodule.exports = {\n  name: 'riddle',\n  category: 'game',\n  code: async ctx => {\n    const { formatter, tools, config, database: db } = ctx.bot.context;\n    if (session.has(ctx.id))\n      return await ctx.reply(formatter.quote('ðŸŽ® A game session is already in progress!'));\n\n    try {\n      const apiUrl = tools.api.createUrl(\n        'https://raw.githubusercontent.com',\n        '/BochilTeam/database/refs/heads/master/games/tekateki.json'\n      );\n      const result = tools.cmd.getRandomElement((await axios.get(apiUrl)).data);\n\n      const game = {\n        coin: 10,\n        timeout: 60000,\n        answer: result.jawaban.toLowerCase(),\n      };\n\n      session.set(ctx.id, true);\n\n      await ctx.reply({\n        text:\n          `${formatter.quote(`Question: ${result.soal}`)}\n` +\n          `${formatter.quote(`Bonus: ${game.coin} Coins`)}\n${formatter.quote(`Time limit: ${tools.msg.convertMsToDuration(game.timeout)}`)}`,\n        footer: config.msg.footer,\n        buttons: [\n          {\n            buttonId: 'hint',\n            buttonText: {\n              displayText: 'Hint',\n            },\n          },\n          {\n            buttonId: 'surrender',\n            buttonText: {\n              displayText: 'Surrender',\n            },\n          },\n        ],\n      });\n\n      const collector = ctx.MessageCollector({\n        time: game.timeout,\n      });\n\n      const playAgain = [\n        {\n          buttonId: ctx.used.prefix + ctx.used.command,\n          buttonText: {\n            displayText: 'Play Again',\n          },\n        },\n      ];\n\n      collector.on('collect', async m => {\n        const participantAnswer = m.content.toLowerCase();\n        const participantId = ctx.getId(m.sender);\n\n        if (participantAnswer === game.answer) {\n          session.delete(ctx.id);\n          collector.stop();\n          await db.add(`user.${participantId}.coin`, game.coin);\n          await db.add(`user.${participantId}.winGame`, 1);\n          await ctx.sendMessage(\n            ctx.id,\n            {\n              text: `${formatter.quote('ðŸ’¯ Correct!')}\n${formatter.quote(`+${game.coin} Coins`)}`,\n              footer: config.msg.footer,\n              buttons: playAgain,\n            },\n            {\n              quoted: m,\n            }\n          );\n        } else if (participantAnswer === 'hint') {\n          const clue = game.answer.replace(/[aiueo]/g, '_');\n          await ctx.sendMessage(\n            ctx.id,\n            {\n              text: formatter.monospace(clue.toUpperCase()),\n            },\n            {\n              quoted: m,\n            }\n          );\n        } else if (participantAnswer === 'surrender') {\n          session.delete(ctx.id);\n          collector.stop();\n          await ctx.sendMessage(\n            ctx.id,\n            {\n              text: `${formatter.quote('ðŸ³ï¸ You surrendered!')}\n${formatter.quote(`The answer is ${tools.msg.ucwords(game.answer)}.`)}`,\n              footer: config.msg.footer,\n              buttons: playAgain,\n            },\n            {\n              quoted: m,\n            }\n          );\n        } else if (didYouMean(participantAnswer, [game.answer]) === game.answer) {\n          await ctx.sendMessage(\n            ctx.id,\n            {\n              text: formatter.quote('ðŸŽ¯ A little more!'),\n            },\n            {\n              quoted: m,\n            }\n          );\n        }\n      });\n\n      collector.on('end', async () => {\n        if (session.has(ctx.id)) {\n          session.delete(ctx.id);\n          await ctx.reply({\n            text: `${formatter.quote('â± Time is up!')}\n${formatter.quote(`The answer is ${tools.msg.ucwords(game.answer)}.`)}`,\n            footer: config.msg.footer,\n            buttons: playAgain,\n          });\n        }\n      });\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error, true);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\games\\akinator.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":6,"column":22,"nodeType":"Identifier","messageId":"undef","endLine":6,"endColumn":29},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":8,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":8,"endColumn":7},{"ruleId":"no-unused-vars","severity":1,"message":"'isPremium' is defined but never used. Allowed unused args must match /^_/u.","line":16,"column":36,"nodeType":"Identifier","messageId":"unusedVar","endLine":16,"endColumn":45,"suggestions":[{"messageId":"removeVar","data":{"varName":"isPremium"},"fix":{"range":[358,369],"text":""},"desc":"Remove unused variable 'isPremium'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'isCreator' is defined but never used. Allowed unused args must match /^_/u.","line":16,"column":47,"nodeType":"Identifier","messageId":"unusedVar","endLine":16,"endColumn":56,"suggestions":[{"messageId":"removeVar","data":{"varName":"isCreator"},"fix":{"range":[369,380],"text":""},"desc":"Remove unused variable 'isCreator'."}]},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'execute'.","line":16,"column":60,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":16,"endColumn":62},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":38,"column":11,"nodeType":"MemberExpression","messageId":"unexpected","endLine":38,"endColumn":22,"suggestions":[{"fix":{"range":[1178,1231],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":55,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":55,"endColumn":20,"suggestions":[{"fix":{"range":[1847,1898],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":65,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":65,"endColumn":20,"suggestions":[{"fix":{"range":[2299,2353],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Akinator Game Command\n * AI guessing game with proper error handling and rate limiting\n */\n\nconst gamesService = require('../../src/services/gamesService');\n\nmodule.exports = {\n  name: 'akinator',\n  description: 'AI guessing game',\n  category: 'Games',\n  usage: '!akinator start',\n  aliases: ['aki'],\n  cooldown: 60,\n\n  execute: async (naze, m, { args, isPremium, isCreator }) => {\n    try {\n      const playerId = m.sender;\n      const action = args[0]?.toLowerCase() || 'start';\n\n      if (action === 'start') {\n        // Check if user already has active akinator game\n        const activeGame = gamesService.getActiveGame(playerId, 'akinator');\n        if (activeGame) {\n          return m.reply('Kamu masih memiliki game akinator yang aktif!\\nSelesaikan dulu ya.');\n        }\n\n        // Check rate limit\n        if (!gamesService.checkRateLimit(playerId, 'akinator')) {\n          return m.reply('Rate limit exceeded. Please wait before starting new game.');\n        }\n\n        // Start new akinator game\n        const gameResult = await gamesService.startAkinator(playerId);\n\n        if (gameResult.success) {\n          await m.reply(gameResult.message);\n          console.log(`Akinator game started for ${playerId}`);\n        } else {\n          await m.reply('Failed to start akinator game. Please try again.');\n        }\n      } else if (action === 'end' || action === 'stop') {\n        // End current game\n        const activeGame = gamesService.getActiveGame(playerId, 'akinator');\n        if (activeGame) {\n          await gamesService.endGame(activeGame.gameId, 'manual');\n          await m.reply('Sukses mengakhiri sesi akinator');\n        } else {\n          await m.reply('Kamu tidak sedang bermain akinator!');\n        }\n      } else {\n        await m.reply('Usage: !akinator start|end');\n      }\n    } catch (error) {\n      console.error('Error in akinator command:', error);\n\n      if (error.message.includes('Rate limit')) {\n        await m.reply('Rate limit exceeded. Please wait before starting new game.');\n      } else if (error.message.includes('Failed to start')) {\n        await m.reply('Server akinator sedang bermasalah. Silakan coba lagi nanti.');\n      } else {\n        await m.reply('Terjadi kesalahan saat menjalankan game. Silakan coba lagi.');\n      }\n\n      console.error('Unexpected error in akinator:', error);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\games\\tebakbom.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":6,"column":22,"nodeType":"Identifier","messageId":"undef","endLine":6,"endColumn":29},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":8,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":8,"endColumn":7},{"ruleId":"no-unused-vars","severity":1,"message":"'args' is defined but never used. Allowed unused args must match /^_/u.","line":16,"column":30,"nodeType":"Identifier","messageId":"unusedVar","endLine":16,"endColumn":34,"suggestions":[{"messageId":"removeVar","data":{"varName":"args"},"fix":{"range":[390,395],"text":""},"desc":"Remove unused variable 'args'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'isPremium' is defined but never used. Allowed unused args must match /^_/u.","line":16,"column":36,"nodeType":"Identifier","messageId":"unusedVar","endLine":16,"endColumn":45,"suggestions":[{"messageId":"removeVar","data":{"varName":"isPremium"},"fix":{"range":[394,405],"text":""},"desc":"Remove unused variable 'isPremium'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'isCreator' is defined but never used. Allowed unused args must match /^_/u.","line":16,"column":47,"nodeType":"Identifier","messageId":"unusedVar","endLine":16,"endColumn":56,"suggestions":[{"messageId":"removeVar","data":{"varName":"isCreator"},"fix":{"range":[405,416],"text":""},"desc":"Remove unused variable 'isCreator'."}]},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'execute'.","line":16,"column":60,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":16,"endColumn":62},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":37,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":37,"endColumn":20,"suggestions":[{"fix":{"range":[1117,1184],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":42,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":42,"endColumn":20,"suggestions":[{"fix":{"range":[1302,1353],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":49,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":49,"endColumn":20,"suggestions":[{"fix":{"range":[1564,1610],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":51,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":51,"endColumn":22,"suggestions":[{"fix":{"range":[1634,1688],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Tebak Bom Game Command\n * Interactive bomb guessing game with proper error handling and rate limiting\n */\n\nconst gamesService = require('../../src/services/gamesService');\n\nmodule.exports = {\n  name: 'tebakbom',\n  description: 'Interactive bomb guessing game',\n  category: 'Games',\n  usage: '!tebakbom',\n  aliases: ['bom', 'tebakkbom'],\n  cooldown: 30,\n\n  execute: async (naze, m, { args, isPremium, isCreator }) => {\n    try {\n      const chatId = m.chat;\n      const playerId = m.sender;\n\n      // Check if user already has active game\n      const activeGame = gamesService.getActiveGame(playerId, 'tebakbom');\n      if (activeGame) {\n        return m.reply('Kamu masih memiliki game tebakbom yang aktif!\\nSelesaikan dulu ya.');\n      }\n\n      // Check rate limit\n      if (!gamesService.checkRateLimit(playerId, 'tebakbom')) {\n        return m.reply('Rate limit exceeded. Please wait before starting new game.');\n      }\n\n      // Start new game\n      const gameResult = await gamesService.startTebakBom(chatId, playerId);\n\n      if (gameResult.success) {\n        await m.reply(gameResult.message);\n        console.log(`Tebak bom game started for ${playerId} in ${chatId}`);\n      } else {\n        await m.reply('Failed to start game. Please try again.');\n      }\n    } catch (error) {\n      console.error('Error in tebakbom command:', error);\n\n      // Send error to user\n      await m.reply('Terjadi kesalahan saat memulai game. Silakan coba lagi.');\n\n      // Log detailed error for debugging\n      if (error.message.includes('Rate limit')) {\n        console.log(`Rate limit hit for ${m.sender}`);\n      } else {\n        console.error('Unexpected error in tebakbom:', error);\n      }\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\group\\add.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":1,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":10,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":10,"endColumn":21}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"module.exports = {\n  name: 'add',\n  category: 'group',\n  permissions: {\n    admin: true,\n    botAdmin: true,\n    group: true,\n    restrict: true,\n  },\n  code: async ctx => {\n    const { formatter, tools } = ctx.bot.context;\n    const input = ctx.args.join(' ') || null;\n\n    if (!input)\n      return await ctx.reply(\n        `${formatter.quote(tools.msg.generateInstruction(['send'], ['text']))}\\n${formatter.quote(\n          tools.msg.generateCmdExample(ctx.used, ctx.getId(ctx.sender.jid))\n        )}`\n      );\n\n    const accountJid = `${input.replace(/[^\\d]/g, '')}@s.whatsapp.net`;\n\n    const isOnWhatsApp = await ctx.core.onWhatsApp(accountJid);\n    if (isOnWhatsApp.length === 0)\n      return await ctx.reply(formatter.quote('âŽ Akun tidak ada di WhatsApp!'));\n\n    try {\n      await ctx.group().add(accountJid);\n\n      await ctx.reply(formatter.quote('âœ… Successfully added!'));\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\group\\approve.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":1,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":9,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":9,"endColumn":21},{"ruleId":"no-template-curly-in-string","severity":2,"message":"Unexpected template string expression.","line":18,"column":45,"nodeType":"Literal","messageId":"unexpectedTemplateExpression","endLine":18,"endColumn":90}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"module.exports = {\n  name: 'approve',\n  category: 'group',\n  permissions: {\n    admin: true,\n    botAdmin: true,\n    group: true,\n  },\n  code: async ctx => {\n    const { formatter, tools } = ctx.bot.context;\n    const input = ctx.args.join(' ') || null;\n\n    if (!input)\n      return await ctx.reply(\n        `${formatter.quote(tools.msg.generateInstruction(['send'], ['text']))}\\n` +\n          `${formatter.quote(tools.msg.generateCmdExample(ctx.used, ctx.getId(ctx.sender.jid)))}\\n${formatter.quote(\n            tools.msg.generateNotes([\n              `Ketik ${formatter.inlineCode('`${ctx.used.prefix + ctx.used.command} all`')} untuk menyetujui semua anggota yang tertunda.`,\n            ])\n          )}`\n      );\n\n    const pendings = await ctx.group().pendingMembers();\n\n    if (input.toLowerCase() === 'all') {\n      if (pendings.length === 0)\n        return await ctx.reply(formatter.quote('âœ… Tidak ada anggota yang menunggu persetujuan.'));\n\n      try {\n        const allJids = pendings.map(pending => pending.jid);\n        await ctx.group().approvePendingMembers(allJids);\n\n        return await ctx.reply(\n          formatter.quote(`âœ… Berhasil menyetujui semua anggota (${allJids.length}).`)\n        );\n      } catch (error) {\n        return await tools.cmd.handleError(ctx, error);\n      }\n    }\n\n    const accountJid = `${input.replace(/[^\\d]/g, '')}@s.whatsapp.net`;\n\n    const isPending = pendings.some(pending => pending.jid === accountJid);\n    if (!isPending)\n      return await ctx.reply(\n        formatter.quote('âŽ Akun tidak ditemukan di daftar anggota yang menunggu persetujuan.')\n      );\n\n    try {\n      await ctx.group().approvePendingMembers([accountJid]);\n\n      await ctx.reply(formatter.quote('âœ… Berhasil disetujui!'));\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\group\\demote.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":1,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":9,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":9,"endColumn":21}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"module.exports = {\n  name: 'demote',\n  category: 'group',\n  permissions: {\n    admin: true,\n    botAdmin: true,\n    group: true,\n  },\n  code: async ctx => {\n    const { formatter, tools } = ctx.bot.context;\n    const accountJid = ctx.quoted?.senderJid || (await ctx.getMentioned())[0] || null;\n\n    if (!accountJid)\n      return await ctx.reply({\n        text:\n          `${formatter.quote(tools.msg.generateInstruction(['send'], ['text']))}\\n` +\n          `${formatter.quote(tools.msg.generateCmdExample(ctx.used, `@${ctx.getId(ctx.sender.jid)}`))}\\n${formatter.quote(\n            tools.msg.generateNotes([\n              'Balas atau kutip pesan untuk menjadikan pengirim sebagai akun target.',\n            ])\n          )}`,\n        mentions: [ctx.sender.jid],\n      });\n\n    if (!(await ctx.group().isAdmin(accountJid)))\n      return await ctx.reply(formatter.quote('âŽ Dia adalah anggota!'));\n\n    try {\n      await ctx.group().demote(accountJid);\n\n      await ctx.reply(formatter.quote('âœ… Berhasil diturunkan dari admin menjadi anggota!'));\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\group\\group.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":1,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":9,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":9,"endColumn":21}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"module.exports = {\n  name: 'group',\n  category: 'group',\n  permissions: {\n    admin: true,\n    botAdmin: true,\n    group: true,\n  },\n  code: async ctx => {\n    const { formatter, tools, config } = ctx.bot.context;\n    const input = ctx.args.join(' ') || null;\n\n    if (!input)\n      return await ctx.reply(\n        `${formatter.quote(tools.msg.generateInstruction(['send'], ['text']))}\\n` +\n          `${formatter.quote(tools.msg.generateCmdExample(ctx.used, 'open'))}\\n${formatter.quote(\n            tools.msg.generateNotes([\n              `Ketik ${formatter.inlineCode(`${ctx.used.prefix + ctx.used.command} list`)} untuk melihat daftar.`,\n            ])\n          )}`\n      );\n\n    if (input.toLowerCase() === 'list') {\n      const listText = await tools.list.get('group');\n      return await ctx.reply({\n        text: listText,\n        footer: config.msg.footer,\n      });\n    }\n\n    try {\n      switch (input.toLowerCase()) {\n        case 'open':\n        case 'close':\n        case 'lock':\n        case 'unlock':\n          await ctx.group()[input.toLowerCase()]();\n          break;\n        case 'approve':\n          await ctx.group().joinApproval('on');\n          break;\n        case 'disapprove':\n          await ctx.group().joinApproval('off');\n          break;\n        case 'invite':\n          await ctx.group().membersCanAddMemberMode('on');\n          break;\n        case 'restrict':\n          await ctx.group().membersCanAddMemberMode('off');\n          break;\n        default:\n          return await ctx.reply(formatter.quote(`âŽ Setelan \"${input}\" tidak valid!`));\n      }\n\n      await ctx.reply(formatter.quote('âœ… Berhasil mengubah setelan grup!'));\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\group\\hidetag.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":1,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":7}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"module.exports = {\n  name: 'hidetag',\n  aliases: ['ht'],\n  category: 'group',\n  permissions: {\n    admin: true,\n    group: true,\n  },\n  code: async ctx => {\n    const { formatter, tools } = ctx.bot.context;\n    const input = ctx.args.join(' ') || ctx.quoted?.content || formatter.quote('ðŸ‘‹ Halo, Dunia!');\n\n    try {\n      const members = await ctx.group().members();\n      const mentions = members.map(member => member.jid);\n\n      await ctx.reply({\n        text: input,\n        mentions,\n      });\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\group\\intro.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":1,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":7}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"module.exports = {\n  name: 'intro',\n  category: 'group',\n  permissions: {\n    botAdmin: true,\n    group: true,\n  },\n  code: async ctx => {\n    const { formatter, tools, database: db } = ctx.bot.context;\n    try {\n      const groupId = ctx.getId(ctx.id);\n      const introText =\n        (await db.get(`group.${groupId}.text.intro`)) ||\n        formatter.quote('âŽ Grup ini tidak memiliki intro.');\n\n      await ctx.reply(introText);\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\group\\kick.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":1,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":11,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":11,"endColumn":21}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"module.exports = {\n  name: 'kick',\n  aliases: ['dor'],\n  category: 'group',\n  permissions: {\n    admin: true,\n    botAdmin: true,\n    group: true,\n    restrict: true,\n  },\n  code: async ctx => {\n    const { formatter, tools } = ctx.bot.context;\n    const accountJid = ctx.quoted?.senderJid || (await ctx.getMentioned())[0] || null;\n\n    if (!accountJid)\n      return await ctx.reply({\n        text:\n          `${formatter.quote(tools.msg.generateInstruction(['send'], ['text']))}\\n` +\n          `${formatter.quote(tools.msg.generateCmdExample(ctx.used, `@${ctx.getId(ctx.sender.jid)}`))}\\n${formatter.quote(\n            tools.msg.generateNotes([\n              'Balas atau kutip pesan untuk menjadikan pengirim sebagai akun target.',\n            ])\n          )}`,\n        mentions: [ctx.sender.jid],\n      });\n\n    if (await ctx.group().isOwner(accountJid))\n      return await ctx.reply(formatter.quote('âŽ Dia adalah owner grup!'));\n\n    try {\n      await ctx.group().kick(accountJid);\n\n      await ctx.reply(formatter.quote('âœ… Berhasil dikeluarkan!'));\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\group\\link.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":1,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":7}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"module.exports = {\n  name: 'link',\n  aliases: ['gclink', 'grouplink'],\n  category: 'group',\n  permissions: {\n    botAdmin: true,\n    group: true,\n  },\n  code: async ctx => {\n    const { formatter, tools } = ctx.bot.context;\n    try {\n      const code = await ctx.group().inviteCode();\n\n      await ctx.reply(formatter.quote(`https://chat.whatsapp.com/${code}`));\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\group\\listpendingmembers.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":1,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":10,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":10,"endColumn":21}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"module.exports = {\n  name: 'listpendingmembers',\n  aliases: ['pendingmembers'],\n  category: 'group',\n  permissions: {\n    admin: true,\n    botAdmin: true,\n    group: true,\n  },\n  code: async ctx => {\n    const { formatter, tools, config } = ctx.bot.context;\n    const pending = await ctx.group().pendingMembers();\n\n    if (!pending || pending.length === 0)\n      return await ctx.reply(formatter.quote('âœ… Tidak ada anggota yang menunggu persetujuan.'));\n\n    try {\n      const resultText = pending\n        .map((member, index) => {\n          const id = ctx.getId(member.jid);\n          return formatter.quote(`${index + 1}. ${id}`);\n        })\n        .join('\\n');\n\n      await ctx.reply({\n        text: resultText,\n        footer: config.msg.footer,\n      });\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\group\\mute.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":1,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":9,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":9,"endColumn":21}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"module.exports = {\n  name: 'mute',\n  category: 'group',\n  permissions: {\n    admin: true,\n    botAdmin: true,\n    group: true,\n  },\n  code: async ctx => {\n    const { formatter, tools, config, database: db } = ctx.bot.context;\n    const groupId = ctx.getId(ctx.id);\n\n    if (ctx.args[0]?.toLowerCase() === 'bot') {\n      await db.set(`group.${groupId}.mutebot`, true);\n      return await ctx.reply(formatter.quote('âœ… Berhasil me-mute grup ini dari bot!'));\n    }\n\n    const accountJid = ctx.quoted?.senderJid || (await ctx.getMentioned())[0] || null;\n    const accountId = ctx.getId(accountJid);\n\n    if (!accountJid)\n      return await ctx.reply({\n        text:\n          `${formatter.quote(tools.msg.generateInstruction(['send'], ['text']))}\\n` +\n          `${formatter.quote(tools.msg.generateCmdExample(ctx.used, `@${ctx.getId(ctx.sender.jid)}`))}\\n${formatter.quote(\n            tools.msg.generateNotes([\n              'Balas atau kutip pesan untuk menjadikan pengirim sebagai akun target.',\n              `Ketik ${formatter.inlineCode(`${ctx.used.prefix + ctx.used.command} bot`)} untuk me-mute bot.`,\n            ])\n          )}`,\n        mentions: [ctx.sender.jid],\n      });\n\n    if (accountId === config.bot.id)\n      return await ctx.reply(\n        formatter.quote(\n          `âŽ Ketik ${formatter.inlineCode(`${ctx.used.prefix + ctx.used.command} bot`)} untuk me-mute bot.`\n        )\n      );\n    if (await ctx.group().isOwner(accountJid))\n      return await ctx.reply(formatter.quote('âŽ Dia adalah owner grup!'));\n\n    try {\n      const muteList = (await db.get(`group.${groupId}.mute`)) || [];\n      if (!muteList.includes(accountId)) muteList.push(accountId);\n      await db.set(`group.${groupId}.mute`, muteList);\n\n      await ctx.reply(formatter.quote('âœ… Berhasil me-mute pengguna itu dari grup ini!'));\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\group\\promote.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":1,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":9,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":9,"endColumn":21}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"module.exports = {\n  name: 'promote',\n  category: 'group',\n  permissions: {\n    admin: true,\n    botAdmin: true,\n    group: true,\n  },\n  code: async ctx => {\n    const { formatter, tools } = ctx.bot.context;\n    const accountJid = (await ctx.getMentioned())[0] || ctx.quoted?.senderJid || null;\n\n    if (!accountJid)\n      return await ctx.reply({\n        text:\n          `${formatter.quote(tools.msg.generateInstruction(['send'], ['text']))}\\n` +\n          `${formatter.quote(tools.msg.generateCmdExample(ctx.used, `@${ctx.getId(ctx.sender.jid)}`))}\\n${formatter.quote(\n            tools.msg.generateNotes([\n              'Balas atau kutip pesan untuk menjadikan pengirim sebagai akun target.',\n            ])\n          )}`,\n        mentions: [ctx.sender.jid],\n      });\n\n    if (await ctx.group().isOwner(accountJid))\n      return await ctx.reply(formatter.quote('âŽ Dia adalah owner grup!'));\n\n    try {\n      await ctx.group().promote(accountJid);\n\n      await ctx.reply(formatter.quote('âœ… Berhasil ditingkatkan dari anggota menjadi admin!'));\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\group\\reject.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":1,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":9,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":9,"endColumn":21}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"module.exports = {\n  name: 'reject',\n  category: 'group',\n  permissions: {\n    admin: true,\n    botAdmin: true,\n    group: true,\n  },\n  code: async ctx => {\n    const { formatter, tools } = ctx.bot.context;\n    const input = ctx.args.join(' ') || null;\n\n    if (!input)\n      return await ctx.reply(\n        `${formatter.quote(tools.msg.generateInstruction(['send'], ['text']))}\\n` +\n          `${formatter.quote(tools.msg.generateCmdExample(ctx.used, ctx.getId(ctx.sender.jid)))}\\n${formatter.quote(\n            tools.msg.generateNotes([\n              `Ketik ${formatter.inlineCode(`${ctx.used.prefix + ctx.used.command} all`)} untuk menolak semua anggota yang tertunda.`,\n            ])\n          )}`\n      );\n\n    const pendings = await ctx.group().pendingMembers();\n\n    if (input.toLowerCase() === 'all') {\n      if (pendings.length === 0)\n        return await ctx.reply(formatter.quote('âœ… Tidak ada anggota yang menunggu persetujuan.'));\n\n      try {\n        const allJids = pendings.map(pending => pending.jid);\n        await ctx.group().rejectPendingMembers(allJids);\n\n        return await ctx.reply(\n          formatter.quote(`âœ… Berhasil menolak semua anggota (${allJids.length}).`)\n        );\n      } catch (error) {\n        return await tools.cmd.handleError(ctx, error);\n      }\n    }\n\n    const accountJid = `${input.replace(/[^\\\\d]/g, '')}@s.whatsapp.net`;\n\n    const isPending = pendings.some(pending => pending.jid === accountJid);\n    if (!isPending)\n      return await ctx.reply(\n        formatter.quote('âŽ Akun tidak ditemukan di daftar anggota yang menunggu persetujuan.')\n      );\n\n    try {\n      await ctx.group().rejectPendingMembers([accountJid]);\n\n      await ctx.reply(formatter.quote('âœ… Berhasil ditolak!'));\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\group\\setdesc.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":1,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":9,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":9,"endColumn":21}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"module.exports = {\n  name: 'setdesc',\n  category: 'group',\n  permissions: {\n    admin: true,\n    botAdmin: true,\n    group: true,\n  },\n  code: async ctx => {\n    const { formatter, tools } = ctx.bot.context;\n    const input = ctx.args.join(' ') || ctx.quoted?.content || null;\n\n    if (!input)\n      return await ctx.reply(\n        `${formatter.quote(tools.msg.generateInstruction(['send'], ['text']))}\\n${formatter.quote(\n          tools.msg.generateCmdExample(ctx.used, 'by itsreimau')\n        )}`\n      );\n\n    try {\n      await ctx.group().updateDescription(input);\n\n      await ctx.reply(formatter.quote('âœ… Berhasil mengubah deskripsi grup!'));\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\group\\setmaxwarnings.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":1,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":9,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":9,"endColumn":21}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"module.exports = {\n  name: 'setmaxwarnings',\n  category: 'group',\n  permissions: {\n    admin: true,\n    botAdmin: true,\n    group: true,\n  },\n  code: async ctx => {\n    const { formatter, tools, database: db } = ctx.bot.context;\n    const input = parseInt(ctx.args[0], 10) || null;\n\n    if (!input)\n      return await ctx.reply(\n        `${formatter.quote(tools.msg.generateInstruction(['send'], ['text']))}\\n${formatter.quote(\n          tools.msg.generateCmdExample(ctx.used, '8')\n        )}`\n      );\n\n    try {\n      const groupId = ctx.getId(ctx.id);\n      await db.set(`group.${groupId}.maxwarnings`, input);\n\n      await ctx.reply(formatter.quote(`âœ… Berhasil mengubah max warnings!`));\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\group\\setname.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":1,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":9,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":9,"endColumn":21}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"module.exports = {\n  name: 'setname',\n  category: 'group',\n  permissions: {\n    admin: true,\n    botAdmin: true,\n    group: true,\n  },\n  code: async ctx => {\n    const { formatter, tools } = ctx.bot.context;\n    const input = ctx.args.join(' ') || null;\n\n    if (!input)\n      return await ctx.reply(\n        `${formatter.quote(tools.msg.generateInstruction(['send'], ['text']))}\\n${formatter.quote(\n          tools.msg.generateCmdExample(ctx.used, 'whatsdex')\n        )}`\n      );\n\n    try {\n      await ctx.group().updateSubject(input);\n\n      await ctx.reply(formatter.quote('âœ… Successfully changed the group name!'));\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\group\\setoption.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":1,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":10,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":10,"endColumn":21}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"module.exports = {\n  name: 'setoption',\n  aliases: ['setopt'],\n  category: 'group',\n  permissions: {\n    admin: true,\n    botAdmin: true,\n    group: true,\n  },\n  code: async ctx => {\n    const { formatter, tools, config, database: db } = ctx.bot.context;\n    const input = ctx.args.join(' ') || null;\n\n    if (!input)\n      return await ctx.reply(\n        `${formatter.quote(tools.msg.generateInstruction(['send'], ['text']))}\\n` +\n          `${formatter.quote(tools.msg.generateCmdExample(ctx.used, 'antilink'))}\\n${formatter.quote(\n            tools.msg.generateNotes([\n              `Ketik ${formatter.inlineCode(`${ctx.used.prefix + ctx.used.command} list`)} untuk melihat daftar.`,\n              `Ketik ${formatter.inlineCode(`${ctx.used.prefix + ctx.used.command} status`)} untuk melihat status.`,\n            ])\n          )}`\n      );\n\n    if (input.toLowerCase() === 'list') {\n      const listText = await tools.list.get('setoption');\n      return await ctx.reply({\n        text: listText,\n        footer: config.msg.footer,\n      });\n    }\n\n    if (input.toLowerCase() === 'status') {\n      const groupId = ctx.getId(ctx.id);\n      const groupOption = (await db.get(`group.${groupId}.option`)) || {};\n\n      return await ctx.reply({\n        text:\n          `${formatter.quote(`Antiaudio: ${groupOption.antiaudio ? 'Aktif' : 'Nonaktif'}`)}\\n` +\n          `${formatter.quote(`Antidocument: ${groupOption.antidocument ? 'Aktif' : 'Nonaktif'}`)}\\n` +\n          `${formatter.quote(`Antigif: ${groupOption.antigif ? 'Aktif' : 'Nonaktif'}`)}\\n` +\n          `${formatter.quote(`Antiimage: ${groupOption.antiimage ? 'Aktif' : 'Nonaktif'}`)}\\n` +\n          `${formatter.quote(`Antilink: ${groupOption.antilink ? 'Aktif' : 'Nonaktif'}`)}\\n` +\n          `${formatter.quote(`Antinsfw: ${groupOption.antinsfw ? 'Aktif' : 'Nonaktif'}`)}\\n` +\n          `${formatter.quote(`Antispam: ${groupOption.antispam ? 'Aktif' : 'Nonaktif'}`)}\\n` +\n          `${formatter.quote(`Antisticker: ${groupOption.antisticker ? 'Aktif' : 'Nonaktif'}`)}\\n` +\n          `${formatter.quote(`Antitagsw: ${groupOption.antitagsw ? 'Aktif' : 'Nonaktif'}`)}\\n` +\n          `${formatter.quote(`Antitoxic: ${groupOption.antitoxic ? 'Aktif' : 'Nonaktif'}`)}\\n` +\n          `${formatter.quote(`Antivideo: ${groupOption.antivideo ? 'Aktif' : 'Nonaktif'}`)}\\n` +\n          `${formatter.quote(`Autokick: ${groupOption.autokick ? 'Aktif' : 'Nonaktif'}`)}\\n` +\n          `${formatter.quote(`Gamerestrict: ${groupOption.gamerestrict ? 'Aktif' : 'Nonaktif'}`)}\\n${formatter.quote(\n            `Welcome: ${groupOption.welcome ? 'Aktif' : 'Nonaktif'}`\n          )}`,\n        footer: config.msg.footer,\n      });\n    }\n\n    try {\n      const groupId = ctx.getId(ctx.id);\n      let setKey;\n\n      switch (input.toLowerCase()) {\n        case 'antiaudio':\n        case 'antidocument':\n        case 'antigif':\n        case 'antiimage':\n        case 'antilink':\n        case 'antinsfw':\n        case 'antispam':\n        case 'antisticker':\n        case 'antitagsw':\n        case 'antitoxic':\n        case 'antivideo':\n        case 'autokick':\n        case 'gamerestrict':\n        case 'welcome':\n          setKey = `group.${groupId}.option.${input.toLowerCase()}`;\n          break;\n        default:\n          return await ctx.reply(\n            formatter.quote(`âŽ Opsi ${formatter.inlineCode(input)} tidak valid!`)\n          );\n      }\n\n      const currentStatus = await db.get(setKey);\n      const newStatus = !currentStatus;\n\n      await db.set(setKey, newStatus);\n      const statusText = newStatus ? 'diaktifkan' : 'dinonaktifkan';\n      await ctx.reply(\n        formatter.quote(`âœ… Opsi ${formatter.inlineCode(input)} berhasil ${statusText}!`)\n      );\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\group\\setpp.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":1,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":10,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":10,"endColumn":21}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"module.exports = {\n  name: 'setpp',\n  aliases: ['seticon'],\n  category: 'group',\n  permissions: {\n    admin: true,\n    botAdmin: true,\n    group: true,\n  },\n  code: async ctx => {\n    const { formatter, tools } = ctx.bot.context;\n    const [checkMedia, checkQuotedMedia] = await Promise.all([\n      tools.cmd.checkMedia(ctx.msg.contentType, 'image'),\n      tools.cmd.checkQuotedMedia(ctx.quoted?.contentType, 'image'),\n    ]);\n\n    if (!checkMedia && !checkQuotedMedia)\n      return await ctx.reply(\n        formatter.quote(tools.msg.generateInstruction(['send', 'reply'], 'image'))\n      );\n\n    try {\n      const buffer = (await ctx.msg.media.toBuffer()) || (await ctx.quoted?.media.toBuffer());\n      await ctx.core.updateProfilePicture(ctx.id, buffer);\n\n      await ctx.reply(formatter.quote('âœ… Berhasil mengubah gambar profil grup!'));\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\group\\settext.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":1,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":10,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":10,"endColumn":21}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"module.exports = {\n  name: 'settext',\n  aliases: ['settxt'],\n  category: 'group',\n  permissions: {\n    admin: true,\n    botAdmin: true,\n    group: true,\n  },\n  code: async ctx => {\n    const { formatter, tools, config, database: db } = ctx.bot.context;\n    const key = ctx.args[0] || null;\n    const text = ctx.args.slice(1).join(' ') || ctx.quoted?.content || null;\n\n    if (key?.toLowerCase() === 'list') {\n      const listText = await tools.list.get('settext');\n      return await ctx.reply({\n        text: listText,\n        footer: config.msg.footer,\n      });\n    }\n\n    if (!key || !text)\n      return await ctx.reply(\n        `${formatter.quote(tools.msg.generateInstruction(['send'], ['text']))}\\n` +\n          `${formatter.quote(tools.msg.generateCmdExample(ctx.used, 'welcome Selamat datang di grup!'))}\\n${formatter.quote(\n            tools.msg.generateNotes([\n              `Ketik ${formatter.inlineCode(`${ctx.used.prefix + ctx.used.command} list`)} untuk melihat daftar.`,\n              'Balas atau quote pesan untuk menjadikan teks sebagai input target, jika teks memerlukan baris baru.',\n              `Gunakan ${formatter.inlineCode('delete')} sebagai teks untuk menghapus teks yang disimpan sebelumnya.`,\n            ])\n          )}`\n      );\n\n    try {\n      const groupId = ctx.getId(ctx.id);\n      let setKey;\n\n      switch (key.toLowerCase()) {\n        case 'goodbye':\n        case 'intro':\n        case 'welcome':\n          setKey = `group.${groupId}.text.${key.toLowerCase()}`;\n          break;\n        default:\n          return await ctx.reply(\n            formatter.quote(`âŽ Teks ${formatter.inlineCode(key)} tidak valid!`)\n          );\n      }\n\n      if (text.toLowerCase() === 'delete') {\n        await db.delete(setKey);\n        return await ctx.reply(\n          formatter.quote(`ðŸ—‘ï¸ Pesan untuk teks ${formatter.inlineCode(key)} berhasil dihapus!`)\n        );\n      }\n\n      await db.set(setKey, text);\n      await ctx.reply(\n        formatter.quote(`âœ… Pesan untuk teks ${formatter.inlineCode(key)} berhasil disimpan!`)\n      );\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\group\\simulate.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":27,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":34},{"ruleId":"import-x/extensions","severity":2,"message":"Unexpected use of file extension \"js\" for \"../../events/handler.js\"","line":1,"column":35,"nodeType":"Literal","messageId":"unexpected","endLine":1,"endColumn":60,"suggestions":[{"fix":{"range":[34,59],"text":"'../../events/handler'"},"messageId":"removeUnexpected","data":{"extension":"js","importPath":"../../events/handler.js","fixedImportPath":"../../events/handler"},"desc":"Remove unexpected \"js\" file extension from \"../../events/handler.js\" into \"../../events/handler\""}]},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":3,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":3,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":10,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":10,"endColumn":21}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const { handleWelcome } = require('../../events/handler.js');\n\nmodule.exports = {\n  name: 'simulate',\n  category: 'group',\n  permissions: {\n    botAdmin: true,\n    group: true,\n  },\n  code: async ctx => {\n    const { formatter, tools } = ctx.bot.context;\n    const input = ctx.args.join(' ') || null;\n\n    if (!input)\n      return await ctx.reply(\n        `${formatter.quote(tools.msg.generateInstruction(['send'], ['text']))}\\n` +\n          `${formatter.quote(tools.msg.generateCmdExample(ctx.used, 'join'))}\\n${formatter.quote(\n            tools.msg.generateNotes([\n              `Selain ${formatter.inlineCode('join')}, gunakan ${formatter.inlineCode('leave')} untuk mensimulasikan keluar dari grup.`,\n            ])\n          )}`\n      );\n\n    try {\n      const m = {\n        id: ctx.id,\n        participants: [ctx.sender.jid],\n      };\n\n      switch (input.toLowerCase()) {\n        case 'j':\n        case 'join':\n          await handleWelcome(ctx, m, 'add', true);\n          break;\n        case 'l':\n        case 'leave':\n          await handleWelcome(ctx, m, 'remove', true);\n          break;\n        default:\n          await ctx.reply(\n            formatter.quote(`âŽ Simulasi ${formatter.inlineCode(input)} tidak valid!`)\n          );\n      }\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\group\\tagall.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":1,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":7},{"ruleId":"no-useless-concat","severity":2,"message":"Unexpected string concatenation of literals.","line":24,"column":28,"nodeType":"BinaryExpression","messageId":"unexpectedConcat","endLine":24,"endColumn":29}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"module.exports = {\n  name: 'tagall',\n  category: 'group',\n  permissions: {\n    admin: true,\n    group: true,\n  },\n  code: async ctx => {\n    const { formatter, tools, config } = ctx.bot.context;\n    const input = ctx.args.join(' ') || ctx.quoted?.content || formatter.quote('ðŸ‘‹ Halo, Dunia!');\n\n    try {\n      const members = await ctx.group().members();\n      const mentions = members.map(member => {\n        const serialized = ctx.getId(member.jid);\n        return {\n          tag: `@${serialized}`,\n          mention: member.id,\n        };\n      });\n\n      const resultText = mentions.map(mention => mention.tag).join(' ');\n      await ctx.reply({\n        text: `${input}\\n` + `${config.msg.readmore}Â· Â· â”€ Â·âœ¶Â· â”€ Â· Â·\\n${resultText}`,\n        mentions: mentions.map(mention => mention.mention),\n      });\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\group\\tagme.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":1,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":7}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"module.exports = {\n  name: 'tagme',\n  category: 'group',\n  permissions: {\n    group: true,\n  },\n  code: async ctx => {\n    await ctx.reply({\n      text: `@${ctx.getId(ctx.sender.jid)}`,\n      mentions: [ctx.sender.jid],\n    });\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\group\\unmute.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":1,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":9,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":9,"endColumn":21}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"module.exports = {\n  name: 'unmute',\n  category: 'group',\n  permissions: {\n    admin: true,\n    botAdmin: true,\n    group: true,\n  },\n  code: async ctx => {\n    const { formatter, tools, config, database: db } = ctx.bot.context;\n    const groupId = ctx.getId(ctx.id);\n\n    if (ctx.args[0]?.toLowerCase() === 'bot') {\n      await db.set(`group.${groupId}.mutebot`, false);\n      return await ctx.reply(formatter.quote('âœ… Berhasil me-unmute grup ini dari bot!'));\n    }\n\n    const accountJid = ctx.quoted?.senderJid || (await ctx.getMentioned())[0] || null;\n    const accountId = ctx.getId(accountJid);\n\n    if (!accountJid)\n      return await ctx.reply({\n        text:\n          `${formatter.quote(tools.msg.generateInstruction(['send'], ['text']))}\\n` +\n          `${formatter.quote(tools.msg.generateCmdExample(ctx.used, `@${ctx.getId(ctx.sender.jid)}`))}\\n${formatter.quote(\n            tools.msg.generateNotes([\n              'Balas atau kutip pesan untuk menjadikan pengirim sebagai akun target.',\n              `Ketik ${formatter.inlineCode(`${ctx.used.prefix + ctx.used.command} bot`)} untuk me-unmute bot.`,\n            ])\n          )}`,\n        mentions: [ctx.sender.jid],\n      });\n\n    if (accountId === config.bot.id)\n      return await ctx.reply(\n        formatter.quote(\n          `âŽ Ketik ${formatter.inlineCode(`${ctx.used.prefix + ctx.used.command} bot`)} untuk me-unmute bot.`\n        )\n      );\n    if (await ctx.group().isOwner(accountJid))\n      return await ctx.reply(formatter.quote('âŽ Dia adalah owner grup!'));\n\n    try {\n      let muteList = (await db.get(`group.${groupId}.mute`)) || [];\n      muteList = muteList.filter(mute => mute !== accountId);\n      await db.set(`group.${groupId}.mute`, muteList);\n\n      await ctx.reply(formatter.quote('âœ… Berhasil me-unmute pengguna itu dari grup ini!'));\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\group\\unwarning.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":1,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":10,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":10,"endColumn":21}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"module.exports = {\n  name: 'unwarning',\n  category: 'group',\n  permissions: {\n    admin: true,\n    botAdmin: true,\n    group: true,\n    restrict: true,\n  },\n  code: async ctx => {\n    const { formatter, tools, config, database: db } = ctx.bot.context;\n    const accountJid = ctx.quoted?.senderJid || (await ctx.getMentioned())[0] || null;\n    const accountId = ctx.getId(accountJid);\n\n    if (!accountJid)\n      return await ctx.reply({\n        text:\n          `${formatter.quote(tools.msg.generateInstruction(['send'], ['text']))}\\n` +\n          `${formatter.quote(tools.msg.generateCmdExample(ctx.used, `@${ctx.getId(ctx.sender.jid)}`))}\\n${formatter.quote(\n            tools.msg.generateNotes([\n              'Balas atau kutip pesan untuk menjadikan pengirim sebagai akun target.',\n            ])\n          )}`,\n        mentions: [ctx.sender.jid],\n      });\n\n    if (accountId === config.bot.id)\n      return await ctx.reply(formatter.quote(`âŽ Tidak bisa mengubah warning bot!`));\n    if (await ctx.group().isOwner(accountJid))\n      return await ctx.reply(formatter.quote('âŽ Tidak bisa mengubah warning admin grup!'));\n\n    try {\n      const groupId = ctx.getId(ctx.id);\n      const groupDb = (await db.get(`group.${groupId}`)) || {};\n      const warnings = groupDb?.warnings || [];\n\n      const userWarning = warnings.find(warning => warning.userId === accountId);\n      const currentWarnings = userWarning ? userWarning.count : 0;\n\n      if (currentWarnings <= 0)\n        return await ctx.reply(formatter.quote('âœ… Pengguna itu tidak memiliki warning.'));\n\n      const newWarning = currentWarnings - 1;\n\n      if (userWarning && newWarning <= 0) {\n        await db.set(\n          `group.${groupId}.warnings`,\n          warnings.filter(warning => warning.userId !== accountId)\n        );\n      } else {\n        userWarning.count = newWarning;\n        await db.set(`group.${groupId}.warnings`, warnings);\n      }\n\n      await ctx.reply(\n        formatter.quote(\n          `âœ… Berhasil mengurangi warning pengguna itu menjadi ${newWarning}/${groupDb?.maxwarnings || 3}.`\n        )\n      );\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\group\\warning.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":1,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":10,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":10,"endColumn":21}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"module.exports = {\n  name: 'warning',\n  category: 'group',\n  permissions: {\n    admin: true,\n    botAdmin: true,\n    group: true,\n    restrict: true,\n  },\n  code: async ctx => {\n    const { formatter, tools, config, database: db } = ctx.bot.context;\n    const accountJid = ctx.quoted?.senderJid || (await ctx.getMentioned())[0] || null;\n    const accountId = ctx.getId(accountJid);\n\n    if (!accountJid)\n      return await ctx.reply({\n        text:\n          `${formatter.quote(tools.msg.generateInstruction(['send'], ['text']))}\\n` +\n          `${formatter.quote(tools.msg.generateCmdExample(ctx.used, `@${ctx.getId(ctx.sender.jid)}`))}\\n${formatter.quote(\n            tools.msg.generateNotes([\n              'Balas atau kutip pesan untuk menjadikan pengirim sebagai akun target.',\n            ])\n          )}`,\n        mentions: [ctx.sender.jid],\n      });\n\n    if (accountId === config.bot.id)\n      return await ctx.reply(formatter.quote(`âŽ Tidak bisa memberikan warning ke bot!`));\n    if (await ctx.group().isOwner(accountJid))\n      return await ctx.reply(formatter.quote('âŽ Tidak bisa memberikan warning ke admin grup!'));\n\n    try {\n      const groupId = ctx.getId(ctx.id);\n      const groupDb = (await db.get(`group.${groupId}`)) || {};\n      const warnings = groupDb?.warnings || [];\n\n      const userWarning = warnings.find(warning => warning.userId === accountId);\n      const currentWarnings = userWarning ? userWarning.count : 0;\n      const newWarning = currentWarnings + 1;\n\n      if (userWarning) {\n        userWarning.count = newWarning;\n      } else {\n        warnings.push({\n          userId: accountId,\n          count: newWarning,\n        });\n      }\n\n      await db.set(`group.${groupId}.warnings`, warnings);\n      await ctx.reply(\n        formatter.quote(\n          `âœ… Berhasil menambahkan warning pengguna itu menjadi ${newWarning}/${groupDb?.maxwarnings || 3}.`\n        )\n      );\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\information\\about.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":1,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":7},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":16,"column":42,"nodeType":"Identifier","messageId":"undef","endLine":16,"endColumn":49}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"module.exports = {\n  name: 'about',\n  aliases: ['bot', 'infobot'],\n  category: 'information',\n  code: async ctx => {\n    const { formatter, tools, config, database: db } = ctx.bot.context;\n    try {\n      const botDb = (await db.get('bot')) || {};\n\n      await ctx.reply({\n        text:\n          `${formatter.quote(`ðŸ‘‹ Hello! I am a WhatsApp bot named ${config.bot.name}, owned by ${config.owner.name}. I can perform many commands, such as creating stickers, using AI for certain tasks, and several other useful commands. I am here to entertain and please you!`)}\n` + // Can be changed as desired\n          `${formatter.quote('Â· Â· â”€ Â·âœ¶Â· â”€ Â· Â·')}\\n` +\n          `${formatter.quote(`Bot Name: ${config.bot.name}`)}\\n` +\n          `${formatter.quote(`Version: ${require('../../package.json').version}`)}\\n` +\n          `${formatter.quote(`Owner: ${config.owner.name}`)}\\n` +\n          `${formatter.quote(`Mode: ${tools.msg.ucwords(botDb?.mode || 'public')}`)}\\n` +\n          `${formatter.quote(`Bot Uptime: ${config.bot.uptime}`)}\\n` +\n          `${formatter.quote(`Database: ${config.bot.dbSize} (Simpl.DB - JSON)`)}\\n${formatter.quote(\n            'Library: @whiskeysockets/baileys'\n          )}`,\n        footer: config.msg.footer,\n      });\n    } catch (error) {\n      await tools.cmd.handleError(ctx.bot.context, ctx, error);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\information\\botgroup.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":1,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":7}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"module.exports = {\n  name: 'botgroup',\n  aliases: ['botgc', 'gcbot'],\n  category: 'information',\n  code: async ctx => {\n    const { formatter, config } = ctx.bot.context;\n    await ctx.reply(formatter.quote(config.bot.groupLink));\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\information\\creator.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":22},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":3,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":3,"endColumn":7}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const VCard = require('vcard-creator').default;\n\nmodule.exports = {\n  name: 'owner',\n  aliases: ['creator', 'developer'],\n  category: 'information',\n  code: async ctx => {\n    const { tools, config } = ctx.bot.context;\n    try {\n      const vcard = new VCard()\n        .addName(config.owner.name)\n        .addCompany(config.owner.organization)\n        .addPhoneNumber(config.owner.id)\n        .toString();\n\n      await ctx.reply({\n        contacts: {\n          displayName: config.owner.name,\n          contacts: [\n            {\n              vcard,\n            },\n          ],\n        },\n      });\n    } catch (error) {\n      await tools.cmd.handleError(config, ctx, error);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\information\\donate.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":1,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":7}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"module.exports = {\n  name: 'donate',\n  aliases: ['donasi', 'support'],\n  category: 'information',\n  code: async ctx => {\n    const { formatter, tools, config, database: db } = ctx.bot.context;\n    try {\n      const qrisLink = (await db.get('bot.text.qris')) || null;\n      const customText = (await db.get('bot.text.donate')) || null;\n      const text = customText\n        ? customText\n            .replace(/%tag%/g, `@${ctx.getId(ctx.sender.jid)}`)\n            .replace(/%name%/g, config.bot.name)\n            .replace(/%prefix%/g, ctx.used.prefix)\n            .replace(/%command%/g, ctx.used.command)\n            .replace(/%footer%/g, config.msg.footer)\n            .replace(/%readmore%/g, config.msg.readmore)\n        : `${formatter.quote('YOUR_DANA_NUMBER (DANA)')}\\n${formatter.quote(\n            'YOUR_PULSA_KUOTA_NUMBER (Pulsa & Kuota)'\n          )}\\n${formatter.quote('Â· Â· â”€ Â·âœ¶Â· â”€ Â· Â·')}\\n${formatter.quote(\n            'YOUR_PAYPAL_LINK (PayPal)'\n          )}\\n${formatter.quote('YOUR_SAWERIA_LINK (Saweria)')}\\n${formatter.quote(\n            'YOUR_TAKO_LINK (Tako)'\n          )}\\n${formatter.quote('YOUR_TRAKTEER_LINK (Trakteer)')}`;\n\n      if (qrisLink) {\n        await ctx.reply({\n          image: {\n            url: qrisLink,\n          },\n          mimetype: tools.mime.lookup('jpg'),\n          caption: text,\n          mentions: [ctx.sender.jid],\n          footer: config.msg.footer,\n        });\n      } else {\n        await ctx.reply({\n          text,\n          mentions: [ctx.sender.jid],\n          footer: config.msg.footer,\n        });\n      }\n    } catch (error) {\n      await tools.cmd.handleError(config, ctx, error);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\information\\listapis.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":1,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":7},{"ruleId":"no-restricted-syntax","severity":2,"message":"iterators/generators require regenerator-runtime, which is too heavyweight for this guide to allow them. Separately, loops should be avoided in favor of array iterations.","line":11,"column":7,"nodeType":"ForOfStatement","messageId":"restrictedSyntax","endLine":12,"endColumn":59},{"ruleId":"no-unused-vars","severity":1,"message":"'name' is assigned a value but never used.","line":11,"column":19,"nodeType":"Identifier","messageId":"unusedVar","endLine":11,"endColumn":23,"suggestions":[{"messageId":"removeVar","data":{"varName":"name"},"fix":{"range":[267,271],"text":""},"desc":"Remove unused variable 'name'."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"module.exports = {\n  name: 'listapis',\n  aliases: ['listapi'],\n  category: 'information',\n  code: async ctx => {\n    const { formatter, tools, config } = ctx.bot.context;\n    try {\n      const APIs = tools.api.listUrl();\n      let resultText = '';\n\n      for (const [name, api] of Object.entries(APIs))\n        resultText += formatter.quote(`${api.baseURL}\\n`);\n\n      await ctx.reply({\n        text: `${formatter.quote('List of APIs used:')}\\n${resultText.trim()}`,\n        footer: config.msg.footer,\n      });\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\information\\nlp.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":29,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":36},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":2,"column":23,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":30},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":4,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":4,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":11,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":11,"endColumn":21},{"ruleId":"no-restricted-syntax","severity":2,"message":"iterators/generators require regenerator-runtime, which is too heavyweight for this guide to allow them. Separately, loops should be avoided in favor of array iterations.","line":57,"column":11,"nodeType":"ForOfStatement","messageId":"restrictedSyntax","endLine":59,"endColumn":12},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":77,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":77,"endColumn":20,"suggestions":[{"fix":{"range":[2708,2754],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const NLPProcessorService = require('../../src/services/nlpProcessor');\nconst { formatter } = require('../../src/utils/logger');\n\nmodule.exports = {\n  name: 'nlp',\n  aliases: ['understand', 'parse', 'intent'],\n  category: 'information',\n  permissions: {\n    coin: 5,\n  },\n  code: async ctx => {\n    const { config } = ctx.bot.context;\n\n    try {\n      const input = ctx.args.join(' ') || ctx.quoted?.content || '';\n\n      if (!input) {\n        return ctx.reply(\n          formatter.quote(\n            'âŽ Please provide some text for me to analyze. For example: \"download a funny cat video\" or \"tell me a joke\"'\n          )\n        );\n      }\n\n      // Initialize NLP service\n      const nlpService = new NLPProcessorService();\n\n      // Get user's recent commands for context\n      const userDb = await ctx.bot.context.database.user.get(ctx.author.id);\n      const recentCommands = userDb?.recentCommands || [];\n\n      // Process the input\n      const result = await nlpService.processInput(input, {\n        userId: ctx.author.id,\n        recentCommands,\n        isGroup: ctx.isGroup(),\n        isAdmin: ctx.isGroup() ? await ctx.group().isAdmin(ctx.sender.jid) : false,\n        isOwner: ctx.bot.context.tools.cmd.isOwner(\n          config,\n          ctx.getId(ctx.sender.jid),\n          ctx.msg.key.id\n        ),\n      });\n\n      // Format the response\n      let response = `ðŸ§  **NLP Analysis Results**\\n\\n`;\n      response += `ðŸ“ **Input:** \"${input}\"\\n\\n`;\n      response += `ðŸŽ¯ **Detected Intent:** ${result.intent}\\n`;\n      response += `ðŸ“Š **Confidence:** ${Math.round(result.confidence * 100)}%\\n`;\n      response += `ðŸ’¡ **Explanation:** ${result.explanation}\\n\\n`;\n\n      if (result.command) {\n        response += `ðŸš€ **Suggested Command:** ${ctx.used.prefix}${result.command}\\n`;\n\n        if (result.parameters && Object.keys(result.parameters).length > 0) {\n          response += `âš™ï¸ **Parameters:**\\n`;\n          for (const [key, value] of Object.entries(result.parameters)) {\n            response += `   â€¢ ${key}: ${value}\\n`;\n          }\n        }\n\n        if (result.alternatives && result.alternatives.length > 0) {\n          response += `\\nðŸ”„ **Alternatives:** ${result.alternatives.map(cmd => `${ctx.used.prefix}${cmd}`).join(', ')}\\n`;\n        }\n\n        response += `\\nðŸ’­ *Would you like me to execute this command? Reply with \"yes\" or use the command directly!*`;\n      } else {\n        response += `ðŸ¤” **No specific command suggestion available.**\\n`;\n        response += `ðŸ’¡ *Try being more specific or use* ${ctx.used.prefix}menu *to see all commands.*`;\n      }\n\n      await ctx.reply({\n        text: response,\n        footer: config.msg.footer,\n      });\n    } catch (error) {\n      console.error('Error in NLP command:', error);\n      return ctx.reply(\n        formatter.quote(`âŽ An error occurred while analyzing your input: ${error.message}`)\n      );\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\information\\ping.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":33,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":40},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":3,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":3,"endColumn":7},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":17,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":17,"endColumn":20,"suggestions":[{"fix":{"range":[551,572],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const { convertMsToDuration } = require('../../utils/formatters');\n\nmodule.exports = {\n  name: 'ping',\n  category: 'information',\n  code: async ctx => {\n    const { formatter } = ctx.bot.context;\n    try {\n      const startTime = performance.now();\n      const pongMsg = await ctx.reply(formatter.quote('ðŸ“ Pong!'));\n      const responseTime = performance.now() - startTime;\n      await ctx.editMessage(\n        pongMsg.key,\n        formatter.quote(`ðŸ“ Pong! Merespon dalam ${convertMsToDuration(responseTime)}.`)\n      );\n    } catch (error) {\n      console.error(error);\n      await ctx.reply(formatter.quote(`An error occurred: ${error.message}`));\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\information\\price.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":1,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":7}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"module.exports = {\n  name: 'price',\n  aliases: ['belibot', 'harga', 'sewa', 'sewabot'],\n  category: 'information',\n  code: async ctx => {\n    const { formatter, tools, config, database: db } = ctx.bot.context;\n    try {\n      const customText = (await db.get('bot.text.price')) || null;\n      const text = customText\n        ? customText\n            .replace(/%tag%/g, `@${ctx.getId(ctx.sender.jid)}`)\n            .replace(/%name%/g, config.bot.name)\n            .replace(/%prefix%/g, ctx.used.prefix)\n            .replace(/%command%/g, ctx.used.command)\n            .replace(/%footer%/g, config.msg.footer)\n            .replace(/%readmore%/g, config.msg.readmore)\n        : formatter.quote('âŽ This bot does not have a price.');\n\n      await ctx.reply({\n        text,\n        mentions: [ctx.sender.jid],\n        footer: config.msg.footer,\n      });\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\information\\proverb.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":1,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":7}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"module.exports = {\n  name: 'proverb',\n  category: 'information',\n  permissions: {\n    coin: 0,\n  },\n  code: async ctx => {\n    const proverbs = [\n      'The early bird catches the worm.',\n      'Actions speak louder than words.',\n      'A journey of a thousand miles begins with a single step.',\n      'All that glitters is not gold.',\n      \"Where there's a will, there's a way.\",\n    ];\n    const proverb = proverbs[Math.floor(Math.random() * proverbs.length)];\n    return ctx.reply(proverb);\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\information\\sc.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":1,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":7}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"module.exports = {\n  name: 'sc',\n  aliases: ['script', 'source', 'sourcecode'],\n  category: 'information',\n  code: async ctx => {\n    const { formatter, config } = ctx.bot.context;\n    await ctx.reply({\n      text: formatter.quote('https://github.com/SplashCodeDex/WhatsDeX'),\n      footer: config.msg.footer,\n    }); // If you don't delete this, thank you!\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\information\\server.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":12,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":19},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":2,"column":17,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":24},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":4,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":4,"endColumn":7},{"ruleId":"no-unused-vars","severity":1,"message":"'startTime' is assigned a value but never used.","line":10,"column":13,"nodeType":"Identifier","messageId":"unusedVar","endLine":10,"endColumn":22,"suggestions":[{"messageId":"removeVar","data":{"varName":"startTime"},"fix":{"range":[234,271],"text":""},"desc":"Remove unused variable 'startTime'."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const os = require('node:os');\nconst process = require('node:process');\n\nmodule.exports = {\n  name: 'server',\n  category: 'information',\n  code: async ctx => {\n    const { formatter, tools, config } = ctx.bot.context;\n    try {\n      const startTime = config.bot.readyAt;\n      const memory = process.memoryUsage();\n      const totalMem = os.totalmem();\n      const freeMem = os.freemem();\n      const usedMem = totalMem - freeMem;\n      const uptimeOS = os.uptime() * 1000;\n      const load = os.loadavg();\n      const cpus = os.cpus();\n\n      await ctx.reply({\n        text:\n          `${formatter.quote(`OS: ${os.type()} (${os.platform()})`)}\\n` +\n          `${formatter.quote(`Arch: ${os.arch()}`)}\\n` +\n          `${formatter.quote(`Release: ${os.release()}`)}\\n` +\n          `${formatter.quote(`Hostname: ${os.hostname()}`)}\\n` +\n          `${formatter.quote(`System Uptime: ${tools.msg.convertMsToDuration(uptimeOS)}`)}\\n` +\n          `${formatter.quote('Â· Â· â”€ Â·âœ¶Â· â”€ Â· Â·')}\\n` +\n          `${formatter.quote(`Used: ${tools.msg.formatSize(usedMem)}`)}\\n` +\n          `${formatter.quote(`Free: ${tools.msg.formatSize(freeMem)}`)}\\n` +\n          `${formatter.quote(`Total: ${tools.msg.formatSize(totalMem)}`)}\\n` +\n          `${formatter.quote(`Application Memory (RSS): ${tools.msg.formatSize(memory.rss)}`)}\\n` +\n          `${formatter.quote('Â· Â· â”€ Â·âœ¶Â· â”€ Â· Â·')}\\n` +\n          `${formatter.quote(`Model: ${cpus[0].model}`)}\\n` +\n          `${formatter.quote(`Speed: ${cpus[0].speed} MHz`)}\\n` +\n          `${formatter.quote(`Cores: ${cpus.length}`)}\\n` +\n          `${formatter.quote(`Average Load: ${load.map(avg => avg.toFixed(2)).join(', ')}`)}\\n` +\n          `${formatter.quote('Â· Â· â”€ Â·âœ¶Â· â”€ Â· Â·')}\\n` +\n          `${formatter.quote(`NodeJS Version: ${process.version}`)}\\n` +\n          `${formatter.quote(`Platform: ${process.platform}`)}\\n` +\n          `${formatter.quote(`Exec Path: ${process.execPath}`)}\\n` +\n          `${formatter.quote(`PID: ${process.pid}`)}\\n` +\n          `${formatter.quote('Â· Â· â”€ Â·âœ¶Â· â”€ Â· Â·')}\\n` +\n          `${formatter.quote(`Bot Uptime: ${config.bot.uptime}`)}\\n` +\n          `${formatter.quote(`Database: ${config.bot.dbSize} (Simpl.DB - JSON)`)}\\n${formatter.quote(\n            'Library: @whiskeysockets/baileys'\n          )}`,\n        footer: config.msg.footer,\n      });\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\information\\speedtest.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":22},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":3,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":3,"endColumn":7},{"ruleId":"no-undef","severity":2,"message":"'Buffer' is not defined.","line":23,"column":26,"nodeType":"Identifier","messageId":"undef","endLine":23,"endColumn":32},{"ruleId":"no-unused-vars","severity":1,"message":"'uploadResponse' is assigned a value but never used.","line":25,"column":13,"nodeType":"Identifier","messageId":"unusedVar","endLine":25,"endColumn":27,"suggestions":[{"messageId":"removeVar","data":{"varName":"uploadResponse"},"fix":{"range":[889,1047],"text":""},"desc":"Remove unused variable 'uploadResponse'."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const axios = require('axios');\n\nmodule.exports = {\n  name: 'speedtest',\n  aliases: ['speed'],\n  category: 'information',\n  code: async ctx => {\n    const { formatter, tools, config } = ctx.bot.context;\n    try {\n      const latencyStart = performance.now();\n\n      const downloadStart = performance.now();\n      const downloadUrl = tools.api.createUrl(\n        'https://github.com',\n        '/SplashCodeDex/WhatsDeX/raw/master/README.md'\n      );\n      const downloadResponse = await axios.get(downloadUrl);\n      const downloadSize = downloadResponse.headers['content-length'];\n      const downloadTime = (performance.now() - downloadStart) / 1000;\n      const downloadSpeed = downloadSize / downloadTime;\n\n      const uploadStart = performance.now();\n      const uploadData = Buffer.alloc(1024 * 1024);\n      const uploadUrl = tools.api.createUrl('https://httpbin.org', '/post');\n      const uploadResponse = await axios.post(uploadUrl, uploadData, {\n        headers: {\n          'Content-Type': 'application/octet-stream',\n        },\n      });\n      const uploadTime = (performance.now() - uploadStart) / 1000;\n      const uploadSpeed = uploadData.length / uploadTime;\n\n      const latency = performance.now() - latencyStart;\n\n      await ctx.reply({\n        text:\n          `${formatter.quote(`Latency: ${tools.msg.convertMsToDuration(latency)}`)}\\n` +\n          `${formatter.quote(`Download: ${tools.msg.formatSizePerSecond(downloadSpeed)}`)}\\n${formatter.quote(\n            `Upload: ${tools.msg.formatSizePerSecond(uploadSpeed)}`\n          )}`,\n        footer: config.msg.footer,\n      });\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\information\\suggest.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":35,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":42},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":2,"column":23,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":30},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":4,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":4,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":11,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":11,"endColumn":21},{"ruleId":"no-unused-vars","severity":1,"message":"'config' is assigned a value but never used.","line":12,"column":13,"nodeType":"Identifier","messageId":"unusedVar","endLine":12,"endColumn":19,"suggestions":[{"messageId":"removeVar","data":{"varName":"config"},"fix":{"range":[321,356],"text":""},"desc":"Remove unused variable 'config'."}]},{"ruleId":"no-nested-ternary","severity":2,"message":"Do not nest ternary expressions.","line":48,"column":11,"nodeType":"ConditionalExpression","messageId":"noNestedTernary","endLine":48,"endColumn":81},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":61,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":61,"endColumn":20,"suggestions":[{"fix":{"range":[2231,2281],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const CommandSuggestionsService = require('../../src/services/commandSuggestions');\nconst { formatter } = require('../../src/utils/logger');\n\nmodule.exports = {\n  name: 'suggest',\n  aliases: ['suggestions', 'helpme', 'whatcanido'],\n  category: 'information',\n  permissions: {\n    coin: 5,\n  },\n  code: async ctx => {\n    const { config } = ctx.bot.context;\n\n    try {\n      const userInput = ctx.args.join(' ') || ctx.quoted?.content || '';\n\n      if (!userInput) {\n        return ctx.reply(\n          formatter.quote(\n            'âŽ Please provide some text or describe what you want to do. For example: \"download a YouTube video\" or \"generate an image\"'\n          )\n        );\n      }\n\n      // Initialize suggestions service\n      const suggestionsService = new CommandSuggestionsService();\n\n      // Get user's recent command history (mock for now)\n      const recentCommands = await suggestionsService.getUserCommandHistory(ctx.author.id);\n\n      // Generate suggestions\n      const suggestions = await suggestionsService.suggestCommands(userInput, recentCommands);\n\n      if (suggestions.length === 0) {\n        return ctx.reply(\n          formatter.quote(\n            \"ðŸ¤” I couldn't find any specific command suggestions for your request. Try using `/menu` to see all available commands.\"\n          )\n        );\n      }\n\n      // Format suggestions for display\n      let response = `ðŸ’¡ **Command Suggestions for:** \"${userInput}\"\\n\\n`;\n\n      suggestions.forEach((suggestion, index) => {\n        const confidencePercent = Math.round(suggestion.confidence * 100);\n        const confidenceIcon =\n          confidencePercent >= 80 ? 'ðŸ”¥' : confidencePercent >= 60 ? 'ðŸ‘' : 'ðŸ¤”';\n\n        response += `${index + 1}. **${ctx.used.prefix}${suggestion.command}**\\n`;\n        response += `   ${confidenceIcon} ${suggestion.description}\\n`;\n        response += `   ðŸ“Š Confidence: ${confidencePercent}%\\n`;\n        response += `   ðŸ·ï¸ Category: ${suggestion.category}\\n\\n`;\n      });\n\n      response += `ðŸ’¡ *Tip: Use the command prefix (${ctx.used.prefix}) before any command*\\n`;\n      response += `ðŸ“š *Need more help? Try* ${ctx.used.prefix}menu *to see all commands*`;\n\n      await ctx.reply(response);\n    } catch (error) {\n      console.error('Error in suggest command:', error);\n      return ctx.reply(\n        formatter.quote(`âŽ An error occurred while generating suggestions: ${error.message}`)\n      );\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\information\\tqto.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":1,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":7}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"module.exports = {\n  name: 'tqto',\n  aliases: ['thanksto'],\n  category: 'information',\n  code: async ctx => {\n    const { formatter, config } = ctx.bot.context;\n    await ctx.reply({\n      text:\n        `${formatter.quote('CodeDeX (https://github.com/SplashCodeDex)')}\\n` +\n        `${formatter.quote('Jastin Linggar Tama (https://github.com/JastinXyz)')}\\n` +\n        `${formatter.quote('RexxHayanasi (https://github.com/RexxHayanasi)')}\\n` +\n        `${formatter.quote('Rippanteq7 (https://github.com/Rippanteq7)')}\\n` +\n        `${formatter.quote('Rizky Pratama (https://github.com/Kyluxx)')}\\n` +\n        `${formatter.quote('FandyAhmD (https://github.com/fandyahmd)')}\\n${formatter.quote(\n          'And to all parties who have helped in the development of this bot. (Many if typed one by one)'\n        )}`,\n      footer: config.msg.footer,\n    }); // Jika kamu tidak menghapus ini, terima kasih!\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\information\\uptime.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":1,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":7}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"module.exports = {\n  name: 'uptime',\n  aliases: ['runtime'],\n  category: 'information',\n  code: async ctx => {\n    const { formatter, config } = ctx.bot.context;\n    await ctx.reply(formatter.quote(`ðŸš€ Bot has been active for ${config.bot.uptime}.`));\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\main\\goodbye.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":1,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":7},{"ruleId":"no-empty-pattern","severity":2,"message":"Unexpected empty object pattern.","line":6,"column":5,"nodeType":"ObjectPattern","messageId":"unexpected","endLine":8,"endColumn":6}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"module.exports = {\n  name: 'goodbye',\n  category: 'main',\n  handler: async (\n    ctx,\n    {\n      // destructure context here\n    }\n  ) => {\n    ctx.reply('Goodbye! Have a great day!');\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\main\\hello.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":1,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":7},{"ruleId":"no-empty-pattern","severity":2,"message":"Unexpected empty object pattern.","line":6,"column":5,"nodeType":"ObjectPattern","messageId":"unexpected","endLine":8,"endColumn":6}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"module.exports = {\n  name: 'hello',\n  category: 'main',\n  handler: async (\n    ctx,\n    {\n      // destructure context here\n    }\n  ) => {\n    ctx.reply('Hello! How can I help you today?');\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\main\\menu.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":16,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":23},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":3,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":3,"endColumn":7},{"ruleId":"no-restricted-syntax","severity":2,"message":"iterators/generators require regenerator-runtime, which is too heavyweight for this guide to allow them. Separately, loops should be avoided in favor of array iterations.","line":43,"column":7,"nodeType":"ForOfStatement","messageId":"restrictedSyntax","endLine":71,"endColumn":8},{"ruleId":"no-shadow","severity":2,"message":"'cmd' is already declared in the upper scope on line 10 column 15.","line":45,"column":19,"nodeType":"Identifier","messageId":"noShadow","endLine":45,"endColumn":22},{"ruleId":"no-shadow","severity":2,"message":"'cmd' is already declared in the upper scope on line 10 column 15.","line":46,"column":16,"nodeType":"Identifier","messageId":"noShadow","endLine":46,"endColumn":19},{"ruleId":"no-loop-func","severity":2,"message":"Function declared in a loop contains unsafe references to variable(s) 'text'.","line":55,"column":24,"nodeType":"ArrowFunctionExpression","messageId":"unsafeRefs","endLine":67,"endColumn":12},{"ruleId":"no-shadow","severity":2,"message":"'cmd' is already declared in the upper scope on line 10 column 15.","line":55,"column":24,"nodeType":"Identifier","messageId":"noShadow","endLine":55,"endColumn":27}],"suppressedMessages":[],"errorCount":7,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const moment = require('moment-timezone');\n\nmodule.exports = {\n  name: 'menu',\n  aliases: ['allmenu', 'help', 'list', 'listmenu'],\n  category: 'main',\n  code: async ctx => {\n    const { config, formatter, tools, state } = ctx.self.context;\n    try {\n      const { cmd } = ctx.bot;\n      const tag = {\n        'ai-chat': 'AI (Chat)',\n        'ai-image': 'AI (Image)',\n        'ai-video': 'AI (Video)',\n        'ai-misc': 'AI (Miscellaneous)',\n        converter: 'Converter',\n        downloader: 'Downloader',\n        entertainment: 'Entertainment',\n        game: 'Game',\n        group: 'Group',\n        maker: 'Maker',\n        profile: 'Profile',\n        search: 'Search',\n        tool: 'Tool',\n        owner: 'Owner',\n        information: 'Information',\n        misc: 'Miscellaneous',\n      };\n\n      let text =\n        `Hello, @${ctx.getId(ctx.sender.jid)}! I am a WhatsApp bot named ${config.bot.name}, owned by ${config.owner.name}. I can perform many commands, such as creating stickers, using AI for specific tasks, and other useful commands.\\n` +\n        '\\n' +\n        `${formatter.quote(`Date: ${moment.tz(config.system.timeZone).locale('en').format('dddd, DD MMMM YYYY')}`)}\\n` +\n        `${formatter.quote(`Time: ${moment.tz(config.system.timeZone).format('HH:mm:ss')}`)}\\n` +\n        '\\n' +\n        `${formatter.quote(`Uptime: ${state.uptime}`)}\\n` +\n        `${formatter.quote(`Database: ${state.dbSize} (Simpl.DB - JSON)`)}\\n` +\n        `${formatter.quote('Library: @whiskeysockets/baileys')}\\n` +\n        '\\n' +\n        `${formatter.italic(\"Don't forget to donate to keep the bot online.\")}\\n` +\n        `${config.msg.readmore}\\n`;\n\n      for (const category of Object.keys(tag)) {\n        const cmds = Array.from(cmd.values())\n          .filter(cmd => cmd.category === category)\n          .map(cmd => ({\n            name: cmd.name,\n            aliases: cmd.aliases,\n            permissions: cmd.permissions || {},\n          }));\n\n        if (cmds.length > 0) {\n          text += ` ${formatter.bold(tag[category])}\\n`;\n\n          cmds.forEach(cmd => {\n            let permissionsText = '';\n            if (cmd.permissions.coin) permissionsText += 'â“’';\n            if (cmd.permissions.group) permissionsText += 'â’¼';\n            if (cmd.permissions.owner) permissionsText += 'â“„';\n            if (cmd.permissions.premium) permissionsText += 'â“…';\n            if (cmd.permissions.private) permissionsText += 'â“Ÿ';\n\n            text += formatter.quote(\n              formatter.monospace(`${ctx.used.prefix + cmd.name} ${permissionsText}`)\n            );\n            text += '\\n';\n          });\n        }\n\n        text += '\\n';\n      }\n\n      await ctx.sendMessage(\n        ctx.id,\n        {\n          image: {\n            url: config.bot.thumbnail,\n          },\n          mimetype: tools.mime.lookup('png'),\n          caption: text.trim(),\n          mentions: [ctx.sender.jid],\n          footer: config.msg.footer,\n          buttons: [\n            {\n              buttonId: `${ctx.used.prefix}owner`,\n              buttonText: {\n                displayText: 'Contact Owner',\n              },\n            },\n            {\n              buttonId: `${ctx.used.prefix}donate`,\n              buttonText: {\n                displayText: 'Donate',\n              },\n            },\n          ],\n        },\n        {\n          quoted: tools.cmd.fakeMetaAiQuotedText(config.msg.note),\n        }\n      );\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\maker\\bluearchivelogo.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":1,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":8,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":8,"endColumn":21}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"module.exports = {\n  name: 'bluearchivelogo',\n  aliases: ['balogo'],\n  category: 'maker',\n  permissions: {\n    coin: 10,\n  },\n  code: async ctx => {\n    const { formatter, tools, config } = ctx.bot.context;\n    const input = ctx.args.join(' ') || null;\n\n    if (!input)\n      return await ctx.reply(\n        `${formatter.quote(tools.msg.generateInstruction(['send'], ['text']))}\\n${formatter.quote(\n          tools.msg.generateCmdExample(ctx.used, 'evang|elion')\n        )}`\n      );\n\n    try {\n      const [left, right] = input.split('|');\n      const result = tools.api.createUrl('neko', '/maker/ba-logo', {\n        textL: left,\n        textR: right,\n      });\n\n      await ctx.reply({\n        image: {\n          url: result,\n        },\n        mimetype: tools.mime.lookup('png'),\n        footer: config.msg.footer,\n      });\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error, true);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\maker\\brat.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":35,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":42},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":3,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":3,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":10,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":10,"endColumn":21}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const { Sticker, StickerTypes } = require('wa-sticker-formatter');\n\nmodule.exports = {\n  name: 'brat',\n  aliases: ['sbrat', 'stickerbrat', 'stikerbrat'],\n  category: 'maker',\n  permissions: {\n    coin: 10,\n  },\n  code: async ctx => {\n    const { formatter, tools, config } = ctx.bot.context;\n    const input = ctx.args.join(' ') || ctx.quoted?.content || null;\n\n    if (!input)\n      return await ctx.reply(\n        `${formatter.quote(tools.msg.generateInstruction(['send'], ['text']))}\\n` +\n          `${formatter.quote(tools.msg.generateCmdExample(ctx.used, 'get in the fucking robot, shinji!'))}\\n${formatter.quote(\n            tools.msg.generateNotes([\n              'Balas atau quote pesan untuk menjadikan teks sebagai input target, jika teks memerlukan baris baru.',\n            ])\n          )}`\n      );\n\n    if (input.length > 1000) return await ctx.reply(formatter.quote('âŽ Maksimal 1000 kata!'));\n\n    try {\n      const result = tools.api.createUrl('yp', '/api/image/brat', {\n        text: input,\n      });\n      const sticker = new Sticker(result, {\n        pack: config.sticker.packname,\n        author: config.sticker.author,\n        type: StickerTypes.FULL,\n        categories: ['ðŸŒ•'],\n        id: ctx.id,\n        quality: 50,\n      });\n\n      await ctx.reply(await sticker.toMessage());\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error, true);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\maker\\bratgif.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":35,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":42},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":3,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":3,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":24,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":24,"endColumn":21}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const { Sticker, StickerTypes } = require('wa-sticker-formatter');\n\nmodule.exports = {\n  name: 'bratgif',\n  aliases: [\n    'bratg',\n    'bratv',\n    'bratvid',\n    'bratvideo',\n    'sbratgif',\n    'sbratvid',\n    'sbratvideo',\n    'stickerbratgif',\n    'stickerbratvid',\n    'stickerbratvideo',\n    'stikerbratgif',\n    'stikerbratvid',\n    'stikerbratvideo',\n  ],\n  category: 'maker',\n  permissions: {\n    coin: 10,\n  },\n  code: async ctx => {\n    const { formatter, tools, config } = ctx.bot.context;\n    const input = ctx.args.join(' ') || ctx.quoted?.content || null;\n\n    if (!input)\n      return await ctx.reply(\n        `${formatter.quote(tools.msg.generateInstruction(['send'], ['text']))}\\n` +\n          `${formatter.quote(tools.msg.generateCmdExample(ctx.used, 'get in the fucking robot, shinji!'))}\\n${formatter.quote(\n            tools.msg.generateNotes([\n              'Balas atau quote pesan untuk menjadikan teks sebagai input target, jika teks memerlukan baris baru.',\n            ])\n          )}`\n      );\n\n    if (input.length > 1000) return await ctx.reply(formatter.quote('âŽ Maksimal 1000 kata!'));\n\n    try {\n      const result = tools.api.createUrl('yp', '/api/video/bratv', {\n        text: input,\n      });\n      const sticker = new Sticker(result, {\n        pack: config.sticker.packname,\n        author: config.sticker.author,\n        type: StickerTypes.FULL,\n        categories: ['ðŸŒ•'],\n        id: ctx.id,\n        quality: 50,\n      });\n\n      await ctx.reply(await sticker.toMessage());\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error, true);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\maker\\carbonify.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":1,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":8,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":8,"endColumn":21}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"module.exports = {\n  name: 'carbonify',\n  aliases: ['carbon'],\n  category: 'maker',\n  permissions: {\n    coin: 10,\n  },\n  code: async ctx => {\n    const { formatter, tools, config } = ctx.bot.context;\n    const input = ctx.args.join(' ') || ctx.quoted?.content || null;\n\n    if (!input)\n      return await ctx.reply(\n        `${formatter.quote(tools.msg.generateInstruction(['send'], ['text']))}\\n` +\n          `${formatter.quote(tools.msg.generateCmdExample(ctx.used, 'console.log(\"halo, dunia!\");'))}\\n${formatter.quote(\n            tools.msg.generateNotes([\n              'Balas atau quote pesan untuk menjadikan teks sebagai input target, jika teks memerlukan baris baru.',\n            ])\n          )}`\n      );\n\n    try {\n      const result = tools.api.createUrl('neko', '/maker/carbonify', {\n        text: input,\n      });\n\n      await ctx.reply({\n        image: {\n          url: result,\n        },\n        mimetype: tools.mime.lookup('png'),\n        footer: config.msg.footer,\n      });\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error, true);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\maker\\emojigif.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":35,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":42},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":3,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":3,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":10,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":10,"endColumn":21}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const { Sticker, StickerTypes } = require('wa-sticker-formatter');\n\nmodule.exports = {\n  name: 'emojigif',\n  aliases: ['egif'],\n  category: 'maker',\n  permissions: {\n    coin: 10,\n  },\n  code: async ctx => {\n    const { formatter, tools, config } = ctx.bot.context;\n    const input = ctx.args.join('');\n    const emojis = Array.from(input.matchAll(/\\p{Emoji}/gu), match => match[0]);\n    const [emoji] = emojis.slice(0, 1);\n\n    if (!emoji)\n      return await ctx.reply(\n        `${formatter.quote(tools.msg.generateInstruction(['send'], ['text']))}\\n${formatter.quote(\n          tools.msg.generateCmdExample(ctx.used, 'ðŸ˜±')\n        )}`\n      );\n\n    try {\n      const result = tools.api.createUrl('hang', '/tools/emojitogif', {\n        emoji,\n      });\n      const sticker = new Sticker(result, {\n        pack: config.sticker.packname,\n        author: config.sticker.author,\n        type: StickerTypes.FULL,\n        categories: ['ðŸŒ•'],\n        id: ctx.id,\n        quality: 50,\n      });\n\n      await ctx.reply(await sticker.toMessage());\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error, true);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\maker\\emojimix.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":35,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":42},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":3,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":3,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":10,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":10,"endColumn":21}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const { Sticker, StickerTypes } = require('wa-sticker-formatter');\n\nmodule.exports = {\n  name: 'emojimix',\n  aliases: ['emix'],\n  category: 'maker',\n  permissions: {\n    coin: 10,\n  },\n  code: async ctx => {\n    const { formatter, tools, config } = ctx.bot.context;\n    const input = ctx.args.join('');\n    const emojis = Array.from(input.matchAll(/\\p{Emoji}/gu), match => match[0]);\n    const [emoji1, emoji2] = emojis.slice(0, 2);\n\n    if (!emoji1 || !emoji2)\n      return await ctx.reply(\n        `${formatter.quote(tools.msg.generateInstruction(['send'], ['text']))}\\n${formatter.quote(\n          tools.msg.generateCmdExample(ctx.used, 'ðŸ˜± ðŸ¤“')\n        )}`\n      );\n\n    try {\n      const result = tools.api.createUrl('hang', '/tools/emojimix', {\n        emoji1,\n        emoji2,\n      });\n      const sticker = new Sticker(result, {\n        pack: config.sticker.packname,\n        author: config.sticker.author,\n        type: StickerTypes.FULL,\n        categories: ['ðŸŒ•'],\n        id: ctx.id,\n        quality: 50,\n      });\n\n      await ctx.reply(await sticker.toMessage());\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error, true);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\maker\\quotlychat.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":35,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":42},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":3,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":3,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":10,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":10,"endColumn":21},{"ruleId":"no-unused-vars","severity":1,"message":"'val' is defined but never used. Allowed unused args must match /^_/u.","line":16,"column":20,"nodeType":"Identifier","messageId":"unusedVar","endLine":16,"endColumn":23,"suggestions":[{"messageId":"removeVar","data":{"varName":"val"},"fix":{"range":[444,447],"text":"()"},"desc":"Remove unused variable 'val'."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const { Sticker, StickerTypes } = require('wa-sticker-formatter');\n\nmodule.exports = {\n  name: 'quotlychat',\n  aliases: ['qc', 'quotly'],\n  category: 'maker',\n  permissions: {\n    coin: 10,\n  },\n  code: async ctx => {\n    const { formatter, tools, config } = ctx.bot.context;\n    const flag = tools.cmd.parseFlag(ctx.args.join(' ') || ctx.quoted?.content || null, {\n      '-c': {\n        type: 'value',\n        key: 'color',\n        validator: val => true,\n        parser: val => val.toLowerCase(),\n      },\n    });\n    const { input } = flag;\n\n    if (!input)\n      return await ctx.reply(\n        `${formatter.quote(tools.msg.generateInstruction(['send'], ['text']))}\\n` +\n          `${formatter.quote(tools.msg.generateCmdExample(ctx.used, 'get in the fucking robot, shinji! -c green'))}\\n` +\n          `${formatter.quote(tools.msg.generateNotes(['Balas atau quote pesan untuk menjadikan teks sebagai input target, jika teks memerlukan baris baru.']))}\\n${formatter.quote(\n            tools.msg.generatesFlagInfo({\n              '-c <text>':\n                'Warna untuk chat (tersedia: aliceblue, antiquewhite, aqua, aquamarine, azure, beige, bisque, black, blanchedalmond, blue, blueviolet, brown, burlywood, cadetblue, chartreuse, chocolate, coral, cornflowerblue, cornsilk, crimson, cyan, darkblue, darkcyan, darkgoldenrod, darkgray, darkgreen, darkkhaki, darkmagenta, darkolivegreen, darkorange, darkorchid, darkred, darksalmon, darkseagreen, darkslateblue, darkslategray, darkturquoise, darkviolet, deeppink, deepskyblue, dimgray, dodgerblue, firebrick, floralwhite, forestgreen, fuchsia, gainsboro, ghostwhite, gold, goldenrod, gray, green, greenyellow, honeydew, hotpink, indianred, indigo, ivory, khaki, lavender, lavenderblush, lawngreen, lemonchiffon, lightblue, lightcoral, lightcyan, lightgoldenrodyellow, lightgray, lightgreen, lightpink, lightsalmon, lightseagreen, lightskyblue, lightslategray, lightsteelblue, lightyellow, lime, limegreen, linen, magenta, maroon, mediumaquamarine, mediumblue, mediumorchid, mediumpurple, mediumseagreen, mediumslateblue, mediumspringgreen, mediumturquoise, mediumvioletred, midnightblue, mintcream, mistyrose, moccasin, navajowhite, navy, oldlace, olive, olivedrab, orange, orangered, orchid, palegoldenrod, palegreen, paleturquoise, palevioletred, papayawhip, peachpuff, peru, pink, plum, powderblue, purple, rebeccapurple, red, rosybrown, royalblue, saddlebrown, salmon, sandybrown, seagreen, seashell, sienna, silver, skyblue, slateblue, slategray, snow, springgreen, steelblue, tan, teal, thistle, tomato, turquoise, violet, wheat, white, whitesmoke, yellow, yellowgreen | default: aliceblue)',\n            })\n          )}`\n      );\n\n    if (input.length > 1000) return await ctx.reply(formatter.quote('âŽ Maksimal 1000 kata!'));\n\n    try {\n      let color = flag?.color || 'aliceblue';\n      if (\n        ![\n          'aliceblue',\n          'antiquewhite',\n          'aqua',\n          'aquamarine',\n          'azure',\n          'beige',\n          'bisque',\n          'black',\n          'blanchedalmond',\n          'blue',\n          'blueviolet',\n          'brown',\n          'burlywood',\n          'cadetblue',\n          'chartreuse',\n          'chocolate',\n          'coral',\n          'cornflowerblue',\n          'cornsilk',\n          'crimson',\n          'cyan',\n          'darkblue',\n          'darkcyan',\n          'darkgoldenrod',\n          'darkgray',\n          'darkgreen',\n          'darkkhaki',\n          'darkmagenta',\n          'darkolivegreen',\n          'darkorange',\n          'darkorchid',\n          'darkred',\n          'darksalmon',\n          'darkseagreen',\n          'darkslateblue',\n          'darkslategray',\n          'darkturquoise',\n          'darkviolet',\n          'deeppink',\n          'deepskyblue',\n          'dimgray',\n          'dodgerblue',\n          'firebrick',\n          'floralwhite',\n          'forestgreen',\n          'fuchsia',\n          'gainsboro',\n          'ghostwhite',\n          'gold',\n          'goldenrod',\n          'gray',\n          'green',\n          'greenyellow',\n          'honeydew',\n          'hotpink',\n          'indianred',\n          'indigo',\n          'ivory',\n          'khaki',\n          'lavender',\n          'lavenderblush',\n          'lawngreen',\n          'lemonchiffon',\n          'lightblue',\n          'lightcoral',\n          'lightcyan',\n          'lightgoldenrodyellow',\n          'lightgray',\n          'lightgreen',\n          'lightpink',\n          'lightsalmon',\n          'lightseagreen',\n          'lightskyblue',\n          'lightslategray',\n          'lightsteelblue',\n          'lightyellow',\n          'lime',\n          'limegreen',\n          'linen',\n          'magenta',\n          'maroon',\n          'mediumaquamarine',\n          'mediumblue',\n          'mediumorchid',\n          'mediumpurple',\n          'mediumseagreen',\n          'mediumslateblue',\n          'mediumspringgreen',\n          'mediumturquoise',\n          'mediumvioletred',\n          'midnightblue',\n          'mintcream',\n          'mistyrose',\n          'moccasin',\n          'navajowhite',\n          'navy',\n          'oldlace',\n          'olive',\n          'olivedrab',\n          'orange',\n          'orangered',\n          'orchid',\n          'palegoldenrod',\n          'palegreen',\n          'paleturquoise',\n          'palevioletred',\n          'papayawhip',\n          'peachpuff',\n          'peru',\n          'pink',\n          'plum',\n          'powderblue',\n          'purple',\n          'rebeccapurple',\n          'red',\n          'rosybrown',\n          'royalblue',\n          'saddlebrown',\n          'salmon',\n          'sandybrown',\n          'seagreen',\n          'seashell',\n          'sienna',\n          'silver',\n          'skyblue',\n          'slateblue',\n          'slategray',\n          'snow',\n          'springgreen',\n          'steelblue',\n          'tan',\n          'teal',\n          'thistle',\n          'tomato',\n          'turquoise',\n          'violet',\n          'wheat',\n          'white',\n          'whitesmoke',\n          'yellow',\n          'yellowgreen',\n        ].includes(color)\n      )\n        color = 'aliceblue';\n      const isQuoted = ctx.args.length === 0 && ctx.quoted?.senderJid;\n      const profilePictureUrl = await ctx.core\n        .profilePictureUrl(isQuoted ? ctx.quoted?.senderJid : ctx.sender.jid, 'image')\n        .catch(() => 'https://i.pinimg.com/736x/70/dd/61/70dd612c65034b88ebf474a52ccc70c4.jpg');\n      const result = tools.api.createUrl('izumi', '/generator/quotebubble', {\n        text: input,\n        username: isQuoted ? ctx.quoted?.pushName : ctx.sender.pushName,\n        color,\n        avatarUrl: profilePictureUrl,\n      });\n      const sticker = new Sticker(result, {\n        pack: config.sticker.packname,\n        author: config.sticker.author,\n        type: StickerTypes.FULL,\n        categories: ['ðŸŒ•'],\n        id: ctx.id,\n        quality: 50,\n      });\n\n      await ctx.reply(await sticker.toMessage());\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error, true);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\maker\\sertiftolol.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":1,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":8,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":8,"endColumn":21}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"module.exports = {\n  name: 'tolol',\n  aliases: ['tlm', 'sertiftolol'],\n  category: 'maker',\n  permissions: {\n    coin: 10,\n  },\n  code: async ctx => {\n    const { formatter, tools, config } = ctx.bot.context;\n    const input = ctx.args.join(' ') || ctx.quoted?.content || null;\n\n    if (!input)\n      return await ctx.reply(\n        `${formatter.quote(tools.msg.generateInstruction(['send'], ['text']))}\\n` +\n          `${formatter.quote(tools.msg.generateCmdExample(ctx.used, 'get in the fucking robot, shinji!'))}\\n${formatter.quote(\n            tools.msg.generateNotes([\n              'Balas atau quote pesan untuk menjadikan teks sebagai input target, jika teks memerlukan baris baru.',\n            ])\n          )}`\n      );\n\n    if (input.length > 100) return await ctx.reply(formatter.quote('âŽ Maksimal 100 kata!'));\n\n    try {\n      const result = tools.api.createUrl('hang', '/imagecreator/sertifikat-tolol', {\n        text: input,\n      });\n\n      await ctx.reply({\n        image: {\n          url: result,\n        },\n        mimetype: tools.mime.lookup('jpg'),\n        footer: config.msg.footer,\n      });\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error, true);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\maker\\stickermeme.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":35,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":42},{"ruleId":"no-unused-vars","severity":1,"message":"'tools' is assigned a value but never used.","line":2,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":12,"suggestions":[{"messageId":"removeVar","data":{"varName":"tools"},"fix":{"range":[67,112],"text":""},"desc":"Remove unused variable 'tools'."}]},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":2,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":22},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":4,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":4,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":11,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":11,"endColumn":21},{"ruleId":"no-shadow","severity":2,"message":"'tools' is already declared in the upper scope on line 2 column 7.","line":12,"column":24,"nodeType":"Identifier","messageId":"noShadow","endLine":12,"endColumn":29}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const { Sticker, StickerTypes } = require('wa-sticker-formatter');\nconst tools = require('../../tools/exports');\n\nmodule.exports = {\n  name: 'stickermeme',\n  aliases: ['smeme', 'stikermeme'],\n  category: 'maker',\n  permissions: {\n    coin: 10,\n  },\n  code: async ctx => {\n    const { formatter, tools, config } = ctx.bot.context;\n    const input = ctx.args.join(' ') || null;\n\n    if (!input)\n      return await ctx.reply(\n        `${formatter.quote(tools.msg.generateInstruction(['send'], ['text']))}\\n${formatter.quote(\n          tools.msg.generateCmdExample(ctx.used, 'get in the fucking robot|shinji!')\n        )}`\n      );\n\n    const [checkMedia, checkQuotedMedia] = await Promise.all([\n      tools.cmd.checkMedia(ctx.msg.contentType, ['image', 'sticker']),\n      tools.cmd.checkQuotedMedia(ctx.quoted?.contentType, ['image', 'sticker']),\n    ]);\n\n    if (!checkMedia && !checkQuotedMedia)\n      return await ctx.reply(\n        formatter.quote(tools.msg.generateInstruction(['send', 'reply'], ['image', 'sticker']))\n      );\n\n    try {\n      let [top, bottom] = input.split('|').map(inp => inp);\n      [top, bottom] = bottom ? [top || '_', bottom] : ['_', top || '_'];\n      const buffer = (await ctx.msg.media.toBuffer()) || (await ctx.quoted?.media.toBuffer());\n      const uploadUrl = await tools.api.uploadImage(buffer);\n      const result = tools.api.createUrl(\n        'https://api.memegen.link',\n        `/images/custom/${top}${bottom}.png`,\n        {\n          background: uploadUrl,\n        }\n      );\n      const sticker = new Sticker(result, {\n        pack: config.sticker.packname,\n        author: config.sticker.author,\n        type: StickerTypes.FULL,\n        categories: ['ðŸŒ•'],\n        id: ctx.id,\n        quality: 50,\n      });\n\n      await ctx.reply(await sticker.toMessage());\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error, true);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\maker\\write.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":1,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":8,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":8,"endColumn":21}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"module.exports = {\n  name: 'write',\n  aliases: ['nulis', 'tulis'],\n  category: 'maker',\n  permissions: {\n    coin: 10,\n  },\n  code: async ctx => {\n    const { formatter, tools, config } = ctx.bot.context;\n    const input = ctx.args.join(' ') || ctx.quoted?.content || null;\n\n    if (!input)\n      return await ctx.reply(\n        `${formatter.quote(tools.msg.generateInstruction(['send'], ['text']))}\\n` +\n          `${formatter.quote(tools.msg.generateCmdExample(ctx.used, 'get in the fucking robot, shinji!'))}\\n${formatter.quote(\n            tools.msg.generateNotes([\n              'Balas atau quote pesan untuk menjadikan teks sebagai input target, jika teks memerlukan baris baru.',\n            ])\n          )}`\n      );\n\n    try {\n      const result = tools.api.createUrl('zenzxz', '/maker/nulis', {\n        text: input,\n      });\n\n      await ctx.reply({\n        image: {\n          url: result,\n        },\n        mimetype: tools.mime.lookup('png'),\n        footer: config.msg.footer,\n      });\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error, true);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\maker\\xnxxcomment.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":35,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":42},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":3,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":3,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":10,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":10,"endColumn":21}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const { Sticker, StickerTypes } = require('wa-sticker-formatter');\n\nmodule.exports = {\n  name: 'xnxxcomment',\n  aliases: ['xnxxc'],\n  category: 'maker',\n  permissions: {\n    coin: 10,\n  },\n  code: async ctx => {\n    const { formatter, tools, config } = ctx.bot.context;\n    const input = ctx.args.join(' ') || ctx.quoted?.content || null;\n\n    if (!input)\n      return await ctx.reply(\n        `${formatter.quote(tools.msg.generateInstruction(['send'], ['text']))}\\n` +\n          `${formatter.quote(tools.msg.generateCmdExample(ctx.used, 'get in the fucking robot, shinji!'))}\\n${formatter.quote(\n            tools.msg.generateNotes([\n              'Balas atau quote pesan untuk menjadikan teks sebagai input target, jika teks memerlukan baris baru.',\n            ])\n          )}`\n      );\n\n    if (input.length > 1000) return await ctx.reply(formatter.quote('âŽ Maksimal 1000 kata!'));\n\n    try {\n      const isQuoted = ctx.args.length === 0 && ctx.quoted?.senderJid;\n      const result = tools.api.createUrl('siputzx', '/api/canvas/fake-xnxx', {\n        name: isQuoted ? ctx.quoted?.pushName : ctx.sender.pushName,\n        quote: input,\n        likes: Math.floor(Math.random() * 10) + 1,\n        dislikes: 0,\n      });\n      const sticker = new Sticker(result, {\n        pack: config.sticker.packname,\n        author: config.sticker.author,\n        type: StickerTypes.FULL,\n        categories: ['ðŸŒ•'],\n        id: ctx.id,\n        quality: 50,\n      });\n\n      await ctx.reply(await sticker.toMessage());\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error, true);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\misc\\getinput.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":1,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":4,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":4,"endColumn":21}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"module.exports = {\n  name: 'getinput',\n  category: 'misc',\n  code: async ctx => {\n    const { formatter, tools } = ctx.bot.context;\n    const input = ctx.args.join(' ') || ctx.quoted?.content || null;\n\n    if (!input)\n      return await ctx.reply(\n        `${formatter.quote(tools.msg.generateInstruction(['send'], ['text']))}\\n` +\n          `${formatter.quote(tools.msg.generateCmdExample(ctx.used, 'rei ayanami'))}\\n${formatter.quote(\n            tools.msg.generateNotes([\n              'Balas atau quote pesan untuk menjadikan teks sebagai input target, jika teks memerlukan baris baru.',\n            ])\n          )}`\n      );\n\n    try {\n      await ctx.reply(input);\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\misc\\getpp.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":1,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":5,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":5,"endColumn":21}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"module.exports = {\n  name: 'getpp',\n  aliases: ['geticon'],\n  category: 'misc',\n  code: async ctx => {\n    const { formatter, tools, config } = ctx.bot.context;\n    const userJid =\n      ctx.quoted?.senderJid ||\n      (await ctx.getMentioned())[0] ||\n      (ctx.args[0] ? `${ctx.args[0].replace(/[^\\d]/g, '')}@s.whatsapp.net` : null);\n\n    if (!userJid)\n      return await ctx.reply({\n        text:\n          `${formatter.quote(tools.msg.generateInstruction(['send'], ['text']))}\\n` +\n          `${formatter.quote(tools.msg.generateCmdExample(ctx.used, `@${ctx.getId(ctx.sender.jid)}`))}\\n${formatter.quote(\n            tools.msg.generateNotes([\n              'Balas atau kutip pesan untuk menjadikan pengirim sebagai akun target.',\n            ])\n          )}`,\n        mentions: [ctx.sender.jid],\n      });\n\n    const isOnWhatsApp = await ctx.core.onWhatsApp(userJid);\n    if (isOnWhatsApp.length === 0)\n      return await ctx.reply(formatter.quote('âŽ Akun tidak ada di WhatsApp!'));\n\n    try {\n      const result = await ctx.core\n        .profilePictureUrl(userJid, 'image')\n        .catch(() => 'https://i.pinimg.com/736x/70/dd/61/70dd612c65034b88ebf474a52ccc70c4.jpg');\n\n      await ctx.reply({\n        image: {\n          url: result,\n        },\n        mimetype: tools.mime.lookup('png'),\n        caption: formatter.quote('Untukmu, tuan!'),\n        footer: config.msg.footer,\n      });\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\owner\\addcoinuser.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":1,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":8,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":8,"endColumn":21}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"module.exports = {\n  name: 'addcoinuser',\n  aliases: ['acu', 'addcoin'],\n  category: 'owner',\n  permissions: {\n    owner: true,\n  },\n  code: async ctx => {\n    const { formatter, tools, database: db } = ctx.bot.context;\n    const userJid =\n      ctx.quoted?.senderJid ||\n      (await ctx.getMentioned())[0] ||\n      (ctx.args[0] ? `${ctx.args[0].replace(/[^\\\\d]/g, '')}@s.whatsapp.net` : null);\n    const coinAmount = parseInt(ctx.args[ctx.quoted?.senderJid ? 0 : 1], 10) || null;\n\n    if (!userJid || !coinAmount)\n      return await ctx.reply({\n        text:\n          `${formatter.quote(tools.msg.generateInstruction(['send'], ['text']))}\\n` +\n          `${formatter.quote(tools.msg.generateCmdExample(ctx.used, `@${ctx.getId(ctx.sender.jid)} 8`))}\\n` +\n          `${formatter.quote(tools.msg.generateNotes(['Balas atau kutip pesan untuk menjadikan pengirim sebagai akun target.']))}\\n${formatter.quote(\n            tools.msg.generatesFlagInfo({\n              '-s': 'Tetap diam dengan tidak menyiarkan ke orang yang relevan',\n            })\n          )}`,\n        mentions: [ctx.sender.jid],\n      });\n\n    const isOnWhatsApp = await ctx.core.onWhatsApp(userJid);\n    if (isOnWhatsApp.length === 0)\n      return await ctx.reply(formatter.quote('âŽ Akun tidak ada di WhatsApp!'));\n\n    try {\n      await db.add(`user.${ctx.getId(userJid)}.coin`, coinAmount);\n\n      const flag = tools.cmd.parseFlag(ctx.args.join(' '), {\n        '-s': {\n          type: 'boolean',\n          key: 'silent',\n        },\n      });\n\n      const silent = flag?.silent || false;\n      if (!silent)\n        await ctx.sendMessage(userJid, {\n          text: formatter.quote(`ðŸ“º Kamu telah menerima ${coinAmount} koin dari Owner!`),\n        });\n\n      await ctx.reply(\n        formatter.quote(`âœ… Berhasil menambahkan ${coinAmount} koin kepada pengguna itu!`)\n      );\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\owner\\addpremiumuser.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":1,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":8,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":8,"endColumn":21}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"module.exports = {\n  name: 'addpremiumuser',\n  aliases: ['addpremuser', 'addprem', 'apu'],\n  category: 'owner',\n  permissions: {\n    owner: true,\n  },\n  code: async ctx => {\n    const { formatter, tools, database: db } = ctx.bot.context;\n    const userJid =\n      ctx.quoted?.senderJid ||\n      (await ctx.getMentioned())[0] ||\n      (ctx.args[0] ? `${ctx.args[0].replace(/[^\\\\d]/g, '')}@s.whatsapp.net` : null);\n    const daysAmount = parseInt(ctx.args[ctx.quoted?.senderJid ? 0 : 1], 10) || null;\n\n    if (!userJid)\n      return await ctx.reply({\n        text:\n          `${formatter.quote(tools.msg.generateInstruction(['send'], ['text']))}\\n` +\n          `${formatter.quote(tools.msg.generateCmdExample(ctx.used, `@${ctx.getId(ctx.sender.jid)} 30`))}\\n` +\n          `${formatter.quote(tools.msg.generateNotes(['Balas atau kutip pesan untuk menjadikan pengirim sebagai akun target.']))}\\n${formatter.quote(\n            tools.msg.generatesFlagInfo({\n              '-s': 'Tetap diam dengan tidak menyiarkan ke orang yang relevan',\n            })\n          )}`,\n        mentions: [ctx.sender.jid],\n      });\n\n    const isOnWhatsApp = await ctx.core.onWhatsApp(userJid);\n    if (isOnWhatsApp.length === 0)\n      return await ctx.reply(formatter.quote('âŽ Akun tidak ada di WhatsApp!'));\n\n    if (daysAmount && daysAmount <= 0)\n      return await ctx.reply(\n        formatter.quote('âŽ Durasi Premium (dalam hari) harus diisi dan lebih dari 0!')\n      );\n\n    try {\n      const userId = ctx.getId(userJid);\n\n      const flag = tools.cmd.parseFlag(ctx.args.join(' '), {\n        '-s': {\n          type: 'boolean',\n          key: 'silent',\n        },\n      });\n\n      const silent = flag?.silent || false;\n\n      await db.set(`user.${userId}.premium`, true);\n      if (daysAmount && daysAmount > 0) {\n        const expirationDate = Date.now() + daysAmount * 24 * 60 * 60 * 1000;\n        await db.set(`user.${userId}.premiumExpiration`, expirationDate);\n\n        if (!silent)\n          await ctx.sendMessage(userJid, {\n            text: formatter.quote(\n              `ðŸ‘ Kamu telah ditambahkan sebagai pengguna Premium oleh Owner selama ${daysAmount} hari!`\n            ),\n          });\n\n        await ctx.reply(\n          formatter.quote(\n            `âœ… Berhasil menambahkan Premium selama ${daysAmount} hari kepada pengguna itu!`\n          )\n        );\n      } else {\n        await db.delete(`user.${userId}.premiumExpiration`);\n\n        if (!silent)\n          await ctx.sendMessage(userJid, {\n            text: formatter.quote(\n              'ðŸ“¢ Kamu telah ditambahkan sebagai pengguna Premium selamanya oleh Owner!'\n            ),\n          });\n\n        await ctx.reply(\n          formatter.quote('âœ… Berhasil menambahkan Premium selamanya kepada pengguna itu!')\n        );\n      }\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\owner\\addsewagroup.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":1,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":8,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":8,"endColumn":21},{"ruleId":"no-nested-ternary","severity":2,"message":"Do not nest ternary expressions.","line":10,"column":22,"nodeType":"ConditionalExpression","messageId":"noNestedTernary","endLine":14,"endColumn":15},{"ruleId":"no-unused-vars","severity":1,"message":"'groupMentions' is assigned a value but never used.","line":55,"column":15,"nodeType":"Identifier","messageId":"unusedVar","endLine":55,"endColumn":28,"suggestions":[{"messageId":"removeVar","data":{"varName":"groupMentions"},"fix":{"range":[1740,1887],"text":""},"desc":"Remove unused variable 'groupMentions'."}]},{"ruleId":"no-undef","severity":2,"message":"'groupMentions' is not defined.","line":70,"column":53,"nodeType":"Identifier","messageId":"undef","endLine":70,"endColumn":66},{"ruleId":"no-undef","severity":2,"message":"'groupMentions' is not defined.","line":73,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":73,"endColumn":28},{"ruleId":"no-undef","severity":2,"message":"'groupMentions' is not defined.","line":88,"column":53,"nodeType":"Identifier","messageId":"undef","endLine":88,"endColumn":66},{"ruleId":"no-undef","severity":2,"message":"'groupMentions' is not defined.","line":91,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":91,"endColumn":28}],"suppressedMessages":[],"errorCount":7,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"module.exports = {\n  name: 'addsewagroup',\n  aliases: ['addsewa', 'addsewagrup', 'adg'],\n  category: 'owner',\n  permissions: {\n    owner: true,\n  },\n  code: async ctx => {\n    const { formatter, tools, database: db } = ctx.bot.context;\n    const groupJid = ctx.isGroup()\n      ? ctx.id\n      : ctx.args[0]\n        ? `${ctx.args[0].replace(/[^\\d]/g, '')}@g.us`\n        : null;\n    const daysAmount = parseInt(ctx.args[ctx.isGroup() ? 0 : 1], 10) || null;\n\n    if (!groupJid)\n      return await ctx.reply(\n        `${formatter.quote(tools.msg.generateInstruction(['send'], ['text']))}\\n` +\n          `${formatter.quote(tools.msg.generateCmdExample(ctx.used, '1234567890 30'))}\\n` +\n          `${formatter.quote(tools.msg.generateNotes(['Gunakan di grup untuk otomatis menyewakan grup tersebut.']))}\\n${formatter.quote(\n            tools.msg.generatesFlagInfo({\n              '-s': 'Tetap diam dengan tidak menyiarkan ke orang yang relevan',\n            })\n          )}`\n      );\n\n    if (!(await ctx.group(groupJid)))\n      return await ctx.reply(\n        formatter.quote('âŽ Grup tidak valid atau bot tidak ada di grup tersebut!')\n      );\n    if (daysAmount && daysAmount <= 0)\n      return await ctx.reply(\n        formatter.quote('âŽ Durasi sewa (dalam hari) harus diisi dan lebih dari 0!')\n      );\n\n    try {\n      const groupId = ctx.getId(groupJid);\n\n      await db.set(`group.${groupId}.sewa`, true);\n\n      const flag = tools.cmd.parseFlag(ctx.args.join(' '), {\n        '-s': {\n          type: 'boolean',\n          key: 'silent',\n        },\n      });\n\n      const silent = flag?.silent || false;\n\n      const group = await ctx.group(groupJid);\n      const groupOwner = await group.owner();\n\n      if (!silent && groupOwner) {\n        const groupMentions = [\n          {\n            groupJid: `${group.id}@g.us`,\n            groupSubject: await group.name(),\n          },\n        ];\n      }\n\n      if (daysAmount && daysAmount > 0) {\n        const expirationDate = Date.now() + daysAmount * 24 * 60 * 60 * 1000;\n        await db.set(`group.${groupId}.sewaExpiration`, expirationDate);\n\n        if (!silent && groupOwner)\n          await ctx.sendMessage(groupOwner, {\n            text: formatter.quote(\n              `ðŸ“¢ Bot berhasil disewakan ke grup @${groupMentions.groupJid} selama ${daysAmount} hari!`\n            ),\n            contextInfo: {\n              groupMentions,\n            },\n          });\n\n        await ctx.reply(\n          formatter.quote(\n            `âœ… Berhasil menyewakan bot ke grup ${ctx.isGroup() ? 'ini' : 'itu'} selama ${daysAmount} hari!`\n          )\n        );\n      } else {\n        await db.delete(`group.${groupId}.sewaExpiration`);\n\n        if (!silent && groupOwner)\n          await ctx.sendMessage(groupOwner, {\n            text: formatter.quote(\n              `ðŸ“¢ Bot berhasil disewakan ke grup @${groupMentions.groupJid} selamanya!`\n            ),\n            contextInfo: {\n              groupMentions,\n            },\n          });\n\n        await ctx.reply(\n          formatter.quote(\n            `âœ… Berhasil menyewakan bot ke grup ${ctx.isGroup() ? 'ini' : 'itu'} selamanya!`\n          )\n        );\n      }\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\owner\\banuser.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":1,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":8,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":8,"endColumn":21}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"module.exports = {\n  name: 'banuser',\n  aliases: ['ban', 'bu'],\n  category: 'owner',\n  permissions: {\n    owner: true,\n  },\n  code: async ctx => {\n    const { formatter, tools, database: db } = ctx.bot.context;\n    const userJid =\n      ctx.quoted?.senderJid ||\n      (await ctx.getMentioned())[0] ||\n      (ctx.args[0] ? `${ctx.args[0].replace(/[^\\\\d]/g, '')}@s.whatsapp.net` : null);\n\n    if (!userJid)\n      return await ctx.reply({\n        text:\n          `${formatter.quote(tools.msg.generateInstruction(['send'], ['text']))}\\n` +\n          `${formatter.quote(tools.msg.generateCmdExample(ctx.used, `@${ctx.getId(ctx.sender.jid)}`))}\\n` +\n          `${formatter.quote(tools.msg.generateNotes(['Balas atau kutip pesan untuk menjadikan pengirim sebagai akun target.']))}\\n${formatter.quote(\n            tools.msg.generatesFlagInfo({\n              '-s': 'Tetap diam dengan tidak menyiarkan ke orang yang relevan',\n            })\n          )}`,\n        mentions: [ctx.sender.jid],\n      });\n\n    const isOnWhatsApp = await ctx.core.onWhatsApp(userJid);\n    if (isOnWhatsApp.length === 0)\n      return await ctx.reply(formatter.quote('âŽ Akun tidak ada di WhatsApp!'));\n\n    try {\n      await db.set(`user.${ctx.getId(userJid)}.banned`, true);\n\n      const flag = tools.cmd.parseFlag(ctx.args.join(' '), {\n        '-s': {\n          type: 'boolean',\n          key: 'silent',\n        },\n      });\n\n      const silent = flag?.silent || false;\n      if (!silent)\n        await ctx.sendMessage(userJid, {\n          text: formatter.quote('ðŸ“¢ Kamu telah dibanned oleh Owner!'),\n        });\n\n      await ctx.reply(formatter.quote('âœ… Berhasil dibanned!'));\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\owner\\broadcastgc.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":1,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":8,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":8,"endColumn":21},{"ruleId":"no-promise-executor-return","severity":2,"message":"Return values from promise executor functions cannot be read.","line":54,"column":46,"nodeType":"CallExpression","messageId":"returnsValue","endLine":54,"endColumn":65,"suggestions":[{"messageId":"wrapBraces","fix":{"range":[2114,2133],"text":"{setTimeout(res, ms)}"},"desc":"Wrap the expression in `{}`."}]},{"ruleId":"no-restricted-syntax","severity":2,"message":"iterators/generators require regenerator-runtime, which is too heavyweight for this guide to allow them. Separately, loops should be avoided in favor of array iterations.","line":56,"column":7,"nodeType":"ForOfStatement","messageId":"restrictedSyntax","endLine":88,"endColumn":8},{"ruleId":"no-await-in-loop","severity":2,"message":"Unexpected `await` inside a loop.","line":57,"column":9,"nodeType":"AwaitExpression","messageId":"unexpectedAwait","endLine":57,"endColumn":25},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":67,"column":25,"nodeType":"Identifier","messageId":"undef","endLine":67,"endColumn":32},{"ruleId":"no-await-in-loop","severity":2,"message":"Unexpected `await` inside a loop.","line":75,"column":11,"nodeType":"AwaitExpression","messageId":"unexpectedAwait","endLine":84,"endColumn":12},{"ruleId":"no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":85,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":85,"endColumn":23}],"suppressedMessages":[],"errorCount":7,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"module.exports = {\n  name: 'broadcastgc',\n  aliases: ['bc', 'bcgc', 'broadcast'],\n  category: 'owner',\n  permissions: {\n    owner: true,\n  },\n  code: async ctx => {\n    const { formatter, tools, config, database: db } = ctx.bot.context;\n    const input = ctx.args.join(' ') || ctx.quoted?.content || null;\n\n    if (!input)\n      return await ctx.reply(\n        `${formatter.quote(tools.msg.generateInstruction(['send'], ['text']))}\\n` +\n          `${formatter.quote(tools.msg.generateCmdExample(ctx.used, 'halo, dunia!'))}\\n${formatter.quote(\n            tools.msg.generateNotes([\n              'Balas atau quote pesan untuk menjadikan teks sebagai input target, jika teks memerlukan baris baru.',\n              `Gunakan ${formatter.inlineCode('blacklist')} untuk memasukkan grup ke dalam blacklist. (Hanya berfungsi pada grup)`,\n            ])\n          )}`\n      );\n\n    if (ctx.args[0]?.toLowerCase() === 'blacklist' && ctx.isGroup()) {\n      const blacklist = (await db.get('bot.blacklistBroadcast')) || [];\n\n      const groupIndex = blacklist.indexOf(ctx.id);\n      if (groupIndex > -1) {\n        blacklist.splice(groupIndex, 1);\n        await db.set('bot.blacklistBroadcast', blacklist);\n        return await ctx.reply(\n          formatter.quote('âœ… Grup ini telah dihapus dari blacklist broadcast')\n        );\n      }\n      blacklist.push(ctx.id);\n      await db.set('bot.blacklistBroadcast', blacklist);\n      return await ctx.reply(\n        formatter.quote('âœ… Grup ini telah ditambahkan ke blacklist broadcast')\n      );\n    }\n\n    try {\n      const groupIds = Object.values(await ctx.core.groupFetchAllParticipating()).map(\n        group => group.id\n      );\n      const blacklist = (await db.get('bot.blacklistBroadcast')) || [];\n      const filteredGroupIds = groupIds.filter(groupId => !blacklist.includes(groupId));\n\n      const waitMsg = await ctx.reply(\n        formatter.quote(\n          `ðŸ”„ Mengirim siaran ke ${filteredGroupIds.length} grup, perkiraan waktu: ${tools.msg.convertMsToDuration(filteredGroupIds.length * 0.5 * 1000)}`\n        )\n      );\n\n      const delay = ms => new Promise(res => setTimeout(res, ms));\n      const failedGroupIds = [];\n      for (const groupId of filteredGroupIds) {\n        await delay(500);\n        try {\n          const contextInfo = {\n            isForwarded: true,\n            forwardedNewsletterMessageInfo: {\n              newsletterJid: config.bot.newsletterJid,\n              newsletterName: config.bot.name,\n            },\n            externalAdReply: {\n              title: config.bot.name,\n              body: `v${require('../../package.json').version}`,\n              mediaType: 1,\n              thumbnailUrl: config.bot.thumbnail,\n              renderLargerThumbnail: true,\n              sourceUrl: config.bot.groupLink,\n            },\n          };\n\n          await ctx.sendMessage(\n            groupId,\n            {\n              text: input,\n              contextInfo,\n            },\n            {\n              quoted: tools.cmd.fakeMetaAiQuotedText(config.msg.footer),\n            }\n          );\n        } catch (error) {\n          failedGroupIds.push(groupId);\n        }\n      }\n      const successCount = filteredGroupIds.length - failedGroupIds.length;\n\n      await ctx.editMessage(\n        waitMsg.key,\n        formatter.quote(\n          `âœ… Berhasil mengirim ke ${successCount} grup. Gagal mengirim ke ${failedGroupIds.length} grup, ${blacklist.length} grup dalam blacklist tidak dikirim.`\n        )\n      );\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\owner\\broadcasttagsw.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":1,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":8,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":8,"endColumn":21},{"ruleId":"no-promise-executor-return","severity":2,"message":"Return values from promise executor functions cannot be read.","line":64,"column":46,"nodeType":"CallExpression","messageId":"returnsValue","endLine":64,"endColumn":65,"suggestions":[{"messageId":"wrapBraces","fix":{"range":[2510,2529],"text":"{setTimeout(res, ms)}"},"desc":"Wrap the expression in `{}`."}]},{"ruleId":"no-restricted-syntax","severity":2,"message":"iterators/generators require regenerator-runtime, which is too heavyweight for this guide to allow them. Separately, loops should be avoided in favor of array iterations.","line":66,"column":7,"nodeType":"ForOfStatement","messageId":"restrictedSyntax","endLine":79,"endColumn":8},{"ruleId":"no-await-in-loop","severity":2,"message":"Unexpected `await` inside a loop.","line":67,"column":9,"nodeType":"AwaitExpression","messageId":"unexpectedAwait","endLine":67,"endColumn":25},{"ruleId":"no-await-in-loop","severity":2,"message":"Unexpected `await` inside a loop.","line":70,"column":27,"nodeType":"AwaitExpression","messageId":"unexpectedAwait","endLine":70,"endColumn":57},{"ruleId":"no-await-in-loop","severity":2,"message":"Unexpected `await` inside a loop.","line":70,"column":63,"nodeType":"AwaitExpression","messageId":"unexpectedAwait","endLine":70,"endColumn":97},{"ruleId":"no-await-in-loop","severity":2,"message":"Unexpected `await` inside a loop.","line":72,"column":11,"nodeType":"AwaitExpression","messageId":"unexpectedAwait","endLine":75,"endColumn":13},{"ruleId":"no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":76,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":76,"endColumn":23}],"suppressedMessages":[],"errorCount":8,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"module.exports = {\n  name: 'broadcasttagsw',\n  aliases: ['bctagsw'],\n  category: 'owner',\n  permissions: {\n    owner: true,\n  },\n  code: async ctx => {\n    const { formatter, tools, database: db } = ctx.bot.context;\n    const input = ctx.args.join(' ') || ctx.quoted?.content || null;\n\n    if (!input)\n      return await ctx.reply(\n        `${formatter.quote(tools.msg.generateInstruction(['send'], ['text']))}\\n` +\n          `${formatter.quote(tools.msg.generateCmdExample(ctx.used, 'halo, dunia!'))}\\n${formatter.quote(\n            tools.msg.generateNotes([\n              'Balas atau quote pesan untuk menjadikan teks sebagai input target, jika teks memerlukan baris baru.',\n              `Gunakan ${formatter.inlineCode('blacklist')} untuk memasukkan grup ke dalam blacklist. (Hanya berfungsi pada grup)`,\n            ])\n          )}`\n      );\n\n    const [checkMedia, checkQuotedMedia] = await Promise.all([\n      tools.cmd.checkMedia(ctx.msg.contentType, ['image', 'gif', 'video']),\n      tools.cmd.checkQuotedMedia(ctx.quoted?.contentType, ['image', 'gif', 'video']),\n    ]);\n\n    if (!checkMedia && !checkQuotedMedia)\n      return await ctx.reply(\n        formatter.quote(tools.msg.generateInstruction(['send', 'reply'], ['image', 'gif', 'video']))\n      );\n\n    if (ctx.args[0]?.toLowerCase() === 'blacklist' && ctx.isGroup()) {\n      const blacklist = (await db.get('bot.blacklistBroadcast')) || [];\n\n      const groupIndex = blacklist.indexOf(ctx.id);\n      if (groupIndex > -1) {\n        blacklist.splice(groupIndex, 1);\n        await db.set('bot.blacklistBroadcast', blacklist);\n        return await ctx.reply(\n          formatter.quote('âœ… Grup ini telah dihapus dari blacklist broadcast')\n        );\n      }\n      blacklist.push(ctx.id);\n      await db.set('bot.blacklistBroadcast', blacklist);\n      return await ctx.reply(\n        formatter.quote('âœ… Grup ini telah ditambahkan ke blacklist broadcast')\n      );\n    }\n\n    try {\n      const groupIds = Object.values(await ctx.core.groupFetchAllParticipating()).map(\n        group => group.id\n      );\n      const blacklist = (await db.get('bot.blacklistBroadcast')) || [];\n      const filteredGroupIds = groupIds.filter(groupId => !blacklist.includes(groupId));\n\n      const waitMsg = await ctx.reply(\n        formatter.quote(\n          `ðŸ”„ Mengirim siaran ke ${filteredGroupIds.length} grup, perkiraan waktu: ${tools.msg.convertMsToDuration(filteredGroupIds.length * 0.5 * 1000)}`\n        )\n      );\n\n      const delay = ms => new Promise(res => setTimeout(res, ms));\n      const failedGroupIds = [];\n      for (const groupId of filteredGroupIds) {\n        await delay(500);\n        try {\n          const mediaType = checkMedia || checkQuotedMedia;\n          const buffer = (await ctx.msg.media.toBuffer()) || (await ctx.quoted?.media.toBuffer());\n\n          await ctx.core.sendStatusMentions(groupId, {\n            [mediaType]: buffer,\n            caption: input,\n          });\n        } catch (error) {\n          failedGroupIds.push(groupId);\n        }\n      }\n      const successCount = filteredGroupIds.length - failedGroupIds.length;\n\n      await ctx.editMessage(\n        waitMsg.key,\n        formatter.quote(\n          `âœ… Berhasil mengirim ke ${successCount} grup. Gagal mengirim ke ${failedGroupIds.length} grup, ${blacklist.length} grup dalam blacklist tidak dikirim.`\n        )\n      );\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\owner\\checkapis.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":22},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":3,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":3,"endColumn":7},{"ruleId":"no-restricted-syntax","severity":2,"message":"iterators/generators require regenerator-runtime, which is too heavyweight for this guide to allow them. Separately, loops should be avoided in favor of array iterations.","line":16,"column":7,"nodeType":"ForOfStatement","messageId":"restrictedSyntax","endLine":40,"endColumn":8},{"ruleId":"no-unused-vars","severity":1,"message":"'name' is assigned a value but never used.","line":16,"column":19,"nodeType":"Identifier","messageId":"unusedVar","endLine":16,"endColumn":23,"suggestions":[{"messageId":"removeVar","data":{"varName":"name"},"fix":{"range":[345,349],"text":""},"desc":"Remove unused variable 'name'."}]},{"ruleId":"no-await-in-loop","severity":2,"message":"Unexpected `await` inside a loop.","line":18,"column":28,"nodeType":"AwaitExpression","messageId":"unexpectedAwait","endLine":24,"endColumn":13}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const axios = require('axios');\n\nmodule.exports = {\n  name: 'checkapis',\n  aliases: ['cekapi', 'checkapi'],\n  category: 'owner',\n  permissions: {\n    owner: true,\n  },\n  code: async ctx => {\n    const { formatter, tools, config } = ctx.bot.context;\n    try {\n      const APIs = tools.api.listUrl();\n      let resultText = '';\n\n      for (const [name, api] of Object.entries(APIs)) {\n        try {\n          const response = await axios.get(api.baseURL, {\n            timeout: 5000,\n            headers: {\n              'User-Agent':\n                'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/58.0.3029.110 Safari/537.3',\n            },\n          });\n\n          if (response.status >= 200 && response.status < 500) {\n            resultText += formatter.quote(`${api.baseURL} ðŸŸ¢ (${response.status})\\n`);\n          } else {\n            resultText += formatter.quote(`${api.baseURL} ðŸ”´ (${response.status})\\n`);\n          }\n        } catch (error) {\n          if (error.response) {\n            resultText += formatter.quote(`${api.baseURL} ðŸ”´ (${error.response.status})\\n`);\n          } else if (error.request) {\n            resultText += formatter.quote(`${api.baseURL} ðŸ”´ (Tidak ada respon)\\n`);\n          } else {\n            resultText += formatter.quote(`${api.baseURL} ðŸ”´ (Kesalahan: ${error.message})\\n`);\n          }\n        }\n      }\n\n      await ctx.reply({\n        text: resultText.trim(),\n        footer: config.msg.footer,\n      });\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\owner\\delpremiumuser.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":1,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":8,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":8,"endColumn":21}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"module.exports = {\n  name: 'delpremiumuser',\n  aliases: ['delpremuser', 'delprem', 'dpu'],\n  category: 'owner',\n  permissions: {\n    owner: true,\n  },\n  code: async ctx => {\n    const { formatter, tools, database: db } = ctx.bot.context;\n    const userJid =\n      ctx.quoted?.senderJid ||\n      (await ctx.getMentioned())[0] ||\n      (ctx.args[0] ? `${ctx.args[0].replace(/[^\\d]/g, '')}@s.whatsapp.net` : null);\n\n    if (!userJid)\n      return await ctx.reply({\n        text:\n          `${formatter.quote(tools.msg.generateInstruction(['send'], ['text']))}\\n` +\n          `${formatter.quote(tools.msg.generateCmdExample(ctx.used, `@${ctx.getId(ctx.sender.jid)}`))}\\n` +\n          `${formatter.quote(tools.msg.generateNotes(['Balas atau kutip pesan untuk menjadikan pengirim sebagai akun target.']))}\\n${formatter.quote(\n            tools.msg.generatesFlagInfo({\n              '-s': 'Tetap diam dengan tidak menyiarkan ke orang yang relevan',\n            })\n          )}`,\n        mentions: [ctx.sender.jid],\n      });\n\n    const isOnWhatsApp = await ctx.core.onWhatsApp(userJid);\n    if (isOnWhatsApp.length === 0)\n      return await ctx.reply(formatter.quote('âŽ Akun tidak ada di WhatsApp!'));\n\n    try {\n      const userId = ctx.getId(userJid);\n\n      await db.delete(`user.${userId}.premium`);\n      await db.delete(`user.${userId}.premiumExpiration`);\n\n      const flag = tools.cmd.parseFlag(ctx.args.join(' '), {\n        '-s': {\n          type: 'boolean',\n          key: 'silent',\n        },\n      });\n\n      const silent = flag?.silent || false;\n      if (!silent)\n        await ctx.sendMessage(userJid, {\n          text: formatter.quote('ðŸ“¢ Kamu telah dihapus sebagai pengguna Premium oleh Owner!'),\n        });\n\n      await ctx.reply(formatter.quote('âœ… Berhasil menghapuskan Premium kepada pengguna itu!'));\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\owner\\delsewagroup.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":1,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":8,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":8,"endColumn":21},{"ruleId":"no-nested-ternary","severity":2,"message":"Do not nest ternary expressions.","line":10,"column":22,"nodeType":"ConditionalExpression","messageId":"noNestedTernary","endLine":14,"endColumn":15}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"module.exports = {\n  name: 'delsewagroup',\n  aliases: ['delsewa', 'delsewagrup', 'dsg'],\n  category: 'owner',\n  permissions: {\n    owner: true,\n  },\n  code: async ctx => {\n    const { formatter, tools, database: db } = ctx.bot.context;\n    const groupJid = ctx.isGroup()\n      ? ctx.id\n      : ctx.args[0]\n        ? `${ctx.args[0].replace(/[^\\d]/g, '')}@g.us`\n        : null;\n\n    if (!groupJid)\n      return await ctx.reply(\n        `${formatter.quote(tools.msg.generateInstruction(['send'], ['text']))}\\n` +\n          `${formatter.quote(tools.msg.generateCmdExample(ctx.used, '1234567890'))}\\n` +\n          `${formatter.quote(tools.msg.generateNotes(['Gunakan di grup untuk otomatis menghapus sewa grup tersebut.']))}\\n${formatter.quote(\n            tools.msg.generatesFlagInfo({\n              '-s': 'Tetap diam dengan tidak menyiarkan ke orang yang relevan',\n            })\n          )}`\n      );\n\n    if (!(await ctx.group(groupJid)))\n      return await ctx.reply(\n        formatter.quote('âŽ Grup tidak valid atau bot tidak ada di grup tersebut!')\n      );\n\n    try {\n      const groupId = ctx.getId(groupJid);\n\n      await db.delete(`group.${groupId}.sewa`);\n      await db.delete(`group.${groupId}.sewaExpiration`);\n\n      const flag = tools.cmd.parseFlag(ctx.args.join(' '), {\n        '-s': {\n          type: 'boolean',\n          key: 'silent',\n        },\n      });\n\n      const silent = flag?.silent || false;\n      const group = await ctx.group(groupJid);\n      const groupOwner = await group.owner();\n      if (!silent && groupOwner) {\n        const groupMentions = [\n          {\n            groupJid: `${group.id}@g.us`,\n            groupSubject: await group.name(),\n          },\n        ];\n        await ctx.sendMessage(groupOwner, {\n          text: formatter.quote(\n            `ðŸ“¢ Sewa bot untuk grup @${groupMentions.groupJid} telah dihentikan oleh Owner!`\n          ),\n          contextInfo: {\n            groupMentions,\n          },\n        });\n      }\n\n      await ctx.reply(formatter.quote(`âœ… Berhasil menghapus sewa bot untuk grup ini!`));\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\owner\\eval.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":14,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":21},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":3,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":3,"endColumn":7},{"ruleId":"no-eval","severity":2,"message":"eval can be harmful.","line":13,"column":28,"nodeType":"CallExpression","messageId":"unexpected","endLine":13,"endColumn":32}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const util = require('node:util');\n\nmodule.exports = {\n  name: /^==> |^=> /,\n  type: 'hears',\n  code: async ctx => {\n    const { formatter, tools } = ctx.bot.context;\n    const isOwner = tools.cmd.isOwner(ctx.getId(ctx.sender.jid), ctx.msg.key.id);\n    if (!isOwner) return;\n\n    try {\n      const code = ctx.msg.content.slice(ctx.msg.content.startsWith('==> ') ? 4 : 3);\n      const result = await eval(\n        ctx.msg.content.startsWith('==> ') ? `(async () => { ${code} })()` : code\n      );\n\n      await ctx.reply(formatter.monospace(util.inspect(result)));\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error, false, false);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\owner\\exec.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":18,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":25},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":2,"column":14,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":21},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":4,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":4,"endColumn":7}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const { exec } = require('node:child_process');\nconst util = require('node:util');\n\nmodule.exports = {\n  name: /^\\$ /,\n  type: 'hears',\n  code: async ctx => {\n    const { formatter, tools } = ctx.bot.context;\n    const isOwner = tools.cmd.isOwner(ctx.getId(ctx.sender.jid), ctx.msg.key.id);\n    if (!isOwner) return;\n\n    try {\n      const command = ctx.msg.content.slice(2);\n      const output = await util.promisify(exec)(command);\n\n      await ctx.reply(formatter.monospace(output.stdout || output.stderr));\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error, false, false);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\owner\\fixdb.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":1,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":8,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":8,"endColumn":21},{"ruleId":"guard-for-in","severity":2,"message":"The body of a for-in should be wrapped in an if statement to filter unwanted properties from the prototype.","line":288,"column":11,"nodeType":"ForInStatement","messageId":"wrap","endLine":290,"endColumn":12},{"ruleId":"no-restricted-syntax","severity":2,"message":"for..in loops iterate over the entire prototype chain, which is virtually never what you want. Use Object.{keys,values,entries}, and iterate over the resulting array.","line":288,"column":11,"nodeType":"ForInStatement","messageId":"restrictedSyntax","endLine":290,"endColumn":12},{"ruleId":"valid-typeof","severity":2,"message":"Typeof comparisons should be to string literals.","line":294,"column":30,"nodeType":"MemberExpression","messageId":"notString","endLine":294,"endColumn":41},{"ruleId":"no-shadow","severity":2,"message":"'data' is already declared in the upper scope on line 29 column 13.","line":304,"column":44,"nodeType":"Identifier","messageId":"noShadow","endLine":304,"endColumn":48},{"ruleId":"no-restricted-syntax","severity":2,"message":"for..in loops iterate over the entire prototype chain, which is virtually never what you want. Use Object.{keys,values,entries}, and iterate over the resulting array.","line":309,"column":9,"nodeType":"ForInStatement","messageId":"restrictedSyntax","endLine":321,"endColumn":10},{"ruleId":"no-continue","severity":2,"message":"Unexpected use of continue statement.","line":310,"column":34,"nodeType":"ContinueStatement","messageId":"unexpected","endLine":310,"endColumn":43},{"ruleId":"guard-for-in","severity":2,"message":"The body of a for-in should be wrapped in an if statement to filter unwanted properties from the prototype.","line":315,"column":11,"nodeType":"ForInStatement","messageId":"wrap","endLine":317,"endColumn":12},{"ruleId":"no-restricted-syntax","severity":2,"message":"for..in loops iterate over the entire prototype chain, which is virtually never what you want. Use Object.{keys,values,entries}, and iterate over the resulting array.","line":315,"column":11,"nodeType":"ForInStatement","messageId":"restrictedSyntax","endLine":317,"endColumn":12},{"ruleId":"no-await-in-loop","severity":2,"message":"Unexpected `await` inside a loop.","line":319,"column":11,"nodeType":"AwaitExpression","messageId":"unexpectedAwait","endLine":319,"endColumn":55}],"suppressedMessages":[],"errorCount":11,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"module.exports = {\n  name: 'fixdb',\n  aliases: ['fixdatabase'],\n  category: 'owner',\n  permissions: {\n    owner: true,\n  },\n  code: async ctx => {\n    const { formatter, tools, config, database: db } = ctx.bot.context;\n    const input = ctx.args[0] || null;\n\n    if (!input)\n      return await ctx.reply(\n        `${formatter.quote(tools.msg.generateInstruction(['send'], ['text']))}\\n${formatter.quote(\n          tools.msg.generateCmdExample(ctx.used, 'user')\n        )}`\n      );\n\n    if (input.toLowerCase() === 'list') {\n      const listText = await tools.list.get('fixdb');\n      await ctx.reply({\n        text: listText,\n        footer: config.msg.footer,\n      });\n    }\n\n    try {\n      const waitMsg = await ctx.reply(config.msg.wait);\n      const data = {\n        user: (await db.get('user')) || {},\n        group: (await db.get('group')) || {},\n        menfess: (await db.get('menfess')) || {},\n      };\n\n      const mappings = {\n        user: {\n          afk: {\n            reason: {\n              type: 'string',\n              default: '',\n            },\n            timestamp: {\n              type: 'number',\n              default: 0,\n            },\n          },\n          autolevelup: {\n            type: 'boolean',\n            default: false,\n          },\n          banned: {\n            type: 'boolean',\n            default: false,\n          },\n          coin: {\n            type: 'number',\n            default: 0,\n            min: 0,\n          },\n          lastClaim: {\n            daily: {\n              type: 'number',\n              default: 0,\n            },\n            weekly: {\n              type: 'number',\n              default: 0,\n            },\n            monthly: {\n              type: 'number',\n              default: 0,\n            },\n            yearly: {\n              type: 'number',\n              default: 0,\n            },\n          },\n          lastSentMsg: {\n            banned: {\n              type: 'number',\n              default: 0,\n            },\n            cooldown: {\n              type: 'number',\n              default: 0,\n            },\n            gamerestrict: {\n              type: 'number',\n              default: 0,\n            },\n            privatePremiumOnly: {\n              type: 'number',\n              default: 0,\n            },\n            requireBotGroupMembership: {\n              type: 'number',\n              default: 0,\n            },\n            requireGroupSewa: {\n              type: 'number',\n              default: 0,\n            },\n            unavailableAtNight: {\n              type: 'number',\n              default: 0,\n            },\n            admin: {\n              type: 'number',\n              default: 0,\n            },\n            botAdmin: {\n              type: 'number',\n              default: 0,\n            },\n            coin: {\n              type: 'number',\n              default: 0,\n            },\n            group: {\n              type: 'number',\n              default: 0,\n            },\n            owner: {\n              type: 'number',\n              default: 0,\n            },\n            premium: {\n              type: 'number',\n              default: 0,\n            },\n            private: {\n              type: 'number',\n              default: 0,\n            },\n            restrict: {\n              type: 'number',\n              default: 0,\n            },\n          },\n          level: {\n            type: 'number',\n            default: 0,\n            min: 0,\n          },\n          premium: {\n            type: 'boolean',\n            default: false,\n          },\n          premiumExpiration: {\n            type: 'number',\n            default: 0,\n          },\n          uid: {\n            type: 'string',\n            default: '',\n          },\n          username: {\n            type: 'string',\n            default: '',\n          },\n          winGame: {\n            type: 'number',\n            default: 0,\n            min: 0,\n          },\n          xp: {\n            type: 'number',\n            default: 0,\n            min: 0,\n          },\n        },\n        group: {\n          maxwarnings: {\n            type: 'number',\n            default: 3,\n            min: 1,\n          },\n          mute: {\n            type: 'array',\n            default: [],\n          },\n          mutebot: {\n            type: 'boolean',\n            default: false,\n          },\n          text: {\n            goodbye: {\n              type: 'string',\n              default: '',\n            },\n            intro: {\n              type: 'string',\n              default: '',\n            },\n            welcome: {\n              type: 'string',\n              default: '',\n            },\n          },\n          option: {\n            antiaudio: {\n              type: 'boolean',\n              default: false,\n            },\n            antidocument: {\n              type: 'boolean',\n              default: false,\n            },\n            antigif: {\n              type: 'boolean',\n              default: false,\n            },\n            antiimage: {\n              type: 'boolean',\n              default: false,\n            },\n            antilink: {\n              type: 'boolean',\n              default: false,\n            },\n            antinfsw: {\n              type: 'boolean',\n              default: false,\n            },\n            antisticker: {\n              type: 'boolean',\n              default: false,\n            },\n            antitagsw: {\n              type: 'boolean',\n              default: false,\n            },\n            antitoxic: {\n              type: 'boolean',\n              default: false,\n            },\n            antivideo: {\n              type: 'boolean',\n              default: false,\n            },\n            autokick: {\n              type: 'boolean',\n              default: false,\n            },\n            gamerestrict: {\n              type: 'boolean',\n              default: false,\n            },\n            welcome: {\n              type: 'boolean',\n              default: false,\n            },\n          },\n          sewa: {\n            type: 'boolean',\n            default: false,\n          },\n          sewaExpiration: {\n            type: 'number',\n            default: 0,\n          },\n          spam: {\n            type: 'array',\n            default: [],\n          },\n          warnings: {\n            type: 'array',\n            default: [],\n          },\n        },\n        menfess: {\n          from: {\n            type: 'string',\n            default: '',\n          },\n          to: {\n            type: 'string',\n            default: '',\n          },\n        },\n      };\n\n      const validateAndFixValue = (value, schema) => {\n        if (schema.type === 'array') return Array.isArray(value) ? value : schema.default;\n\n        if (schema.type === 'object') {\n          const result = {};\n          for (const key in schema.properties) {\n            result[key] = validateAndFixValue(value?.[key], schema.properties[key]);\n          }\n          return result;\n        }\n\n        if (typeof value !== schema.type) return schema.default;\n\n        if (schema.type === 'number') {\n          if (value < schema.min) return schema.default;\n          if (value > schema.max) return schema.default;\n        }\n\n        return value;\n      };\n\n      const processData = async (category, data) => {\n        await ctx.editMessage(waitMsg.key, formatter.quote(`ðŸ”„ Memproses data ${category}...`));\n        const schema = mappings[category];\n        const validIds = [];\n\n        for (const id in data) {\n          if (!/^\\d+$/.test(id)) continue;\n\n          const item = data[id] || {};\n          const fixedItem = {};\n\n          for (const field in schema) {\n            fixedItem[field] = validateAndFixValue(item[field], schema[field]);\n          }\n\n          await db.set(`${category}.${id}`, fixedItem);\n          validIds.push(id);\n        }\n\n        return validIds.length;\n      };\n\n      if (!mappings[input])\n        return await ctx.editMessage(\n          waitMsg.key,\n          formatter.quote(`âŒ Invalid data type: ${input}`)\n        );\n\n      const processedCount = await processData(input, data[input]);\n\n      await ctx.editMessage(\n        waitMsg.key,\n        formatter.quote(`âœ… Berhasil membersihkan ${processedCount} data untuk ${input}!`)\n      );\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\owner\\jadibot.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":6,"column":25,"nodeType":"Identifier","messageId":"undef","endLine":6,"endColumn":32},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":8,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":8,"endColumn":7},{"ruleId":"no-unused-vars","severity":1,"message":"'args' is defined but never used. Allowed unused args must match /^_/u.","line":16,"column":30,"nodeType":"Identifier","messageId":"unusedVar","endLine":16,"endColumn":34,"suggestions":[{"messageId":"removeVar","data":{"varName":"args"},"fix":{"range":[360,365],"text":""},"desc":"Remove unused variable 'args'."}]},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'execute'.","line":16,"column":60,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":16,"endColumn":62},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":41,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":41,"endColumn":20,"suggestions":[{"fix":{"range":[1213,1258],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":46,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":46,"endColumn":20,"suggestions":[{"fix":{"range":[1385,1435],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":60,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":60,"endColumn":20,"suggestions":[{"fix":{"range":[2022,2075],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * JadiBot Command\n * Allow users to create their own bot instances\n */\n\nconst multiBotService = require('../../src/services/multiBotService');\n\nmodule.exports = {\n  name: 'jadibot',\n  description: 'Create your own bot instance',\n  category: 'Owner',\n  usage: '!jadibot',\n  aliases: ['createbot', 'multibot'],\n  cooldown: 60,\n\n  execute: async (naze, m, { args, isPremium, isCreator }) => {\n    try {\n      const userId = m.sender;\n\n      // Check if user already has active bot\n      if (multiBotService.hasActiveBot(userId)) {\n        return m.reply(\n          'You already have an active bot instance!\\nUse !stopjadibot to stop your current bot.'\n        );\n      }\n\n      // Check if user is premium (optional requirement)\n      if (!isPremium && !isCreator) {\n        return m.reply(\n          'This feature requires premium access.\\nContact admin to get premium access.'\n        );\n      }\n\n      await m.reply('â³ Creating your bot instance...\\nThis may take a few moments.');\n\n      // Create bot instance\n      const result = await multiBotService.createBot(userId, naze);\n\n      if (result.success) {\n        await m.reply(`${result.message}\\n\\nUse !stopjadibot to stop your bot instance.`);\n        console.log(`JadiBot created for ${userId}`);\n      } else {\n        await m.reply('Failed to create bot instance. Please try again.');\n      }\n    } catch (error) {\n      console.error('Error in jadibot command:', error);\n\n      if (error.message.includes('Rate limit')) {\n        await m.reply('Rate limit exceeded. Please wait before creating new bot.');\n      } else if (error.message.includes('already have an active bot')) {\n        await m.reply(\n          'You already have an active bot instance!\\nUse !stopjadibot to stop your current bot.'\n        );\n      } else if (error.message.includes('requires premium')) {\n        await m.reply('This feature requires premium access.');\n      } else {\n        await m.reply('Terjadi kesalahan saat membuat bot instance. Silakan coba lagi.');\n      }\n\n      console.error('Unexpected error in jadibot:', error);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\owner\\join.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":1,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":9,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":9,"endColumn":21}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"module.exports = {\n  name: 'join',\n  aliases: ['j'],\n  category: 'owner',\n  permissions: {\n    owner: true,\n    restrict: true,\n  },\n  code: async ctx => {\n    const { formatter, tools, config } = ctx.bot.context;\n    const url = ctx.args[0] || null;\n\n    if (!url)\n      return await ctx.reply(\n        `${formatter.quote(tools.msg.generateInstruction(['send'], ['text']))}\\n${formatter.quote(\n          tools.msg.generateCmdExample(ctx.used, config.bot.groupLink)\n        )}`\n      );\n\n    const isUrl = tools.cmd.isUrl(url);\n    if (!isUrl) return await ctx.reply(config.msg.urlInvalid);\n\n    try {\n      const urlCode = new URL(url).pathname.split('/').pop();\n      await ctx.groups.acceptInvite(urlCode).then(async res => {\n        await ctx.sendMessage(res, {\n          text: formatter.quote(\n            `ðŸ‘‹ Halo! Saya adalah bot WhatsApp bernama ${config.bot.name}, dimiliki oleh ${config.owner.name}. Saya bisa melakukan banyak perintah, seperti membuat stiker, menggunakan AI untuk pekerjaan tertentu, dan beberapa perintah berguna lainnya. Saya di sini untuk menghibur dan menyenangkan kamu!`\n          ),\n        });\n      });\n\n      await ctx.reply(formatter.quote('âœ… Berhasil bergabung dengan grup!'));\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\owner\\listbanneduser.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":1,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":7},{"ruleId":"no-restricted-syntax","severity":2,"message":"for..in loops iterate over the entire prototype chain, which is virtually never what you want. Use Object.{keys,values,entries}, and iterate over the resulting array.","line":14,"column":7,"nodeType":"ForInStatement","messageId":"restrictedSyntax","endLine":16,"endColumn":8}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"module.exports = {\n  name: 'listbanneduser',\n  aliases: ['listban', 'listbanned'],\n  category: 'owner',\n  permissions: {\n    owner: true,\n  },\n  code: async ctx => {\n    const { formatter, tools, config, database: db } = ctx.bot.context;\n    try {\n      const users = await db.get('user');\n      const bannedUsers = [];\n\n      for (const userId in users) {\n        if (users[userId].banned === true) bannedUsers.push(userId);\n      }\n\n      let resultText = '';\n      const userMentions = [];\n\n      bannedUsers.forEach(userId => {\n        resultText += `${formatter.quote(`@${userId}`)}\n`;\n      });\n\n      bannedUsers.forEach(userId => {\n        userMentions.push(`${userId}@s.whatsapp.net`);\n      });\n\n      await ctx.reply({\n        text: resultText.trim() || config.msg.notFound,\n        mentions: userMentions,\n        footer: config.msg.footer,\n      });\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\owner\\listjadibot.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":6,"column":25,"nodeType":"Identifier","messageId":"undef","endLine":6,"endColumn":32},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":8,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":8,"endColumn":7},{"ruleId":"no-unused-vars","severity":1,"message":"'args' is defined but never used. Allowed unused args must match /^_/u.","line":16,"column":30,"nodeType":"Identifier","messageId":"unusedVar","endLine":16,"endColumn":34,"suggestions":[{"messageId":"removeVar","data":{"varName":"args"},"fix":{"range":[353,358],"text":""},"desc":"Remove unused variable 'args'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'isCreator' is defined but never used. Allowed unused args must match /^_/u.","line":16,"column":36,"nodeType":"Identifier","messageId":"unusedVar","endLine":16,"endColumn":45,"suggestions":[{"messageId":"removeVar","data":{"varName":"isCreator"},"fix":{"range":[357,368],"text":""},"desc":"Remove unused variable 'isCreator'."}]},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'execute'.","line":16,"column":49,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":16,"endColumn":51},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":45,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":45,"endColumn":18,"suggestions":[{"fix":{"range":[1347,1433],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":47,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":47,"endColumn":20,"suggestions":[{"fix":{"range":[1462,1516],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":51,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":51,"endColumn":20,"suggestions":[{"fix":{"range":[1613,1670],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * List JadiBot Command\n * List all active bot instances\n */\n\nconst multiBotService = require('../../src/services/multiBotService');\n\nmodule.exports = {\n  name: 'listjadibot',\n  description: 'List all active bot instances',\n  category: 'Owner',\n  usage: '!listjadibot',\n  aliases: ['listbots', 'bots'],\n  cooldown: 10,\n\n  execute: async (naze, m, { args, isCreator }) => {\n    try {\n      // Get active bots\n      const activeBots = multiBotService.getActiveBots();\n      const stats = multiBotService.getStats();\n\n      if (activeBots.length === 0) {\n        return m.reply('No active bot instances found.');\n      }\n\n      let response = 'ðŸ¤– *Active Bot Instances*\\n\\n';\n      response += `Total Bots: ${stats.activeBots}\\n`;\n      response += `Running Processes: ${stats.runningProcesses}\\n\\n`;\n\n      activeBots.forEach((bot, index) => {\n        const createdAt = new Date(bot.createdAt).toLocaleString();\n        const status = bot.isActive ? 'ðŸŸ¢ Active' : 'ðŸŸ¡ Inactive';\n\n        response += `${index + 1}. @${bot.userId.split('@')[0]}\\n`;\n        response += `   Status: ${status}\\n`;\n        response += `   Created: ${createdAt}\\n`;\n        if (bot.reconnectAttempts > 0) {\n          response += `   Reconnect Attempts: ${bot.reconnectAttempts}\\n`;\n        }\n        response += '\\n';\n      });\n\n      await m.reply(response);\n\n      console.log(`List jadibot requested by ${m.sender}, found ${activeBots.length} bots`);\n    } catch (error) {\n      console.error('Error in listjadibot command:', error);\n\n      await m.reply('Terjadi kesalahan saat mengambil daftar bot. Silakan coba lagi.');\n\n      console.error('Unexpected error in listjadibot:', error);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\owner\\listpremiumuser.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":1,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":7},{"ruleId":"no-restricted-syntax","severity":2,"message":"for..in loops iterate over the entire prototype chain, which is virtually never what you want. Use Object.{keys,values,entries}, and iterate over the resulting array.","line":14,"column":7,"nodeType":"ForInStatement","messageId":"restrictedSyntax","endLine":21,"endColumn":8},{"ruleId":"no-restricted-syntax","severity":2,"message":"iterators/generators require regenerator-runtime, which is too heavyweight for this guide to allow them. Separately, loops should be avoided in favor of array iterations.","line":26,"column":7,"nodeType":"ForOfStatement","messageId":"restrictedSyntax","endLine":37,"endColumn":8}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"module.exports = {\n  name: 'listpremiumuser',\n  aliases: ['listprem', 'listpremium'],\n  category: 'owner',\n  permissions: {\n    owner: true,\n  },\n  code: async ctx => {\n    const { formatter, tools, config, database: db } = ctx.bot.context;\n    try {\n      const users = await db.get('user');\n      const premiumUsers = [];\n\n      for (const userId in users) {\n        if (users[userId].premium === true) {\n          premiumUsers.push({\n            id: userId,\n            expiration: users[userId].premiumExpiration,\n          });\n        }\n      }\n\n      let resultText = '';\n      const userMentions = [];\n\n      for (const user of premiumUsers) {\n        userMentions.push(`${user.id}@s.whatsapp.net`);\n\n        if (user.expiration) {\n          const daysLeft = tools.msg.convertMsToDuration(Date.now() - user.expiration, ['hari']);\n          resultText += `${formatter.quote(`@${user.id} (${daysLeft} tersisa)`)}\n`;\n        } else {\n          resultText += `${formatter.quote(`@${user.id} (Premium permanen)`)}\n`;\n        }\n      }\n\n      await ctx.reply({\n        text: resultText.trim() || config.msg.notFound,\n        mentions: userMentions,\n        footer: config.msg.footer,\n      });\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\owner\\listsewagroup.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":1,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":7},{"ruleId":"no-restricted-syntax","severity":2,"message":"for..in loops iterate over the entire prototype chain, which is virtually never what you want. Use Object.{keys,values,entries}, and iterate over the resulting array.","line":14,"column":7,"nodeType":"ForInStatement","messageId":"restrictedSyntax","endLine":21,"endColumn":8},{"ruleId":"no-restricted-syntax","severity":2,"message":"iterators/generators require regenerator-runtime, which is too heavyweight for this guide to allow them. Separately, loops should be avoided in favor of array iterations.","line":26,"column":7,"nodeType":"ForOfStatement","messageId":"restrictedSyntax","endLine":41,"endColumn":8},{"ruleId":"no-await-in-loop","severity":2,"message":"Unexpected `await` inside a loop.","line":28,"column":30,"nodeType":"AwaitExpression","messageId":"unexpectedAwait","endLine":28,"endColumn":62}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"module.exports = {\n  name: 'listsewagroup',\n  aliases: ['listsewa'],\n  category: 'owner',\n  permissions: {\n    owner: true,\n  },\n  code: async ctx => {\n    const { formatter, tools, config, database: db } = ctx.bot.context;\n    try {\n      const groups = await db.get('group');\n      const sewaGroups = [];\n\n      for (const groupId in groups) {\n        if (groups[groupId].sewa === true) {\n          sewaGroups.push({\n            id: groupId,\n            expiration: groups[groupId].sewaExpiration,\n          });\n        }\n      }\n\n      let resultText = '';\n      const groupMentions = [];\n\n      for (const group of sewaGroups) {\n        const groupJid = `${group.id}@g.us`;\n        const groupSubject = await ctx.group(groupJid).name();\n\n        groupMentions.push({\n          groupJid,\n          groupSubject,\n        });\n\n        if (group.expiration) {\n          const daysLeft = tools.msg.convertMsToDuration(Date.now() - group.expiration, ['hari']);\n          resultText += `${formatter.quote(`@${groupJid} (${daysLeft} tersisa)`)}\\n`;\n        } else {\n          resultText += `${formatter.quote(`@${groupJid} (Sewa permanen)`)}\\n`;\n        }\n      }\n\n      await ctx.reply({\n        text: resultText.trim() || config.msg.notFound,\n        footer: config.msg.footer,\n        contextInfo: {\n          groupMentions,\n        },\n      });\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\owner\\mode.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":1,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":8,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":8,"endColumn":21}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"module.exports = {\n  name: 'mode',\n  alises: ['m'],\n  category: 'owner',\n  permissions: {\n    owner: true,\n  },\n  code: async ctx => {\n    const { formatter, tools, config, database: db } = ctx.bot.context;\n    const input = ctx.args.join(' ') || null;\n\n    if (!input)\n      return await ctx.reply(\n        `${formatter.quote(tools.msg.generateInstruction(['send'], ['text']))}\\n` +\n          `${formatter.quote(tools.msg.generateCmdExample(ctx.used, 'self'))}\\n${formatter.quote(\n            tools.msg.generateNotes([\n              `Ketik ${formatter.inlineCode(`${ctx.used.prefix + ctx.used.command} list`)} untuk melihat daftar.`,\n            ])\n          )}`\n      );\n\n    if (input.toLowerCase() === 'list') {\n      const listText = await tools.list.get('mode');\n      return await ctx.reply({\n        text: listText,\n        footer: config.msg.footer,\n      });\n    }\n\n    try {\n      switch (input.toLowerCase()) {\n        case 'group':\n        case 'private':\n        case 'public':\n        case 'self':\n          await db.set('bot.mode', input.toLowerCase());\n          break;\n        default:\n          return await ctx.reply(formatter.quote(`âŽ Mode \"${input}\" tidak valid!`));\n      }\n\n      await ctx.reply(formatter.quote(`âœ… Berhasil mengubah mode ke ${input}!`));\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\owner\\oadd.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":1,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":10,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":10,"endColumn":21}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"module.exports = {\n  name: 'oadd',\n  category: 'owner',\n  permissions: {\n    botAdmin: true,\n    group: true,\n    owner: true,\n    restrict: true,\n  },\n  code: async ctx => {\n    const { formatter, tools } = ctx.bot.context;\n    const input = ctx.args.join(' ') || null;\n\n    if (!input)\n      return await ctx.reply(\n        `${formatter.quote(tools.msg.generateInstruction(['send'], ['text']))}\\n${formatter.quote(\n          tools.msg.generateCmdExample(ctx.used, ctx.getId(ctx.sender.jid))\n        )}`\n      );\n\n    const accountJid = `${input.replace(/[^\\d]/g, '')}@s.whatsapp.net`;\n\n    const isOnWhatsApp = await ctx.core.onWhatsApp(accountJid);\n    if (isOnWhatsApp.length === 0)\n      return await ctx.reply(formatter.quote('âŽ Akun tidak ada di WhatsApp!'));\n\n    try {\n      await ctx.group().add(accountJid);\n\n      await ctx.reply(formatter.quote('âœ… Berhasil ditambahkan!'));\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\owner\\odemote.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":1,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":9,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":9,"endColumn":21}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"module.exports = {\n  name: 'odemote',\n  category: 'owner',\n  permissions: {\n    botAdmin: true,\n    group: true,\n    owner: true,\n  },\n  code: async ctx => {\n    const { formatter, tools } = ctx.bot.context;\n    const accountJid = ctx.quoted?.senderJid || (await ctx.getMentioned())[0] || null;\n\n    if (!accountJid)\n      return await ctx.reply({\n        text:\n          `${formatter.quote(tools.msg.generateInstruction(['send'], ['text']))}\\n` +\n          `${formatter.quote(tools.msg.generateCmdExample(ctx.used, `@${ctx.getId(ctx.sender.jid)}`))}\\n${formatter.quote(\n            tools.msg.generateNotes([\n              'Balas atau kutip pesan untuk menjadikan pengirim sebagai akun target.',\n            ])\n          )}`,\n        mentions: [ctx.sender.jid],\n      });\n\n    if (!(await ctx.group().isAdmin(accountJid)))\n      return await ctx.reply(formatter.quote('âŽ Dia adalah anggota!'));\n\n    try {\n      await ctx.group().demote(accountJid);\n\n      await ctx.reply(formatter.quote('âœ… Berhasil diturunkan dari admin menjadi anggota!'));\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\owner\\ohidetag.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":1,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":7}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"module.exports = {\n  name: 'ohidetag',\n  aliases: ['oht'],\n  category: 'owner',\n  permissions: {\n    group: true,\n    owner: true,\n  },\n  code: async ctx => {\n    const { formatter, tools } = ctx.bot.context;\n    const input = ctx.args.join(' ') || ctx.quoted?.content || formatter.quote('ðŸ‘‹ Halo, Dunia!');\n\n    try {\n      const members = await ctx.group().members();\n      const mentions = members.map(member => member.jid);\n\n      await ctx.reply({\n        text: input,\n        mentions,\n      });\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\owner\\okick.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":1,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":10,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":10,"endColumn":21}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"module.exports = {\n  name: 'okick',\n  category: 'owner',\n  permissions: {\n    botAdmin: true,\n    group: true,\n    owner: true,\n    restrict: true,\n  },\n  code: async ctx => {\n    const { formatter, tools } = ctx.bot.context;\n    const accountJid = ctx.quoted?.senderJid || (await ctx.getMentioned())[0] || null;\n\n    if (!accountJid)\n      return await ctx.reply({\n        text:\n          `${formatter.quote(tools.msg.generateInstruction(['send'], ['text']))}\\n` +\n          `${formatter.quote(tools.msg.generateCmdExample(ctx.used, `@${ctx.getId(ctx.sender.jid)}`))}\\n${formatter.quote(\n            tools.msg.generateNotes([\n              'Balas atau kutip pesan untuk menjadikan pengirim sebagai akun target.',\n            ])\n          )}`,\n        mentions: [ctx.sender.jid],\n      });\n\n    if (await ctx.group().isOwner(accountJid))\n      return await ctx.reply(formatter.quote('âŽ Dia adalah owner grup!'));\n\n    try {\n      await ctx.group().kick(accountJid);\n\n      await ctx.reply(formatter.quote('âœ… Berhasil dikeluarkan!'));\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\owner\\omute.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":1,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":8,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":8,"endColumn":21}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"module.exports = {\n  name: 'omute',\n  category: 'owner',\n  permissions: {\n    group: true,\n    owner: true,\n  },\n  code: async ctx => {\n    const { formatter, tools, config, database: db } = ctx.bot.context;\n    const groupId = ctx.getId(ctx.id);\n\n    if (ctx.args[0]?.toLowerCase() === 'bot') {\n      await db.set(`group.${groupId}.mutebot`, 'owner');\n      return await ctx.reply(formatter.quote('âœ… Berhasil me-mute grup ini dari bot!'));\n    }\n\n    const accountJid = ctx.quoted?.senderJid || (await ctx.getMentioned())[0] || null;\n    const accountId = ctx.getId(accountJid);\n\n    if (!accountJid)\n      return await ctx.reply({\n        text:\n          `${formatter.quote(tools.msg.generateInstruction(['send'], ['text']))}\\n` +\n          `${formatter.quote(tools.msg.generateCmdExample(ctx.used, `@${ctx.getId(ctx.sender.jid)}`))}\\n${formatter.quote(\n            tools.msg.generateNotes([\n              'Balas atau kutip pesan untuk menjadikan pengirim sebagai akun target.',\n              `Ketik ${formatter.inlineCode(`${ctx.used.prefix + ctx.used.command} bot`)} untuk me-mute bot.`,\n            ])\n          )}`,\n        mentions: [ctx.sender.jid],\n      });\n\n    if (accountId === config.bot.id)\n      return await ctx.reply(\n        formatter.quote(\n          `âŽ Ketik ${formatter.inlineCode(`${ctx.used.prefix + ctx.used.command} bot`)} untuk me-mute bot.`\n        )\n      );\n    if (await ctx.group().isOwner(accountJid))\n      return await ctx.reply(formatter.quote('âŽ Dia adalah owner grup!'));\n\n    try {\n      const muteList = (await db.get(`group.${groupId}.mute`)) || [];\n      if (!muteList.includes(accountId)) muteList.push(accountId);\n      await db.set(`group.${groupId}.mute`, muteList);\n\n      await ctx.reply(formatter.quote('âœ… Berhasil me-mute pengguna itu dari grup ini!'));\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\owner\\opromote.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":1,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":9,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":9,"endColumn":21}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"module.exports = {\n  name: 'opromote',\n  category: 'owner',\n  permissions: {\n    botAdmin: true,\n    group: true,\n    owner: true,\n  },\n  code: async ctx => {\n    const { formatter, tools } = ctx.bot.context;\n    const accountJid = ctx.quoted?.senderJid || (await ctx.getMentioned())[0] || null;\n\n    if (!accountJid)\n      return await ctx.reply({\n        text:\n          `${formatter.quote(tools.msg.generateInstruction(['send'], ['text']))}\\n` +\n          `${formatter.quote(tools.msg.generateCmdExample(ctx.used, `@${ctx.getId(ctx.sender.jid)}`))}\\n${formatter.quote(\n            tools.msg.generateNotes([\n              'Balas atau kutip pesan untuk menjadikan pengirim sebagai akun target.',\n            ])\n          )}`,\n        mentions: [ctx.sender.jid],\n      });\n\n    if (await ctx.group().isOwner(accountJid))\n      return await ctx.reply(formatter.quote('âŽ Dia adalah owner grup!'));\n\n    try {\n      await ctx.group().promote(accountJid);\n\n      await ctx.reply(formatter.quote('âœ… Berhasil ditingkatkan dari anggota menjadi admin!'));\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\owner\\osettext.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":1,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":8,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":8,"endColumn":21}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"module.exports = {\n  name: 'osettext',\n  aliases: ['osettxt'],\n  category: 'owner',\n  permissions: {\n    owner: true,\n  },\n  code: async ctx => {\n    const { formatter, tools, config, database: db } = ctx.bot.context;\n    const key = ctx.args[0] || null;\n    const text = ctx.args.slice(1).join(' ') || ctx.quoted?.content || null;\n\n    if (key?.toLowerCase() === 'list') {\n      const listText = await tools.list.get('osettext');\n      return await ctx.reply({\n        text: listText,\n        footer: config.msg.footer,\n      });\n    }\n\n    if (!key || !text)\n      return await ctx.reply(\n        `${formatter.quote(tools.msg.generateInstruction(['send'], ['text']))}\\n` +\n          `${formatter.quote(tools.msg.generateCmdExample(ctx.used, 'price $1 untuk sewa bot 1 bulan'))}\\n${formatter.quote(\n            tools.msg.generateNotes([\n              `Ketik ${formatter.inlineCode(`${ctx.used.prefix + ctx.used.command} list`)} untuk melihat daftar.`,\n              'Untuk teks satu baris, ketik saja langsung ke perintah. Untuk teks dengan baris baru, balas pesan yang berisi teks tersebut ke perintah.',\n              `Gunakan ${formatter.inlineCode('delete')} sebagai teks untuk menghapus teks yang disimpan sebelumnya.`,\n            ])\n          )}`\n      );\n\n    try {\n      let setKey;\n\n      switch (key.toLowerCase()) {\n        case 'donate':\n        case 'price':\n        case 'qris':\n          setKey = `bot.text.${key.toLowerCase()}`;\n          break;\n        default:\n          return await ctx.reply(\n            formatter.quote(`âŽ Teks ${formatter.inlineCode(key)} tidak valid!`)\n          );\n      }\n\n      if (text.toLowerCase() === 'delete') {\n        await db.delete(setKey);\n        return await ctx.reply(\n          formatter.quote(`ðŸ—‘ï¸ Pesan untuk teks ${formatter.inlineCode(key)} berhasil dihapus!`)\n        );\n      }\n\n      await db.set(setKey, text);\n      await ctx.reply(\n        formatter.quote(`âœ… Pesan untuk teks ${formatter.inlineCode(key)} berhasil disimpan!`)\n      );\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\owner\\otagall.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":1,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":7},{"ruleId":"no-useless-concat","severity":2,"message":"Unexpected string concatenation of literals.","line":24,"column":28,"nodeType":"BinaryExpression","messageId":"unexpectedConcat","endLine":24,"endColumn":29}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"module.exports = {\n  name: 'otagall',\n  category: 'owner',\n  permissions: {\n    group: true,\n    owner: true,\n  },\n  code: async ctx => {\n    const { formatter, tools, config } = ctx.bot.context;\n    const input = ctx.args.join(' ') || ctx.quoted?.content || formatter.quote('ðŸ‘‹ Halo, Dunia!');\n\n    try {\n      const members = await ctx.group().members();\n      const mentions = members.map(member => {\n        const serialized = ctx.getId(member.jid);\n        return {\n          tag: `@${serialized}`,\n          mention: member.id,\n        };\n      });\n\n      const resultText = mentions.map(mention => mention.tag).join(' ');\n      await ctx.reply({\n        text: `${input}\\n` + `${config.msg.readmore}Â· Â· â”€ Â·âœ¶Â· â”€ Â· Â·\\n${resultText}`,\n        mentions: mentions.map(mention => mention.mention),\n      });\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\owner\\ounmute.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":1,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":8,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":8,"endColumn":21}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"module.exports = {\n  name: 'ounmute',\n  category: 'owner',\n  permissions: {\n    group: true,\n    owner: true,\n  },\n  code: async ctx => {\n    const { formatter, tools, config, database: db } = ctx.bot.context;\n    const groupId = ctx.getId(ctx.id);\n\n    if (ctx.args[0]?.toLowerCase() === 'bot') {\n      await db.set(`group.${groupId}.mutebot`, true);\n      return await ctx.reply(formatter.quote('âœ… Berhasil me-unmute grup ini dari bot!'));\n    }\n\n    const accountJid = ctx.quoted?.senderJid || (await ctx.getMentioned())[0] || null;\n    const accountId = ctx.getId(accountJid);\n\n    if (!accountJid)\n      return await ctx.reply({\n        text:\n          `${formatter.quote(tools.msg.generateInstruction(['send'], ['text']))}\\n` +\n          `${formatter.quote(tools.msg.generateCmdExample(ctx.used, `@${ctx.getId(ctx.sender.jid)}`))}\\n${formatter.quote(\n            tools.msg.generateNotes([\n              'Balas atau kutip pesan untuk menjadikan pengirim sebagai akun target.',\n              `Ketik ${formatter.inlineCode(`${ctx.used.prefix + ctx.used.command} bot`)} untuk me-unmute bot.`,\n            ])\n          )}`,\n        mentions: [ctx.sender.jid],\n      });\n\n    if (accountId === config.bot.id)\n      return await ctx.reply(\n        formatter.quote(\n          `âŽ Ketik ${formatter.inlineCode(`${ctx.used.prefix + ctx.used.command} bot`)} untuk me-unmute bot.`\n        )\n      );\n    if (await ctx.group().isOwner(accountJid))\n      return await ctx.reply(formatter.quote('âŽ Dia adalah owner grup!'));\n\n    try {\n      let muteList = (await db.get(`group.${groupId}.mute`)) || [];\n      muteList = muteList.filter(mute => mute !== accountId);\n      await db.set(`group.${groupId}.mute`, muteList);\n\n      await ctx.reply(formatter.quote('âœ… Berhasil me-unmute pengguna itu dari grup ini!'));\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\owner\\readviewonce.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":7,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":7,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":14,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":14,"endColumn":21}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const MessageType = {\n  audioMessage: 'audioMessage',\n  imageMessage: 'imageMessage',\n  videoMessage: 'videoMessage',\n};\n\nmodule.exports = {\n  name: 'readviewonce',\n  aliases: ['rvo'],\n  category: 'owner',\n  permissions: {\n    owner: true,\n  },\n  code: async ctx => {\n    const { formatter, tools } = ctx.bot.context;\n    if (!tools.cmd.checkQuotedMedia(ctx.quoted?.contentType, ['viewOnce']))\n      return await ctx.reply(\n        formatter.quote(tools.msg.generateInstruction(['reply'], ['viewOnce']))\n      );\n\n    try {\n      const { quoted } = ctx;\n      const quotedType = Object.keys(quoted).find(key => key.endsWith('Message'));\n      const msg = quoted[quotedType];\n      const buffer = await ctx.quoted?.media.toBuffer();\n\n      const options = {\n        mimetype: msg.mimetype,\n        caption: msg.caption || '',\n      };\n\n      if (quotedType === MessageType.audioMessage) {\n        await ctx.reply({\n          audio: buffer,\n          mimetype: msg.mimetype,\n          ptt: true,\n        });\n      } else if (quotedType === MessageType.imageMessage) {\n        await ctx.reply({\n          image: buffer,\n          ...options,\n        });\n      } else if (quotedType === MessageType.videoMessage) {\n        await ctx.reply({\n          video: buffer,\n          ...options,\n        });\n      }\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\owner\\repair.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":26,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":33},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":7,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":7,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'run'.","line":13,"column":9,"nodeType":"FunctionExpression","messageId":"missingReturn","endLine":13,"endColumn":12},{"ruleId":"no-unused-vars","severity":1,"message":"'config' is defined but never used. Allowed unused args must match /^_/u.","line":13,"column":30,"nodeType":"Identifier","messageId":"unusedVar","endLine":13,"endColumn":36,"suggestions":[{"messageId":"removeVar","data":{"varName":"config"},"fix":{"range":[389,401],"text":""},"desc":"Remove unused variable 'config'."}]},{"ruleId":"no-undef","severity":2,"message":"'global' is not defined.","line":28,"column":46,"nodeType":"Identifier","messageId":"undef","endLine":28,"endColumn":52},{"ruleId":"no-undef","severity":2,"message":"'global' is not defined.","line":28,"column":61,"nodeType":"Identifier","messageId":"undef","endLine":28,"endColumn":67},{"ruleId":"no-undef","severity":2,"message":"'global' is not defined.","line":108,"column":11,"nodeType":"Identifier","messageId":"undef","endLine":108,"endColumn":17},{"ruleId":"no-undef","severity":2,"message":"'global' is not defined.","line":109,"column":9,"nodeType":"Identifier","messageId":"undef","endLine":109,"endColumn":15},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":112,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":112,"endColumn":20,"suggestions":[{"fix":{"range":[4411,4461],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]}],"suppressedMessages":[],"errorCount":7,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const UnifiedSmartAuth = require('../../src/services/auth/UnifiedSmartAuth');\n\n/**\n * Re-pair Command\n * Allows users to force re-pairing with different authentication methods\n */\nmodule.exports = {\n  name: 'repair',\n  alias: ['reconnect', 'reauth', 'repair'],\n  category: 'owner',\n  desc: 'Force re-pairing with different authentication method',\n  isOwner: true,\n  async run({ msg, args }, { config }) {\n    try {\n      const method = args[0]?.toLowerCase();\n\n      // Validate method\n      const validMethods = ['qr', 'pairing', 'hybrid'];\n      if (method && !validMethods.includes(method)) {\n        return msg.reply(\n          `âŒ Invalid method. Choose from: ${validMethods.join(', ')}\\n\\nðŸ’¡ Usage: .repair [method]\\n   .repair qr - Force QR code authentication\\n   .repair pairing - Force pairing code authentication\\n   .repair hybrid - Use both methods\\n   .repair - Auto-detect best method`\n        );\n      }\n\n      await msg.reply('ðŸ”„ Starting re-pairing process...');\n\n      // Create unified smart auth manager instance\n      const smartAuth = new UnifiedSmartAuth(global.config, global.bot);\n\n      // Execute re-pairing\n      const authResult = await smartAuth.detectExistingSession(); // Adjust method as needed based on class API\n      // Note: UnifiedSmartAuth may not have executeSmartAuth; adapt based on actual methods\n\n      // Display results\n      let response = 'âœ… Re-pairing initiated!\\n\\n';\n\n      if (authResult.isRepaired) {\n        response += `ðŸ”„ **Forced Re-pairing Mode**\\n`;\n        response += `ðŸ“Š Method: ${authResult.result.method.toUpperCase()}\\n\\n`;\n      }\n\n      // Display authentication instructions\n      if (authResult.instructions.title) {\n        response += `ðŸŽ¯ ${authResult.instructions.title}\\n\\n`;\n      }\n\n      if (authResult.instructions.introduction) {\n        response += `ðŸ’¡ ${authResult.instructions.introduction}\\n\\n`;\n      }\n\n      // Display method-specific instructions\n      if (authResult.result.method === 'hybrid' && authResult.instructions.methods) {\n        if (authResult.instructions.methods.qr) {\n          response += `ðŸ”— **OPTION 1: QR CODE METHOD**\\n`;\n          authResult.instructions.methods.qr.steps.forEach((step, i) => {\n            response += `   ${i + 1}. ${step}\\n`;\n          });\n          response += `\\n`;\n        }\n\n        if (authResult.instructions.methods.pairing) {\n          response += `ðŸ”¢ **OPTION 2: PAIRING CODE METHOD**\\n`;\n          authResult.instructions.methods.pairing.steps.forEach((step, i) => {\n            response += `   ${i + 1}. ${step}\\n`;\n          });\n          response += `\\n`;\n        }\n\n        if (authResult.instructions.recommendations) {\n          response += `ðŸ’¡ **RECOMMENDATIONS:**\\n`;\n          Object.entries(authResult.instructions.recommendations).forEach(([key, value]) => {\n            response += `   â€¢ ${key.charAt(0).toUpperCase() + key.slice(1)}: ${value}\\n`;\n          });\n        }\n      } else if (authResult.result.method === 'qr' && authResult.instructions.steps) {\n        response += `ðŸ”— **QR CODE AUTHENTICATION:**\\n`;\n        authResult.instructions.steps.forEach((step, i) => {\n          response += `   ${i + 1}. ${step}\\n`;\n        });\n      } else if (authResult.result.method === 'pairing' && authResult.instructions.steps) {\n        response += `ðŸ”¢ **PAIRING CODE AUTHENTICATION:**\\n`;\n        authResult.instructions.steps.forEach((step, i) => {\n          response += `   ${i + 1}. ${step}\\n`;\n        });\n\n        // Display pairing code details\n        if (authResult.instructions.pairingCode) {\n          response += `\\nðŸ”‘ **PAIRING CODE:**\\n`;\n          response += `   ðŸ“ Phonetic: ${authResult.instructions.pairingCode.phonetic}\\n`;\n          response += `   ðŸ”¤ Alphanumeric: ${authResult.instructions.pairingCode.alphanumeric}\\n`;\n          response += `   ðŸ”¢ Numeric: ${authResult.instructions.pairingCode.numeric}\\n`;\n        }\n      }\n\n      // Add timeout information\n      if (authResult.instructions.timeout) {\n        response += `\\nâ° ${authResult.instructions.timeout}\\n`;\n      }\n\n      // Add refresh information\n      if (authResult.instructions.refresh) {\n        response += `ðŸ”„ ${authResult.instructions.refresh}\\n`;\n      }\n\n      await msg.reply(response);\n\n      // Store auth result in context for potential restart\n      if (global.context) {\n        global.context.lastRepairResult = authResult;\n      }\n    } catch (error) {\n      console.error('Re-pairing command error:', error);\n      await msg.reply(\n        `âŒ Re-pairing failed: ${error.message}\\n\\nðŸ’¡ Try again or check your configuration.`\n      );\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\owner\\restart.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":18,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":25},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":2,"column":17,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":24},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":3,"column":14,"nodeType":"Identifier","messageId":"undef","endLine":3,"endColumn":21},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":5,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":5,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":12,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":12,"endColumn":21}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const { exec } = require('node:child_process');\nconst process = require('node:process');\nconst util = require('node:util');\n\nmodule.exports = {\n  name: 'restart',\n  aliases: ['r'],\n  category: 'owner',\n  permissions: {\n    owner: true,\n  },\n  code: async ctx => {\n    const { formatter, tools, config, database: db } = ctx.bot.context;\n    if (!process.env.PM2_HOME)\n      return await ctx.reply(\n        formatter.quote('âŽ Bot is not running under PM2! Manual restart required.')\n      );\n\n    try {\n      const waitMsg = await ctx.reply(config.msg.wait);\n      await db.set('bot.restart', {\n        jid: ctx.id,\n        key: waitMsg.key,\n        timestamp: Date.now(),\n      });\n\n      await util.promisify(exec)('pm2 restart $(basename $(pwd))'); // Hanya berfungsi saat menggunakan PM2\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\owner\\setbotpp.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":1,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":8,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":8,"endColumn":21}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"module.exports = {\n  name: 'setbotpp',\n  aliases: ['setboticon', 'seticonbot', 'setppbot'],\n  category: 'owner',\n  permissions: {\n    owner: true,\n  },\n  code: async ctx => {\n    const { formatter, tools } = ctx.bot.context;\n    const [checkMedia, checkQuotedMedia] = await Promise.all([\n      tools.cmd.checkMedia(ctx.msg.contentType, 'image'),\n      tools.cmd.checkQuotedMedia(ctx.quoted?.contentType, 'image'),\n    ]);\n\n    if (!checkMedia && !checkQuotedMedia)\n      return await ctx.reply(\n        formatter.quote(tools.msg.generateInstruction(['send', 'reply'], 'image'))\n      );\n\n    try {\n      const buffer = (await ctx.msg.media.toBuffer()) || (await ctx.quoted?.media.toBuffer());\n      await ctx.core.updateProfilePicture(ctx.core.user.id, buffer);\n\n      await ctx.reply(formatter.quote('âœ… Berhasil mengubah gambar profil bot!'));\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\owner\\stopjadibot.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":6,"column":25,"nodeType":"Identifier","messageId":"undef","endLine":6,"endColumn":32},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":8,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":8,"endColumn":7},{"ruleId":"no-unused-vars","severity":1,"message":"'args' is defined but never used. Allowed unused args must match /^_/u.","line":16,"column":30,"nodeType":"Identifier","messageId":"unusedVar","endLine":16,"endColumn":34,"suggestions":[{"messageId":"removeVar","data":{"varName":"args"},"fix":{"range":[342,352],"text":""},"desc":"Remove unused variable 'args'."}]},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'execute'.","line":16,"column":38,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":16,"endColumn":40},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":32,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":32,"endColumn":20,"suggestions":[{"fix":{"range":[819,864],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":37,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":37,"endColumn":20,"suggestions":[{"fix":{"range":[989,1043],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":45,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":45,"endColumn":20,"suggestions":[{"fix":{"range":[1299,1356],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Stop JadiBot Command\n * Stop user's bot instance\n */\n\nconst multiBotService = require('../../src/services/multiBotService');\n\nmodule.exports = {\n  name: 'stopjadibot',\n  description: 'Stop your bot instance',\n  category: 'Owner',\n  usage: '!stopjadibot',\n  aliases: ['stopbot', 'deljadibot'],\n  cooldown: 10,\n\n  execute: async (naze, m, { args }) => {\n    try {\n      const userId = m.sender;\n\n      // Check if user has active bot\n      if (!multiBotService.hasActiveBot(userId)) {\n        return m.reply(\"You don't have an active bot instance!\");\n      }\n\n      await m.reply('â³ Stopping your bot instance...');\n\n      // Stop bot instance\n      const result = await multiBotService.stopBot(userId, 'manual');\n\n      if (result.success) {\n        await m.reply('âœ… Bot instance stopped successfully!');\n        console.log(`JadiBot stopped for ${userId}`);\n      } else {\n        await m.reply('Failed to stop bot instance. Please try again.');\n      }\n    } catch (error) {\n      console.error('Error in stopjadibot command:', error);\n\n      if (error.message.includes(\"don't have an active bot\")) {\n        await m.reply(\"You don't have an active bot instance!\");\n      } else {\n        await m.reply('Terjadi kesalahan saat menghentikan bot instance. Silakan coba lagi.');\n      }\n\n      console.error('Unexpected error in stopjadibot:', error);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\owner\\unbanuser.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":1,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":8,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":8,"endColumn":21}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"module.exports = {\n  name: 'unbanuser',\n  aliases: ['ubu', 'unban'],\n  category: 'owner',\n  permissions: {\n    owner: true,\n  },\n  code: async ctx => {\n    const { formatter, tools, database: db } = ctx.bot.context;\n    const userJid =\n      ctx.quoted?.senderJid ||\n      (await ctx.getMentioned())[0] ||\n      (ctx.args[0] ? `${ctx.args[0].replace(/[^\\d]/g, '')}@s.whatsapp.net` : null);\n\n    if (!userJid)\n      return await ctx.reply({\n        text:\n          `${formatter.quote(tools.msg.generateInstruction(['send'], ['text']))}\\n` +\n          `${formatter.quote(tools.msg.generateCmdExample(ctx.used, `@${ctx.getId(ctx.sender.jid)}`))}\\n` +\n          `${formatter.quote(tools.msg.generateNotes(['Balas atau kutip pesan untuk menjadikan pengirim sebagai akun target.']))}\\n${formatter.quote(\n            tools.msg.generatesFlagInfo({\n              '-s': 'Tetap diam dengan tidak menyiarkan ke orang yang relevan',\n            })\n          )}`,\n        mentions: [ctx.sender.jid],\n      });\n\n    const isOnWhatsApp = await ctx.core.onWhatsApp(userJid);\n    if (isOnWhatsApp.length === 0)\n      return await ctx.reply(formatter.quote('âŽ Akun tidak ada di WhatsApp!'));\n\n    try {\n      await db.set(`user.${ctx.getId(userJid)}.banned`, false);\n\n      const flag = tools.cmd.parseFlag(ctx.args.join(' '), {\n        '-s': {\n          type: 'boolean',\n          key: 'silent',\n        },\n      });\n\n      const silent = flag?.silent || false;\n      if (!silent)\n        await ctx.sendMessage(userJid, {\n          text: formatter.quote('ðŸŽ‰ Kamu telah diunbanned oleh Owner!'),\n        });\n\n      await ctx.reply(formatter.quote('âœ… Berhasil diunbanned!'));\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\profile\\afk.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":1,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":7}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"module.exports = {\n  name: 'afk',\n  category: 'profile',\n  code: async ctx => {\n    const { formatter, tools, database: db } = ctx.bot.context;\n    const input = ctx.args.join(' ') || null;\n\n    try {\n      await db.set(`user.${ctx.getId(ctx.sender.jid)}.afk`, {\n        reason: input,\n        timestamp: Date.now(),\n      });\n\n      await ctx.reply(\n        formatter.quote(\n          `ðŸ“´ Kamu akan AFK, ${input ? `dengan alasan ${formatter.inlineCode(input)}` : 'tanpa alasan apapun'}.`\n        )\n      );\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\profile\\claim.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":11,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":18},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":2,"column":33,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":40},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":34,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":34,"endColumn":7},{"ruleId":"no-undef","severity":2,"message":"'db' is not defined.","line":67,"column":29,"nodeType":"Identifier","messageId":"undef","endLine":67,"endColumn":31},{"ruleId":"no-undef","severity":2,"message":"'db' is not defined.","line":92,"column":13,"nodeType":"Identifier","messageId":"undef","endLine":92,"endColumn":15},{"ruleId":"no-undef","severity":2,"message":"'db' is not defined.","line":93,"column":13,"nodeType":"Identifier","messageId":"undef","endLine":93,"endColumn":15},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":101,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":101,"endColumn":20,"suggestions":[{"fix":{"range":[3136,3157],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]}],"suppressedMessages":[],"errorCount":6,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const z = require('zod');\nconst { convertMsToDuration } = require('../../utils/formatters');\n\n// List of available claim rewards\nconst claimRewards = {\n  daily: {\n    reward: 100,\n    cooldown: 24 * 60 * 60 * 1000, // 24 hours (100 coins)\n    level: 1,\n    description: 'Daily reward',\n  },\n  weekly: {\n    reward: 500,\n    cooldown: 7 * 24 * 60 * 60 * 1000, // 7 days (500 coins)\n    level: 15,\n    description: 'Weekly reward',\n  },\n  monthly: {\n    reward: 2000,\n    cooldown: 30 * 24 * 60 * 60 * 1000, // 30 days (2000 coins)\n    level: 50,\n    description: 'Monthly reward',\n  },\n  yearly: {\n    reward: 10000,\n    cooldown: 365 * 24 * 60 * 60 * 1000, // 365 days (10000 coins)\n    level: 75,\n    description: 'Yearly reward',\n  },\n};\n\nconst claimTypes = Object.keys(claimRewards);\n\nmodule.exports = {\n  name: 'claim',\n  aliases: ['bonus', 'klaim'],\n  category: 'profile',\n  code: async ctx => {\n    const { formatter, config } = ctx.bot.context;\n\n    try {\n      const input = (ctx.args.join(' ') || '').toLowerCase();\n\n      if (input === 'list') {\n        const listText = claimTypes\n          .map(type => formatter.quote(`${type} (${claimRewards[type].description})`))\n          .join('\\n');\n        return ctx.reply({ text: listText, footer: config.msg.footer });\n      }\n\n      // Validation\n      const claimSchema = z.enum(claimTypes, {\n        errorMap: () => ({\n          message: 'Invalid claim type. Use \".claim list\" to see available claims.',\n        }),\n      });\n      const claimCheck = claimSchema.safeParse(input);\n\n      if (!claimCheck.success) {\n        return ctx.reply(formatter.quote(`âŽ ${claimCheck.error.issues[0].message}`));\n      }\n      const claimType = claimCheck.data;\n      const claim = claimRewards[claimType];\n\n      // Business Logic\n      const senderId = ctx.getId(ctx.sender.jid);\n      const userDb = (await db.get(`user.${senderId}`)) || {};\n      const level = userDb?.level || 0;\n\n      if (ctx.isOwner || userDb?.premium)\n        return ctx.reply(formatter.quote('âŽ You have unlimited coins and cannot claim rewards.'));\n      if (level < claim.level)\n        return ctx.reply(\n          formatter.quote(\n            `âŽ You need to be level ${claim.level} to claim this. Your current level is ${level}.`\n          )\n        );\n\n      const currentTime = Date.now();\n      const lastClaim = (userDb?.lastClaim ?? {})[claimType] || 0;\n      const timePassed = currentTime - lastClaim;\n      const remainingTime = claim.cooldown - timePassed;\n\n      if (remainingTime > 0)\n        return ctx.reply(\n          formatter.quote(\n            `â³ You have already claimed the ${claimType} reward. Please wait ${convertMsToDuration(remainingTime)}.`\n          )\n        );\n\n      const rewardCoin = (userDb?.coin || 0) + claim.reward;\n      await db.set(`user.${senderId}.coin`, rewardCoin);\n      await db.set(`user.${senderId}.lastClaim.${claimType}`, currentTime);\n\n      return ctx.reply(\n        formatter.quote(\n          `âœ… You successfully claimed the ${claimType} reward of ${claim.reward} coins! Your current balance is ${rewardCoin}.`\n        )\n      );\n    } catch (error) {\n      console.error(error);\n      return ctx.reply(formatter.quote(`An error occurred: ${error.message}`));\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\profile\\coin.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":1,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":5,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":5,"endColumn":21}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"module.exports = {\n  name: 'coin',\n  aliases: ['koin'],\n  category: 'profile',\n  code: async ctx => {\n    const { formatter, tools, database: db } = ctx.bot.context;\n    const senderId = ctx.getId(ctx.sender.jid);\n    const userDb = (await db.get(`user.${senderId}`)) || {};\n\n    if (tools.cmd.isOwner(senderId, ctx.msg.key.id) || userDb?.premium)\n      return await ctx.reply(formatter.quote('ðŸ¤‘ Kamu memiliki koin tak terbatas.'));\n\n    try {\n      const userCoin = userDb?.coin || 0;\n\n      await ctx.reply(formatter.quote(`ðŸ’° Kamu memiliki ${userCoin} koin tersisa.`));\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\profile\\leaderboard.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":1,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":7},{"ruleId":"no-nested-ternary","severity":2,"message":"Do not nest ternary expressions.","line":26,"column":29,"nodeType":"ConditionalExpression","messageId":"noNestedTernary","endLine":26,"endColumn":98}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"module.exports = {\n  name: 'leaderboard',\n  aliases: ['lb', 'peringkat'],\n  category: 'profile',\n  code: async ctx => {\n    const { formatter, tools, config, database: db } = ctx.bot.context;\n    try {\n      const senderId = ctx.getId(ctx.sender.jid);\n      const users = await db.get('user');\n\n      const leaderboardData = Object.entries(users)\n        .map(([id, data]) => ({\n          id,\n          username: data.username || 'guest',\n          level: data.level || 0,\n          winGame: data.winGame || 0,\n        }))\n        .sort((a, b) => b.winGame - a.winGame || b.level - a.level);\n\n      const userRank = leaderboardData.findIndex(user => user.id === senderId) + 1;\n      const topUsers = leaderboardData.slice(0, 10);\n      let resultText = '';\n\n      topUsers.forEach((user, index) => {\n        const isSelf = user.id === senderId;\n        const displayName = isSelf ? `@${user.id}` : user.username ? user.username : `${user.id}`;\n        resultText += formatter.quote(\n          `${index + 1}. ${displayName} - Menang: ${user.winGame}, Level: ${user.level}\\n`\n        );\n      });\n\n      if (userRank > 10) {\n        const userStats = leaderboardData[userRank - 1];\n        const displayName = `@${senderId}`;\n        resultText += formatter.quote(\n          `${userRank}. ${displayName} - Menang: ${userStats.winGame}, Level: ${userStats.level}\\n`\n        );\n      }\n\n      await ctx.reply({\n        text: resultText.trim(),\n        mentions: [`${senderId}@s.whatsapp.net`],\n        footer: config.msg.footer,\n      });\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\profile\\profile.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":1,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":7},{"ruleId":"no-nested-ternary","severity":2,"message":"Do not nest ternary expressions.","line":26,"column":41,"nodeType":"ConditionalExpression","messageId":"noNestedTernary","endLine":26,"endColumn":240}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"module.exports = {\n  name: 'profile',\n  aliases: ['me', 'prof', 'profil'],\n  category: 'profile',\n  permissions: {},\n  code: async ctx => {\n    const { formatter, tools, config, database: db } = ctx.bot.context;\n    try {\n      const senderId = ctx.getId(ctx.sender.jid);\n      const users = await db.get('user');\n\n      const leaderboardData = Object.entries(users)\n        .map(([id, data]) => ({\n          id,\n          winGame: data.winGame || 0,\n          level: data.level || 0,\n        }))\n        .sort((a, b) => b.winGame - a.winGame || b.level - a.level);\n\n      const userDb = (await db.get(`user.${senderId}`)) || {};\n      const isOwner = tools.cmd.isOwner(senderId, ctx.msg.key.id);\n\n      await ctx.reply({\n        text:\n          `${formatter.quote(`Nama: ${ctx.sender.pushName} (${userDb?.username})`)}\\n` +\n          `${formatter.quote(`Status: ${isOwner ? 'Owner' : userDb?.premium ? `Premium (${userDb?.premiumExpiration ? `${tools.msg.convertMsToDuration(Date.now() - userDb.premiumExpiration, ['hari'])} tersisa` : 'Selamanya'})` : 'Freemium'}`)}\\n` +\n          `${formatter.quote(`Level: ${userDb?.level || 0} (${userDb?.xp || 0}/100)`)}\\n` +\n          `${formatter.quote(`Koin: ${isOwner || userDb?.premium ? 'Tak terbatas' : userDb?.coin}`)}\\n` +\n          `${formatter.quote(`Menang: ${userDb?.winGame || 0}`)}\\n${formatter.quote(\n            `Peringkat: ${leaderboardData.findIndex(user => user.id === senderId) + 1}`\n          )}`,\n        footer: config.msg.footer,\n      });\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\profile\\reset.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":1,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":7},{"ruleId":"no-undef","severity":2,"message":"'collector' is not defined.","line":44,"column":13,"nodeType":"Identifier","messageId":"undef","endLine":44,"endColumn":22},{"ruleId":"no-undef","severity":2,"message":"'collector' is not defined.","line":47,"column":13,"nodeType":"Identifier","messageId":"undef","endLine":47,"endColumn":22}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"module.exports = {\n  name: 'reset',\n  category: 'profile',\n  permissions: {\n    private: true,\n  },\n  code: async ctx => {\n    const { formatter, tools, config, database: db } = ctx.bot.context;\n    await ctx.reply({\n      text: formatter.quote(\n        `ðŸ¤– Apakah kamu yakin ingin mereset datamu? Langkah ini akan menghapus seluruh data yang tersimpan dan tidak dapat dikembalikan.`\n      ),\n      footer: config.msg.footer,\n      buttons: [\n        {\n          buttonId: `y`,\n          buttonText: {\n            displayText: 'Ya',\n          },\n        },\n        {\n          buttonId: 'n',\n          buttonText: {\n            displayText: 'Tidak',\n          },\n        },\n      ],\n    });\n\n    try {\n      ctx\n        .awaitMessages({\n          time: 60000,\n        })\n        .then(async m => {\n          const content = m.content.trim().toLowerCase();\n          const senderId = ctx.getId(ctx.sender.jid);\n\n          if (content === 'y') {\n            await db.delete(`user.${senderId}`);\n            await ctx.reply(\n              formatter.quote('âœ… Data-mu berhasil direset, semua data telah dihapus!')\n            );\n            collector.stop();\n          } else if (content === 'n') {\n            await ctx.reply(formatter.quote('âŒ Proses reset data telah dibatalkan.'));\n            collector.stop();\n          }\n        });\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\profile\\setprofile.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":1,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":5,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":5,"endColumn":21},{"ruleId":"no-shadow","severity":2,"message":"'input' is already declared in the upper scope on line 7 column 11.","line":34,"column":17,"nodeType":"Identifier","messageId":"noShadow","endLine":34,"endColumn":22}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"module.exports = {\n  name: 'setprofile',\n  aliases: ['set', 'setp', 'setprof'],\n  category: 'profile',\n  code: async ctx => {\n    const { formatter, tools, config, database: db } = ctx.bot.context;\n    const input = ctx.args.join(' ') || null;\n\n    if (!input)\n      return await ctx.reply(\n        `${formatter.quote(tools.msg.generateInstruction(['send'], ['text']))}\\n` +\n          `${formatter.quote(tools.msg.generateCmdExample(ctx.used, 'autolevelup'))}\\n${formatter.quote(\n            tools.msg.generateNotes([\n              `Type ${formatter.inlineCode(`${ctx.used.prefix + ctx.used.command} list`)} to see the list.`,\n            ])\n          )}`\n      );\n\n    if (input.toLowerCase() === 'list') {\n      const listText = await tools.list.get('setprofile');\n      return await ctx.reply({\n        text: listText,\n        footer: config.msg.footer,\n      });\n    }\n\n    try {\n      const senderId = ctx.getId(ctx.sender.jid);\n      const { args } = ctx;\n      const command = args[0]?.toLowerCase();\n\n      switch (command) {\n        case 'username': {\n          const input = args.slice(1).join(' ').trim();\n\n          if (!input)\n            return await ctx.reply(\n              formatter.quote('âŽ Please enter the username you want to use.')\n            );\n          if (/[^a-zA-Z0-9._-]/.test(input))\n            return await ctx.reply(\n              formatter.quote(\n                'âŽ Username can only contain letters, numbers, dots (.), underscores (_) or hyphens (-).'\n              )\n            );\n\n          const usernameTaken = Object.values((await db.get('user')) || {}).some(\n            user => user.username === input\n          );\n          if (usernameTaken)\n            return await ctx.reply(\n              formatter.quote('âŽ That username is already used by another user.')\n            );\n\n          const username = `@${input}`;\n          await db.set(`user.${senderId}.username`, username);\n          await ctx.reply(\n            formatter.quote(\n              `âœ… Username successfully changed to ${formatter.inlineCode(username)}!`\n            )\n          );\n          break;\n        }\n        case 'autolevelup': {\n          const setKey = `user.${senderId}.autolevelup`;\n          const currentStatus = (await db.get(setKey)) || false;\n          const newStatus = !currentStatus;\n          await db.set(setKey, newStatus);\n\n          const statusText = newStatus ? 'enabled' : 'disabled';\n          await ctx.reply(formatter.quote(`âœ… Auto level up successfully ${statusText}!`));\n          break;\n        }\n        default:\n          await ctx.reply(\n            formatter.quote(`âŽ Setting ${formatter.inlineCode(input)} is not valid.`)\n          );\n      }\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\profile\\transfer.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":11,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":18},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":3,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":3,"endColumn":7},{"ruleId":"no-undef","severity":2,"message":"'db' is not defined.","line":48,"column":29,"nodeType":"Identifier","messageId":"undef","endLine":48,"endColumn":31},{"ruleId":"no-undef","severity":2,"message":"'db' is not defined.","line":56,"column":13,"nodeType":"Identifier","messageId":"undef","endLine":56,"endColumn":15},{"ruleId":"no-undef","severity":2,"message":"'db' is not defined.","line":57,"column":13,"nodeType":"Identifier","messageId":"undef","endLine":57,"endColumn":15},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":61,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":61,"endColumn":20,"suggestions":[{"fix":{"range":[2084,2105],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const z = require('zod');\n\nmodule.exports = {\n  name: 'transfer',\n  aliases: ['tf'],\n  category: 'profile',\n  code: async ctx => {\n    const { formatter } = ctx.bot.context;\n\n    try {\n      // Argument parsing\n      const userJid =\n        ctx.quoted?.senderJid ||\n        (await ctx.getMentioned())[0] ||\n        (ctx.args[0] ? `${ctx.args[0].replace(/[^\\d]/g, '')}${`@s.whatsapp.net`}` : null);\n      const amountStr = ctx.quoted?.senderJid ? ctx.args[0] : ctx.args[1];\n\n      // Validation\n      if (!userJid || !amountStr) {\n        return ctx.reply(\n          formatter.quote(\n            'Please specify a user and an amount to transfer.\\n\\nExample: .transfer @user 100'\n          )\n        );\n      }\n\n      const amountSchema = z.coerce\n        .number({ invalid_type_error: 'The amount must be a number.' })\n        .int()\n        .positive('The amount must be a positive whole number.');\n      const validationResult = amountSchema.safeParse(amountStr);\n\n      if (!validationResult.success) {\n        return ctx.reply(\n          formatter.quote(`âŽ Invalid amount: ${validationResult.error.issues[0].message}`)\n        );\n      }\n      const coinAmount = validationResult.data;\n\n      // Business logic\n      const senderJid = ctx.sender.jid;\n      const senderId = ctx.getId(senderJid);\n\n      const isOnWhatsApp = await ctx.core.onWhatsApp(userJid);\n      if (isOnWhatsApp.length === 0)\n        return ctx.reply(formatter.quote('âŽ User not found on WhatsApp!'));\n\n      const userDb = (await db.get(`user.${senderId}`)) || {};\n\n      if (ctx.isOwner || userDb?.premium)\n        return ctx.reply(formatter.quote('âŽ Unlimited coins cannot be transferred.'));\n      if (userDb?.coin < coinAmount)\n        return ctx.reply(formatter.quote('âŽ You do not have enough coins for this transfer!'));\n\n      // Database transaction\n      await db.add(`user.${ctx.getId(userJid)}.coin`, coinAmount);\n      await db.subtract(`user.${senderId}.coin`, coinAmount);\n\n      return ctx.reply(formatter.quote(`âœ… Successfully transferred ${coinAmount} coins!`));\n    } catch (error) {\n      console.error(error);\n      return ctx.reply(formatter.quote(`An error occurred: ${error.message}`));\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\search\\githubsearch.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":22},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":3,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":3,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":10,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":10,"endColumn":21},{"ruleId":"no-useless-concat","severity":2,"message":"Unexpected string concatenation of literals.","line":39,"column":20,"nodeType":"BinaryExpression","messageId":"unexpectedConcat","endLine":39,"endColumn":21}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const axios = require('axios');\n\nmodule.exports = {\n  name: 'githubsearch',\n  aliases: ['github', 'githubs'],\n  category: 'search',\n  permissions: {\n    coin: 10,\n  },\n  code: async ctx => {\n    const { formatter, tools, config } = ctx.bot.context;\n    const input = ctx.args.join(' ') || null;\n\n    if (!input)\n      return await ctx.reply(\n        `${formatter.quote(tools.msg.generateInstruction(['send'], ['text']))}\\n${formatter.quote(\n          tools.msg.generateCmdExample(ctx.used, 'whatsdex')\n        )}`\n      );\n\n    try {\n      const apiUrl = tools.api.createUrl('neko', '/search/github-search', {\n        q: input,\n      });\n      const { result } = (await axios.get(apiUrl)).data;\n\n      const resultText = result\n        .map(\n          res =>\n            `${formatter.quote(`Name: ${res.full_name}`)}\n` +\n            `${formatter.quote(`Description: ${res.description}`)}\n` +\n            `${formatter.quote(`Count: ${res.stars} stars, ${res.forks} forks`)}\n` +\n            `${formatter.quote(`Language: ${res.language}`)}\n${formatter.quote(`URL: ${res.url}`)}`\n        )\n        .join('\\n' + `${formatter.quote('Â· Â· â”€ Â·âœ¶Â· â”€ Â· Â·')}\\n`);\n      await ctx.reply({\n        text: resultText || config.msg.notFound,\n        footer: config.msg.footer,\n      });\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error, true);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\search\\googlesearch.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":22},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":2,"column":11,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":18},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":3,"column":23,"nodeType":"Identifier","messageId":"undef","endLine":3,"endColumn":30},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":5,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":5,"endColumn":7},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":54,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":54,"endColumn":20,"suggestions":[{"fix":{"range":[1482,1503],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const axios = require('axios');\nconst z = require('zod');\nconst { createUrl } = require('../../tools/api');\n\nmodule.exports = {\n  name: 'googlesearch',\n  aliases: ['google', 'googles'],\n  category: 'search',\n  permissions: {\n    coin: 10,\n  },\n  code: async ctx => {\n    const { formatter, config } = ctx.bot.context;\n\n    try {\n      const input = ctx.args.join(' ');\n\n      // Validation\n      const querySchema = z.string().min(1, { message: 'Please provide a search query.' });\n      const queryCheck = querySchema.safeParse(input);\n\n      if (!queryCheck.success) {\n        return ctx.reply(\n          formatter.quote(\n            `âŽ ${queryCheck.error.issues[0].message}\\n\\nExample: .google what is whatsapp`\n          )\n        );\n      }\n      const query = queryCheck.data;\n\n      // API Call\n      const apiUrl = createUrl('neko', '/search/google', {\n        q: query,\n      });\n      const { result } = (await axios.get(apiUrl)).data;\n\n      if (!result || result.length === 0) {\n        return ctx.reply(formatter.quote(config.msg.notFound));\n      }\n\n      const resultText = result\n        .map(\n          res =>\n            `${formatter.quote(`Title: ${res.title}`)}\\n` +\n            `${formatter.quote(`Description: ${res.desc}`)}\\n${formatter.quote(`URL: ${res.url}`)}`\n        )\n        .join(`\\n${formatter.quote('Â· Â· â”€ Â·âœ¶Â· â”€ Â· Â·')}\\n`);\n\n      return ctx.reply({\n        text: resultText,\n        footer: config.msg.footer,\n      });\n    } catch (error) {\n      console.error(error);\n      return ctx.reply(formatter.quote(`An error occurred: ${error.message}`));\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\search\\npmsearch.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":22},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":3,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":3,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":10,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":10,"endColumn":21},{"ruleId":"no-useless-concat","severity":2,"message":"Unexpected string concatenation of literals.","line":35,"column":20,"nodeType":"BinaryExpression","messageId":"unexpectedConcat","endLine":35,"endColumn":21}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const axios = require('axios');\n\nmodule.exports = {\n  name: 'npmsearch',\n  aliases: ['npm', 'npms'],\n  category: 'search',\n  permissions: {\n    coin: 10,\n  },\n  code: async ctx => {\n    const { formatter, tools, config } = ctx.bot.context;\n    const input = ctx.args.join(' ') || null;\n\n    if (!input)\n      return await ctx.reply(\n        `${formatter.quote(tools.msg.generateInstruction(['send'], ['text']))}\\n${formatter.quote(\n          tools.msg.generateCmdExample(ctx.used, 'baileys')\n        )}`\n      );\n\n    try {\n      const apiUrl = tools.api.createUrl('hang', '/search/npm', {\n        q: input,\n      });\n      const { result } = (await axios.get(apiUrl)).data;\n\n      const resultText = result\n        .map(\n          res =>\n            `${formatter.quote(`Name: ${res.title}`)}\\n` +\n            `${formatter.quote(`Developer: ${res.author}`)}\\n${formatter.quote(\n              `URL: ${res.links.npm}`\n            )}`\n        )\n        .join('\\n' + `${formatter.quote('Â· Â· â”€ Â·âœ¶Â· â”€ Â· Â·')}\\n`);\n      await ctx.reply({\n        text: resultText || config.msg.notFound,\n        footer: config.msg.footer,\n      });\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error, true);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\search\\sfilesearch.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":22},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":3,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":3,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":10,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":10,"endColumn":21},{"ruleId":"no-useless-concat","severity":2,"message":"Unexpected string concatenation of literals.","line":33,"column":20,"nodeType":"BinaryExpression","messageId":"unexpectedConcat","endLine":33,"endColumn":21}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const axios = require('axios');\n\nmodule.exports = {\n  name: 'sfilesearch',\n  aliases: ['sfile', 'sfiles'],\n  category: 'search',\n  permissions: {\n    coin: 10,\n  },\n  code: async ctx => {\n    const { formatter, tools, config } = ctx.bot.context;\n    const input = ctx.args.join(' ') || null;\n\n    if (!input)\n      return await ctx.reply(\n        `${formatter.quote(tools.msg.generateInstruction(['send'], ['text']))}\\n${formatter.quote(\n          tools.msg.generateCmdExample(ctx.used, 'evangelion')\n        )}`\n      );\n\n    try {\n      const apiUrl = tools.api.createUrl('hang', '/search/sfile', {\n        q: input,\n      });\n      const { result } = (await axios.get(apiUrl)).data;\n\n      const resultText = result\n        .map(\n          res =>\n            `${formatter.quote(`Nama: ${res.title}`)}\\n` +\n            `${formatter.quote(`Ukuran: ${res.size}`)}\\n${formatter.quote(`URL: ${res.link}`)}`\n        )\n        .join('\\n' + `${formatter.quote('Â· Â· â”€ Â·âœ¶Â· â”€ Â· Â·')}\\n`);\n      await ctx.reply({\n        text: resultText || config.msg.notFound,\n        footer: config.msg.footer,\n      });\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error, true);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\search\\soundcloudsearch.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":22},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":3,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":3,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":10,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":10,"endColumn":21},{"ruleId":"no-useless-concat","severity":2,"message":"Unexpected string concatenation of literals.","line":31,"column":20,"nodeType":"BinaryExpression","messageId":"unexpectedConcat","endLine":31,"endColumn":21}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const axios = require('axios');\n\nmodule.exports = {\n  name: 'soundcloudsearch',\n  aliases: ['soundcloud', 'soundclouds'],\n  category: 'search',\n  permissions: {\n    coin: 10,\n  },\n  code: async ctx => {\n    const { formatter, tools, config } = ctx.bot.context;\n    const input = ctx.args.join(' ') || null;\n\n    if (!input)\n      return await ctx.reply(\n        `${formatter.quote(tools.msg.generateInstruction(['send'], ['text']))}\\n${formatter.quote(\n          tools.msg.generateCmdExample(ctx.used, 'one last kiss - hikaru utada')\n        )}`\n      );\n\n    try {\n      const apiUrl = tools.api.createUrl('izumi', '/search/soundcloud', {\n        query: input,\n      });\n      const { result } = (await axios.get(apiUrl)).data;\n\n      const resultText = result\n        .map(\n          res => `${formatter.quote(`Judul: ${res.title}`)}\\n${formatter.quote(`URL: ${res.url}`)}`\n        )\n        .join('\\n' + `${formatter.quote('Â· Â· â”€ Â·âœ¶Â· â”€ Â· Â·')}\\n`);\n      await ctx.reply({\n        text: resultText || config.msg.notFound,\n        footer: config.msg.footer,\n      });\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error, true);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\search\\spotifysearch.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":22},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":3,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":3,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":10,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":10,"endColumn":21},{"ruleId":"no-useless-concat","severity":2,"message":"Unexpected string concatenation of literals.","line":35,"column":20,"nodeType":"BinaryExpression","messageId":"unexpectedConcat","endLine":35,"endColumn":21}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const axios = require('axios');\n\nmodule.exports = {\n  name: 'spotifysearch',\n  aliases: ['spotify', 'spotifys'],\n  category: 'search',\n  permissions: {\n    coin: 10,\n  },\n  code: async ctx => {\n    const { formatter, tools, config } = ctx.bot.context;\n    const input = ctx.args.join(' ') || null;\n\n    if (!input)\n      return await ctx.reply(\n        `${formatter.quote(tools.msg.generateInstruction(['send'], ['text']))}\\n${formatter.quote(\n          tools.msg.generateCmdExample(ctx.used, 'one last kiss - hikaru utada')\n        )}`\n      );\n\n    try {\n      const apiUrl = tools.api.createUrl('diibot', '/api/search/spotify', {\n        query: input,\n      });\n      const { result } = (await axios.get(apiUrl)).data;\n\n      const resultText = result\n        .map(\n          res =>\n            `${formatter.quote(`Judul: ${res.trackName}`)}\\n` +\n            `${formatter.quote(`Artis: ${res.artistName}`)}\\n${formatter.quote(\n              `URL: ${res.externalUrl}`\n            )}`\n        )\n        .join('\\n' + `${formatter.quote('Â· Â· â”€ Â·âœ¶Â· â”€ Â· Â·')}\\n`);\n      await ctx.reply({\n        text: resultText || config.msg.notFound,\n        footer: config.msg.footer,\n      });\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error, true);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\search\\stickerpacksearch.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":22},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":3,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":3,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":10,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":10,"endColumn":21},{"ruleId":"no-useless-concat","severity":2,"message":"Unexpected string concatenation of literals.","line":33,"column":20,"nodeType":"BinaryExpression","messageId":"unexpectedConcat","endLine":33,"endColumn":21}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const axios = require('axios');\n\nmodule.exports = {\n  name: 'stickerpacksearch',\n  aliases: ['stickerpack', 'stickerpacks'],\n  category: 'search',\n  permissions: {\n    coin: 10,\n  },\n  code: async ctx => {\n    const { formatter, tools, config } = ctx.bot.context;\n    const input = ctx.args.join(' ') || null;\n\n    if (!input)\n      return await ctx.reply(\n        `${formatter.quote(tools.msg.generateInstruction(['send'], ['text']))}\\n${formatter.quote(\n          tools.msg.generateCmdExample(ctx.used, 'evangelion')\n        )}`\n      );\n\n    try {\n      const apiUrl = tools.api.createUrl('neko', '/search/stickerpack', {\n        q: input,\n      });\n      const { result } = (await axios.get(apiUrl)).data;\n\n      const resultText = result\n        .map(\n          res =>\n            `${formatter.quote(`Nama: ${res.name}`)}\\n` +\n            `${formatter.quote(`Pembuat: ${res.author}`)}\\n${formatter.quote(`URL: ${res.url}`)}`\n        )\n        .join('\\n' + `${formatter.quote('Â· Â· â”€ Â·âœ¶Â· â”€ Â· Â·')}\\n`);\n      await ctx.reply({\n        text: resultText || config.msg.notFound,\n        footer: config.msg.footer,\n      });\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error, true);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\search\\tiktoksearch.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":22},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":3,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":3,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":10,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":10,"endColumn":21}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const axios = require('axios');\n\nmodule.exports = {\n  name: 'tiktoksearch',\n  aliases: ['tiktoks', 'ttsearch'],\n  category: 'search',\n  permissions: {\n    coin: 10,\n  },\n  code: async ctx => {\n    const { formatter, tools, config } = ctx.bot.context;\n    const input = ctx.args.join(' ') || null;\n\n    if (!input)\n      return await ctx.reply(\n        `${formatter.quote(tools.msg.generateInstruction(['send'], ['text']))}\\n${formatter.quote(\n          tools.msg.generateCmdExample(ctx.used, 'evangelion')\n        )}`\n      );\n\n    try {\n      const apiUrl = tools.api.createUrl('diibot', '/api/search/tiktok', {\n        query: input,\n      });\n      const result = tools.cmd.getRandomElement((await axios.get(apiUrl)).data.result).media\n        .no_watermark;\n\n      await ctx.reply({\n        video: {\n          url: result,\n        },\n        mimetype: tools.mime.lookup('mp4'),\n        caption: formatter.quote(`Kueri: ${input}`),\n        footer: config.msg.footer,\n        buttons: [\n          {\n            buttonId: `${ctx.used.prefix + ctx.used.command} ${input}`,\n            buttonText: {\n              displayText: 'Ambil Lagi',\n            },\n          },\n        ],\n      });\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error, true);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\search\\xnxxsearch.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":22},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":3,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":3,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":10,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":10,"endColumn":21},{"ruleId":"no-useless-concat","severity":2,"message":"Unexpected string concatenation of literals.","line":31,"column":20,"nodeType":"BinaryExpression","messageId":"unexpectedConcat","endLine":31,"endColumn":21}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const axios = require('axios');\n\nmodule.exports = {\n  name: 'xnxxsearch',\n  aliases: ['xnxx', 'xnxxs'],\n  category: 'search',\n  permissions: {\n    premium: true,\n  },\n  code: async ctx => {\n    const { formatter, tools, config } = ctx.bot.context;\n    const input = ctx.args.join(' ') || null;\n\n    if (!input)\n      return await ctx.reply(\n        `${formatter.quote(tools.msg.generateInstruction(['send'], ['text']))}\\n${formatter.quote(\n          tools.msg.generateCmdExample(ctx.used, 'evangelion')\n        )}`\n      );\n\n    try {\n      const apiUrl = tools.api.createUrl('hang', '/search/xnxx', {\n        q: input,\n      });\n      const { result } = (await axios.get(apiUrl)).data;\n\n      const resultText = result\n        .map(\n          res => `${formatter.quote(`Judul: ${res.title}`)}\\n${formatter.quote(`URL: ${res.link}`)}`\n        )\n        .join('\\n' + `${formatter.quote('Â· Â· â”€ Â·âœ¶Â· â”€ Â· Â·')}\\n`);\n      await ctx.reply({\n        text: resultText || config.msg.notFound,\n        footer: config.msg.footer,\n      });\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error, true);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\search\\xvideossearch.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":22},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":3,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":3,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":10,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":10,"endColumn":21},{"ruleId":"no-useless-concat","severity":2,"message":"Unexpected string concatenation of literals.","line":34,"column":20,"nodeType":"BinaryExpression","messageId":"unexpectedConcat","endLine":34,"endColumn":21}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const axios = require('axios');\n\nmodule.exports = {\n  name: 'xvideossearch',\n  aliases: ['xvideos', 'xvideoss'],\n  category: 'search',\n  permissions: {\n    premium: true,\n  },\n  code: async ctx => {\n    const { formatter, tools, config } = ctx.bot.context;\n    const input = ctx.args.join(' ') || null;\n\n    if (!input)\n      return await ctx.reply(\n        `${formatter.quote(tools.msg.generateInstruction(['send'], ['text']))}\\n${formatter.quote(\n          tools.msg.generateCmdExample(ctx.used, 'evangelion')\n        )}`\n      );\n\n    try {\n      const apiUrl = tools.api.createUrl('neko', '/search/xvideos', {\n        q: input,\n      });\n      const { result } = (await axios.get(apiUrl)).data;\n\n      const resultText = result\n        .map(\n          res =>\n            `${formatter.quote(`Judul: ${res.title}`)}\\n` +\n            `${formatter.quote(`Pembuat: ${res.artist}`)}\\n` +\n            `${formatter.quote(`Durasi: ${res.duration}`)}\\n${formatter.quote(`URL: ${res.url}`)}`\n        )\n        .join('\\n' + `${formatter.quote('Â· Â· â”€ Â·âœ¶Â· â”€ Â· Â·')}\\n`);\n      await ctx.reply({\n        text: resultText || config.msg.notFound,\n        footer: config.msg.footer,\n      });\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error, true);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\search\\youtubesearch.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":22},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":3,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":3,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":10,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":10,"endColumn":21},{"ruleId":"no-useless-concat","severity":2,"message":"Unexpected string concatenation of literals.","line":33,"column":20,"nodeType":"BinaryExpression","messageId":"unexpectedConcat","endLine":33,"endColumn":21}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const axios = require('axios');\n\nmodule.exports = {\n  name: 'youtubesearch',\n  aliases: ['youtube', 'youtubes', 'yt', 'yts', 'ytsearch'],\n  category: 'search',\n  permissions: {\n    coin: 10,\n  },\n  code: async ctx => {\n    const { formatter, tools, config } = ctx.bot.context;\n    const input = ctx.args.join(' ') || null;\n\n    if (!input)\n      return await ctx.reply(\n        `${formatter.quote(tools.msg.generateInstruction(['send'], ['text']))}\\n${formatter.quote(\n          tools.msg.generateCmdExample(ctx.used, 'one last kiss - hikaru utada')\n        )}`\n      );\n\n    try {\n      const apiUrl = tools.api.createUrl('davidcyril', '/youtube/search', {\n        query: input,\n      });\n      const result = (await axios.get(apiUrl)).data.results;\n\n      const resultText = result\n        .map(\n          res =>\n            `${formatter.quote(`Judul: ${res.title}`)}\\n` +\n            `${formatter.quote(`Durasi: ${res.duration}`)}\\n${formatter.quote(`URL: ${res.url}`)}`\n        )\n        .join('\\n' + `${formatter.quote('Â· Â· â”€ Â·âœ¶Â· â”€ Â· Â·')}\\n`);\n      await ctx.reply({\n        text: resultText || config.msg.notFound,\n        footer: config.msg.footer,\n      });\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error, true);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\social\\menfes.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":6,"column":23,"nodeType":"Identifier","messageId":"undef","endLine":6,"endColumn":30},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":8,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":8,"endColumn":7},{"ruleId":"no-unused-vars","severity":1,"message":"'args' is defined but never used. Allowed unused args must match /^_/u.","line":16,"column":30,"nodeType":"Identifier","messageId":"unusedVar","endLine":16,"endColumn":34,"suggestions":[{"messageId":"removeVar","data":{"varName":"args"},"fix":{"range":[359,364],"text":""},"desc":"Remove unused variable 'args'."}]},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'execute'.","line":16,"column":44,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":16,"endColumn":46},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":49,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":49,"endColumn":20,"suggestions":[{"fix":{"range":[1475,1558],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":54,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":54,"endColumn":20,"suggestions":[{"fix":{"range":[1686,1735],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":66,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":66,"endColumn":20,"suggestions":[{"fix":{"range":[2232,2284],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Menfes Command\n * Anonymous messaging system\n */\n\nconst menfesService = require('../../src/services/menfesService');\n\nmodule.exports = {\n  name: 'menfes',\n  description: 'Start anonymous messaging session',\n  category: 'Social',\n  usage: '!menfes <number>|<fake_name>',\n  aliases: ['confes', 'anonymous'],\n  cooldown: 60,\n\n  execute: async (naze, m, { args, text }) => {\n    try {\n      if (!text || !text.includes('|')) {\n        return m.reply(\n          'Usage: !menfes 628xxxx|Samarinda\\n\\nFormat: !menfes <nomor_tujuan>|<nama_samaran>'\n        );\n      }\n\n      const [targetNumber, fakeName] = text.split('|').map(s => s.trim());\n\n      if (!targetNumber || !fakeName) {\n        return m.reply('Please provide both target number and fake name');\n      }\n\n      // Validate target number\n      const cleanNumber = targetNumber.replace(/\\D/g, '');\n      if (cleanNumber.length < 10 || cleanNumber.length > 15) {\n        return m.reply('Invalid phone number format');\n      }\n\n      // Check if user already has active session\n      const activeSession = menfesService.getActiveSession(m.sender);\n      if (activeSession) {\n        return m.reply(\n          'Kamu sudah memiliki sesi menfes yang aktif!\\nKetik !delmenfes untuk mengakhiri sesi.'\n        );\n      }\n\n      // Start menfes session\n      const result = await menfesService.startMenfesSession(m.sender, cleanNumber, fakeName);\n\n      if (result.success) {\n        await m.reply(result.message);\n        console.log(`Menfes session started: ${m.sender} -> ${cleanNumber} (${fakeName})`);\n      } else {\n        await m.reply('Failed to start menfes session. Please try again.');\n      }\n    } catch (error) {\n      console.error('Error in menfes command:', error);\n\n      if (error.message.includes('Rate limit')) {\n        await m.reply('Rate limit exceeded. Please wait before starting new session.');\n      } else if (error.message.includes('Invalid phone number')) {\n        await m.reply('Invalid phone number format. Please check the number.');\n      } else if (error.message.includes('Sesi menfes')) {\n        await m.reply(error.message);\n      } else {\n        await m.reply('Terjadi kesalahan saat memulai menfes. Silakan coba lagi.');\n      }\n\n      console.error('Unexpected error in menfes:', error);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\sticker\\brat.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":6,"column":24,"nodeType":"Identifier","messageId":"undef","endLine":6,"endColumn":31},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":8,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":8,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'execute'.","line":16,"column":38,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":16,"endColumn":40},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":49,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":49,"endColumn":20,"suggestions":[{"fix":{"range":[1279,1342],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":54,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":54,"endColumn":20,"suggestions":[{"fix":{"range":[1469,1516],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":64,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":64,"endColumn":20,"suggestions":[{"fix":{"range":[1926,1976],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Brat Sticker Command\n * Create brat-style text stickers\n */\n\nconst stickerService = require('../../src/services/stickerService');\n\nmodule.exports = {\n  name: 'brat',\n  description: 'Create brat-style sticker',\n  category: 'Sticker',\n  usage: '!brat <text>',\n  aliases: ['bratsticker'],\n  cooldown: 15,\n\n  execute: async (naze, m, { args }) => {\n    try {\n      const text = args.join(' ');\n\n      if (!text || text.length === 0) {\n        return m.reply('Please provide text for brat sticker');\n      }\n\n      if (text.length > 50) {\n        return m.reply('Text too long. Maximum 50 characters.');\n      }\n\n      // Check rate limit\n      if (!stickerService.checkRateLimit(m.sender, 'brat')) {\n        return m.reply(\n          'Rate limit exceeded. Please wait 15 seconds before using this command again.'\n        );\n      }\n\n      await m.reply('â³ Creating brat sticker...');\n\n      // Create brat sticker\n      const result = await stickerService.createBratSticker(text);\n\n      if (result.success) {\n        // Create final sticker\n        const finalSticker = await stickerService.createSticker(result.buffer);\n\n        await naze.sendAsSticker(m.chat, finalSticker.buffer, m, {\n          packname: 'WhatsDeX Bot',\n          author: 'CodeDeX',\n        });\n\n        console.log(`Brat sticker created for ${m.sender}: \"${text}\"`);\n      } else {\n        await m.reply('Failed to create brat sticker. Please try again.');\n      }\n    } catch (error) {\n      console.error('Error in brat command:', error);\n\n      if (error.message.includes('Rate limit')) {\n        await m.reply('Rate limit exceeded. Please wait before using this command again.');\n      } else if (error.message.includes('Text too long')) {\n        await m.reply('Text too long. Please use shorter text (max 50 characters).');\n      } else {\n        await m.reply('Terjadi kesalahan saat membuat brat sticker. Silakan coba lagi.');\n      }\n\n      console.error('Unexpected error in brat:', error);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\sticker\\emojimix.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":6,"column":24,"nodeType":"Identifier","messageId":"undef","endLine":6,"endColumn":31},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":8,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":8,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'execute'.","line":16,"column":38,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":16,"endColumn":40},{"ruleId":"no-restricted-syntax","severity":2,"message":"iterators/generators require regenerator-runtime, which is too heavyweight for this guide to allow them. Separately, loops should be avoided in favor of array iterations.","line":42,"column":9,"nodeType":"ForOfStatement","messageId":"restrictedSyntax","endLine":58,"endColumn":10},{"ruleId":"no-await-in-loop","severity":2,"message":"Unexpected `await` inside a loop.","line":44,"column":35,"nodeType":"AwaitExpression","messageId":"unexpectedAwait","endLine":44,"endColumn":92},{"ruleId":"no-await-in-loop","severity":2,"message":"Unexpected `await` inside a loop.","line":45,"column":34,"nodeType":"AwaitExpression","messageId":"unexpectedAwait","endLine":45,"endColumn":83},{"ruleId":"no-await-in-loop","severity":2,"message":"Unexpected `await` inside a loop.","line":47,"column":13,"nodeType":"AwaitExpression","messageId":"unexpectedAwait","endLine":50,"endColumn":15},{"ruleId":"no-await-in-loop","severity":2,"message":"Unexpected `await` inside a loop.","line":53,"column":13,"nodeType":"AwaitExpression","messageId":"unexpectedAwait","endLine":53,"endColumn":68},{"ruleId":"no-promise-executor-return","severity":2,"message":"Return values from promise executor functions cannot be read.","line":53,"column":42,"nodeType":"CallExpression","messageId":"returnsValue","endLine":53,"endColumn":67,"suggestions":[{"messageId":"wrapBraces","fix":{"range":[1614,1639],"text":"{setTimeout(resolve, 1000)}"},"desc":"Wrap the expression in `{}`."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":55,"column":13,"nodeType":"MemberExpression","messageId":"unexpected","endLine":55,"endColumn":26,"suggestions":[{"fix":{"range":[1682,1739],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-continue","severity":2,"message":"Unexpected use of continue statement.","line":56,"column":13,"nodeType":"ContinueStatement","messageId":"unexpected","endLine":56,"endColumn":22},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":60,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":60,"endColumn":20,"suggestions":[{"fix":{"range":[1793,1863],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":65,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":65,"endColumn":20,"suggestions":[{"fix":{"range":[1998,2049],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":75,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":75,"endColumn":20,"suggestions":[{"fix":{"range":[2459,2513],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]}],"suppressedMessages":[],"errorCount":10,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Emoji Mix Command\n * Create mixed emoji stickers\n */\n\nconst stickerService = require('../../src/services/stickerService');\n\nmodule.exports = {\n  name: 'emojimix',\n  description: 'Mix two emojis to create new sticker',\n  category: 'Sticker',\n  usage: '!emojimix <emoji1>+<emoji2>',\n  aliases: ['mixemoji'],\n  cooldown: 10,\n\n  execute: async (naze, m, { args }) => {\n    try {\n      if (!args[0] || !args[0].includes('+')) {\n        return m.reply('Usage: !emojimix ðŸ˜…+ðŸ¤”');\n      }\n\n      const [emoji1, emoji2] = args[0].split('+');\n\n      if (!emoji1 || !emoji2) {\n        return m.reply('Please provide two emojis separated by +');\n      }\n\n      // Check rate limit\n      if (!stickerService.checkRateLimit(m.sender, 'emojimix')) {\n        return m.reply(\n          'Rate limit exceeded. Please wait 10 seconds before using this command again.'\n        );\n      }\n\n      await m.reply('â³ Creating emoji mix...');\n\n      // Get emoji mix results\n      const result = await stickerService.emojiMix(emoji1.trim(), emoji2.trim());\n\n      if (result.success && result.stickers.length > 0) {\n        // Send each sticker\n        for (const sticker of result.stickers) {\n          try {\n            const stickerBuffer = await stickerService.downloadMediaForSticker(sticker.url);\n            const finalSticker = await stickerService.createSticker(stickerBuffer);\n\n            await naze.sendAsSticker(m.chat, finalSticker.buffer, m, {\n              packname: 'WhatsDeX Bot',\n              author: 'CodeDeX',\n            });\n\n            // Small delay between stickers\n            await new Promise(resolve => setTimeout(resolve, 1000));\n          } catch (error) {\n            console.error('Error sending emoji mix sticker:', error);\n            continue;\n          }\n        }\n\n        console.log(`Emoji mix created for ${m.sender}: ${emoji1}+${emoji2}`);\n      } else {\n        await m.reply('Failed to create emoji mix. Please try different emojis.');\n      }\n    } catch (error) {\n      console.error('Error in emojimix command:', error);\n\n      if (error.message.includes('Rate limit')) {\n        await m.reply('Rate limit exceeded. Please wait before using this command again.');\n      } else if (error.message.includes('Tidak Ditemukan')) {\n        await m.reply('Emoji mix not found. Please try different emoji combination.');\n      } else {\n        await m.reply('Terjadi kesalahan saat membuat emoji mix. Silakan coba lagi.');\n      }\n\n      console.error('Unexpected error in emojimix:', error);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\tool\\alkitab.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":22},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":3,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":3,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":10,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":10,"endColumn":21},{"ruleId":"no-useless-concat","severity":2,"message":"Unexpected string concatenation of literals.","line":43,"column":20,"nodeType":"BinaryExpression","messageId":"unexpectedConcat","endLine":43,"endColumn":21}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const axios = require('axios');\n\nmodule.exports = {\n  name: 'alkitab',\n  aliases: ['bible'],\n  category: 'tool',\n  permissions: {\n    coin: 10,\n  },\n  code: async ctx => {\n    const { formatter, tools, config } = ctx.bot.context;\n    const [passage, number] = ctx.args;\n\n    if (!passage && !number)\n      return await ctx.reply(\n        `${formatter.quote(tools.msg.generateInstruction(['send'], ['text']))}\\n` +\n          `${formatter.quote(tools.msg.generateCmdExample(ctx.used, 'kej 2:18'))}\\n${formatter.quote(\n            tools.msg.generateNotes([\n              `Type ${formatter.inlineCode(`${ctx.used.prefix + ctx.used.command} list`)} to see the list.`,\n            ])\n          )}`\n      );\n\n    if (passage.toLowerCase() === 'list') {\n      const listText = await tools.list.get('alkitab');\n      return await ctx.reply({\n        text: listText,\n        footer: config.msg.footer,\n      });\n    }\n\n    try {\n      const apiUrl = tools.api.createUrl('https://api-alkitab.vercel.app', `/api/passage`, {\n        passage,\n        num: number,\n      });\n      const result = (await axios.get(apiUrl)).data.bible.book;\n\n      const resultText = result.chapter.verses\n        .map(\n          vers => `${formatter.quote(`Verse: ${vers.number}`)}\\n${formatter.quote(`${vers.text}`)}`\n        )\n        .join('\\n' + `${formatter.quote('Â· Â· â”€ Â·âœ¶Â· â”€ Â· Â·')}\\n`);\n      await ctx.reply({\n        text:\n          `${formatter.quote(`Name: ${result.name}`)}\\n` +\n          `${formatter.quote(`Chapter: ${result.chapter.chap}`)}\\n` +\n          `${formatter.quote('Â· Â· â”€ Â·âœ¶Â· â”€ Â· Â·')}\\n${resultText}`,\n        footer: config.msg.footer,\n      });\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error, true);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\tool\\alquran.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":22},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":3,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":3,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":7,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":7,"endColumn":21},{"ruleId":"no-restricted-globals","severity":2,"message":"Unexpected use of 'isNaN'. Use Number.isNaN instead https://github.com/airbnb/javascript#standard-library--isnan","line":29,"column":9,"nodeType":"Identifier","messageId":"customMessage","endLine":29,"endColumn":14},{"ruleId":"no-restricted-globals","severity":2,"message":"Unexpected use of 'isNaN'. Use Number.isNaN instead https://github.com/airbnb/javascript#standard-library--isnan","line":46,"column":15,"nodeType":"Identifier","messageId":"customMessage","endLine":46,"endColumn":20},{"ruleId":"no-restricted-globals","severity":2,"message":"Unexpected use of 'isNaN'. Use Number.isNaN instead https://github.com/airbnb/javascript#standard-library--isnan","line":46,"column":35,"nodeType":"Identifier","messageId":"customMessage","endLine":46,"endColumn":40},{"ruleId":"radix","severity":2,"message":"Missing radix parameter.","line":68,"column":30,"nodeType":"CallExpression","messageId":"missingRadix","endLine":68,"endColumn":44,"suggestions":[{"messageId":"addRadixParameter10","fix":{"range":[2471,2471],"text":", 10"},"desc":"Add radix parameter `10` for parsing decimal numbers."}]},{"ruleId":"no-restricted-globals","severity":2,"message":"Unexpected use of 'isNaN'. Use Number.isNaN instead https://github.com/airbnb/javascript#standard-library--isnan","line":71,"column":15,"nodeType":"Identifier","messageId":"customMessage","endLine":71,"endColumn":20}],"suppressedMessages":[],"errorCount":8,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const axios = require('axios');\n\nmodule.exports = {\n  name: 'alquran',\n  aliases: ['quran'],\n  category: 'tool',\n  code: async ctx => {\n    const { formatter, tools, config } = ctx.bot.context;\n    const [surat, ayat] = ctx.args;\n\n    if (!surat && !ayat)\n      return await ctx.reply(\n        `${formatter.quote(tools.msg.generateInstruction(['send'], ['text']))}\\n` +\n          `${formatter.quote(tools.msg.generateCmdExample(ctx.used, '21 35'))}\\n${formatter.quote(\n            tools.msg.generateNotes([\n              `Type ${formatter.inlineCode(`${ctx.used.prefix + ctx.used.command} list`)} to see the list.`,\n            ])\n          )}`\n      );\n\n    if (surat.toLowerCase() === 'list') {\n      const listText = await tools.list.get('alquran');\n      return await ctx.reply({\n        text: listText,\n        footer: config.msg.footer,\n      });\n    }\n\n    if (isNaN(surat) || surat < 1 || surat > 114)\n      return await ctx.reply(formatter.quote('âŽ Surah must be a number between 1 and 114!'));\n\n    try {\n      const apiUrl = tools.api.createUrl('neko', '/religious/nuquran-surah', {\n        id: surat,\n      });\n      const { result } = (await axios.get(apiUrl)).data;\n      const { verses } = result;\n\n      if (ayat) {\n        if (ayat.includes('-')) {\n          const [startAyat, endAyat] = ayat.split('-').map(Number);\n          const selectedVerses = verses.filter(\n            vers => vers.number >= startAyat && vers.number <= endAyat\n          );\n\n          if (isNaN(startAyat) || isNaN(endAyat) || startAyat < 1 || endAyat < startAyat)\n            return await ctx.reply(formatter.quote('âŽ Verse range is not valid!'));\n          if (!selectedVerses.length)\n            return await ctx.reply(\n              formatter.quote(`âŽ Verses in range ${startAyat}-${endAyat} do not exist!`)\n            );\n\n          const versesText = selectedVerses\n            .map(\n              vers =>\n                `${formatter.quote(`Verse ${vers.number}:`)}\\n` +\n                `${vers.text} (${vers.transliteration})\\n${formatter.italic(vers.translation_id)}`\n            )\n            .join('\\n');\n          await ctx.reply({\n            text:\n              `${formatter.quote(`Surah: ${result.name}`)}\\n` +\n              `${formatter.quote(`Meaning: ${result.translate}`)}\\n` +\n              `${formatter.quote('Â· Â· â”€ Â·âœ¶Â· â”€ Â· Â·')}\\n${versesText}`,\n            footer: config.msg.footer,\n          });\n        } else {\n          const singleAyat = parseInt(ayat);\n          const verse = verses.find(vers => vers.number === singleAyat);\n\n          if (isNaN(singleAyat) || singleAyat < 1)\n            return await ctx.reply(\n              formatter.quote('âŽ Verse must be a valid number greater than 0!')\n            );\n          if (!verse)\n            return await ctx.reply(formatter.quote(`âŽ Verse ${singleAyat} does not exist!`));\n\n          await ctx.reply({\n            text:\n              `${formatter.quote(`Surah: ${result.name}`)}\\n` +\n              `${formatter.quote(`Meaning: ${result.translate}`)}\\n` +\n              `${formatter.quote('Â· Â· â”€ Â·âœ¶Â· â”€ Â· Â·')}\\n` +\n              `${verse.text} (${verse.transliteration})\\n${formatter.italic(verse.translation_id)}`,\n            footer: config.msg.footer,\n          });\n        }\n      } else {\n        const versesText = verses\n          .map(\n            vers =>\n              `${formatter.quote(`Verse ${vers.number}:`)}\\n` +\n              `${vers.text} (${vers.transliteration})\\n${formatter.italic(vers.translation_id)}`\n          )\n          .join('\\n');\n        await ctx.reply({\n          text:\n            `${formatter.quote(`Surah: ${result.name}`)}\\n` +\n            `${formatter.quote(`Meaning: ${result.translate}`)}\\n` +\n            `${formatter.quote('Â· Â· â”€ Â·âœ¶Â· â”€ Â· Â·')}\\n${versesText}`,\n          footer: config.msg.footer,\n        });\n      }\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error, true);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\tool\\animeinfo.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":22},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":3,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":3,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":10,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":10,"endColumn":21}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const axios = require('axios');\n\nmodule.exports = {\n  name: 'animeinfo',\n  aliases: ['anime'],\n  category: 'tool',\n  permissions: {\n    coin: 10,\n  },\n  code: async ctx => {\n    const { formatter, tools, config } = ctx.bot.context;\n    const input = ctx.args.join(' ') || null;\n\n    if (!input)\n      return await ctx.reply(\n        `${formatter.quote(tools.msg.generateInstruction(['send'], ['text']))}\\n${formatter.quote(\n          tools.msg.generateCmdExample(ctx.used, 'evangelion')\n        )}`\n      );\n\n    try {\n      const apiUrl = tools.api.createUrl('https://api.jikan.moe', '/v4/anime', {\n        q: input,\n      });\n      const result = (await axios.get(apiUrl)).data.data[0];\n\n      await ctx.reply({\n        text:\n          `${formatter.quote(`Judul: ${result.title}`)}\\n` +\n          `${formatter.quote(`Judul Inggris: ${result.title_english}`)}\\n` +\n          `${formatter.quote(`Judul Jepang: ${result.title_japanese}`)}\\n` +\n          `${formatter.quote(`Tipe: ${result.type}`)}\\n` +\n          `${formatter.quote(`Episode: ${result.episodes}`)}\\n` +\n          `${formatter.quote(`Durasi: ${result.duration}`)}\\n` +\n          `${formatter.quote(`URL: ${result.url}`)}\\n` +\n          `${formatter.quote('Â· Â· â”€ Â·âœ¶Â· â”€ Â· Â·')}\\n${await tools.cmd.translate(\n            result.synopsis,\n            'id'\n          )}`,\n        footer: config.msg.footer,\n      });\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error, true);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\tool\\bingimage.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":22},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":3,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":3,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":10,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":10,"endColumn":21}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const axios = require('axios');\n\nmodule.exports = {\n  name: 'bingimage',\n  aliases: ['bimg'],\n  category: 'tool',\n  permissions: {\n    coin: 10,\n  },\n  code: async ctx => {\n    const { formatter, tools, config } = ctx.bot.context;\n    const input = ctx.args.join(' ') || null;\n\n    if (!input)\n      return await ctx.reply(\n        `${formatter.quote(tools.msg.generateInstruction(['send'], ['text']))}\\n${formatter.quote(\n          tools.msg.generateCmdExample(ctx.used, 'rei ayanami')\n        )}`\n      );\n\n    try {\n      const apiUrl = tools.api.createUrl('siputzx', '/api/s/bimg', {\n        query: input,\n      });\n      const result = tools.cmd.getRandomElement((await axios.get(apiUrl)).data.data);\n\n      await ctx.reply({\n        image: {\n          url: result,\n        },\n        mimetype: tools.mime.lookup('jpeg'),\n        caption: formatter.quote(`Kueri: ${input}`),\n        footer: config.msg.footer,\n        buttons: [\n          {\n            buttonId: `${ctx.used.prefix + ctx.used.command} ${input}`,\n            buttonText: {\n              displayText: 'Ambil Lagi',\n            },\n          },\n        ],\n      });\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error, true);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\tool\\devianart.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":22},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":3,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":3,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":10,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":10,"endColumn":21}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const axios = require('axios');\n\nmodule.exports = {\n  name: 'devianart',\n  aliases: ['devian'],\n  category: 'tool',\n  permissions: {\n    premium: true,\n  },\n  code: async ctx => {\n    const { formatter, tools, config } = ctx.bot.context;\n    const input = ctx.args.join(' ') || null;\n\n    if (!input)\n      return await ctx.reply(\n        `${formatter.quote(tools.msg.generateInstruction(['send'], ['text']))}\\n${formatter.quote(\n          tools.msg.generateCmdExample(ctx.used, 'rei ayanami')\n        )}`\n      );\n\n    try {\n      const apiUrl = tools.api.createUrl('neko', '/search/devianart', {\n        q: input,\n      });\n      const result = tools.cmd.getRandomElement((await axios.get(apiUrl)).data.result).imageUrl;\n\n      await ctx.reply({\n        image: {\n          url: result,\n        },\n        mimetype: tools.mime.lookup('jpeg'),\n        caption: formatter.quote(`Kueri: ${input}`),\n        footer: config.msg.footer,\n        buttons: [\n          {\n            buttonId: `${ctx.used.prefix + ctx.used.command} ${input}`,\n            buttonText: {\n              displayText: 'Ambil Lagi',\n            },\n          },\n        ],\n      });\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error, true);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\tool\\faktaunik.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":22},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":3,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":3,"endColumn":7}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const axios = require('axios');\n\nmodule.exports = {\n  name: 'faktaunik',\n  aliases: ['fakta'],\n  category: 'tool',\n  permissions: {\n    coin: 10,\n  },\n  code: async ctx => {\n    const { tools, config } = ctx.bot.context;\n    try {\n      const apiUrl = tools.api.createUrl(\n        'https://raw.githubusercontent.com',\n        '/HasamiAini/Bot_Takagisan/refs/heads/main/faktanya.txt'\n      );\n      const result = tools.cmd.getRandomElement(\n        (await axios.get(apiUrl)).data.trim().split('\\n').filter(Boolean)\n      );\n\n      await ctx.reply({\n        text: result,\n        footer: config.msg.footer,\n        buttons: [\n          {\n            buttonId: ctx.used.prefix + ctx.used.command,\n            buttonText: {\n              displayText: 'Ambil Lagi',\n            },\n          },\n        ],\n      });\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error, true);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\tool\\fetch.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":22},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":2,"column":35,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":42},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":4,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":4,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":11,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":11,"endColumn":21},{"ruleId":"no-unused-vars","severity":1,"message":"'status' is defined but never used. Allowed unused args must match /^_/u.","line":28,"column":24,"nodeType":"Identifier","messageId":"unusedVar","endLine":28,"endColumn":30,"suggestions":[{"messageId":"removeVar","data":{"varName":"status"},"fix":{"range":[787,793],"text":""},"desc":"Remove unused variable 'status'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":84,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":84,"endColumn":23},{"ruleId":"no-use-before-define","severity":2,"message":"'walkJSON' was used before it was defined.","line":88,"column":37,"nodeType":"Identifier","messageId":"usedBeforeDefined","endLine":88,"endColumn":45},{"ruleId":"guard-for-in","severity":2,"message":"The body of a for-in should be wrapped in an if statement to filter unwanted properties from the prototype.","line":98,"column":3,"nodeType":"ForInStatement","messageId":"wrap","endLine":105,"endColumn":4},{"ruleId":"no-restricted-syntax","severity":2,"message":"for..in loops iterate over the entire prototype chain, which is virtually never what you want. Use Object.{keys,values,entries}, and iterate over the resulting array.","line":98,"column":3,"nodeType":"ForInStatement","messageId":"restrictedSyntax","endLine":105,"endColumn":4},{"ruleId":"no-undef","severity":2,"message":"'formatter' is not defined.","line":99,"column":62,"nodeType":"Identifier","messageId":"undef","endLine":99,"endColumn":71},{"ruleId":"no-param-reassign","severity":2,"message":"Assignment to property of function parameter 'array'.","line":103,"column":7,"nodeType":"Identifier","messageId":"assignmentToFunctionParamProp","endLine":103,"endColumn":12}],"suppressedMessages":[],"errorCount":9,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const axios = require('axios');\nconst { Sticker, StickerTypes } = require('wa-sticker-formatter');\n\nmodule.exports = {\n  name: 'fetch',\n  aliases: ['get'],\n  category: 'tool',\n  permissions: {\n    coin: 10,\n  },\n  code: async ctx => {\n    const { formatter, tools, config } = ctx.bot.context;\n    const url = ctx.args[0] || null;\n\n    if (!url)\n      return await ctx.reply(\n        `${formatter.quote(tools.msg.generateInstruction(['send'], ['text']))}\\n${formatter.quote(\n          tools.msg.generateCmdExample(ctx.used, config.bot.thumbnail)\n        )}`\n      );\n\n    const isUrl = tools.cmd.isUrl(url);\n    if (!isUrl) return await ctx.reply(config.msg.urlInvalid);\n\n    try {\n      const response = await axios.get(url, {\n        responseType: 'arraybuffer',\n        validateStatus(status) {\n          return true;\n        },\n      });\n\n      const contentType = response?.headers?.['content-type'];\n\n      if (/image/.test(contentType)) {\n        await ctx.reply({\n          image: response?.data,\n          mimetype: tools.mime.contentType(contentType),\n          caption: formatter.quote('Untukmu, tuan!'),\n          footer: config.msg.footer,\n        });\n      } else if (/video/.test(contentType)) {\n        await ctx.reply({\n          video: response?.data,\n          mimetype: tools.mime.contentType(contentType),\n          caption: formatter.quote('Untukmu, tuan!'),\n          footer: config.msg.footer,\n        });\n      } else if (/audio/.test(contentType)) {\n        await ctx.reply({\n          audio: response?.data,\n          mimetype: tools.mime.contentType(contentType),\n          caption: formatter.quote('Untukmu, tuan!'),\n        });\n      } else if (/webp/.test(contentType)) {\n        const sticker = new Sticker(response?.data, {\n          pack: config.sticker.packname,\n          author: config.sticker.author,\n          type: StickerTypes.FULL,\n          categories: ['ðŸŒ•'],\n          id: ctx.id,\n          quality: 50,\n        });\n\n        await ctx.reply(await sticker.toMessage());\n      } else if (!/utf-8|json|html|plain/.test(contentType)) {\n        const fileName = /filename/i.test(response?.headers?.['content-disposition'])\n          ? response?.headers?.['content-disposition']\n              ?.match(/filename=(.*)/)?.[1]\n              ?.replace(/[\"\";]/g, '')\n          : '';\n\n        await ctx.reply({\n          document: response?.data,\n          fileName,\n          mimetype: tools.mime.contentType(contentType),\n        });\n      } else {\n        const text = response?.data;\n        let json;\n\n        try {\n          json = JSON.parse(text);\n        } catch (error) {\n          json = null;\n        }\n\n        const responseText = json ? walkJSON(json) : text;\n        await ctx.reply(responseText);\n      }\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error);\n    }\n  },\n};\n\nfunction walkJSON(json, depth = 0, array = []) {\n  for (const key in json) {\n    array.push(`${'â”Š'.repeat(depth)}${depth > 0 ? ' ' : ''}${formatter.bold(key)}:`);\n    if (typeof json[key] === 'object' && json[key] !== null) {\n      walkJSON(json[key], depth + 1, array);\n    } else {\n      array[array.length - 1] += ` ${json[key]}`;\n    }\n  }\n  return array.join('\\n');\n}\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\tool\\findwaifu.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":6,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":6,"endColumn":22},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":8,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":8,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":14,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":14,"endColumn":21}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/* Deprecated: gktw migrated to @whiskeysockets/baileys\nconst {\n    Baileys\n} = require(\"@itsreimau/gktw\");\n*/\nconst axios = require('axios');\n\nmodule.exports = {\n  name: 'findwaifu',\n  category: 'tool',\n  permissions: {\n    coin: 10,\n  },\n  code: async ctx => {\n    const { formatter, tools } = ctx.bot.context;\n    const [checkMedia, checkQuotedMedia] = await Promise.all([\n      tools.cmd.checkMedia(ctx.msg.contentType, 'image'),\n      tools.cmd.checkQuotedMedia(ctx.quoted?.contentType, 'image'),\n    ]);\n\n    if (!checkMedia && !checkQuotedMedia)\n      return await ctx.reply(\n        formatter.quote(tools.msg.generateInstruction(['send', 'reply'], 'image'))\n      );\n\n    try {\n      const buffer = (await ctx.msg.media.toBuffer()) || (await ctx.quoted?.media.toBuffer());\n      const uploadUrl = await tools.api.uploadImage(buffer);\n      const apiUrl = tools.api.createUrl('neko', '/tools/find-waifu', {\n        imageUrl: uploadUrl,\n      });\n      const result = (await axios.get(apiUrl)).data.result.character.name;\n\n      await ctx.reply(tools.msg.ucwords(result));\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error, true);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\tool\\gempa.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":22},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":3,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":3,"endColumn":7}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const axios = require('axios');\n\nmodule.exports = {\n  name: 'gempa',\n  aliases: ['gempabumi', 'infogempa'],\n  category: 'tool',\n  permissions: {\n    coin: 10,\n  },\n  code: async ctx => {\n    const { formatter, tools, config } = ctx.bot.context;\n    try {\n      const apiUrl = tools.api.createUrl('https://data.bmkg.go.id', '/DataMKG/TEWS/autogempa.json');\n      const result = (await axios.get(apiUrl)).data.Infogempa.gempa;\n\n      await ctx.reply({\n        image: {\n          url: tools.api.createUrl('https://data.bmkg.go.id', `/DataMKG/TEWS/${result.Shakemap}`),\n        },\n        mimetype: tools.mime.lookup('jpeg'),\n        caption:\n          `${formatter.quote(`Region: ${result.Wilayah}`)}\\n` +\n          `${formatter.quote(`Date: ${result.Tanggal}`)}\\n` +\n          `${formatter.quote(`Potential: ${result.Potensi}`)}\\n` +\n          `${formatter.quote(`Magnitude: ${result.Magnitude}`)}\\n` +\n          `${formatter.quote(`Depth: ${result.Kedalaman}`)}\\n` +\n          `${formatter.quote(`Coordinates: ${result.Coordinates}`)}\\n${formatter.quote(\n            `Felt: ${result.Dirasakan}`\n          )}`,\n        footer: config.msg.footer,\n      });\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error, true);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\tool\\getgithubgist.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":22},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":3,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":3,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":10,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":10,"endColumn":21}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const axios = require('axios');\n\nmodule.exports = {\n  name: 'getgithubgist',\n  aliases: ['getgist', 'gist', 'githubgist'],\n  category: 'tool',\n  permissions: {\n    coin: 10,\n  },\n  code: async ctx => {\n    const { formatter, tools, config } = ctx.bot.context;\n    const url = ctx.args[0] || null;\n\n    if (!url)\n      return await ctx.reply(\n        `${formatter.quote(tools.msg.generateInstruction(['send'], ['text']))}\\n${formatter.quote(\n          tools.msg.generateCmdExample(\n            ctx.used,\n            'https://gist.github.com/itsreimau/55792fc0386d183a581f8f723a6e4c73'\n          )\n        )}`\n      );\n\n    const isUrl = tools.cmd.isUrl(url);\n    if (!isUrl) return await ctx.reply(config.msg.urlInvalid);\n\n    try {\n      const apiUrl = tools.api.createUrl('neko', '/tools/getgist', {\n        url,\n      });\n      const result = (await axios.get(apiUrl)).data.result.content;\n\n      await ctx.reply(result);\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error, true);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\tool\\getpastebin.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":22},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":3,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":3,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":10,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":10,"endColumn":21}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const axios = require('axios');\n\nmodule.exports = {\n  name: 'getpastebin',\n  aliases: ['pastebin'],\n  category: 'tool',\n  permissions: {\n    coin: 10,\n  },\n  code: async ctx => {\n    const { formatter, tools, config } = ctx.bot.context;\n    const url = ctx.args[0] || null;\n\n    if (!url)\n      return await ctx.reply(\n        `${formatter.quote(tools.msg.generateInstruction(['send'], ['text']))}\\n${formatter.quote(\n          tools.msg.generateCmdExample(ctx.used, 'https://pastebin.com/hcv2WRnX')\n        )}`\n      );\n\n    const isUrl = tools.cmd.isUrl(url);\n    if (!isUrl) return await ctx.reply(config.msg.urlInvalid);\n\n    try {\n      const apiUrl = tools.api.createUrl('neko', '/tools/getpastebin', {\n        url,\n      });\n      const result = (await axios.get(apiUrl)).data.result.content;\n\n      await ctx.reply(result);\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error, true);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\tool\\googleimage.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":22},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":3,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":3,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":10,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":10,"endColumn":21}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const axios = require('axios');\n\nmodule.exports = {\n  name: 'googleimage',\n  aliases: ['gimage'],\n  category: 'tool',\n  permissions: {\n    coin: 10,\n  },\n  code: async ctx => {\n    const { formatter, tools, config } = ctx.bot.context;\n    const input = ctx.args.join(' ') || null;\n\n    if (!input)\n      return await ctx.reply(\n        `${formatter.quote(tools.msg.generateInstruction(['send'], ['text']))}\\n${formatter.quote(\n          tools.msg.generateCmdExample(ctx.used, 'rei ayanami')\n        )}`\n      );\n\n    try {\n      const apiUrl = tools.api.createUrl('davidcyril', '/googleimage', {\n        query: input,\n      });\n      const result = tools.cmd.getRandomElement((await axios.get(apiUrl)).data.results);\n\n      await ctx.reply({\n        image: {\n          url: result,\n        },\n        mimetype: tools.mime.lookup('jpeg'),\n        caption: formatter.quote(`Kueri: ${input}`),\n        footer: config.msg.footer,\n        buttons: [\n          {\n            buttonId: `${ctx.used.prefix + ctx.used.command} ${input}`,\n            buttonText: {\n              displayText: 'Ambil Lagi',\n            },\n          },\n        ],\n      });\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error, true);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\tool\\hd.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":7,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":7,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":13,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":13,"endColumn":21}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/* Deprecated: gktw migrated to @whiskeysockets/baileys\nconst {\n    Baileys\n} = require(\"@itsreimau/gktw\");\n*/\n\nmodule.exports = {\n  name: 'hd',\n  category: 'tool',\n  permissions: {\n    coin: 10,\n  },\n  code: async ctx => {\n    const { formatter, tools, config } = ctx.bot.context;\n    const [checkMedia, checkQuotedMedia] = await Promise.all([\n      tools.cmd.checkMedia(ctx.msg.contentType, 'image'),\n      tools.cmd.checkQuotedMedia(ctx.quoted?.contentType, 'image'),\n    ]);\n\n    if (!checkMedia && !checkQuotedMedia)\n      return await ctx.reply(\n        formatter.quote(tools.msg.generateInstruction(['send', 'reply'], 'image'))\n      );\n\n    try {\n      const buffer = (await ctx.msg.media.toBuffer()) || (await ctx.quoted?.media.toBuffer());\n      const uploadUrl = await tools.api.uploadImage(buffer);\n      const result = tools.api.createUrl('siputzx', '/api/iloveimg/upscale', {\n        image: uploadUrl,\n        scale: '4',\n      });\n\n      await ctx.reply({\n        image: {\n          url: result,\n        },\n        mimetype: tools.mime.lookup('png'),\n        caption: formatter.quote('Untukmu, tuan!'),\n        footer: config.msg.footer,\n      });\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error, true);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\tool\\holiday.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":22},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":2,"column":16,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":23},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":4,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":4,"endColumn":7},{"ruleId":"no-useless-concat","severity":2,"message":"Unexpected string concatenation of literals.","line":30,"column":20,"nodeType":"BinaryExpression","messageId":"unexpectedConcat","endLine":30,"endColumn":21}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const axios = require('axios');\nconst moment = require('moment-timezone');\n\nmodule.exports = {\n  name: 'holiday',\n  aliases: ['harilibur', 'libur'],\n  category: 'tool',\n  permissions: {\n    coin: 10,\n  },\n  code: async ctx => {\n    const { formatter, tools, config } = ctx.bot.context;\n    const month = new Date().getMonth() + 1;\n    const apiUrl = tools.api.createUrl('https://dayoffapi.vercel.app', '/api', {\n      month,\n    });\n\n    try {\n      const result = (await axios.get(apiUrl)).data;\n\n      const resultText = result\n        .reverse()\n        .map(res => {\n          const formattedDate = moment\n            .tz(res.tanggal, 'Asia/Jakarta')\n            .locale('id')\n            .format('dddd, DD MMMM YYYY');\n          return `${formatter.quote(res.keterangan)}\\n${formatter.quote(formattedDate)}`;\n        })\n        .join('\\n' + `${formatter.quote('Â· Â· â”€ Â·âœ¶Â· â”€ Â· Â·')}\\n`);\n      await ctx.reply({\n        text: resultText || config.msg.notFound,\n        footer: config.msg.footer,\n      });\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error, true);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\tool\\js.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":19,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":26},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":3,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":3,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":10,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":10,"endColumn":21},{"ruleId":"no-restricted-syntax","severity":2,"message":"iterators/generators require regenerator-runtime, which is too heavyweight for this guide to allow them. Separately, loops should be avoided in favor of array iterations.","line":23,"column":7,"nodeType":"ForOfStatement","messageId":"restrictedSyntax","endLine":28,"endColumn":8},{"ruleId":"no-await-in-loop","severity":2,"message":"Unexpected `await` inside a loop.","line":25,"column":18,"nodeType":"AwaitExpression","messageId":"unexpectedAwait","endLine":27,"endColumn":12}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const { spawn } = require('node:child_process');\n\nmodule.exports = {\n  name: 'js',\n  aliases: ['javascript', 'node'],\n  category: 'tool',\n  permissions: {\n    coin: 10,\n  },\n  code: async ctx => {\n    const { formatter, tools } = ctx.bot.context;\n    const input = ctx.args.join(' ') || ctx.quoted?.content || null;\n\n    if (!input)\n      return await ctx.reply(\n        `${formatter.quote(tools.msg.generateInstruction(['send'], ['text']))}\\n${formatter.quote(\n          tools.msg.generateCmdExample(ctx.used, 'console.log(\"halo, dunia!\");')\n        )}`\n      );\n\n    try {\n      const restricted = ['eval', 'global', 'import', 'require'];\n      for (const restrict of restricted) {\n        if (input.includes(restrict))\n          return await ctx.reply(\n            formatter.quote(`âŽ Penggunaan ${restrict} tidak diperbolehkan dalam kode!`)\n          );\n      }\n\n      const output = await new Promise(resolve => {\n        const childProcess = spawn('node', ['-e', input]);\n\n        let outputData = '';\n        let errorData = '';\n\n        childProcess.stdout.on('data', chunk => {\n          if (outputData.length >= 1024 * 1024) {\n            resolve('âŽ Kode mencapai batas penggunaan memori!');\n            childProcess.kill();\n          }\n          outputData += chunk.toString();\n        });\n\n        childProcess.stderr.on('data', chunk => {\n          errorData += chunk.toString();\n        });\n\n        childProcess.on('close', code => {\n          if (code !== 0) {\n            resolve(`âš  Keluar dari proses dengan kode: ${code}\\n${errorData.trim()}`);\n          } else {\n            resolve(outputData.trim());\n          }\n        });\n\n        setTimeout(() => {\n          resolve('âŽ Kode mencapai batas waktu output!');\n          childProcess.kill();\n        }, 10000);\n      });\n\n      await ctx.reply(formatter.monospace(output));\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\tool\\lyric.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":22},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":3,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":3,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":10,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":10,"endColumn":21}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const axios = require('axios');\n\nmodule.exports = {\n  name: 'lyric',\n  aliases: ['lirik'],\n  category: 'tool',\n  permissions: {\n    coin: 10,\n  },\n  code: async ctx => {\n    const { formatter, tools, config } = ctx.bot.context;\n    const input = ctx.args.join(' ') || null;\n\n    if (!input)\n      return await ctx.reply(\n        `${formatter.quote(tools.msg.generateInstruction(['send'], ['text']))}\\n${formatter.quote(\n          tools.msg.generateCmdExample(ctx.used, 'one last kiss - hikaru utada')\n        )}`\n      );\n\n    try {\n      const searchResult = (\n        await axios.get(\n          tools.api.createUrl('https://api.vreden.my.id', '/api/search/genius/find', {\n            lagu: input,\n          })\n        )\n      ).data.result[0];\n      const apiUrl = tools.api.createUrl('https://api.vreden.my.id', '/api/search/genius/lyrics', {\n        url: searchResult.url,\n      });\n      const result = (await axios.get(apiUrl)).data.result.lyrics;\n\n      await ctx.reply({\n        text:\n          `${formatter.quote(`Judul: ${searchResult.title}`)}\\n` +\n          `${formatter.quote('Â· Â· â”€ Â·âœ¶Â· â”€ Â· Â·')}\\n${result}`,\n        footer: config.msg.footer,\n      });\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error, true);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\tool\\mangainfo.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":22},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":3,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":3,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":10,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":10,"endColumn":21}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const axios = require('axios');\n\nmodule.exports = {\n  name: 'mangainfo',\n  aliases: ['manga'],\n  category: 'tool',\n  permissions: {\n    coin: 10,\n  },\n  code: async ctx => {\n    const { formatter, tools, config } = ctx.bot.context;\n    const input = ctx.args.join(' ') || null;\n\n    if (!input)\n      return await ctx.reply(\n        `${formatter.quote(tools.msg.generateInstruction(['send'], ['text']))}\\n${formatter.quote(\n          tools.msg.generateCmdExample(ctx.used, 'evangelion')\n        )}`\n      );\n\n    try {\n      const apiUrl = tools.api.createUrl('https://api.jikan.moe', '/v4/manga', {\n        q: input,\n      });\n      const result = (await axios.get(apiUrl)).data.data[0];\n\n      await ctx.reply({\n        text:\n          `${formatter.quote(`Judul: ${result.title}`)}\\n` +\n          `${formatter.quote(`Judul Inggris: ${result.title_english}`)}\\n` +\n          `${formatter.quote(`Judul Jepang: ${result.title_japanese}`)}\\n` +\n          `${formatter.quote(`Tipe: ${result.type}`)}\\n` +\n          `${formatter.quote(`Bab: ${result.chapters}`)}\\n` +\n          `${formatter.quote(`Volume: ${result.volumes}`)}\\n` +\n          `${formatter.quote(`URL: ${result.url}`)}\\n` +\n          `${formatter.quote('Â· Â· â”€ Â·âœ¶Â· â”€ Â· Â·')}\\n${await tools.cmd.translate(\n            result.synopsis,\n            'id'\n          )}`,\n        footer: config.msg.footer,\n      });\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error, true);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\tool\\menfess.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":7,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":7,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":15,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":15,"endColumn":21}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/* Deprecated: gktw migrated to @whiskeysockets/baileys\nconst {\n    Baileys\n} = require(\"@itsreimau/gktw\");\n*/\n\nmodule.exports = {\n  name: 'menfess',\n  aliases: ['conf', 'confes', 'confess', 'menf', 'menfes'],\n  category: 'tool',\n  permissions: {\n    coin: 10,\n    private: true,\n  },\n  code: async ctx => {\n    const { formatter, tools, config, database: db } = ctx.bot.context;\n    const [id, ...text] = ctx.args;\n    const targetId = id ? id.replace(/[^\\d]/g, '') : null;\n    const menfessText = text ? text.join(' ') : null;\n\n    const senderId = ctx.getId(ctx.sender.jid);\n\n    if (!targetId && !menfessText)\n      return await ctx.reply(\n        `${formatter.quote(tools.msg.generateInstruction(['send'], ['text']))}\\n` +\n          `${formatter.quote(tools.msg.generateCmdExample(ctx.used, `${senderId} halo, dunia!`))}\\n${formatter.quote(\n            tools.msg.generateNotes([\n              'Jangan gunakan spasi pada angka. Contoh: +62 8123-4567-8910, seharusnya +628123-4567-8910',\n            ])\n          )}`\n      );\n\n    if (targetId === config.bot.id)\n      return await ctx.reply(formatter.quote('âŽ Tidak dapat digunakan pada bot.'));\n    if (targetId === senderId)\n      return await ctx.reply(formatter.quote('âŽ Tidak dapat digunakan pada diri sendiri.'));\n\n    const allMenfessDb = (await db.get('menfess')) || {};\n    if (\n      Object.values(allMenfessDb).some(\n        menfess => menfess.from === senderId || menfess.to === senderId\n      )\n    )\n      return await ctx.reply(\n        formatter.quote(\n          'âŽ Kamu tidak dapat mengirim menfess karena sedang terlibat dalam percakapan lain.'\n        )\n      );\n    if (\n      Object.values(allMenfessDb).some(\n        menfess => menfess.from === targetId || menfess.to === targetId\n      )\n    )\n      return await ctx.reply(\n        formatter.quote(\n          'âŽ Kamu tidak dapat mengirim menfess, karena dia sedang terlibat dalam percakapan lain.'\n        )\n      );\n\n    try {\n      const buttons = [\n        {\n          buttonId: 'delete',\n          buttonText: {\n            displayText: 'Hapus Menfess',\n          },\n        },\n      ];\n\n      await ctx.sendMessage(\n        `${targetId}@s.whatsapp.net`,\n        {\n          text: menfessText,\n          footer: formatter.italic(\n            `Setiap pesan yang kamu kirim akan diteruskan ke orang tersebut!`\n          ),\n          buttons,\n        },\n        {\n          quoted: tools.cmd.fakeMetaAiQuotedText('Seseorang telah mengirimi-mu menfess.'),\n        }\n      );\n      await db.set(`menfess.${Date.now()}`, {\n        from: senderId,\n        to: targetId,\n      });\n\n      await ctx.reply({\n        text: formatter.quote(`âœ… Pesan berhasil terkirim!`),\n        footer: config.msg.footer,\n        buttons,\n      });\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\tool\\ocr.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":6,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":6,"endColumn":22},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":8,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":8,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":15,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":15,"endColumn":21}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/* Deprecated: gktw migrated to @whiskeysockets/baileys\nconst {\n    Baileys\n} = require(\"@itsreimau/gktw\");\n*/\nconst axios = require('axios');\n\nmodule.exports = {\n  name: 'ocr',\n  aliases: ['image2text', 'imagetotext', 'img2text', 'imgtotext'],\n  category: 'tool',\n  permissions: {\n    coin: 10,\n  },\n  code: async ctx => {\n    const { formatter, tools } = ctx.bot.context;\n    const [checkMedia, checkQuotedMedia] = await Promise.all([\n      tools.cmd.checkMedia(ctx.msg.contentType, 'image'),\n      tools.cmd.checkQuotedMedia(ctx.quoted?.contentType, 'image'),\n    ]);\n\n    if (!checkMedia && !checkQuotedMedia)\n      return await ctx.reply(\n        formatter.quote(tools.msg.generateInstruction(['send', 'reply'], 'image'))\n      );\n\n    try {\n      const buffer = (await ctx.msg.media.toBuffer()) || (await ctx.quoted?.media.toBuffer());\n      const uploadUrl = await tools.api.uploadImage(buffer);\n      const apiUrl = tools.api.createUrl('hang', '/tools/ocr', {\n        url: uploadUrl,\n      });\n      const { result } = (await axios.get(apiUrl)).data;\n\n      await ctx.reply(result);\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error, true);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\tool\\pinterest.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":22},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":3,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":3,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":10,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":10,"endColumn":21}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const axios = require('axios');\n\nmodule.exports = {\n  name: 'pinterest',\n  aliases: ['pin', 'pint'],\n  category: 'tool',\n  permissions: {\n    coin: 10,\n  },\n  code: async ctx => {\n    const { formatter, tools, config } = ctx.bot.context;\n    const input = ctx.args.join(' ') || null;\n\n    if (!input)\n      return await ctx.reply(\n        `${formatter.quote(tools.msg.generateInstruction(['send'], ['text']))}\\n${formatter.quote(\n          tools.msg.generateCmdExample(ctx.used, 'rei ayanami')\n        )}`\n      );\n\n    try {\n      const apiUrl = tools.api.createUrl('izumi', '/search/pinterest', {\n        query: input,\n      });\n      const result = tools.cmd.getRandomElement((await axios.get(apiUrl)).data.result.pins).media\n        .images.orig.url;\n\n      await ctx.reply({\n        image: {\n          url: result,\n        },\n        mimetype: tools.mime.lookup('jpg'),\n        caption: formatter.quote(`Kueri: ${input}`),\n        footer: config.msg.footer,\n        buttons: [\n          {\n            buttonId: `${ctx.used.prefix + ctx.used.command} ${input}`,\n            buttonText: {\n              displayText: 'Ambil Lagi',\n            },\n          },\n        ],\n      });\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error, true);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\tool\\pixiv.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":22},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":3,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":3,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":9,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":9,"endColumn":21}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const axios = require('axios');\n\nmodule.exports = {\n  name: 'pixiv',\n  category: 'tool',\n  permissions: {\n    premium: 10,\n  },\n  code: async ctx => {\n    const { formatter, tools, config } = ctx.bot.context;\n    const input = ctx.args.join(' ') || null;\n\n    if (!input)\n      return await ctx.reply(\n        `${formatter.quote(tools.msg.generateInstruction(['send'], ['text']))}\\n${formatter.quote(\n          tools.msg.generateCmdExample(ctx.used, 'rei ayanami')\n        )}`\n      );\n\n    try {\n      const apiUrl = tools.api.createUrl('neko', '/search/pixiv', {\n        q: input,\n      });\n      const result = tools.cmd.getRandomElement((await axios.get(apiUrl)).data.result).imageUrl;\n\n      await ctx.reply({\n        image: {\n          url: result,\n        },\n        mimetype: tools.mime.lookup('jpg'),\n        caption: formatter.quote(`Kueri: ${input}`),\n        footer: config.msg.footer,\n        buttons: [\n          {\n            buttonId: `${ctx.used.prefix + ctx.used.command} ${input}`,\n            buttonText: {\n              displayText: 'Ambil Lagi',\n            },\n          },\n        ],\n      });\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error, true);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\tool\\remini.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":6,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":6,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":12,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":12,"endColumn":21},{"ruleId":"no-unused-vars","severity":1,"message":"'apiUrl' is assigned a value but never used.","line":27,"column":13,"nodeType":"Identifier","messageId":"unusedVar","endLine":27,"endColumn":19,"suggestions":[{"messageId":"removeVar","data":{"varName":"apiUrl"},"fix":{"range":[820,915],"text":""},"desc":"Remove unused variable 'apiUrl'."}]},{"ruleId":"no-undef","severity":2,"message":"'result' is not defined.","line":33,"column":16,"nodeType":"Identifier","messageId":"undef","endLine":33,"endColumn":22}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/* Deprecated: gktw migrated to @whiskeysockets/baileys\nconst {\n    Baileys\n} = require(\"@itsreimau/gktw\");\n*/\nmodule.exports = {\n  name: 'remini',\n  category: 'tool',\n  permissions: {\n    coin: 10,\n  },\n  code: async ctx => {\n    const { formatter, tools, config } = ctx.bot.context;\n    const [checkMedia, checkQuotedMedia] = await Promise.all([\n      tools.cmd.checkMedia(ctx.msg.contentType, 'image'),\n      tools.cmd.checkQuotedMedia(ctx.quoted?.contentType, 'image'),\n    ]);\n\n    if (!checkMedia && !checkQuotedMedia)\n      return await ctx.reply(\n        formatter.quote(tools.msg.generateInstruction(['send', 'reply'], 'image'))\n      );\n\n    try {\n      const buffer = (await ctx.msg.media.toBuffer()) || (await ctx.quoted?.media.toBuffer());\n      const uploadUrl = await tools.api.uploadImage(buffer);\n      const apiUrl = tools.api.createUrl('davidcyril', '/remini', {\n        url: uploadUrl,\n      });\n\n      await ctx.reply({\n        image: {\n          url: result,\n        },\n        mimetype: tools.mime.lookup('jpg'),\n        caption: formatter.quote('Untukmu, tuan!'),\n        footer: config.msg.footer,\n      });\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error, true);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\tool\\removebg.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":6,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":6,"endColumn":22},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":8,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":8,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":15,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":15,"endColumn":21}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/* Deprecated: gktw migrated to @whiskeysockets/baileys\nconst {\n    Baileys\n} = require(\"@itsreimau/gktw\");\n*/\nconst axios = require('axios');\n\nmodule.exports = {\n  name: 'removebg',\n  aliases: ['rbg'],\n  category: 'tool',\n  permissions: {\n    coin: 10,\n  },\n  code: async ctx => {\n    const { formatter, tools, config } = ctx.bot.context;\n    const [checkMedia, checkQuotedMedia] = await Promise.all([\n      tools.cmd.checkMedia(ctx.msg.contentType, 'image'),\n      tools.cmd.checkQuotedMedia(ctx.quoted?.contentType, 'image'),\n    ]);\n\n    if (!checkMedia && !checkQuotedMedia)\n      return await ctx.reply(\n        formatter.quote(tools.msg.generateInstruction(['send', 'reply'], 'image'))\n      );\n\n    try {\n      const buffer = (await ctx.msg.media.toBuffer()) || (await ctx.quoted?.media.toBuffer());\n      const uploadUrl = await tools.api.uploadImage(buffer);\n      const apiUrl = tools.api.createUrl('izumi', '/tools/removebg', {\n        imageUrl: uploadUrl,\n      });\n      const result = (await axios.get(apiUrl)).data.result.imageLink;\n\n      await ctx.reply({\n        image: {\n          url: result,\n        },\n        mimetype: tools.mime.lookup('png'),\n        caption: formatter.quote('Untukmu, tuan!'),\n        footer: config.msg.footer,\n      });\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error, true);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\tool\\screenshot.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":1,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":8,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":8,"endColumn":21},{"ruleId":"eqeqeq","severity":2,"message":"Expected '===' and instead saw '=='.","line":24,"column":28,"nodeType":"BinaryExpression","messageId":"unexpected","endLine":24,"endColumn":30,"suggestions":[{"messageId":"replaceOperator","data":{"expectedOperator":"===","actualOperator":"=="},"fix":{"range":[694,696],"text":"==="},"desc":"Use '===' instead of '=='."}]},{"ruleId":"eqeqeq","severity":2,"message":"Expected '===' and instead saw '=='.","line":25,"column":28,"nodeType":"BinaryExpression","messageId":"unexpected","endLine":25,"endColumn":30,"suggestions":[{"messageId":"replaceOperator","data":{"expectedOperator":"===","actualOperator":"=="},"fix":{"range":[762,764],"text":"==="},"desc":"Use '===' instead of '=='."}]}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"module.exports = {\n  name: 'screenshot',\n  aliases: ['ss', 'sshp', 'sspc', 'sstab', 'ssweb'],\n  category: 'tool',\n  permissions: {\n    coin: 10,\n  },\n  code: async ctx => {\n    const { formatter, tools, config } = ctx.bot.context;\n    const url = ctx.args[0] || null;\n\n    if (!url)\n      return await ctx.reply(\n        `${formatter.quote(tools.msg.generateInstruction(['send'], ['text']))}\\n${formatter.quote(\n          tools.msg.generateCmdExample(ctx.used, 'https://itsreimau.is-a.dev')\n        )}`\n      );\n\n    const isUrl = tools.cmd.isUrl(url);\n    if (!isUrl) return await ctx.reply(config.msg.urlInvalid);\n\n    try {\n      let endpoint = '/api/tools/sspc';\n      if (ctx.used.command == 'sshp') endpoint = '/api/tools/sshp';\n      if (ctx.used.command == 'sstab') endpoint = '/api/tools/sstab';\n      const result = tools.api.createUrl('diibot', endpoint, {\n        url,\n      });\n\n      await ctx.reply({\n        image: {\n          url: result,\n        },\n        mimetype: tools.mime.lookup('jpg'),\n        caption: formatter.quote(`URL: ${url}`),\n        footer: config.msg.footer,\n      });\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error, true);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\tool\\translate.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":22},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":2,"column":11,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":18},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":3,"column":23,"nodeType":"Identifier","messageId":"undef","endLine":3,"endColumn":30},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":5,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":5,"endColumn":7},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":54,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":54,"endColumn":20,"suggestions":[{"fix":{"range":[1796,1817],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const axios = require('axios');\nconst z = require('zod');\nconst { createUrl } = require('../../tools/api');\n\nmodule.exports = {\n  name: 'translate',\n  aliases: ['tr'],\n  category: 'tool',\n  permissions: {\n    coin: 10,\n  },\n  code: async ctx => {\n    const { formatter, config } = ctx.bot.context;\n\n    try {\n      const langCode = ctx.args[0]?.length === 2 ? ctx.args[0] : 'id';\n      const input =\n        ctx.args.slice(ctx.args[0]?.length === 2 ? 1 : 0).join(' ') || ctx.quoted?.content || '';\n\n      if (input.toLowerCase() === 'list') {\n        const langListUrl = createUrl(\n          'https://raw.githubusercontent.com',\n          '/itsecurityco/to-google-translate/refs/heads/master/supported_languages.json'\n        );\n        const response = await axios.get(langListUrl);\n        const listText = response.data\n          .map(\n            lang =>\n              `${formatter.quote(`Code: ${lang.code}`)}\\n${formatter.quote(`Language: ${lang.language}`)}`\n          )\n          .join(`\\n${formatter.quote('Â· Â· â”€ Â·âœ¶Â· â”€ Â· Â·')}\\n`);\n        return ctx.reply({ text: listText, footer: config.msg.footer });\n      }\n\n      // Validation\n      const inputSchema = z.string().min(1, { message: 'Please provide text to translate.' });\n      const inputCheck = inputSchema.safeParse(input);\n      if (!inputCheck.success) {\n        return ctx.reply(\n          formatter.quote(`âŽ ${inputCheck.error.issues[0].message}\\n\\nExample: .tr en hello world`)\n        );\n      }\n      const textToTranslate = inputCheck.data;\n\n      // API Call\n      const apiUrl = createUrl('davidcyril', '/tools/translate', {\n        text: textToTranslate,\n        to: langCode,\n      });\n      const result = (await axios.get(apiUrl)).data.translated_text;\n\n      return ctx.reply(result);\n    } catch (error) {\n      console.error(error);\n      return ctx.reply(formatter.quote(`An error occurred: ${error.message}`));\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\tool\\upload.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":7,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":7,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":14,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":14,"endColumn":21}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/* Deprecated: gktw migrated to @whiskeysockets/baileys\nconst {\n    Baileys\n} = require(\"@itsreimau/gktw\");\n*/\n\nmodule.exports = {\n  name: 'upload',\n  aliases: ['tourl'],\n  category: 'tool',\n  permissions: {\n    coin: 10,\n  },\n  code: async ctx => {\n    const { formatter, tools, config } = ctx.bot.context;\n    const [checkMedia, checkQuotedMedia] = await Promise.all([\n      tools.cmd.checkMedia(ctx.msg.contentType, ['audio', 'document', 'image', 'video', 'sticker']),\n      tools.cmd.checkQuotedMedia(ctx.quoted?.contentType, [\n        'audio',\n        'document',\n        'image',\n        'video',\n        'sticker',\n      ]),\n    ]);\n\n    if (!checkMedia && !checkQuotedMedia)\n      return await ctx.reply(\n        formatter.quote(\n          tools.msg.generateInstruction(\n            ['send', 'reply'],\n            ['audio', 'document', 'image', 'video', 'sticker']\n          )\n        )\n      );\n\n    try {\n      const buffer = (await ctx.msg.media.toBuffer()) || (await ctx.quoted?.media.toBuffer());\n      const filename = `file.${tools.mime.extension(ctx.msg.media.mimetype || ctx.quoted?.media.mimetype)}`;\n      const result = await tools.api.uploadFile(buffer, filename);\n\n      await ctx.reply({\n        text: formatter.quote(`URL: ${result}`),\n        footer: config.msg.footer,\n        interactiveButtons: [\n          {\n            name: 'cta_copy',\n            buttonParamsJson: JSON.stringify({\n              display_text: 'Salin URL',\n              copy_code: result,\n            }),\n          },\n        ],\n      });\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error, true);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\tool\\wallpaper.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":22},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":3,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":3,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":9,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":9,"endColumn":21}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const axios = require('axios');\n\nmodule.exports = {\n  name: 'wallpaper',\n  category: 'tool',\n  permissions: {\n    coin: 10,\n  },\n  code: async ctx => {\n    const { formatter, tools, config } = ctx.bot.context;\n    const input = ctx.args.join(' ') || null;\n\n    if (!input)\n      return await ctx.reply(\n        `${formatter.quote(tools.msg.generateInstruction(['send'], ['text']))}\\n${formatter.quote(\n          tools.msg.generateCmdExample(ctx.used, 'rei ayanami')\n        )}`\n      );\n\n    try {\n      const apiUrl = tools.api.createUrl('diibot', '/api/search/wallpaper', {\n        query: input,\n      });\n      const result = tools.cmd.getRandomElement((await axios.get(apiUrl)).data.result).imageUrl;\n\n      await ctx.reply({\n        image: {\n          url: result,\n        },\n        mimetype: tools.mime.lookup('jpeg'),\n        caption: formatter.quote(`Kueri: ${input}`),\n        footer: config.msg.footer,\n        buttons: [\n          {\n            buttonId: `${ctx.used.prefix + ctx.used.command} ${input}`,\n            buttonText: {\n              displayText: 'Ambil Lagi',\n            },\n          },\n        ],\n      });\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error, true);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\tool\\weather.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":22},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":2,"column":16,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":23},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":3,"column":11,"nodeType":"Identifier","messageId":"undef","endLine":3,"endColumn":18},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":4,"column":23,"nodeType":"Identifier","messageId":"undef","endLine":4,"endColumn":30},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":5,"column":21,"nodeType":"Identifier","messageId":"undef","endLine":5,"endColumn":28},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":7,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":7,"endColumn":7},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":36,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":36,"endColumn":18,"suggestions":[{"fix":{"range":[1007,1047],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":39,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":39,"endColumn":18,"suggestions":[{"fix":{"range":[1142,1226],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":82,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":82,"endColumn":20,"suggestions":[{"fix":{"range":[2948,2969],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]}],"suppressedMessages":[],"errorCount":6,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const axios = require('axios');\nconst moment = require('moment-timezone');\nconst z = require('zod');\nconst { createUrl } = require('../../tools/api');\nconst { ucwords } = require('../../utils/formatters');\n\nmodule.exports = {\n  name: 'weather',\n  aliases: ['cuaca'],\n  category: 'tool',\n  permissions: {\n    coin: 10,\n  },\n  code: async ctx => {\n    const { formatter, config } = ctx.bot.context;\n\n    try {\n      const input = ctx.args.join(' ');\n\n      // Validation\n      const locationSchema = z.string().min(1, { message: 'Please provide a location.' });\n      const validationResult = locationSchema.safeParse(input);\n      if (!validationResult.success) {\n        return ctx.reply(\n          formatter.quote(\n            `âŽ ${validationResult.error.issues[0].message}\\n\\nExample: .weather London`\n          )\n        );\n      }\n      const location = validationResult.data;\n\n      // API Call\n      const apiUrl = createUrl('diibot', '/api/tools/cekcuaca', {\n        query: location,\n      });\n      console.log('Weather API URL:', apiUrl);\n      const response = await axios.get(apiUrl);\n      const { result } = response.data;\n      console.log('Weather API result keys:', result ? Object.keys(result) : 'undefined');\n\n      if (\n        !result ||\n        !result.name ||\n        !result.weather ||\n        !Array.isArray(result.weather) ||\n        result.weather.length === 0 ||\n        !result.main\n      ) {\n        throw new Error(\n          `Weather data not found for \"${location}\". The API may be down or location invalid. Try another city.`\n        );\n      }\n\n      const replyText = [\n        `Location: ${result.name}, ${result.sys.country}`,\n        `Coordinates: ${result.coord.lat}, ${result.coord.lon}`,\n        `Last updated: ${moment.unix(result.dt).tz('Africa/Accra').format('DD/MM/YYYY HH:mm')} GMT`,\n        'Â· Â· â”€ Â·âœ¶Â· â”€ Â· Â·',\n        `Weather: ${ucwords(result.weather[0].description)}`,\n        `Temperature: ${result.main.temp}Â°C (Min ${result.main.temp_min}Â°C | Max ${result.main.temp_max}Â°C)`,\n        `Feels like: ${result.main.feels_like}Â°C`,\n        `Humidity: ${result.main.humidity}%`,\n        `Air Pressure: ${result.main.pressure} hPa`,\n        'Â· Â· â”€ Â·âœ¶Â· â”€ Â· Â·',\n        `Wind: ${result.wind.speed} m/s (${(result.wind.speed * 3.6).toFixed(1)} km/h)`,\n        `Wind Direction: ${result.wind.deg}Â°`,\n        `Wind Gust: ${result.wind.gust || 'N/A'} m/s`,\n        'Â· Â· â”€ Â·âœ¶Â· â”€ Â· Â·',\n        `Clouds: ${result.clouds.all}%`,\n        `Visibility: ${result.visibility ? `${(result.visibility / 1000).toFixed(1)} km` : 'N/A'}`,\n        `Sunrise: ${moment.unix(result.sys.sunrise).tz('Africa/Accra').format('HH:mm')} GMT`,\n        `Sunset: ${moment.unix(result.sys.sunset).tz('Africa/Accra').format('HH:mm')} GMT`,\n      ]\n        .map(line => formatter.quote(line))\n        .join('\\n');\n\n      return ctx.reply({\n        text: replyText,\n        footer: config.msg.footer,\n      });\n    } catch (error) {\n      console.error(error);\n      return ctx.reply(formatter.quote(`An error occurred: ${error.message}`));\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\tool\\zerochan.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":22},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":3,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":3,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'code'.","line":9,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":9,"endColumn":21}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const axios = require('axios');\n\nmodule.exports = {\n  name: 'zerochan',\n  category: 'tool',\n  permissions: {\n    coin: 10,\n  },\n  code: async ctx => {\n    const { formatter, tools, config } = ctx.bot.context;\n    const input = ctx.args.join(' ') || null;\n\n    if (!input)\n      return await ctx.reply(\n        `${formatter.quote(tools.msg.generateInstruction(['send'], ['text']))}\\n${formatter.quote(\n          tools.msg.generateCmdExample(ctx.used, 'rei ayanami')\n        )}`\n      );\n\n    try {\n      const apiUrl = tools.api.createUrl('izumi', '/search/zerochan', {\n        query: input,\n      });\n      const result = tools.cmd.getRandomElement((await axios.get(apiUrl)).data.result).downloadLink;\n\n      await ctx.reply({\n        image: {\n          url: result,\n        },\n        mimetype: tools.mime.lookup('jpeg'),\n        caption: formatter.quote(`Kueri: ${input}`),\n        footer: config.msg.footer,\n        buttons: [\n          {\n            buttonId: `${ctx.used.prefix + ctx.used.command} ${input}`,\n            buttonText: {\n              displayText: 'Ambil Lagi',\n            },\n          },\n        ],\n      });\n    } catch (error) {\n      await tools.cmd.handleError(ctx, error, true);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\tools\\nulis.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":6,"column":24,"nodeType":"Identifier","messageId":"undef","endLine":6,"endColumn":31},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":8,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":8,"endColumn":7},{"ruleId":"no-unused-vars","severity":1,"message":"'args' is defined but never used. Allowed unused args must match /^_/u.","line":16,"column":30,"nodeType":"Identifier","messageId":"unusedVar","endLine":16,"endColumn":34,"suggestions":[{"messageId":"removeVar","data":{"varName":"args"},"fix":{"range":[434,439],"text":""},"desc":"Remove unused variable 'args'."}]},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'execute'.","line":16,"column":44,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":16,"endColumn":46},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":101,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":101,"endColumn":20,"suggestions":[{"fix":{"range":[3531,3658],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":108,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":108,"endColumn":20,"suggestions":[{"fix":{"range":[3780,3828],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":125,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":125,"endColumn":20,"suggestions":[{"fix":{"range":[4529,4580],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Writing/Handwriting Command\n * Create custom text images with different fonts and templates\n */\n\nconst writingService = require('../../src/services/writingService');\n\nmodule.exports = {\n  name: 'nulis',\n  description: 'Create handwriting/writing images',\n  category: 'Tools',\n  usage: '!nulis <text> [--template <template>] [--font <font>]',\n  aliases: ['writing', 'handwriting'],\n  cooldown: 30,\n\n  execute: async (naze, m, { args, text }) => {\n    try {\n      // Parse arguments\n      let targetText = '';\n      let template = 'buku-kiri';\n      let font = 'indie';\n\n      if (text.includes('--template')) {\n        const parts = text.split('--template');\n        targetText = parts[0].trim();\n        const templatePart = parts[1]?.trim();\n\n        if (templatePart) {\n          const templateMatch = templatePart.match(/^(\\w+(-\\w+)?)/);\n          if (templateMatch) {\n            template = templateMatch[1].toLowerCase();\n          }\n        }\n      } else if (text.includes('--font')) {\n        const parts = text.split('--font');\n        targetText = parts[0].trim();\n        const fontPart = parts[1]?.trim();\n\n        if (fontPart) {\n          const fontMatch = fontPart.match(/^(\\w+)/);\n          if (fontMatch) {\n            font = fontMatch[1].toLowerCase();\n          }\n        }\n      } else {\n        targetText = text;\n      }\n\n      if (!targetText || targetText.length === 0) {\n        // Show available options\n        const templates = writingService.getAvailableTemplates();\n        const fonts = writingService.getAvailableFonts();\n\n        const templateList = templates.map(t => `â€¢ ${t.id}: ${t.name}`).join('\\n');\n        const fontList = fonts.map(f => `â€¢ ${f.id}: ${f.name}`).join('\\n');\n\n        return m.reply(\n          `Please provide text to write!\\n\\nUsage: !nulis <text> [--template <template>] [--font <font>]\\n\\nAvailable Templates:\\n${templateList}\\n\\nAvailable Fonts:\\n${fontList}\\n\\nExample: !nulis Halo dunia --template buku-kanan --font impact`\n        );\n      }\n\n      // Validate template\n      const availableTemplates = writingService.getAvailableTemplates();\n      const validTemplate = availableTemplates.find(t => t.id === template);\n\n      if (!validTemplate) {\n        const templateList = availableTemplates.map(t => `â€¢ ${t.id}: ${t.name}`).join('\\n');\n        return m.reply(\n          `Invalid template!\\n\\nAvailable Templates:\\n${templateList}\\n\\nExample: !nulis Halo dunia --template buku-kanan`\n        );\n      }\n\n      // Validate font\n      const availableFonts = writingService.getAvailableFonts();\n      const validFont = availableFonts.find(f => f.id === font);\n\n      if (!validFont) {\n        const fontList = availableFonts.map(f => `â€¢ ${f.id}: ${f.name}`).join('\\n');\n        return m.reply(\n          `Invalid font!\\n\\nAvailable Fonts:\\n${fontList}\\n\\nExample: !nulis Halo dunia --font impact`\n        );\n      }\n\n      // Check rate limit\n      if (!writingService.checkRateLimit('writing')) {\n        return m.reply('Rate limit exceeded. Please wait 30 seconds before creating new writing.');\n      }\n\n      await m.reply('â³ Creating handwriting...');\n\n      // Create writing\n      const result = await writingService.createWriting(targetText, template, font);\n\n      if (result.success) {\n        // Send image\n        await m.reply({\n          image: result.buffer,\n          caption: `Handwriting: \"${targetText.substring(0, 50)}${targetText.length > 50 ? '...' : ''}\"\\nTemplate: ${validTemplate.name}\\nFont: ${validFont.name}`,\n        });\n\n        console.log(\n          `Writing created for ${m.sender}: \"${targetText.substring(0, 50)}...\" (${template}, ${font})`\n        );\n      } else {\n        await m.reply('Failed to create writing. Please try again.');\n      }\n    } catch (error) {\n      console.error('Error in nulis command:', error);\n\n      if (error.message.includes('Rate limit')) {\n        await m.reply('Rate limit exceeded. Please wait before creating new writing.');\n      } else if (error.message.includes('Text too long')) {\n        await m.reply('Text too long. Please use shorter text (max 500 characters).');\n      } else if (\n        error.message.includes('Invalid template') ||\n        error.message.includes('Invalid font')\n      ) {\n        await m.reply(error.message);\n      } else if (error.message.includes('ImageMagick')) {\n        await m.reply('Image processing error. Please try again later.');\n      } else {\n        await m.reply('Terjadi kesalahan saat membuat tulisan. Silakan coba lagi.');\n      }\n\n      console.error('Unexpected error in nulis:', error);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\commands\\tools\\tts.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":6,"column":29,"nodeType":"Identifier","messageId":"undef","endLine":6,"endColumn":36},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":8,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":8,"endColumn":7},{"ruleId":"no-unused-vars","severity":1,"message":"'args' is defined but never used. Allowed unused args must match /^_/u.","line":16,"column":30,"nodeType":"Identifier","messageId":"unusedVar","endLine":16,"endColumn":34,"suggestions":[{"messageId":"removeVar","data":{"varName":"args"},"fix":{"range":[398,403],"text":""},"desc":"Remove unused variable 'args'."}]},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'execute'.","line":16,"column":44,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":16,"endColumn":46},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":73,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":73,"endColumn":20,"suggestions":[{"fix":{"range":[2149,2264],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":80,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":80,"endColumn":20,"suggestions":[{"fix":{"range":[2394,2440],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":92,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":92,"endColumn":20,"suggestions":[{"fix":{"range":[2998,3047],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Text-to-Speech Command\n * Convert text to audio with multiple language support\n */\n\nconst textToSpeechService = require('../../src/services/textToSpeechService');\n\nmodule.exports = {\n  name: 'tts',\n  description: 'Convert text to speech',\n  category: 'Tools',\n  usage: '!tts <text> [--lang <language>]',\n  aliases: ['texttospeech', 'tospeech'],\n  cooldown: 10,\n\n  execute: async (naze, m, { args, text }) => {\n    try {\n      // Parse arguments\n      let targetText = '';\n      let language = 'id';\n\n      // Check for language flag\n      if (text.includes('--lang')) {\n        const parts = text.split('--lang');\n        targetText = parts[0].trim();\n        const langPart = parts[1]?.trim();\n\n        if (langPart) {\n          const langMatch = langPart.match(/^(\\w+)/);\n          if (langMatch) {\n            language = langMatch[1].toLowerCase();\n          }\n        }\n      } else {\n        targetText = text;\n      }\n\n      if (!targetText || targetText.length === 0) {\n        return m.reply(\n          'Please provide text to convert to speech\\n\\nUsage: !tts <text> [--lang <language>]\\nExample: !tts Halo dunia --lang en'\n        );\n      }\n\n      // Validate language\n      if (!textToSpeechService.validateLanguage(language)) {\n        const available = textToSpeechService.getAvailableLanguages();\n        const langList = Object.entries(available)\n          .map(([code, name]) => `â€¢ ${code}: ${name}`)\n          .join('\\n');\n        return m.reply(\n          `Invalid language code!\\n\\nAvailable languages:\\n${langList}\\n\\nExample: !tts Hello world --lang en`\n        );\n      }\n\n      // Check rate limit\n      if (!textToSpeechService.checkRateLimit('tts_global')) {\n        return m.reply('Rate limit exceeded. Please wait 5 seconds before using TTS again.');\n      }\n\n      await m.reply('â³ Converting text to speech...');\n\n      // Convert text to speech\n      const result = await textToSpeechService.textToSpeech(targetText, language);\n\n      if (result.success) {\n        // Send audio\n        await m.reply({\n          audio: result.buffer,\n          mimetype: 'audio/mpeg',\n          ptt: false,\n        });\n\n        console.log(\n          `TTS executed for ${m.sender}: \"${targetText.substring(0, 50)}...\" (${language})`\n        );\n      } else {\n        await m.reply('Failed to convert text to speech. Please try again.');\n      }\n    } catch (error) {\n      console.error('Error in TTS command:', error);\n\n      if (error.message.includes('Rate limit')) {\n        await m.reply('Rate limit exceeded. Please wait before using TTS again.');\n      } else if (error.message.includes('Text too long')) {\n        await m.reply('Text too long. Please use shorter text (max 500 characters).');\n      } else if (error.message.includes('TTS service rate limit')) {\n        await m.reply('TTS service is busy. Please try again in a few moments.');\n      } else {\n        await m.reply('Terjadi kesalahan saat mengconvert teks ke suara. Silakan coba lagi.');\n      }\n\n      console.error('Unexpected error in TTS:', error);\n    }\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\config.example.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'global' is not defined.","line":10,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":10,"endColumn":7}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Import necessary modules and dependencies\nconst Formatter = {\n  quote: text => `_${text}_`,\n  italic: text => `_${text}_`,\n  bold: text => `*${text}*`,\n  monospace: text => `\\`\\`${text}\\`\\``,\n};\n\n// Configuration\nglobal.config = {\n  // Basic bot information\n  bot: {\n    name: 'whatsdex', // Bot name\n    prefix: /^[Â°â€¢Ï€Ã·Ã—Â¶âˆ†Â£Â¢â‚¬Â¥Â®â„¢+âœ“_=|/~!?@#%^&.Â©^]/i, // Prefix characters to trigger commands\n    phoneNumber: '', // REPLACE WITH YOUR BOT'S PHONE NUMBER\n    thumbnail:\n      'https://repository-images.githubusercontent.com/753096396/84e76ef0-ba19-4c87-8ec2-ea803b097479', // Bot's thumbnail image\n    groupJid: '', // REPLACE WITH YOUR BOT'S GROUP JID\n    newsletterJid: '120363416372653441@newsletter', // JID for the bot's channel\n\n    // Bot session authentication configuration\n    authAdapter: {\n      adapter: 'default', // Adapter for storing the session (Adapter options: default, mysql, mongo, firebase)\n\n      // Default configuration\n      default: {\n        authDir: 'state',\n      },\n\n      // MySQL configuration\n      mysql: {\n        host: 'localhost:3306', // Hostname\n        user: 'root', // Username\n        password: 'admin123', // Password\n        database: 'whatsdex', // Database name\n      },\n\n      // MongoDB configuration\n      mongodb: {\n        url: 'mongodb://localhost:27017/whatsdex', // URL\n      },\n\n      // Firebase configuration\n      firebase: {\n        tableName: 'whatsdex', // Table name\n        session: 'state', // Session name\n      },\n    },\n  },\n\n  // Database configuration\n  database: {\n    mongoUri: 'mongodb://localhost:27017/whatsdex_app', // REPLACE WITH YOUR MONGODB CONNECTION URI\n  },\n\n  // Custom bot messages for specific situations\n  msg: {\n    admin: Formatter.quote('â›” This command can only be accessed by group admins!'), // Message when a command is for admins only\n    banned: Formatter.quote('â›” Cannot process because you have been banned by the Owner!'), // Message for banned users\n    botAdmin: Formatter.quote('â›” Cannot process because the bot is not an admin in this group!'), // Message if the bot is not an admin in the group\n    botGroupMembership: Formatter.quote(\n      `â›” Cannot process because you have not joined the bot's group!`\n    ), // Message if the user has not joined the bot's group\n    coin: Formatter.quote(\"â›” Cannot process because you don't have enough coins!\"), // Message when coins are insufficient\n    cooldown: Formatter.quote('ðŸ”„ This command is on cooldown, please wait...'), // Message during command cooldown\n    gamerestrict: Formatter.quote('â›” Cannot process because this group has restricted games!'), // Message if the group has restricted games\n    group: Formatter.quote('â›” This command can only be accessed within a group!'), // Message for group-only commands\n    groupSewa: Formatter.quote(`â›” The bot is inactive because this group has not been rented.`), // Message if the group has not been rented\n    owner: Formatter.quote('â›” This command can only be accessed by the Owner!'), // Message for owner-only commands\n    premium: Formatter.quote('â›” Cannot process because you are not a Premium user!'), // Message if the user is not Premium\n    private: Formatter.quote('â›” This command can only be accessed in a private chat!'), // Message for private chat-only commands\n    privatePremiumOnly: Formatter.quote(\n      'â›” Using the bot in a private chat is for Premium users only.'\n    ), // Message if a non-Premium user uses the bot in a private chat\n    restrict: Formatter.quote('â›” This command has been restricted for security reasons!'), // Command restriction message\n    unavailableAtNight: Formatter.quote(\n      'â›” The bot is unavailable from 12 AM to 6 AM. Please come back later!'\n    ), // Message if unavailable at night\n\n    readmore: '\\u200E'.repeat(4001), // Read more string\n    note: 'Welcome to WhatsDeX! Please replace this message with something relevant.', // Default note\n    footer: Formatter.italic('Developed by CodeDeX with â¤'), // Footer\n\n    wait: Formatter.quote('ðŸ”„ Please wait a moment...'), // Loading message\n    notFound: Formatter.quote('âŽ Nothing found! Please try again later.'), // Item not found message\n    urlInvalid: Formatter.quote('âŽ Invalid URL!'), // Message if the URL is invalid\n  },\n\n  // Bot owner information\n  owner: {\n    name: 'Your Name', // REPLACE WITH YOUR NAME\n    organization: 'Your Organization', // REPLACE WITH YOUR ORGANIZATION\n    id: '1234567890', // REPLACE WITH YOUR PHONE NUMBER\n    co: [''], // Co-owner's phone number\n  },\n\n  // Bot sticker\n  sticker: {\n    packname: 'WhatsDeX Sticker Pack', // Sticker pack name\n    author: 'CodeDeX', // Sticker author\n  },\n\n  // API keys for various services\n  api: {\n    openai: '', // REPLACE WITH YOUR OPENAI API KEY\n  },\n\n  // AI configuration\n  ai: {\n    summarization: {\n      SUMMARIZE_THRESHOLD: 16,\n      MESSAGES_TO_SUMMARIZE: 10,\n      HISTORY_PRUNE_LENGTH: 6,\n    },\n  },\n\n  // Bot system\n  system: {\n    alwaysOnline: true, // Bot always has \"online\" status\n    antiCall: true, // Bot automatically bans people who call\n    autoRead: true, // Bot automatically reads messages\n    autoMention: true, // Bot automatically mentions someone in sent messages\n    autoAiLabel: true, // Bot automatically adds an AI label in sent messages\n    autoTypingOnCmd: true, // Show \"typing...\" status when processing commands\n    cooldown: 10 * 1000, // Cooldown between commands (ms)\n    maxListeners: 50, // Max listeners for events\n    port: 3000, // Port (if using a server)\n    privatePremiumOnly: false, // Non-Premium users are not allowed to use the bot in private conversations\n    restrict: false, // Restrict command access\n    requireBotGroupMembership: false, // Must join the bot's group\n    requireGroupSewa: false, // Must rent the bot to be used in a group\n    reportErrorToOwner: true, // Report errors to the bot owner\n    selfOwner: false, // Bot becomes its own owner\n    selfReply: true, // Bot can reply to its own messages\n    timeZone: 'Africa/Accra', // Bot's time zone\n    unavailableAtNight: false, // Bot is unavailable at night, from 12 AM to 6 AM (Time will be adjusted according to timeZone)\n    useCoin: true, // Use coins\n    usePairingCode: false, // Use pairing code for connection\n    customPairingCode: 'UMBR4L15', // Custom pairing code for connection (Optional, if using QR code, if empty the pairing code will be random)\n    useStore: false, // Store for saving incoming messages\n    useServer: false, // Run the bot with a server\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\context.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":2,"column":26,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":33},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":3,"column":16,"nodeType":"Identifier","messageId":"undef","endLine":3,"endColumn":23},{"ruleId":"import-x/extensions","severity":2,"message":"Unexpected use of file extension \"js\" for \"./config.js\"","line":3,"column":24,"nodeType":"Literal","messageId":"unexpected","endLine":3,"endColumn":37,"suggestions":[{"fix":{"range":[132,145],"text":"'./config'"},"messageId":"removeUnexpected","data":{"extension":"js","importPath":"./config.js","fixedImportPath":"./config"},"desc":"Remove unexpected \"js\" file extension from \"./config.js\" into \"./config\""}]},{"ruleId":"no-unused-vars","severity":1,"message":"'pkg' is assigned a value but never used.","line":4,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":4,"endColumn":10,"suggestions":[{"messageId":"removeVar","data":{"varName":"pkg"},"fix":{"range":[148,186],"text":""},"desc":"Remove unused variable 'pkg'."}]},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":4,"column":13,"nodeType":"Identifier","messageId":"undef","endLine":4,"endColumn":20},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":5,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":5,"endColumn":22},{"ruleId":"import-x/extensions","severity":2,"message":"Unexpected use of file extension \"js\" for \"./tools/exports.js\"","line":5,"column":23,"nodeType":"Literal","messageId":"unexpected","endLine":5,"endColumn":43,"suggestions":[{"fix":{"range":[209,229],"text":"'./tools/exports'"},"messageId":"removeUnexpected","data":{"extension":"js","importPath":"./tools/exports.js","fixedImportPath":"./tools/exports"},"desc":"Remove unexpected \"js\" file extension from \"./tools/exports.js\" into \"./tools/exports\""}]},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":6,"column":19,"nodeType":"Identifier","messageId":"undef","endLine":6,"endColumn":26},{"ruleId":"import-x/extensions","severity":2,"message":"Unexpected use of file extension \"js\" for \"./utils/formatter.js\"","line":6,"column":27,"nodeType":"Literal","messageId":"unexpected","endLine":6,"endColumn":49,"suggestions":[{"fix":{"range":[258,280],"text":"'./utils/formatter'"},"messageId":"removeUnexpected","data":{"extension":"js","importPath":"./utils/formatter.js","fixedImportPath":"./utils/formatter"},"desc":"Remove unexpected \"js\" file extension from \"./utils/formatter.js\" into \"./utils/formatter\""}]},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":8,"column":16,"nodeType":"Identifier","messageId":"undef","endLine":8,"endColumn":23},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":12,"column":8,"nodeType":"Identifier","messageId":"undef","endLine":12,"endColumn":15},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":300,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":300,"endColumn":22},{"ruleId":"import-x/extensions","severity":2,"message":"Unexpected use of file extension \"js\" for \"./state.js\"","line":300,"column":23,"nodeType":"Literal","messageId":"unexpected","endLine":300,"endColumn":35,"suggestions":[{"fix":{"range":[7811,7823],"text":"'./state'"},"messageId":"removeUnexpected","data":{"extension":"js","importPath":"./state.js","fixedImportPath":"./state"},"desc":"Remove unexpected \"js\" file extension from \"./state.js\" into \"./state\""}]},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":335,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":335,"endColumn":7}],"suppressedMessages":[],"errorCount":13,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Simplified context with single Prisma database system\nconst { PrismaClient } = require('@prisma/client');\nconst config = require('./config.js');\nconst pkg = require('./package.json');\nconst tools = require('./tools/exports.js');\nconst formatter = require('./utils/formatter.js');\n\nconst logger = require('./src/utils/logger');\n\n// Initialize Prisma database service\nconst prisma = new PrismaClient({\n  log: process.env.NODE_ENV === 'development' ? ['query', 'error', 'warn'] : ['error'],\n});\n\n// Database service wrapper\nclass DatabaseService {\n  constructor() {\n    this.prisma = prisma;\n  }\n\n  // User operations\n  async getUser(jid) {\n    try {\n      const user = await this.prisma.user.findUnique({\n        where: { jid },\n        include: {\n          groups: {\n            include: { group: true },\n          },\n          subscriptions: {\n            include: { plan: true },\n            where: { status: 'active' },\n          },\n        },\n      });\n\n      if (user) {\n        return {\n          ...user,\n          premium: user.premium || user.subscriptions.length > 0,\n          groups: user.groups.map(ug => ug.groupId),\n        };\n      }\n      return null;\n    } catch (error) {\n      logger.error('Database error in getUser:', error);\n      throw error;\n    }\n  }\n\n  async createUser(userData) {\n    try {\n      return await this.prisma.user.create({\n        data: {\n          jid: userData.jid,\n          name: userData.name,\n          phone: userData.phone,\n          avatar: userData.avatar,\n          xp: userData.xp || 0,\n          level: userData.level || 1,\n          coin: userData.coin || 0,\n          premium: userData.premium || false,\n          banned: userData.banned || false,\n        },\n      });\n    } catch (error) {\n      logger.error('Database error in createUser:', error);\n      throw error;\n    }\n  }\n\n  async updateUser(jid, updateData) {\n    try {\n      return await this.prisma.user.update({\n        where: { jid },\n        data: updateData,\n      });\n    } catch (error) {\n      logger.error('Database error in updateUser:', error);\n      throw error;\n    }\n  }\n\n  async upsertUser(userData) {\n    try {\n      return await this.prisma.user.upsert({\n        where: { jid: userData.jid },\n        update: userData,\n        create: {\n          jid: userData.jid,\n          name: userData.name,\n          phone: userData.phone,\n          avatar: userData.avatar,\n          xp: userData.xp || 0,\n          level: userData.level || 1,\n          coin: userData.coin || 0,\n          premium: userData.premium || false,\n          banned: userData.banned || false,\n        },\n      });\n    } catch (error) {\n      logger.error('Database error in upsertUser:', error);\n      throw error;\n    }\n  }\n\n  // Group operations\n  async getGroup(jid) {\n    try {\n      const group = await this.prisma.group.findUnique({\n        where: { jid },\n        include: {\n          users: { include: { user: true } },\n          settings: true,\n        },\n      });\n\n      if (group) {\n        return {\n          ...group,\n          members: group.users.map(ug => ({\n            jid: ug.user.jid,\n            role: ug.role,\n          })),\n          settings: group.settings.reduce((acc, setting) => {\n            acc[setting.settingKey] = setting.settingValue;\n            return acc;\n          }, {}),\n        };\n      }\n      return null;\n    } catch (error) {\n      logger.error('Database error in getGroup:', error);\n      throw error;\n    }\n  }\n\n  async createGroup(groupData) {\n    try {\n      return await this.prisma.group.create({\n        data: {\n          jid: groupData.jid,\n          name: groupData.name,\n          description: groupData.description,\n          avatar: groupData.avatar,\n          ownerJid: groupData.ownerJid,\n          memberCount: groupData.memberCount || 0,\n        },\n      });\n    } catch (error) {\n      logger.error('Database error in createGroup:', error);\n      throw error;\n    }\n  }\n\n  async updateGroup(jid, updateData) {\n    try {\n      return await this.prisma.group.update({\n        where: { jid },\n        data: updateData,\n      });\n    } catch (error) {\n      logger.error('Database error in updateGroup:', error);\n      throw error;\n    }\n  }\n\n  // BotSetting operations\n  async getBotSetting(key) {\n    try {\n      return await this.prisma.botSetting.findUnique({\n        where: { key },\n      });\n    } catch (error) {\n      logger.error('Database error in getBotSetting:', error);\n      throw error;\n    }\n  }\n\n  async setBotSetting(key, value, category = 'general', description = null, updatedBy = 'system') {\n    try {\n      return await this.prisma.botSetting.upsert({\n        where: { key },\n        update: { value, category, description, updatedBy },\n        create: { key, value, category, description, updatedBy },\n      });\n    } catch (error) {\n      logger.error('Database error in setBotSetting:', error);\n      throw error;\n    }\n  }\n\n  async updateBotSetting(key, updateData) {\n    try {\n      return await this.prisma.botSetting.update({\n        where: { key },\n        data: updateData,\n      });\n    } catch (error) {\n      logger.error('Database error in updateBotSetting:', error);\n      throw error;\n    }\n  }\n\n  // Menfess operations\n  async getMenfess(id) {\n    try {\n      return await this.prisma.menfess.findUnique({\n        where: { id },\n      });\n    } catch (error) {\n      logger.error('Database error in getMenfess:', error);\n      throw error;\n    }\n  }\n\n  async createMenfess(menfessData) {\n    try {\n      return await this.prisma.menfess.create({\n        data: menfessData,\n      });\n    } catch (error) {\n      logger.error('Database error in createMenfess:', error);\n      throw error;\n    }\n  }\n\n  async deleteMenfess(id) {\n    try {\n      return await this.prisma.menfess.delete({\n        where: { id },\n      });\n    } catch (error) {\n      logger.error('Database error in deleteMenfess:', error);\n      throw error;\n    }\n  }\n\n  // Health check\n  async healthCheck() {\n    try {\n      await this.prisma.$queryRaw`SELECT 1`;\n      return { status: 'healthy', database: 'connected' };\n    } catch (error) {\n      return { status: 'unhealthy', database: 'disconnected', error: error.message };\n    }\n  }\n\n  // Connection management\n  async connect() {\n    try {\n      await this.prisma.$connect();\n      logger.info('Database connected successfully');\n    } catch (error) {\n      logger.error('Failed to connect to database:', error);\n      throw error;\n    }\n  }\n\n  async disconnect() {\n    try {\n      await this.prisma.$disconnect();\n      logger.info('Database disconnected successfully');\n    } catch (error) {\n      logger.error('Failed to disconnect from database:', error);\n      throw error;\n    }\n  }\n}\n\n// Initialize database service\nconst databaseService = new DatabaseService();\n\n// Legacy database interface for backward compatibility\nconst database = {\n  user: {\n    get: jid => databaseService.getUser(jid),\n    create: userData => databaseService.createUser(userData),\n    update: (jid, data) => databaseService.updateUser(jid, data),\n    upsert: userData => databaseService.upsertUser(userData),\n  },\n  group: {\n    get: jid => databaseService.getGroup(jid),\n    create: groupData => databaseService.createGroup(groupData),\n    update: (jid, data) => databaseService.updateGroup(jid, data),\n  },\n  bot: {\n    get: key => databaseService.getBotSetting(key),\n    set: (key, value, category, description, updatedBy) =>\n      databaseService.setBotSetting(key, value, category, description, updatedBy),\n    update: (key, data) => databaseService.updateBotSetting(key, data),\n  },\n  menfess: {\n    get: id => databaseService.getMenfess(id),\n    create: menfessData => databaseService.createMenfess(menfessData),\n    delete: id => databaseService.deleteMenfess(id),\n  },\n};\n\nconst state = require('./state.js');\n\nconst context = {\n  config,\n  database,\n  databaseService,\n\n  formatter,\n  state,\n  tools,\n  prisma, // Direct Prisma access for advanced queries\n\n  // Initialize services\n  async initialize() {\n    try {\n      await databaseService.connect();\n      logger.info('All services initialized successfully');\n    } catch (error) {\n      logger.error('Failed to initialize services:', error);\n      throw error;\n    }\n  },\n\n  // Graceful shutdown\n  async shutdown() {\n    try {\n      await databaseService.disconnect();\n      logger.info('All services shut down successfully');\n    } catch (error) {\n      logger.error('Error during services shutdown:', error);\n      throw error;\n    }\n  },\n};\n\nmodule.exports = context;\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\database\\ai_chat_database.js","messages":[{"ruleId":"import-x/no-import-module-exports","severity":2,"message":"Cannot use import declarations in modules that export using CommonJS (module.exports = 'foo' or exports.bar = 'hi')","line":1,"column":1,"nodeType":"ImportDeclaration","messageId":"notAllowed","endLine":1,"endColumn":25},{"ruleId":"import-x/no-extraneous-dependencies","severity":2,"message":"'mongoose' should be listed in the project's dependencies. Run 'npm i mongoose' to add it","line":3,"column":18,"nodeType":"CallExpression","messageId":"missing","endLine":3,"endColumn":37},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":3,"column":18,"nodeType":"Identifier","messageId":"undef","endLine":3,"endColumn":25},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":4,"column":16,"nodeType":"Identifier","messageId":"undef","endLine":4,"endColumn":23},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":5,"column":16,"nodeType":"Identifier","messageId":"undef","endLine":5,"endColumn":23},{"ruleId":"import-x/no-dynamic-require","severity":2,"message":"Calls to require() should use string literals","line":9,"column":12,"nodeType":"CallExpression","messageId":"require","endLine":9,"endColumn":57},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":9,"column":12,"nodeType":"Identifier","messageId":"undef","endLine":9,"endColumn":19},{"ruleId":"no-undef","severity":2,"message":"'__dirname' is not defined.","line":9,"column":30,"nodeType":"Identifier","messageId":"undef","endLine":9,"endColumn":39},{"ruleId":"no-unused-vars","severity":1,"message":"'e' is defined but never used.","line":10,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":10,"endColumn":11},{"ruleId":"import-x/no-dynamic-require","severity":2,"message":"Calls to require() should use string literals","line":11,"column":12,"nodeType":"CallExpression","messageId":"require","endLine":11,"endColumn":65},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":11,"column":12,"nodeType":"Identifier","messageId":"undef","endLine":11,"endColumn":19},{"ruleId":"no-undef","severity":2,"message":"'__dirname' is not defined.","line":11,"column":30,"nodeType":"Identifier","messageId":"undef","endLine":11,"endColumn":39},{"ruleId":"no-plusplus","severity":2,"message":"Unary operator '++' used.","line":22,"column":49,"nodeType":"UpdateExpression","messageId":"unexpectedUnaryOp","endLine":22,"endColumn":58},{"ruleId":"no-await-in-loop","severity":2,"message":"Unexpected `await` inside a loop.","line":24,"column":7,"nodeType":"AwaitExpression","messageId":"unexpectedAwait","endLine":29,"endColumn":9},{"ruleId":"no-await-in-loop","severity":2,"message":"Unexpected `await` inside a loop.","line":46,"column":7,"nodeType":"AwaitExpression","messageId":"unexpectedAwait","endLine":46,"endColumn":69},{"ruleId":"no-promise-executor-return","severity":2,"message":"Return values from promise executor functions cannot be read.","line":46,"column":36,"nodeType":"CallExpression","messageId":"returnsValue","endLine":46,"endColumn":68,"suggestions":[{"messageId":"wrapBraces","fix":{"range":[1281,1313],"text":"{setTimeout(resolve, RETRY_DELAY)}"},"desc":"Wrap the expression in `{}`."}]},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":58,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":58,"endColumn":7}],"suppressedMessages":[],"errorCount":16,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import path from 'path';\n\nconst mongoose = require('mongoose');\nconst AIChat = require('./models/AIChat');\nconst logger = require('../src/utils/logger');\n// Use a more robust path and handle missing config for tests\nlet config;\ntry {\n  config = require(path.join(__dirname, '../config.js'));\n} catch (e) {\n  config = require(path.join(__dirname, '../config.example.js'));\n}\n\nlet isConnected = false;\n\nasync function connect() {\n  if (isConnected) return;\n\n  const MAX_RETRIES = 3;\n  const RETRY_DELAY = 5000;\n\n  for (let attempt = 1; attempt <= MAX_RETRIES; attempt++) {\n    try {\n      await mongoose.connect(config.database.mongoUri, {\n        useNewUrlParser: true,\n        useUnifiedTopology: true,\n        serverSelectionTimeoutMS: 5000,\n        socketTimeoutMS: 45000,\n      });\n      isConnected = true;\n      logger.info('Successfully connected to AI Chat MongoDB', { attempt });\n      return;\n    } catch (error) {\n      logger.error('Error connecting to AI Chat MongoDB', {\n        attempt,\n        maxRetries: MAX_RETRIES,\n        error: error.message,\n      });\n\n      if (attempt === MAX_RETRIES) {\n        throw new Error(\n          `Failed to connect to MongoDB after ${MAX_RETRIES} attempts: ${error.message}`\n        );\n      }\n\n      await new Promise(resolve => setTimeout(resolve, RETRY_DELAY));\n    }\n  }\n}\n\n// Ensure connection is established before any operation\nconst ensureConnected = async () => {\n  if (!isConnected) {\n    await connect();\n  }\n};\n\nmodule.exports = {\n  async getChat(userId) {\n    await ensureConnected();\n    return await AIChat.findOne({ userId }).lean();\n  },\n\n  async updateChat(userId, updates) {\n    await ensureConnected();\n    // Use upsert to create the document if it doesn't exist\n    return await AIChat.updateOne({ userId }, { $set: updates }, { upsert: true });\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\database\\chat.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":7,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":7,"endColumn":7}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * @module database/chat\n * @description MÃ³dulo para gerenciar o histÃ³rico de chat dos usuÃ¡rios.\n * @param {import(\"simpl.db\").Database} db - A instÃ¢ncia do banco de dados.\n * @returns {object} - Um objeto com funÃ§Ãµes para interagir com o histÃ³rico de chat.\n */\nmodule.exports = db => {\n  // Garante que a tabela 'chat' exista\n  if (!db.has('chat')) {\n    db.create('chat', []);\n  }\n\n  /**\n   * ObtÃ©m o histÃ³rico de chat de um usuÃ¡rio.\n   * @param {string} userId - O ID do usuÃ¡rio.\n   * @returns {Array<object>} - O histÃ³rico de chat do usuÃ¡rio.\n   */\n  const getHistory = userId => {\n    const chat = db.get('chat', {\n      key: userId,\n    });\n    return chat ? chat.history : [];\n  };\n\n  /**\n   * Adiciona uma nova mensagem ao histÃ³rico de chat de um usuÃ¡rio.\n   * @param {string} userId - O ID do usuÃ¡rio.\n   * @param {object} message - A mensagem a ser adicionada.\n   */\n  const addHistory = (userId, message) => {\n    let chat = db.get('chat', {\n      key: userId,\n    });\n    if (!chat) {\n      chat = {\n        key: userId,\n        history: [],\n      };\n    }\n    chat.history.push(message);\n    db.set('chat', chat, {\n      key: userId,\n    });\n  };\n\n  /**\n   * Limpa o histÃ³rico de chat de um usuÃ¡rio.\n   * @param {string} userId - O ID do usuÃ¡rio.\n   */\n  const clearHistory = userId => {\n    db.delete('chat', {\n      key: userId,\n    });\n  };\n\n  return {\n    getHistory,\n    addHistory,\n    clearHistory,\n  };\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\database\\group.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":1,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":7}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"module.exports = db => ({\n  async get(groupId) {\n    return (await db.get(`group.${groupId}`)) || {};\n  },\n\n  async set(groupId, data) {\n    return await db.set(`group.${groupId}`, data);\n  },\n\n  async update(groupId, data) {\n    const groupData = await this.get(groupId);\n    const updatedData = { ...groupData, ...data };\n    return await this.set(groupId, updatedData);\n  },\n\n  async delete(groupId) {\n    return await db.delete(`group.${groupId}`);\n  },\n});\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\database\\models\\AIChat.js","messages":[{"ruleId":"import-x/no-extraneous-dependencies","severity":2,"message":"'mongoose' should be listed in the project's dependencies. Run 'npm i mongoose' to add it","line":1,"column":18,"nodeType":"CallExpression","messageId":"missing","endLine":1,"endColumn":37},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":18,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":25},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":40,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":40,"endColumn":7}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const mongoose = require('mongoose');\n\nconst messageSchema = new mongoose.Schema(\n  {\n    role: {\n      type: String,\n      required: true,\n      enum: ['system', 'user', 'assistant', 'tool'],\n    },\n    content: {\n      type: String,\n      required: true,\n    },\n    tool_call_id: {\n      type: String,\n    },\n    name: {\n      type: String,\n    },\n  },\n  { _id: false }\n);\n\nconst aiChatSchema = new mongoose.Schema({\n  userId: {\n    type: String,\n    required: true,\n    unique: true,\n  },\n  history: {\n    type: [messageSchema],\n    default: [],\n  },\n  summary: {\n    type: String,\n    default: '',\n  },\n});\n\nmodule.exports = mongoose.model('AIChat', aiChatSchema);\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\database\\user.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":1,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":7}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"module.exports = db => ({\n  async get(userId) {\n    return (await db.get(`user.${userId}`)) || {};\n  },\n\n  async set(userId, data) {\n    return await db.set(`user.${userId}`, data);\n  },\n\n  async update(userId, data) {\n    const userData = await this.get(userId);\n    const updatedData = { ...userData, ...data };\n    return await this.set(userId, updatedData);\n  },\n\n  async delete(userId) {\n    return await db.delete(`user.${userId}`);\n  },\n});\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\ecosystem.config.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":1,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":7},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":42,"column":12,"nodeType":"Identifier","messageId":"undef","endLine":42,"endColumn":19}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"module.exports = {\n  apps: [\n    {\n      name: 'whatsdex-admin',\n      script: 'server.js',\n      instances: 1,\n      autorestart: true,\n      watch: false,\n      max_memory_restart: '1G',\n      env: {\n        NODE_ENV: 'development',\n        ADMIN_PORT: 3001,\n      },\n      env_production: {\n        NODE_ENV: 'production',\n        ADMIN_PORT: 3001,\n        HOST: '127.0.0.1',\n      },\n      error_file: './logs/err.log',\n      out_file: './logs/out.log',\n      log_file: './logs/combined.log',\n      time: true,\n      merge_logs: true,\n      log_date_format: 'YYYY-MM-DD HH:mm:ss Z',\n\n      // Environment file\n      env_file: './.env.production',\n\n      // Restart delay\n      restart_delay: 4000,\n\n      // Max restarts\n      max_restarts: 5,\n      min_uptime: '10s',\n\n      // Graceful shutdown\n      kill_timeout: 5000,\n      wait_ready: true,\n      listen_timeout: 10000,\n\n      // Working directory\n      cwd: process.cwd(),\n\n      // Node arguments for production\n      node_args: '--max-old-space-size=2048',\n\n      // User (optional - set to your deployment user)\n      // user: 'whatsdex',\n      // group: 'whatsdex'\n    },\n  ],\n\n  deploy: {\n    production: {\n      user: 'node',\n      host: 'your-server-ip',\n      ref: 'origin/master',\n      repo: 'git@github.com:yourusername/whatsdex.git',\n      path: '/var/www/whatsdex-admin',\n      'pre-deploy-local': '',\n      'post-deploy':\n        'npm install && npm run build && pm2 reload ecosystem.config.js --env production',\n      'pre-setup': '',\n    },\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\eslint.config.mjs","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\events\\handler.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":2,"column":26,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":33},{"ruleId":"no-unused-vars","severity":1,"message":"'axios' is assigned a value but never used.","line":3,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":12,"suggestions":[{"messageId":"removeVar","data":{"varName":"axios"},"fix":{"range":[107,138],"text":""},"desc":"Remove unused variable 'axios'."}]},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":3,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":3,"endColumn":22},{"ruleId":"no-unused-vars","severity":1,"message":"'analyzeMessage' is assigned a value but never used.","line":4,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":4,"endColumn":23,"suggestions":[{"messageId":"removeVar","data":{"varName":"analyzeMessage"},"fix":{"range":[139,197],"text":""},"desc":"Remove unused variable 'analyzeMessage'."}]},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":4,"column":28,"nodeType":"Identifier","messageId":"undef","endLine":4,"endColumn":35},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":5,"column":16,"nodeType":"Identifier","messageId":"undef","endLine":5,"endColumn":23},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":6,"column":12,"nodeType":"Identifier","messageId":"undef","endLine":6,"endColumn":19},{"ruleId":"no-unused-vars","severity":1,"message":"'cmd' is assigned a value but never used.","line":14,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":14,"endColumn":17,"suggestions":[{"messageId":"removeVar","data":{"varName":"cmd"},"fix":{"range":[450,470],"text":""},"desc":"Remove unused variable 'cmd'."}]},{"ruleId":"no-undef","severity":2,"message":"'context' is not defined.","line":15,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":15,"endColumn":14},{"ruleId":"no-restricted-syntax","severity":2,"message":"iterators/generators require regenerator-runtime, which is too heavyweight for this guide to allow them. Separately, loops should be avoided in favor of array iterations.","line":28,"column":3,"nodeType":"ForOfStatement","messageId":"restrictedSyntax","endLine":81,"endColumn":4},{"ruleId":"no-await-in-loop","severity":2,"message":"Unexpected `await` inside a loop.","line":32,"column":22,"nodeType":"AwaitExpression","messageId":"unexpectedAwait","endLine":32,"endColumn":60},{"ruleId":"no-nested-ternary","severity":2,"message":"Do not nest ternary expressions.","line":33,"column":18,"nodeType":"ConditionalExpression","messageId":"noNestedTernary","endLine":40,"endColumn":51},{"ruleId":"no-await-in-loop","severity":2,"message":"Unexpected `await` inside a loop.","line":41,"column":31,"nodeType":"AwaitExpression","messageId":"unexpectedAwait","endLine":43,"endColumn":94},{"ruleId":"no-await-in-loop","severity":2,"message":"Unexpected `await` inside a loop.","line":45,"column":5,"nodeType":"AwaitExpression","messageId":"unexpectedAwait","endLine":68,"endColumn":6},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":58,"column":23,"nodeType":"Identifier","messageId":"undef","endLine":58,"endColumn":30},{"ruleId":"no-undef","severity":2,"message":"'tools' is not defined.","line":66,"column":17,"nodeType":"Identifier","messageId":"undef","endLine":66,"endColumn":22},{"ruleId":"no-await-in-loop","severity":2,"message":"Unexpected `await` inside a loop.","line":71,"column":7,"nodeType":"AwaitExpression","messageId":"unexpectedAwait","endLine":80,"endColumn":8},{"ruleId":"no-undef","severity":2,"message":"'tools' is not defined.","line":78,"column":19,"nodeType":"Identifier","messageId":"undef","endLine":78,"endColumn":24},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":85,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":85,"endColumn":7},{"ruleId":"no-unused-vars","severity":1,"message":"'cmd' is assigned a value but never used.","line":91,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":91,"endColumn":17,"suggestions":[{"messageId":"removeVar","data":{"varName":"cmd"},"fix":{"range":[2842,2846],"text":""},"desc":"Remove unused variable 'cmd'."}]},{"ruleId":"no-shadow","severity":2,"message":"'config' is already declared in the upper scope on line 87 column 5.","line":131,"column":7,"nodeType":"Identifier","messageId":"noShadow","endLine":131,"endColumn":13},{"ruleId":"no-shadow","severity":2,"message":"'consolefy' is already declared in the upper scope on line 88 column 5.","line":133,"column":7,"nodeType":"Identifier","messageId":"noShadow","endLine":133,"endColumn":16},{"ruleId":"no-unused-vars","severity":1,"message":"'formatter' is assigned a value but never used.","line":134,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":134,"endColumn":16,"suggestions":[{"messageId":"removeVar","data":{"varName":"formatter"},"fix":{"range":[4275,4292],"text":""},"desc":"Remove unused variable 'formatter'."}]},{"ruleId":"no-shadow","severity":2,"message":"'formatter' is already declared in the upper scope on line 90 column 5.","line":134,"column":7,"nodeType":"Identifier","messageId":"noShadow","endLine":134,"endColumn":16},{"ruleId":"no-shadow","severity":2,"message":"'cmd' is already declared in the upper scope on line 91 column 14.","line":135,"column":16,"nodeType":"Identifier","messageId":"noShadow","endLine":135,"endColumn":19},{"ruleId":"no-shadow","severity":2,"message":"'msg' is already declared in the upper scope on line 91 column 19.","line":135,"column":21,"nodeType":"Identifier","messageId":"noShadow","endLine":135,"endColumn":24},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":144,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":144,"endColumn":14},{"ruleId":"import-x/extensions","severity":2,"message":"Unexpected use of file extension \"js\" for \"../middleware/botMode.js\"","line":144,"column":15,"nodeType":"Literal","messageId":"unexpected","endLine":144,"endColumn":41,"suggestions":[{"fix":{"range":[4575,4601],"text":"'../middleware/botMode'"},"messageId":"removeUnexpected","data":{"extension":"js","importPath":"../middleware/botMode.js","fixedImportPath":"../middleware/botMode"},"desc":"Remove unexpected \"js\" file extension from \"../middleware/botMode.js\" into \"../middleware/botMode\""}]},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":145,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":145,"endColumn":14},{"ruleId":"import-x/extensions","severity":2,"message":"Unexpected use of file extension \"js\" for \"../middleware/groupMute.js\"","line":145,"column":15,"nodeType":"Literal","messageId":"unexpected","endLine":145,"endColumn":43,"suggestions":[{"fix":{"range":[4618,4646],"text":"'../middleware/groupMute'"},"messageId":"removeUnexpected","data":{"extension":"js","importPath":"../middleware/groupMute.js","fixedImportPath":"../middleware/groupMute"},"desc":"Remove unexpected \"js\" file extension from \"../middleware/groupMute.js\" into \"../middleware/groupMute\""}]},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":146,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":146,"endColumn":14},{"ruleId":"import-x/extensions","severity":2,"message":"Unexpected use of file extension \"js\" for \"../middleware/nightMode.js\"","line":146,"column":15,"nodeType":"Literal","messageId":"unexpected","endLine":146,"endColumn":43,"suggestions":[{"fix":{"range":[4663,4691],"text":"'../middleware/nightMode'"},"messageId":"removeUnexpected","data":{"extension":"js","importPath":"../middleware/nightMode.js","fixedImportPath":"../middleware/nightMode"},"desc":"Remove unexpected \"js\" file extension from \"../middleware/nightMode.js\" into \"../middleware/nightMode\""}]},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":147,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":147,"endColumn":14},{"ruleId":"import-x/extensions","severity":2,"message":"Unexpected use of file extension \"js\" for \"../middleware/maliciousMessage.js\"","line":147,"column":15,"nodeType":"Literal","messageId":"unexpected","endLine":147,"endColumn":50,"suggestions":[{"fix":{"range":[4708,4743],"text":"'../middleware/maliciousMessage'"},"messageId":"removeUnexpected","data":{"extension":"js","importPath":"../middleware/maliciousMessage.js","fixedImportPath":"../middleware/maliciousMessage"},"desc":"Remove unexpected \"js\" file extension from \"../middleware/maliciousMessage.js\" into \"../middleware/maliciousMessage\""}]},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":148,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":148,"endColumn":14},{"ruleId":"import-x/extensions","severity":2,"message":"Unexpected use of file extension \"js\" for \"../middleware/didYouMean.js\"","line":148,"column":15,"nodeType":"Literal","messageId":"unexpected","endLine":148,"endColumn":44,"suggestions":[{"fix":{"range":[4760,4789],"text":"'../middleware/didYouMean'"},"messageId":"removeUnexpected","data":{"extension":"js","importPath":"../middleware/didYouMean.js","fixedImportPath":"../middleware/didYouMean"},"desc":"Remove unexpected \"js\" file extension from \"../middleware/didYouMean.js\" into \"../middleware/didYouMean\""}]},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":149,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":149,"endColumn":14},{"ruleId":"import-x/extensions","severity":2,"message":"Unexpected use of file extension \"js\" for \"../middleware/afk.js\"","line":149,"column":15,"nodeType":"Literal","messageId":"unexpected","endLine":149,"endColumn":37,"suggestions":[{"fix":{"range":[4806,4828],"text":"'../middleware/afk'"},"messageId":"removeUnexpected","data":{"extension":"js","importPath":"../middleware/afk.js","fixedImportPath":"../middleware/afk"},"desc":"Remove unexpected \"js\" file extension from \"../middleware/afk.js\" into \"../middleware/afk\""}]},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":150,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":150,"endColumn":14},{"ruleId":"import-x/extensions","severity":2,"message":"Unexpected use of file extension \"js\" for \"../middleware/antiMedia.js\"","line":150,"column":15,"nodeType":"Literal","messageId":"unexpected","endLine":150,"endColumn":43,"suggestions":[{"fix":{"range":[4845,4873],"text":"'../middleware/antiMedia'"},"messageId":"removeUnexpected","data":{"extension":"js","importPath":"../middleware/antiMedia.js","fixedImportPath":"../middleware/antiMedia"},"desc":"Remove unexpected \"js\" file extension from \"../middleware/antiMedia.js\" into \"../middleware/antiMedia\""}]},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":151,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":151,"endColumn":14},{"ruleId":"import-x/extensions","severity":2,"message":"Unexpected use of file extension \"js\" for \"../middleware/antiLink.js\"","line":151,"column":15,"nodeType":"Literal","messageId":"unexpected","endLine":151,"endColumn":42,"suggestions":[{"fix":{"range":[4890,4917],"text":"'../middleware/antiLink'"},"messageId":"removeUnexpected","data":{"extension":"js","importPath":"../middleware/antiLink.js","fixedImportPath":"../middleware/antiLink"},"desc":"Remove unexpected \"js\" file extension from \"../middleware/antiLink.js\" into \"../middleware/antiLink\""}]},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":152,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":152,"endColumn":14},{"ruleId":"import-x/extensions","severity":2,"message":"Unexpected use of file extension \"js\" for \"../middleware/antiNsfw.js\"","line":152,"column":15,"nodeType":"Literal","messageId":"unexpected","endLine":152,"endColumn":42,"suggestions":[{"fix":{"range":[4934,4961],"text":"'../middleware/antiNsfw'"},"messageId":"removeUnexpected","data":{"extension":"js","importPath":"../middleware/antiNsfw.js","fixedImportPath":"../middleware/antiNsfw"},"desc":"Remove unexpected \"js\" file extension from \"../middleware/antiNsfw.js\" into \"../middleware/antiNsfw\""}]},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":153,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":153,"endColumn":14},{"ruleId":"import-x/extensions","severity":2,"message":"Unexpected use of file extension \"js\" for \"../middleware/antiSpam.js\"","line":153,"column":15,"nodeType":"Literal","messageId":"unexpected","endLine":153,"endColumn":42,"suggestions":[{"fix":{"range":[4978,5005],"text":"'../middleware/antiSpam'"},"messageId":"removeUnexpected","data":{"extension":"js","importPath":"../middleware/antiSpam.js","fixedImportPath":"../middleware/antiSpam"},"desc":"Remove unexpected \"js\" file extension from \"../middleware/antiSpam.js\" into \"../middleware/antiSpam\""}]},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":154,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":154,"endColumn":14},{"ruleId":"import-x/extensions","severity":2,"message":"Unexpected use of file extension \"js\" for \"../middleware/antiTagsw.js\"","line":154,"column":15,"nodeType":"Literal","messageId":"unexpected","endLine":154,"endColumn":43,"suggestions":[{"fix":{"range":[5022,5050],"text":"'../middleware/antiTagsw'"},"messageId":"removeUnexpected","data":{"extension":"js","importPath":"../middleware/antiTagsw.js","fixedImportPath":"../middleware/antiTagsw"},"desc":"Remove unexpected \"js\" file extension from \"../middleware/antiTagsw.js\" into \"../middleware/antiTagsw\""}]},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":155,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":155,"endColumn":14},{"ruleId":"import-x/extensions","severity":2,"message":"Unexpected use of file extension \"js\" for \"../middleware/antiToxic.js\"","line":155,"column":15,"nodeType":"Literal","messageId":"unexpected","endLine":155,"endColumn":43,"suggestions":[{"fix":{"range":[5067,5095],"text":"'../middleware/antiToxic'"},"messageId":"removeUnexpected","data":{"extension":"js","importPath":"../middleware/antiToxic.js","fixedImportPath":"../middleware/antiToxic"},"desc":"Remove unexpected \"js\" file extension from \"../middleware/antiToxic.js\" into \"../middleware/antiToxic\""}]},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":156,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":156,"endColumn":14},{"ruleId":"import-x/extensions","severity":2,"message":"Unexpected use of file extension \"js\" for \"../middleware/menfess.js\"","line":156,"column":15,"nodeType":"Literal","messageId":"unexpected","endLine":156,"endColumn":41,"suggestions":[{"fix":{"range":[5112,5138],"text":"'../middleware/menfess'"},"messageId":"removeUnexpected","data":{"extension":"js","importPath":"../middleware/menfess.js","fixedImportPath":"../middleware/menfess"},"desc":"Remove unexpected \"js\" file extension from \"../middleware/menfess.js\" into \"../middleware/menfess\""}]},{"ruleId":"no-restricted-syntax","severity":2,"message":"iterators/generators require regenerator-runtime, which is too heavyweight for this guide to allow them. Separately, loops should be avoided in favor of array iterations.","line":159,"column":5,"nodeType":"ForOfStatement","messageId":"restrictedSyntax","endLine":162,"endColumn":6},{"ruleId":"no-await-in-loop","severity":2,"message":"Unexpected `await` inside a loop.","line":160,"column":22,"nodeType":"AwaitExpression","messageId":"unexpectedAwait","endLine":160,"endColumn":52},{"ruleId":"no-unused-vars","severity":1,"message":"'isAdmin' is assigned a value but never used.","line":173,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":173,"endColumn":18,"suggestions":[{"messageId":"removeVar","data":{"varName":"isAdmin"},"fix":{"range":[5681,5752],"text":""},"desc":"Remove unused variable 'isAdmin'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'botDb' is assigned a value but never used.","line":176,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":176,"endColumn":16,"suggestions":[{"messageId":"removeVar","data":{"varName":"botDb"},"fix":{"range":[5784,5823],"text":""},"desc":"Remove unused variable 'botDb'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'groupAutokick' is assigned a value but never used.","line":214,"column":13,"nodeType":"Identifier","messageId":"unusedVar","endLine":214,"endColumn":26,"suggestions":[{"messageId":"removeVar","data":{"varName":"groupAutokick"},"fix":{"range":[7248,7296],"text":""},"desc":"Remove unused variable 'groupAutokick'."}]},{"ruleId":"no-shadow","severity":2,"message":"'config' is already declared in the upper scope on line 87 column 5.","line":234,"column":7,"nodeType":"Identifier","messageId":"noShadow","endLine":234,"endColumn":13},{"ruleId":"no-shadow","severity":2,"message":"'consolefy' is already declared in the upper scope on line 88 column 5.","line":236,"column":7,"nodeType":"Identifier","messageId":"noShadow","endLine":236,"endColumn":16},{"ruleId":"no-shadow","severity":2,"message":"'formatter' is already declared in the upper scope on line 90 column 5.","line":237,"column":7,"nodeType":"Identifier","messageId":"noShadow","endLine":237,"endColumn":16},{"ruleId":"no-shadow","severity":2,"message":"'cmd' is already declared in the upper scope on line 91 column 14.","line":238,"column":16,"nodeType":"Identifier","messageId":"noShadow","endLine":238,"endColumn":19},{"ruleId":"no-restricted-syntax","severity":2,"message":"iterators/generators require regenerator-runtime, which is too heavyweight for this guide to allow them. Separately, loops should be avoided in favor of array iterations.","line":242,"column":5,"nodeType":"ForOfStatement","messageId":"restrictedSyntax","endLine":278,"endColumn":6},{"ruleId":"no-continue","severity":2,"message":"Unexpected use of continue statement.","line":245,"column":36,"nodeType":"ContinueStatement","messageId":"unexpected","endLine":245,"endColumn":45},{"ruleId":"no-await-in-loop","severity":2,"message":"Unexpected `await` inside a loop.","line":247,"column":7,"nodeType":"AwaitExpression","messageId":"unexpectedAwait","endLine":247,"endColumn":52},{"ruleId":"no-await-in-loop","severity":2,"message":"Unexpected `await` inside a loop.","line":248,"column":7,"nodeType":"AwaitExpression","messageId":"unexpectedAwait","endLine":248,"endColumn":73},{"ruleId":"no-await-in-loop","severity":2,"message":"Unexpected `await` inside a loop.","line":250,"column":7,"nodeType":"AwaitExpression","messageId":"unexpectedAwait","endLine":253,"endColumn":9},{"ruleId":"no-await-in-loop","severity":2,"message":"Unexpected `await` inside a loop.","line":260,"column":7,"nodeType":"AwaitExpression","messageId":"unexpectedAwait","endLine":277,"endColumn":8},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":290,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":290,"endColumn":7}],"suppressedMessages":[],"errorCount":60,"fatalErrorCount":0,"warningCount":8,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Impor modul dan dependensi yang diperlukan\nconst { VCardBuilder } = require('@whiskeysockets/baileys');\nconst axios = require('axios');\nconst { analyzeMessage } = require('guaranteed_security');\nconst moment = require('moment-timezone');\nconst fs = require('node:fs');\n\n// Fungsi untuk menangani event pengguna bergabung/keluar grup\nasync function handleWelcome(bot, m, type, isSimulate = false) {\n  const {\n    config,\n    database,\n    formatter,\n    tools: { cmd },\n  } = context;\n  const groupJid = m.id;\n  const groupId = bot.getId(m.id);\n  const groupDb = await database.group.get(groupId);\n  const botDb = await database.bot.get();\n\n  if (!isSimulate && groupDb?.mutebot) return;\n  if (!isSimulate && !groupDb?.option?.welcome) return;\n  if (!isSimulate && ['private', 'self'].includes(botDb?.mode)) return;\n  const now = moment().tz(config.system.timeZone);\n  const hour = now.hour();\n  if (!isSimulate && hour >= 0 && hour < 6) return;\n\n  for (const jid of m.participants) {\n    const isWelcome = type === 'add';\n    const userTag = `@${bot.getId(jid)}`;\n    const customText = isWelcome ? groupDb?.text?.welcome : groupDb?.text?.goodbye;\n    const metadata = await bot.core.groupMetadata(groupJid);\n    const text = customText\n      ? customText\n          .replace(/%tag%/g, userTag)\n          .replace(/%subject%/g, metadata.subject)\n          .replace(/%description%/g, metadata.description)\n      : isWelcome\n        ? formatter.quote(` Welcome ${userTag} to the group ${metadata.subject}!`)\n        : formatter.quote(` Goodbye, ${userTag}!`);\n    const profilePictureUrl = await bot.core\n      .profilePictureUrl(jid, 'image')\n      .catch(() => 'https://i.pinimg.com/736x/70/dd/61/70dd612c65034b88ebf474a52ccc70c4.jpg');\n\n    await bot.core.sendMessage(\n      groupJid,\n      {\n        text,\n        mentions: [jid],\n        contextInfo: {\n          isForwarded: true,\n          forwardedNewsletterMessageInfo: {\n            newsletterJid: config.bot.newsletterJid,\n            newsletterName: config.bot.name,\n          },\n          externalAdReply: {\n            title: config.bot.name,\n            body: `v${require('../package.json').version}`,\n            mediaType: 1,\n            thumbnailUrl: profilePictureUrl,\n            sourceUrl: config.bot.groupLink,\n          },\n        },\n      },\n      {\n        quoted: tools.cmd.fakeMetaAiQuotedText(config.msg.footer),\n      }\n    );\n\n    if (isWelcome && groupDb?.text?.intro)\n      await bot.core.sendMessage(\n        groupJid,\n        {\n          text: groupDb.text.intro,\n          mentions: [jid],\n        },\n        {\n          quoted: tools.cmd.fakeMetaAiQuotedText(\"Don't forget to fill out your intro!\"),\n        }\n      );\n  }\n}\n\n// Events utama bot\nmodule.exports = (bot, context) => {\n  const {\n    config,\n    consolefy,\n    db,\n    formatter,\n    tools: { cmd, msg },\n  } = context;\n\n  bot.ev.setMaxListeners(config.system.maxListeners); // Tetapkan max listeners untuk events\n\n  // Event saat bot siap\n  bot.ev.once('connection.update', async m => {\n    if (m.connection === 'open') {\n      const { database } = context;\n      consolefy.success(`${config.bot.name} by ${config.owner.name}, ready at ${bot.user.id}`);\n\n      // Mulai ulang bot\n      const botRestart = await database.bot.get('restart');\n      if (botRestart?.jid && botRestart?.timestamp) {\n        const timeago = msg.convertMsToDuration(Date.now() - botRestart.timestamp);\n        await bot.core.sendMessage(botRestart.jid, {\n          text: formatter.quote(`[OK] Successfully restarted! It took ${timeago}.`),\n          edit: botRestart.key,\n        });\n        await database.bot.update({ restart: null });\n      }\n\n      // Tetapkan config pada bot\n      config.bot = {\n        ...config.bot,\n        jid: bot.user.id,\n        decodedJid: bot.decodeJid(bot.user.id),\n        id: bot.getId(bot.user.id),\n        readyAt: bot.readyAt,\n        groupLink: await bot.core\n          .groupInviteCode(config.bot.groupJid)\n          .then(code => `https://chat.whatsapp.com/${code}`)\n          .catch(() => 'https://chat.whatsapp.com/FxEYZl2UyzAEI2yhaH34Ye'),\n      };\n    }\n  });\n\n  // Event saat bot menerima pesan\n  bot.ev.on('messages.upsert', async (m, ctx) => {\n    const {\n      config,\n      database,\n      consolefy,\n      formatter,\n      tools: { cmd, msg },\n    } = context;\n\n    // Tambahkan data db ke ctx\n    ctx.userDb = await database.user.get(ctx.sender.id);\n    ctx.groupDb = ctx.isGroup() ? await database.group.get(ctx.id) : {};\n\n    // Jalankan middleware\n    const messageMiddleware = [\n      require('../middleware/botMode.js'),\n      require('../middleware/groupMute.js'),\n      require('../middleware/nightMode.js'),\n      require('../middleware/maliciousMessage.js'),\n      require('../middleware/didYouMean.js'),\n      require('../middleware/afk.js'),\n      require('../middleware/antiMedia.js'),\n      require('../middleware/antiLink.js'),\n      require('../middleware/antiNsfw.js'),\n      require('../middleware/antiSpam.js'),\n      require('../middleware/antiTagsw.js'),\n      require('../middleware/antiToxic.js'),\n      require('../middleware/menfess.js'),\n    ];\n\n    for (const middleware of messageMiddleware) {\n      const result = await middleware(ctx, context);\n      if (!result) return;\n    }\n\n    // Variabel umum\n    const isGroup = ctx.isGroup();\n    const isPrivate = !isGroup;\n    const senderJid = ctx.sender.jid;\n    const senderId = ctx.getId(senderJid);\n    const groupJid = isGroup ? ctx.id : null;\n    const groupId = isGroup ? ctx.getId(groupJid) : null;\n    const isOwner = cmd.isOwner(config, senderId, m.key.id);\n    const isCmd = cmd.isCmd(config, m.content, ctx.bot);\n    const isAdmin = isGroup ? await ctx.group().isAdmin(senderJid) : false;\n\n    // Mengambil database\n    const botDb = await database.bot.get();\n    const { userDb } = ctx;\n    const { groupDb } = ctx;\n\n    // Grup atau Pribadi\n    if (isGroup || isPrivate) {\n      if (m.key.fromMe) return;\n\n      const { state } = context;\n      state.uptime = msg.convertMsToDuration(Date.now() - config.bot.readyAt);\n      state.dbSize = fs.existsSync('database.json')\n        ? msg.formatSize(fs.statSync('database.json').size / 1024)\n        : 'N/A';\n\n      // Penanganan database pengguna\n      if (!userDb?.username)\n        await database.user.update(senderId, {\n          username: `@user_${cmd.generateUID(config, senderId, false)}`,\n        });\n      if (!userDb?.uid || userDb?.uid !== cmd.generateUID(config, senderId))\n        await database.user.update(senderId, { uid: cmd.generateUID(config, senderId) });\n      if (userDb?.premium && Date.now() > userDb.premiumExpiration) {\n        const { premium, premiumExpiration, ...rest } = userDb;\n        await database.user.set(senderId, rest);\n      }\n      if (isOwner || userDb?.premium) await database.user.update(senderId, { coin: 0 });\n      if (!userDb?.coin || !Number.isFinite(userDb.coin))\n        await database.user.update(senderId, { coin: 500 });\n    }\n\n    // Penanganan obrolan grup\n    if (isGroup) {\n      if (m.key.fromMe) return;\n\n      if (!isCmd || isCmd?.didyoumean)\n        consolefy.info(`Incoming message from group: ${groupId}, by: ${senderId}`); // Log pesan masuk\n\n      // Variabel umum\n      const groupAutokick = groupDb?.option?.autokick;\n\n      // Penanganan database grup\n      if (groupDb?.sewa && Date.now() > userDb?.sewaExpiration) {\n        await db.delete(`group.${groupId}.sewa`);\n        await db.delete(`group.${groupId}.sewaExpiration`);\n      }\n    }\n\n    // Penanganan obrolan pribadi\n    if (isPrivate) {\n      if (m.key.fromMe) return;\n\n      if (!isCmd || isCmd?.didyoumean) consolefy.info(`Incoming message from: ${senderId}`); // Log pesan masuk\n    }\n  });\n\n  // Event saat bot menerima panggilan\n  bot.ev.on('call', async calls => {\n    const {\n      config,\n      database,\n      consolefy,\n      formatter,\n      tools: { cmd },\n    } = context;\n    if (!config.system.antiCall) return;\n\n    for (const call of calls) {\n      consolefy.info(`Incoming call from: ${bot.getId(call.from)}`); // Log panggilan masuk\n\n      if (call.status !== 'offer') continue;\n\n      await bot.core.rejectCall(call.id, call.from);\n      await database.user.update(bot.getId(call.from), { banned: true });\n\n      await bot.core.sendMessage(`${config.owner.id}@s.whatsapp.net`, {\n        text: ` Account @${bot.getId(call.from)} has been automatically blocked for the reason ${formatter.inlineCode('Anti Call')}.`,\n        mentions: [call.from],\n      });\n\n      const vcard = new VCardBuilder()\n        .setFullName(config.owner.name)\n        .setOrg(config.owner.organization)\n        .setNumber(config.owner.id)\n        .build();\n      await bot.core.sendMessage(\n        call.from,\n        {\n          contacts: {\n            displayName: config.owner.name,\n            contacts: [\n              {\n                vcard,\n              },\n            ],\n          },\n        },\n        {\n          quoted: cmd.fakeMetaAiQuotedText(\n            `The bot cannot receive ${call.isVideo ? 'video' : 'voice'} calls! If you need help, please contact the Owner.`\n          ),\n        }\n      );\n    }\n  });\n\n  // Event saat pengguna bergabung atau keluar dari grup\n  bot.ev.on('group-participants.update', async m => {\n    if (m.action === 'add') {\n      handleWelcome(bot, m, 'add');\n    } else if (m.action === 'remove') {\n      handleWelcome(bot, m, 'remove');\n    }\n  });\n};\nmodule.exports.handleWelcome = handleWelcome; // Penanganan event pengguna bergabung/keluar grup\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\healthcheck.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":14,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":21},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":6,"column":9,"nodeType":"Identifier","messageId":"undef","endLine":6,"endColumn":16},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":14,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":14,"endColumn":16,"suggestions":[{"fix":{"range":[285,320],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":15,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":15,"endColumn":12},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":17,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":17,"endColumn":16,"suggestions":[{"fix":{"range":[357,423],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":18,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":18,"endColumn":12},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":23,"column":3,"nodeType":"MemberExpression","messageId":"unexpected","endLine":23,"endColumn":14,"suggestions":[{"fix":{"range":[481,543],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":24,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":24,"endColumn":10},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":28,"column":3,"nodeType":"MemberExpression","messageId":"unexpected","endLine":28,"endColumn":14,"suggestions":[{"fix":{"range":[596,634],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":30,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":30,"endColumn":10}],"suppressedMessages":[],"errorCount":6,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const http = require('http');\n\n// Simple health check script for Docker\nconst options = {\n  hostname: 'localhost',\n  port: process.env.PORT || 3000,\n  path: '/health',\n  method: 'GET',\n  timeout: 5000,\n};\n\nconst req = http.request(options, res => {\n  if (res.statusCode === 200) {\n    console.log('Health check passed');\n    process.exit(0);\n  } else {\n    console.log(`Health check failed with status: ${res.statusCode}`);\n    process.exit(1);\n  }\n});\n\nreq.on('error', err => {\n  console.log(`Health check failed with error: ${err.message}`);\n  process.exit(1);\n});\n\nreq.on('timeout', () => {\n  console.log('Health check timed out');\n  req.destroy();\n  process.exit(1);\n});\n\nreq.end();\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\index.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":2,"column":16,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":23},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":3,"column":14,"nodeType":"Identifier","messageId":"undef","endLine":3,"endColumn":21},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":4,"column":17,"nodeType":"Identifier","messageId":"undef","endLine":4,"endColumn":24},{"ruleId":"import-x/extensions","severity":2,"message":"Unexpected use of file extension \"js\" for \"./context.js\"","line":4,"column":25,"nodeType":"Literal","messageId":"unexpected","endLine":4,"endColumn":39,"suggestions":[{"fix":{"range":[139,153],"text":"'./context'"},"messageId":"removeUnexpected","data":{"extension":"js","importPath":"./context.js","fixedImportPath":"./context"},"desc":"Remove unexpected \"js\" file extension from \"./context.js\" into \"./context\""}]},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":5,"column":14,"nodeType":"Identifier","messageId":"undef","endLine":5,"endColumn":21},{"ruleId":"import-x/extensions","severity":2,"message":"Unexpected use of file extension \"js\" for \"./main.js\"","line":5,"column":22,"nodeType":"Literal","messageId":"unexpected","endLine":5,"endColumn":33,"suggestions":[{"fix":{"range":[177,188],"text":"'./main'"},"messageId":"removeUnexpected","data":{"extension":"js","importPath":"./main.js","fixedImportPath":"./main"},"desc":"Remove unexpected \"js\" file extension from \"./main.js\" into \"./main\""}]},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":9,"column":8,"nodeType":"Identifier","messageId":"undef","endLine":9,"endColumn":15},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":12,"column":1,"nodeType":"MemberExpression","messageId":"unexpected","endLine":12,"endColumn":12,"suggestions":[{"fix":{"range":[282,321],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":26,"column":24,"nodeType":"Identifier","messageId":"undef","endLine":26,"endColumn":31},{"ruleId":"import-x/extensions","severity":2,"message":"Unexpected use of file extension \"js\" for \"./server.js\"","line":26,"column":32,"nodeType":"Literal","messageId":"unexpected","endLine":26,"endColumn":45,"suggestions":[{"fix":{"range":[628,641],"text":"'./server'"},"messageId":"removeUnexpected","data":{"extension":"js","importPath":"./server.js","fixedImportPath":"./server"},"desc":"Remove unexpected \"js\" file extension from \"./server.js\" into \"./server\""}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":33,"column":29,"nodeType":"MemberExpression","messageId":"unexpected","endLine":33,"endColumn":40},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":40,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":40,"endColumn":18,"suggestions":[{"fix":{"range":[1082,1131],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":41,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":41,"endColumn":12}],"suppressedMessages":[],"errorCount":10,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Impor modul dan dependensi yang diperlukan\nconst CFonts = require('cfonts');\nconst http = require('node:http');\nconst context = require('./context.js');\nconst main = require('./main.js');\n\nconst { config, pkg } = {\n  config: context.config,\n  pkg: require('./package.json'),\n};\n\nconsole.log('ðŸš€ Starting WhatsDeX...'); // Logging initial process\n\n// Tampilkan nama proyek serta deskripsi lain\nCFonts.say(pkg.name, {\n  colors: ['#00A1E0', '#00FFFF'],\n  align: 'center',\n});\n\nCFonts.say(`${pkg.description} - By ${pkg.author}`, {\n  font: 'console',\n  colors: ['#E0F7FF'],\n  align: 'center',\n});\n\nconst { initSocket } = require('./server.js');\n\n// Jalankan server jika diaktifkan dalam konfigurasi\nif (config.system.useServer) {\n  const { port } = config.system;\n  const server = http.createServer((_, res) => res.end(`${pkg.name} is running on port ${port}`));\n  initSocket(server);\n  server.listen(port, () => console.log(`âœ… ${pkg.name} runs on port ${port}`));\n}\n\n(async () => {\n  try {\n    await main(context); // Jalankan modul utama dengan async/await\n  } catch (error) {\n    console.error(`âŒ Fatal Error: ${error.message}`);\n    process.exit(1);\n  }\n})();\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\install-adapter.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":2,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":8},{"ruleId":"import-x/extensions","severity":2,"message":"Unexpected use of file extension \"js\" for \"./config.js\"","line":2,"column":9,"nodeType":"Literal","messageId":"unexpected","endLine":2,"endColumn":22,"suggestions":[{"fix":{"range":[54,67],"text":"'./config'"},"messageId":"removeUnexpected","data":{"extension":"js","importPath":"./config.js","fixedImportPath":"./config"},"desc":"Remove unexpected \"js\" file extension from \"./config.js\" into \"./config\""}]},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":3,"column":23,"nodeType":"Identifier","messageId":"undef","endLine":3,"endColumn":30},{"ruleId":"import-x/no-unresolved","severity":2,"message":"Unable to resolve path to module '@mengkodingan/consolefy'.","line":3,"column":31,"nodeType":"Literal","messageId":"unresolved","endLine":3,"endColumn":56},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":4,"column":22,"nodeType":"Identifier","messageId":"undef","endLine":4,"endColumn":29},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":5,"column":13,"nodeType":"Identifier","messageId":"undef","endLine":5,"endColumn":20},{"ruleId":"no-undef","severity":2,"message":"'config' is not defined.","line":13,"column":21,"nodeType":"Identifier","messageId":"undef","endLine":13,"endColumn":27}],"suppressedMessages":[],"errorCount":7,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Impor modul dan dependensi yang diperlukan\nrequire('./config.js');\nconst { Consolefy } = require('@mengkodingan/consolefy');\nconst { execSync } = require('node:child_process');\nconst pkg = require('./package.json');\n\n// Buat consolefy\nconst consolefy = new Consolefy({\n  tag: pkg.name,\n});\n\n// Mendapatkan adapter autentikasi dari konfigurasi\nconst { adapter } = config.bot.authAdapter;\n\n// Daftar modul untuk setiap adapter autentikasi\nconst modules = {\n  mysql: 'baileys-mysql',\n  mongodb: 'baileys-mongodb',\n  firebase: 'baileys-firebase',\n};\n\n// Pasang modul jika adapter ditemukan dalam daftar\nif (modules[adapter]) {\n  consolefy.log(`Installing ${adapter} module...`);\n  execSync(`npm install ${modules[adapter]} --no-save`, {\n    stdio: 'inherit',\n  });\n} else {\n  consolefy.log('No database module required or adapter is not set.');\n}\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\jest.config.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":2,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":7}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/** @type {import('jest').Config} */\nmodule.exports = {\n  testEnvironment: 'node',\n  transformIgnorePatterns: ['/node_modules/(?!(playwright)/)'],\n  collectCoverageFrom: [\n    'commands/**/*.js',\n    'middleware/**/*.js',\n    'src/**/*.js',\n    'context.js',\n    'index.js',\n    '!src/**/*.test.js',\n    '!src/**/*.spec.js',\n    '!**/*.config.js',\n    '!**/node_modules/**',\n    '!**/coverage/**',\n  ],\n  coverageDirectory: 'coverage',\n  coverageReporters: ['text', 'lcov', 'html'],\n  coverageThreshold: {\n    global: {\n      branches: 80,\n      functions: 80,\n      lines: 80,\n      statements: 80,\n    },\n  },\n  testMatch: ['**/__tests__/**/*.test.js', '**/?(*.)+(spec|test).js'],\n  testPathIgnorePatterns: [\n    '/node_modules/',\n    '/tests/e2e/', // Exclude e2e tests\n  ],\n  setupFilesAfterEnv: ['<rootDir>/tests/setup.js'],\n  testTimeout: 10000,\n  verbose: true,\n  forceExit: true,\n  detectOpenHandles: true,\n  maxWorkers: '50%',\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\lib\\exif.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":1,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":7},{"ruleId":"no-unused-vars","severity":1,"message":"'options' is defined but never used. Allowed unused args must match /^_/u.","line":2,"column":34,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":41,"suggestions":[{"messageId":"removeVar","data":{"varName":"options"},"fix":{"range":[50,59],"text":""},"desc":"Remove unused variable 'options'."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"module.exports = {\n  writeExif: async (mediaBuffer, options) =>\n    // Placeholder for EXIF writing logic\n    // For now, just return the mediaBuffer\n    mediaBuffer,\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\lib\\guaranteed_security.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":1,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":7},{"ruleId":"no-unused-vars","severity":1,"message":"'message' is defined but never used. Allowed unused args must match /^_/u.","line":2,"column":19,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":26,"suggestions":[{"messageId":"removeVar","data":{"varName":"message"},"fix":{"range":[37,44],"text":"()"},"desc":"Remove unused variable 'message'."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"module.exports = {\n  analyzeMessage: message =>\n    // Placeholder for security analysis logic\n    ({ isSafe: true, reason: 'Placeholder analysis' }),\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\lib\\magic-ui\\terminal.jsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'AnimatePresence' is defined but never used.","line":3,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":25,"suggestions":[{"messageId":"removeVar","data":{"varName":"AnimatePresence"},"fix":{"range":[26,42],"text":""},"desc":"Remove unused variable 'AnimatePresence'."}]},{"ruleId":"import-x/no-unresolved","severity":2,"message":"Unable to resolve path to module 'motion/react'.","line":3,"column":52,"nodeType":"Literal","messageId":"unresolved","endLine":3,"endColumn":66},{"ruleId":"import-x/extensions","severity":2,"message":"Missing file extension for \"@/lib/utils\"","line":12,"column":20,"nodeType":"Literal","messageId":"missing","endLine":12,"endColumn":33},{"ruleId":"import-x/no-unresolved","severity":2,"message":"Unable to resolve path to module '@/lib/utils'.","line":12,"column":20,"nodeType":"Literal","messageId":"unresolved","endLine":12,"endColumn":33},{"ruleId":"no-unused-vars","severity":1,"message":"'SequenceContextValue' is defined but never used.","line":14,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":14,"endColumn":31,"suggestions":[{"messageId":"removeVar","data":{"varName":"SequenceContextValue"},"fix":{"range":[243,263],"text":""},"desc":"Remove unused variable 'SequenceContextValue'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'index' is defined but never used. Allowed unused args must match /^_/u.","line":15,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":15,"endColumn":31,"suggestions":[{"messageId":"removeVar","data":{"varName":"index"},"fix":{"range":[284,297],"text":""},"desc":"Remove unused variable 'index'."}]},{"ruleId":"prettier/prettier","severity":2,"message":"Parsing error: Unexpected token, expected \",\"","line":15,"column":24,"nodeType":null},{"ruleId":"no-bitwise","severity":2,"message":"Unexpected use of '|'.","line":20,"column":25,"nodeType":"BinaryExpression","messageId":"unexpected","endLine":20,"endColumn":73},{"ruleId":"no-undef","severity":2,"message":"'SequenceContextValue' is not defined.","line":20,"column":39,"nodeType":"Identifier","messageId":"undef","endLine":20,"endColumn":59},{"ruleId":"no-self-compare","severity":2,"message":"Comparing to itself is potentially pointless.","line":20,"column":62,"nodeType":"BinaryExpression","messageId":"comparingToSelf","endLine":20,"endColumn":73},{"ruleId":"no-bitwise","severity":2,"message":"Unexpected use of '|'.","line":24,"column":26,"nodeType":"BinaryExpression","messageId":"unexpected","endLine":24,"endColumn":60},{"ruleId":"no-undef","severity":2,"message":"'number' is not defined.","line":24,"column":40,"nodeType":"Identifier","messageId":"undef","endLine":24,"endColumn":46},{"ruleId":"no-self-compare","severity":2,"message":"Comparing to itself is potentially pointless.","line":24,"column":49,"nodeType":"BinaryExpression","messageId":"comparingToSelf","endLine":24,"endColumn":60},{"ruleId":"no-undef","severity":2,"message":"'MotionProps' is not defined.","line":27,"column":37,"nodeType":"Identifier","messageId":"undef","endLine":27,"endColumn":48},{"ruleId":"no-undef","severity":2,"message":"'React' is not defined.","line":28,"column":13,"nodeType":"Identifier","messageId":"undef","endLine":28,"endColumn":18},{"ruleId":"react/require-default-props","severity":2,"message":"propType \"delay\" is not required, but has no corresponding defaultProps declaration.","line":29,"column":3,"nodeType":"TSPropertySignature","messageId":"shouldHaveDefault","endLine":29,"endColumn":18},{"ruleId":"react/require-default-props","severity":2,"message":"propType \"className\" is not required, but has no corresponding defaultProps declaration.","line":30,"column":3,"nodeType":"TSPropertySignature","messageId":"shouldHaveDefault","endLine":30,"endColumn":22},{"ruleId":"react/require-default-props","severity":2,"message":"propType \"startOnView\" is not required, but has no corresponding defaultProps declaration.","line":31,"column":3,"nodeType":"TSPropertySignature","messageId":"shouldHaveDefault","endLine":31,"endColumn":25},{"ruleId":"no-bitwise","severity":2,"message":"Unexpected use of '|'.","line":41,"column":22,"nodeType":"BinaryExpression","messageId":"unexpected","endLine":41,"endColumn":57},{"ruleId":"no-self-compare","severity":2,"message":"Comparing to itself is potentially pointless.","line":41,"column":46,"nodeType":"BinaryExpression","messageId":"comparingToSelf","endLine":41,"endColumn":57},{"ruleId":"no-undef","severity":2,"message":"'React' is not defined.","line":42,"column":44,"nodeType":"Identifier","messageId":"undef","endLine":42,"endColumn":49},{"ruleId":"react-hooks/exhaustive-deps","severity":2,"message":"React Hook useEffect has a missing dependency: 'sequence'. Either include it or remove the dependency array.","line":57,"column":6,"nodeType":"ArrayExpression","endLine":57,"endColumn":79,"suggestions":[{"desc":"Update the dependencies array to be: [sequence.activeIndex, sequence.sequenceStarted, hasStarted, itemIndex, sequence]","fix":{"range":[1446,1519],"text":"[sequence.activeIndex, sequence.sequenceStarted, hasStarted, itemIndex, sequence]"}}]},{"ruleId":"no-nested-ternary","severity":2,"message":"Do not nest ternary expressions.","line":59,"column":25,"nodeType":"ConditionalExpression","messageId":"noNestedTernary","endLine":59,"endColumn":78},{"ruleId":"no-undef","severity":2,"message":"'MotionProps' is not defined.","line":80,"column":40,"nodeType":"Identifier","messageId":"undef","endLine":80,"endColumn":51},{"ruleId":"react/require-default-props","severity":2,"message":"propType \"className\" is not required, but has no corresponding defaultProps declaration.","line":82,"column":3,"nodeType":"TSPropertySignature","messageId":"shouldHaveDefault","endLine":82,"endColumn":22},{"ruleId":"react/require-default-props","severity":2,"message":"propType \"duration\" is not required, but has no corresponding defaultProps declaration.","line":83,"column":3,"nodeType":"TSPropertySignature","messageId":"shouldHaveDefault","endLine":83,"endColumn":21},{"ruleId":"react/require-default-props","severity":2,"message":"propType \"delay\" is not required, but has no corresponding defaultProps declaration.","line":84,"column":3,"nodeType":"TSPropertySignature","messageId":"shouldHaveDefault","endLine":84,"endColumn":18},{"ruleId":"react/require-default-props","severity":2,"message":"propType \"as\" is not required, but has no corresponding defaultProps declaration.","line":85,"column":3,"nodeType":"TSPropertySignature","messageId":"shouldHaveDefault","endLine":85,"endColumn":26},{"ruleId":"no-undef","severity":2,"message":"'React' is not defined.","line":85,"column":8,"nodeType":"Identifier","messageId":"undef","endLine":85,"endColumn":13},{"ruleId":"react/require-default-props","severity":2,"message":"propType \"startOnView\" is not required, but has no corresponding defaultProps declaration.","line":86,"column":3,"nodeType":"TSPropertySignature","messageId":"shouldHaveDefault","endLine":86,"endColumn":25},{"ruleId":"no-undef","severity":2,"message":"'useMemo' is not defined.","line":102,"column":27,"nodeType":"Identifier","messageId":"undef","endLine":102,"endColumn":34},{"ruleId":"no-undef","severity":2,"message":"'string' is not defined.","line":110,"column":54,"nodeType":"Identifier","messageId":"undef","endLine":110,"endColumn":60},{"ruleId":"no-bitwise","severity":2,"message":"Unexpected use of '|'.","line":112,"column":22,"nodeType":"BinaryExpression","messageId":"unexpected","endLine":112,"endColumn":54},{"ruleId":"no-self-compare","severity":2,"message":"Comparing to itself is potentially pointless.","line":112,"column":43,"nodeType":"BinaryExpression","messageId":"comparingToSelf","endLine":112,"endColumn":54},{"ruleId":"no-undef","severity":2,"message":"'React' is not defined.","line":113,"column":44,"nodeType":"Identifier","messageId":"undef","endLine":113,"endColumn":49},{"ruleId":"consistent-return","severity":2,"message":"Arrow function expected no return value.","line":133,"column":7,"nodeType":"ReturnStatement","messageId":"unexpectedReturnValue","endLine":133,"endColumn":47},{"ruleId":"consistent-return","severity":2,"message":"Arrow function expected no return value.","line":139,"column":5,"nodeType":"ReturnStatement","messageId":"unexpectedReturnValue","endLine":139,"endColumn":45},{"ruleId":"react-hooks/exhaustive-deps","severity":2,"message":"React Hook useEffect has a missing dependency: 'sequence'. Either include it or remove the dependency array.","line":140,"column":6,"nodeType":"ArrayExpression","endLine":148,"endColumn":4,"suggestions":[{"desc":"Update the dependencies array to be: [delay, startOnView, isInView, started, sequence.activeIndex, sequence.sequenceStarted, itemIndex, sequence]","fix":{"range":[3734,3875],"text":"[delay, startOnView, isInView, started, sequence.activeIndex, sequence.sequenceStarted, itemIndex, sequence]"}}]},{"ruleId":"no-plusplus","severity":2,"message":"Unary operator '++' used.","line":157,"column":9,"nodeType":"UpdateExpression","messageId":"unexpectedUnaryOp","endLine":157,"endColumn":12},{"ruleId":"consistent-return","severity":2,"message":"Arrow function expected no return value.","line":166,"column":5,"nodeType":"ReturnStatement","messageId":"unexpectedReturnValue","endLine":168,"endColumn":7},{"ruleId":"react-hooks/exhaustive-deps","severity":2,"message":"React Hook useEffect has missing dependencies: 'itemIndex', 'sequence', and 'setDisplayedText'. Either include them or remove the dependency array.","line":169,"column":6,"nodeType":"ArrayExpression","endLine":169,"endColumn":35,"suggestions":[{"desc":"Update the dependencies array to be: [children, duration, itemIndex, sequence, setDisplayedText, started]","fix":{"range":[4354,4383],"text":"[children, duration, itemIndex, sequence, setDisplayedText, started]"}}]},{"ruleId":"no-undef","severity":2,"message":"'React' is not defined.","line":183,"column":13,"nodeType":"Identifier","messageId":"undef","endLine":183,"endColumn":18},{"ruleId":"react/require-default-props","severity":2,"message":"propType \"className\" is not required, but has no corresponding defaultProps declaration.","line":184,"column":3,"nodeType":"TSPropertySignature","messageId":"shouldHaveDefault","endLine":184,"endColumn":22},{"ruleId":"react/require-default-props","severity":2,"message":"propType \"sequence\" is not required, but has no corresponding defaultProps declaration.","line":185,"column":3,"nodeType":"TSPropertySignature","messageId":"shouldHaveDefault","endLine":185,"endColumn":22},{"ruleId":"react/require-default-props","severity":2,"message":"propType \"startOnView\" is not required, but has no corresponding defaultProps declaration.","line":186,"column":3,"nodeType":"TSPropertySignature","messageId":"shouldHaveDefault","endLine":186,"endColumn":25},{"ruleId":"no-bitwise","severity":2,"message":"Unexpected use of '|'.","line":195,"column":24,"nodeType":"BinaryExpression","messageId":"unexpected","endLine":195,"endColumn":59},{"ruleId":"no-self-compare","severity":2,"message":"Comparing to itself is potentially pointless.","line":195,"column":48,"nodeType":"BinaryExpression","messageId":"comparingToSelf","endLine":195,"endColumn":59},{"ruleId":"no-undef","severity":2,"message":"'React' is not defined.","line":196,"column":46,"nodeType":"Identifier","messageId":"undef","endLine":196,"endColumn":51},{"ruleId":"no-bitwise","severity":2,"message":"Unexpected use of '|'.","line":204,"column":24,"nodeType":"BinaryExpression","messageId":"unexpected","endLine":215,"endColumn":55},{"ruleId":"no-undef","severity":2,"message":"'useMemo' is not defined.","line":204,"column":24,"nodeType":"Identifier","messageId":"undef","endLine":204,"endColumn":31},{"ruleId":"no-undef","severity":2,"message":"'SequenceContextValue' is not defined.","line":204,"column":32,"nodeType":"Identifier","messageId":"undef","endLine":204,"endColumn":52},{"ruleId":"no-undef","severity":2,"message":"'useMemo' is not defined.","line":217,"column":27,"nodeType":"Identifier","messageId":"undef","endLine":217,"endColumn":34},{"ruleId":"react/no-array-index-key","severity":2,"message":"Do not use Array index in keys","line":221,"column":39,"nodeType":"Identifier","messageId":"noArrayIndex","endLine":221,"endColumn":44},{"ruleId":"no-undef","severity":2,"message":"'React' is not defined.","line":222,"column":19,"nodeType":"Identifier","messageId":"undef","endLine":222,"endColumn":24}],"suppressedMessages":[],"errorCount":51,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { AnimatePresence, motion, useInView } from \"motion/react\";\r\nimport {\r\n  Children,\r\n  createContext,\r\n  useContext,\r\n  useEffect,\r\n  useRef,\r\n  useState,\r\n} from \"react\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\ninterface SequenceContextValue {\r\n  completeItem: (index: number) => void;\r\n  activeIndex: number;\r\n  sequenceStarted: boolean;\r\n}\r\n\r\nconst SequenceContext = createContext<SequenceContextValue | null>(null);\r\n\r\nconst useSequence = () => useContext(SequenceContext);\r\n\r\nconst ItemIndexContext = createContext<number | null>(null);\r\nconst useItemIndex = () => useContext(ItemIndexContext);\r\n\r\ninterface AnimatedSpanProps extends MotionProps {\r\n  children: React.ReactNode;\r\n  delay?: number;\r\n  className?: string;\r\n  startOnView?: boolean;\r\n}\r\n\r\nexport function AnimatedSpan({\r\n  children,\r\n  delay = 0,\r\n  className,\r\n  startOnView = false,\r\n  ...props\r\n}: AnimatedSpanProps) {\r\n  const elementRef = useRef<HTMLDivElement | null>(null);\r\n  const isInView = useInView(elementRef as React.RefObject<Element>, {\r\n    amount: 0.3,\r\n    once: true,\r\n  });\r\n\r\n  const sequence = useSequence();\r\n  const itemIndex = useItemIndex();\r\n  const [hasStarted, setHasStarted] = useState(false);\r\n  useEffect(() => {\r\n    if (!sequence || itemIndex === null) return;\r\n    if (!sequence.sequenceStarted) return;\r\n    if (hasStarted) return;\r\n    if (sequence.activeIndex === itemIndex) {\r\n      setHasStarted(true);\r\n    }\r\n  }, [sequence?.activeIndex, sequence?.sequenceStarted, hasStarted, itemIndex]);\r\n\r\n  const shouldAnimate = sequence ? hasStarted : startOnView ? isInView : true;\r\n\r\n  return (\r\n    <motion.div\r\n      ref={elementRef}\r\n      initial={{ opacity: 0, y: -5 }}\r\n      animate={shouldAnimate ? { opacity: 1, y: 0 } : { opacity: 0, y: -5 }}\r\n      transition={{ duration: 0.3, delay: sequence ? 0 : delay / 1000 }}\r\n      className={cn(\"grid text-sm font-normal tracking-tight\", className)}\r\n      onAnimationComplete={() => {\r\n        if (!sequence) return;\r\n        if (itemIndex === null) return;\r\n        sequence.completeItem(itemIndex);\r\n      }}\r\n      {...props}\r\n    >\r\n      {children}\r\n    </motion.div>\r\n  );\r\n}\r\n\r\ninterface TypingAnimationProps extends MotionProps {\r\n  children: string;\r\n  className?: string;\r\n  duration?: number;\r\n  delay?: number;\r\n  as?: React.ElementType;\r\n  startOnView?: boolean;\r\n}\r\n\r\nexport function TypingAnimation({\r\n  children,\r\n  className,\r\n  duration = 60,\r\n  delay = 0,\r\n  as: Component = \"span\",\r\n  startOnView = true,\r\n  ...props\r\n}: TypingAnimationProps) {\r\n  if (typeof children !== \"string\") {\r\n    throw new Error(\"TypingAnimation: children must be a string. Received:\");\r\n  }\r\n\r\n  const MotionComponent = useMemo(\r\n    () =>\r\n      motion.create(Component, {\r\n        forwardMotionProps: true,\r\n      }),\r\n    [Component],\r\n  );\r\n\r\n  const [displayedText, setDisplayedText] = useState<string>(\"\");\r\n  const [started, setStarted] = useState(false);\r\n  const elementRef = useRef<HTMLElement | null>(null);\r\n  const isInView = useInView(elementRef as React.RefObject<Element>, {\r\n    amount: 0.3,\r\n    once: true,\r\n  });\r\n\r\n  const sequence = useSequence();\r\n  const itemIndex = useItemIndex();\r\n\r\n  useEffect(() => {\r\n    if (sequence && itemIndex !== null) {\r\n      if (!sequence.sequenceStarted) return;\r\n      if (started) return;\r\n      if (sequence.activeIndex === itemIndex) {\r\n        setStarted(true);\r\n      }\r\n      return;\r\n    }\r\n\r\n    if (!startOnView) {\r\n      const startTimeout = setTimeout(() => setStarted(true), delay);\r\n      return () => clearTimeout(startTimeout);\r\n    }\r\n\r\n    if (!isInView) return;\r\n\r\n    const startTimeout = setTimeout(() => setStarted(true), delay);\r\n    return () => clearTimeout(startTimeout);\r\n  }, [\r\n    delay,\r\n    startOnView,\r\n    isInView,\r\n    started,\r\n    sequence?.activeIndex,\r\n    sequence?.sequenceStarted,\r\n    itemIndex,\r\n  ]);\r\n\r\n  useEffect(() => {\r\n    if (!started) return;\r\n\r\n    let i = 0;\r\n    const typingEffect = setInterval(() => {\r\n      if (i < children.length) {\r\n        setDisplayedText(children.substring(0, i + 1));\r\n        i++;\r\n      } else {\r\n        clearInterval(typingEffect);\r\n        if (sequence && itemIndex !== null) {\r\n          sequence.completeItem(itemIndex);\r\n        }\r\n      }\r\n    }, duration);\r\n\r\n    return () => {\r\n      clearInterval(typingEffect);\r\n    };\r\n  }, [children, duration, started]);\r\n\r\n  return (\r\n    <MotionComponent\r\n      ref={elementRef}\r\n      className={cn(\"text-sm font-normal tracking-tight\", className)}\r\n      {...props}\r\n    >\r\n      {displayedText}\r\n    </MotionComponent>\r\n  );\r\n}\r\n\r\ninterface TerminalProps {\r\n  children: React.ReactNode;\r\n  className?: string;\r\n  sequence?: boolean;\r\n  startOnView?: boolean;\r\n}\r\n\r\nexport function Terminal({\r\n  children,\r\n  className,\r\n  sequence = true,\r\n  startOnView = true,\r\n}: TerminalProps) {\r\n  const containerRef = useRef<HTMLDivElement | null>(null);\r\n  const isInView = useInView(containerRef as React.RefObject<Element>, {\r\n    amount: 0.3,\r\n    once: true,\r\n  });\r\n\r\n  const [activeIndex, setActiveIndex] = useState(0);\r\n  const sequenceHasStarted = sequence ? !startOnView || isInView : false;\r\n\r\n  const contextValue = useMemo<SequenceContextValue | (() => {\r\n    if (!sequence) return null;\r\n    return {\r\n      completeItem: (index: number) => {\r\n        setActiveIndex((current) =>\r\n          index === current ? current + 1 : current,\r\n        );\r\n      },\r\n      activeIndex,\r\n      sequenceStarted: sequenceHasStarted,\r\n    };\r\n  }, [sequence, activeIndex, sequenceHasStarted])<null;\r\n\r\n  const wrappedChildren = useMemo(() => {\r\n    if (!sequence) return children;\r\n    const array = Children.toArray(children);\r\n    return array.map((child, index) => (\r\n      <ItemIndexContext.Provider key={index} value={index}>\r\n        {child as React.ReactNode}\r\n      </ItemIndexContext.Provider>\r\n    ));\r\n  }, [children, sequence]);\r\n\r\n  const content = (\r\n    <div\r\n      ref={containerRef}\r\n      className={cn(\r\n        \"z-0 h-full max-h-[400px] w-full max-w-lg rounded-xl border bg-background\",\r\n        className,\r\n      )}\r\n    >\r\n      <div className=\"flex flex-col gap-y-2 border-b border-border p-4\">\r\n        <div className=\"flex flex-row gap-x-2\">\r\n          <div className=\"h-2 w-2 rounded-full bg-red-500\" />\r\n          <div className=\"h-2 w-2 rounded-full bg-yellow-500\" />\r\n          <div className=\"h-2 w-2 rounded-full bg-green-500\" />\r\n        </div>\r\n      </div>\r\n      <pre className=\"p-4\">\r\n        <code className=\"grid gap-y-1 overflow-auto\">{wrappedChildren}</code>\r\n      </pre>\r\n    </div>\r\n  );\r\n\r\n  if (!sequence) return content;\r\n\r\n  return (\r\n    <SequenceContext.Provider value={contextValue}>\r\n      {content}\r\n    </SequenceContext.Provider>\r\n  );\r\n}","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\main.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":22,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":29},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":2,"column":53,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":60},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":3,"column":14,"nodeType":"Identifier","messageId":"undef","endLine":3,"endColumn":21},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":4,"column":14,"nodeType":"Identifier","messageId":"undef","endLine":4,"endColumn":21},{"ruleId":"import-x/no-extraneous-dependencies","severity":2,"message":"'@hapi/boom' should be listed in the project's dependencies. Run 'npm i @hapi/boom' to add it","line":5,"column":18,"nodeType":"CallExpression","messageId":"missing","endLine":5,"endColumn":39},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":5,"column":18,"nodeType":"Identifier","messageId":"undef","endLine":5,"endColumn":25},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":6,"column":16,"nodeType":"Identifier","messageId":"undef","endLine":6,"endColumn":23},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":7,"column":22,"nodeType":"Identifier","messageId":"undef","endLine":7,"endColumn":29},{"ruleId":"import-x/extensions","severity":2,"message":"Unexpected use of file extension \"js\" for \"./src/worker.js\"","line":7,"column":30,"nodeType":"Literal","messageId":"unexpected","endLine":7,"endColumn":47,"suggestions":[{"fix":{"range":[330,347],"text":"'./src/worker'"},"messageId":"removeUnexpected","data":{"extension":"js","importPath":"./src/worker.js","fixedImportPath":"./src/worker"},"desc":"Remove unexpected \"js\" file extension from \"./src/worker.js\" into \"./src/worker\""}]},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":9,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":9,"endColumn":7},{"ruleId":"no-undef","severity":2,"message":"'__dirname' is not defined.","line":12,"column":32,"nodeType":"Identifier","messageId":"undef","endLine":12,"endColumn":41},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useMultiFileAuthState\" is called in function \"module.exports\" that is neither a React function component nor a custom React Hook function. React component names must start with an uppercase letter. React Hook names must start with the word \"use\".","line":13,"column":38,"nodeType":"Identifier","endLine":13,"endColumn":59},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":40,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":40,"endColumn":18,"suggestions":[{"fix":{"range":[1157,1296],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":48,"column":26,"nodeType":"Identifier","messageId":"undef","endLine":48,"endColumn":32},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":51,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":51,"endColumn":18,"suggestions":[{"fix":{"range":[1495,1539],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":52,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":52,"endColumn":18,"suggestions":[{"fix":{"range":[1546,1583],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-undef","severity":2,"message":"'global' is not defined.","line":53,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":53,"endColumn":13}],"suppressedMessages":[],"errorCount":14,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const makeWASocket = require('@whiskeysockets/baileys').default;\nconst { useMultiFileAuthState, DisconnectReason } = require('@whiskeysockets/baileys');\nconst pino = require('pino');\nconst path = require('node:path');\nconst { Boom } = require('@hapi/boom');\nconst qrcode = require('qrcode-terminal');\nconst messageQueue = require('./src/worker.js');\n\nmodule.exports = async context => {\n  const { config } = context;\n\n  const authDir = path.resolve(__dirname, config.bot.authAdapter.default.authDir);\n  const { state, saveCreds } = await useMultiFileAuthState(authDir);\n\n  const logger = pino({\n    level: 'silent',\n  });\n\n  const bot = makeWASocket({\n    auth: state,\n    logger,\n    browser: ['WhatsDeX', 'Chrome', '1.0.0'],\n  });\n\n  bot.ev.on('creds.update', saveCreds);\n\n  bot.ev.on('connection.update', update => {\n    const { connection, lastDisconnect, qr } = update;\n\n    if (qr) {\n      qrcode.generate(qr, { small: true });\n    }\n\n    if (connection === 'close') {\n      const shouldReconnect =\n        lastDisconnect.error instanceof Boom\n          ? lastDisconnect.error.output.statusCode !== DisconnectReason.loggedOut\n          : true;\n\n      console.log(\n        'Connection closed due to ',\n        lastDisconnect.error,\n        ', reconnecting ',\n        shouldReconnect\n      );\n\n      if (shouldReconnect) {\n        setTimeout(() => module.exports(context), 5000); // Re-run the main function to reconnect after 5 seconds\n      }\n    } else if (connection === 'open') {\n      console.log('âœ… Bot connected to WhatsApp!');\n      console.log('Bot JID:', bot.user.id);\n      global.bot = bot; // Set global bot for message processor access\n    }\n  });\n\n  bot.ev.on('messages.upsert', async m => {\n    const msg = m.messages[0];\n    if (!msg.message) return;\n\n    // Serialize msg to avoid circular references\n    const serializableMsg = {\n      key: {\n        remoteJid: msg.key.remoteJid,\n        fromMe: msg.key.fromMe,\n        id: msg.key.id,\n      },\n      message: msg.message,\n      type: Object.keys(msg.message)[0],\n      pushName: msg.pushName,\n      messageTimestamp: msg.messageTimestamp,\n    };\n\n    messageQueue.add({ serializableMsg });\n  });\n\n  return bot;\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\middleware.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":23,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":30},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":4,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":4,"endColumn":7},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async arrow function.","line":13,"column":29,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":13,"endColumn":31},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":33,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":33,"endColumn":18,"suggestions":[{"fix":{"range":[1010,1123],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":37,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":37,"endColumn":18,"suggestions":[{"fix":{"range":[1181,1256],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-undef","severity":2,"message":"'Cooldown' is not defined.","line":92,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":92,"endColumn":23},{"ruleId":"no-undef","severity":2,"message":"'moment' is not defined.","line":181,"column":23,"nodeType":"Identifier","messageId":"undef","endLine":181,"endColumn":29},{"ruleId":"no-restricted-syntax","severity":2,"message":"iterators/generators require regenerator-runtime, which is too heavyweight for this guide to allow them. Separately, loops should be avoided in favor of array iterations.","line":196,"column":5,"nodeType":"ForOfStatement","messageId":"restrictedSyntax","endLine":216,"endColumn":6},{"ruleId":"no-await-in-loop","severity":2,"message":"Unexpected `await` inside a loop.","line":203,"column":11,"nodeType":"AwaitExpression","messageId":"unexpectedAwait","endLine":205,"endColumn":13},{"ruleId":"no-await-in-loop","severity":2,"message":"Unexpected `await` inside a loop.","line":206,"column":18,"nodeType":"AwaitExpression","messageId":"unexpectedAwait","endLine":212,"endColumn":13},{"ruleId":"no-await-in-loop","severity":2,"message":"Unexpected `await` inside a loop.","line":214,"column":16,"nodeType":"AwaitExpression","messageId":"unexpectedAwait","endLine":214,"endColumn":46},{"ruleId":"no-shadow","severity":2,"message":"'cmd' is already declared in the upper scope on line 7 column 14.","line":219,"column":52,"nodeType":"Identifier","messageId":"noShadow","endLine":219,"endColumn":55},{"ruleId":"no-undef","severity":2,"message":"'checkCoin' is not defined.","line":242,"column":18,"nodeType":"Identifier","messageId":"undef","endLine":242,"endColumn":27},{"ruleId":"no-restricted-syntax","severity":2,"message":"iterators/generators require regenerator-runtime, which is too heavyweight for this guide to allow them. Separately, loops should be avoided in favor of array iterations.","line":300,"column":5,"nodeType":"ForOfStatement","messageId":"restrictedSyntax","endLine":320,"endColumn":6},{"ruleId":"no-await-in-loop","severity":2,"message":"Unexpected `await` inside a loop.","line":307,"column":11,"nodeType":"AwaitExpression","messageId":"unexpectedAwait","endLine":309,"endColumn":13},{"ruleId":"no-await-in-loop","severity":2,"message":"Unexpected `await` inside a loop.","line":310,"column":18,"nodeType":"AwaitExpression","messageId":"unexpectedAwait","endLine":316,"endColumn":13},{"ruleId":"no-await-in-loop","severity":2,"message":"Unexpected `await` inside a loop.","line":318,"column":16,"nodeType":"AwaitExpression","messageId":"unexpectedAwait","endLine":318,"endColumn":46},{"ruleId":"no-undef","severity":2,"message":"'auditMiddleware' is not defined.","line":327,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":327,"endColumn":18}],"suppressedMessages":[],"errorCount":16,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const WhatsDeXBrain = require('./src/services/WhatsDeXBrain');\n\n// Main bot middleware\nmodule.exports = (bot, context) => {\n  const {\n    database,\n    tools: { cmd },\n    config,\n    formatter,\n  } = context;\n  const brain = new WhatsDeXBrain(bot, context);\n\n  bot.use(async (ctx, next) => {\n    // Common variables\n    const isGroup = ctx.isGroup();\n    const isPrivate = !isGroup;\n    const senderJid = ctx.sender.jid;\n    const senderId = ctx.getId(senderJid);\n    const groupJid = isGroup ? ctx.id : null;\n    const groupId = isGroup ? ctx.getId(groupJid) : null;\n    const isOwner = cmd.isOwner(config, senderId, ctx.msg.key.id);\n    const isAdmin = isGroup ? await ctx.group().isAdmin(senderJid) : false;\n\n    // Get database\n    const userDb = await database.user.get(senderId);\n    const groupDb = isGroup ? await database.group.get(groupId) : {};\n\n    // Process message with the brain\n    await brain.processMessage(ctx);\n\n    // Log incoming command\n    if (isGroup && !ctx.msg.key.fromMe) {\n      console.log(\n        `ðŸ“¨ Incoming command: ${ctx.used.command}, from group: ${groupId}, by: ${senderId}`\n      );\n    } else if (isPrivate && !ctx.msg.key.fromMe) {\n      console.log(`ðŸ“¨ Incoming command: ${ctx.used.command}, from: ${senderId}`);\n    }\n\n    // Add user XP and handle level-ups\n    const xpGain = 10;\n    const xpToLevelUp = 100;\n    let newUserXp = (userDb?.xp || 0) + xpGain;\n    if (newUserXp >= xpToLevelUp) {\n      const newUserLevel = (userDb?.level || 0) + 1;\n      newUserXp -= xpToLevelUp;\n\n      if (userDb?.autolevelup) {\n        await ctx.reply({\n          text: formatter.quote(` Congratulations! You have leveled up to level ${newUserLevel}.`),\n          footer: config.msg.footer,\n          buttons: [\n            {\n              buttonId: `${ctx.used.prefix}setprofile autolevelup`,\n              buttonText: {\n                displayText: 'Disable Auto Level Up',\n              },\n            },\n          ],\n        });\n      }\n\n      await database.user.update(senderId, { xp: newUserXp, level: newUserLevel });\n    } else {\n      await database.user.update(senderId, { xp: newUserXp });\n    }\n\n    // Simulate typing\n    const simulateTyping = () => {\n      if (config.system.autoTypingOnCmd) ctx.simulateTyping();\n    };\n\n    // Check restriction conditions\n    const restrictions = [\n      {\n        key: 'banned',\n        condition: userDb?.banned && ctx.used.command !== 'owner',\n        msg: config.msg.banned,\n        buttons: [\n          {\n            buttonId: `${ctx.used.prefix}owner`,\n            buttonText: {\n              displayText: 'Contact Owner',\n            },\n          },\n        ],\n        reaction: 'ðŸš«',\n      },\n      {\n        key: 'cooldown',\n        condition:\n          new Cooldown(ctx, config.system.cooldown).onCooldown && !isOwner && !userDb?.premium,\n        msg: config.msg.cooldown,\n        reaction: 'ðŸ’¤',\n      },\n      {\n        key: 'gamerestrict',\n        condition:\n          groupDb?.option?.gamerestrict &&\n          isGroup &&\n          !isAdmin &&\n          ctx.bot.cmd.get(ctx.used.command).category === 'game',\n        msg: config.msg.gamerestrict,\n        reaction: 'ðŸŽ®',\n      },\n      {\n        key: 'privatePremiumOnly',\n        condition:\n          config.system.privatePremiumOnly &&\n          isPrivate &&\n          !isOwner &&\n          !userDb?.premium &&\n          !['price', 'owner'].includes(ctx.used.command),\n        msg: config.msg.privatePremiumOnly,\n        buttons: [\n          {\n            buttonId: `${ctx.used.prefix}price`,\n            buttonText: {\n              displayText: 'Premium Price',\n            },\n          },\n          {\n            buttonId: `${ctx.used.prefix}owner`,\n            buttonText: {\n              displayText: 'Contact Owner',\n            },\n          },\n        ],\n        reaction: 'ðŸ’Ž',\n      },\n      {\n        key: 'requireBotGroupMembership',\n        condition:\n          config.system.requireBotGroupMembership &&\n          !isOwner &&\n          !userDb?.premium &&\n          ctx.used.command !== 'botgroup' &&\n          config.bot.groupJid &&\n          !(await ctx.group(config.bot.groupJid).members()).some(\n            member => member.jid === senderJid\n          ),\n        msg: config.msg.botGroupMembership,\n        buttons: [\n          {\n            buttonId: `${ctx.used.prefix}botgroup`,\n            buttonText: {\n              displayText: 'Bot Group',\n            },\n          },\n        ],\n        reaction: 'ðŸš«',\n      },\n      {\n        key: 'requireGroupSewa',\n        condition:\n          config.system.requireGroupSewa &&\n          isGroup &&\n          !isOwner &&\n          !['price', 'owner'].includes(ctx.used.command) &&\n          groupDb?.sewa !== true,\n        msg: config.msg.groupSewa,\n        buttons: [\n          {\n            buttonId: `${ctx.used.prefix}price`,\n            buttonText: {\n              displayText: 'Rental Price',\n            },\n          },\n          {\n            buttonId: `${ctx.used.prefix}owner`,\n            buttonText: {\n              displayText: 'Contact Owner',\n            },\n          },\n        ],\n        reaction: 'ðŸ”’',\n      },\n      {\n        key: 'unavailableAtNight',\n        condition: (() => {\n          const now = moment().tz(config.system.timeZone);\n          const hour = now.hour();\n          return (\n            config.system.unavailableAtNight &&\n            !isOwner &&\n            !userDb?.premium &&\n            hour >= 0 &&\n            hour < 6\n          );\n        })(),\n        msg: config.msg.unavailableAtNight,\n        reaction: 'ðŸ˜´',\n      },\n    ];\n\n    for (const { condition, msg, reaction, key, buttons } of restrictions) {\n      if (condition) {\n        const now = Date.now();\n        const lastSentMsg = userDb?.lastSentMsg?.[key] || 0;\n        const oneDay = 24 * 60 * 60 * 1000;\n        if (!lastSentMsg || now - lastSentMsg > oneDay) {\n          simulateTyping();\n          await database.user.update(senderId, {\n            lastSentMsg: { ...userDb.lastSentMsg, [key]: now },\n          });\n          return await ctx.reply({\n            text: msg,\n            footer: formatter.italic(\n              `The next response will be an emoji reaction ${formatter.inlineCode(reaction)}. `\n            ),\n            buttons: buttons || null,\n          });\n        }\n        return await ctx.replyReact(reaction);\n      }\n    }\n\n    // Check permission conditions\n    const command = [...ctx.bot.cmd.values()].find(cmd =>\n      [cmd.name, ...(cmd.aliases || [])].includes(ctx.used.command)\n    );\n    if (!command) return await next();\n    const { permissions = {} } = command;\n    const permissionChecks = [\n      {\n        key: 'admin',\n        condition: isGroup && !isAdmin,\n        msg: config.msg.admin,\n        reaction: 'ðŸ›¡ï¸',\n      },\n      {\n        key: 'botAdmin',\n        condition: isGroup && !(await ctx.group().isBotAdmin()),\n        msg: config.msg.botAdmin,\n        reaction: 'ðŸ¤–',\n      },\n      {\n        key: 'coin',\n        condition:\n          permissions.coin &&\n          config.system.useCoin &&\n          (await checkCoin(database, permissions.coin, userDb, senderId, isOwner)),\n        msg: config.msg.coin,\n        buttons: [\n          {\n            buttonId: `${ctx.used.prefix}coin`,\n            buttonText: {\n              displayText: 'Check Coins',\n            },\n          },\n        ],\n        reaction: 'ðŸ’°',\n      },\n      {\n        key: 'group',\n        condition: isPrivate,\n        msg: config.msg.group,\n        reaction: 'ðŸ‘¥',\n      },\n      {\n        key: 'owner',\n        condition: !isOwner,\n        msg: config.msg.owner,\n        reaction: 'ðŸ‘‘',\n      },\n      {\n        key: 'premium',\n        condition: !isOwner && !userDb?.premium,\n        msg: config.msg.premium,\n        buttons: [\n          {\n            buttonId: `${ctx.used.prefix}price`,\n            buttonText: {\n              displayText: 'Premium Price',\n            },\n          },\n          {\n            buttonId: `${ctx.used.prefix}owner`,\n            buttonText: {\n              displayText: 'Contact Owner',\n            },\n          },\n        ],\n        reaction: 'ðŸ’Ž',\n      },\n      {\n        key: 'private',\n        condition: isGroup,\n        msg: config.msg.private,\n        reaction: 'ðŸ“©',\n      },\n      {\n        key: 'restrict',\n        condition: config.system.restrict,\n        msg: config.msg.restrict,\n        reaction: 'ðŸš«',\n      },\n    ];\n\n    for (const { key, condition, msg, reaction, buttons } of permissionChecks) {\n      if (permissions[key] && condition) {\n        const now = Date.now();\n        const lastSentMsg = userDb?.lastSentMsg?.[key] || 0;\n        const oneDay = 24 * 60 * 60 * 1000;\n        if (!lastSentMsg || now - lastSentMsg > oneDay) {\n          simulateTyping();\n          await database.user.update(senderId, {\n            lastSentMsg: { ...userDb.lastSentMsg, [key]: now },\n          });\n          return await ctx.reply({\n            text: msg,\n            footer: formatter.italic(\n              `The next response will be an emoji reaction ${formatter.inlineCode(reaction)}. `\n            ),\n            buttons: buttons || null,\n          });\n        }\n        return await ctx.replyReact(reaction);\n      }\n    }\n\n    simulateTyping();\n    await next(); // Continue to the next process\n  });\n\n  // Initialize audit middleware\n  auditMiddleware(bot, context);\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\middleware\\afk.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":1,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":7},{"ruleId":"no-restricted-syntax","severity":2,"message":"iterators/generators require regenerator-runtime, which is too heavyweight for this guide to allow them. Separately, loops should be avoided in favor of array iterations.","line":27,"column":7,"nodeType":"ForOfStatement","messageId":"restrictedSyntax","endLine":38,"endColumn":8},{"ruleId":"no-await-in-loop","severity":2,"message":"Unexpected `await` inside a loop.","line":28,"column":31,"nodeType":"AwaitExpression","messageId":"unexpectedAwait","endLine":28,"endColumn":70},{"ruleId":"no-await-in-loop","severity":2,"message":"Unexpected `await` inside a loop.","line":32,"column":11,"nodeType":"AwaitExpression","messageId":"unexpectedAwait","endLine":36,"endColumn":12}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"module.exports = async (ctx, context) => {\n  const { database, tools, formatter } = context;\n  const { isGroup, sender, userDb } = ctx;\n\n  // Handle user coming back from AFK\n  const userAfk = userDb?.afk || {};\n  if (userAfk.reason || userAfk.timestamp) {\n    const timeElapsed = Date.now() - userAfk.timestamp;\n    if (timeElapsed > 3000) {\n      const timeago = tools.msg.convertMsToDuration(timeElapsed);\n      await ctx.reply(\n        formatter.quote(\n          `ðŸ“´ Kamu telah keluar dari AFK ${userAfk.reason ? `dengan alasan ${formatter.inlineCode(userAfk.reason)}` : 'tanpa alasan'} selama ${timeago}.`\n        )\n      );\n      const { afk, ...rest } = userDb;\n      await database.user.set(sender.id, rest);\n    }\n  }\n\n  // Handle mentioning AFK users\n  if (isGroup) {\n    const userAfkMentions = ctx.quoted?.senderJid\n      ? [ctx.getId(ctx.quoted.senderJid)]\n      : (await ctx.getMentioned()).map(jid => ctx.getId(jid));\n    if (userAfkMentions.length > 0) {\n      for (const userAfkMention of userAfkMentions) {\n        const mentionedUser = await database.user.get(userAfkMention);\n        const mentionedUserAfk = mentionedUser?.afk || {};\n        if (mentionedUserAfk.reason || mentionedUserAfk.timestamp) {\n          const timeago = tools.msg.convertMsToDuration(Date.now() - mentionedUserAfk.timestamp);\n          await ctx.reply(\n            formatter.quote(\n              `ðŸ“´ Jangan tag! Dia sedang AFK ${mentionedUserAfk.reason ? `dengan alasan ${formatter.inlineCode(mentionedUserAfk.reason)}` : 'tanpa alasan'} selama ${timeago}.`\n            )\n          );\n        }\n      }\n    }\n  }\n\n  return true;\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\middleware\\antiLink.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":1,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":7}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"module.exports = async (ctx, context) => {\n  const {\n    tools: { cmd, warn },\n    formatter,\n  } = context;\n  const { isGroup, isOwner, isAdmin, groupDb, sender, msg, m } = ctx;\n\n  if (isGroup && !isOwner && !isAdmin) {\n    if (groupDb?.option?.antilink && m.content && cmd.isUrl(m.content)) {\n      await ctx.reply(formatter.quote('â›” Jangan kirim link!'));\n      await ctx.deleteMessage(msg.key);\n      if (groupDb?.option?.autokick) {\n        await ctx.group().kick(sender.jid);\n      } else {\n        await warn.addWarning(ctx, groupDb, sender.jid, ctx.getId(ctx.id));\n      }\n      return false;\n    }\n  }\n\n  return true;\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\middleware\\antiMedia.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":1,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":7},{"ruleId":"no-restricted-syntax","severity":2,"message":"iterators/generators require regenerator-runtime, which is too heavyweight for this guide to allow them. Separately, loops should be avoided in favor of array iterations.","line":9,"column":5,"nodeType":"ForOfStatement","messageId":"restrictedSyntax","endLine":23,"endColumn":6},{"ruleId":"no-await-in-loop","severity":2,"message":"Unexpected `await` inside a loop.","line":13,"column":11,"nodeType":"AwaitExpression","messageId":"unexpectedAwait","endLine":13,"endColumn":70},{"ruleId":"no-await-in-loop","severity":2,"message":"Unexpected `await` inside a loop.","line":14,"column":11,"nodeType":"AwaitExpression","messageId":"unexpectedAwait","endLine":14,"endColumn":43},{"ruleId":"no-await-in-loop","severity":2,"message":"Unexpected `await` inside a loop.","line":16,"column":13,"nodeType":"AwaitExpression","messageId":"unexpectedAwait","endLine":16,"endColumn":47},{"ruleId":"no-await-in-loop","severity":2,"message":"Unexpected `await` inside a loop.","line":18,"column":13,"nodeType":"AwaitExpression","messageId":"unexpectedAwait","endLine":18,"endColumn":79}],"suppressedMessages":[],"errorCount":6,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"module.exports = async (ctx, context) => {\n  const {\n    tools: { cmd, warn },\n    formatter,\n  } = context;\n  const { isGroup, isOwner, isAdmin, groupDb, sender, msg } = ctx;\n\n  if (isGroup && !isOwner && !isAdmin) {\n    for (const type of ['audio', 'document', 'gif', 'image', 'sticker', 'video']) {\n      if (groupDb?.option?.[`anti${type}`]) {\n        const checkMedia = cmd.checkMedia(ctx.getMessageType(), type);\n        if (checkMedia) {\n          await ctx.reply(formatter.quote(`â›” Jangan kirim ${type}!`));\n          await ctx.deleteMessage(msg.key);\n          if (groupDb?.option?.autokick) {\n            await ctx.group().kick(sender.jid);\n          } else {\n            await warn.addWarning(ctx, groupDb, sender.jid, ctx.getId(ctx.id));\n          }\n          return false; // Stop processing further\n        }\n      }\n    }\n  }\n\n  return true;\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\middleware\\antiNsfw.js","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'axios' is assigned a value but never used.","line":1,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":12,"suggestions":[{"messageId":"removeVar","data":{"varName":"axios"},"fix":{"range":[0,31],"text":""},"desc":"Remove unused variable 'axios'."}]},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":22},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":4,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":4,"endColumn":7},{"ruleId":"no-unused-vars","severity":1,"message":"'api' is assigned a value but never used.","line":6,"column":19,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":22,"suggestions":[{"messageId":"removeVar","data":{"varName":"api"},"fix":{"range":[164,169],"text":""},"desc":"Remove unused variable 'api'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'warn' is assigned a value but never used.","line":6,"column":24,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":28,"suggestions":[{"messageId":"removeVar","data":{"varName":"warn"},"fix":{"range":[169,175],"text":""},"desc":"Remove unused variable 'warn'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'formatter' is assigned a value but never used.","line":7,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":7,"endColumn":14,"suggestions":[{"messageId":"removeVar","data":{"varName":"formatter"},"fix":{"range":[177,192],"text":""},"desc":"Remove unused variable 'formatter'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'sender' is assigned a value but never used.","line":9,"column":47,"nodeType":"Identifier","messageId":"unusedVar","endLine":9,"endColumn":53,"suggestions":[{"messageId":"removeVar","data":{"varName":"sender"},"fix":{"range":[253,261],"text":""},"desc":"Remove unused variable 'sender'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'msg' is assigned a value but never used.","line":9,"column":55,"nodeType":"Identifier","messageId":"unusedVar","endLine":9,"endColumn":58,"suggestions":[{"messageId":"removeVar","data":{"varName":"msg"},"fix":{"range":[261,266],"text":""},"desc":"Remove unused variable 'msg'."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const axios = require('axios');\n// const { Baileys } = require(\"@whiskeysockets/baileileys\");\n\nmodule.exports = async (ctx, context) => {\n  const {\n    tools: { cmd, api, warn },\n    formatter,\n  } = context;\n  const { isGroup, isOwner, isAdmin, groupDb, sender, msg } = ctx;\n\n  if (isGroup && !isOwner && !isAdmin) {\n    if (groupDb?.option?.antinsfw) {\n      const checkMedia = cmd.checkMedia(ctx.getMessageType(), 'image');\n      if (checkMedia) {\n        // const buffer = await msg.media.toBuffer();\n        // const uploadUrl = await Baileys.uploadFile(buffer);\n        // const apiUrl = api.createUrl(\"neko\", \"/tools/nsfw-checker\", {\n        //     imageUrl: uploadUrl\n        // });\n        // const result = (await axios.get(apiUrl)).data.result.labelName.toLowerCase();\n        // if (result.nsfw === \"porn\") {\n        //     await ctx.reply(formatter.quote(\"â›” Jangan kirim NSFW, dasar cabul!\"));\n        //     await ctx.deleteMessage(msg.key);\n        //     if (groupDb?.option?.autokick) {\n        //         await ctx.group().kick(sender.jid);\n        //     } else {\n        //         await warn.addWarning(ctx, groupDb, sender.jid, ctx.getId(ctx.id));\n        //     }\n        //     return false;\n        // }\n      }\n    }\n  }\n\n  return true;\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\middleware\\antiSpam.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":1,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":7}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"module.exports = async (ctx, context) => {\n  const {\n    database,\n    tools: { warn },\n    formatter,\n  } = context;\n  const { isGroup, isOwner, isAdmin, groupDb, sender, msg } = ctx;\n\n  if (isGroup && !isOwner && !isAdmin) {\n    if (groupDb?.option?.antispam) {\n      const now = Date.now();\n      const spamData = groupDb.spam || [];\n\n      const userSpam = spamData.find(spam => spam.userId === sender.id) || {\n        userId: sender.id,\n        count: 0,\n        lastMessageTime: 0,\n      };\n\n      const timeDiff = now - userSpam.lastMessageTime;\n      const newCount = timeDiff < 5000 ? userSpam.count + 1 : 1;\n\n      userSpam.count = newCount;\n      userSpam.lastMessageTime = now;\n\n      if (!spamData.some(spam => spam.userId === sender.id)) spamData.push(userSpam);\n\n      await database.group.update(ctx.getId(ctx.id), { spam: spamData });\n\n      if (newCount > 5) {\n        await ctx.reply(formatter.quote('â›” Jangan spam, ngelag woy!'));\n        await ctx.deleteMessage(msg.key);\n        if (groupDb?.option?.autokick) {\n          await ctx.group().kick(sender.jid);\n        } else {\n          await warn.addWarning(ctx, groupDb, sender.jid, ctx.getId(ctx.id));\n        }\n        await database.group.update(ctx.getId(ctx.id), {\n          spam: spamData.filter(spam => spam.userId !== sender.id),\n        });\n        return false;\n      }\n    }\n  }\n\n  return true;\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\middleware\\antiTagsw.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":1,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":7}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"module.exports = async (ctx, context) => {\n  const {\n    tools: { cmd, warn },\n    formatter,\n  } = context;\n  const { isGroup, isOwner, isAdmin, groupDb, sender, msg, m } = ctx;\n\n  if (isGroup && !isOwner && !isAdmin) {\n    if (groupDb?.option?.antitagsw) {\n      const checkMedia =\n        cmd.checkMedia(ctx.getMessageType(), 'groupStatusMention') ||\n        m.message?.groupStatusMentionMessage?.protocolMessage?.type === 25;\n      if (checkMedia) {\n        await ctx.reply(formatter.quote(`â›” Jangan tag grup di SW, gak ada yg peduli!`));\n        await ctx.deleteMessage(msg.key);\n        if (groupDb?.option?.autokick) {\n          await ctx.group().kick(sender.jid);\n        } else {\n          await warn.addWarning(ctx, groupDb, sender.jid, ctx.getId(ctx.id));\n        }\n        return false;\n      }\n    }\n  }\n\n  return true;\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\middleware\\antiToxic.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":1,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":7}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"module.exports = async (ctx, context) => {\n  const {\n    tools: { warn },\n    formatter,\n  } = context;\n  const { isGroup, isOwner, isAdmin, groupDb, sender, msg, m } = ctx;\n\n  if (isGroup && !isOwner && !isAdmin) {\n    if (groupDb?.option?.antitoxic) {\n      const toxicRegex =\n        /anj(k|g)|ajn?(g|k)|a?njin(g|k)|bajingan|b(a?n)?gsa?t|ko?nto?l|me?me?(k|q)|pe?pe?(k|q)|meki|titi(t|d)|pe?ler|tetek|toket|ngewe|go?blo?k|to?lo?l|idiot|(k|ng)e?nto?(t|d)|jembut|bego|dajj?al|janc(u|o)k|pantek|puki ?(mak)?|kimak|kampang|lonte|col(i|mek?)|pelacur|henceu?t|nigga|fuck|dick|bitch|tits|bastard|asshole|dontol|kontoi|ontol/i;\n      if (m.content && toxicRegex.test(m.content)) {\n        await ctx.reply(formatter.quote('â›” Jangan toxic!'));\n        await ctx.deleteMessage(msg.key);\n        if (groupDb?.option?.autokick) {\n          await ctx.group().kick(sender.jid);\n        } else {\n          await warn.addWarning(ctx, groupDb, sender.jid, ctx.getId(ctx.id));\n        }\n        return false;\n      }\n    }\n  }\n\n  return true;\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\middleware\\audit-fixed.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":2,"column":31,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":38},{"ruleId":"import-x/no-unresolved","severity":2,"message":"Unable to resolve path to module 'rate-limiter-flexible'.","line":2,"column":39,"nodeType":"Literal","messageId":"unresolved","endLine":2,"endColumn":62},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":4,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":4,"endColumn":7},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":97,"column":11,"nodeType":"MemberExpression","messageId":"unexpected","endLine":97,"endColumn":24,"suggestions":[{"fix":{"range":[3174,3228],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'rateLimitError' is defined but never used.","line":100,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":100,"endColumn":28},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":102,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":102,"endColumn":19,"suggestions":[{"fix":{"range":[3350,3418],"text":""},"messageId":"removeConsole","data":{"propertyName":"warn"},"desc":"Remove the console.warn()."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Audit middleware for automatic event logging\nconst { RateLimiterMemory } = require('rate-limiter-flexible');\n\nmodule.exports = (bot, context) => {\n  const { auditLogger, database } = context;\n\n  // Rate limiter to prevent audit log spam\n  const rateLimiter = new RateLimiterMemory({\n    keyPrefix: 'audit',\n    points: 100, // Number of requests\n    duration: 60, // Per 60 seconds\n  });\n\n  bot.use(async (ctx, next) => {\n    const startTime = Date.now();\n    const userId = ctx.getId(ctx.sender.jid);\n    const isGroup = ctx.isGroup();\n    const command = ctx.used?.command || 'unknown';\n\n    // Extract request information\n    const auditData = {\n      userId,\n      command,\n      isGroup,\n      ipAddress: ctx.ip || 'unknown',\n      userAgent: ctx.userAgent || 'WhatsApp',\n      sessionId: ctx.sessionId || 'unknown',\n      location: ctx.location || 'unknown',\n    };\n\n    try {\n      // Rate limit audit logging to prevent spam\n      await rateLimiter.consume(auditData.userId);\n\n      // Log command usage\n      await auditLogger.logEvent({\n        eventType: auditLogger.EVENT_TYPES.API_REQUEST,\n        actor: userId,\n        actorId: userId,\n        action: `Command executed: ${command}`,\n        resource: 'command',\n        resourceId: command,\n        details: {\n          command,\n          isGroup,\n          messageType: ctx.msg?.type || 'unknown',\n          messageLength: ctx.msg?.text?.length || 0,\n          hasMedia: !!(ctx.msg?.image || ctx.msg?.video || ctx.msg?.audio),\n          timestamp: new Date().toISOString(),\n        },\n        riskLevel: auditLogger.RISK_LEVELS.LOW,\n        ipAddress: auditData.ipAddress,\n        userAgent: auditData.userAgent,\n        sessionId: auditData.sessionId,\n        location: auditData.location,\n      });\n\n      // Track user activity\n      if (userId) {\n        try {\n          const user = await database.user.get(userId);\n          if (user) {\n            // Update last activity\n            await database.user.update(userId, {\n              lastActivity: new Date(),\n            });\n\n            // Log user activity if it's been more than an hour\n            const lastActivityLog = user.lastActivityLog || 0;\n            const now = Date.now();\n            if (now - lastActivityLog > 60 * 60 * 1000) {\n              // 1 hour\n              await auditLogger.logEvent({\n                eventType: auditLogger.EVENT_TYPES.USER_UPDATE,\n                actor: userId,\n                actorId: userId,\n                action: 'User activity updated',\n                resource: 'user',\n                resourceId: userId,\n                details: {\n                  lastActivity: new Date().toISOString(),\n                  commandsUsed: (user.commandsUsed || 0) + 1,\n                  level: user.level || 1,\n                  xp: user.xp || 0,\n                },\n                riskLevel: auditLogger.RISK_LEVELS.LOW,\n                ipAddress: auditData.ipAddress,\n                userAgent: auditData.userAgent,\n              });\n\n              await database.user.update(userId, {\n                lastActivityLog: now,\n              });\n            }\n          }\n        } catch (error) {\n          console.error('Error updating user activity:', error);\n        }\n      }\n    } catch (rateLimitError) {\n      // Rate limit exceeded, skip audit logging for this request\n      console.warn('Audit logging rate limit exceeded for user:', userId);\n    }\n\n    try {\n      // Continue to next middleware\n      await next();\n\n      // Log successful command execution\n      const executionTime = Date.now() - startTime;\n      await auditLogger.logEvent({\n        eventType: auditLogger.EVENT_TYPES.API_REQUEST,\n        actor: userId,\n        actorId: userId,\n        action: `Command completed: ${command}`,\n        resource: 'command',\n        resourceId: command,\n        details: {\n          command,\n          executionTime,\n          success: true,\n          timestamp: new Date().toISOString(),\n        },\n        riskLevel: auditLogger.RISK_LEVELS.LOW,\n        ipAddress: auditData.ipAddress,\n        userAgent: auditData.userAgent,\n        sessionId: auditData.sessionId,\n      });\n    } catch (error) {\n      // Log failed command execution\n      const executionTime = Date.now() - startTime;\n      await auditLogger.logEvent({\n        eventType: auditLogger.EVENT_TYPES.API_ERROR,\n        actor: userId,\n        actorId: userId,\n        action: `Command failed: ${command}`,\n        resource: 'command',\n        resourceId: command,\n        details: {\n          command,\n          executionTime,\n          success: false,\n          error: error.message,\n          stack: error.stack,\n          timestamp: new Date().toISOString(),\n        },\n        riskLevel: auditLogger.RISK_LEVELS.MEDIUM,\n        ipAddress: auditData.ipAddress,\n        userAgent: auditData.userAgent,\n        sessionId: auditData.sessionId,\n      });\n\n      throw error; // Re-throw to maintain error handling flow\n    }\n  });\n\n  // Note: Bot event logging is handled through the main events handler\n  // The audit middleware focuses on command-level logging through the middleware chain\n  // Additional event logging can be added to the main events/handler.js file if needed\n\n  // System event logging should be handled in a separate, non-Edge-compatible service.\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\middleware\\audit.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":2,"column":31,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":38},{"ruleId":"import-x/no-unresolved","severity":2,"message":"Unable to resolve path to module 'rate-limiter-flexible'.","line":2,"column":39,"nodeType":"Literal","messageId":"unresolved","endLine":2,"endColumn":62},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":4,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":4,"endColumn":7},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":97,"column":11,"nodeType":"MemberExpression","messageId":"unexpected","endLine":97,"endColumn":24,"suggestions":[{"fix":{"range":[3174,3228],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'rateLimitError' is defined but never used.","line":100,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":100,"endColumn":28},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":102,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":102,"endColumn":19,"suggestions":[{"fix":{"range":[3350,3418],"text":""},"messageId":"removeConsole","data":{"propertyName":"warn"},"desc":"Remove the console.warn()."}]},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":162,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":162,"endColumn":10},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":165,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":165,"endColumn":22},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":166,"column":20,"nodeType":"Identifier","messageId":"undef","endLine":166,"endColumn":27},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":171,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":171,"endColumn":10},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":174,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":174,"endColumn":22},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":175,"column":20,"nodeType":"Identifier","messageId":"undef","endLine":175,"endColumn":27},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":180,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":180,"endColumn":10},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":185,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":185,"endColumn":22},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":186,"column":20,"nodeType":"Identifier","messageId":"undef","endLine":186,"endColumn":27},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":191,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":191,"endColumn":10},{"ruleId":"no-unused-vars","severity":1,"message":"'promise' is defined but never used. Allowed unused args must match /^_/u.","line":191,"column":51,"nodeType":"Identifier","messageId":"unusedVar","endLine":191,"endColumn":58,"suggestions":[{"messageId":"removeVar","data":{"varName":"promise"},"fix":{"range":[6037,6046],"text":""},"desc":"Remove unused variable 'promise'."}]},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":195,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":195,"endColumn":22},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":196,"column":20,"nodeType":"Identifier","messageId":"undef","endLine":196,"endColumn":27}],"suppressedMessages":[],"errorCount":15,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Audit middleware for automatic event logging\nconst { RateLimiterMemory } = require('rate-limiter-flexible');\n\nmodule.exports = (bot, context) => {\n  const { auditLogger, database } = context;\n\n  // Rate limiter to prevent audit log spam\n  const rateLimiter = new RateLimiterMemory({\n    keyPrefix: 'audit',\n    points: 100, // Number of requests\n    duration: 60, // Per 60 seconds\n  });\n\n  bot.use(async (ctx, next) => {\n    const startTime = Date.now();\n    const userId = ctx.getId(ctx.sender.jid);\n    const isGroup = ctx.isGroup();\n    const command = ctx.used?.command || 'unknown';\n\n    // Extract request information\n    const auditData = {\n      userId,\n      command,\n      isGroup,\n      ipAddress: ctx.ip || 'unknown',\n      userAgent: ctx.userAgent || 'WhatsApp',\n      sessionId: ctx.sessionId || 'unknown',\n      location: ctx.location || 'unknown',\n    };\n\n    try {\n      // Rate limit audit logging to prevent spam\n      await rateLimiter.consume(auditData.userId);\n\n      // Log command usage\n      await auditLogger.logEvent({\n        eventType: auditLogger.EVENT_TYPES.API_REQUEST,\n        actor: userId,\n        actorId: userId,\n        action: `Command executed: ${command}`,\n        resource: 'command',\n        resourceId: command,\n        details: {\n          command,\n          isGroup,\n          messageType: ctx.msg?.type || 'unknown',\n          messageLength: ctx.msg?.text?.length || 0,\n          hasMedia: !!(ctx.msg?.image || ctx.msg?.video || ctx.msg?.audio),\n          timestamp: new Date().toISOString(),\n        },\n        riskLevel: auditLogger.RISK_LEVELS.LOW,\n        ipAddress: auditData.ipAddress,\n        userAgent: auditData.userAgent,\n        sessionId: auditData.sessionId,\n        location: auditData.location,\n      });\n\n      // Track user activity\n      if (userId) {\n        try {\n          const user = await database.user.get(userId);\n          if (user) {\n            // Update last activity\n            await database.user.update(userId, {\n              lastActivity: new Date(),\n            });\n\n            // Log user activity if it's been more than an hour\n            const lastActivityLog = user.lastActivityLog || 0;\n            const now = Date.now();\n            if (now - lastActivityLog > 60 * 60 * 1000) {\n              // 1 hour\n              await auditLogger.logEvent({\n                eventType: auditLogger.EVENT_TYPES.USER_UPDATE,\n                actor: userId,\n                actorId: userId,\n                action: 'User activity updated',\n                resource: 'user',\n                resourceId: userId,\n                details: {\n                  lastActivity: new Date().toISOString(),\n                  commandsUsed: (user.commandsUsed || 0) + 1,\n                  level: user.level || 1,\n                  xp: user.xp || 0,\n                },\n                riskLevel: auditLogger.RISK_LEVELS.LOW,\n                ipAddress: auditData.ipAddress,\n                userAgent: auditData.userAgent,\n              });\n\n              await database.user.update(userId, {\n                lastActivityLog: now,\n              });\n            }\n          }\n        } catch (error) {\n          console.error('Error updating user activity:', error);\n        }\n      }\n    } catch (rateLimitError) {\n      // Rate limit exceeded, skip audit logging for this request\n      console.warn('Audit logging rate limit exceeded for user:', userId);\n    }\n\n    try {\n      // Continue to next middleware\n      await next();\n\n      // Log successful command execution\n      const executionTime = Date.now() - startTime;\n      await auditLogger.logEvent({\n        eventType: auditLogger.EVENT_TYPES.API_REQUEST,\n        actor: userId,\n        actorId: userId,\n        action: `Command completed: ${command}`,\n        resource: 'command',\n        resourceId: command,\n        details: {\n          command,\n          executionTime,\n          success: true,\n          timestamp: new Date().toISOString(),\n        },\n        riskLevel: auditLogger.RISK_LEVELS.LOW,\n        ipAddress: auditData.ipAddress,\n        userAgent: auditData.userAgent,\n        sessionId: auditData.sessionId,\n      });\n    } catch (error) {\n      // Log failed command execution\n      const executionTime = Date.now() - startTime;\n      await auditLogger.logEvent({\n        eventType: auditLogger.EVENT_TYPES.API_ERROR,\n        actor: userId,\n        actorId: userId,\n        action: `Command failed: ${command}`,\n        resource: 'command',\n        resourceId: command,\n        details: {\n          command,\n          executionTime,\n          success: false,\n          error: error.message,\n          stack: error.stack,\n          timestamp: new Date().toISOString(),\n        },\n        riskLevel: auditLogger.RISK_LEVELS.MEDIUM,\n        ipAddress: auditData.ipAddress,\n        userAgent: auditData.userAgent,\n        sessionId: auditData.sessionId,\n      });\n\n      throw error; // Re-throw to maintain error handling flow\n    }\n  });\n\n  // Note: Bot event logging is handled through the main events handler\n  // The audit middleware focuses on command-level logging through the middleware chain\n  // Additional event logging can be added to the main events/handler.js file if needed\n\n  // Log system events\n  process.on('SIGINT', async () => {\n    await auditLogger.logSystem({\n      type: 'stop',\n      uptime: process.uptime(),\n      memoryUsage: process.memoryUsage(),\n      timestamp: new Date().toISOString(),\n    });\n  });\n\n  process.on('SIGTERM', async () => {\n    await auditLogger.logSystem({\n      type: 'stop',\n      uptime: process.uptime(),\n      memoryUsage: process.memoryUsage(),\n      timestamp: new Date().toISOString(),\n    });\n  });\n\n  process.on('uncaughtException', async error => {\n    await auditLogger.logSystem({\n      type: 'error',\n      error: error.message,\n      stack: error.stack,\n      uptime: process.uptime(),\n      memoryUsage: process.memoryUsage(),\n      timestamp: new Date().toISOString(),\n    });\n  });\n\n  process.on('unhandledRejection', async (reason, promise) => {\n    await auditLogger.logSystem({\n      type: 'error',\n      error: `Unhandled Rejection: ${reason}`,\n      uptime: process.uptime(),\n      memoryUsage: process.memoryUsage(),\n      timestamp: new Date().toISOString(),\n    });\n  });\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\middleware\\auth.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":13,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":20},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":2,"column":31,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":38},{"ruleId":"import-x/no-unresolved","severity":2,"message":"Unable to resolve path to module 'rate-limiter-flexible'.","line":2,"column":39,"nodeType":"Literal","messageId":"unresolved","endLine":2,"endColumn":62},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":3,"column":16,"nodeType":"Identifier","messageId":"undef","endLine":3,"endColumn":23},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async arrow function.","line":16,"column":50,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":16,"endColumn":52},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":23,"column":8,"nodeType":"Identifier","messageId":"undef","endLine":23,"endColumn":15},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":23,"column":37,"nodeType":"Identifier","messageId":"undef","endLine":23,"endColumn":44},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":25,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":25,"endColumn":14},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":45,"column":23,"nodeType":"Identifier","messageId":"undef","endLine":45,"endColumn":30},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async arrow function.","line":45,"column":89,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":45,"endColumn":91},{"ruleId":"no-unused-vars","severity":1,"message":"'rateLimitError' is defined but never used.","line":77,"column":12,"nodeType":"Identifier","messageId":"unusedVar","endLine":77,"endColumn":26},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of arrow function.","line":96,"column":20,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":96,"endColumn":22},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":187,"column":25,"nodeType":"Identifier","messageId":"undef","endLine":187,"endColumn":32},{"ruleId":"no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":199,"column":12,"nodeType":"Identifier","messageId":"unusedVar","endLine":199,"endColumn":17},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of arrow function.","line":208,"column":45,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":208,"endColumn":47},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":219,"column":21,"nodeType":"Identifier","messageId":"undef","endLine":219,"endColumn":28},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":219,"column":50,"nodeType":"Identifier","messageId":"undef","endLine":219,"endColumn":57},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":238,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":238,"endColumn":7}],"suppressedMessages":[],"errorCount":16,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const jwt = require('jsonwebtoken');\nconst { RateLimiterMemory } = require('rate-limiter-flexible');\nconst logger = require('../src/utils/logger');\n\n// Rate limiter for auth endpoints\nconst authRateLimiter = new RateLimiterMemory({\n  keyPrefix: 'auth',\n  points: 10, // Number of requests\n  duration: 60, // Per 60 seconds\n});\n\n/**\n * JWT Authentication Middleware\n * Verifies JWT token and attaches user info to request\n */\nconst authenticateToken = async (req, res, next) => {\n  try {\n    // IP whitelisting check (consolidated)\n    const devIPs = ['127.0.0.1', '::1', '0.0.0.0'];\n    const isDevIP = devIPs.includes(req.ip);\n    const isWhitelisted =\n      isDevIP ||\n      (process.env.WHITELIST_IPS && process.env.WHITELIST_IPS.split(',').includes(req.ip));\n    if (!isWhitelisted) {\n      require('../src/services/auditLogger').warn('IP not whitelisted', {\n        ip: req.ip,\n        endpoint: req.path,\n      });\n      return res.status(403).json({ error: 'IP address not whitelisted' });\n    }\n\n    await authRateLimiter.consume(req.ip);\n\n    const authHeader = req.headers.authorization;\n    const token = authHeader && authHeader.split(' ')[1]; // Bearer TOKEN\n\n    if (!token) {\n      return res.status(401).json({\n        error: 'Access token required',\n        code: 'AUTH_TOKEN_MISSING',\n      });\n    }\n\n    // Verify token\n    jwt.verify(token, process.env.JWT_SECRET || 'your-jwt-secret', async (err, decoded) => {\n      if (err) {\n        logger.warn('JWT verification failed', {\n          error: err.message,\n          ip: req.ip,\n          userAgent: req.get('User-Agent'),\n        });\n\n        return res.status(403).json({\n          error: 'Invalid or expired token',\n          code: 'AUTH_TOKEN_INVALID',\n        });\n      }\n\n      // Attach user info to request\n      req.user = {\n        id: decoded.userId,\n        role: decoded.role || 'admin',\n        permissions: decoded.permissions || [],\n      };\n\n      // Log successful authentication\n      logger.info('User authenticated', {\n        userId: req.user.id,\n        role: req.user.role,\n        ip: req.ip,\n        endpoint: req.path,\n        method: req.method,\n      });\n\n      next();\n    });\n  } catch (rateLimitError) {\n    logger.warn('Auth rate limit exceeded', {\n      ip: req.ip,\n      endpoint: req.path,\n    });\n\n    return res.status(429).json({\n      error: 'Too many authentication attempts',\n      code: 'AUTH_RATE_LIMIT',\n    });\n  }\n};\n\n/**\n * Role-based Authorization Middleware\n * Checks if user has required role/permission\n */\nconst authorize =\n  (requiredRole, requiredPermissions = []) =>\n  (req, res, next) => {\n    if (!req.user) {\n      return res.status(401).json({\n        error: 'Authentication required',\n        code: 'AUTH_REQUIRED',\n      });\n    }\n\n    const userRole = req.user.role;\n    const userPermissions = req.user.permissions || [];\n\n    // Check role hierarchy (admin > moderator > viewer)\n    const roleHierarchy = {\n      viewer: 1,\n      moderator: 2,\n      admin: 3,\n      superadmin: 4,\n    };\n\n    const userRoleLevel = roleHierarchy[userRole] || 0;\n    const requiredRoleLevel = roleHierarchy[requiredRole] || 0;\n\n    // Check if user has sufficient role level\n    if (userRoleLevel < requiredRoleLevel) {\n      logger.warn('Insufficient role permissions', {\n        userId: req.user.id,\n        userRole,\n        requiredRole,\n        endpoint: req.path,\n      });\n\n      return res.status(403).json({\n        error: 'Insufficient permissions',\n        code: 'AUTH_INSUFFICIENT_ROLE',\n      });\n    }\n\n    // Check specific permissions if required\n    if (requiredPermissions.length > 0) {\n      const hasAllPermissions = requiredPermissions.every(permission =>\n        userPermissions.includes(permission)\n      );\n\n      if (!hasAllPermissions) {\n        logger.warn('Missing required permissions', {\n          userId: req.user.id,\n          userPermissions,\n          requiredPermissions,\n          endpoint: req.path,\n        });\n\n        return res.status(403).json({\n          error: 'Missing required permissions',\n          code: 'AUTH_MISSING_PERMISSIONS',\n        });\n      }\n    }\n\n    next();\n  };\n\n/**\n * Admin-only middleware\n */\nconst requireAdmin = authorize('admin');\n\n/**\n * Moderator or higher middleware\n */\nconst requireModerator = authorize('moderator');\n\n/**\n * Super admin only middleware\n */\nconst requireSuperAdmin = authorize('superadmin');\n\n/**\n * Permission-based middleware factory\n */\nconst requirePermission = permission => authorize('viewer', [permission]);\n\n/**\n * Optional authentication middleware\n * Attaches user info if token is present, but doesn't fail if missing\n */\nconst optionalAuth = async (req, res, next) => {\n  try {\n    const authHeader = req.headers.authorization;\n    const token = authHeader && authHeader.split(' ')[1];\n\n    if (token) {\n      jwt.verify(token, process.env.JWT_SECRET || 'your-jwt-secret', (err, decoded) => {\n        if (!err) {\n          req.user = {\n            id: decoded.userId,\n            role: decoded.role || 'viewer',\n            permissions: decoded.permissions || [],\n          };\n        }\n      });\n    }\n\n    next();\n  } catch (error) {\n    // Silently fail for optional auth\n    next();\n  }\n};\n\n/**\n * API Key authentication for service-to-service calls\n */\nconst authenticateApiKey = (req, res, next) => {\n  const apiKey = req.headers['x-api-key'] || req.query.apiKey;\n\n  if (!apiKey) {\n    return res.status(401).json({\n      error: 'API key required',\n      code: 'API_KEY_MISSING',\n    });\n  }\n\n  // Verify API key (implement your key verification logic)\n  const validKeys = process.env.VALID_API_KEYS ? process.env.VALID_API_KEYS.split(',') : [];\n\n  if (!validKeys.includes(apiKey)) {\n    logger.warn('Invalid API key used', {\n      ip: req.ip,\n      endpoint: req.path,\n      providedKey: `${apiKey.substring(0, 8)}...`, // Log partial key for debugging\n    });\n\n    return res.status(403).json({\n      error: 'Invalid API key',\n      code: 'API_KEY_INVALID',\n    });\n  }\n\n  req.apiKey = apiKey;\n  next();\n};\n\nmodule.exports = {\n  authenticateToken,\n  authorize,\n  requireAdmin,\n  requireModerator,\n  requireSuperAdmin,\n  requirePermission,\n  optionalAuth,\n  authenticateApiKey,\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\middleware\\botMode.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":1,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":7}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"module.exports = async (ctx, context) => {\n  const { database } = context;\n  const { isGroup, isOwner, userDb } = ctx;\n\n  const botDb = await database.bot.get();\n\n  if (botDb?.mode === 'group' && !isGroup() && !isOwner && !userDb?.premium) return false;\n  if (botDb?.mode === 'private' && isGroup() && !isOwner && !userDb?.premium) return false;\n  if (botDb?.mode === 'self' && !isOwner) return false;\n\n  return true;\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\middleware\\cooldown.js","messages":[{"ruleId":"class-methods-use-this","severity":2,"message":"Expected 'this' to be used by class method 'getSenderJid'.","line":10,"column":3,"nodeType":"FunctionExpression","messageId":"missingThis","endLine":10,"endColumn":15},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":48,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":48,"endColumn":7}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const COOLDOWN_SECONDS = 10; // Cooldown period in seconds\nconst cooldowns = new Map(); // Map<userId, Map<command, timestamp>>\n\nclass Cooldown {\n  constructor() {\n    this.COOLDOWN_SECONDS = COOLDOWN_SECONDS;\n    this.cooldowns = cooldowns;\n  }\n\n  getSenderJid(msg) {\n    if (!msg.key.remoteJid) return null;\n    return msg.key.fromMe ? msg.key.remoteJid : msg.participant || msg.key.remoteJid;\n  }\n\n  async checkAndApplyCooldown(sock, msg) {\n    const senderJid = this.getSenderJid(msg);\n    if (!senderJid) return false; // Cannot determine sender, skip cooldown\n\n    const messageContent =\n      msg.message?.conversation || msg.message?.extendedTextMessage?.text || '';\n    const command = messageContent.split(' ')[0]?.toLowerCase(); // Simple command extraction\n\n    if (!command) return false; // No command found, skip cooldown\n\n    // Initialize user's cooldown map if it doesn't exist\n    if (!this.cooldowns.has(senderJid)) {\n      this.cooldowns.set(senderJid, new Map());\n    }\n\n    const userCooldowns = this.cooldowns.get(senderJid);\n    const lastUsed = userCooldowns.get(command);\n    const now = Date.now();\n\n    if (lastUsed && now - lastUsed < this.COOLDOWN_SECONDS * 1000) {\n      const remainingTime = Math.ceil((this.COOLDOWN_SECONDS * 1000 - (now - lastUsed)) / 1000);\n      await sock.sendMessage(senderJid, {\n        text: `Please wait ${remainingTime} seconds before using the '${command}' command again.`,\n      });\n      return true; // Indicate that the message was handled (cooldown triggered)\n    }\n\n    // Update cooldown for the command\n    userCooldowns.set(command, now);\n    return false; // Indicate that the message should proceed to other handlers\n  }\n}\n\nmodule.exports = { Cooldown };\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\middleware\\didYouMean.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":1,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":7}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"module.exports = async (ctx, context) => {\n  const { formatter, config } = context;\n  const { isCmd } = ctx;\n\n  if (isCmd?.didyoumean) {\n    await ctx.reply({\n      text: formatter.quote(\n        `ðŸ§ Did you mean ${formatter.inlineCode(isCmd.prefix + isCmd.didyoumean)}?`\n      ),\n      footer: config.msg.footer,\n      buttons: [\n        {\n          buttonId: `${isCmd.prefix + isCmd.didyoumean} ${isCmd.input}`,\n          buttonText: {\n            displayText: \"Yes, that's right!\",\n          },\n        },\n      ],\n    });\n  }\n\n  return true;\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\middleware\\errorHandler.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":16,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":23},{"ruleId":"no-unused-vars","severity":1,"message":"'next' is defined but never used. Allowed unused args must match /^_/u.","line":6,"column":38,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":42,"suggestions":[{"messageId":"removeVar","data":{"varName":"next"},"fix":{"range":[127,133],"text":""},"desc":"Remove unused variable 'next'."}]},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":53,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":53,"endColumn":14},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":62,"column":9,"nodeType":"Identifier","messageId":"undef","endLine":62,"endColumn":16},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":156,"column":13,"nodeType":"Identifier","messageId":"undef","endLine":156,"endColumn":20},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":157,"column":13,"nodeType":"Identifier","messageId":"undef","endLine":157,"endColumn":20},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":158,"column":14,"nodeType":"Identifier","messageId":"undef","endLine":158,"endColumn":21},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":162,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":162,"endColumn":7}],"suppressedMessages":[],"errorCount":7,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const logger = require('../src/utils/logger');\n\n/**\n * Global error handling middleware\n */\nconst errorHandler = (err, req, res, next) => {\n  // Log the error\n  logger.error('Unhandled error', {\n    error: err.message,\n    stack: err.stack,\n    url: req.url,\n    method: req.method,\n    ip: req.ip,\n    userAgent: req.get('User-Agent'),\n    userId: req.user?.id,\n    body: req.method !== 'GET' ? req.body : undefined,\n    query: req.query,\n    params: req.params,\n  });\n\n  // Determine error type and status code\n  let statusCode = 500;\n  let errorCode = 'INTERNAL_ERROR';\n  let message = 'Internal server error';\n\n  if (err.name === 'ValidationError') {\n    // Zod validation error\n    statusCode = 400;\n    errorCode = 'VALIDATION_ERROR';\n    message = 'Invalid request data';\n  } else if (err.name === 'UnauthorizedError') {\n    // JWT error\n    statusCode = 401;\n    errorCode = 'AUTH_ERROR';\n    message = 'Authentication failed';\n  } else if (err.code === 'P2002') {\n    // Prisma unique constraint error\n    statusCode = 409;\n    errorCode = 'CONFLICT_ERROR';\n    message = 'Resource already exists';\n  } else if (err.code === 'P2025') {\n    // Prisma not found error\n    statusCode = 404;\n    errorCode = 'NOT_FOUND';\n    message = 'Resource not found';\n  } else if (err.message.includes('rate limit')) {\n    statusCode = 429;\n    errorCode = 'RATE_LIMIT_ERROR';\n    message = 'Too many requests';\n  }\n\n  // Don't expose internal errors in production\n  if (process.env.NODE_ENV === 'production' && statusCode === 500) {\n    message = 'Something went wrong';\n  }\n\n  // Send error response\n  res.status(statusCode).json({\n    error: message,\n    code: errorCode,\n    timestamp: new Date().toISOString(),\n    ...(process.env.NODE_ENV === 'development' && {\n      stack: err.stack,\n      details: err.message,\n    }),\n  });\n};\n\n/**\n * Async error wrapper for route handlers\n */\nconst asyncHandler = fn => (req, res, next) => {\n  Promise.resolve(fn(req, res, next)).catch(next);\n};\n\n/**\n * Create custom error class\n */\nclass AppError extends Error {\n  constructor(message, statusCode = 500, errorCode = 'INTERNAL_ERROR') {\n    super(message);\n    this.statusCode = statusCode;\n    this.errorCode = errorCode;\n    this.isOperational = true;\n\n    Error.captureStackTrace(this, this.constructor);\n  }\n}\n\n/**\n * Validation error handler\n */\nconst handleValidationError = error => {\n  if (error.name === 'ZodError') {\n    const errors = error.errors.map(err => ({\n      field: err.path.join('.'),\n      message: err.message,\n      code: err.code,\n    }));\n\n    return new AppError('Validation failed', 400, 'VALIDATION_ERROR', { errors });\n  }\n\n  return error;\n};\n\n/**\n * Database error handler\n */\nconst handleDatabaseError = error => {\n  if (error.code === 'P2002') {\n    return new AppError('Resource already exists', 409, 'CONFLICT_ERROR');\n  }\n\n  if (error.code === 'P2025') {\n    return new AppError('Resource not found', 404, 'NOT_FOUND');\n  }\n\n  if (error.code === 'P1001') {\n    return new AppError('Database connection failed', 503, 'DATABASE_ERROR');\n  }\n\n  return new AppError('Database operation failed', 500, 'DATABASE_ERROR');\n};\n\n/**\n * Authentication error handler\n */\nconst handleAuthError = error => {\n  if (error.name === 'JsonWebTokenError') {\n    return new AppError('Invalid token', 401, 'AUTH_TOKEN_INVALID');\n  }\n\n  if (error.name === 'TokenExpiredError') {\n    return new AppError('Token expired', 401, 'AUTH_TOKEN_EXPIRED');\n  }\n\n  return new AppError('Authentication failed', 401, 'AUTH_ERROR');\n};\n\n/**\n * 404 Not Found handler\n */\nconst notFoundHandler = (req, res, next) => {\n  const error = new AppError(`Route ${req.originalUrl} not found`, 404, 'NOT_FOUND');\n  next(error);\n};\n\n/**\n * Health check error handler\n */\nconst handleHealthCheck = (req, res) => {\n  res.status(200).json({\n    status: 'ok',\n    timestamp: new Date().toISOString(),\n    uptime: process.uptime(),\n    memory: process.memoryUsage(),\n    version: process.env.npm_package_version || '1.0.0',\n  });\n};\n\nmodule.exports = {\n  errorHandler,\n  asyncHandler,\n  AppError,\n  handleValidationError,\n  handleDatabaseError,\n  handleAuthError,\n  notFoundHandler,\n  handleHealthCheck,\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\middleware\\groupMute.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":1,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":7}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"module.exports = async ctx => {\n  const { isGroup, sender, isOwner, isAdmin, groupDb } = ctx;\n\n  if (isGroup) {\n    if (groupDb?.mutebot === true && !isOwner && !isAdmin) return false;\n    if (groupDb?.mutebot === 'owner' && !isOwner) return false;\n    const muteList = groupDb?.mute || [];\n    if (muteList.includes(sender.id)) {\n      await ctx.deleteMessage(ctx.msg.key);\n      return false;\n    }\n  }\n\n  return true;\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\middleware\\inputValidation.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":22},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":40,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":40,"endColumn":7},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":78,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":78,"endColumn":20,"suggestions":[{"fix":{"range":[1887,1946],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const { z } = require('zod');\n\n// Define Zod schemas for key commands\nconst schemas = new Map([\n  // Downloader: youtubevideo - validate URL\n  [\n    'youtubevideo',\n    z.object({\n      url: z\n        .string()\n        .url()\n        .startsWith('https://www.youtube.com/')\n        .or(z.string().url().startsWith('https://youtu.be/')),\n    }),\n  ],\n  // AI chat: chatgpt - validate prompt length\n  [\n    'chatgpt',\n    z.object({\n      prompt: z.string().min(1).max(2000),\n    }),\n  ],\n  // General text commands: max length\n  [\n    'proverb',\n    z.object({\n      query: z.string().max(500),\n    }),\n  ],\n  // Add more as needed, e.g., for other downloaders or AI\n  [\n    'tiktokdl',\n    z.object({\n      url: z.string().url().startsWith('https://www.tiktok.com/'),\n    }),\n  ],\n  // Default for unknown: no validation\n]);\n\nmodule.exports = async (ctx, context) => {\n  const { database } = context;\n  const commandName = ctx.used.command;\n  const schema = schemas.get(commandName);\n\n  if (!schema) {\n    // No schema for this command, allow\n    return true;\n  }\n\n  // Parse input based on command\n  let input;\n  switch (commandName) {\n    case 'youtubevideo':\n    case 'tiktokdl':\n      input = { url: ctx.args[0] || '' };\n      break;\n    case 'chatgpt':\n    case 'proverb':\n      input = { prompt: ctx.args.join(' '), query: ctx.args.join(' ') };\n      break;\n    default:\n      input = { args: ctx.args.join(' ') };\n  }\n\n  const result = schema.safeParse(input);\n  if (!result.success) {\n    // Log to AuditLog\n    try {\n      await database.auditLog.create({\n        eventType: 'input_validation_fail',\n        actor: ctx.sender.jid,\n        action: `Invalid input for command ${commandName}`,\n        details: JSON.stringify(result.error.errors),\n        riskLevel: 'medium',\n        ipAddress: ctx.ipAddress || 'unknown', // If available\n      });\n    } catch (logError) {\n      console.error('Failed to log validation error:', logError);\n    }\n\n    // Reply error to user\n    const errorMsg = `Invalid input for ${ctx.used.prefix}${commandName}. Please check your arguments. Error: ${result.error.message}`;\n    await ctx.reply(errorMsg);\n\n    return false; // Block command execution\n  }\n\n  // Valid input\n  return true;\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\middleware\\maliciousMessage.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":28,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":35},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":3,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":3,"endColumn":7},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":13,"column":45,"nodeType":"Identifier","messageId":"undef","endLine":13,"endColumn":52}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const { analyzeMessage } = require('guaranteed_security');\n\nmodule.exports = async (ctx, context) => {\n  const { database, formatter, config } = context;\n  const { sender, msg } = ctx;\n\n  const analyze = analyzeMessage(msg.message);\n  if (analyze.isMalicious) {\n    await ctx.deleteMessage(msg.key);\n    await ctx.block(sender.jid);\n    await database.user.update(sender.id, { banned: true });\n\n    await ctx.sendMessage(config.owner.id + require('@whiskeysockets/baileys').S_WHATSAPP_NET, {\n      text: `ðŸ“¢ Account @${sender.id} has been automatically blocked for the reason ${formatter.inlineCode(analyze.reason)}.`,\n      mentions: [sender.jid],\n    });\n    return false;\n  }\n\n  return true;\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\middleware\\menfess.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":28,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":35},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":3,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":3,"endColumn":7},{"ruleId":"no-restricted-syntax","severity":2,"message":"iterators/generators require regenerator-runtime, which is too heavyweight for this guide to allow them. Separately, loops should be avoided in favor of array iterations.","line":10,"column":7,"nodeType":"ForOfStatement","messageId":"restrictedSyntax","endLine":24,"endColumn":8},{"ruleId":"no-await-in-loop","severity":2,"message":"Unexpected `await` inside a loop.","line":15,"column":13,"nodeType":"AwaitExpression","messageId":"unexpectedAwait","endLine":15,"endColumn":39},{"ruleId":"no-await-in-loop","severity":2,"message":"Unexpected `await` inside a loop.","line":16,"column":13,"nodeType":"AwaitExpression","messageId":"unexpectedAwait","endLine":18,"endColumn":15},{"ruleId":"no-await-in-loop","severity":2,"message":"Unexpected `await` inside a loop.","line":19,"column":13,"nodeType":"AwaitExpression","messageId":"unexpectedAwait","endLine":19,"endColumn":53},{"ruleId":"no-await-in-loop","severity":2,"message":"Unexpected `await` inside a loop.","line":21,"column":13,"nodeType":"AwaitExpression","messageId":"unexpectedAwait","endLine":21,"endColumn":52}],"suppressedMessages":[],"errorCount":7,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const { S_WHATSAPP_NET } = require('@whiskeysockets/baileys');\n\nmodule.exports = async (ctx, context) => {\n  const { database, formatter } = context;\n  const { isPrivate, sender, isCmd, msg, m } = ctx;\n\n  if (isPrivate) {\n    const allMenfessDb = await database.menfess.getAll();\n    if (!isCmd || isCmd?.didyoumean) {\n      for (const [menfessId, { from, to }] of Object.entries(allMenfessDb)) {\n        if (sender.id === from || sender.id === to) {\n          const targetId = sender.id === from ? to : from + S_WHATSAPP_NET;\n          if (m.content === 'delete') {\n            const replyText = formatter.quote('âœ… Menfess session has been deleted!');\n            await ctx.reply(replyText);\n            await ctx.sendMessage(targetId, {\n              text: replyText,\n            });\n            await database.menfess.delete(menfessId);\n          } else {\n            await ctx.forwardMessage(targetId, msg);\n          }\n        }\n      }\n    }\n  }\n\n  return true;\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\middleware\\nightMode.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":16,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":23},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":3,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":3,"endColumn":7}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const moment = require('moment-timezone');\n\nmodule.exports = async (ctx, context) => {\n  const { config } = context;\n  const { isOwner, userDb } = ctx;\n\n  const now = moment().tz(config.system.timeZone);\n  const hour = now.hour();\n  if (hour >= 0 && hour < 6 && !isOwner && !userDb?.premium) return false;\n\n  return true;\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\middleware\\rateLimiter.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":3,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":3,"endColumn":7}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const userRequests = new Map();\n\nmodule.exports = async (ctx, { config }) => {\n  const now = Date.now();\n  const senderJid = ctx.sender.jid;\n  const lastRequest = userRequests.get(senderJid);\n\n  if (lastRequest && now - lastRequest < config.system.cooldown) {\n    await ctx.reply(config.msg.cooldown);\n    return false; // Block the command\n  }\n\n  userRequests.set(senderJid, now);\n  return true; // Proceed with the command\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\playwright.config.js","messages":[{"ruleId":"import-x/no-extraneous-dependencies","severity":2,"message":"'@playwright/test' should be listed in the project's dependencies, not devDependencies.","line":1,"column":21,"nodeType":"CallExpression","messageId":"devDep","endLine":1,"endColumn":48},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":21,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":28},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":7,"column":17,"nodeType":"Identifier","messageId":"undef","endLine":7,"endColumn":24},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":8,"column":12,"nodeType":"Identifier","messageId":"undef","endLine":8,"endColumn":19},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":9,"column":12,"nodeType":"Identifier","messageId":"undef","endLine":9,"endColumn":19},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":60,"column":27,"nodeType":"Identifier","messageId":"undef","endLine":60,"endColumn":34},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":64,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":64,"endColumn":7}],"suppressedMessages":[],"errorCount":7,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const { devices } = require('@playwright/test');\n\n/** @type {import('@playwright/test').PlaywrightTestConfig} */\nconst config = {\n  testDir: './tests/e2e',\n  fullyParallel: true,\n  forbidOnly: !!process.env.CI,\n  retries: process.env.CI ? 2 : 0,\n  workers: process.env.CI ? 1 : undefined,\n  reporter: 'html',\n  use: {\n    baseURL: 'http://localhost:3000',\n    trace: 'on-first-retry',\n  },\n\n  projects: [\n    {\n      name: 'chromium',\n      use: { ...devices['Desktop Chrome'] },\n    },\n\n    {\n      name: 'firefox',\n      use: { ...devices['Desktop Firefox'] },\n    },\n\n    {\n      name: 'webkit',\n      use: { ...devices['Desktop Safari'] },\n    },\n\n    /* Test against mobile viewports. */\n    {\n      name: 'Mobile Chrome',\n      use: { ...devices['Pixel 5'] },\n    },\n    {\n      name: 'Mobile Safari',\n      use: { ...devices['iPhone 12'] },\n    },\n\n    /* Test against branded browsers. */\n    {\n      name: 'Microsoft Edge',\n      use: { ...devices['Desktop Edge'], channel: 'msedge' },\n    },\n    {\n      name: 'Google Chrome',\n      use: { ...devices['Desktop Chrome'], channel: 'chrome' },\n    },\n  ],\n\n  /* Folder for test artifacts such as screenshots, videos, traces, etc. */\n  // outputDir: 'test-results/',\n\n  /* Run your local dev server before starting the tests */\n  webServer: {\n    command: 'npm run dev',\n    url: 'http://localhost:3000',\n    reuseExistingServer: !process.env.CI,\n  },\n};\n\nmodule.exports = config;\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\registry\\hello-world.tsx","messages":[{"ruleId":null,"nodeType":null,"fatal":true,"severity":2,"message":"Parsing error: w:\\CodeDeX\\WhatsDeX\\registry\\hello-world.tsx was not found by the project service. Consider either including it in the tsconfig.json or including it in allowDefaultProject."}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":1,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"export function HelloWorld() {\r\n  return <h1 className=\"text-2xl font-bold\">Hello World</h1>\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\routes\\analytics.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":17,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":24},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":2,"column":37,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":44},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":3,"column":36,"nodeType":"Identifier","messageId":"undef","endLine":3,"endColumn":43},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":4,"column":30,"nodeType":"Identifier","messageId":"undef","endLine":4,"endColumn":37},{"ruleId":"no-unused-vars","severity":1,"message":"'logger' is assigned a value but never used.","line":5,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":5,"endColumn":13,"suggestions":[{"messageId":"removeVar","data":{"varName":"logger"},"fix":{"range":[236,282],"text":""},"desc":"Remove unused variable 'logger'."}]},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":5,"column":16,"nodeType":"Identifier","messageId":"undef","endLine":5,"endColumn":23},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":10,"column":26,"nodeType":"Identifier","messageId":"undef","endLine":10,"endColumn":33},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":363,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":363,"endColumn":7}],"suppressedMessages":[],"errorCount":7,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const express = require('express');\nconst { query, validationResult } = require('express-validator');\nconst { asyncHandler, AppError } = require('../middleware/errorHandler');\nconst { requireModerator } = require('../middleware/auth');\nconst logger = require('../src/utils/logger');\n\nconst router = express.Router();\n\n// Import services (will be created)\nconst analyticsService = require('../src/services/analyticsService');\n\n/**\n * GET /api/analytics/overview\n * Get system overview analytics\n */\nrouter.get(\n  '/overview',\n  requireModerator,\n  [query('startDate').optional().isISO8601(), query('endDate').optional().isISO8601()],\n  asyncHandler(async (req, res) => {\n    const errors = validationResult(req);\n    if (!errors.isEmpty()) {\n      throw new AppError('Validation failed', 400, 'VALIDATION_ERROR');\n    }\n\n    const { startDate, endDate } = req.query;\n    const overview = await analyticsService.getSystemOverview({ startDate, endDate });\n\n    res.json({\n      success: true,\n      data: overview,\n    });\n  })\n);\n\n/**\n * GET /api/analytics/users\n * Get user analytics and metrics\n */\nrouter.get(\n  '/users',\n  requireModerator,\n  [\n    query('startDate').optional().isISO8601(),\n    query('endDate').optional().isISO8601(),\n    query('groupBy').optional().isIn(['day', 'week', 'month']),\n  ],\n  asyncHandler(async (req, res) => {\n    const errors = validationResult(req);\n    if (!errors.isEmpty()) {\n      throw new AppError('Validation failed', 400, 'VALIDATION_ERROR');\n    }\n\n    const { startDate, endDate, groupBy = 'day' } = req.query;\n    const userAnalytics = await analyticsService.getUserAnalytics({ startDate, endDate, groupBy });\n\n    res.json({\n      success: true,\n      data: userAnalytics,\n    });\n  })\n);\n\n/**\n * GET /api/analytics/commands\n * Get command usage analytics\n */\nrouter.get(\n  '/commands',\n  requireModerator,\n  [\n    query('startDate').optional().isISO8601(),\n    query('endDate').optional().isISO8601(),\n    query('limit').optional().isInt({ min: 1, max: 100 }).toInt(),\n  ],\n  asyncHandler(async (req, res) => {\n    const errors = validationResult(req);\n    if (!errors.isEmpty()) {\n      throw new AppError('Validation failed', 400, 'VALIDATION_ERROR');\n    }\n\n    const { startDate, endDate, limit = 20 } = req.query;\n    const commandAnalytics = await analyticsService.getCommandAnalytics({\n      startDate,\n      endDate,\n      limit,\n    });\n\n    res.json({\n      success: true,\n      data: commandAnalytics,\n    });\n  })\n);\n\n/**\n * GET /api/analytics/ai-usage\n * Get AI usage analytics\n */\nrouter.get(\n  '/ai-usage',\n  requireModerator,\n  [\n    query('startDate').optional().isISO8601(),\n    query('endDate').optional().isISO8601(),\n    query('groupBy').optional().isIn(['day', 'week', 'month']),\n  ],\n  asyncHandler(async (req, res) => {\n    const errors = validationResult(req);\n    if (!errors.isEmpty()) {\n      throw new AppError('Validation failed', 400, 'VALIDATION_ERROR');\n    }\n\n    const { startDate, endDate, groupBy = 'day' } = req.query;\n    const aiAnalytics = await analyticsService.getAIUsageAnalytics({ startDate, endDate, groupBy });\n\n    res.json({\n      success: true,\n      data: aiAnalytics,\n    });\n  })\n);\n\n/**\n * GET /api/analytics/revenue\n * Get revenue and monetization analytics\n */\nrouter.get(\n  '/revenue',\n  requireModerator,\n  [\n    query('startDate').optional().isISO8601(),\n    query('endDate').optional().isISO8601(),\n    query('groupBy').optional().isIn(['day', 'week', 'month']),\n  ],\n  asyncHandler(async (req, res) => {\n    const errors = validationResult(req);\n    if (!errors.isEmpty()) {\n      throw new AppError('Validation failed', 400, 'VALIDATION_ERROR');\n    }\n\n    const { startDate, endDate, groupBy = 'month' } = req.query;\n    const revenueAnalytics = await analyticsService.getRevenueAnalytics({\n      startDate,\n      endDate,\n      groupBy,\n    });\n\n    res.json({\n      success: true,\n      data: revenueAnalytics,\n    });\n  })\n);\n\n/**\n * GET /api/analytics/moderation\n * Get moderation analytics\n */\nrouter.get(\n  '/moderation',\n  requireModerator,\n  [\n    query('startDate').optional().isISO8601(),\n    query('endDate').optional().isISO8601(),\n    query('groupBy').optional().isIn(['day', 'week', 'month']),\n  ],\n  asyncHandler(async (req, res) => {\n    const errors = validationResult(req);\n    if (!errors.isEmpty()) {\n      throw new AppError('Validation failed', 400, 'VALIDATION_ERROR');\n    }\n\n    const { startDate, endDate, groupBy = 'day' } = req.query;\n    const moderationAnalytics = await analyticsService.getModerationAnalytics({\n      startDate,\n      endDate,\n      groupBy,\n    });\n\n    res.json({\n      success: true,\n      data: moderationAnalytics,\n    });\n  })\n);\n\n/**\n * GET /api/analytics/performance\n * Get system performance analytics\n */\nrouter.get(\n  '/performance',\n  requireModerator,\n  [\n    query('startDate').optional().isISO8601(),\n    query('endDate').optional().isISO8601(),\n    query('metrics').optional().isArray(),\n  ],\n  asyncHandler(async (req, res) => {\n    const errors = validationResult(req);\n    if (!errors.isEmpty()) {\n      throw new AppError('Validation failed', 400, 'VALIDATION_ERROR');\n    }\n\n    const { startDate, endDate, metrics } = req.query;\n    const performanceAnalytics = await analyticsService.getPerformanceAnalytics({\n      startDate,\n      endDate,\n      metrics: metrics || ['responseTime', 'cpuUsage', 'memoryUsage', 'errorRate'],\n    });\n\n    res.json({\n      success: true,\n      data: performanceAnalytics,\n    });\n  })\n);\n\n/**\n * GET /api/analytics/geographic\n * Get geographic distribution analytics\n */\nrouter.get(\n  '/geographic',\n  requireModerator,\n  [\n    query('startDate').optional().isISO8601(),\n    query('endDate').optional().isISO8601(),\n    query('metric').optional().isIn(['users', 'commands', 'revenue']),\n  ],\n  asyncHandler(async (req, res) => {\n    const errors = validationResult(req);\n    if (!errors.isEmpty()) {\n      throw new AppError('Validation failed', 400, 'VALIDATION_ERROR');\n    }\n\n    const { startDate, endDate, metric = 'users' } = req.query;\n    const geographicAnalytics = await analyticsService.getGeographicAnalytics({\n      startDate,\n      endDate,\n      metric,\n    });\n\n    res.json({\n      success: true,\n      data: geographicAnalytics,\n    });\n  })\n);\n\n/**\n * GET /api/analytics/real-time\n * Get real-time analytics data\n */\nrouter.get(\n  '/real-time',\n  requireModerator,\n  asyncHandler(async (req, res) => {\n    const realTimeData = await analyticsService.getRealTimeAnalytics();\n\n    res.json({\n      success: true,\n      data: realTimeData,\n      timestamp: new Date().toISOString(),\n    });\n  })\n);\n\n/**\n * GET /api/analytics/export\n * Export analytics data\n */\nrouter.get(\n  '/export',\n  requireModerator,\n  [\n    query('type').isIn([\n      'overview',\n      'users',\n      'commands',\n      'ai-usage',\n      'revenue',\n      'moderation',\n      'performance',\n    ]),\n    query('format').optional().isIn(['json', 'csv']),\n    query('startDate').optional().isISO8601(),\n    query('endDate').optional().isISO8601(),\n  ],\n  asyncHandler(async (req, res) => {\n    const errors = validationResult(req);\n    if (!errors.isEmpty()) {\n      throw new AppError('Validation failed', 400, 'VALIDATION_ERROR');\n    }\n\n    const { type, format = 'json', startDate, endDate } = req.query;\n\n    const exportData = await analyticsService.exportAnalytics(type, { startDate, endDate, format });\n\n    const timestamp = new Date().toISOString().replace(/[:.]/g, '-');\n    const filename = `analytics_${type}_${timestamp}.${format}`;\n\n    if (format === 'json') {\n      res.setHeader('Content-Type', 'application/json');\n      res.setHeader('Content-Disposition', `attachment; filename=\"${filename}\"`);\n      res.json(exportData);\n    } else {\n      res.setHeader('Content-Type', 'text/csv');\n      res.setHeader('Content-Disposition', `attachment; filename=\"${filename}\"`);\n      res.send(exportData);\n    }\n  })\n);\n\n/**\n * GET /api/analytics/dashboard\n * Get dashboard analytics summary\n */\nrouter.get(\n  '/dashboard',\n  requireModerator,\n  asyncHandler(async (req, res) => {\n    const dashboardData = await analyticsService.getDashboardAnalytics();\n\n    res.json({\n      success: true,\n      data: dashboardData,\n    });\n  })\n);\n\n/**\n * GET /api/analytics/trends\n * Get trending analytics data\n */\nrouter.get(\n  '/trends',\n  requireModerator,\n  [\n    query('period').optional().isIn(['7d', '30d', '90d', '1y']),\n    query('metrics').optional().isArray(),\n  ],\n  asyncHandler(async (req, res) => {\n    const errors = validationResult(req);\n    if (!errors.isEmpty()) {\n      throw new AppError('Validation failed', 400, 'VALIDATION_ERROR');\n    }\n\n    const { period = '30d', metrics } = req.query;\n    const trendsData = await analyticsService.getTrendsAnalytics({\n      period,\n      metrics: metrics || ['users', 'commands', 'revenue', 'errors'],\n    });\n\n    res.json({\n      success: true,\n      data: trendsData,\n    });\n  })\n);\n\nmodule.exports = router;\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\routes\\audit.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":17,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":24},{"ruleId":"no-unused-vars","severity":1,"message":"'param' is assigned a value but never used.","line":2,"column":16,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":21,"suggestions":[{"messageId":"removeVar","data":{"varName":"param"},"fix":{"range":[49,56],"text":""},"desc":"Remove unused variable 'param'."}]},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":2,"column":44,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":51},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":3,"column":36,"nodeType":"Identifier","messageId":"undef","endLine":3,"endColumn":43},{"ruleId":"no-unused-vars","severity":1,"message":"'requireAdmin' is assigned a value but never used.","line":4,"column":27,"nodeType":"Identifier","messageId":"unusedVar","endLine":4,"endColumn":39,"suggestions":[{"messageId":"removeVar","data":{"varName":"requireAdmin"},"fix":{"range":[207,221],"text":""},"desc":"Remove unused variable 'requireAdmin'."}]},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":4,"column":44,"nodeType":"Identifier","messageId":"undef","endLine":4,"endColumn":51},{"ruleId":"no-unused-vars","severity":1,"message":"'logger' is assigned a value but never used.","line":5,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":5,"endColumn":13,"suggestions":[{"messageId":"removeVar","data":{"varName":"logger"},"fix":{"range":[257,303],"text":""},"desc":"Remove unused variable 'logger'."}]},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":5,"column":16,"nodeType":"Identifier","messageId":"undef","endLine":5,"endColumn":23},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":10,"column":22,"nodeType":"Identifier","messageId":"undef","endLine":10,"endColumn":29},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":83,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":83,"endColumn":7}],"suppressedMessages":[],"errorCount":7,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const express = require('express');\nconst { query, param, validationResult } = require('express-validator');\nconst { asyncHandler, AppError } = require('../middleware/errorHandler');\nconst { requireModerator, requireAdmin } = require('../middleware/auth');\nconst logger = require('../src/utils/logger');\n\nconst router = express.Router();\n\n// Import services (will be created)\nconst auditService = require('../src/services/auditService');\n\n/**\n * GET /api/audit\n * Get audit logs with filtering and pagination\n */\nrouter.get(\n  '/',\n  requireModerator,\n  [\n    query('page').optional().isInt({ min: 1 }).toInt(),\n    query('limit').optional().isInt({ min: 1, max: 100 }).toInt(),\n    query('eventType').optional().isString(),\n    query('actor').optional().isString(),\n    query('actorId').optional().isString(),\n    query('resource').optional().isString(),\n    query('resourceId').optional().isString(),\n    query('riskLevel').optional().isIn(['low', 'medium', 'high', 'critical']),\n    query('startDate').optional().isISO8601(),\n    query('endDate').optional().isISO8601(),\n    query('sortBy').optional().isIn(['createdAt', 'eventType', 'actor', 'riskLevel']),\n    query('sortOrder').optional().isIn(['asc', 'desc']),\n  ],\n  asyncHandler(async (req, res) => {\n    const errors = validationResult(req);\n    if (!errors.isEmpty()) {\n      throw new AppError('Validation failed', 400, 'VALIDATION_ERROR');\n    }\n\n    const {\n      page = 1,\n      limit = 50,\n      eventType,\n      actor,\n      actorId,\n      resource,\n      resourceId,\n      riskLevel,\n      startDate,\n      endDate,\n      sortBy = 'createdAt',\n      sortOrder = 'desc',\n    } = req.query;\n\n    const filters = {\n      eventType,\n      actor,\n      actorId,\n      resource,\n      resourceId,\n      riskLevel,\n      startDate,\n      endDate,\n      sortBy,\n      sortOrder,\n    };\n\n    const result = await auditService.getAuditLogs(filters, { page, limit });\n\n    res.json({\n      success: true,\n      data: result.logs,\n      pagination: {\n        page,\n        limit,\n        total: result.total,\n        totalPages: Math.ceil(result.total / limit),\n      },\n      filters,\n    });\n  })\n);\n\nmodule.exports = router;\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\routes\\auth.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":17,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":24},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":4,"column":26,"nodeType":"Identifier","messageId":"undef","endLine":4,"endColumn":33},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":5,"column":32,"nodeType":"Identifier","messageId":"undef","endLine":5,"endColumn":39},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":6,"column":17,"nodeType":"Identifier","messageId":"undef","endLine":6,"endColumn":24},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":11,"column":18,"nodeType":"Identifier","messageId":"undef","endLine":11,"endColumn":25},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":75,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":75,"endColumn":20,"suggestions":[{"fix":{"range":[2313,2371],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'voiceEnabled' is assigned a value but never used.","line":132,"column":28,"nodeType":"Identifier","messageId":"unusedVar","endLine":132,"endColumn":40,"suggestions":[{"messageId":"removeVar","data":{"varName":"voiceEnabled"},"fix":{"range":[3658,3680],"text":""},"desc":"Remove unused variable 'voiceEnabled'."}]},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async arrow function.","line":236,"column":45,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":236,"endColumn":47},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async arrow function.","line":270,"column":50,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":270,"endColumn":52},{"ruleId":"no-underscore-dangle","severity":2,"message":"Unexpected dangling '_' in '_avg'.","line":329,"column":32,"nodeType":"MemberExpression","messageId":"unexpectedUnderscore","endLine":329,"endColumn":54},{"ruleId":"no-unused-vars","severity":1,"message":"'req' is defined but never used. Allowed unused args must match /^_/u.","line":390,"column":25,"nodeType":"Identifier","messageId":"unusedVar","endLine":390,"endColumn":28,"suggestions":[{"messageId":"removeVar","data":{"varName":"req"},"fix":{"range":[9802,9807],"text":""},"desc":"Remove unused variable 'req'."}]},{"ruleId":"default-case","severity":2,"message":"Expected a default case.","line":406,"column":9,"nodeType":"SwitchStatement","messageId":"missingDefaultCase","endLine":428,"endColumn":10},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":430,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":430,"endColumn":22,"suggestions":[{"fix":{"range":[10751,10800],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":441,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":441,"endColumn":20,"suggestions":[{"fix":{"range":[10978,11019],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":447,"column":3,"nodeType":"MemberExpression","messageId":"unexpected","endLine":447,"endColumn":15,"suggestions":[{"fix":{"range":[11144,11258],"text":""},"messageId":"removeConsole","data":{"propertyName":"warn"},"desc":"Remove the console.warn()."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'accessibilityUsed' is assigned a value but never used.","line":584,"column":46,"nodeType":"Identifier","messageId":"unusedVar","endLine":584,"endColumn":63,"suggestions":[{"messageId":"removeVar","data":{"varName":"accessibilityUsed"},"fix":{"range":[14617,14644],"text":""},"desc":"Remove unused variable 'accessibilityUsed'."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":622,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":622,"endColumn":18,"suggestions":[{"fix":{"range":[15566,15626],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":627,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":627,"endColumn":8},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":632,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":632,"endColumn":8},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async arrow function.","line":638,"column":41,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":638,"endColumn":43},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":646,"column":17,"nodeType":"Identifier","messageId":"undef","endLine":646,"endColumn":24},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":647,"column":39,"nodeType":"Identifier","messageId":"undef","endLine":647,"endColumn":46},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":652,"column":9,"nodeType":"Identifier","messageId":"undef","endLine":652,"endColumn":16},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":653,"column":32,"nodeType":"Identifier","messageId":"undef","endLine":653,"endColumn":39},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":654,"column":41,"nodeType":"Identifier","messageId":"undef","endLine":654,"endColumn":48},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":669,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":669,"endColumn":7}],"suppressedMessages":[],"errorCount":18,"fatalErrorCount":0,"warningCount":8,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const express = require('express');\n\nconst router = express.Router();\nconst UnifiedSmartAuth = require('../src/services/auth/UnifiedSmartAuth');\nconst AutoReconnectionEngine = require('../src/services/autoReconnectionEngine');\nconst context = require('../context');\n\n// Initialize services\nconst unifiedAuth = new UnifiedSmartAuth({\n  bot: {\n    phoneNumber: process.env.BOT_PHONE_NUMBER || '1234567890',\n    authAdapter: {\n      default: {\n        authDir: './auth_info_baileys',\n      },\n    },\n  },\n});\nconst reconnectionEngine = new AutoReconnectionEngine();\n\n// Persistent session storage via Prisma\nlet connectionStatus = {\n  status: 'disconnected',\n  qrCode: null,\n  pairingCode: null,\n  retryCount: 0,\n  connectionTime: 0,\n  progress: 0,\n  sessionId: null,\n};\n\n// WebSocket connections for real-time updates\nconst webSocketClients = new Set();\n\n// Broadcast to all connected WebSocket clients\nconst broadcast = (event, data) => {\n  webSocketClients.forEach(client => {\n    if (client.readyState === 1) {\n      // OPEN\n      client.send(JSON.stringify({ event, data }));\n    }\n  });\n};\n\n// Update connection status and broadcast with database persistence\nconst updateConnectionStatus = async (status, additionalData = {}) => {\n  connectionStatus = { ...connectionStatus, ...status, ...additionalData };\n\n  // Persist session data to database\n  if (connectionStatus.sessionId) {\n    try {\n      await context.database.userSession.upsert({\n        where: { id: connectionStatus.sessionId },\n        update: {\n          status: connectionStatus.status,\n          qrCode: connectionStatus.qrCode,\n          pairingCode: connectionStatus.pairingCode,\n          retryCount: connectionStatus.retryCount,\n          connectionTime: connectionStatus.connectionTime,\n          progress: connectionStatus.progress,\n          updatedAt: new Date(),\n        },\n        create: {\n          id: connectionStatus.sessionId,\n          userId: 'system', // System session for bot\n          status: connectionStatus.status,\n          qrCode: connectionStatus.qrCode,\n          pairingCode: connectionStatus.pairingCode,\n          retryCount: connectionStatus.retryCount,\n          connectionTime: connectionStatus.connectionTime,\n          progress: connectionStatus.progress,\n        },\n      });\n    } catch (error) {\n      console.error('Failed to persist session status:', error);\n    }\n  }\n\n  broadcast('connection_status', connectionStatus);\n};\n\n// API Routes\n\n/**\n * GET /api/auth/status\n * Get current authentication status\n */\nrouter.get('/status', async (req, res) => {\n  try {\n    // Load latest session data from database\n    if (connectionStatus.sessionId) {\n      const sessionData = await context.database.userSession.findUnique({\n        where: { id: connectionStatus.sessionId },\n      });\n      if (sessionData) {\n        connectionStatus = {\n          ...connectionStatus,\n          status: sessionData.status,\n          qrCode: sessionData.qrCode,\n          pairingCode: sessionData.pairingCode,\n          retryCount: sessionData.retryCount,\n          connectionTime: sessionData.connectionTime,\n          progress: sessionData.progress,\n        };\n      }\n    }\n\n    res.json({\n      success: true,\n      data: {\n        ...connectionStatus,\n        analytics: {\n          reconnectionStats: reconnectionEngine.getStats(),\n        },\n      },\n    });\n  } catch (error) {\n    res.status(500).json({\n      success: false,\n      message: 'Failed to retrieve status',\n      error: error.message,\n    });\n  }\n});\n\n/**\n * POST /api/auth/start\n * Start authentication process\n */\nrouter.post('/start', async (req, res) => {\n  try {\n    const { method = 'qr', voiceEnabled = false, phoneNumber } = req.body;\n\n    // Create session ID for persistence\n    const sessionId = `session_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n    connectionStatus.sessionId = sessionId;\n\n    // Update status to connecting\n    await updateConnectionStatus({\n      status: 'connecting',\n      retryCount: 0,\n      connectionTime: 0,\n      progress: 10,\n    });\n\n    if (method === 'qr') {\n      // Generate real QR code using UnifiedSmartAuth\n      await unifiedAuth.connect();\n      const qrCode = await unifiedAuth.getQRCode();\n\n      await updateConnectionStatus({\n        qrCode,\n        progress: 30,\n      });\n\n      // Listen for connection events\n      unifiedAuth.once('connected', async () => {\n        await updateConnectionStatus({\n          status: 'connected',\n          progress: 100,\n          connectionTime: Date.now(),\n        });\n      });\n    } else if (method === 'pairing') {\n      // Generate real pairing code using UnifiedSmartAuth\n      await unifiedAuth.connect();\n      const pairingCode = await unifiedAuth.getPairingCode(phoneNumber);\n\n      await updateConnectionStatus({\n        pairingCode,\n        progress: 30,\n      });\n\n      // Listen for connection events\n      unifiedAuth.once('connected', async () => {\n        await updateConnectionStatus({\n          status: 'connected',\n          progress: 100,\n          connectionTime: Date.now(),\n        });\n      });\n    }\n\n    res.json({\n      success: true,\n      message: 'Authentication process started',\n      data: { method, sessionId },\n    });\n  } catch (error) {\n    await updateConnectionStatus({\n      status: 'error',\n      error: error.message,\n    });\n\n    res.status(500).json({\n      success: false,\n      message: 'Failed to start authentication',\n      error: error.message,\n    });\n  }\n});\n\n/**\n * POST /api/auth/stop\n * Stop authentication process\n */\nrouter.post('/stop', async (req, res) => {\n  try {\n    // Disconnect from WhatsApp\n    await unifiedAuth.disconnect();\n\n    await updateConnectionStatus({\n      status: 'disconnected',\n      qrCode: null,\n      pairingCode: null,\n      progress: 0,\n    });\n\n    res.json({\n      success: true,\n      message: 'Authentication process stopped',\n    });\n  } catch (error) {\n    res.status(500).json({\n      success: false,\n      message: 'Failed to stop authentication',\n      error: error.message,\n    });\n  }\n});\n\n/**\n * POST /api/auth/refresh-qr\n * Refresh QR code\n */\nrouter.post('/refresh-qr', async (req, res) => {\n  try {\n    // Get fresh QR code from UnifiedSmartAuth\n    const newQR = await unifiedAuth.getQRCode();\n\n    if (!newQR) {\n      return res.status(400).json({\n        success: false,\n        message: 'Unable to generate new QR code',\n      });\n    }\n\n    await updateConnectionStatus({\n      qrCode: newQR,\n    });\n\n    res.json({\n      success: true,\n      message: 'QR code refreshed',\n      data: newQR,\n    });\n  } catch (error) {\n    res.status(500).json({\n      success: false,\n      message: 'Failed to refresh QR code',\n      error: error.message,\n    });\n  }\n});\n\n/**\n * POST /api/auth/refresh-pairing\n * Refresh pairing code\n */\nrouter.post('/refresh-pairing', async (req, res) => {\n  try {\n    const { phoneNumber } = req.body;\n\n    if (!phoneNumber) {\n      return res.status(400).json({\n        success: false,\n        message: 'Phone number is required',\n      });\n    }\n\n    const newPairingCode = await unifiedAuth.getPairingCode(phoneNumber);\n\n    await updateConnectionStatus({\n      pairingCode: newPairingCode,\n    });\n\n    res.json({\n      success: true,\n      message: 'Pairing code refreshed',\n      data: newPairingCode,\n    });\n  } catch (error) {\n    res.status(500).json({\n      success: false,\n      message: 'Failed to refresh pairing code',\n      error: error.message,\n    });\n  }\n});\n\n/**\n * GET /api/auth/analytics\n * Get authentication analytics\n */\nrouter.get('/analytics', async (req, res) => {\n  try {\n    // Get real analytics from database\n    const totalConnections = await context.database.userSession.count({\n      where: { status: 'connected' },\n    });\n\n    const successfulConnections = await context.database.userSession.count({\n      where: {\n        status: 'connected',\n        connectionTime: { not: null },\n      },\n    });\n\n    const avgConnectionTime = await context.database.userSession.aggregate({\n      _avg: { connectionTime: true },\n      where: { connectionTime: { not: null } },\n    });\n\n    const analytics = {\n      reconnectionStats: reconnectionEngine.getStats(),\n      overall: {\n        totalConnections,\n        successRate: totalConnections > 0 ? (successfulConnections / totalConnections) * 100 : 0,\n        averageConnectionTime: avgConnectionTime._avg.connectionTime || 0,\n        activeConnections: connectionStatus.status === 'connected' ? 1 : 0,\n      },\n    };\n\n    res.json({\n      success: true,\n      data: analytics,\n    });\n  } catch (error) {\n    res.status(500).json({\n      success: false,\n      message: 'Failed to retrieve analytics',\n      error: error.message,\n    });\n  }\n});\n\n/**\n * POST /api/auth/disconnect\n * Handle disconnection\n */\nrouter.post('/disconnect', async (req, res) => {\n  try {\n    const { reason = 'manual' } = req.body;\n\n    // Disconnect from WhatsApp first\n    await unifiedAuth.disconnect();\n\n    // Trigger reconnection engine with real network monitoring\n    await reconnectionEngine.handleDisconnection(reason, {\n      networkType: 'unknown', // Could be detected from system\n      deviceType: 'server',\n      userActivity: 'manual_disconnect',\n    });\n\n    await updateConnectionStatus({\n      status: 'disconnected',\n      qrCode: null,\n      pairingCode: null,\n      progress: 0,\n    });\n\n    res.json({\n      success: true,\n      message: 'Disconnection handled, reconnection initiated',\n    });\n  } catch (error) {\n    res.status(500).json({\n      success: false,\n      message: 'Failed to handle disconnection',\n      error: error.message,\n    });\n  }\n});\n\n/**\n * WebSocket upgrade handler\n * Guarded with defensive check for router.ws availability\n */\nif (typeof router.ws === 'function') {\n  router.ws('/ws', (ws, req) => {\n    webSocketClients.add(ws);\n\n    // Send initial status\n    ws.send(\n      JSON.stringify({\n        event: 'connection_status',\n        data: connectionStatus,\n      })\n    );\n\n    // Handle client messages\n    ws.on('message', message => {\n      try {\n        const data = JSON.parse(message.toString());\n\n        switch (data.type) {\n          case 'get_status':\n            ws.send(\n              JSON.stringify({\n                event: 'connection_status',\n                data: connectionStatus,\n              })\n            );\n            break;\n\n          case 'start_connection':\n            // Handle connection start via WebSocket\n            break;\n\n          case 'stop_connection':\n            updateConnectionStatus({\n              status: 'disconnected',\n              qrCode: null,\n              pairingCode: null,\n              progress: 0,\n            });\n            break;\n        }\n      } catch (error) {\n        console.error('WebSocket message error:', error);\n      }\n    });\n\n    // Handle client disconnect\n    ws.on('close', () => {\n      webSocketClients.delete(ws);\n    });\n\n    // Handle errors\n    ws.on('error', error => {\n      console.error('WebSocket error:', error);\n      webSocketClients.delete(ws);\n    });\n  });\n} else {\n  // Fallback: WebSocket not available, router.ws not supported\n  console.warn(\n    'WebSocket support not available for auth router. Consider using socket.io as alternative.'\n  );\n}\n\n/**\n * GET /api/auth/qr-stats\n * Get QR code statistics from database\n */\nrouter.get('/qr-stats', async (req, res) => {\n  try {\n    const qrSessions = await context.database.userSession.findMany({\n      where: { qrCode: { not: null } },\n      select: {\n        createdAt: true,\n        updatedAt: true,\n        status: true,\n      },\n    });\n\n    const stats = {\n      totalGenerated: qrSessions.length,\n      successfulScans: qrSessions.filter(s => s.status === 'connected').length,\n      averageGenerationTime: 0, // Could calculate from timestamps\n      lastGenerated: qrSessions[qrSessions.length - 1]?.createdAt || null,\n    };\n\n    res.json({\n      success: true,\n      data: stats,\n    });\n  } catch (error) {\n    res.status(500).json({\n      success: false,\n      message: 'Failed to retrieve QR stats',\n      error: error.message,\n    });\n  }\n});\n\n/**\n * GET /api/auth/pairing-stats\n * Get pairing code statistics from database\n */\nrouter.get('/pairing-stats', async (req, res) => {\n  try {\n    const pairingSessions = await context.database.userSession.findMany({\n      where: { pairingCode: { not: null } },\n      select: {\n        createdAt: true,\n        updatedAt: true,\n        status: true,\n      },\n    });\n\n    const stats = {\n      totalGenerated: pairingSessions.length,\n      successfulUses: pairingSessions.filter(s => s.status === 'connected').length,\n      averageGenerationTime: 0, // Could calculate from timestamps\n      lastGenerated: pairingSessions[pairingSessions.length - 1]?.createdAt || null,\n    };\n\n    res.json({\n      success: true,\n      data: stats,\n    });\n  } catch (error) {\n    res.status(500).json({\n      success: false,\n      message: 'Failed to retrieve pairing stats',\n      error: error.message,\n    });\n  }\n});\n\n/**\n * GET /api/auth/reconnection-stats\n * Get reconnection engine statistics\n */\nrouter.get('/reconnection-stats', (req, res) => {\n  res.json({\n    success: true,\n    data: reconnectionEngine.getStats(),\n  });\n});\n\n/**\n * POST /api/auth/validate-pairing\n * Validate pairing code (now handled by UnifiedSmartAuth events)\n */\nrouter.post('/validate-pairing', (req, res) => {\n  // Pairing code validation is now handled automatically by UnifiedSmartAuth\n  // This endpoint is kept for backward compatibility\n  res.json({\n    success: true,\n    message: 'Pairing code validation is handled automatically',\n    data: { valid: true, autoValidated: true },\n  });\n});\n\n/**\n * POST /api/auth/record-scan\n * Record QR code scan (now handled automatically)\n */\nrouter.post('/record-scan', async (req, res) => {\n  try {\n    const { qrId, success = true, scanTime } = req.body;\n\n    // Record scan event in database\n    await context.database.userSession.updateMany({\n      where: { qrCode: qrId },\n      data: {\n        status: success ? 'connected' : 'failed',\n        connectionTime: success ? scanTime : null,\n        updatedAt: new Date(),\n      },\n    });\n\n    res.json({\n      success: true,\n      message: 'Scan recorded successfully',\n    });\n  } catch (error) {\n    res.status(500).json({\n      success: false,\n      message: 'Failed to record scan',\n      error: error.message,\n    });\n  }\n});\n\n/**\n * POST /api/auth/record-usage\n * Record pairing code usage (now handled automatically)\n */\nrouter.post('/record-usage', async (req, res) => {\n  try {\n    const { codeId, success = true, useTime, accessibilityUsed = false } = req.body;\n\n    // Record usage event in database\n    await context.database.userSession.updateMany({\n      where: { pairingCode: codeId },\n      data: {\n        status: success ? 'connected' : 'failed',\n        connectionTime: success ? useTime : null,\n        updatedAt: new Date(),\n      },\n    });\n\n    res.json({\n      success: true,\n      message: 'Usage recorded successfully',\n    });\n  } catch (error) {\n    res.status(500).json({\n      success: false,\n      message: 'Failed to record usage',\n      error: error.message,\n    });\n  }\n});\n\n// Cleanup expired sessions periodically\nsetInterval(async () => {\n  try {\n    // Clean up old disconnected sessions\n    await context.database.userSession.deleteMany({\n      where: {\n        status: 'disconnected',\n        updatedAt: {\n          lt: new Date(Date.now() - 24 * 60 * 60 * 1000), // Older than 24 hours\n        },\n      },\n    });\n  } catch (error) {\n    console.error('Failed to cleanup expired sessions:', error);\n  }\n}, 60000); // Every minute\n\n// Graceful shutdown\nprocess.on('SIGINT', async () => {\n  await unifiedAuth.disconnect();\n  await reconnectionEngine.shutdown();\n});\n\nprocess.on('SIGTERM', async () => {\n  await unifiedAuth.disconnect();\n  await reconnectionEngine.shutdown();\n});\n\n// Single enhanced logout endpoint for session invalidation\nrouter.post('/logout', async (req, res) => {\n  try {\n    const authHeader = req.headers.authorization;\n    const token = authHeader && authHeader.split(' ')[1];\n    if (!token) {\n      return res.status(401).json({ error: 'Access token required' });\n    }\n\n    const jwt = require('jsonwebtoken');\n    const decoded = jwt.verify(token, process.env.JWT_SECRET || 'your-jwt-secret');\n    const sessionId = decoded.sessionId || `session_${decoded.userId}`;\n\n    const invalidTokens = new Set(); // Fallback in-memory\n\n    if (process.env.REDIS_URL) {\n      const { createClient } = require('redis');\n      const redis = createClient({ url: process.env.REDIS_URL });\n      await redis.connect();\n      await redis.del(sessionId);\n      await redis.setEx(`invalid_token:${token}`, 3600, '1'); // 1h expiration\n      await redis.quit();\n    } else {\n      invalidTokens.add(token);\n    }\n\n    res.json({ success: true, message: 'Session invalidated' });\n  } catch (error) {\n    res.status(500).json({ error: 'Logout failed', message: error.message });\n  }\n});\n\nmodule.exports = router;\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\routes\\moderation.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":17,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":24},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":2,"column":50,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":57},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":3,"column":36,"nodeType":"Identifier","messageId":"undef","endLine":3,"endColumn":43},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":4,"column":44,"nodeType":"Identifier","messageId":"undef","endLine":4,"endColumn":51},{"ruleId":"no-unused-vars","severity":1,"message":"'logger' is assigned a value but never used.","line":5,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":5,"endColumn":13,"suggestions":[{"messageId":"removeVar","data":{"varName":"logger"},"fix":{"range":[263,309],"text":""},"desc":"Remove unused variable 'logger'."}]},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":5,"column":16,"nodeType":"Identifier","messageId":"undef","endLine":5,"endColumn":23},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":10,"column":27,"nodeType":"Identifier","messageId":"undef","endLine":10,"endColumn":34},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":11,"column":21,"nodeType":"Identifier","messageId":"undef","endLine":11,"endColumn":28},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":465,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":465,"endColumn":7}],"suppressedMessages":[],"errorCount":8,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const express = require('express');\nconst { body, param, query, validationResult } = require('express-validator');\nconst { asyncHandler, AppError } = require('../middleware/errorHandler');\nconst { requireModerator, requireAdmin } = require('../middleware/auth');\nconst logger = require('../src/utils/logger');\n\nconst router = express.Router();\n\n// Import services (will be created)\nconst moderationService = require('../src/services/moderationService');\nconst auditLogger = require('../src/services/auditLogger');\n\n/**\n * GET /api/moderation/queue\n * Get moderation queue with filtering\n */\nrouter.get(\n  '/queue',\n  requireModerator,\n  [\n    query('page').optional().isInt({ min: 1 }).toInt(),\n    query('limit').optional().isInt({ min: 1, max: 100 }).toInt(),\n    query('status').optional().isIn(['pending', 'approved', 'rejected', 'escalated']),\n    query('priority').optional().isIn(['low', 'normal', 'high', 'urgent']),\n    query('contentType').optional().isIn(['message', 'image', 'file', 'profile']),\n    query('sortBy').optional().isIn(['createdAt', 'priority', 'contentType']),\n    query('sortOrder').optional().isIn(['asc', 'desc']),\n  ],\n  asyncHandler(async (req, res) => {\n    const errors = validationResult(req);\n    if (!errors.isEmpty()) {\n      throw new AppError('Validation failed', 400, 'VALIDATION_ERROR');\n    }\n\n    const {\n      page = 1,\n      limit = 50,\n      status = 'pending',\n      priority,\n      contentType,\n      sortBy = 'createdAt',\n      sortOrder = 'desc',\n    } = req.query;\n\n    const filters = {\n      status,\n      priority,\n      contentType,\n      sortBy,\n      sortOrder,\n    };\n\n    const result = await moderationService.getModerationQueue(filters, { page, limit });\n\n    res.json({\n      success: true,\n      data: result.items,\n      pagination: {\n        page,\n        limit,\n        total: result.total,\n        totalPages: Math.ceil(result.total / limit),\n      },\n      filters,\n    });\n  })\n);\n\n/**\n * GET /api/moderation/queue/:id\n * Get specific moderation queue item\n */\nrouter.get(\n  '/queue/:id',\n  requireModerator,\n  [param('id').isString().notEmpty()],\n  asyncHandler(async (req, res) => {\n    const errors = validationResult(req);\n    if (!errors.isEmpty()) {\n      throw new AppError('Invalid moderation queue ID', 400, 'VALIDATION_ERROR');\n    }\n\n    const { id } = req.params;\n    const item = await moderationService.getModerationQueueItem(id);\n\n    if (!item) {\n      throw new AppError('Moderation queue item not found', 404, 'NOT_FOUND');\n    }\n\n    res.json({\n      success: true,\n      data: item,\n    });\n  })\n);\n\n/**\n * POST /api/moderation/queue/:id/review\n * Review a moderation queue item\n */\nrouter.post(\n  '/queue/:id/review',\n  requireModerator,\n  [\n    param('id').isString().notEmpty(),\n    body('action').isIn(['approve', 'reject', 'escalate']),\n    body('reason').optional().isString().trim(),\n    body('notes').optional().isString().trim(),\n  ],\n  asyncHandler(async (req, res) => {\n    const errors = validationResult(req);\n    if (!errors.isEmpty()) {\n      throw new AppError('Validation failed', 400, 'VALIDATION_ERROR');\n    }\n\n    const { id } = req.params;\n    const { action, reason, notes } = req.body;\n\n    const result = await moderationService.reviewModerationItem(id, {\n      action,\n      reason,\n      notes,\n      moderatorId: req.user.id,\n    });\n\n    // Log admin action\n    await auditLogger.logEvent({\n      eventType: auditLogger.EVENT_TYPES.ADMIN_USER_MANAGE,\n      actor: req.user.id,\n      actorId: req.user.id,\n      action: `Moderation review: ${action}`,\n      resource: 'moderation_queue',\n      resourceId: id,\n      details: {\n        action,\n        reason,\n        notes,\n        contentType: result.contentType,\n        userId: result.userId,\n      },\n      riskLevel:\n        action === 'escalate' ? auditLogger.RISK_LEVELS.HIGH : auditLogger.RISK_LEVELS.MEDIUM,\n      ipAddress: req.ip,\n      userAgent: req.get('User-Agent'),\n    });\n\n    res.json({\n      success: true,\n      data: result,\n      message: `Item ${action}d successfully`,\n    });\n  })\n);\n\n/**\n * POST /api/moderation/bulk-review\n * Bulk review moderation queue items\n */\nrouter.post(\n  '/bulk-review',\n  requireModerator,\n  [\n    body('itemIds').isArray({ min: 1 }),\n    body('itemIds.*').isString().notEmpty(),\n    body('action').isIn(['approve', 'reject', 'escalate']),\n    body('reason').optional().isString().trim(),\n    body('notes').optional().isString().trim(),\n  ],\n  asyncHandler(async (req, res) => {\n    const errors = validationResult(req);\n    if (!errors.isEmpty()) {\n      throw new AppError('Validation failed', 400, 'VALIDATION_ERROR');\n    }\n\n    const { itemIds, action, reason, notes } = req.body;\n\n    const result = await moderationService.bulkReviewModerationItems(itemIds, {\n      action,\n      reason,\n      notes,\n      moderatorId: req.user.id,\n    });\n\n    // Log admin action\n    await auditLogger.logEvent({\n      eventType: auditLogger.EVENT_TYPES.ADMIN_USER_MANAGE,\n      actor: req.user.id,\n      actorId: req.user.id,\n      action: `Bulk moderation review: ${action}`,\n      resource: 'moderation_queue',\n      details: {\n        action,\n        itemCount: itemIds.length,\n        successfulCount: result.successful.length,\n        failedCount: result.failed.length,\n        reason,\n        notes,\n      },\n      riskLevel: auditLogger.RISK_LEVELS.HIGH,\n      ipAddress: req.ip,\n      userAgent: req.get('User-Agent'),\n    });\n\n    res.json({\n      success: true,\n      data: result,\n      message: `Bulk review completed: ${result.successful.length} successful, ${result.failed.length} failed`,\n    });\n  })\n);\n\n/**\n * GET /api/moderation/statistics\n * Get moderation statistics\n */\nrouter.get(\n  '/statistics',\n  requireModerator,\n  [query('startDate').optional().isISO8601(), query('endDate').optional().isISO8601()],\n  asyncHandler(async (req, res) => {\n    const errors = validationResult(req);\n    if (!errors.isEmpty()) {\n      throw new AppError('Validation failed', 400, 'VALIDATION_ERROR');\n    }\n\n    const { startDate, endDate } = req.query;\n    const stats = await moderationService.getModerationStatistics({ startDate, endDate });\n\n    res.json({\n      success: true,\n      data: stats,\n    });\n  })\n);\n\n/**\n * GET /api/moderation/user-violations/:userId\n * Get violation history for a specific user\n */\nrouter.get(\n  '/user-violations/:userId',\n  requireModerator,\n  [\n    param('userId').isString().notEmpty(),\n    query('page').optional().isInt({ min: 1 }).toInt(),\n    query('limit').optional().isInt({ min: 1, max: 100 }).toInt(),\n    query('status').optional().isIn(['active', 'expired', 'appealed']),\n  ],\n  asyncHandler(async (req, res) => {\n    const errors = validationResult(req);\n    if (!errors.isEmpty()) {\n      throw new AppError('Validation failed', 400, 'VALIDATION_ERROR');\n    }\n\n    const { userId } = req.params;\n    const { page = 1, limit = 50, status } = req.query;\n\n    const result = await moderationService.getUserViolations(userId, { status }, { page, limit });\n\n    res.json({\n      success: true,\n      data: result.violations,\n      pagination: {\n        page,\n        limit,\n        total: result.total,\n        totalPages: Math.ceil(result.total / limit),\n      },\n      user: {\n        id: userId,\n        totalViolations: result.total,\n      },\n    });\n  })\n);\n\n/**\n * POST /api/moderation/user-violations/:userId\n * Add a violation for a user\n */\nrouter.post(\n  '/user-violations/:userId',\n  requireModerator,\n  [\n    param('userId').isString().notEmpty(),\n    body('violationType').isIn([\n      'hate_speech',\n      'violence',\n      'spam',\n      'harassment',\n      'bullying',\n      'discrimination',\n      'self_harm',\n      'illegal_activities',\n    ]),\n    body('severity').isIn(['low', 'medium', 'high', 'critical']),\n    body('reason').isString().trim().isLength({ min: 1, max: 500 }),\n    body('evidence').optional().isString(),\n    body('action').isIn(['warn', 'ban', 'delete', 'none']),\n    body('duration').optional().isInt({ min: 1 }), // duration in hours\n    body('notes').optional().isString().trim(),\n  ],\n  asyncHandler(async (req, res) => {\n    const errors = validationResult(req);\n    if (!errors.isEmpty()) {\n      throw new AppError('Validation failed', 400, 'VALIDATION_ERROR');\n    }\n\n    const { userId } = req.params;\n    const violationData = {\n      ...req.body,\n      moderatorId: req.user.id,\n    };\n\n    const violation = await moderationService.addUserViolation(userId, violationData);\n\n    // Log admin action\n    await auditLogger.logEvent({\n      eventType: auditLogger.EVENT_TYPES.ADMIN_USER_MANAGE,\n      actor: req.user.id,\n      actorId: req.user.id,\n      action: 'Added user violation',\n      resource: 'user_violation',\n      resourceId: violation.id,\n      details: {\n        userId,\n        violationType: violationData.violationType,\n        severity: violationData.severity,\n        action: violationData.action,\n        duration: violationData.duration,\n        reason: violationData.reason,\n      },\n      riskLevel: auditLogger.RISK_LEVELS.HIGH,\n      ipAddress: req.ip,\n      userAgent: req.get('User-Agent'),\n    });\n\n    res.status(201).json({\n      success: true,\n      data: violation,\n      message: 'Violation added successfully',\n    });\n  })\n);\n\n/**\n * PUT /api/moderation/user-violations/:violationId\n * Update a user violation\n */\nrouter.put(\n  '/user-violations/:violationId',\n  requireModerator,\n  [\n    param('violationId').isString().notEmpty(),\n    body('status').optional().isIn(['active', 'expired', 'appealed']),\n    body('notes').optional().isString().trim(),\n  ],\n  asyncHandler(async (req, res) => {\n    const errors = validationResult(req);\n    if (!errors.isEmpty()) {\n      throw new AppError('Validation failed', 400, 'VALIDATION_ERROR');\n    }\n\n    const { violationId } = req.params;\n    const updateData = req.body;\n\n    const updatedViolation = await moderationService.updateUserViolation(violationId, updateData);\n\n    if (!updatedViolation) {\n      throw new AppError('Violation not found', 404, 'NOT_FOUND');\n    }\n\n    // Log admin action\n    await auditLogger.logEvent({\n      eventType: auditLogger.EVENT_TYPES.ADMIN_USER_MANAGE,\n      actor: req.user.id,\n      actorId: req.user.id,\n      action: 'Updated user violation',\n      resource: 'user_violation',\n      resourceId: violationId,\n      details: {\n        changes: updateData,\n        violationType: updatedViolation.violationType,\n        userId: updatedViolation.userId,\n      },\n      riskLevel: auditLogger.RISK_LEVELS.MEDIUM,\n      ipAddress: req.ip,\n      userAgent: req.get('User-Agent'),\n    });\n\n    res.json({\n      success: true,\n      data: updatedViolation,\n      message: 'Violation updated successfully',\n    });\n  })\n);\n\n/**\n * GET /api/moderation/settings\n * Get moderation settings\n */\nrouter.get(\n  '/settings',\n  requireAdmin,\n  asyncHandler(async (req, res) => {\n    const settings = await moderationService.getModerationSettings();\n\n    res.json({\n      success: true,\n      data: settings,\n    });\n  })\n);\n\n/**\n * PUT /api/moderation/settings\n * Update moderation settings\n */\nrouter.put(\n  '/settings',\n  requireAdmin,\n  [\n    body('contentModerationEnabled').optional().isBoolean(),\n    body('autoModeration').optional().isBoolean(),\n    body('moderationThreshold').optional().isFloat({ min: 0, max: 1 }),\n    body('bannedWords').optional().isArray(),\n    body('maxMessageLength').optional().isInt({ min: 1 }),\n    body('rateLimitEnabled').optional().isBoolean(),\n    body('spamDetectionEnabled').optional().isBoolean(),\n  ],\n  asyncHandler(async (req, res) => {\n    const errors = validationResult(req);\n    if (!errors.isEmpty()) {\n      throw new AppError('Validation failed', 400, 'VALIDATION_ERROR');\n    }\n\n    const settings = req.body;\n    const updatedSettings = await moderationService.updateModerationSettings(settings);\n\n    // Log admin action\n    await auditLogger.logEvent({\n      eventType: auditLogger.EVENT_TYPES.ADMIN_SYSTEM_CONFIG,\n      actor: req.user.id,\n      actorId: req.user.id,\n      action: 'Updated moderation settings',\n      resource: 'moderation_settings',\n      details: {\n        settings: Object.keys(settings),\n        updatedAt: new Date().toISOString(),\n      },\n      riskLevel: auditLogger.RISK_LEVELS.MEDIUM,\n      ipAddress: req.ip,\n      userAgent: req.get('User-Agent'),\n    });\n\n    res.json({\n      success: true,\n      data: updatedSettings,\n      message: 'Moderation settings updated successfully',\n    });\n  })\n);\n\nmodule.exports = router;\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\routes\\settings.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":17,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":24},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":2,"column":36,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":43},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":3,"column":36,"nodeType":"Identifier","messageId":"undef","endLine":3,"endColumn":43},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":4,"column":26,"nodeType":"Identifier","messageId":"undef","endLine":4,"endColumn":33},{"ruleId":"no-unused-vars","severity":1,"message":"'logger' is assigned a value but never used.","line":5,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":5,"endColumn":13,"suggestions":[{"messageId":"removeVar","data":{"varName":"logger"},"fix":{"range":[231,277],"text":""},"desc":"Remove unused variable 'logger'."}]},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":5,"column":16,"nodeType":"Identifier","messageId":"undef","endLine":5,"endColumn":23},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":10,"column":25,"nodeType":"Identifier","messageId":"undef","endLine":10,"endColumn":32},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":11,"column":21,"nodeType":"Identifier","messageId":"undef","endLine":11,"endColumn":28},{"ruleId":"no-restricted-syntax","severity":2,"message":"iterators/generators require regenerator-runtime, which is too heavyweight for this guide to allow them. Separately, loops should be avoided in favor of array iterations.","line":139,"column":5,"nodeType":"ForOfStatement","messageId":"restrictedSyntax","endLine":153,"endColumn":6},{"ruleId":"no-await-in-loop","severity":2,"message":"Unexpected `await` inside a loop.","line":140,"column":26,"nodeType":"AwaitExpression","messageId":"unexpectedAwait","endLine":144,"endColumn":8},{"ruleId":"no-restricted-syntax","severity":2,"message":"iterators/generators require regenerator-runtime, which is too heavyweight for this guide to allow them. Separately, loops should be avoided in favor of array iterations.","line":162,"column":5,"nodeType":"ForOfStatement","messageId":"restrictedSyntax","endLine":181,"endColumn":6},{"ruleId":"no-unused-vars","severity":1,"message":"'oldSetting' is assigned a value but never used.","line":164,"column":15,"nodeType":"Identifier","messageId":"unusedVar","endLine":164,"endColumn":25,"suggestions":[{"messageId":"removeVar","data":{"varName":"oldSetting"},"fix":{"range":[4152,4235],"text":""},"desc":"Remove unused variable 'oldSetting'."}]},{"ruleId":"no-await-in-loop","severity":2,"message":"Unexpected `await` inside a loop.","line":164,"column":28,"nodeType":"AwaitExpression","messageId":"unexpectedAwait","endLine":164,"endColumn":91},{"ruleId":"no-await-in-loop","severity":2,"message":"Unexpected `await` inside a loop.","line":165,"column":32,"nodeType":"AwaitExpression","messageId":"unexpectedAwait","endLine":171,"endColumn":10},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":211,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":211,"endColumn":7}],"suppressedMessages":[],"errorCount":13,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const express = require('express');\nconst { body, validationResult } = require('express-validator');\nconst { asyncHandler, AppError } = require('../middleware/errorHandler');\nconst { requireAdmin } = require('../middleware/auth');\nconst logger = require('../src/utils/logger');\n\nconst router = express.Router();\n\n// Import services (will be created)\nconst settingsService = require('../src/services/settingsService');\nconst auditLogger = require('../src/services/auditLogger');\n\n/**\n * GET /api/settings\n * Get all system settings\n */\nrouter.get(\n  '/',\n  requireAdmin,\n  asyncHandler(async (req, res) => {\n    const settings = await settingsService.getAllSettings();\n\n    res.json({\n      success: true,\n      data: settings,\n    });\n  })\n);\n\n/**\n * GET /api/settings/:category\n * Get settings for a specific category\n */\nrouter.get(\n  '/:category',\n  requireAdmin,\n  asyncHandler(async (req, res) => {\n    const { category } = req.params;\n    const settings = await settingsService.getSettingsByCategory(category);\n\n    if (!settings || settings.length === 0) {\n      throw new AppError('Settings category not found', 404, 'NOT_FOUND');\n    }\n\n    res.json({\n      success: true,\n      data: settings,\n    });\n  })\n);\n\n/**\n * PUT /api/settings/:category/:key\n * Update a specific setting\n */\nrouter.put(\n  '/:category/:key',\n  requireAdmin,\n  [\n    body('value').exists().withMessage('Value is required'),\n    body('description').optional().isString().trim(),\n  ],\n  asyncHandler(async (req, res) => {\n    const validationErrors = validationResult(req);\n    if (!validationErrors.isEmpty()) {\n      throw new AppError('Validation failed', 400, 'VALIDATION_ERROR');\n    }\n\n    const { category, key } = req.params;\n    const { value, description } = req.body;\n\n    // Validate the setting before updating\n    const validation = await settingsService.validateSetting(category, key, value);\n    if (!validation.valid) {\n      throw new AppError(validation.message, 400, 'VALIDATION_ERROR');\n    }\n\n    const oldSetting = await settingsService.getSetting(category, key);\n    const updatedSetting = await settingsService.updateSetting(\n      category,\n      key,\n      value,\n      description,\n      req.user.id\n    );\n\n    // Log admin action\n    await auditLogger.logEvent({\n      eventType: auditLogger.EVENT_TYPES.ADMIN_SYSTEM_CONFIG,\n      actor: req.user.id,\n      actorId: req.user.id,\n      action: 'Updated system setting',\n      resource: 'setting',\n      resourceId: `${category}.${key}`,\n      details: {\n        category,\n        key,\n        oldValue: oldSetting?.value,\n        newValue: value,\n        description,\n      },\n      riskLevel: auditLogger.RISK_LEVELS.MEDIUM,\n      ipAddress: req.ip,\n      userAgent: req.get('User-Agent'),\n    });\n\n    res.json({\n      success: true,\n      data: updatedSetting,\n      message: 'Setting updated successfully',\n    });\n  })\n);\n\n/**\n * PUT /api/settings/bulk\n * Update multiple settings at once\n */\nrouter.put(\n  '/bulk',\n  requireAdmin,\n  [\n    body('settings').isArray({ min: 1 }),\n    body('settings.*.category').isString().notEmpty(),\n    body('settings.*.key').isString().notEmpty(),\n    body('settings.*.value').exists(),\n  ],\n  asyncHandler(async (req, res) => {\n    const validationErrors = validationResult(req);\n    if (!validationErrors.isEmpty()) {\n      throw new AppError('Validation failed', 400, 'VALIDATION_ERROR');\n    }\n\n    const { settings } = req.body;\n    const results = [];\n    const settingErrors = [];\n\n    // Validate all settings first\n    for (const setting of settings) {\n      const validation = await settingsService.validateSetting(\n        setting.category,\n        setting.key,\n        setting.value\n      );\n\n      if (!validation.valid) {\n        settingErrors.push({\n          category: setting.category,\n          key: setting.key,\n          error: validation.message,\n        });\n      }\n    }\n\n    if (settingErrors.length > 0) {\n      throw new AppError('Some settings failed validation', 400, 'VALIDATION_ERROR', {\n        errors: settingErrors,\n      });\n    }\n\n    // Update all settings\n    for (const setting of settings) {\n      try {\n        const oldSetting = await settingsService.getSetting(setting.category, setting.key);\n        const updatedSetting = await settingsService.updateSetting(\n          setting.category,\n          setting.key,\n          setting.value,\n          setting.description,\n          req.user.id\n        );\n\n        results.push(updatedSetting);\n      } catch (error) {\n        settingErrors.push({\n          category: setting.category,\n          key: setting.key,\n          error: error.message,\n        });\n      }\n    }\n\n    // Log admin action\n    await auditLogger.logEvent({\n      eventType: auditLogger.EVENT_TYPES.ADMIN_SYSTEM_CONFIG,\n      actor: req.user.id,\n      actorId: req.user.id,\n      action: 'Bulk updated system settings',\n      resource: 'settings',\n      details: {\n        updatedCount: results.length,\n        errorCount: settingErrors.length,\n        settings: settings.map(s => `${s.category}.${s.key}`),\n      },\n      riskLevel: auditLogger.RISK_LEVELS.HIGH,\n      ipAddress: req.ip,\n      userAgent: req.get('User-Agent'),\n    });\n\n    res.json({\n      success: true,\n      data: {\n        updated: results,\n        errors: settingErrors,\n      },\n      message: `Updated ${results.length} settings${settingErrors.length > 0 ? `, ${settingErrors.length} failed` : ''}`,\n    });\n  })\n);\n\nmodule.exports = router;\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\routes\\users.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":17,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":24},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":2,"column":50,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":57},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":3,"column":36,"nodeType":"Identifier","messageId":"undef","endLine":3,"endColumn":43},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":4,"column":44,"nodeType":"Identifier","messageId":"undef","endLine":4,"endColumn":51},{"ruleId":"no-unused-vars","severity":1,"message":"'logger' is assigned a value but never used.","line":5,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":5,"endColumn":13,"suggestions":[{"messageId":"removeVar","data":{"varName":"logger"},"fix":{"range":[263,309],"text":""},"desc":"Remove unused variable 'logger'."}]},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":5,"column":16,"nodeType":"Identifier","messageId":"undef","endLine":5,"endColumn":23},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":10,"column":21,"nodeType":"Identifier","messageId":"undef","endLine":10,"endColumn":28},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":11,"column":21,"nodeType":"Identifier","messageId":"undef","endLine":11,"endColumn":28},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":410,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":410,"endColumn":7}],"suppressedMessages":[],"errorCount":8,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const express = require('express');\nconst { body, param, query, validationResult } = require('express-validator');\nconst { asyncHandler, AppError } = require('../middleware/errorHandler');\nconst { requireAdmin, requireModerator } = require('../middleware/auth');\nconst logger = require('../src/utils/logger');\n\nconst router = express.Router();\n\n// Import services (will be created)\nconst userService = require('../src/services/userService');\nconst auditLogger = require('../src/services/auditLogger');\n\n/**\n * GET /api/users\n * Get users with pagination, filtering, and search\n */\nrouter.get(\n  '/',\n  requireModerator,\n  [\n    query('page').optional().isInt({ min: 1 }).toInt(),\n    query('limit').optional().isInt({ min: 1, max: 100 }).toInt(),\n    query('search').optional().isString().trim(),\n    query('status').optional().isIn(['active', 'inactive', 'banned']),\n    query('plan').optional().isIn(['free', 'basic', 'pro', 'enterprise']),\n    query('sortBy').optional().isIn(['name', 'email', 'createdAt', 'lastActivity', 'level']),\n    query('sortOrder').optional().isIn(['asc', 'desc']),\n  ],\n  asyncHandler(async (req, res) => {\n    // Check validation errors\n    const errors = validationResult(req);\n    if (!errors.isEmpty()) {\n      throw new AppError('Validation failed', 400, 'VALIDATION_ERROR');\n    }\n\n    const {\n      page = 1,\n      limit = 20,\n      search,\n      status,\n      plan,\n      sortBy = 'createdAt',\n      sortOrder = 'desc',\n    } = req.query;\n\n    const filters = {\n      search,\n      status,\n      plan,\n      sortBy,\n      sortOrder,\n    };\n\n    const result = await userService.getUsers(filters, { page, limit });\n\n    // Log admin action\n    await auditLogger.logEvent({\n      eventType: auditLogger.EVENT_TYPES.ADMIN_USER_MANAGE,\n      actor: req.user.id,\n      actorId: req.user.id,\n      action: 'Viewed user list',\n      resource: 'users',\n      details: {\n        filters,\n        page,\n        limit,\n        resultCount: result.users.length,\n      },\n      riskLevel: auditLogger.RISK_LEVELS.LOW,\n      ipAddress: req.ip,\n      userAgent: req.get('User-Agent'),\n    });\n\n    res.json({\n      success: true,\n      data: result.users,\n      pagination: {\n        page,\n        limit,\n        total: result.total,\n        totalPages: Math.ceil(result.total / limit),\n      },\n      filters,\n    });\n  })\n);\n\n/**\n * GET /api/users/:id\n * Get user details by ID\n */\nrouter.get(\n  '/:id',\n  requireModerator,\n  [param('id').isString().notEmpty()],\n  asyncHandler(async (req, res) => {\n    const errors = validationResult(req);\n    if (!errors.isEmpty()) {\n      throw new AppError('Invalid user ID', 400, 'VALIDATION_ERROR');\n    }\n\n    const { id } = req.params;\n    const user = await userService.getUserById(id);\n\n    if (!user) {\n      throw new AppError('User not found', 404, 'NOT_FOUND');\n    }\n\n    // Log admin action\n    await auditLogger.logEvent({\n      eventType: auditLogger.EVENT_TYPES.ADMIN_USER_MANAGE,\n      actor: req.user.id,\n      actorId: req.user.id,\n      action: 'Viewed user details',\n      resource: 'user',\n      resourceId: id,\n      details: {\n        userId: id,\n        userName: user.name,\n        userEmail: user.email,\n      },\n      riskLevel: auditLogger.RISK_LEVELS.LOW,\n      ipAddress: req.ip,\n      userAgent: req.get('User-Agent'),\n    });\n\n    res.json({\n      success: true,\n      data: user,\n    });\n  })\n);\n\n/**\n * POST /api/users\n * Create new user\n */\nrouter.post(\n  '/',\n  requireAdmin,\n  [\n    body('name').optional().isString().trim().isLength({ min: 1, max: 100 }),\n    body('email').isEmail().normalizeEmail(),\n    body('phone').optional().isString().trim(),\n    body('plan').optional().isIn(['free', 'basic', 'pro', 'enterprise']),\n    body('premium').optional().isBoolean(),\n    body('premiumExpiry').optional().isISO8601(),\n  ],\n  asyncHandler(async (req, res) => {\n    const errors = validationResult(req);\n    if (!errors.isEmpty()) {\n      throw new AppError('Validation failed', 400, 'VALIDATION_ERROR');\n    }\n\n    const userData = req.body;\n    const newUser = await userService.createUser(userData);\n\n    // Log admin action\n    await auditLogger.logEvent({\n      eventType: auditLogger.EVENT_TYPES.USER_REGISTER,\n      actor: req.user.id,\n      actorId: req.user.id,\n      action: 'Created new user',\n      resource: 'user',\n      resourceId: newUser.id,\n      details: {\n        userData: {\n          name: userData.name,\n          email: userData.email,\n          plan: userData.plan,\n        },\n      },\n      riskLevel: auditLogger.RISK_LEVELS.MEDIUM,\n      ipAddress: req.ip,\n      userAgent: req.get('User-Agent'),\n    });\n\n    res.status(201).json({\n      success: true,\n      data: newUser,\n      message: 'User created successfully',\n    });\n  })\n);\n\n/**\n * PUT /api/users/:id\n * Update user\n */\nrouter.put(\n  '/:id',\n  requireModerator,\n  [\n    param('id').isString().notEmpty(),\n    body('name').optional().isString().trim().isLength({ min: 1, max: 100 }),\n    body('email').optional().isEmail().normalizeEmail(),\n    body('phone').optional().isString().trim(),\n    body('plan').optional().isIn(['free', 'basic', 'pro', 'enterprise']),\n    body('premium').optional().isBoolean(),\n    body('premiumExpiry').optional().isISO8601(),\n    body('banned').optional().isBoolean(),\n    body('banReason').optional().isString().trim(),\n  ],\n  asyncHandler(async (req, res) => {\n    const errors = validationResult(req);\n    if (!errors.isEmpty()) {\n      throw new AppError('Validation failed', 400, 'VALIDATION_ERROR');\n    }\n\n    const { id } = req.params;\n    const updateData = req.body;\n\n    const updatedUser = await userService.updateUser(id, updateData);\n\n    if (!updatedUser) {\n      throw new AppError('User not found', 404, 'NOT_FOUND');\n    }\n\n    // Log admin action\n    await auditLogger.logEvent({\n      eventType: auditLogger.EVENT_TYPES.USER_UPDATE,\n      actor: req.user.id,\n      actorId: req.user.id,\n      action: 'Updated user',\n      resource: 'user',\n      resourceId: id,\n      details: {\n        changes: updateData,\n        userName: updatedUser.name,\n        userEmail: updatedUser.email,\n      },\n      riskLevel: auditLogger.RISK_LEVELS.MEDIUM,\n      ipAddress: req.ip,\n      userAgent: req.get('User-Agent'),\n    });\n\n    res.json({\n      success: true,\n      data: updatedUser,\n      message: 'User updated successfully',\n    });\n  })\n);\n\n/**\n * DELETE /api/users/:id\n * Delete user\n */\nrouter.delete(\n  '/:id',\n  requireAdmin,\n  [param('id').isString().notEmpty()],\n  asyncHandler(async (req, res) => {\n    const errors = validationResult(req);\n    if (!errors.isEmpty()) {\n      throw new AppError('Invalid user ID', 400, 'VALIDATION_ERROR');\n    }\n\n    const { id } = req.params;\n    const deletedUser = await userService.deleteUser(id);\n\n    if (!deletedUser) {\n      throw new AppError('User not found', 404, 'NOT_FOUND');\n    }\n\n    // Log admin action\n    await auditLogger.logEvent({\n      eventType: auditLogger.EVENT_TYPES.USER_DELETE,\n      actor: req.user.id,\n      actorId: req.user.id,\n      action: 'Deleted user',\n      resource: 'user',\n      resourceId: id,\n      details: {\n        userName: deletedUser.name,\n        userEmail: deletedUser.email,\n        deletionTime: new Date().toISOString(),\n      },\n      riskLevel: auditLogger.RISK_LEVELS.HIGH,\n      ipAddress: req.ip,\n      userAgent: req.get('User-Agent'),\n    });\n\n    res.json({\n      success: true,\n      message: 'User deleted successfully',\n    });\n  })\n);\n\n/**\n * POST /api/users/bulk-action\n * Bulk operations on users\n */\nrouter.post(\n  '/bulk-action',\n  requireAdmin,\n  [\n    body('action').isIn(['ban', 'unban', 'delete', 'update_plan']),\n    body('userIds').isArray({ min: 1 }),\n    body('userIds.*').isString().notEmpty(),\n    body('plan').optional().isIn(['free', 'basic', 'pro', 'enterprise']),\n    body('reason').optional().isString().trim(),\n  ],\n  asyncHandler(async (req, res) => {\n    const errors = validationResult(req);\n    if (!errors.isEmpty()) {\n      throw new AppError('Validation failed', 400, 'VALIDATION_ERROR');\n    }\n\n    const { action, userIds, plan, reason } = req.body;\n\n    const result = await userService.bulkAction(action, userIds, { plan, reason });\n\n    // Log admin action\n    await auditLogger.logEvent({\n      eventType: auditLogger.EVENT_TYPES.ADMIN_USER_MANAGE,\n      actor: req.user.id,\n      actorId: req.user.id,\n      action: `Bulk ${action} users`,\n      resource: 'users',\n      details: {\n        action,\n        userCount: userIds.length,\n        plan,\n        reason,\n        affectedUsers: userIds,\n      },\n      riskLevel: auditLogger.RISK_LEVELS.HIGH,\n      ipAddress: req.ip,\n      userAgent: req.get('User-Agent'),\n    });\n\n    res.json({\n      success: true,\n      data: result,\n      message: `Successfully ${action}ed ${result.successful.length} users`,\n    });\n  })\n);\n\n/**\n * GET /api/users/export\n * Export users to CSV/JSON\n */\nrouter.get(\n  '/export',\n  requireModerator,\n  [\n    query('format').optional().isIn(['csv', 'json']),\n    query('status').optional().isIn(['active', 'inactive', 'banned']),\n    query('plan').optional().isIn(['free', 'basic', 'pro', 'enterprise']),\n  ],\n  asyncHandler(async (req, res) => {\n    const { format = 'csv', status, plan } = req.query;\n\n    const filters = { status, plan };\n    const exportData = await userService.exportUsers(filters, format);\n\n    // Set appropriate headers\n    const timestamp = new Date().toISOString().replace(/[:.]/g, '-');\n    const filename = `users_export_${timestamp}.${format}`;\n\n    if (format === 'csv') {\n      res.setHeader('Content-Type', 'text/csv');\n      res.setHeader('Content-Disposition', `attachment; filename=\"${filename}\"`);\n    } else {\n      res.setHeader('Content-Type', 'application/json');\n      res.setHeader('Content-Disposition', `attachment; filename=\"${filename}\"`);\n    }\n\n    // Log admin action\n    await auditLogger.logEvent({\n      eventType: auditLogger.EVENT_TYPES.ADMIN_BACKUP,\n      actor: req.user.id,\n      actorId: req.user.id,\n      action: 'Exported users',\n      resource: 'users',\n      details: {\n        format,\n        filters,\n        exportTime: new Date().toISOString(),\n      },\n      riskLevel: auditLogger.RISK_LEVELS.MEDIUM,\n      ipAddress: req.ip,\n      userAgent: req.get('User-Agent'),\n    });\n\n    res.send(exportData);\n  })\n);\n\n/**\n * GET /api/users/statistics\n * Get user statistics and analytics\n */\nrouter.get(\n  '/statistics',\n  requireModerator,\n  asyncHandler(async (req, res) => {\n    const stats = await userService.getStatistics();\n\n    res.json({\n      success: true,\n      data: stats,\n    });\n  })\n);\n\nmodule.exports = router;\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\scripts\\fix-context-destructuring.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":3,"column":12,"nodeType":"Identifier","messageId":"undef","endLine":3,"endColumn":19},{"ruleId":"no-restricted-syntax","severity":2,"message":"iterators/generators require regenerator-runtime, which is too heavyweight for this guide to allow them. Separately, loops should be avoided in favor of array iterations.","line":9,"column":3,"nodeType":"ForOfStatement","messageId":"restrictedSyntax","endLine":16,"endColumn":4},{"ruleId":"no-undef","severity":2,"message":"'__dirname' is not defined.","line":76,"column":31,"nodeType":"Identifier","messageId":"undef","endLine":76,"endColumn":40},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":82,"column":1,"nodeType":"MemberExpression","messageId":"unexpected","endLine":82,"endColumn":12,"suggestions":[{"fix":{"range":[2434,2494],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-restricted-syntax","severity":2,"message":"iterators/generators require regenerator-runtime, which is too heavyweight for this guide to allow them. Separately, loops should be avoided in favor of array iterations.","line":84,"column":1,"nodeType":"ForOfStatement","messageId":"restrictedSyntax","endLine":92,"endColumn":2},{"ruleId":"no-plusplus","severity":2,"message":"Unary operator '++' used.","line":87,"column":5,"nodeType":"UpdateExpression","messageId":"unexpectedUnaryOp","endLine":87,"endColumn":17},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":88,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":88,"endColumn":16,"suggestions":[{"fix":{"range":[2599,2659],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-plusplus","severity":2,"message":"Unary operator '++' used.","line":90,"column":5,"nodeType":"UpdateExpression","messageId":"unexpectedUnaryOp","endLine":90,"endColumn":19},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":94,"column":1,"nodeType":"MemberExpression","messageId":"unexpected","endLine":94,"endColumn":12,"suggestions":[{"fix":{"range":[2698,2743],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":95,"column":1,"nodeType":"MemberExpression","messageId":"unexpected","endLine":95,"endColumn":12,"suggestions":[{"fix":{"range":[2744,2832],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]}],"suppressedMessages":[],"errorCount":6,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import path from 'path';\n\nconst fs = require('fs');\n\n// Find all command files\nfunction getAllCommandFiles(dir, files = []) {\n  const entries = fs.readdirSync(dir, { withFileTypes: true });\n\n  for (const entry of entries) {\n    const fullPath = path.join(dir, entry.name);\n    if (entry.isDirectory()) {\n      getAllCommandFiles(fullPath, files);\n    } else if (entry.isFile() && entry.name.endsWith('.js')) {\n      files.push(fullPath);\n    }\n  }\n\n  return files;\n}\n\n// Check if file needs fixing\nfunction needsFixing(content) {\n  // Check if it already has the destructuring\n  if (content.includes('const { formatter') || content.includes('const {formatter')) {\n    return false;\n  }\n\n  // Check if it uses any of these variables\n  const usesVariables = /\\b(formatter|tools|config|db)\\./g.test(content);\n\n  // Check if it's inside a code function\n  const hasCodeFunction = /code:\\s*async\\s*\\(ctx\\)\\s*=>\\s*\\{/g.test(content);\n\n  return usesVariables && hasCodeFunction;\n}\n\n// Fix the file by adding destructuring\nfunction fixFile(filePath) {\n  let content = fs.readFileSync(filePath, 'utf8');\n\n  if (!needsFixing(content)) {\n    return false;\n  }\n\n  // Determine which variables are used\n  const usedVars = new Set();\n  if (/\\bformatter\\./g.test(content)) usedVars.add('formatter');\n  if (/\\btools\\./g.test(content)) usedVars.add('tools');\n  if (/\\bconfig\\./g.test(content)) usedVars.add('config');\n  if (/\\bdb\\./g.test(content)) usedVars.add('database');\n\n  const destructuring = `const { ${[...usedVars].join(', ')} } = ctx.bot.context;`;\n\n  // Find the code function and add destructuring right after it\n  const codeRegex = /(code:\\s*async\\s*\\(ctx\\)\\s*=>\\s*\\{)/;\n  const match = content.match(codeRegex);\n\n  if (!match) {\n    return false;\n  }\n\n  // Insert the destructuring line after the opening brace\n  const insertIndex = match.index + match[0].length;\n  content = `${content.slice(0, insertIndex)}\\n        ${destructuring}${content.slice(insertIndex)}`;\n\n  // If db is used, also need to rename to database in destructuring but keep db references\n  if (usedVars.has('database')) {\n    content = content.replace(destructuring, destructuring.replace('database', 'database: db'));\n  }\n\n  fs.writeFileSync(filePath, content, 'utf8');\n  return true;\n}\n\n// Main execution\nconst commandsDir = path.join(__dirname, '..', 'commands');\nconst commandFiles = getAllCommandFiles(commandsDir);\n\nlet fixedCount = 0;\nlet skippedCount = 0;\n\nconsole.log(`Found ${commandFiles.length} command files\\n`);\n\nfor (const file of commandFiles) {\n  const fixed = fixFile(file);\n  if (fixed) {\n    fixedCount++;\n    console.log(`âœ… Fixed: ${path.relative(commandsDir, file)}`);\n  } else {\n    skippedCount++;\n  }\n}\n\nconsole.log(`\\nâœ… Fixed ${fixedCount} files`);\nconsole.log(`â­ï¸  Skipped ${skippedCount} files (already correct or no changes needed)`);\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\scripts\\seed.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":26,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":33},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":6,"column":3,"nodeType":"MemberExpression","messageId":"unexpected","endLine":6,"endColumn":14,"suggestions":[{"fix":{"range":[115,147],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-plusplus","severity":2,"message":"Unary operator '++' used.","line":9,"column":27,"nodeType":"UpdateExpression","messageId":"unexpectedUnaryOp","endLine":9,"endColumn":30},{"ruleId":"no-await-in-loop","severity":2,"message":"Unexpected `await` inside a loop.","line":10,"column":5,"nodeType":"AwaitExpression","messageId":"unexpectedAwait","endLine":24,"endColumn":7},{"ruleId":"no-restricted-syntax","severity":2,"message":"iterators/generators require regenerator-runtime, which is too heavyweight for this guide to allow them. Separately, loops should be avoided in favor of array iterations.","line":30,"column":3,"nodeType":"ForOfStatement","messageId":"restrictedSyntax","endLine":42,"endColumn":4},{"ruleId":"no-plusplus","severity":2,"message":"Unary operator '++' used.","line":31,"column":58,"nodeType":"UpdateExpression","messageId":"unexpectedUnaryOp","endLine":31,"endColumn":61},{"ruleId":"no-await-in-loop","severity":2,"message":"Unexpected `await` inside a loop.","line":32,"column":7,"nodeType":"AwaitExpression","messageId":"unexpectedAwait","endLine":40,"endColumn":9},{"ruleId":"no-restricted-syntax","severity":2,"message":"iterators/generators require regenerator-runtime, which is too heavyweight for this guide to allow them. Separately, loops should be avoided in favor of array iterations.","line":45,"column":3,"nodeType":"ForOfStatement","messageId":"restrictedSyntax","endLine":58,"endColumn":4},{"ruleId":"no-await-in-loop","severity":2,"message":"Unexpected `await` inside a loop.","line":47,"column":7,"nodeType":"AwaitExpression","messageId":"unexpectedAwait","endLine":56,"endColumn":9},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":60,"column":3,"nodeType":"MemberExpression","messageId":"unexpected","endLine":60,"endColumn":14,"suggestions":[{"fix":{"range":[1791,1824],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":65,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":65,"endColumn":18,"suggestions":[{"fix":{"range":[1855,1872],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":66,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":66,"endColumn":12}],"suppressedMessages":[],"errorCount":9,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const { PrismaClient } = require('@prisma/client');\n\nconst prisma = new PrismaClient();\n\nasync function main() {\n  console.log('Start seeding...');\n\n  // Create Users\n  for (let i = 0; i < 50; i++) {\n    await prisma.user.create({\n      data: {\n        jid: `user${i}@example.com`,\n        name: `User ${i}`,\n        phone: `+123456789${i.toString().padStart(2, '0')}`,\n        email: `user${i}@example.com`,\n        avatar: `https://api.dicebear.com/7.x/avataaars/svg?seed=${i}`,\n        premium: Math.random() > 0.5,\n        banned: Math.random() > 0.8,\n        createdAt: new Date(Date.now() - Math.random() * 365 * 24 * 60 * 60 * 1000),\n        lastActivity: new Date(Date.now() - Math.random() * 30 * 24 * 60 * 60 * 1000),\n        level: Math.floor(Math.random() * 50) + 1,\n        xp: Math.floor(Math.random() * 5000),\n      },\n    });\n  }\n\n  // Create Command Usages\n  const users = await prisma.user.findMany();\n  const commands = ['menu', 'help', 'ping', 'sticker', 'download'];\n  for (const user of users) {\n    for (let i = 0; i < Math.floor(Math.random() * 100); i++) {\n      await prisma.commandUsage.create({\n        data: {\n          userId: user.id,\n          command: commands[Math.floor(Math.random() * commands.length)],\n          category: 'main',\n          success: true,\n          executionTime: Math.floor(Math.random() * 1000),\n        },\n      });\n    }\n  }\n\n  // Create Payments\n  for (const user of users) {\n    if (user.premium) {\n      await prisma.payment.create({\n        data: {\n          userId: user.id,\n          amount: Math.floor(Math.random() * 100),\n          currency: 'USD',\n          status: 'completed',\n          paymentMethod: 'stripe',\n          transactionId: `txn_${Math.random().toString(36).substring(7)}`,\n        },\n      });\n    }\n  }\n\n  console.log('Seeding finished.');\n}\n\nmain()\n  .catch(e => {\n    console.error(e);\n    process.exit(1);\n  })\n  .finally(async () => {\n    await prisma.$disconnect();\n  });\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\scripts\\simple-launcher.js","messages":[{"ruleId":"import-x/no-import-module-exports","severity":2,"message":"Cannot use import declarations in modules that export using CommonJS (module.exports = 'foo' or exports.bar = 'hi')","line":8,"column":1,"nodeType":"ImportDeclaration","messageId":"notAllowed","endLine":8,"endColumn":25},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":10,"column":19,"nodeType":"Identifier","messageId":"undef","endLine":10,"endColumn":26},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":22,"column":18,"nodeType":"Identifier","messageId":"undef","endLine":22,"endColumn":25},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":26,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":26,"endColumn":14},{"ruleId":"class-methods-use-this","severity":2,"message":"Expected 'this' to be used by class method 'showHelp'.","line":37,"column":3,"nodeType":"FunctionExpression","messageId":"missingThis","endLine":37,"endColumn":11},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":38,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":38,"endColumn":16,"suggestions":[{"fix":{"range":[673,1218],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":65,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":65,"endColumn":16,"suggestions":[{"fix":{"range":[1277,1322],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-undef","severity":2,"message":"'__dirname' is not defined.","line":70,"column":24,"nodeType":"Identifier","messageId":"undef","endLine":70,"endColumn":33},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":79,"column":11,"nodeType":"MemberExpression","messageId":"unexpected","endLine":79,"endColumn":22,"suggestions":[{"fix":{"range":[1682,1731],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":81,"column":11,"nodeType":"MemberExpression","messageId":"unexpected","endLine":81,"endColumn":22,"suggestions":[{"fix":{"range":[1759,1811],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":83,"column":9,"nodeType":"Identifier","messageId":"undef","endLine":83,"endColumn":16},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":87,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":87,"endColumn":22,"suggestions":[{"fix":{"range":[1914,1969],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":88,"column":9,"nodeType":"Identifier","messageId":"undef","endLine":88,"endColumn":16},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":92,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":92,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":93,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":93,"endColumn":20,"suggestions":[{"fix":{"range":[2083,2148],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":97,"column":9,"nodeType":"Identifier","messageId":"undef","endLine":97,"endColumn":16},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":100,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":100,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":101,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":101,"endColumn":20,"suggestions":[{"fix":{"range":[2325,2391],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":105,"column":9,"nodeType":"Identifier","messageId":"undef","endLine":105,"endColumn":16},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":108,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":108,"endColumn":18,"suggestions":[{"fix":{"range":[2530,2573],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":109,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":109,"endColumn":18,"suggestions":[{"fix":{"range":[2580,2637],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":110,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":110,"endColumn":18,"suggestions":[{"fix":{"range":[2644,2693],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":112,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":112,"endColumn":20,"suggestions":[{"fix":{"range":[2722,2777],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":113,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":113,"endColumn":14},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":119,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":119,"endColumn":8},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":120,"column":3,"nodeType":"MemberExpression","messageId":"unexpected","endLine":120,"endColumn":16,"suggestions":[{"fix":{"range":[2889,2943],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":121,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":121,"endColumn":10},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":124,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":124,"endColumn":8},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":125,"column":3,"nodeType":"MemberExpression","messageId":"unexpected","endLine":125,"endColumn":16,"suggestions":[{"fix":{"range":[3026,3097],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":126,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":126,"endColumn":10},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":130,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":130,"endColumn":12},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":130,"column":22,"nodeType":"Identifier","messageId":"undef","endLine":130,"endColumn":28},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":135,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":135,"endColumn":7}],"suppressedMessages":[],"errorCount":20,"fatalErrorCount":0,"warningCount":13,"fixableErrorCount":0,"fixableWarningCount":0,"source":"#!/usr/bin/env node\n\n/**\n * Simple WhatsApp Bot Launcher\n * Clean and minimal launcher focused only on starting the bot\n */\n\nimport path from 'path';\n\nconst { spawn } = require('child_process');\n\nclass SimpleLauncher {\n  constructor() {\n    this.botProcess = null;\n    this.parseArguments();\n  }\n\n  /**\n   * Parse command line arguments\n   */\n  parseArguments() {\n    const args = process.argv.slice(2);\n\n    if (args.includes('--help') || args.includes('-h')) {\n      this.showHelp();\n      process.exit(0);\n    }\n\n    if (args.includes('--verbose') || args.includes('-v')) {\n      this.verbose = true;\n    }\n  }\n\n  /**\n   * Show help information\n   */\n  showHelp() {\n    console.log(`\nðŸš€ Simple WhatsApp Bot Launcher\nClean and minimal launcher for WhatsDeX\n\nUSAGE:\n  node scripts/simple-launcher.js [options]\n\nOPTIONS:\n  --verbose, -v     Enable verbose logging\n  --help, -h        Show this help message\n\nEXAMPLES:\n  node scripts/simple-launcher.js          # Start the bot\n  node scripts/simple-launcher.js --verbose # Start with verbose logging\n\nThe launcher will:\n  âœ… Start the WhatsApp bot\n  âœ… Display QR code for authentication\n  âœ… Handle reconnection automatically\n  âœ… Provide clean shutdown on Ctrl+C\n    `);\n  }\n\n  /**\n   * Start the bot\n   */\n  async start() {\n    console.log('ðŸš€ Starting WhatsDeX Bot...\\n');\n\n    try {\n      // Start the main bot process\n      const botProcess = spawn('node', ['index.js'], {\n        cwd: path.join(__dirname, '..'),\n        stdio: this.verbose ? 'inherit' : 'pipe',\n      });\n\n      this.botProcess = botProcess;\n\n      // Handle process events\n      botProcess.on('exit', (code, signal) => {\n        if (code !== null) {\n          console.log(`\\nðŸ¤– Bot exited with code ${code}`);\n        } else {\n          console.log(`\\nðŸ¤– Bot stopped by signal ${signal}`);\n        }\n        process.exit(code || 0);\n      });\n\n      botProcess.on('error', error => {\n        console.error('âŒ Failed to start bot:', error.message);\n        process.exit(1);\n      });\n\n      // Handle graceful shutdown\n      process.on('SIGINT', () => {\n        console.log('\\nðŸ›‘ Received SIGINT, shutting down gracefully...');\n        if (botProcess && !botProcess.killed) {\n          botProcess.kill('SIGTERM');\n        }\n        process.exit(0);\n      });\n\n      process.on('SIGTERM', () => {\n        console.log('\\nðŸ›‘ Received SIGTERM, shutting down gracefully...');\n        if (botProcess && !botProcess.killed) {\n          botProcess.kill('SIGTERM');\n        }\n        process.exit(0);\n      });\n\n      console.log('âœ… Bot started successfully!');\n      console.log('ðŸ“± Scan the QR code above to authenticate');\n      console.log('ðŸ’¡ Press Ctrl+C to stop the bot\\n');\n    } catch (error) {\n      console.error('âŒ Failed to start bot:', error.message);\n      process.exit(1);\n    }\n  }\n}\n\n// Handle uncaught exceptions\nprocess.on('uncaughtException', error => {\n  console.error('âŒ Uncaught Exception:', error.message);\n  process.exit(1);\n});\n\nprocess.on('unhandledRejection', (reason, promise) => {\n  console.error('âŒ Unhandled Rejection at:', promise, 'reason:', reason);\n  process.exit(1);\n});\n\n// Start the launcher\nif (require.main === module) {\n  const launcher = new SimpleLauncher();\n  launcher.start();\n}\n\nmodule.exports = SimpleLauncher;\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\server.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":20,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":27},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":9,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":9,"endColumn":16,"suggestions":[{"fix":{"range":[147,179],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":12,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":12,"endColumn":18,"suggestions":[{"fix":{"range":[223,258],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":26,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":26,"endColumn":7}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const { Server } = require('socket.io');\n\nlet io;\n\nfunction initSocket(server) {\n  io = new Server(server);\n\n  io.on('connection', socket => {\n    console.log('A user connected');\n\n    socket.on('disconnect', () => {\n      console.log('A user disconnected');\n    });\n  });\n\n  return io;\n}\n\nfunction getIO() {\n  if (!io) {\n    throw new Error('Socket.io not initialized!');\n  }\n  return io;\n}\n\nmodule.exports = { initSocket, getIO };\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\services\\gemini.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":32,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":39},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":2,"column":16,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":23},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":3,"column":16,"nodeType":"Identifier","messageId":"undef","endLine":3,"endColumn":23},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":7,"column":19,"nodeType":"Identifier","messageId":"undef","endLine":7,"endColumn":26},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":26,"column":28,"nodeType":"Identifier","messageId":"undef","endLine":26,"endColumn":35},{"ruleId":"class-methods-use-this","severity":2,"message":"Expected 'this' to be used by class method 'generateCacheKey'.","line":43,"column":3,"nodeType":"FunctionExpression","messageId":"missingThis","endLine":43,"endColumn":19},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'getChatCompletion'.","line":53,"column":9,"nodeType":"FunctionExpression","messageId":"missingReturn","endLine":53,"endColumn":26},{"ruleId":"no-shadow","severity":2,"message":"'logger' is already declared in the upper scope on line 3 column 7.","line":54,"column":11,"nodeType":"Identifier","messageId":"noShadow","endLine":54,"endColumn":17},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":54,"column":20,"nodeType":"Identifier","messageId":"undef","endLine":54,"endColumn":27},{"ruleId":"no-plusplus","severity":2,"message":"Unary operator '++' used.","line":73,"column":50,"nodeType":"UpdateExpression","messageId":"unexpectedUnaryOp","endLine":73,"endColumn":59},{"ruleId":"no-await-in-loop","severity":2,"message":"Unexpected `await` inside a loop.","line":81,"column":24,"nodeType":"AwaitExpression","messageId":"unexpectedAwait","endLine":81,"endColumn":62},{"ruleId":"no-await-in-loop","severity":2,"message":"Unexpected `await` inside a loop.","line":82,"column":26,"nodeType":"AwaitExpression","messageId":"unexpectedAwait","endLine":82,"endColumn":47},{"ruleId":"no-await-in-loop","severity":2,"message":"Unexpected `await` inside a loop.","line":91,"column":11,"nodeType":"AwaitExpression","messageId":"unexpectedAwait","endLine":91,"endColumn":56},{"ruleId":"no-await-in-loop","severity":2,"message":"Unexpected `await` inside a loop.","line":120,"column":9,"nodeType":"AwaitExpression","messageId":"unexpectedAwait","endLine":120,"endColumn":90},{"ruleId":"no-promise-executor-return","severity":2,"message":"Return values from promise executor functions cannot be read.","line":120,"column":38,"nodeType":"CallExpression","messageId":"returnsValue","endLine":120,"endColumn":89,"suggestions":[{"messageId":"wrapBraces","fix":{"range":[3712,3763],"text":"{setTimeout(resolve, baseDelay * 2 ** (attempt - 1))}"},"desc":"Wrap the expression in `{}`."}]},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'getChatCompletionWithHistory'.","line":130,"column":9,"nodeType":"FunctionExpression","messageId":"missingReturn","endLine":130,"endColumn":37},{"ruleId":"no-shadow","severity":2,"message":"'logger' is already declared in the upper scope on line 3 column 7.","line":131,"column":11,"nodeType":"Identifier","messageId":"noShadow","endLine":131,"endColumn":17},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":131,"column":20,"nodeType":"Identifier","messageId":"undef","endLine":131,"endColumn":27},{"ruleId":"no-plusplus","severity":2,"message":"Unary operator '++' used.","line":152,"column":50,"nodeType":"UpdateExpression","messageId":"unexpectedUnaryOp","endLine":152,"endColumn":59},{"ruleId":"no-await-in-loop","severity":2,"message":"Unexpected `await` inside a loop.","line":177,"column":24,"nodeType":"AwaitExpression","messageId":"unexpectedAwait","endLine":177,"endColumn":67},{"ruleId":"no-await-in-loop","severity":2,"message":"Unexpected `await` inside a loop.","line":178,"column":26,"nodeType":"AwaitExpression","messageId":"unexpectedAwait","endLine":178,"endColumn":47},{"ruleId":"no-await-in-loop","severity":2,"message":"Unexpected `await` inside a loop.","line":183,"column":11,"nodeType":"AwaitExpression","messageId":"unexpectedAwait","endLine":183,"endColumn":56},{"ruleId":"no-await-in-loop","severity":2,"message":"Unexpected `await` inside a loop.","line":212,"column":9,"nodeType":"AwaitExpression","messageId":"unexpectedAwait","endLine":212,"endColumn":90},{"ruleId":"no-promise-executor-return","severity":2,"message":"Return values from promise executor functions cannot be read.","line":212,"column":38,"nodeType":"CallExpression","messageId":"returnsValue","endLine":212,"endColumn":89,"suggestions":[{"messageId":"wrapBraces","fix":{"range":[6839,6890],"text":"{setTimeout(resolve, baseDelay * 2 ** (attempt - 1))}"},"desc":"Wrap the expression in `{}`."}]},{"ruleId":"no-nested-ternary","severity":2,"message":"Do not nest ternary expressions.","line":269,"column":15,"nodeType":"ConditionalExpression","messageId":"noNestedTernary","endLine":269,"endColumn":89},{"ruleId":"no-unused-vars","severity":1,"message":"'parseError' is defined but never used.","line":429,"column":16,"nodeType":"Identifier","messageId":"unusedVar","endLine":429,"endColumn":26},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":450,"column":29,"nodeType":"Identifier","messageId":"undef","endLine":450,"endColumn":36},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":463,"column":29,"nodeType":"Identifier","messageId":"undef","endLine":463,"endColumn":36},{"ruleId":"class-methods-use-this","severity":2,"message":"Expected 'this' to be used by class method 'convertToolsToGeminiFormat'.","line":485,"column":3,"nodeType":"FunctionExpression","messageId":"missingThis","endLine":485,"endColumn":29},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":537,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":537,"endColumn":7}],"suppressedMessages":[],"errorCount":29,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const { GoogleGenerativeAI } = require('@google/generative-ai');\nconst crypto = require('crypto');\nconst logger = require('../src/utils/logger');\n\nclass GeminiService {\n  constructor() {\n    this.apiKey = process.env.GOOGLE_GEMINI_API_KEY;\n    if (!this.apiKey) {\n      throw new Error('GOOGLE_GEMINI_API_KEY environment variable is required');\n    }\n\n    this.genAI = new GoogleGenerativeAI(this.apiKey);\n    this.model = this.genAI.getGenerativeModel({\n      model: 'gemini-2.0-flash-exp',\n      generationConfig: {\n        temperature: 0.7,\n        topK: 40,\n        topP: 0.95,\n        maxOutputTokens: 2048,\n      },\n    });\n\n    // Initialize cache service\n    this.cache = null;\n    try {\n      const CacheService = require('../src/services/cache');\n      this.cache = new CacheService();\n    } catch (error) {\n      logger.warn('Cache service not available, proceeding without caching', {\n        error: error.message,\n      });\n    }\n\n    logger.info('Gemini service initialized with official Google Generative AI SDK');\n  }\n\n  /**\n   * Generate cache key for AI responses\n   * @param {string} prompt - The input prompt\n   * @param {string} type - Type of request (chat, summary, etc.)\n   * @returns {string} Cache key\n   */\n  generateCacheKey(prompt, type = 'chat') {\n    const hash = crypto.createHash('md5').update(prompt).digest('hex');\n    return `gemini:${type}:${hash}`;\n  }\n\n  /**\n   * Get a chat completion from Google Gemini API with caching\n   * @param {string} text - The user's input text\n   * @returns {Promise<string>} The response text from Gemini\n   */\n  async getChatCompletion(text, correlationId = null) {\n    const logger = require('../src/utils/logger');\n    if (!text) {\n      throw new Error('Input text is required.');\n    }\n\n    const cacheKey = this.generateCacheKey(text, 'chat');\n\n    // Try to get from cache first\n    if (this.cache) {\n      const cachedResponse = await this.cache.get(cacheKey);\n      if (cachedResponse) {\n        logger.debug('Returning cached Gemini response', { cacheKey, correlationId });\n        return cachedResponse;\n      }\n    }\n\n    const maxRetries = 3;\n    const baseDelay = 1000;\n\n    for (let attempt = 1; attempt <= maxRetries; attempt++) {\n      try {\n        logger.info('Gemini chat completion request', {\n          correlationId,\n          attempt,\n          textLength: text.length,\n        });\n\n        const result = await this.model.generateContent(text);\n        const response = await result.response;\n        const message = response.text();\n\n        if (!message) {\n          throw new Error('Empty response from Gemini API');\n        }\n\n        // Cache the response\n        if (this.cache) {\n          await this.cache.set(cacheKey, message, 1800); // Cache for 30 minutes\n          logger.debug('Cached Gemini response', { cacheKey, correlationId });\n        }\n\n        logger.info('Gemini chat completion success', {\n          correlationId,\n          attempt,\n          responseLength: message.length,\n        });\n        return message;\n      } catch (error) {\n        logger.warn('Gemini chat completion attempt failed', {\n          correlationId,\n          attempt,\n          maxRetries,\n          error: error.message,\n          retryAfter: attempt < maxRetries ? baseDelay * 2 ** (attempt - 1) : null,\n        });\n\n        if (attempt === maxRetries) {\n          logger.error('Gemini chat completion failed after retries', {\n            correlationId,\n            error: error.message,\n            text: `${text.substring(0, 100)}...`,\n          });\n          throw new Error(`Failed to get response from Gemini API: ${error.message}`);\n        }\n\n        // Exponential backoff\n        await new Promise(resolve => setTimeout(resolve, baseDelay * 2 ** (attempt - 1)));\n      }\n    }\n  }\n\n  /**\n   * Get a chat completion with conversation history and caching\n   * @param {Array} messages - Array of message objects with role and content\n   * @returns {Promise<string>} The response text from Gemini\n   */\n  async getChatCompletionWithHistory(messages, correlationId = null) {\n    const logger = require('../src/utils/logger');\n    if (!messages || messages.length === 0) {\n      throw new Error('Messages array is required.');\n    }\n\n    // Create a cache key based on the conversation\n    const conversationKey = messages.map(m => `${m.role}:${m.content}`).join('|');\n    const cacheKey = this.generateCacheKey(conversationKey, 'conversation');\n\n    // Try to get from cache first\n    if (this.cache) {\n      const cachedResponse = await this.cache.get(cacheKey);\n      if (cachedResponse) {\n        logger.debug('Returning cached Gemini conversation response', { cacheKey, correlationId });\n        return cachedResponse;\n      }\n    }\n\n    const maxRetries = 3;\n    const baseDelay = 1000;\n\n    for (let attempt = 1; attempt <= maxRetries; attempt++) {\n      try {\n        logger.info('Gemini chat completion with history request', {\n          correlationId,\n          attempt,\n          messageCount: messages.length,\n        });\n\n        // Convert messages to Gemini format\n        const history = messages.slice(0, -1).map(msg => ({\n          role: msg.role === 'user' ? 'user' : 'model',\n          parts: [{ text: msg.content }],\n        }));\n\n        const chat = this.model.startChat({\n          history,\n          generationConfig: {\n            temperature: 0.7,\n            topK: 40,\n            topP: 0.95,\n            maxOutputTokens: 2048,\n          },\n        });\n\n        const lastMessage = messages[messages.length - 1];\n        const result = await chat.sendMessage(lastMessage.content);\n        const response = await result.response;\n        const message = response.text();\n\n        // Cache the response\n        if (this.cache) {\n          await this.cache.set(cacheKey, message, 1800); // Cache for 30 minutes\n          logger.debug('Cached Gemini conversation response', { cacheKey, correlationId });\n        }\n\n        logger.info('Gemini chat completion with history success', {\n          correlationId,\n          attempt,\n          responseLength: message.length,\n        });\n        return message;\n      } catch (error) {\n        logger.warn('Gemini chat completion with history attempt failed', {\n          correlationId,\n          attempt,\n          maxRetries,\n          error: error.message,\n          messageCount: messages.length,\n          retryAfter: attempt < maxRetries ? baseDelay * 2 ** (attempt - 1) : null,\n        });\n\n        if (attempt === maxRetries) {\n          logger.error('Gemini chat completion with history failed after retries', {\n            correlationId,\n            error: error.message,\n            messageCount: messages.length,\n          });\n          throw new Error(`Failed to get response from Gemini API: ${error.message}`);\n        }\n\n        await new Promise(resolve => setTimeout(resolve, baseDelay * 2 ** (attempt - 1)));\n      }\n    }\n  }\n\n  /**\n   * Get a chat completion with function calling support and caching\n   * @param {Array} messages - Array of message objects\n   * @param {Array} tools - Array of tool definitions\n   * @returns {Promise<Object>} The full response object with potential tool calls\n   */\n  async getChatCompletionWithTools(messages, tools) {\n    if (!messages || messages.length === 0) {\n      throw new Error('Messages are required.');\n    }\n\n    // Create cache key for tool-based conversations\n    const toolKey = tools\n      ? tools\n          .map(t => t.function?.name)\n          .sort()\n          .join(',')\n      : 'no-tools';\n    const conversationKey = `${messages.map(m => `${m.role}:${m.content}`).join('|')}|tools:${toolKey}`;\n    const cacheKey = this.generateCacheKey(conversationKey, 'tools');\n\n    // Try to get from cache first\n    if (this.cache) {\n      const cachedResponse = await this.cache.get(cacheKey);\n      if (cachedResponse) {\n        logger.debug('Returning cached Gemini tools response', { cacheKey });\n        return cachedResponse;\n      }\n    }\n\n    try {\n      logger.debug('Sending chat completion with tools to Gemini', {\n        messageCount: messages.length,\n        toolCount: tools?.length || 0,\n      });\n\n      // Convert tools to Gemini format\n      const geminiTools = tools ? this.convertToolsToGeminiFormat(tools) : [];\n\n      const modelWithTools = this.genAI.getGenerativeModel({\n        model: 'gemini-2.0-flash-exp',\n        tools: geminiTools.length > 0 ? [{ functionDeclarations: geminiTools }] : [],\n        generationConfig: {\n          temperature: 0.7,\n          topK: 40,\n          topP: 0.95,\n          maxOutputTokens: 2048,\n        },\n      });\n\n      // Convert messages to Gemini format\n      const geminiMessages = messages.map(msg => ({\n        role: msg.role === 'user' ? 'user' : msg.role === 'assistant' ? 'model' : 'user',\n        parts: [{ text: msg.content }],\n      }));\n\n      const chat = modelWithTools.startChat({\n        history: geminiMessages.slice(0, -1),\n      });\n\n      const lastMessage = geminiMessages[geminiMessages.length - 1];\n      const result = await chat.sendMessage(lastMessage.parts[0].text);\n      const response = await result.response;\n\n      // Check for function calls\n      const functionCalls = response.functionCalls();\n      let responseData;\n\n      if (functionCalls && functionCalls.length > 0) {\n        responseData = {\n          finish_reason: 'tool_calls',\n          message: {\n            role: 'assistant',\n            content: response.text(),\n            tool_calls: functionCalls.map(call => ({\n              id: `call_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`,\n              function: {\n                name: call.name,\n                arguments: JSON.stringify(call.args),\n              },\n            })),\n          },\n        };\n      } else {\n        responseData = {\n          finish_reason: 'stop',\n          message: {\n            role: 'assistant',\n            content: response.text(),\n          },\n        };\n      }\n\n      // Cache the response (shorter TTL for tool responses)\n      if (this.cache) {\n        await this.cache.set(cacheKey, responseData, 900); // Cache for 15 minutes\n        logger.debug('Cached Gemini tools response', { cacheKey });\n      }\n\n      return responseData;\n    } catch (error) {\n      logger.error('Error fetching Gemini completion with tools', {\n        error: error.message,\n        messageCount: messages.length,\n      });\n      throw new Error(`Failed to get response from Gemini API with tools: ${error.message}`);\n    }\n  }\n\n  /**\n   * Generate a summary of conversation messages with caching\n   * @param {Array} messagesToSummarize - Array of message objects to summarize\n   * @returns {Promise<string>} The summary text\n   */\n  async getSummary(messagesToSummarize) {\n    if (!messagesToSummarize || messagesToSummarize.length === 0) {\n      throw new Error('Messages to summarize are required.');\n    }\n\n    // Create cache key for summary\n    const summaryKey = messagesToSummarize.map(m => `${m.role}:${m.content}`).join('|');\n    const cacheKey = this.generateCacheKey(summaryKey, 'summary');\n\n    // Try to get from cache first\n    if (this.cache) {\n      const cachedSummary = await this.cache.get(cacheKey);\n      if (cachedSummary) {\n        logger.debug('Returning cached Gemini summary', { cacheKey });\n        return cachedSummary;\n      }\n    }\n\n    try {\n      logger.debug('Generating conversation summary with Gemini', {\n        messageCount: messagesToSummarize.length,\n      });\n\n      const summaryPrompt = `Please provide a concise summary of the following conversation, capturing the key points and main topics discussed:\n\n${messagesToSummarize.map(msg => `${msg.role}: ${msg.content}`).join('\\n\\n')}\n\nSummary:`;\n\n      const result = await this.model.generateContent(summaryPrompt);\n      const response = await result.response;\n      const summary = response.text();\n\n      // Cache the summary\n      if (this.cache) {\n        await this.cache.set(cacheKey, summary, 3600); // Cache for 1 hour\n        logger.debug('Cached Gemini summary', { cacheKey });\n      }\n\n      logger.debug('Generated conversation summary', { summaryLength: summary.length });\n      return summary;\n    } catch (error) {\n      logger.error('Error generating summary with Gemini', {\n        error: error.message,\n        messageCount: messagesToSummarize.length,\n      });\n      throw new Error(`Failed to generate summary: ${error.message}`);\n    }\n  }\n\n  /**\n   * Moderate content using Gemini with caching\n   * @param {string} content - Content to moderate\n   * @returns {Promise<Object>} Moderation result\n   */\n  async moderateContent(content) {\n    if (!content) {\n      throw new Error('Content to moderate is required.');\n    }\n\n    const cacheKey = this.generateCacheKey(content, 'moderation');\n\n    // Try to get from cache first\n    if (this.cache) {\n      const cachedResult = await this.cache.get(cacheKey);\n      if (cachedResult) {\n        logger.debug('Returning cached moderation result', { cacheKey });\n        return cachedResult;\n      }\n    }\n\n    try {\n      logger.debug('Moderating content with Gemini', { contentLength: content.length });\n\n      const moderationPrompt = `Please analyze the following content and determine if it contains:\n1. Hate speech or discriminatory content\n2. Violent or harmful content\n3. Adult or explicit content\n4. Spam or promotional content\n5. Harassment or bullying\n\nContent: \"${content}\"\n\nProvide a JSON response with:\n- safe: boolean (true if content is safe, false if not)\n- categories: array of violated categories (if any)\n- reason: brief explanation\n\nResponse format: {\"safe\": true/false, \"categories\": [], \"reason\": \"\"}`;\n\n      const result = await this.model.generateContent(moderationPrompt);\n      const response = await result.response;\n      const moderationResult = response.text();\n\n      // Parse JSON response\n      let parsed;\n      try {\n        parsed = JSON.parse(moderationResult);\n      } catch (parseError) {\n        logger.warn('Failed to parse moderation response, assuming safe', { moderationResult });\n        parsed = { safe: true, categories: [], reason: 'Unable to parse moderation result' };\n      }\n\n      // Cache the moderation result\n      if (this.cache) {\n        await this.cache.set(cacheKey, parsed, 1800); // Cache for 30 minutes\n        logger.debug('Cached moderation result', { cacheKey });\n      }\n\n      logger.debug('Content moderation completed', parsed);\n      return parsed;\n    } catch (error) {\n      logger.error('Error moderating content with Gemini - ALERT: Manual review required', {\n        error: error.message,\n        content: `${content.substring(0, 100)}...`,\n      });\n\n      // Broadcast alert to admin dashboard via WebSocket\n      try {\n        const AdminServer = require('../server');\n        AdminServer.broadcast('moderation_alert', {\n          content: `${content.substring(0, 200)}...`,\n          reason: 'Moderation failure - manual review required',\n          timestamp: new Date().toISOString(),\n          severity: 'high',\n        });\n      } catch (broadcastError) {\n        logger.warn('Failed to broadcast moderation alert', { error: broadcastError.message });\n      }\n\n      // Flag for audit (assume auditLogger available)\n      try {\n        const auditLogger = require('../src/services/auditLogger');\n        await auditLogger.logEvent({\n          eventType: 'MODERATION_FAILURE',\n          actor: 'system',\n          action: 'content_moderation_failed',\n          resource: 'moderation',\n          details: { contentPreview: content.substring(0, 100), error: error.message },\n          riskLevel: 'high',\n        });\n      } catch (auditError) {\n        logger.warn('Failed to log moderation failure to audit', { error: auditError.message });\n      }\n\n      throw new Error(`Moderation failed: ${error.message} - Content flagged for manual review`);\n    }\n  }\n\n  /**\n   * Convert tools from OpenAI format to Gemini format\n   * @param {Array} tools - Tools in OpenAI format\n   * @returns {Array} Tools in Gemini format\n   */\n  convertToolsToGeminiFormat(tools) {\n    return tools.map(tool => ({\n      name: tool.function.name,\n      description: tool.function.description,\n      parameters: tool.function.parameters,\n    }));\n  }\n\n  /**\n   * Clear cache for specific patterns\n   * @param {string} pattern - Cache key pattern to clear\n   */\n  async clearCache(pattern = 'gemini:*') {\n    if (this.cache) {\n      const cleared = await this.cache.invalidatePattern(pattern);\n      logger.info(`Cleared ${cleared} cached Gemini responses`);\n      return cleared;\n    }\n    return 0;\n  }\n\n  /**\n   * Health check for Gemini service\n   * @returns {Promise<Object>} Health status\n   */\n  async healthCheck() {\n    try {\n      const startTime = Date.now();\n      const result = await this.model.generateContent('Hello');\n      const response = await result.response;\n      const text = response.text();\n      const responseTime = Date.now() - startTime;\n\n      return {\n        status: 'healthy',\n        model: 'gemini-2.0-flash-exp',\n        responseTime,\n        testResponse: text ? 'OK' : 'No response',\n        cache: this.cache ? 'enabled' : 'disabled',\n      };\n    } catch (error) {\n      logger.error('Gemini health check failed', { error: error.message });\n      return {\n        status: 'unhealthy',\n        error: error.message,\n        timestamp: Date.now(),\n        cache: this.cache ? 'enabled' : 'disabled',\n      };\n    }\n  }\n}\n\nmodule.exports = GeminiService;\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\services\\openai.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":22},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'getChatCompletion'.","line":18,"column":9,"nodeType":"FunctionExpression","messageId":"missingReturn","endLine":18,"endColumn":26},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":19,"column":20,"nodeType":"Identifier","messageId":"undef","endLine":19,"endColumn":27},{"ruleId":"no-plusplus","severity":2,"message":"Unary operator '++' used.","line":34,"column":50,"nodeType":"UpdateExpression","messageId":"unexpectedUnaryOp","endLine":34,"endColumn":59},{"ruleId":"no-await-in-loop","severity":2,"message":"Unexpected `await` inside a loop.","line":44,"column":26,"nodeType":"AwaitExpression","messageId":"unexpectedAwait","endLine":44,"endColumn":81},{"ruleId":"no-await-in-loop","severity":2,"message":"Unexpected `await` inside a loop.","line":73,"column":9,"nodeType":"AwaitExpression","messageId":"unexpectedAwait","endLine":73,"endColumn":90},{"ruleId":"no-promise-executor-return","severity":2,"message":"Return values from promise executor functions cannot be read.","line":73,"column":38,"nodeType":"CallExpression","messageId":"returnsValue","endLine":73,"endColumn":89,"suggestions":[{"messageId":"wrapBraces","fix":{"range":[2140,2191],"text":"{setTimeout(resolve, baseDelay * 2 ** (attempt - 1))}"},"desc":"Wrap the expression in `{}`."}]},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'getSummary'.","line":78,"column":9,"nodeType":"FunctionExpression","messageId":"missingReturn","endLine":78,"endColumn":19},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":79,"column":20,"nodeType":"Identifier","messageId":"undef","endLine":79,"endColumn":27},{"ruleId":"no-plusplus","severity":2,"message":"Unary operator '++' used.","line":89,"column":50,"nodeType":"UpdateExpression","messageId":"unexpectedUnaryOp","endLine":89,"endColumn":59},{"ruleId":"no-await-in-loop","severity":2,"message":"Unexpected `await` inside a loop.","line":98,"column":26,"nodeType":"AwaitExpression","messageId":"unexpectedAwait","endLine":102,"endColumn":11},{"ruleId":"no-await-in-loop","severity":2,"message":"Unexpected `await` inside a loop.","line":133,"column":9,"nodeType":"AwaitExpression","messageId":"unexpectedAwait","endLine":133,"endColumn":90},{"ruleId":"no-promise-executor-return","severity":2,"message":"Return values from promise executor functions cannot be read.","line":133,"column":38,"nodeType":"CallExpression","messageId":"returnsValue","endLine":133,"endColumn":89,"suggestions":[{"messageId":"wrapBraces","fix":{"range":[4165,4216],"text":"{setTimeout(resolve, baseDelay * 2 ** (attempt - 1))}"},"desc":"Wrap the expression in `{}`."}]},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":139,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":139,"endColumn":7}],"suppressedMessages":[],"errorCount":14,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const axios = require('axios');\n\nclass OpenAIService {\n  constructor(apiKey) {\n    if (!apiKey) {\n      throw new Error('OpenAI API key is required.');\n    }\n    this.apiKey = apiKey;\n    this.apiClient = axios.create({\n      baseURL: 'https://api.openai.com/v1',\n      headers: {\n        'Content-Type': 'application/json',\n        Authorization: `Bearer ${this.apiKey}`,\n      },\n    });\n  }\n\n  async getChatCompletion(messages, tools = null, correlationId = null) {\n    const logger = require('../src/utils/logger');\n    const maxRetries = 3;\n    const baseDelay = 1000;\n\n    const payload = {\n      model: 'gpt-3.5-turbo-1106',\n      messages,\n      temperature: 0.7,\n    };\n\n    if (tools) {\n      payload.tools = tools;\n      payload.tool_choice = 'auto';\n    }\n\n    for (let attempt = 1; attempt <= maxRetries; attempt++) {\n      try {\n        logger.info('OpenAI chat completion request', {\n          correlationId,\n          attempt,\n          model: payload.model,\n          messageCount: messages.length,\n          toolsEnabled: !!tools,\n        });\n\n        const response = await this.apiClient.post('/chat/completions', payload);\n        logger.info('OpenAI chat completion success', {\n          correlationId,\n          attempt,\n          responseLength: response.data.choices[0].message.content?.length || 0,\n        });\n        return response.data.choices[0];\n      } catch (error) {\n        logger.warn('OpenAI chat completion attempt failed', {\n          correlationId,\n          attempt,\n          maxRetries,\n          error: error.message,\n          status: error.response?.status,\n          retryAfter: attempt < maxRetries ? baseDelay * 2 ** (attempt - 1) : null,\n        });\n\n        if (\n          attempt === maxRetries ||\n          !error.response ||\n          [500, 502, 503, 504].includes(error.response.status)\n        ) {\n          if (error.response && error.response.data && error.response.data.error) {\n            throw new Error(`OpenAI API Error: ${error.response.data.error.message}`);\n          }\n          throw error;\n        }\n\n        // Exponential backoff\n        await new Promise(resolve => setTimeout(resolve, baseDelay * 2 ** (attempt - 1)));\n      }\n    }\n  }\n\n  async getSummary(messages, correlationId = null) {\n    const logger = require('../src/utils/logger');\n    const maxRetries = 3;\n    const baseDelay = 1000;\n\n    const summarizationPrompt = {\n      role: 'system',\n      content:\n        'You are a summarization expert. Summarize the key points, topics, and any user preferences mentioned in the following conversation. The summary should be a dense, concise paragraph. It will be used as context for a future conversation.',\n    };\n\n    for (let attempt = 1; attempt <= maxRetries; attempt++) {\n      try {\n        logger.info('OpenAI summary request', {\n          correlationId,\n          attempt,\n          model: 'gpt-3.5-turbo',\n          messageCount: messages.length,\n        });\n\n        const response = await this.apiClient.post('/chat/completions', {\n          model: 'gpt-3.5-turbo',\n          messages: [summarizationPrompt, ...messages],\n          temperature: 0.2,\n        });\n\n        logger.info('OpenAI summary success', {\n          correlationId,\n          attempt,\n          summaryLength: response.data.choices[0].message.content?.length || 0,\n        });\n        return response.data.choices[0].message.content;\n      } catch (error) {\n        logger.warn('OpenAI summary attempt failed', {\n          correlationId,\n          attempt,\n          maxRetries,\n          error: error.message,\n          status: error.response?.status,\n          retryAfter: attempt < maxRetries ? baseDelay * 2 ** (attempt - 1) : null,\n        });\n\n        if (\n          attempt === maxRetries ||\n          !error.response ||\n          [500, 502, 503, 504].includes(error.response.status)\n        ) {\n          if (error.response && error.response.data && error.response.data.error) {\n            throw new Error(\n              `OpenAI API Error (Summarization): ${error.response.data.error.message}`\n            );\n          }\n          throw error;\n        }\n\n        await new Promise(resolve => setTimeout(resolve, baseDelay * 2 ** (attempt - 1)));\n      }\n    }\n  }\n}\n\nmodule.exports = OpenAIService;\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\shared\\components\\ui\\GlassButton.tsx","messages":[{"ruleId":null,"nodeType":null,"fatal":true,"severity":2,"message":"Parsing error: w:\\CodeDeX\\WhatsDeX\\shared\\components\\ui\\GlassButton.tsx was not found by the project service. Consider either including it in the tsconfig.json or including it in allowDefaultProject."}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":1,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { motion } from 'framer-motion';\r\nimport { cn } from '../../lib/utils';\r\nimport * as React from 'react';\r\n\r\ninterface GlassButtonProps extends React.ButtonHTMLAttributes<HTMLButtonElement> {\r\n  children: React.ReactNode;\r\n  variant?: 'primary' | 'secondary' | 'success' | 'danger' | 'ghost';\r\n  size?: 'sm' | 'md' | 'lg' | 'xl';\r\n  loading?: boolean;\r\n  disabled?: boolean;\r\n  glow?: boolean;\r\n  icon?: React.ElementType;\r\n}\r\n\r\nconst GlassButton = React.forwardRef<HTMLButtonElement, GlassButtonProps>(\r\n  ({ children, variant = 'primary', size = 'md', loading = false, disabled = false, glow = false, icon: Icon, className, ...props }, ref) => {\r\n    const variants = {\r\n      primary: {\r\n        background: 'bg-gradient-to-r from-blue-500/20 to-purple-500/20',\r\n        border: 'border-blue-500/30',\r\n        text: 'text-blue-600 dark:text-blue-400',\r\n        hover: 'hover:from-blue-500/30 hover:to-purple-500/30 hover:border-blue-500/50',\r\n        shadow: glow ? 'shadow-neon' : 'shadow-glass-sm'\r\n      },\r\n      secondary: {\r\n        background: 'bg-gradient-to-r from-slate-500/20 to-slate-600/20',\r\n        border: 'border-slate-500/30',\r\n        text: 'text-slate-600 dark:text-slate-400',\r\n        hover: 'hover:from-slate-500/30 hover:to-slate-600/30 hover:border-slate-500/50',\r\n        shadow: 'shadow-glass-sm'\r\n      },\r\n      success: {\r\n        background: 'bg-gradient-to-r from-green-500/20 to-emerald-500/20',\r\n        border: 'border-green-500/30',\r\n        text: 'text-green-600 dark:text-green-400',\r\n        hover: 'hover:from-green-500/30 hover:to-emerald-500/30 hover:border-green-500/50',\r\n        shadow: 'shadow-glass-sm'\r\n      },\r\n      danger: {\r\n        background: 'bg-gradient-to-r from-red-500/20 to-pink-500/20',\r\n        border: 'border-red-500/30',\r\n        text: 'text-red-600 dark:text-red-400',\r\n        hover: 'hover:from-red-500/30 hover:to-pink-500/30 hover:border-red-500/50',\r\n        shadow: 'shadow-glass-sm'\r\n      },\r\n      ghost: {\r\n        background: 'bg-transparent',\r\n        border: 'border-white/20 dark:border-slate-700/50',\r\n        text: 'text-slate-600 dark:text-slate-400',\r\n        hover: 'hover:bg-white/10 dark:hover:bg-slate-700/30 hover:border-white/30 dark:hover:border-slate-600/50',\r\n        shadow: 'shadow-none'\r\n      }\r\n    };\r\n\r\n    const sizes = {\r\n      sm: 'px-3 py-2 text-sm',\r\n      md: 'px-4 py-3 text-base',\r\n      lg: 'px-6 py-4 text-lg',\r\n      xl: 'px-8 py-5 text-xl'\r\n    };\r\n\r\n    const variantStyles = variants[variant] || variants.primary;\r\n    const sizeStyles = sizes[size] || sizes.md;\r\n\r\n    return (\r\n      <motion.button\r\n        ref={ref}\r\n        whileHover={!disabled && !loading ? { scale: 1.02 } : {}}\r\n        whileTap={!disabled && !loading ? { scale: 0.98 } : {}}\r\n        disabled={disabled || loading}\r\n        className={cn(\r\n          \"relative overflow-hidden rounded-xl backdrop-blur-xl border font-medium transition-all duration-300\",\r\n          \"focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:ring-offset-2 focus:ring-offset-transparent\",\r\n          \"disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100\",\r\n          variantStyles.background,\r\n          variantStyles.border,\r\n          variantStyles.text,\r\n          variantStyles.hover,\r\n          variantStyles.shadow,\r\n          sizeStyles,\r\n          \"flex items-center justify-center space-x-2\",\r\n          className\r\n        )}\r\n        {...props}\r\n      >\r\n        {/* Background gradient animation */}\r\n        <motion.div\r\n          className=\"absolute inset-0 bg-gradient-to-r from-transparent via-white/10 to-transparent opacity-0 group-hover:opacity-100\"\r\n          initial={{ x: '-100%' }}\r\n          whileHover={{ x: '100%' }}\r\n          transition={{ duration: 0.6 }}\r\n        />\r\n\r\n        {/* Loading spinner */}\r\n        {loading && (\r\n          <motion.div\r\n            animate={{ rotate: 360 }}\r\n            transition={{ duration: 1, repeat: Infinity, ease: 'linear' }}\r\n            className=\"w-4 h-4 border-2 border-current border-t-transparent rounded-full\"\r\n          />\r\n        )}\r\n\r\n        {/* Icon */}\r\n        {Icon && !loading && (\r\n          <motion.div\r\n            initial={{ opacity: 0, x: -10 }}\r\n            animate={{ opacity: 1, x: 0 }}\r\n            transition={{ delay: 0.1 }}\r\n          >\r\n            <Icon className=\"w-4 h-4\" />\r\n          </motion.div>\r\n        )}\r\n\r\n        {/* Content */}\r\n        <motion.span\r\n          initial={{ opacity: 0, y: 10 }}\r\n          animate={{ opacity: 1, y: 0 }}\r\n          transition={{ delay: 0.2 }}\r\n          className=\"relative z-10\"\r\n        >\r\n          {loading ? 'Loading...' : children}\r\n        </motion.span>\r\n\r\n        {/* Glow effect */}\r\n        {glow && (\r\n          <div className=\"absolute inset-0 rounded-xl bg-gradient-to-r from-blue-500/20 to-purple-500/20 blur-xl opacity-0 group-hover:opacity-100 transition-opacity duration-300 -z-10\" />\r\n        )}\r\n\r\n        {/* Ripple effect */}\r\n        <div className=\"absolute inset-0 rounded-xl overflow-hidden\">\r\n          <div className=\"absolute inset-0 bg-white/10 opacity-0 group-active:opacity-100 transition-opacity duration-150\" />\r\n        </div>\r\n      </motion.button>\r\n    );\r\n  }\r\n);\r\n\r\nGlassButton.displayName = 'GlassButton';\r\n\r\nexport default GlassButton;\r\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\shared\\components\\ui\\GlassCard.tsx","messages":[{"ruleId":null,"nodeType":null,"fatal":true,"severity":2,"message":"Parsing error: w:\\CodeDeX\\WhatsDeX\\shared\\components\\ui\\GlassCard.tsx was not found by the project service. Consider either including it in the tsconfig.json or including it in allowDefaultProject."}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":1,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { motion } from 'framer-motion';\r\nimport { cn } from '../../lib/utils';\r\nimport * as React from 'react';\r\n\r\ninterface GlassCardProps extends React.HTMLAttributes<HTMLDivElement> {\r\n  children: React.ReactNode;\r\n  hover?: boolean;\r\n  glow?: boolean;\r\n  variant?: 'default' | 'dark' | 'accent' | 'success' | 'warning' | 'danger';\r\n}\r\n\r\nconst GlassCard = React.forwardRef<HTMLDivElement, GlassCardProps>(\r\n  ({ children, className, hover = true, glow = false, variant = 'default', ...props }, ref) => {\r\n    const variants = {\r\n      default: {\r\n        background: 'bg-white/30 dark:bg-slate-900/30',\r\n        border: 'border-white/20 dark:border-slate-700/50',\r\n        shadow: 'shadow-glass'\r\n      },\r\n      dark: {\r\n        background: 'bg-slate-900/40 dark:bg-slate-800/40',\r\n        border: 'border-slate-700/50',\r\n        shadow: 'shadow-glass'\r\n      },\r\n      accent: {\r\n        background: 'bg-gradient-to-br from-blue-500/10 to-purple-500/10',\r\n        border: 'border-blue-500/30',\r\n        shadow: 'shadow-neon'\r\n      },\r\n      success: {\r\n        background: 'bg-gradient-to-br from-green-500/10 to-emerald-500/10',\r\n        border: 'border-green-500/30',\r\n        shadow: 'shadow-glass'\r\n      },\r\n      warning: {\r\n        background: 'bg-gradient-to-br from-yellow-500/10 to-orange-500/10',\r\n        border: 'border-yellow-500/30',\r\n        shadow: 'shadow-glass'\r\n      },\r\n      danger: {\r\n        background: 'bg-gradient-to-br from-red-500/10 to-pink-500/10',\r\n        border: 'border-red-500/30',\r\n        shadow: 'shadow-glass'\r\n      }\r\n    };\r\n\r\n    const variantStyles = variants[variant] || variants.default;\r\n\r\n    return (\r\n      <motion.div\r\n        ref={ref}\r\n        initial={{ opacity: 0, y: 20 }}\r\n        animate={{ opacity: 1, y: 0 }}\r\n        transition={{ duration: 0.3 }}\r\n        whileHover={hover ? {\r\n          y: -5,\r\n          scale: 1.02,\r\n          transition: { duration: 0.2 }\r\n        } : {}}\r\n        className={cn(\r\n          \"relative overflow-hidden rounded-2xl backdrop-blur-xl border\",\r\n          variantStyles.background,\r\n          variantStyles.border,\r\n          variantStyles.shadow,\r\n          glow && \"shadow-neon\",\r\n          \"transition-all duration-300\",\r\n          className\r\n        )}\r\n        {...props}\r\n      >\r\n        {/* Subtle gradient overlay */}\r\n        <div className=\"absolute inset-0 bg-gradient-to-br from-white/5 to-transparent pointer-events-none\" />\r\n\r\n        {/* Animated border */}\r\n        <div className=\"absolute inset-0 rounded-2xl bg-gradient-to-r from-transparent via-white/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500 animate-shimmer\" />\r\n\r\n        {/* Content */}\r\n        <div className=\"relative z-10\">\r\n          {children}\r\n        </div>\r\n\r\n        {/* Floating particles effect */}\r\n        {glow && (\r\n          <div className=\"absolute inset-0 pointer-events-none\">\r\n            <div className=\"absolute top-4 right-4 w-2 h-2 bg-blue-400 rounded-full animate-float opacity-60\" />\r\n            <div className=\"absolute bottom-4 left-4 w-1 h-1 bg-purple-400 rounded-full animate-float opacity-40\" style={{ animationDelay: '1s' }} />\r\n            <div className=\"absolute top-1/2 right-8 w-1.5 h-1.5 bg-indigo-400 rounded-full animate-float opacity-50\" style={{ animationDelay: '2s' }} />\r\n          </div>\r\n        )}\r\n      </motion.div>\r\n    );\r\n  }\r\n);\r\n\r\nGlassCard.displayName = 'GlassCard';\r\n\r\nexport default GlassCard;\r\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\shared\\components\\ui\\Skeleton.tsx","messages":[{"ruleId":null,"nodeType":null,"fatal":true,"severity":2,"message":"Parsing error: w:\\CodeDeX\\WhatsDeX\\shared\\components\\ui\\Skeleton.tsx was not found by the project service. Consider either including it in the tsconfig.json or including it in allowDefaultProject."}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":1,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { motion } from 'framer-motion';\r\nimport { cn } from '../../lib/utils';\r\nimport * as React from 'react';\r\n\r\ninterface SkeletonProps extends React.HTMLAttributes<HTMLDivElement> {\r\n  variant?: 'default' | 'card' | 'text' | 'avatar' | 'button';\r\n  animate?: boolean;\r\n}\r\n\r\nconst Skeleton = React.forwardRef<HTMLDivElement, SkeletonProps>(\r\n  ({ className, variant = 'default', animate = true, ...props }, ref) => {\r\n    const variants = {\r\n      default: 'bg-gradient-to-r from-slate-200 via-slate-100 to-slate-200 dark:from-slate-700 dark:via-slate-600 dark:to-slate-700',\r\n      card: 'bg-gradient-to-r from-white/20 via-white/10 to-white/20 dark:from-slate-700/50 dark:via-slate-600/50 dark:to-slate-700/50',\r\n      text: 'bg-gradient-to-r from-slate-300 via-slate-200 to-slate-300 dark:from-slate-600 dark:via-slate-500 dark:to-slate-600',\r\n      avatar: 'bg-gradient-to-r from-slate-300 via-slate-200 to-slate-300 dark:from-slate-600 dark:via-slate-500 dark:to-slate-600 rounded-full',\r\n      button: 'bg-gradient-to-r from-blue-200 via-blue-100 to-blue-200 dark:from-blue-800 dark:via-blue-700 dark:to-blue-800 rounded-xl'\r\n    };\r\n\r\n    const shimmerVariants = {\r\n      initial: { x: '-100%' },\r\n      animate: {\r\n        x: '100%',\r\n        transition: {\r\n          duration: 1.5,\r\n          repeat: Infinity,\r\n          ease: 'easeInOut'\r\n        }\r\n      }\r\n    };\r\n\r\n    return (\r\n      <div\r\n        ref={ref}\r\n        className={cn(\r\n          'relative overflow-hidden rounded-md',\r\n          variants[variant] || variants.default,\r\n          className\r\n        )}\r\n        {...props}\r\n      >\r\n        {animate && (\r\n          <motion.div\r\n            variants={shimmerVariants}\r\n            initial=\"initial\"\r\n            animate=\"animate\"\r\n            className=\"absolute inset-0 bg-gradient-to-r from-transparent via-white/60 to-transparent dark:via-white/20\"\r\n          />\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n);\r\n\r\nSkeleton.displayName = 'Skeleton';\r\n\r\n// Pre-built skeleton components\r\nexport const SkeletonCard: React.FC<React.HTMLAttributes<HTMLDivElement>> = ({ className, ...props }) => (\r\n  <div className={cn('space-y-4 p-6', className)} {...props}>\r\n    <Skeleton className=\"h-4 w-3/4\" />\r\n    <Skeleton className=\"h-4 w-1/2\" />\r\n    <div className=\"space-y-2\">\r\n      <Skeleton className=\"h-3 w-full\" />\r\n      <Skeleton className=\"h-3 w-4/5\" />\r\n      <Skeleton className=\"h-3 w-2/3\" />\r\n    </div>\r\n  </div>\r\n);\r\n\r\ninterface SkeletonTableProps extends React.HTMLAttributes<HTMLDivElement> {\r\n  rows?: number;\r\n  columns?: number;\r\n}\r\n\r\nexport const SkeletonTable: React.FC<SkeletonTableProps> = ({ rows = 5, columns = 4, className, ...props }) => (\r\n  <div className={cn('space-y-3', className)} {...props}>\r\n    {/* Header */}\r\n    <div className=\"flex space-x-4\">\r\n      {Array.from({ length: columns }).map((_, i) => (\r\n        <Skeleton key={`header-${i}`} className=\"h-4 flex-1\" />\r\n      ))}\r\n    </div>\r\n\r\n    {/* Rows */}\r\n    {Array.from({ length: rows }).map((_, rowIndex) => (\r\n      <div key={`row-${rowIndex}`} className=\"flex space-x-4\">\r\n        {Array.from({ length: columns }).map((_, colIndex) => (\r\n          <Skeleton\r\n            key={`cell-${rowIndex}-${colIndex}`}\r\n            className=\"h-8 flex-1\"\r\n          />\r\n        ))}\r\n      </div>\r\n    ))}\r\n  </div>\r\n);\r\n\r\ninterface SkeletonAvatarProps extends React.HTMLAttributes<HTMLDivElement> {\r\n  size?: 'sm' | 'md' | 'lg' | 'xl';\r\n}\r\n\r\nexport const SkeletonAvatar: React.FC<SkeletonAvatarProps> = ({ size = 'md', className, ...props }) => {\r\n  const sizes = {\r\n    sm: 'w-8 h-8',\r\n    md: 'w-12 h-12',\r\n    lg: 'w-16 h-16',\r\n    xl: 'w-24 h-24'\r\n  };\r\n\r\n  return (\r\n    <Skeleton\r\n      variant=\"avatar\"\r\n      className={cn(sizes[size] || sizes.md, className)}\r\n      {...props}\r\n    />\r\n  );\r\n};\r\n\r\ninterface SkeletonTextProps extends React.HTMLAttributes<HTMLDivElement> {\r\n  lines?: number;\r\n}\r\n\r\nexport const SkeletonText: React.FC<SkeletonTextProps> = ({ lines = 3, className, ...props }) => (\r\n  <div className={cn('space-y-2', className)} {...props}>\r\n    {Array.from({ length: lines }).map((_, i) => (\r\n      <Skeleton\r\n        key={i}\r\n        variant=\"text\"\r\n        className={cn(\r\n          'h-4',\r\n          i === lines - 1 ? 'w-3/4' : 'w-full' // Last line shorter\r\n        )}\r\n      />\r\n    ))}\r\n  </div>\r\n);\r\n\r\nexport const SkeletonButton: React.FC<React.HTMLAttributes<HTMLDivElement>> = ({ className, ...props }) => (\r\n  <Skeleton\r\n    variant=\"button\"\r\n    className={cn('h-10 w-24', className)}\r\n    {...props}\r\n  />\r\n);\r\n\r\n// Complex skeleton for dashboard cards\r\nexport const SkeletonDashboardCard: React.FC<React.HTMLAttributes<HTMLDivElement>> = ({ className, ...props }) => (\r\n  <div className={cn('p-6 space-y-4', className)} {...props}>\r\n    <div className=\"flex items-center justify-between\">\r\n      <Skeleton className=\"h-5 w-32\" />\r\n      <Skeleton className=\"h-8 w-8 rounded-full\" />\r\n    </div>\r\n\r\n    <div className=\"space-y-3\">\r\n      <Skeleton className=\"h-8 w-24\" />\r\n      <Skeleton className=\"h-4 w-48\" />\r\n    </div>\r\n\r\n    <div className=\"flex space-x-2\">\r\n      <Skeleton className=\"h-6 w-16\" />\r\n      <Skeleton className=\"h-6 w-20\" />\r\n      <Skeleton className=\"h-6 w-14\" />\r\n    </div>\r\n  </div>\r\n);\r\n\r\n// Skeleton for charts/graphs\r\nexport const SkeletonChart: React.FC<React.HTMLAttributes<HTMLDivElement>> = ({ className, ...props }) => (\r\n  <div className={cn('space-y-4', className)} {...props}>\r\n    <div className=\"flex justify-between items-center\">\r\n      <Skeleton className=\"h-5 w-32\" />\r\n      <div className=\"flex space-x-2\">\r\n        <Skeleton className=\"h-6 w-12\" />\r\n        <Skeleton className=\"h-6 w-12\" />\r\n        <Skeleton className=\"h-6 w-12\" />\r\n      </div>\r\n    </div>\r\n\r\n    <div className=\"space-y-2\">\r\n      {Array.from({ length: 5 }).map((_, i) => (\r\n        <Skeleton\r\n          key={i}\r\n          className=\"h-8\"\r\n          style={{\r\n            width: `${Math.random() * 40 + 60}%` // Random width between 60-100%\r\n          }}\r\n        />\r\n      ))}\r\n    </div>\r\n  </div>\r\n);\r\n\r\nexport { Skeleton };\r\nexport default Skeleton;\r\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\shared\\components\\ui\\badge.tsx","messages":[{"ruleId":null,"nodeType":null,"fatal":true,"severity":2,"message":"Parsing error: w:\\CodeDeX\\WhatsDeX\\shared\\components\\ui\\badge.tsx was not found by the project service. Consider either including it in the tsconfig.json or including it in allowDefaultProject."}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":1,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from \"react\"\r\nimport { cva, type VariantProps } from \"class-variance-authority\"\r\nimport { cn } from \"../../lib/utils\"\r\n\r\nconst badgeVariants = cva(\r\n  \"inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\",\r\n  {\r\n    variants: {\r\n      variant: {\r\n        default:\r\n          \"border-transparent bg-primary text-primary-foreground hover:bg-primary/80\",\r\n        secondary:\r\n          \"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80\",\r\n        destructive:\r\n          \"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80\",\r\n        outline: \"text-foreground\",\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      variant: \"default\",\r\n    },\r\n  }\r\n)\r\n\r\nfunction Badge({\r\n  className,\r\n  variant,\r\n  ...props\r\n}: React.ComponentProps<\"div\"> & VariantProps<typeof badgeVariants>) {\r\n  return (\r\n    <div className={cn(badgeVariants({ variant }), className)} {...props} />\r\n  )\r\n}\r\n\r\nexport { Badge, badgeVariants }","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\shared\\components\\ui\\button.tsx","messages":[{"ruleId":null,"nodeType":null,"fatal":true,"severity":2,"message":"Parsing error: w:\\CodeDeX\\WhatsDeX\\shared\\components\\ui\\button.tsx was not found by the project service. Consider either including it in the tsconfig.json or including it in allowDefaultProject."}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":1,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from \"react\"\r\nimport { Slot } from \"@radix-ui/react-slot\"\r\nimport { cva, type VariantProps } from \"class-variance-authority\"\r\n\r\nimport { cn } from \"../../lib/utils\"\r\n\r\nconst buttonVariants = cva(\r\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\r\n  {\r\n    variants: {\r\n      variant: {\r\n        default: \"bg-primary text-primary-foreground hover:bg-primary/90\",\r\n        destructive:\r\n          \"bg-destructive text-destructive-foreground hover:bg-destructive/90\",\r\n        outline:\r\n          \"border border-input bg-background hover:bg-accent hover:text-accent-foreground\",\r\n        secondary:\r\n          \"bg-secondary text-secondary-foreground hover:bg-secondary/80\",\r\n        ghost: \"hover:bg-accent hover:text-accent-foreground\",\r\n        link: \"text-primary underline-offset-4 hover:underline\",\r\n      },\r\n      size: {\r\n        default: \"h-10 px-4 py-2\",\r\n        sm: \"h-9 rounded-md px-3\",\r\n        lg: \"h-11 rounded-md px-8\",\r\n        icon: \"h-10 w-10\",\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      variant: \"default\",\r\n      size: \"default\",\r\n    },\r\n  }\r\n)\r\n\r\nexport interface ButtonProps\r\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\r\n    VariantProps<typeof buttonVariants> {\r\n  asChild?: boolean\r\n}\r\n\r\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\r\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\r\n    const Comp = asChild ? Slot : \"button\"\r\n    return (\r\n      <Comp\r\n        className={cn(buttonVariants({ variant, size, className }))}\r\n        ref={ref}\r\n        {...props}\r\n      />\r\n    )\r\n  }\r\n)\r\nButton.displayName = \"Button\"\r\n\r\nexport { Button, buttonVariants }\r\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\shared\\components\\ui\\card.tsx","messages":[{"ruleId":null,"nodeType":null,"fatal":true,"severity":2,"message":"Parsing error: w:\\CodeDeX\\WhatsDeX\\shared\\components\\ui\\card.tsx was not found by the project service. Consider either including it in the tsconfig.json or including it in allowDefaultProject."}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":1,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from \"react\"\r\n\r\nimport { cn } from \"../../lib/utils\"\r\n\r\nconst Card = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.HTMLAttributes<HTMLDivElement>\r\n>(({ className, ...props }, ref) => (\r\n  <div\r\n    ref={ref}\r\n    className={cn(\r\n      \"rounded-lg border bg-card text-card-foreground shadow-sm\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nCard.displayName = \"Card\"\r\n\r\nconst CardHeader = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.HTMLAttributes<HTMLDivElement>\r\n>(({ className, ...props }, ref) => (\r\n  <div\r\n    ref={ref}\r\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\r\n    {...props}\r\n  />\r\n))\r\nCardHeader.displayName = \"CardHeader\"\r\n\r\nconst CardTitle = React.forwardRef<\r\n  HTMLParagraphElement,\r\n  React.HTMLAttributes<HTMLHeadingElement>\r\n>(({ className, ...props }, ref) => (\r\n  <h3\r\n    ref={ref}\r\n    className={cn(\r\n      \"text-2xl font-semibold leading-none tracking-tight\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nCardTitle.displayName = \"CardTitle\"\r\n\r\nconst CardDescription = React.forwardRef<\r\n  HTMLParagraphElement,\r\n  React.HTMLAttributes<HTMLParagraphElement>\r\n>(({ className, ...props }, ref) => (\r\n  <p\r\n    ref={ref}\r\n    className={cn(\"text-sm text-muted-foreground\", className)}\r\n    {...props}\r\n  />\r\n))\r\nCardDescription.displayName = \"CardDescription\"\r\n\r\nconst CardContent = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.HTMLAttributes<HTMLDivElement>\r\n>(({ className, ...props }, ref) => (\r\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\r\n))\r\nCardContent.displayName = \"CardContent\"\r\n\r\nconst CardFooter = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.HTMLAttributes<HTMLDivElement>\r\n>(({ className, ...props }, ref) => (\r\n  <div\r\n    ref={ref}\r\n    className={cn(\"flex items-center p-6 pt-0\", className)}\r\n    {...props}\r\n  />\r\n))\r\nCardFooter.displayName = \"CardFooter\"\r\n\r\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent }","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\shared\\components\\ui\\dialog.tsx","messages":[{"ruleId":null,"nodeType":null,"fatal":true,"severity":2,"message":"Parsing error: w:\\CodeDeX\\WhatsDeX\\shared\\components\\ui\\dialog.tsx was not found by the project service. Consider either including it in the tsconfig.json or including it in allowDefaultProject."}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":1,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\"\r\n\r\nimport * as React from \"react\"\r\nimport * as DialogPrimitive from \"@radix-ui/react-dialog\"\r\nimport { X } from \"lucide-react\"\r\n\r\nimport { cn } from \"../../lib/utils\"\r\n\r\nconst Dialog = DialogPrimitive.Root\r\n\r\nconst DialogTrigger = DialogPrimitive.Trigger\r\n\r\nconst DialogPortal = DialogPrimitive.Portal\r\n\r\nconst DialogClose = DialogPrimitive.Close\r\n\r\nconst DialogOverlay = React.forwardRef<\r\n  React.ElementRef<typeof DialogPrimitive.Overlay>,\r\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Overlay>\r\n>(({ className, ...props }, ref) => (\r\n  <DialogPrimitive.Overlay\r\n    ref={ref}\r\n    className={cn(\r\n      \"fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nDialogOverlay.displayName = DialogPrimitive.Overlay.displayName\r\n\r\nconst DialogContent = React.forwardRef<\r\n  React.ElementRef<typeof DialogPrimitive.Content>,\r\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Content>\r\n>(({ className, children, ...props }, ref) => (\r\n  <DialogPortal>\r\n    <DialogOverlay />\r\n    <DialogPrimitive.Content\r\n      ref={ref}\r\n      className={cn(\r\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\r\n        className\r\n      )}\r\n      {...props}\r\n    >\r\n      {children}\r\n      <DialogPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground\">\r\n        <X className=\"h-4 w-4\" />\r\n        <span className=\"sr-only\">Close</span>\r\n      </DialogPrimitive.Close>\r\n    </DialogPrimitive.Content>\r\n  </DialogPortal>\r\n))\r\nDialogContent.displayName = DialogPrimitive.Content.displayName\r\n\r\nconst DialogHeader = ({\r\n  className,\r\n  ...props\r\n}: React.HTMLAttributes<HTMLDivElement>) => (\r\n  <div\r\n    className={cn(\r\n      \"flex flex-col space-y-1.5 text-center sm:text-left\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n)\r\nDialogHeader.displayName = \"DialogHeader\"\r\n\r\nconst DialogFooter = ({\r\n  className,\r\n  ...props\r\n}: React.HTMLAttributes<HTMLDivElement>) => (\r\n  <div\r\n    className={cn(\r\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n)\r\nDialogFooter.displayName = \"DialogFooter\"\r\n\r\nconst DialogTitle = React.forwardRef<\r\n  React.ElementRef<typeof DialogPrimitive.Title>,\r\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Title>\r\n>(({ className, ...props }, ref) => (\r\n  <DialogPrimitive.Title\r\n    ref={ref}\r\n    className={cn(\r\n      \"text-lg font-semibold leading-none tracking-tight\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nDialogTitle.displayName = DialogPrimitive.Title.displayName\r\n\r\nconst DialogDescription = React.forwardRef<\r\n  React.ElementRef<typeof DialogPrimitive.Description>,\r\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Description>\r\n>(({ className, ...props }, ref) => (\r\n  <DialogPrimitive.Description\r\n    ref={ref}\r\n    className={cn(\"text-sm text-muted-foreground\", className)}\r\n    {...props}\r\n  />\r\n))\r\nDialogDescription.displayName = DialogPrimitive.Description.displayName\r\n\r\nexport {\r\n  Dialog,\r\n  DialogPortal,\r\n  DialogOverlay,\r\n  DialogClose,\r\n  DialogTrigger,\r\n  DialogContent,\r\n  DialogHeader,\r\n  DialogFooter,\r\n  DialogTitle,\r\n  DialogDescription,\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\shared\\components\\ui\\dropdown-menu.tsx","messages":[{"ruleId":null,"nodeType":null,"fatal":true,"severity":2,"message":"Parsing error: w:\\CodeDeX\\WhatsDeX\\shared\\components\\ui\\dropdown-menu.tsx was not found by the project service. Consider either including it in the tsconfig.json or including it in allowDefaultProject."}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":1,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\"\r\n\r\nimport * as React from \"react\"\r\nimport * as DropdownMenuPrimitive from \"@radix-ui/react-dropdown-menu\"\r\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\r\n\r\nimport { cn } from \"../../lib/utils\"\r\n\r\nconst DropdownMenu = DropdownMenuPrimitive.Root\r\n\r\nconst DropdownMenuTrigger = React.forwardRef<\r\n  React.ElementRef<typeof DropdownMenuPrimitive.Trigger>,\r\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Trigger>\r\n>(({ className, ...props }, ref) => (\r\n  <DropdownMenuPrimitive.Trigger\r\n    ref={ref}\r\n    className={cn(\r\n      \"inline-flex h-10 select-none justify-center rounded-md bg-background px-3 py-2 text-sm font-medium ring-offset-background transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nDropdownMenuTrigger.displayName = DropdownMenuPrimitive.Trigger.displayName\r\n\r\nconst DropdownMenuGroup = React.forwardRef<\r\n  React.ElementRef<typeof DropdownMenuPrimitive.Group>,\r\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Group>\r\n>(({ className, ...props }, ref) => (\r\n  <DropdownMenuPrimitive.Group\r\n    ref={ref}\r\n    className={cn(\r\n      \"overflow-hidden p-1 text-foreground data-[state=open]:bg-accent\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nDropdownMenuGroup.displayName = DropdownMenuPrimitive.Group.displayName\r\n\r\nconst DropdownMenuPortal = DropdownMenuPrimitive.Portal\r\n\r\nconst DropdownMenuSub = DropdownMenuPrimitive.Sub\r\n\r\nconst DropdownMenuRadioGroup = React.forwardRef<\r\n  React.ElementRef<typeof DropdownMenuPrimitive.RadioGroup>,\r\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.RadioGroup>\r\n>(({ className, ...props }, ref) => (\r\n  <DropdownMenuPrimitive.RadioGroup\r\n    ref={ref}\r\n    className={cn(\r\n      \"overflow-hidden p-1 text-foreground\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nDropdownMenuRadioGroup.displayName = DropdownMenuPrimitive.RadioGroup.displayName\r\n\r\nconst DropdownMenuSubTrigger = React.forwardRef<\r\n  React.ElementRef<typeof DropdownMenuPrimitive.SubTrigger>,\r\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubTrigger> & {\r\n    inset?: boolean\r\n  }\r\n>(({ className, inset, children, ...props }, ref) => (\r\n  <DropdownMenuPrimitive.SubTrigger\r\n    ref={ref}\r\n    className={cn(\r\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[state=open]:bg-accent focus:bg-accent\",\r\n      inset && \"pl-8\",\r\n      className\r\n    )}\r\n    {...props}\r\n  >\r\n    {children}\r\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\r\n  </DropdownMenuPrimitive.SubTrigger>\r\n))\r\nDropdownMenuSubTrigger.displayName =\r\n  DropdownMenuPrimitive.SubTrigger.displayName\r\n\r\nconst DropdownMenuSubContent = React.forwardRef<\r\n  React.ElementRef<typeof DropdownMenuPrimitive.SubContent>,\r\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubContent>\r\n>(({ className, ...props }, ref) => (\r\n  <DropdownMenuPrimitive.SubContent\r\n    ref={ref}\r\n    className={cn(\r\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-background p-1 text-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:slide-out-to-right-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-right-1/2 data-[state=open]:slide-in-from-top-[48%]\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nDropdownMenuSubContent.displayName =\r\n  DropdownMenuPrimitive.SubContent.displayName\r\n\r\nconst DropdownMenuContent = React.forwardRef<\r\n  React.ElementRef<typeof DropdownMenuPrimitive.Content>,\r\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Content>\r\n>(({ className, sideOffset = 4, ...props }, ref) => (\r\n  <DropdownMenuPrimitive.Portal>\r\n    <DropdownMenuPrimitive.Content\r\n      ref={ref}\r\n      sideOffset={sideOffset}\r\n      className={cn(\r\n        \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-background p-1 text-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  </DropdownMenuPrimitive.Portal>\r\n))\r\nDropdownMenuContent.displayName = DropdownMenuPrimitive.Content.displayName\r\n\r\nconst DropdownMenuItem = React.forwardRef<\r\n  React.ElementRef<typeof DropdownMenuPrimitive.Item>,\r\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Item> & {\r\n    inset?: boolean\r\n  }\r\n>(({ className, inset, ...props }, ref) => (\r\n  <DropdownMenuPrimitive.Item\r\n    ref={ref}\r\n    className={cn(\r\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\r\n      inset && \"pl-8\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nDropdownMenuItem.displayName = DropdownMenuPrimitive.Item.displayName\r\n\r\nconst DropdownMenuCheckboxItem = React.forwardRef<\r\n  React.ElementRef<typeof DropdownMenuPrimitive.CheckboxItem>,\r\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.CheckboxItem>\r\n>(({ className, children, checked, ...props }, ref) => (\r\n  <DropdownMenuPrimitive.CheckboxItem\r\n    ref={ref}\r\n    className={cn(\r\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\r\n      className\r\n    )}\r\n    checked={checked}\r\n    {...props}\r\n  >\r\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\r\n      <DropdownMenuPrimitive.ItemIndicator>\r\n        <Check className=\"h-4 w-4\" />\r\n      </DropdownMenuPrimitive.ItemIndicator>\r\n    </span>\r\n    {children}\r\n  </DropdownMenuPrimitive.CheckboxItem>\r\n))\r\nDropdownMenuCheckboxItem.displayName =\r\n  DropdownMenuPrimitive.CheckboxItem.displayName\r\n\r\nconst DropdownMenuRadioItem = React.forwardRef<\r\n  React.ElementRef<typeof DropdownMenuPrimitive.RadioItem>,\r\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.RadioItem>\r\n>(({ className, children, ...props }, ref) => (\r\n  <DropdownMenuPrimitive.RadioItem\r\n    ref={ref}\r\n    className={cn(\r\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\r\n      className\r\n    )}\r\n    {...props}\r\n  >\r\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\r\n      <DropdownMenuPrimitive.ItemIndicator>\r\n        <Circle className=\"h-2 w-2 fill-current\" />\r\n      </DropdownMenuPrimitive.ItemIndicator>\r\n    </span>\r\n    {children}\r\n  </DropdownMenuPrimitive.RadioItem>\r\n))\r\nDropdownMenuRadioItem.displayName = DropdownMenuPrimitive.RadioItem.displayName\r\n\r\nconst DropdownMenuLabel = React.forwardRef<\r\n  React.ElementRef<typeof DropdownMenuPrimitive.Label>,\r\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Label> & {\r\n    inset?: boolean\r\n  }\r\n>(({ className, inset, ...props }, ref) => (\r\n  <DropdownMenuPrimitive.Label\r\n    ref={ref}\r\n    className={cn(\r\n      \"px-2 py-1.5 text-sm font-semibold\",\r\n      inset && \"pl-8\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nDropdownMenuLabel.displayName = DropdownMenuPrimitive.Label.displayName\r\n\r\nconst DropdownMenuSeparator = React.forwardRef<\r\n  React.ElementRef<typeof DropdownMenuPrimitive.Separator>,\r\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Separator>\r\n>(({ className, ...props }, ref) => (\r\n  <DropdownMenuPrimitive.Separator\r\n    ref={ref}\r\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\r\n    {...props}\r\n  />\r\n))\r\nDropdownMenuSeparator.displayName = DropdownMenuPrimitive.Separator.displayName\r\n\r\nconst DropdownMenuShortcut = ({\r\n  className,\r\n  ...props\r\n}: React.HTMLAttributes<HTMLSpanElement>) => {\r\n  return (\r\n    <span\r\n      className={cn(\"ml-auto text-xs tracking-widest opacity-60\", className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\nDropdownMenuShortcut.displayName = \"DropdownMenuShortcut\"\r\n\r\nexport {\r\n  DropdownMenu,\r\n  DropdownMenuTrigger,\r\n  DropdownMenuGroup,\r\n  DropdownMenuPortal,\r\n  DropdownMenuSub,\r\n  DropdownMenuRadioGroup,\r\n  DropdownMenuSubTrigger,\r\n  DropdownMenuSubContent,\r\n  DropdownMenuContent,\r\n  DropdownMenuItem,\r\n  DropdownMenuCheckboxItem,\r\n  DropdownMenuRadioItem,\r\n  DropdownMenuLabel,\r\n  DropdownMenuSeparator,\r\n  DropdownMenuShortcut,\r\n}","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\shared\\components\\ui\\form.tsx","messages":[{"ruleId":null,"nodeType":null,"fatal":true,"severity":2,"message":"Parsing error: w:\\CodeDeX\\WhatsDeX\\shared\\components\\ui\\form.tsx was not found by the project service. Consider either including it in the tsconfig.json or including it in allowDefaultProject."}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":1,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\"\r\n\r\nimport * as React from \"react\"\r\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\r\nimport { Slot } from \"@radix-ui/react-slot\"\r\nimport {\r\n  Controller,\r\n  FormProvider,\r\n  useFormContext,\r\n  type ControllerProps,\r\n  type FieldPath,\r\n  type FieldValues,\r\n} from \"react-hook-form\"\r\n\r\nimport { cn } from \"../../lib/utils\"\r\nimport { Label } from \"./label\"\r\n\r\nconst Form = FormProvider\r\n\r\ntype FormFieldContextValue<\r\n  TFieldValues extends FieldValues = FieldValues,\r\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\r\n> = {\r\n  name: TName\r\n}\r\n\r\nconst FormFieldContext = React.createContext<FormFieldContextValue>(\r\n  {} as FormFieldContextValue\r\n)\r\n\r\nconst FormField = <\r\n  TFieldValues extends FieldValues = FieldValues,\r\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\r\n>({\r\n  ...props\r\n}: ControllerProps<TFieldValues, TName>) => {\r\n  return (\r\n    <FormFieldContext.Provider value={{ name: props.name }}>\r\n      <Controller {...props} />\r\n    </FormFieldContext.Provider>\r\n  )\r\n}\r\n\r\nconst useFormField = () => {\r\n  const fieldContext = React.useContext(FormFieldContext)\r\n  const itemContext = React.useContext(FormItemContext)\r\n  const { getFieldState, formState } = useFormContext()\r\n\r\n  const fieldState = getFieldState(fieldContext.name, formState)\r\n\r\n  if (!fieldContext) {\r\n    throw new Error(\"useFormField should be used within <FormField>\")\r\n  }\r\n\r\n  const { id } = itemContext\r\n\r\n  return {\r\n    id,\r\n    name: fieldContext.name,\r\n    formItemId: `${id}-form-item`,\r\n    formDescriptionId: `${id}-form-item-description`,\r\n    formMessageId: `${id}-form-item-message`,\r\n    ...fieldState,\r\n  }\r\n}\r\n\r\ntype FormItemContextValue = {\r\n  id: string\r\n}\r\n\r\nconst FormItemContext = React.createContext<FormItemContextValue>(\r\n  {} as FormItemContextValue\r\n)\r\n\r\nconst FormItem = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.HTMLAttributes<HTMLDivElement>\r\n>(({ className, ...props }, ref) => {\r\n  const id = React.useId()\r\n\r\n  return (\r\n    <FormItemContext.Provider value={{ id }}>\r\n      <div ref={ref} className={cn(\"space-y-2\", className)} {...props} />\r\n    </FormItemContext.Provider>\r\n  )\r\n})\r\nFormItem.displayName = \"FormItem\"\r\n\r\nconst FormLabel = React.forwardRef<\r\n  React.ElementRef<typeof LabelPrimitive.Root>,\r\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root>\r\n>(({ className, ...props }, ref) => {\r\n  const { error, formItemId } = useFormField()\r\n\r\n  return (\r\n    <Label\r\n      ref={ref}\r\n      className={cn(error && \"text-destructive\", className)}\r\n      htmlFor={formItemId}\r\n      {...props}\r\n    />\r\n  )\r\n})\r\nFormLabel.displayName = \"FormLabel\"\r\n\r\nconst FormControl = React.forwardRef<\r\n  React.ElementRef<typeof Slot>,\r\n  React.ComponentPropsWithoutRef<typeof Slot>\r\n>(({ ...props }, ref) => {\r\n  const { error, formItemId, formDescriptionId, formMessageId } = useFormField()\r\n\r\n  return (\r\n    <Slot\r\n      ref={ref}\r\n      id={formItemId}\r\n      aria-describedby={\r\n        !error\r\n          ? `${formDescriptionId}`\r\n          : `${formDescriptionId} ${formMessageId}`\r\n      }\r\n      aria-invalid={!!error}\r\n      {...props}\r\n    />\r\n  )\r\n})\r\nFormControl.displayName = \"FormControl\"\r\n\r\nconst FormDescription = React.forwardRef<\r\n  HTMLParagraphElement,\r\n  React.HTMLAttributes<HTMLParagraphElement>\r\n>(({ className, ...props }, ref) => {\r\n  const { formDescriptionId } = useFormField()\r\n\r\n  return (\r\n    <p\r\n      ref={ref}\r\n      id={formDescriptionId}\r\n      className={cn(\"text-sm text-muted-foreground\", className)}\r\n      {...props}\r\n    />\r\n  )\r\n})\r\nFormDescription.displayName = \"FormDescription\"\r\n\r\nconst FormMessage = React.forwardRef<\r\n  HTMLParagraphElement,\r\n  React.HTMLAttributes<HTMLParagraphElement>\r\n>(({ className, children, ...props }, ref) => {\r\n  const { error, formMessageId } = useFormField()\r\n  const body = error ? String(error?.message ?? \"\") : children\r\n\r\n  if (!body) {\r\n    return null\r\n  }\r\n\r\n  return (\r\n    <p\r\n      ref={ref}\r\n      id={formMessageId}\r\n      className={cn(\"text-sm font-medium text-destructive\", className)}\r\n      {...props}\r\n    >\r\n      {body}\r\n    </p>\r\n  )\r\n})\r\nFormMessage.displayName = \"FormMessage\"\r\n\r\nexport {\r\n  useFormField,\r\n  Form,\r\n  FormItem,\r\n  FormLabel,\r\n  FormControl,\r\n  FormDescription,\r\n  FormMessage,\r\n  FormField,\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\shared\\components\\ui\\input.tsx","messages":[{"ruleId":null,"nodeType":null,"fatal":true,"severity":2,"message":"Parsing error: w:\\CodeDeX\\WhatsDeX\\shared\\components\\ui\\input.tsx was not found by the project service. Consider either including it in the tsconfig.json or including it in allowDefaultProject."}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":1,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from \"react\"\r\n\r\nimport { cn } from \"../../lib/utils\"\r\n\r\nexport interface InputProps\r\n  extends React.InputHTMLAttributes<HTMLInputElement> {}\r\n\r\nconst Input = React.forwardRef<HTMLInputElement, InputProps>(\r\n  ({ className, type, ...props }, ref) => {\r\n    return (\r\n      <input\r\n        type={type}\r\n        className={cn(\r\n          \"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\",\r\n          className\r\n        )}\r\n        ref={ref}\r\n        {...props}\r\n      />\r\n    )\r\n  }\r\n)\r\nInput.displayName = \"Input\"\r\n\r\nexport { Input }","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\shared\\components\\ui\\label.tsx","messages":[{"ruleId":null,"nodeType":null,"fatal":true,"severity":2,"message":"Parsing error: w:\\CodeDeX\\WhatsDeX\\shared\\components\\ui\\label.tsx was not found by the project service. Consider either including it in the tsconfig.json or including it in allowDefaultProject."}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":1,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\"\r\n\r\nimport * as React from \"react\"\r\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\r\nimport { cva, type VariantProps } from \"class-variance-authority\"\r\n\r\nimport { cn } from \"../../lib/utils\"\r\n\r\nconst labelVariants = cva(\r\n  \"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"\r\n)\r\n\r\nconst Label = React.forwardRef<\r\n  React.ElementRef<typeof LabelPrimitive.Root>,\r\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> &\r\n    VariantProps<typeof labelVariants>\r\n>(({ className, ...props }, ref) => (\r\n  <LabelPrimitive.Root\r\n    ref={ref}\r\n    className={cn(labelVariants(), className)}\r\n    {...props}\r\n  />\r\n))\r\nLabel.displayName = LabelPrimitive.Root.displayName\r\n\r\nexport { Label }\r\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\shared\\components\\ui\\select.tsx","messages":[{"ruleId":null,"nodeType":null,"fatal":true,"severity":2,"message":"Parsing error: w:\\CodeDeX\\WhatsDeX\\shared\\components\\ui\\select.tsx was not found by the project service. Consider either including it in the tsconfig.json or including it in allowDefaultProject."}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":1,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\"\r\n\r\nimport * as React from \"react\"\r\nimport * as SelectPrimitive from \"@radix-ui/react-select\"\r\nimport { Check, ChevronDown, ChevronUp } from \"lucide-react\"\r\n\r\nimport { cn } from \"../../lib/utils\"\r\n\r\nconst Select = SelectPrimitive.Root\r\n\r\nconst SelectGroup = SelectPrimitive.Group\r\n\r\nconst SelectValue = SelectPrimitive.Value\r\n\r\nconst SelectTrigger = React.forwardRef<\r\n  React.ElementRef<typeof SelectPrimitive.Trigger>,\r\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Trigger>\r\n>(({ className, children, ...props }, ref) => (\r\n  <SelectPrimitive.Trigger\r\n    ref={ref}\r\n    className={cn(\r\n      \"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1\",\r\n      className\r\n    )}\r\n    {...props}\r\n  >\r\n    {children}\r\n    <SelectPrimitive.Icon asChild>\r\n      <ChevronDown className=\"h-4 w-4 opacity-50\" />\r\n    </SelectPrimitive.Icon>\r\n  </SelectPrimitive.Trigger>\r\n))\r\nSelectTrigger.displayName = SelectPrimitive.Trigger.displayName\r\n\r\nconst SelectScrollUpButton = React.forwardRef<\r\n  React.ElementRef<typeof SelectPrimitive.ScrollUpButton>,\r\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollUpButton>\r\n>(({ className, ...props }, ref) => (\r\n  <SelectPrimitive.ScrollUpButton\r\n    ref={ref}\r\n    className={cn(\r\n      \"flex cursor-default items-center justify-center py-1\",\r\n      className\r\n    )}\r\n    {...props}\r\n  >\r\n    <ChevronUp className=\"h-4 w-4\" />\r\n  </SelectPrimitive.ScrollUpButton>\r\n))\r\nSelectScrollUpButton.displayName = SelectPrimitive.ScrollUpButton.displayName\r\n\r\nconst SelectScrollDownButton = React.forwardRef<\r\n  React.ElementRef<typeof SelectPrimitive.ScrollDownButton>,\r\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollDownButton>\r\n>(({ className, ...props }, ref) => (\r\n  <SelectPrimitive.ScrollDownButton\r\n    ref={ref}\r\n    className={cn(\r\n      \"flex cursor-default items-center justify-center py-1\",\r\n      className\r\n    )}\r\n    {...props}\r\n  >\r\n    <ChevronDown className=\"h-4 w-4\" />\r\n  </SelectPrimitive.ScrollDownButton>\r\n))\r\nSelectScrollDownButton.displayName =\r\n  SelectPrimitive.ScrollDownButton.displayName\r\n\r\nconst SelectContent = React.forwardRef<\r\n  React.ElementRef<typeof SelectPrimitive.Content>,\r\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Content>\r\n>(({ className, children, position = \"popper\", ...props }, ref) => (\r\n  <SelectPrimitive.Portal>\r\n    <SelectPrimitive.Content\r\n      ref={ref}\r\n      className={cn(\r\n        \"relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]\",\r\n        position === \"popper\" &&\r\n          \"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1\",\r\n        className\r\n      )}\r\n      position={position}\r\n      {...props}\r\n    >\r\n      <SelectScrollUpButton />\r\n      <SelectPrimitive.Viewport\r\n        className={cn(\r\n          \"p-1\",\r\n          position === \"popper\" &&\r\n            \"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]\"\r\n        )}\r\n      >\r\n        {children}\r\n      </SelectPrimitive.Viewport>\r\n      <SelectScrollDownButton />\r\n    </SelectPrimitive.Content>\r\n  </SelectPrimitive.Portal>\r\n))\r\nSelectContent.displayName = SelectPrimitive.Content.displayName\r\n\r\nconst SelectLabel = React.forwardRef<\r\n  React.ElementRef<typeof SelectPrimitive.Label>,\r\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Label>\r\n>(({ className, ...props }, ref) => (\r\n  <SelectPrimitive.Label\r\n    ref={ref}\r\n    className={cn(\"py-1.5 pl-8 pr-2 text-sm font-semibold\", className)}\r\n    {...props}\r\n  />\r\n))\r\nSelectLabel.displayName = SelectPrimitive.Label.displayName\r\n\r\nconst SelectItem = React.forwardRef<\r\n  React.ElementRef<typeof SelectPrimitive.Item>,\r\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Item>\r\n>(({ className, children, ...props }, ref) => (\r\n  <SelectPrimitive.Item\r\n    ref={ref}\r\n    className={cn(\r\n      \"relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\r\n      className\r\n    )}\r\n    {...props}\r\n  >\r\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\r\n      <SelectPrimitive.ItemIndicator>\r\n        <Check className=\"h-4 w-4\" />\r\n      </SelectPrimitive.ItemIndicator>\r\n    </span>\r\n\r\n    <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\r\n  </SelectPrimitive.Item>\r\n))\r\nSelectItem.displayName = SelectPrimitive.Item.displayName\r\n\r\nconst SelectSeparator = React.forwardRef<\r\n  React.ElementRef<typeof SelectPrimitive.Separator>,\r\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Separator>\r\n>(({ className, ...props }, ref) => (\r\n  <SelectPrimitive.Separator\r\n    ref={ref}\r\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\r\n    {...props}\r\n  />\r\n))\r\nSelectSeparator.displayName = SelectPrimitive.Separator.displayName\r\n\r\nexport {\r\n  Select,\r\n  SelectGroup,\r\n  SelectValue,\r\n  SelectTrigger,\r\n  SelectContent,\r\n  SelectLabel,\r\n  SelectItem,\r\n  SelectSeparator,\r\n  SelectScrollUpButton,\r\n  SelectScrollDownButton,\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\shared\\components\\ui\\table.tsx","messages":[{"ruleId":null,"nodeType":null,"fatal":true,"severity":2,"message":"Parsing error: w:\\CodeDeX\\WhatsDeX\\shared\\components\\ui\\table.tsx was not found by the project service. Consider either including it in the tsconfig.json or including it in allowDefaultProject."}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":1,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from \"react\"\r\nimport { cn } from \"../../lib/utils\"\r\n\r\nconst Table = React.forwardRef<\r\n  HTMLTableElement,\r\n  React.HTMLAttributes<HTMLTableElement>\r\n>(({ className, ...props }, ref) => (\r\n  <div className=\"relative w-full overflow-auto\">\r\n    <table\r\n      ref={ref}\r\n      className={cn(\"w-full caption-bottom text-sm\", className)}\r\n      {...props}\r\n    />\r\n  </div>\r\n))\r\nTable.displayName = \"Table\"\r\n\r\nconst TableHeader = React.forwardRef<\r\n  HTMLTableSectionElement,\r\n  React.HTMLAttributes<HTMLTableSectionElement>\r\n>(({ className, ...props }, ref) => (\r\n  <thead ref={ref} className={cn(\"[&_tr]:border-b\", className)} {...props} />\r\n))\r\nTableHeader.displayName = \"TableHeader\"\r\n\r\nconst TableBody = React.forwardRef<\r\n  HTMLTableSectionElement,\r\n  React.HTMLAttributes<HTMLTableSectionElement>\r\n>(({ className, ...props }, ref) => (\r\n  <tbody\r\n    ref={ref}\r\n    className={cn(\"[&_tr:last-child]:border-0\", className)}\r\n    {...props}\r\n  />\r\n))\r\nTableBody.displayName = \"TableBody\"\r\n\r\nconst TableFooter = React.forwardRef<\r\n  HTMLTableSectionElement,\r\n  React.HTMLAttributes<HTMLTableSectionElement>\r\n>(({ className, ...props }, ref) => (\r\n  <tfoot\r\n    ref={ref}\r\n    className={cn(\r\n      \"border-t bg-muted/50 font-medium [&>tr]:last:border-b-0\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nTableFooter.displayName = \"TableFooter\"\r\n\r\nconst TableRow = React.forwardRef<\r\n  HTMLTableRowElement,\r\n  React.HTMLAttributes<HTMLTableRowElement>\r\n>(({ className, ...props }, ref) => (\r\n  <tr\r\n    ref={ref}\r\n    className={cn(\r\n      \"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nTableRow.displayName = \"TableRow\"\r\n\r\nconst TableHead = React.forwardRef<\r\n  HTMLTableCellElement,\r\n  React.ThHTMLAttributes<HTMLTableCellElement>\r\n>(({ className, ...props }, ref) => (\r\n  <th\r\n    ref={ref}\r\n    className={cn(\r\n      \"h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nTableHead.displayName = \"TableHead\"\r\n\r\nconst TableCell = React.forwardRef<\r\n  HTMLTableCellElement,\r\n  React.TdHTMLAttributes<HTMLTableCellElement>\r\n>(({ className, ...props }, ref) => (\r\n  <td\r\n    ref={ref}\r\n    className={cn(\"p-4 align-middle [&:has([role=checkbox])]:pr-0\", className)}\r\n    {...props}\r\n  />\r\n))\r\nTableCell.displayName = \"TableCell\"\r\n\r\nconst TableCaption = React.forwardRef<\r\n  HTMLTableCaptionElement,\r\n  React.HTMLAttributes<HTMLTableCaptionElement>\r\n>(({ className, ...props }, ref) => (\r\n  <caption\r\n    ref={ref}\r\n    className={cn(\"mt-4 text-sm text-muted-foreground\", className)}\r\n    {...props}\r\n  />\r\n))\r\nTableCaption.displayName = \"TableCaption\"\r\n\r\nexport {\r\n  Table,\r\n  TableHeader,\r\n  TableBody,\r\n  TableFooter,\r\n  TableHead,\r\n  TableRow,\r\n  TableCell,\r\n  TableCaption,\r\n}","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\shared\\components\\ui\\tabs.tsx","messages":[{"ruleId":null,"nodeType":null,"fatal":true,"severity":2,"message":"Parsing error: w:\\CodeDeX\\WhatsDeX\\shared\\components\\ui\\tabs.tsx was not found by the project service. Consider either including it in the tsconfig.json or including it in allowDefaultProject."}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":1,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\"\r\n\r\nimport * as React from \"react\"\r\nimport * as TabsPrimitive from \"@radix-ui/react-tabs\"\r\n\r\nimport { cn } from \"../../lib/utils\"\r\n\r\nconst Tabs = TabsPrimitive.Root\r\n\r\nconst TabsList = React.forwardRef<\r\n  React.ElementRef<typeof TabsPrimitive.List>,\r\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.List>\r\n>(({ className, ...props }, ref) => (\r\n  <TabsPrimitive.List\r\n    ref={ref}\r\n    className={cn(\r\n      \"inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nTabsList.displayName = TabsPrimitive.List.displayName\r\n\r\nconst TabsTrigger = React.forwardRef<\r\n  React.ElementRef<typeof TabsPrimitive.Trigger>,\r\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Trigger>\r\n>(({ className, ...props }, ref) => (\r\n  <TabsPrimitive.Trigger\r\n    ref={ref}\r\n    className={cn(\r\n      \"inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nTabsTrigger.displayName = TabsPrimitive.Trigger.displayName\r\n\r\nconst TabsContent = React.forwardRef<\r\n  React.ElementRef<typeof TabsPrimitive.Content>,\r\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Content>\r\n>(({ className, ...props }, ref) => (\r\n  <TabsPrimitive.Content\r\n    ref={ref}\r\n    className={cn(\r\n      \"mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nTabsContent.displayName = TabsPrimitive.Content.displayName\r\n\r\nexport { Tabs, TabsList, TabsTrigger, TabsContent }\r\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\shared\\lib\\utils.ts","messages":[{"ruleId":null,"nodeType":null,"fatal":true,"severity":2,"message":"Parsing error: w:\\CodeDeX\\WhatsDeX\\shared\\lib\\utils.ts was not found by the project service. Consider either including it in the tsconfig.json or including it in allowDefaultProject."}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":1,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { type ClassValue, clsx } from 'clsx';\nimport { twMerge } from 'tailwind-merge';\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs));\n}\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\src\\jobs\\aiProcessor.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":23,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":30},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":2,"column":16,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":23},{"ruleId":"no-case-declarations","severity":2,"message":"Unexpected lexical declaration in case block.","line":47,"column":11,"nodeType":"VariableDeclaration","messageId":"unexpected","endLine":47,"endColumn":52,"suggestions":[{"messageId":"addBrackets","fix":{"range":[1213,1562],"text":"{ const { targetLanguage } = context || {};\n          if (targetLanguage) {\n            result = await this.gemini.getChatCompletion(\n              `Translate the following text to ${targetLanguage}: ${prompt}`\n            );\n          } else {\n            throw new Error('Target language not specified for translation');\n          }\n          break; }"},"desc":"Add {} brackets around the case block."}]},{"ruleId":"no-plusplus","severity":2,"message":"Unary operator '++' used.","line":109,"column":41,"nodeType":"UpdateExpression","messageId":"unexpectedUnaryOp","endLine":109,"endColumn":44},{"ruleId":"no-await-in-loop","severity":2,"message":"Unexpected `await` inside a loop.","line":117,"column":26,"nodeType":"AwaitExpression","messageId":"unexpectedAwait","endLine":119,"endColumn":16},{"ruleId":"no-await-in-loop","severity":2,"message":"Unexpected `await` inside a loop.","line":123,"column":26,"nodeType":"AwaitExpression","messageId":"unexpectedAwait","endLine":125,"endColumn":16},{"ruleId":"no-await-in-loop","severity":2,"message":"Unexpected `await` inside a loop.","line":129,"column":26,"nodeType":"AwaitExpression","messageId":"unexpectedAwait","endLine":129,"endColumn":97},{"ruleId":"no-await-in-loop","severity":2,"message":"Unexpected `await` inside a loop.","line":133,"column":26,"nodeType":"AwaitExpression","messageId":"unexpectedAwait","endLine":135,"endColumn":16},{"ruleId":"no-plusplus","severity":2,"message":"Unary operator '++' used.","line":252,"column":49,"nodeType":"UpdateExpression","messageId":"unexpectedUnaryOp","endLine":252,"endColumn":52},{"ruleId":"no-await-in-loop","severity":2,"message":"Unexpected `await` inside a loop.","line":257,"column":35,"nodeType":"AwaitExpression","messageId":"unexpectedAwait","endLine":257,"endColumn":94},{"ruleId":"no-unused-vars","severity":1,"message":"'parseError' is defined but never used.","line":328,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":328,"endColumn":24},{"ruleId":"class-methods-use-this","severity":2,"message":"Expected 'this' to be used by class async method 'processPerformanceAnalytics'.","line":350,"column":3,"nodeType":"FunctionExpression","messageId":"missingThis","endLine":350,"endColumn":36},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":391,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":391,"endColumn":7}],"suppressedMessages":[],"errorCount":12,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const GeminiService = require('../../services/gemini');\nconst logger = require('../utils/logger');\n\n/**\n * AI Processing Job Handlers\n * Handles background AI tasks like content generation, analysis, and processing\n */\n\nclass AIProcessor {\n  constructor() {\n    this.gemini = new GeminiService();\n  }\n\n  /**\n   * Process AI content generation job\n   * @param {Object} jobData - Job data\n   * @param {Object} job - Bull job instance\n   * @returns {Promise<Object>} Processing result\n   */\n  async processContentGeneration(jobData, job) {\n    const { prompt, type, userId, context } = jobData;\n\n    try {\n      logger.info('Processing AI content generation', {\n        jobId: job.id,\n        type,\n        userId,\n        promptLength: prompt.length,\n      });\n\n      let result;\n\n      switch (type) {\n        case 'text':\n          result = await this.gemini.getChatCompletion(prompt);\n          break;\n\n        case 'analysis':\n          result = await this.gemini.getChatCompletion(`Analyze the following content: ${prompt}`);\n          break;\n\n        case 'summary':\n          result = await this.gemini.getSummary([{ role: 'user', content: prompt }]);\n          break;\n\n        case 'translation':\n          const { targetLanguage } = context || {};\n          if (targetLanguage) {\n            result = await this.gemini.getChatCompletion(\n              `Translate the following text to ${targetLanguage}: ${prompt}`\n            );\n          } else {\n            throw new Error('Target language not specified for translation');\n          }\n          break;\n\n        default:\n          result = await this.gemini.getChatCompletion(prompt);\n      }\n\n      // Store result in cache for faster retrieval\n      if (context?.cacheKey) {\n        // Implementation would depend on cache service\n        logger.debug('AI result cached', { cacheKey: context.cacheKey });\n      }\n\n      return {\n        success: true,\n        type,\n        result,\n        processingTime: Date.now() - job.processedOn,\n        metadata: {\n          userId,\n          promptLength: prompt.length,\n          resultLength: result.length,\n        },\n      };\n    } catch (error) {\n      logger.error('AI content generation failed', {\n        jobId: job.id,\n        type,\n        userId,\n        error: error.message,\n      });\n\n      throw new Error(`AI processing failed: ${error.message}`);\n    }\n  }\n\n  /**\n   * Process batch AI analysis job\n   * @param {Object} jobData - Job data\n   * @param {Object} job - Bull job instance\n   * @returns {Promise<Object>} Processing result\n   */\n  async processBatchAnalysis(jobData, job) {\n    const { items, analysisType, userId } = jobData;\n\n    try {\n      logger.info('Processing batch AI analysis', {\n        jobId: job.id,\n        itemCount: items.length,\n        analysisType,\n        userId,\n      });\n\n      const results = [];\n\n      for (let i = 0; i < items.length; i++) {\n        const item = items[i];\n\n        try {\n          let analysis;\n\n          switch (analysisType) {\n            case 'sentiment':\n              analysis = await this.gemini.getChatCompletion(\n                `Analyze the sentiment of this text (positive, negative, or neutral): \"${item.content}\"`\n              );\n              break;\n\n            case 'topics':\n              analysis = await this.gemini.getChatCompletion(\n                `Extract the main topics from this text: \"${item.content}\"`\n              );\n              break;\n\n            case 'summary':\n              analysis = await this.gemini.getSummary([{ role: 'user', content: item.content }]);\n              break;\n\n            default:\n              analysis = await this.gemini.getChatCompletion(\n                `Analyze this content: \"${item.content}\"`\n              );\n          }\n\n          results.push({\n            id: item.id,\n            content: item.content,\n            analysis,\n            success: true,\n          });\n        } catch (itemError) {\n          logger.warn('Failed to analyze item in batch', {\n            jobId: job.id,\n            itemId: item.id,\n            error: itemError.message,\n          });\n\n          results.push({\n            id: item.id,\n            content: item.content,\n            error: itemError.message,\n            success: false,\n          });\n        }\n\n        // Update job progress\n        job.progress(((i + 1) / items.length) * 100);\n      }\n\n      return {\n        success: true,\n        analysisType,\n        totalItems: items.length,\n        successfulAnalyses: results.filter(r => r.success).length,\n        results,\n        processingTime: Date.now() - job.processedOn,\n      };\n    } catch (error) {\n      logger.error('Batch AI analysis failed', {\n        jobId: job.id,\n        analysisType,\n        userId,\n        error: error.message,\n      });\n\n      throw new Error(`Batch analysis failed: ${error.message}`);\n    }\n  }\n\n  /**\n   * Process AI content moderation job\n   * @param {Object} jobData - Job data\n   * @param {Object} job - Bull job instance\n   * @returns {Promise<Object>} Processing result\n   */\n  async processContentModeration(jobData, job) {\n    const { content, userId, context } = jobData;\n\n    try {\n      logger.info('Processing AI content moderation', {\n        jobId: job.id,\n        userId,\n        contentLength: content.length,\n      });\n\n      const moderationResult = await this.gemini.moderateContent(content, context);\n\n      // Log moderation actions\n      if (!moderationResult.safe) {\n        logger.warn('Content flagged by AI moderation', {\n          jobId: job.id,\n          userId,\n          categories: moderationResult.categories,\n          score: moderationResult.score,\n        });\n      }\n\n      return {\n        success: true,\n        contentLength: content.length,\n        moderationResult,\n        processingTime: Date.now() - job.processedOn,\n        metadata: {\n          userId,\n          categories: moderationResult.categories,\n          score: moderationResult.score,\n        },\n      };\n    } catch (error) {\n      logger.error('AI content moderation failed', {\n        jobId: job.id,\n        userId,\n        error: error.message,\n      });\n\n      throw new Error(`Content moderation failed: ${error.message}`);\n    }\n  }\n\n  /**\n   * Process AI model fine-tuning data preparation\n   * @param {Object} jobData - Job data\n   * @param {Object} job - Bull job instance\n   * @returns {Promise<Object>} Processing result\n   */\n  async processFineTuningData(jobData, job) {\n    const { conversations, userId, modelType } = jobData;\n\n    try {\n      logger.info('Processing AI fine-tuning data', {\n        jobId: job.id,\n        userId,\n        conversationCount: conversations.length,\n        modelType,\n      });\n\n      const processedData = [];\n\n      for (let i = 0; i < conversations.length; i++) {\n        const conversation = conversations[i];\n\n        try {\n          // Generate training examples from conversation\n          const trainingExample = await this.generateTrainingExample(conversation, modelType);\n\n          processedData.push({\n            conversationId: conversation.id,\n            trainingExample,\n            success: true,\n          });\n        } catch (convError) {\n          logger.warn('Failed to process conversation for fine-tuning', {\n            jobId: job.id,\n            conversationId: conversation.id,\n            error: convError.message,\n          });\n\n          processedData.push({\n            conversationId: conversation.id,\n            error: convError.message,\n            success: false,\n          });\n        }\n\n        // Update job progress\n        job.progress(((i + 1) / conversations.length) * 100);\n      }\n\n      return {\n        success: true,\n        modelType,\n        totalConversations: conversations.length,\n        processedData,\n        processingTime: Date.now() - job.processedOn,\n      };\n    } catch (error) {\n      logger.error('AI fine-tuning data processing failed', {\n        jobId: job.id,\n        userId,\n        modelType,\n        error: error.message,\n      });\n\n      throw new Error(`Fine-tuning data processing failed: ${error.message}`);\n    }\n  }\n\n  /**\n   * Generate training example from conversation\n   * @param {Object} conversation - Conversation data\n   * @param {string} modelType - Type of model being fine-tuned\n   * @returns {Promise<Object>} Training example\n   */\n  async generateTrainingExample(conversation, modelType) {\n    const { messages, context } = conversation;\n\n    // Create a prompt for the AI to generate a training example\n    const prompt = `Create a training example for a ${modelType} model from this conversation:\n\n${messages.map(msg => `${msg.role}: ${msg.content}`).join('\\n')}\n\nContext: ${JSON.stringify(context)}\n\nGenerate a JSON training example with the following format:\n{\n  \"input\": \"user input text\",\n  \"output\": \"expected AI response\",\n  \"context\": \"additional context information\"\n}`;\n\n    const trainingExampleStr = await this.gemini.getChatCompletion(prompt);\n\n    try {\n      return JSON.parse(trainingExampleStr);\n    } catch (parseError) {\n      // If parsing fails, create a basic structure\n      return {\n        input: messages\n          .filter(m => m.role === 'user')\n          .map(m => m.content)\n          .join(' '),\n        output: messages\n          .filter(m => m.role === 'assistant')\n          .map(m => m.content)\n          .join(' '),\n        context: context || {},\n      };\n    }\n  }\n\n  /**\n   * Process AI performance analytics\n   * @param {Object} jobData - Job data\n   * @param {Object} job - Bull job instance\n   * @returns {Promise<Object>} Processing result\n   */\n  async processPerformanceAnalytics(jobData, job) {\n    const { timeRange, userId, metrics } = jobData;\n\n    try {\n      logger.info('Processing AI performance analytics', {\n        jobId: job.id,\n        userId,\n        timeRange,\n        metrics: metrics.join(', '),\n      });\n\n      // This would analyze AI performance metrics\n      // For now, return mock analytics data\n      const analytics = {\n        totalRequests: 1250,\n        averageResponseTime: 2.3,\n        successRate: 98.5,\n        popularFeatures: ['chat', 'image_generation', 'translation'],\n        userSatisfaction: 4.7,\n        errorRate: 1.5,\n        timeRange,\n        generatedAt: new Date().toISOString(),\n      };\n\n      return {\n        success: true,\n        analytics,\n        processingTime: Date.now() - job.processedOn,\n      };\n    } catch (error) {\n      logger.error('AI performance analytics processing failed', {\n        jobId: job.id,\n        userId,\n        error: error.message,\n      });\n\n      throw new Error(`Performance analytics processing failed: ${error.message}`);\n    }\n  }\n}\n\nmodule.exports = AIProcessor;\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\src\\jobs\\index.js","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'JobQueueService' is assigned a value but never used.","line":6,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":22,"suggestions":[{"messageId":"removeVar","data":{"varName":"JobQueueService"},"fix":{"range":[109,165],"text":""},"desc":"Remove unused variable 'JobQueueService'."}]},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":6,"column":25,"nodeType":"Identifier","messageId":"undef","endLine":6,"endColumn":32},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":7,"column":21,"nodeType":"Identifier","messageId":"undef","endLine":7,"endColumn":28},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":8,"column":24,"nodeType":"Identifier","messageId":"undef","endLine":8,"endColumn":31},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":9,"column":16,"nodeType":"Identifier","messageId":"undef","endLine":9,"endColumn":23},{"ruleId":"no-unused-vars","severity":1,"message":"'data' is assigned a value but never used.","line":179,"column":39,"nodeType":"Identifier","messageId":"unusedVar","endLine":179,"endColumn":43,"suggestions":[{"messageId":"removeVar","data":{"varName":"data"},"fix":{"range":[5100,5106],"text":""},"desc":"Remove unused variable 'data'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'metrics' is assigned a value but never used.","line":254,"column":34,"nodeType":"Identifier","messageId":"unusedVar","endLine":254,"endColumn":41,"suggestions":[{"messageId":"removeVar","data":{"varName":"metrics"},"fix":{"range":[7134,7143],"text":""},"desc":"Remove unused variable 'metrics'."}]},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":475,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":475,"endColumn":7}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Job Processors Registration\n * This file registers all job processors with the job queue service\n */\n\nconst JobQueueService = require('../services/jobQueue');\nconst AIProcessor = require('./aiProcessor');\nconst MediaProcessor = require('./mediaProcessor');\nconst logger = require('../utils/logger');\n\nclass JobRegistry {\n  constructor() {\n    this.jobQueue = null;\n    this.processors = {\n      ai: new AIProcessor(),\n      media: new MediaProcessor(),\n    };\n  }\n\n  /**\n   * Initialize job registry and register all processors\n   * @param {JobQueueService} jobQueueService - The job queue service instance\n   */\n  async initialize(jobQueueService) {\n    this.jobQueue = jobQueueService;\n\n    try {\n      logger.info('Registering job processors...');\n\n      // Register AI processing jobs\n      await this.registerAIProcessors();\n\n      // Register media processing jobs\n      await this.registerMediaProcessors();\n\n      // Register notification jobs\n      await this.registerNotificationProcessors();\n\n      // Register analytics jobs\n      await this.registerAnalyticsProcessors();\n\n      // Register cleanup jobs\n      await this.registerCleanupProcessors();\n\n      logger.info('All job processors registered successfully');\n    } catch (error) {\n      logger.error('Failed to register job processors', { error: error.message });\n      throw error;\n    }\n  }\n\n  /**\n   * Register AI processing job handlers\n   */\n  async registerAIProcessors() {\n    // Content generation\n    this.jobQueue.registerProcessor(\n      'ai-processing',\n      'content-generation',\n      async (jobData, job) => await this.processors.ai.processContentGeneration(jobData, job)\n    );\n\n    // Batch analysis\n    this.jobQueue.registerProcessor(\n      'ai-processing',\n      'batch-analysis',\n      async (jobData, job) => await this.processors.ai.processBatchAnalysis(jobData, job)\n    );\n\n    // Content moderation\n    this.jobQueue.registerProcessor(\n      'ai-processing',\n      'content-moderation',\n      async (jobData, job) => await this.processors.ai.processContentModeration(jobData, job)\n    );\n\n    // Fine-tuning data preparation\n    this.jobQueue.registerProcessor(\n      'ai-processing',\n      'fine-tuning-data',\n      async (jobData, job) => await this.processors.ai.processFineTuningData(jobData, job)\n    );\n\n    // Performance analytics\n    this.jobQueue.registerProcessor(\n      'analytics',\n      'ai-performance',\n      async (jobData, job) => await this.processors.ai.processPerformanceAnalytics(jobData, job)\n    );\n\n    logger.info('AI processors registered');\n  }\n\n  /**\n   * Register media processing job handlers\n   */\n  async registerMediaProcessors() {\n    // Image optimization\n    this.jobQueue.registerProcessor(\n      'media-processing',\n      'image-optimization',\n      async (jobData, job) => await this.processors.media.processImageOptimization(jobData, job)\n    );\n\n    // Batch image processing\n    this.jobQueue.registerProcessor(\n      'media-processing',\n      'batch-image-processing',\n      async (jobData, job) => await this.processors.media.processBatchImageProcessing(jobData, job)\n    );\n\n    // Video thumbnail generation\n    this.jobQueue.registerProcessor(\n      'media-processing',\n      'video-thumbnail',\n      async (jobData, job) => await this.processors.media.processVideoThumbnail(jobData, job)\n    );\n\n    // File conversion\n    this.jobQueue.registerProcessor(\n      'media-processing',\n      'file-conversion',\n      async (jobData, job) => await this.processors.media.processFileConversion(jobData, job)\n    );\n\n    // Media analytics\n    this.jobQueue.registerProcessor(\n      'analytics',\n      'media-analytics',\n      async (jobData, job) => await this.processors.media.processMediaAnalytics(jobData, job)\n    );\n\n    logger.info('Media processors registered');\n  }\n\n  /**\n   * Register notification job handlers\n   */\n  async registerNotificationProcessors() {\n    // Email notifications\n    this.jobQueue.registerProcessor('notification', 'email-notification', async (jobData, job) => {\n      const { to, subject, content, userId } = jobData;\n\n      try {\n        logger.info('Processing email notification', {\n          jobId: job.id,\n          to,\n          subject,\n          userId,\n        });\n\n        // Implementation would integrate with email service\n        // For now, just log the notification\n        logger.info('Email notification queued', {\n          to,\n          subject,\n          contentLength: content.length,\n        });\n\n        return {\n          success: true,\n          notificationType: 'email',\n          recipient: to,\n          subject,\n          processingTime: Date.now() - job.processedOn,\n        };\n      } catch (error) {\n        logger.error('Email notification failed', {\n          jobId: job.id,\n          to,\n          error: error.message,\n        });\n        throw new Error(`Email notification failed: ${error.message}`);\n      }\n    });\n\n    // Push notifications\n    this.jobQueue.registerProcessor('notification', 'push-notification', async (jobData, job) => {\n      const { userId, title, message, data } = jobData;\n\n      try {\n        logger.info('Processing push notification', {\n          jobId: job.id,\n          userId,\n          title,\n        });\n\n        // Implementation would integrate with push notification service\n        logger.info('Push notification queued', {\n          userId,\n          title,\n          messageLength: message.length,\n        });\n\n        return {\n          success: true,\n          notificationType: 'push',\n          userId,\n          title,\n          processingTime: Date.now() - job.processedOn,\n        };\n      } catch (error) {\n        logger.error('Push notification failed', {\n          jobId: job.id,\n          userId,\n          error: error.message,\n        });\n        throw new Error(`Push notification failed: ${error.message}`);\n      }\n    });\n\n    // SMS notifications\n    this.jobQueue.registerProcessor('notification', 'sms-notification', async (jobData, job) => {\n      const { phoneNumber, message, userId } = jobData;\n\n      try {\n        logger.info('Processing SMS notification', {\n          jobId: job.id,\n          phoneNumber,\n          userId,\n        });\n\n        // Implementation would integrate with SMS service\n        logger.info('SMS notification queued', {\n          phoneNumber,\n          messageLength: message.length,\n        });\n\n        return {\n          success: true,\n          notificationType: 'sms',\n          phoneNumber,\n          processingTime: Date.now() - job.processedOn,\n        };\n      } catch (error) {\n        logger.error('SMS notification failed', {\n          jobId: job.id,\n          phoneNumber,\n          error: error.message,\n        });\n        throw new Error(`SMS notification failed: ${error.message}`);\n      }\n    });\n\n    logger.info('Notification processors registered');\n  }\n\n  /**\n   * Register analytics job handlers\n   */\n  async registerAnalyticsProcessors() {\n    // User behavior analytics\n    this.jobQueue.registerProcessor('analytics', 'user-behavior', async (jobData, job) => {\n      const { userId, timeRange, metrics } = jobData;\n\n      try {\n        logger.info('Processing user behavior analytics', {\n          jobId: job.id,\n          userId,\n          timeRange,\n        });\n\n        // Implementation would analyze user behavior data\n        const analytics = {\n          userId,\n          timeRange,\n          totalCommands: 150,\n          favoriteCommand: 'gemini',\n          averageSessionTime: 25, // minutes\n          lastActivity: new Date().toISOString(),\n          generatedAt: new Date().toISOString(),\n        };\n\n        return {\n          success: true,\n          analytics,\n          processingTime: Date.now() - job.processedOn,\n        };\n      } catch (error) {\n        logger.error('User behavior analytics failed', {\n          jobId: job.id,\n          userId,\n          error: error.message,\n        });\n        throw new Error(`User behavior analytics failed: ${error.message}`);\n      }\n    });\n\n    // System performance analytics\n    this.jobQueue.registerProcessor('analytics', 'system-performance', async (jobData, job) => {\n      const { timeRange, metrics } = jobData;\n\n      try {\n        logger.info('Processing system performance analytics', {\n          jobId: job.id,\n          timeRange,\n          metrics: metrics.join(', '),\n        });\n\n        // Implementation would collect system metrics\n        const analytics = {\n          timeRange,\n          averageResponseTime: 2.3,\n          uptime: 99.8,\n          errorRate: 0.2,\n          activeUsers: 1250,\n          totalRequests: 50000,\n          generatedAt: new Date().toISOString(),\n        };\n\n        return {\n          success: true,\n          analytics,\n          processingTime: Date.now() - job.processedOn,\n        };\n      } catch (error) {\n        logger.error('System performance analytics failed', {\n          jobId: job.id,\n          error: error.message,\n        });\n        throw new Error(`System performance analytics failed: ${error.message}`);\n      }\n    });\n\n    logger.info('Analytics processors registered');\n  }\n\n  /**\n   * Register cleanup job handlers\n   */\n  async registerCleanupProcessors() {\n    // Database cleanup\n    this.jobQueue.registerProcessor('cleanup', 'database-cleanup', async (jobData, job) => {\n      const { olderThan, tables } = jobData;\n\n      try {\n        logger.info('Processing database cleanup', {\n          jobId: job.id,\n          olderThan,\n          tables: tables.join(', '),\n        });\n\n        // Implementation would clean up old database records\n        const cleanupResults = {\n          tablesProcessed: tables.length,\n          recordsDeleted: 1250,\n          spaceFreed: '500MB',\n          processingTime: Date.now() - job.processedOn,\n        };\n\n        return {\n          success: true,\n          cleanupResults,\n          processingTime: Date.now() - job.processedOn,\n        };\n      } catch (error) {\n        logger.error('Database cleanup failed', {\n          jobId: job.id,\n          error: error.message,\n        });\n        throw new Error(`Database cleanup failed: ${error.message}`);\n      }\n    });\n\n    // Cache cleanup\n    this.jobQueue.registerProcessor('cleanup', 'cache-cleanup', async (jobData, job) => {\n      const { pattern, maxAge } = jobData;\n\n      try {\n        logger.info('Processing cache cleanup', {\n          jobId: job.id,\n          pattern,\n          maxAge,\n        });\n\n        // Implementation would clean up old cache entries\n        const cleanupResults = {\n          pattern,\n          entriesRemoved: 500,\n          spaceFreed: '50MB',\n          processingTime: Date.now() - job.processedOn,\n        };\n\n        return {\n          success: true,\n          cleanupResults,\n          processingTime: Date.now() - job.processedOn,\n        };\n      } catch (error) {\n        logger.error('Cache cleanup failed', {\n          jobId: job.id,\n          error: error.message,\n        });\n        throw new Error(`Cache cleanup failed: ${error.message}`);\n      }\n    });\n\n    // Log rotation\n    this.jobQueue.registerProcessor('cleanup', 'log-rotation', async (jobData, job) => {\n      const { retentionDays, compress } = jobData;\n\n      try {\n        logger.info('Processing log rotation', {\n          jobId: job.id,\n          retentionDays,\n          compress,\n        });\n\n        // Implementation would rotate and compress old logs\n        const rotationResults = {\n          logsRotated: 25,\n          spaceFreed: '200MB',\n          compressed: compress,\n          retentionDays,\n          processingTime: Date.now() - job.processedOn,\n        };\n\n        return {\n          success: true,\n          rotationResults,\n          processingTime: Date.now() - job.processedOn,\n        };\n      } catch (error) {\n        logger.error('Log rotation failed', {\n          jobId: job.id,\n          error: error.message,\n        });\n        throw new Error(`Log rotation failed: ${error.message}`);\n      }\n    });\n\n    logger.info('Cleanup processors registered');\n  }\n\n  /**\n   * Get registry statistics\n   * @returns {Object} Registry statistics\n   */\n  getStats() {\n    return {\n      processors: Object.keys(this.processors),\n      queues: this.jobQueue ? Array.from(this.jobQueue.queues.keys()) : [],\n      initialized: !!this.jobQueue,\n    };\n  }\n\n  /**\n   * Health check for job registry\n   * @returns {Promise<Object>} Health status\n   */\n  async healthCheck() {\n    try {\n      const stats = this.getStats();\n      const queueHealth = this.jobQueue ? await this.jobQueue.healthCheck() : null;\n\n      return {\n        status: 'healthy',\n        service: 'job-registry',\n        stats,\n        queueHealth,\n        timestamp: new Date().toISOString(),\n      };\n    } catch (error) {\n      logger.error('Job registry health check failed', { error: error.message });\n      return {\n        status: 'unhealthy',\n        service: 'job-registry',\n        error: error.message,\n        timestamp: new Date().toISOString(),\n      };\n    }\n  }\n}\n\nmodule.exports = JobRegistry;\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\src\\jobs\\mediaProcessor.js","messages":[{"ruleId":"import-x/no-import-module-exports","severity":2,"message":"Cannot use import declarations in modules that export using CommonJS (module.exports = 'foo' or exports.bar = 'hi')","line":1,"column":1,"nodeType":"ImportDeclaration","messageId":"notAllowed","endLine":1,"endColumn":25},{"ruleId":"import-x/no-extraneous-dependencies","severity":2,"message":"'sharp' should be listed in the project's dependencies. Run 'npm i sharp' to add it","line":3,"column":15,"nodeType":"CallExpression","messageId":"missing","endLine":3,"endColumn":31},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":3,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":3,"endColumn":22},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":4,"column":12,"nodeType":"Identifier","messageId":"undef","endLine":4,"endColumn":19},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":5,"column":16,"nodeType":"Identifier","messageId":"undef","endLine":5,"endColumn":23},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":20,"column":30,"nodeType":"Identifier","messageId":"undef","endLine":20,"endColumn":37},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":21,"column":32,"nodeType":"Identifier","messageId":"undef","endLine":21,"endColumn":39},{"ruleId":"no-plusplus","severity":2,"message":"Unary operator '++' used.","line":147,"column":42,"nodeType":"UpdateExpression","messageId":"unexpectedUnaryOp","endLine":147,"endColumn":45},{"ruleId":"no-await-in-loop","severity":2,"message":"Unexpected `await` inside a loop.","line":151,"column":26,"nodeType":"AwaitExpression","messageId":"unexpectedAwait","endLine":158,"endColumn":12},{"ruleId":"no-restricted-syntax","severity":2,"message":"iterators/generators require regenerator-runtime, which is too heavyweight for this guide to allow them. Separately, loops should be avoided in favor of array iterations.","line":376,"column":7,"nodeType":"ForOfStatement","messageId":"restrictedSyntax","endLine":399,"endColumn":8},{"ruleId":"no-await-in-loop","severity":2,"message":"Unexpected `await` inside a loop.","line":378,"column":23,"nodeType":"AwaitExpression","messageId":"unexpectedAwait","endLine":378,"endColumn":46},{"ruleId":"no-await-in-loop","severity":2,"message":"Unexpected `await` inside a loop.","line":387,"column":13,"nodeType":"AwaitExpression","messageId":"unexpectedAwait","endLine":387,"endColumn":38},{"ruleId":"no-plusplus","severity":2,"message":"Unary operator '++' used.","line":388,"column":13,"nodeType":"UpdateExpression","messageId":"unexpectedUnaryOp","endLine":388,"endColumn":27},{"ruleId":"no-restricted-syntax","severity":2,"message":"iterators/generators require regenerator-runtime, which is too heavyweight for this guide to allow them. Separately, loops should be avoided in favor of array iterations.","line":403,"column":7,"nodeType":"ForOfStatement","messageId":"restrictedSyntax","endLine":420,"endColumn":8},{"ruleId":"no-await-in-loop","severity":2,"message":"Unexpected `await` inside a loop.","line":405,"column":23,"nodeType":"AwaitExpression","messageId":"unexpectedAwait","endLine":405,"endColumn":46},{"ruleId":"no-await-in-loop","severity":2,"message":"Unexpected `await` inside a loop.","line":410,"column":11,"nodeType":"AwaitExpression","messageId":"unexpectedAwait","endLine":410,"endColumn":36},{"ruleId":"no-plusplus","severity":2,"message":"Unary operator '++' used.","line":411,"column":11,"nodeType":"UpdateExpression","messageId":"unexpectedUnaryOp","endLine":411,"endColumn":25},{"ruleId":"class-methods-use-this","severity":2,"message":"Expected 'this' to be used by class async method 'processMediaAnalytics'.","line":447,"column":3,"nodeType":"FunctionExpression","messageId":"missingThis","endLine":447,"endColumn":30},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":507,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":507,"endColumn":7}],"suppressedMessages":[],"errorCount":19,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import path from 'path';\n\nconst sharp = require('sharp');\nconst fs = require('fs').promises;\nconst logger = require('../utils/logger');\n\n/**\n * Media Processing Job Handlers\n * Handles background media processing tasks like image optimization, video processing, etc.\n */\n\nclass MediaProcessor {\n  constructor() {\n    this.supportedFormats = {\n      images: ['jpg', 'jpeg', 'png', 'webp', 'gif', 'bmp', 'tiff'],\n      videos: ['mp4', 'avi', 'mov', 'wmv', 'flv', 'webm'],\n      audio: ['mp3', 'wav', 'ogg', 'aac', 'flac'],\n    };\n\n    this.tempDir = path.join(process.cwd(), 'temp');\n    this.outputDir = path.join(process.cwd(), 'processed');\n\n    // Ensure directories exist\n    this.ensureDirectories();\n  }\n\n  /**\n   * Ensure required directories exist\n   */\n  async ensureDirectories() {\n    try {\n      await fs.mkdir(this.tempDir, { recursive: true });\n      await fs.mkdir(this.outputDir, { recursive: true });\n      logger.debug('Media processing directories ensured');\n    } catch (error) {\n      logger.error('Failed to create media processing directories', { error: error.message });\n    }\n  }\n\n  /**\n   * Process image optimization job\n   * @param {Object} jobData - Job data\n   * @param {Object} job - Bull job instance\n   * @returns {Promise<Object>} Processing result\n   */\n  async processImageOptimization(jobData, job) {\n    const { imagePath, options, userId } = jobData;\n\n    try {\n      logger.info('Processing image optimization', {\n        jobId: job.id,\n        userId,\n        imagePath,\n        options,\n      });\n\n      const inputPath = path.resolve(imagePath);\n      const filename = path.basename(inputPath, path.extname(inputPath));\n      const outputPath = path.join(this.outputDir, `${filename}_optimized.webp`);\n\n      // Get image metadata\n      const metadata = await sharp(inputPath).metadata();\n\n      // Apply optimizations\n      let sharpInstance = sharp(inputPath);\n\n      // Resize if specified\n      if (options.width || options.height) {\n        sharpInstance = sharpInstance.resize(options.width, options.height, {\n          fit: options.fit || 'cover',\n          withoutEnlargement: options.withoutEnlargement !== false,\n        });\n      }\n\n      // Apply quality/compression\n      if (options.quality) {\n        sharpInstance = sharpInstance.webp({ quality: options.quality });\n      } else {\n        sharpInstance = sharpInstance.webp({ quality: 80 }); // Default quality\n      }\n\n      // Process the image\n      await sharpInstance.toFile(outputPath);\n\n      // Get output file size\n      const stats = await fs.stat(outputPath);\n      const originalStats = await fs.stat(inputPath);\n\n      const compressionRatio = (\n        ((originalStats.size - stats.size) / originalStats.size) *\n        100\n      ).toFixed(2);\n\n      logger.info('Image optimization completed', {\n        jobId: job.id,\n        originalSize: originalStats.size,\n        optimizedSize: stats.size,\n        compressionRatio: `${compressionRatio}%`,\n        outputPath,\n      });\n\n      return {\n        success: true,\n        originalPath: inputPath,\n        outputPath,\n        originalSize: originalStats.size,\n        optimizedSize: stats.size,\n        compressionRatio: parseFloat(compressionRatio),\n        metadata: {\n          width: metadata.width,\n          height: metadata.height,\n          format: metadata.format,\n        },\n        processingTime: Date.now() - job.processedOn,\n      };\n    } catch (error) {\n      logger.error('Image optimization failed', {\n        jobId: job.id,\n        userId,\n        imagePath,\n        error: error.message,\n      });\n\n      throw new Error(`Image optimization failed: ${error.message}`);\n    }\n  }\n\n  /**\n   * Process batch image processing job\n   * @param {Object} jobData - Job data\n   * @param {Object} job - Bull job instance\n   * @returns {Promise<Object>} Processing result\n   */\n  async processBatchImageProcessing(jobData, job) {\n    const { images, options, userId } = jobData;\n\n    try {\n      logger.info('Processing batch image processing', {\n        jobId: job.id,\n        userId,\n        imageCount: images.length,\n        options,\n      });\n\n      const results = [];\n\n      for (let i = 0; i < images.length; i++) {\n        const imageData = images[i];\n\n        try {\n          const result = await this.processImageOptimization(\n            {\n              imagePath: imageData.path,\n              options: { ...options, ...imageData.options },\n              userId,\n            },\n            { ...job, id: `${job.id}_${i}` }\n          );\n\n          results.push({\n            id: imageData.id,\n            ...result,\n            success: true,\n          });\n        } catch (imageError) {\n          logger.warn('Failed to process image in batch', {\n            jobId: job.id,\n            imageId: imageData.id,\n            error: imageError.message,\n          });\n\n          results.push({\n            id: imageData.id,\n            error: imageError.message,\n            success: false,\n          });\n        }\n\n        // Update job progress\n        job.progress(((i + 1) / images.length) * 100);\n      }\n\n      const successful = results.filter(r => r.success).length;\n\n      return {\n        success: true,\n        totalImages: images.length,\n        successful,\n        failed: images.length - successful,\n        results,\n        processingTime: Date.now() - job.processedOn,\n      };\n    } catch (error) {\n      logger.error('Batch image processing failed', {\n        jobId: job.id,\n        userId,\n        error: error.message,\n      });\n\n      throw new Error(`Batch image processing failed: ${error.message}`);\n    }\n  }\n\n  /**\n   * Process video thumbnail generation\n   * @param {Object} jobData - Job data\n   * @param {Object} job - Bull job instance\n   * @returns {Promise<Object>} Processing result\n   */\n  async processVideoThumbnail(jobData, job) {\n    const { videoPath, timestamp, size, userId } = jobData;\n\n    try {\n      logger.info('Processing video thumbnail generation', {\n        jobId: job.id,\n        userId,\n        videoPath,\n        timestamp,\n        size,\n      });\n\n      // For now, create a placeholder thumbnail\n      // In a real implementation, you would use ffmpeg or similar\n      const thumbnailPath = path.join(\n        this.outputDir,\n        `${path.basename(videoPath, path.extname(videoPath))}_thumbnail.jpg`\n      );\n\n      // Create a simple colored rectangle as placeholder\n      await sharp({\n        create: {\n          width: size?.width || 320,\n          height: size?.height || 180,\n          channels: 3,\n          background: { r: 100, g: 100, b: 100 },\n        },\n      })\n        .jpeg()\n        .toFile(thumbnailPath);\n\n      // Get file sizes\n      const videoStats = await fs.stat(videoPath);\n      const thumbnailStats = await fs.stat(thumbnailPath);\n\n      return {\n        success: true,\n        videoPath,\n        thumbnailPath,\n        videoSize: videoStats.size,\n        thumbnailSize: thumbnailStats.size,\n        timestamp: timestamp || 0,\n        size: {\n          width: size?.width || 320,\n          height: size?.height || 180,\n        },\n        processingTime: Date.now() - job.processedOn,\n      };\n    } catch (error) {\n      logger.error('Video thumbnail generation failed', {\n        jobId: job.id,\n        userId,\n        videoPath,\n        error: error.message,\n      });\n\n      throw new Error(`Video thumbnail generation failed: ${error.message}`);\n    }\n  }\n\n  /**\n   * Process file format conversion\n   * @param {Object} jobData - Job data\n   * @param {Object} job - Bull job instance\n   * @returns {Promise<Object>} Processing result\n   */\n  async processFileConversion(jobData, job) {\n    const { inputPath, outputFormat, options, userId } = jobData;\n\n    try {\n      logger.info('Processing file conversion', {\n        jobId: job.id,\n        userId,\n        inputPath,\n        outputFormat,\n        options,\n      });\n\n      const inputExt = path.extname(inputPath).toLowerCase().slice(1);\n      const filename = path.basename(inputPath, path.extname(inputPath));\n      const outputPath = path.join(this.outputDir, `${filename}.${outputFormat}`);\n\n      if (\n        this.supportedFormats.images.includes(inputExt) &&\n        this.supportedFormats.images.includes(outputFormat)\n      ) {\n        // Image format conversion\n        let sharpInstance = sharp(inputPath);\n\n        // Apply conversion options\n        switch (outputFormat) {\n          case 'webp':\n            sharpInstance = sharpInstance.webp(options);\n            break;\n          case 'png':\n            sharpInstance = sharpInstance.png(options);\n            break;\n          case 'jpg':\n          case 'jpeg':\n            sharpInstance = sharpInstance.jpeg(options);\n            break;\n          default:\n            sharpInstance = sharpInstance.toFormat(outputFormat, options);\n        }\n\n        await sharpInstance.toFile(outputPath);\n      } else {\n        // For unsupported conversions, just copy the file\n        await fs.copyFile(inputPath, outputPath);\n        logger.warn('Unsupported conversion, file copied as-is', {\n          jobId: job.id,\n          inputFormat: inputExt,\n          outputFormat,\n        });\n      }\n\n      // Get file sizes\n      const inputStats = await fs.stat(inputPath);\n      const outputStats = await fs.stat(outputPath);\n\n      return {\n        success: true,\n        inputPath,\n        outputPath,\n        inputFormat: inputExt,\n        outputFormat,\n        inputSize: inputStats.size,\n        outputSize: outputStats.size,\n        processingTime: Date.now() - job.processedOn,\n      };\n    } catch (error) {\n      logger.error('File conversion failed', {\n        jobId: job.id,\n        userId,\n        inputPath,\n        outputFormat,\n        error: error.message,\n      });\n\n      throw new Error(`File conversion failed: ${error.message}`);\n    }\n  }\n\n  /**\n   * Process media cleanup job\n   * @param {Object} jobData - Job data\n   * @param {Object} job - Bull job instance\n   * @returns {Promise<Object>} Processing result\n   */\n  async processMediaCleanup(jobData, job) {\n    const { olderThan, patterns, userId } = jobData;\n\n    try {\n      logger.info('Processing media cleanup', {\n        jobId: job.id,\n        userId,\n        olderThan,\n        patterns,\n      });\n\n      const cutoffTime = Date.now() - olderThan * 60 * 60 * 1000; // Convert hours to milliseconds\n      let deletedCount = 0;\n      let freedSpace = 0;\n\n      // Clean temp directory\n      const tempFiles = await fs.readdir(this.tempDir);\n      for (const file of tempFiles) {\n        const filePath = path.join(this.tempDir, file);\n        const stats = await fs.stat(filePath);\n\n        if (stats.mtime.getTime() < cutoffTime) {\n          // Check if file matches cleanup patterns\n          const shouldDelete =\n            !patterns ||\n            patterns.some(pattern => file.includes(pattern) || file.match(new RegExp(pattern)));\n\n          if (shouldDelete) {\n            await fs.unlink(filePath);\n            deletedCount++;\n            freedSpace += stats.size;\n\n            logger.debug('Cleaned up temp file', {\n              jobId: job.id,\n              file,\n              size: stats.size,\n              age: (Date.now() - stats.mtime.getTime()) / (60 * 60 * 1000),\n            });\n          }\n        }\n      }\n\n      // Clean processed directory (be more conservative)\n      const processedFiles = await fs.readdir(this.outputDir);\n      for (const file of processedFiles) {\n        const filePath = path.join(this.outputDir, file);\n        const stats = await fs.stat(filePath);\n\n        // Only delete very old processed files (7 days)\n        const processedCutoff = Date.now() - 7 * 24 * 60 * 60 * 1000;\n        if (stats.mtime.getTime() < processedCutoff) {\n          await fs.unlink(filePath);\n          deletedCount++;\n          freedSpace += stats.size;\n\n          logger.debug('Cleaned up processed file', {\n            jobId: job.id,\n            file,\n            size: stats.size,\n          });\n        }\n      }\n\n      return {\n        success: true,\n        deletedFiles: deletedCount,\n        freedSpace,\n        tempDir: this.tempDir,\n        outputDir: this.outputDir,\n        processingTime: Date.now() - job.processedOn,\n      };\n    } catch (error) {\n      logger.error('Media cleanup failed', {\n        jobId: job.id,\n        userId,\n        error: error.message,\n      });\n\n      throw new Error(`Media cleanup failed: ${error.message}`);\n    }\n  }\n\n  /**\n   * Process media analytics job\n   * @param {Object} jobData - Job data\n   * @param {Object} job - Bull job instance\n   * @returns {Promise<Object>} Processing result\n   */\n  async processMediaAnalytics(jobData, job) {\n    const { timeRange, userId } = jobData;\n\n    try {\n      logger.info('Processing media analytics', {\n        jobId: job.id,\n        userId,\n        timeRange,\n      });\n\n      // This would analyze media processing metrics\n      // For now, return mock analytics data\n      const analytics = {\n        totalProcessed: 1250,\n        imagesOptimized: 890,\n        videosProcessed: 120,\n        storageUsed: '2.5GB',\n        averageProcessingTime: 3.2,\n        successRate: 97.8,\n        popularFormats: ['jpg', 'png', 'mp4'],\n        timeRange,\n        generatedAt: new Date().toISOString(),\n      };\n\n      return {\n        success: true,\n        analytics,\n        processingTime: Date.now() - job.processedOn,\n      };\n    } catch (error) {\n      logger.error('Media analytics processing failed', {\n        jobId: job.id,\n        userId,\n        error: error.message,\n      });\n\n      throw new Error(`Media analytics processing failed: ${error.message}`);\n    }\n  }\n\n  /**\n   * Get supported formats\n   * @returns {Object} Supported formats\n   */\n  getSupportedFormats() {\n    return this.supportedFormats;\n  }\n\n  /**\n   * Check if file format is supported\n   * @param {string} filename - Filename to check\n   * @param {string} type - Type of media (images, videos, audio)\n   * @returns {boolean} Whether format is supported\n   */\n  isFormatSupported(filename, type = 'images') {\n    const ext = path.extname(filename).toLowerCase().slice(1);\n    return this.supportedFormats[type]?.includes(ext) || false;\n  }\n}\n\nmodule.exports = MediaProcessor;\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\src\\message-processor.js","messages":[{"ruleId":"import-x/no-import-module-exports","severity":2,"message":"Cannot use import declarations in modules that export using CommonJS (module.exports = 'foo' or exports.bar = 'hi')","line":1,"column":1,"nodeType":"ImportDeclaration","messageId":"notAllowed","endLine":1,"endColumn":25},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":3,"column":12,"nodeType":"Identifier","messageId":"undef","endLine":3,"endColumn":19},{"ruleId":"no-unused-vars","severity":1,"message":"'util' is assigned a value but never used.","line":4,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":4,"endColumn":11,"suggestions":[{"messageId":"removeVar","data":{"varName":"util"},"fix":{"range":[52,81],"text":""},"desc":"Remove unused variable 'util'."}]},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":4,"column":14,"nodeType":"Identifier","messageId":"undef","endLine":4,"endColumn":21},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":5,"column":17,"nodeType":"Identifier","messageId":"undef","endLine":5,"endColumn":24},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":6,"column":23,"nodeType":"Identifier","messageId":"undef","endLine":6,"endColumn":30},{"ruleId":"import-x/extensions","severity":2,"message":"Missing file extension for \"./src/services/metaAI\"","line":6,"column":31,"nodeType":"Literal","messageId":"missing","endLine":6,"endColumn":54},{"ruleId":"import-x/no-unresolved","severity":2,"message":"Unable to resolve path to module './src/services/metaAI'.","line":6,"column":31,"nodeType":"Literal","messageId":"unresolved","endLine":6,"endColumn":54},{"ruleId":"no-undef","severity":2,"message":"'__dirname' is not defined.","line":10,"column":31,"nodeType":"Identifier","messageId":"undef","endLine":10,"endColumn":40},{"ruleId":"no-restricted-syntax","severity":2,"message":"iterators/generators require regenerator-runtime, which is too heavyweight for this guide to allow them. Separately, loops should be avoided in favor of array iterations.","line":14,"column":3,"nodeType":"ForOfStatement","messageId":"restrictedSyntax","endLine":29,"endColumn":4},{"ruleId":"import-x/no-dynamic-require","severity":2,"message":"Calls to require() should use string literals","line":20,"column":25,"nodeType":"CallExpression","messageId":"require","endLine":20,"endColumn":42},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":20,"column":25,"nodeType":"Identifier","messageId":"undef","endLine":20,"endColumn":32},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":23,"column":11,"nodeType":"MemberExpression","messageId":"unexpected","endLine":23,"endColumn":22,"suggestions":[{"fix":{"range":[846,893],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":26,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":26,"endColumn":22,"suggestions":[{"fix":{"range":[936,995],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":34,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":34,"endColumn":7},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":35,"column":3,"nodeType":"MemberExpression","messageId":"unexpected","endLine":35,"endColumn":14,"suggestions":[{"fix":{"range":[1079,1159],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-undef","severity":2,"message":"'global' is not defined.","line":37,"column":19,"nodeType":"Identifier","messageId":"undef","endLine":37,"endColumn":25},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":40,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":40,"endColumn":18,"suggestions":[{"fix":{"range":[1291,1358],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":45,"column":36,"nodeType":"Identifier","messageId":"undef","endLine":45,"endColumn":43},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":86,"column":3,"nodeType":"MemberExpression","messageId":"unexpected","endLine":86,"endColumn":14,"suggestions":[{"fix":{"range":[2842,2898],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":93,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":93,"endColumn":18,"suggestions":[{"fix":{"range":[3153,3217],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":119,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":119,"endColumn":20,"suggestions":[{"fix":{"range":[4143,4191],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":134,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":134,"endColumn":16,"suggestions":[{"fix":{"range":[4473,4552],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":140,"column":3,"nodeType":"MemberExpression","messageId":"unexpected","endLine":140,"endColumn":14,"suggestions":[{"fix":{"range":[4646,4707],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":149,"column":3,"nodeType":"MemberExpression","messageId":"unexpected","endLine":149,"endColumn":14,"suggestions":[{"fix":{"range":[4940,5001],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":150,"column":3,"nodeType":"MemberExpression","messageId":"unexpected","endLine":150,"endColumn":14,"suggestions":[{"fix":{"range":[5004,5055],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":153,"column":3,"nodeType":"MemberExpression","messageId":"unexpected","endLine":153,"endColumn":14,"suggestions":[{"fix":{"range":[5104,5164],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":154,"column":34,"nodeType":"MemberExpression","messageId":"unexpected","endLine":154,"endColumn":45},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":195,"column":13,"nodeType":"MemberExpression","messageId":"unexpected","endLine":195,"endColumn":26,"suggestions":[{"fix":{"range":[6664,6731],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":205,"column":13,"nodeType":"MemberExpression","messageId":"unexpected","endLine":205,"endColumn":26,"suggestions":[{"fix":{"range":[7051,7118],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":220,"column":9,"nodeType":"Identifier","messageId":"undef","endLine":220,"endColumn":16},{"ruleId":"import-x/extensions","severity":2,"message":"Unexpected use of file extension \"js\" for \"../middleware/botMode.js\"","line":220,"column":17,"nodeType":"Literal","messageId":"unexpected","endLine":220,"endColumn":43,"suggestions":[{"fix":{"range":[7568,7594],"text":"'../middleware/botMode'"},"messageId":"removeUnexpected","data":{"extension":"js","importPath":"../middleware/botMode.js","fixedImportPath":"../middleware/botMode"},"desc":"Remove unexpected \"js\" file extension from \"../middleware/botMode.js\" into \"../middleware/botMode\""}]},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":221,"column":9,"nodeType":"Identifier","messageId":"undef","endLine":221,"endColumn":16},{"ruleId":"import-x/extensions","severity":2,"message":"Unexpected use of file extension \"js\" for \"../middleware/inputValidation.js\"","line":221,"column":17,"nodeType":"Literal","messageId":"unexpected","endLine":221,"endColumn":51,"suggestions":[{"fix":{"range":[7613,7647],"text":"'../middleware/inputValidation'"},"messageId":"removeUnexpected","data":{"extension":"js","importPath":"../middleware/inputValidation.js","fixedImportPath":"../middleware/inputValidation"},"desc":"Remove unexpected \"js\" file extension from \"../middleware/inputValidation.js\" into \"../middleware/inputValidation\""}]},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":222,"column":9,"nodeType":"Identifier","messageId":"undef","endLine":222,"endColumn":16},{"ruleId":"import-x/extensions","severity":2,"message":"Unexpected use of file extension \"js\" for \"../middleware/groupMute.js\"","line":222,"column":17,"nodeType":"Literal","messageId":"unexpected","endLine":222,"endColumn":45,"suggestions":[{"fix":{"range":[7666,7694],"text":"'../middleware/groupMute'"},"messageId":"removeUnexpected","data":{"extension":"js","importPath":"../middleware/groupMute.js","fixedImportPath":"../middleware/groupMute"},"desc":"Remove unexpected \"js\" file extension from \"../middleware/groupMute.js\" into \"../middleware/groupMute\""}]},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":223,"column":9,"nodeType":"Identifier","messageId":"undef","endLine":223,"endColumn":16},{"ruleId":"import-x/extensions","severity":2,"message":"Unexpected use of file extension \"js\" for \"../middleware/nightMode.js\"","line":223,"column":17,"nodeType":"Literal","messageId":"unexpected","endLine":223,"endColumn":45,"suggestions":[{"fix":{"range":[7713,7741],"text":"'../middleware/nightMode'"},"messageId":"removeUnexpected","data":{"extension":"js","importPath":"../middleware/nightMode.js","fixedImportPath":"../middleware/nightMode"},"desc":"Remove unexpected \"js\" file extension from \"../middleware/nightMode.js\" into \"../middleware/nightMode\""}]},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":224,"column":9,"nodeType":"Identifier","messageId":"undef","endLine":224,"endColumn":16},{"ruleId":"import-x/extensions","severity":2,"message":"Unexpected use of file extension \"js\" for \"../middleware/maliciousMessage.js\"","line":224,"column":17,"nodeType":"Literal","messageId":"unexpected","endLine":224,"endColumn":52,"suggestions":[{"fix":{"range":[7760,7795],"text":"'../middleware/maliciousMessage'"},"messageId":"removeUnexpected","data":{"extension":"js","importPath":"../middleware/maliciousMessage.js","fixedImportPath":"../middleware/maliciousMessage"},"desc":"Remove unexpected \"js\" file extension from \"../middleware/maliciousMessage.js\" into \"../middleware/maliciousMessage\""}]},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":225,"column":9,"nodeType":"Identifier","messageId":"undef","endLine":225,"endColumn":16},{"ruleId":"import-x/extensions","severity":2,"message":"Unexpected use of file extension \"js\" for \"../middleware/didYouMean.js\"","line":225,"column":17,"nodeType":"Literal","messageId":"unexpected","endLine":225,"endColumn":46,"suggestions":[{"fix":{"range":[7814,7843],"text":"'../middleware/didYouMean'"},"messageId":"removeUnexpected","data":{"extension":"js","importPath":"../middleware/didYouMean.js","fixedImportPath":"../middleware/didYouMean"},"desc":"Remove unexpected \"js\" file extension from \"../middleware/didYouMean.js\" into \"../middleware/didYouMean\""}]},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":226,"column":9,"nodeType":"Identifier","messageId":"undef","endLine":226,"endColumn":16},{"ruleId":"import-x/extensions","severity":2,"message":"Unexpected use of file extension \"js\" for \"../middleware/afk.js\"","line":226,"column":17,"nodeType":"Literal","messageId":"unexpected","endLine":226,"endColumn":39,"suggestions":[{"fix":{"range":[7862,7884],"text":"'../middleware/afk'"},"messageId":"removeUnexpected","data":{"extension":"js","importPath":"../middleware/afk.js","fixedImportPath":"../middleware/afk"},"desc":"Remove unexpected \"js\" file extension from \"../middleware/afk.js\" into \"../middleware/afk\""}]},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":227,"column":9,"nodeType":"Identifier","messageId":"undef","endLine":227,"endColumn":16},{"ruleId":"import-x/extensions","severity":2,"message":"Unexpected use of file extension \"js\" for \"../middleware/antiMedia.js\"","line":227,"column":17,"nodeType":"Literal","messageId":"unexpected","endLine":227,"endColumn":45,"suggestions":[{"fix":{"range":[7903,7931],"text":"'../middleware/antiMedia'"},"messageId":"removeUnexpected","data":{"extension":"js","importPath":"../middleware/antiMedia.js","fixedImportPath":"../middleware/antiMedia"},"desc":"Remove unexpected \"js\" file extension from \"../middleware/antiMedia.js\" into \"../middleware/antiMedia\""}]},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":228,"column":9,"nodeType":"Identifier","messageId":"undef","endLine":228,"endColumn":16},{"ruleId":"import-x/extensions","severity":2,"message":"Unexpected use of file extension \"js\" for \"../middleware/antiLink.js\"","line":228,"column":17,"nodeType":"Literal","messageId":"unexpected","endLine":228,"endColumn":44,"suggestions":[{"fix":{"range":[7950,7977],"text":"'../middleware/antiLink'"},"messageId":"removeUnexpected","data":{"extension":"js","importPath":"../middleware/antiLink.js","fixedImportPath":"../middleware/antiLink"},"desc":"Remove unexpected \"js\" file extension from \"../middleware/antiLink.js\" into \"../middleware/antiLink\""}]},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":229,"column":9,"nodeType":"Identifier","messageId":"undef","endLine":229,"endColumn":16},{"ruleId":"import-x/extensions","severity":2,"message":"Unexpected use of file extension \"js\" for \"../middleware/antiNsfw.js\"","line":229,"column":17,"nodeType":"Literal","messageId":"unexpected","endLine":229,"endColumn":44,"suggestions":[{"fix":{"range":[7996,8023],"text":"'../middleware/antiNsfw'"},"messageId":"removeUnexpected","data":{"extension":"js","importPath":"../middleware/antiNsfw.js","fixedImportPath":"../middleware/antiNsfw"},"desc":"Remove unexpected \"js\" file extension from \"../middleware/antiNsfw.js\" into \"../middleware/antiNsfw\""}]},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":230,"column":9,"nodeType":"Identifier","messageId":"undef","endLine":230,"endColumn":16},{"ruleId":"import-x/extensions","severity":2,"message":"Unexpected use of file extension \"js\" for \"../middleware/antiSpam.js\"","line":230,"column":17,"nodeType":"Literal","messageId":"unexpected","endLine":230,"endColumn":44,"suggestions":[{"fix":{"range":[8042,8069],"text":"'../middleware/antiSpam'"},"messageId":"removeUnexpected","data":{"extension":"js","importPath":"../middleware/antiSpam.js","fixedImportPath":"../middleware/antiSpam"},"desc":"Remove unexpected \"js\" file extension from \"../middleware/antiSpam.js\" into \"../middleware/antiSpam\""}]},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":231,"column":9,"nodeType":"Identifier","messageId":"undef","endLine":231,"endColumn":16},{"ruleId":"import-x/extensions","severity":2,"message":"Unexpected use of file extension \"js\" for \"../middleware/antiTagsw.js\"","line":231,"column":17,"nodeType":"Literal","messageId":"unexpected","endLine":231,"endColumn":45,"suggestions":[{"fix":{"range":[8088,8116],"text":"'../middleware/antiTagsw'"},"messageId":"removeUnexpected","data":{"extension":"js","importPath":"../middleware/antiTagsw.js","fixedImportPath":"../middleware/antiTagsw"},"desc":"Remove unexpected \"js\" file extension from \"../middleware/antiTagsw.js\" into \"../middleware/antiTagsw\""}]},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":232,"column":9,"nodeType":"Identifier","messageId":"undef","endLine":232,"endColumn":16},{"ruleId":"import-x/extensions","severity":2,"message":"Unexpected use of file extension \"js\" for \"../middleware/antiToxic.js\"","line":232,"column":17,"nodeType":"Literal","messageId":"unexpected","endLine":232,"endColumn":45,"suggestions":[{"fix":{"range":[8135,8163],"text":"'../middleware/antiToxic'"},"messageId":"removeUnexpected","data":{"extension":"js","importPath":"../middleware/antiToxic.js","fixedImportPath":"../middleware/antiToxic"},"desc":"Remove unexpected \"js\" file extension from \"../middleware/antiToxic.js\" into \"../middleware/antiToxic\""}]},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":233,"column":9,"nodeType":"Identifier","messageId":"undef","endLine":233,"endColumn":16},{"ruleId":"import-x/extensions","severity":2,"message":"Unexpected use of file extension \"js\" for \"../middleware/menfess.js\"","line":233,"column":17,"nodeType":"Literal","messageId":"unexpected","endLine":233,"endColumn":43,"suggestions":[{"fix":{"range":[8182,8208],"text":"'../middleware/menfess'"},"messageId":"removeUnexpected","data":{"extension":"js","importPath":"../middleware/menfess.js","fixedImportPath":"../middleware/menfess"},"desc":"Remove unexpected \"js\" file extension from \"../middleware/menfess.js\" into \"../middleware/menfess\""}]},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":234,"column":9,"nodeType":"Identifier","messageId":"undef","endLine":234,"endColumn":16},{"ruleId":"import-x/extensions","severity":2,"message":"Unexpected use of file extension \"js\" for \"../middleware/rateLimiter.js\"","line":234,"column":17,"nodeType":"Literal","messageId":"unexpected","endLine":234,"endColumn":47,"suggestions":[{"fix":{"range":[8227,8257],"text":"'../middleware/rateLimiter'"},"messageId":"removeUnexpected","data":{"extension":"js","importPath":"../middleware/rateLimiter.js","fixedImportPath":"../middleware/rateLimiter"},"desc":"Remove unexpected \"js\" file extension from \"../middleware/rateLimiter.js\" into \"../middleware/rateLimiter\""}]},{"ruleId":"no-restricted-syntax","severity":2,"message":"iterators/generators require regenerator-runtime, which is too heavyweight for this guide to allow them. Separately, loops should be avoided in favor of array iterations.","line":237,"column":7,"nodeType":"ForOfStatement","messageId":"restrictedSyntax","endLine":243,"endColumn":8},{"ruleId":"no-await-in-loop","severity":2,"message":"Unexpected `await` inside a loop.","line":238,"column":24,"nodeType":"AwaitExpression","messageId":"unexpectedAwait","endLine":238,"endColumn":46},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":240,"column":11,"nodeType":"MemberExpression","messageId":"unexpected","endLine":240,"endColumn":22,"suggestions":[{"fix":{"range":[8387,8462],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":245,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":245,"endColumn":20,"suggestions":[{"fix":{"range":[8557,8614],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":251,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":251,"endColumn":18,"suggestions":[{"fix":{"range":[8732,8798],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":253,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":253,"endColumn":18,"suggestions":[{"fix":{"range":[8836,8914],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":255,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":255,"endColumn":20,"suggestions":[{"fix":{"range":[8943,9007],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":263,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":263,"endColumn":16,"suggestions":[{"fix":{"range":[9184,9250],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]}],"suppressedMessages":[],"errorCount":46,"fatalErrorCount":0,"warningCount":22,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import path from 'path';\n\nconst fs = require('fs');\nconst util = require('util');\nconst context = require('../context'); // Import the context module\nconst MetaAIService = require('./src/services/metaAI');\n\n// Load all commands dynamically\nconst commands = new Map();\nconst commandsDir = path.join(__dirname, '..', 'commands');\n\nfunction loadCommands(dir) {\n  const files = fs.readdirSync(dir, { withFileTypes: true });\n  for (const file of files) {\n    const fullPath = path.join(dir, file.name);\n    if (file.isDirectory()) {\n      loadCommands(fullPath); // Recursively load commands from subdirectories\n    } else if (file.isFile() && file.name.endsWith('.js')) {\n      try {\n        const command = require(fullPath);\n        if (command.name && typeof command.code === 'function') {\n          commands.set(command.name, command);\n          console.log(`Loaded command: ${command.name}`);\n        }\n      } catch (error) {\n        console.error(`Error loading command ${fullPath}:`, error);\n      }\n    }\n  }\n}\n\nloadCommands(commandsDir);\n\nmodule.exports = async job => {\n  console.log('message-processor: Received job', job.data.serializableMsg.key.id);\n  const { serializableMsg: msg } = job.data;\n  const { bot } = global; // Assume bot is set globally in main.js\n\n  if (!bot) {\n    console.error('Bot object is not available in message-processor.');\n    return;\n  }\n\n  const { config, formatter, database, tools } = context;\n  const metaAI = new MetaAIService(process.env.META_AI_KEY);\n\n  const messageType = msg.type || Object.keys(msg.message || {})[0];\n  let text = '';\n\n  if (messageType === 'conversation') {\n    text = msg.message.conversation;\n  } else if (messageType === 'extendedTextMessage' && msg.message.extendedTextMessage) {\n    text = msg.message.extendedTextMessage.text;\n  } else if (\n    messageType === 'imageMessage' &&\n    msg.message.imageMessage &&\n    msg.message.imageMessage.caption\n  ) {\n    text = msg.message.imageMessage.caption;\n  } else if (\n    messageType === 'videoMessage' &&\n    msg.message.videoMessage &&\n    msg.message.videoMessage.caption\n  ) {\n    text = msg.message.videoMessage.caption;\n  } else if (\n    messageType === 'buttonsMessage' &&\n    msg.message.buttonsMessage &&\n    msg.message.buttonsMessage.footer\n  ) {\n    text = msg.message.buttonsMessage.footer;\n  } else if (\n    messageType === 'protocolMessage' &&\n    msg.message.protocolMessage &&\n    msg.message.protocolMessage.quotedMessage\n  ) {\n    // Handle reaction or other protocol, but for now, extract from quoted if text\n    const quoted = msg.message.protocolMessage.quotedMessage;\n    const quotedType = Object.keys(quoted)[0];\n    if (quotedType === 'conversation') {\n      text = quoted.conversation;\n    } else if (quotedType === 'extendedTextMessage') {\n      text = quoted.extendedTextMessage.text;\n    }\n  }\n  console.log('message-processor: Extracted text:', text);\n\n  // Handle voice messages for transcription\n  if (messageType === 'audioMessage') {\n    try {\n      const audioBuffer = msg.message.audioMessage; // Assuming buffer is available\n      const transcript = await metaAI.transcribeVoice(audioBuffer);\n      console.log('message-processor: Voice transcript:', transcript);\n\n      // Create context for voice message\n      const ctx = {\n        reply: async content => {\n          const messageContent = typeof content === 'string' ? { text: content } : content;\n          return await bot.sendMessage(msg.key.remoteJid, messageContent);\n        },\n        bot: {\n          context: { config, formatter, database, tools },\n        },\n        sender: { jid: msg.key.participant || msg.key.remoteJid, pushName: msg.pushName },\n        id: msg.key.id,\n        isGroup: msg.key.remoteJid.endsWith('@g.us'),\n        transcript,\n        msg,\n        getId: jid => jid.split('@')[0],\n      };\n\n      // Generate AI response based on transcript\n      const aiResponse = await metaAI.generateReply(\n        `Respond to this voice message transcript: \"${transcript}\"`\n      );\n      await ctx.reply(`Voice transcript: \"${transcript}\"\\n\\nAI Response: ${aiResponse}`);\n      return;\n    } catch (error) {\n      console.error('Voice processing error:', error);\n      return;\n    }\n  }\n\n  // Early skip for non-text types to reduce noise\n  const textTypes = [\n    'conversation',\n    'extendedTextMessage',\n    'imageMessage',\n    'videoMessage',\n    'buttonsMessage',\n    'protocolMessage',\n  ];\n  if (!textTypes.includes(messageType)) {\n    console.log('message-processor: Skipping non-text message type:', messageType);\n    return;\n  }\n  if (!text) return;\n\n  const prefixMatch = text.match(config.bot.prefix);\n  console.log('message-processor: Prefix match:', prefixMatch);\n\n  if (!prefixMatch) return; // Not a command\n\n  const prefix = prefixMatch[0];\n  const commandText = text.substring(prefix.length).trim();\n  const args = commandText.split(' ');\n  const commandName = args.shift().toLowerCase();\n\n  console.log('message-processor: Command name:', commandName);\n  console.log('message-processor: Arguments:', args);\n\n  const command = commands.get(commandName);\n  console.log('message-processor: Found command:', !!command);\n  if (commandName === 'proverb') console.log('Proverb command matched');\n\n  if (command) {\n    const ctx = {\n      reply: async content => {\n        const messageContent = typeof content === 'string' ? { text: content } : content;\n        return await bot.sendMessage(msg.key.remoteJid, messageContent);\n      },\n      editMessage: async (key, content) => {\n        await bot.sendMessage(msg.key.remoteJid, { edit: key, text: content });\n      },\n      bot: {\n        context: {\n          config,\n          formatter,\n          database,\n          tools,\n        },\n      },\n      used: {\n        prefix,\n        command: commandName,\n      },\n      args,\n      sender: {\n        jid: msg.key.participant || msg.key.remoteJid, // For group messages, participant is sender, else remoteJid\n        pushName: msg.pushName,\n      },\n      id: msg.key.id,\n      isGroup: msg.key.remoteJid.endsWith('@g.us'),\n      // Placeholder for group functions - these would need actual implementation\n      // that interacts with Baileys' group metadata and participants.\n      // For now, they return false or throw an error.\n      group: () => ({\n        isAdmin: async jid => {\n          if (!msg.key.remoteJid.endsWith('@g.us')) return false;\n          try {\n            const metadata = await bot.groupMetadata(msg.key.remoteJid);\n            const participant = metadata.participants.find(p => p.id === jid);\n            return participant ? participant.admin : false;\n          } catch (error) {\n            console.error('Error fetching group metadata for isAdmin:', error);\n            return false;\n          }\n        },\n        isOwner: async jid => {\n          if (!msg.key.remoteJid.endsWith('@g.us')) return false;\n          try {\n            const metadata = await bot.groupMetadata(msg.key.remoteJid);\n            return metadata.owner === jid;\n          } catch (error) {\n            console.error('Error fetching group metadata for isOwner:', error);\n            return false;\n          }\n        },\n        // Add other group-related functions as needed by commands\n      }),\n      // Add other properties to ctx as needed by commands (e.g., quoted message, media)\n      msg, // The original serializable message\n      // Helper to get ID from JID (e.g., 62812...)\n      getId: jid => jid.split('@')[0],\n    };\n\n    // Integrate middleware chain\n    try {\n      const middleware = [\n        require('../middleware/botMode.js'),\n        require('../middleware/inputValidation.js'),\n        require('../middleware/groupMute.js'),\n        require('../middleware/nightMode.js'),\n        require('../middleware/maliciousMessage.js'),\n        require('../middleware/didYouMean.js'),\n        require('../middleware/afk.js'),\n        require('../middleware/antiMedia.js'),\n        require('../middleware/antiLink.js'),\n        require('../middleware/antiNsfw.js'),\n        require('../middleware/antiSpam.js'),\n        require('../middleware/antiTagsw.js'),\n        require('../middleware/antiToxic.js'),\n        require('../middleware/menfess.js'),\n        require('../middleware/rateLimiter.js'),\n      ];\n\n      for (const mw of middleware) {\n        const result = await mw(ctx, context);\n        if (!result) {\n          console.log('message-processor: Middleware blocked command:', commandName);\n          return; // Middleware blocked, exit\n        }\n      }\n    } catch (mwError) {\n      console.error('Middleware error in processor:', mwError);\n      await ctx.reply(formatter.quote(`Middleware error: ${mwError.message}`));\n      return;\n    }\n\n    try {\n      console.log('message-processor: Executing command:', commandName);\n      await command.code(ctx);\n      console.log('message-processor: Command executed successfully:', commandName);\n    } catch (error) {\n      console.error(`Error executing command ${commandName}:`, error);\n      await ctx.reply(\n        formatter.quote(\n          `An error occurred while executing ${prefix}${commandName}: ${error.message}`\n        )\n      );\n    }\n  } else {\n    console.log(`message-processor: Unknown command: ${commandName}`);\n    // Optional: Handle unknown commands\n    // await bot.sendMessage(msg.key.remoteJid, { text: formatter.quote(`Unknown command: ${prefix}${commandName}`) });\n  }\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\src\\middleware\\cooldown.js","messages":[{"ruleId":"no-restricted-syntax","severity":2,"message":"iterators/generators require regenerator-runtime, which is too heavyweight for this guide to allow them. Separately, loops should be avoided in favor of array iterations.","line":76,"column":5,"nodeType":"ForOfStatement","messageId":"restrictedSyntax","endLine":80,"endColumn":6},{"ruleId":"no-restricted-syntax","severity":2,"message":"iterators/generators require regenerator-runtime, which is too heavyweight for this guide to allow them. Separately, loops should be avoided in favor of array iterations.","line":90,"column":5,"nodeType":"ForOfStatement","messageId":"restrictedSyntax","endLine":94,"endColumn":6},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":110,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":110,"endColumn":7}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Cooldown Middleware for WhatsDeX\n * Implements rate limiting and cooldown functionality for commands\n */\n\nclass Cooldown {\n  constructor() {\n    this.cooldowns = new Map();\n  }\n\n  /**\n   * Check if a user is on cooldown for a specific command\n   * @param {string} userId - User identifier\n   * @param {string} command - Command name\n   * @param {number} cooldownMs - Cooldown duration in milliseconds\n   * @returns {boolean} - True if user is on cooldown, false otherwise\n   */\n  isOnCooldown(userId, command, cooldownMs) {\n    const key = `${userId}:${command}`;\n    const lastUsed = this.cooldowns.get(key);\n\n    if (!lastUsed) {\n      return false;\n    }\n\n    const timePassed = Date.now() - lastUsed;\n    return timePassed < cooldownMs;\n  }\n\n  /**\n   * Set cooldown for a user and command\n   * @param {string} userId - User identifier\n   * @param {string} command - Command name\n   */\n  setCooldown(userId, command) {\n    const key = `${userId}:${command}`;\n    this.cooldowns.set(key, Date.now());\n  }\n\n  /**\n   * Get remaining cooldown time for a user and command\n   * @param {string} userId - User identifier\n   * @param {string} command - Command name\n   * @param {number} cooldownMs - Cooldown duration in milliseconds\n   * @returns {number} - Remaining time in milliseconds, 0 if not on cooldown\n   */\n  getRemainingTime(userId, command, cooldownMs) {\n    const key = `${userId}:${command}`;\n    const lastUsed = this.cooldowns.get(key);\n\n    if (!lastUsed) {\n      return 0;\n    }\n\n    const timePassed = Date.now() - lastUsed;\n    const remaining = cooldownMs - timePassed;\n\n    return Math.max(0, remaining);\n  }\n\n  /**\n   * Clear cooldown for a user and command\n   * @param {string} userId - User identifier\n   * @param {string} command - Command name\n   */\n  clearCooldown(userId, command) {\n    const key = `${userId}:${command}`;\n    this.cooldowns.delete(key);\n  }\n\n  /**\n   * Clear all cooldowns for a user\n   * @param {string} userId - User identifier\n   */\n  clearUserCooldowns(userId) {\n    for (const [key] of this.cooldowns) {\n      if (key.startsWith(`${userId}:`)) {\n        this.cooldowns.delete(key);\n      }\n    }\n  }\n\n  /**\n   * Clean up expired cooldowns\n   * @param {number} maxAge - Maximum age in milliseconds for cleanup\n   */\n  cleanup(maxAge = 3600000) {\n    // Default 1 hour\n    const now = Date.now();\n    for (const [key, timestamp] of this.cooldowns) {\n      if (now - timestamp > maxAge) {\n        this.cooldowns.delete(key);\n      }\n    }\n  }\n\n  /**\n   * Get cooldown statistics\n   * @returns {object} - Statistics about current cooldowns\n   */\n  getStats() {\n    return {\n      totalCooldowns: this.cooldowns.size,\n      uniqueUsers: new Set([...this.cooldowns.keys()].map(key => key.split(':')[0])).size,\n      uniqueCommands: new Set([...this.cooldowns.keys()].map(key => key.split(':')[1])).size,\n    };\n  }\n}\n\nmodule.exports = { Cooldown };\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\src\\middleware\\security.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":16,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":23},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":2,"column":16,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":23},{"ruleId":"no-restricted-syntax","severity":2,"message":"iterators/generators require regenerator-runtime, which is too heavyweight for this guide to allow them. Separately, loops should be avoided in favor of array iterations.","line":122,"column":5,"nodeType":"ForOfStatement","messageId":"restrictedSyntax","endLine":129,"endColumn":6},{"ruleId":"no-restricted-syntax","severity":2,"message":"iterators/generators require regenerator-runtime, which is too heavyweight for this guide to allow them. Separately, loops should be avoided in favor of array iterations.","line":152,"column":7,"nodeType":"ForOfStatement","messageId":"restrictedSyntax","endLine":159,"endColumn":8},{"ruleId":"class-methods-use-this","severity":2,"message":"Expected 'this' to be used by class method 'detectCommandInjection'.","line":250,"column":3,"nodeType":"FunctionExpression","messageId":"missingThis","endLine":250,"endColumn":25},{"ruleId":"no-restricted-syntax","severity":2,"message":"iterators/generators require regenerator-runtime, which is too heavyweight for this guide to allow them. Separately, loops should be avoided in favor of array iterations.","line":264,"column":5,"nodeType":"ForOfStatement","messageId":"restrictedSyntax","endLine":271,"endColumn":6},{"ruleId":"class-methods-use-this","severity":2,"message":"Expected 'this' to be used by class method 'isSuspiciousUrl'.","line":291,"column":3,"nodeType":"FunctionExpression","messageId":"missingThis","endLine":291,"endColumn":18},{"ruleId":"no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":313,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":313,"endColumn":19},{"ruleId":"class-methods-use-this","severity":2,"message":"Expected 'this' to be used by class method 'hashIdentifier'.","line":338,"column":3,"nodeType":"FunctionExpression","messageId":"missingThis","endLine":338,"endColumn":17},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":349,"column":27,"nodeType":"Identifier","messageId":"undef","endLine":349,"endColumn":34},{"ruleId":"class-methods-use-this","severity":2,"message":"Expected 'this' to be used by class method 'getRiskLevel'.","line":376,"column":3,"nodeType":"FunctionExpression","messageId":"missingThis","endLine":376,"endColumn":15},{"ruleId":"no-restricted-syntax","severity":2,"message":"iterators/generators require regenerator-runtime, which is too heavyweight for this guide to allow them. Separately, loops should be avoided in favor of array iterations.","line":421,"column":5,"nodeType":"ForOfStatement","messageId":"restrictedSyntax","endLine":428,"endColumn":6},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":445,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":445,"endColumn":7}],"suppressedMessages":[],"errorCount":12,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const crypto = require('crypto');\nconst logger = require('../utils/logger');\n\nclass SecurityMiddleware {\n  constructor() {\n    this.suspiciousPatterns = [\n      /\\b(unban|hack|exploit|cheat|crack)\\b/i,\n      /\\b(sql|script|injection|attack)\\b/i,\n      /\\b(password|token|key|secret)\\b.*\\b(leak|steal|dump)\\b/i,\n      /\\b(ddos|spam|botnet)\\b/i,\n      /\\b(malware|virus|ransomware)\\b/i,\n    ];\n\n    this.rateLimitCache = new Map();\n    this.blockedIPs = new Set();\n    this.suspiciousUsers = new Set();\n  }\n\n  /**\n   * Main security middleware function\n   * @param {Object} context - Message context\n   * @returns {Object} Security check result\n   */\n  async checkSecurity(context) {\n    const { message, userId, userJid, remoteJid } = context;\n\n    try {\n      // Extract IP-like information (for logging)\n      const clientInfo = this.extractClientInfo(context);\n\n      // 1. Content analysis\n      const contentCheck = this.analyzeContent(message);\n      if (contentCheck.blocked) {\n        await this.logSecurityEvent('content_blocked', {\n          userId,\n          userJid,\n          remoteJid,\n          reason: contentCheck.reason,\n          content: message.substring(0, 100),\n          clientInfo,\n        });\n        return { allowed: false, reason: contentCheck.reason };\n      }\n\n      // 2. Rate limiting check\n      const rateCheck = this.checkRateLimit(userId, remoteJid);\n      if (!rateCheck.allowed) {\n        await this.logSecurityEvent('rate_limit_exceeded', {\n          userId,\n          userJid,\n          remoteJid,\n          reason: rateCheck.reason,\n          clientInfo,\n        });\n        return { allowed: false, reason: rateCheck.reason };\n      }\n\n      // 3. Spam detection\n      const spamCheck = this.detectSpam(message, userId);\n      if (spamCheck.blocked) {\n        await this.logSecurityEvent('spam_detected', {\n          userId,\n          userJid,\n          remoteJid,\n          reason: spamCheck.reason,\n          clientInfo,\n        });\n        return { allowed: false, reason: spamCheck.reason };\n      }\n\n      // 4. Check for blocked users/IPs\n      if (this.isBlocked(userId, clientInfo.ip)) {\n        await this.logSecurityEvent('blocked_user', {\n          userId,\n          userJid,\n          remoteJid,\n          reason: 'User is blocked',\n          clientInfo,\n        });\n        return { allowed: false, reason: 'Access denied' };\n      }\n\n      // 5. Command injection detection\n      const injectionCheck = this.detectCommandInjection(message);\n      if (injectionCheck.blocked) {\n        await this.logSecurityEvent('command_injection', {\n          userId,\n          userJid,\n          remoteJid,\n          reason: injectionCheck.reason,\n          content: message,\n          clientInfo,\n        });\n        return { allowed: false, reason: injectionCheck.reason };\n      }\n\n      return { allowed: true };\n    } catch (error) {\n      logger.error('Security middleware error:', error);\n      // Fail-safe: allow request but log the error\n      await this.logSecurityEvent('middleware_error', {\n        userId,\n        userJid,\n        remoteJid,\n        error: error.message,\n      });\n      return { allowed: true };\n    }\n  }\n\n  /**\n   * Analyze message content for security threats\n   * @param {string} content - Message content\n   * @returns {Object} Analysis result\n   */\n  analyzeContent(content) {\n    if (!content || typeof content !== 'string') {\n      return { blocked: false };\n    }\n\n    // Check for suspicious patterns\n    for (const pattern of this.suspiciousPatterns) {\n      if (pattern.test(content)) {\n        return {\n          blocked: true,\n          reason: 'Message contains suspicious content',\n        };\n      }\n    }\n\n    // Check for excessive caps\n    const capsRatio = (content.match(/[A-Z]/g) || []).length / content.length;\n    if (capsRatio > 0.7 && content.length > 10) {\n      return {\n        blocked: true,\n        reason: 'Message contains excessive capital letters (possible spam)',\n      };\n    }\n\n    // Check for repetitive characters\n    if (/(.)\\1{10,}/.test(content)) {\n      return {\n        blocked: true,\n        reason: 'Message contains repetitive characters',\n      };\n    }\n\n    // Check for suspicious URLs\n    const urlRegex = /https?:\\/\\/[^\\s]+/g;\n    const urls = content.match(urlRegex);\n    if (urls) {\n      for (const url of urls) {\n        if (this.isSuspiciousUrl(url)) {\n          return {\n            blocked: true,\n            reason: 'Message contains suspicious URL',\n          };\n        }\n      }\n    }\n\n    return { blocked: false };\n  }\n\n  /**\n   * Check rate limiting\n   * @param {string} userId - User ID\n   * @param {string} remoteJid - Remote JID\n   * @returns {Object} Rate limit check result\n   */\n  checkRateLimit(userId, remoteJid) {\n    const now = Date.now();\n    const windowMs = 60000; // 1 minute\n    const maxRequests = 30; // 30 requests per minute\n\n    const key = `${userId}:${remoteJid}`;\n    const userRequests = this.rateLimitCache.get(key) || [];\n\n    // Remove old requests outside the window\n    const validRequests = userRequests.filter(time => now - time < windowMs);\n\n    if (validRequests.length >= maxRequests) {\n      return {\n        allowed: false,\n        reason: `Rate limit exceeded: ${maxRequests} requests per minute`,\n      };\n    }\n\n    // Add current request\n    validRequests.push(now);\n    this.rateLimitCache.set(key, validRequests);\n\n    // Cleanup old entries periodically\n    if (Math.random() < 0.01) {\n      // 1% chance\n      this.cleanupRateLimitCache();\n    }\n\n    return { allowed: true };\n  }\n\n  /**\n   * Detect spam patterns\n   * @param {string} content - Message content\n   * @param {string} userId - User ID\n   * @returns {Object} Spam detection result\n   */\n  detectSpam(content, userId) {\n    if (!content) return { blocked: false };\n\n    // Track user message patterns\n    const userKey = `spam:${userId}`;\n    const userMessages = this.rateLimitCache.get(userKey) || [];\n\n    // Check for identical messages (possible spam bot)\n    if (userMessages.includes(content)) {\n      return {\n        blocked: true,\n        reason: 'Duplicate message detected (possible spam)',\n      };\n    }\n\n    // Keep track of recent messages\n    userMessages.push(content);\n    if (userMessages.length > 10) {\n      userMessages.shift(); // Keep only last 10 messages\n    }\n    this.rateLimitCache.set(userKey, userMessages);\n\n    // Check for message flooding\n    const recentMessages = userMessages.filter(\n      msg => Date.now() - (this.rateLimitCache.get(`${userKey}:time:${msg}`) || 0) < 10000 // 10 seconds\n    );\n\n    if (recentMessages.length > 5) {\n      return {\n        blocked: true,\n        reason: 'Message flooding detected',\n      };\n    }\n\n    return { blocked: false };\n  }\n\n  /**\n   * Detect command injection attempts\n   * @param {string} content - Message content\n   * @returns {Object} Injection detection result\n   */\n  detectCommandInjection(content) {\n    if (!content) return { blocked: false };\n\n    // Common command injection patterns\n    const injectionPatterns = [\n      /[;&|`$()]/, // Shell metacharacters\n      /\\b(eval|exec|system|shell_exec|passthru)\\b/i, // PHP functions\n      /\\b(process|child_process|spawn|exec)\\b.*\\b(require|import)\\b/i, // Node.js patterns\n      /<\\?php/i, // PHP code\n      /<script/i, // Script tags\n      /javascript:/i, // JavaScript URLs\n      /data:text\\/html/i, // Data URLs\n    ];\n\n    for (const pattern of injectionPatterns) {\n      if (pattern.test(content)) {\n        return {\n          blocked: true,\n          reason: 'Potential command injection detected',\n        };\n      }\n    }\n\n    return { blocked: false };\n  }\n\n  /**\n   * Check if user/IP is blocked\n   * @param {string} userId - User ID\n   * @param {string} ip - IP address\n   * @returns {boolean} Whether blocked\n   */\n  isBlocked(userId, ip) {\n    return this.blockedIPs.has(ip) || this.suspiciousUsers.has(userId);\n  }\n\n  /**\n   * Check if URL is suspicious\n   * @param {string} url - URL to check\n   * @returns {boolean} Whether suspicious\n   */\n  isSuspiciousUrl(url) {\n    const suspiciousDomains = [\n      'bit.ly',\n      'tinyurl.com',\n      'goo.gl', // URL shorteners\n      'pastebin.com',\n      'hastebin.com', // Paste sites\n      /\\.onion/, // Tor hidden services\n      /[\\w-]+\\.ru$/, // Russian domains (often malicious)\n      /[\\w-]+\\.cn$/, // Chinese domains (often malicious)\n    ];\n\n    try {\n      const urlObj = new URL(url);\n      const domain = urlObj.hostname.toLowerCase();\n\n      return suspiciousDomains.some(pattern => {\n        if (typeof pattern === 'string') {\n          return domain.includes(pattern);\n        }\n        return pattern.test(domain);\n      });\n    } catch (error) {\n      // Invalid URL\n      return true;\n    }\n  }\n\n  /**\n   * Extract client information for logging\n   * @param {Object} context - Message context\n   * @returns {Object} Client information\n   */\n  extractClientInfo(context) {\n    return {\n      userAgent: context.userAgent || 'unknown',\n      platform: context.platform || 'unknown',\n      ip: this.hashIdentifier(context.remoteJid || 'unknown'), // Hash for privacy\n      sessionId: context.sessionId || 'unknown',\n    };\n  }\n\n  /**\n   * Hash identifier for privacy-preserving logging\n   * @param {string} identifier - Identifier to hash\n   * @returns {string} Hashed identifier\n   */\n  hashIdentifier(identifier) {\n    return crypto.createHash('sha256').update(identifier).digest('hex').substring(0, 16);\n  }\n\n  /**\n   * Log security event\n   * @param {string} eventType - Event type\n   * @param {Object} details - Event details\n   */\n  async logSecurityEvent(eventType, details) {\n    try {\n      const auditLogger = require('../services/auditLogger');\n      await auditLogger.logEvent({\n        eventType,\n        actor: details.userId || 'unknown',\n        actorId: details.userId,\n        action: eventType,\n        resource: 'security',\n        details: {\n          reason: details.reason,\n          content: details.content,\n          clientInfo: details.clientInfo,\n        },\n        riskLevel: this.getRiskLevel(eventType),\n        ipAddress: details.clientInfo?.ip,\n        userAgent: details.clientInfo?.userAgent,\n        sessionId: details.clientInfo?.sessionId,\n      });\n    } catch (error) {\n      logger.error('Failed to log security event:', error);\n    }\n  }\n\n  /**\n   * Get risk level for event type\n   * @param {string} eventType - Event type\n   * @returns {string} Risk level\n   */\n  getRiskLevel(eventType) {\n    const riskLevels = {\n      content_blocked: 'medium',\n      rate_limit_exceeded: 'low',\n      spam_detected: 'medium',\n      blocked_user: 'high',\n      command_injection: 'critical',\n      middleware_error: 'medium',\n    };\n\n    return riskLevels[eventType] || 'low';\n  }\n\n  /**\n   * Add IP to blocked list\n   * @param {string} ip - IP address to block\n   * @param {number} duration - Block duration in milliseconds\n   */\n  blockIP(ip, duration = 3600000) {\n    // Default 1 hour\n    this.blockedIPs.add(ip);\n    setTimeout(() => {\n      this.blockedIPs.delete(ip);\n    }, duration);\n  }\n\n  /**\n   * Add user to suspicious list\n   * @param {string} userId - User ID to mark as suspicious\n   * @param {number} duration - Duration in milliseconds\n   */\n  markUserSuspicious(userId, duration = 3600000) {\n    this.suspiciousUsers.add(userId);\n    setTimeout(() => {\n      this.suspiciousUsers.delete(userId);\n    }, duration);\n  }\n\n  /**\n   * Cleanup rate limit cache\n   */\n  cleanupRateLimitCache() {\n    const now = Date.now();\n    const maxAge = 600000; // 10 minutes\n\n    for (const [key, timestamps] of this.rateLimitCache.entries()) {\n      const validTimestamps = timestamps.filter(time => now - time < maxAge);\n      if (validTimestamps.length === 0) {\n        this.rateLimitCache.delete(key);\n      } else {\n        this.rateLimitCache.set(key, validTimestamps);\n      }\n    }\n  }\n\n  /**\n   * Get security statistics\n   * @returns {Object} Security statistics\n   */\n  getStats() {\n    return {\n      blockedIPs: this.blockedIPs.size,\n      suspiciousUsers: this.suspiciousUsers.size,\n      rateLimitCacheSize: this.rateLimitCache.size,\n      suspiciousPatterns: this.suspiciousPatterns.length,\n    };\n  }\n}\n\nmodule.exports = SecurityMiddleware;\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\src\\services\\WhatsDeXBrain.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":22,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":29},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":2,"column":29,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":36},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":3,"column":34,"nodeType":"Identifier","messageId":"undef","endLine":3,"endColumn":41},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":4,"column":23,"nodeType":"Identifier","messageId":"undef","endLine":4,"endColumn":30},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":5,"column":16,"nodeType":"Identifier","messageId":"undef","endLine":5,"endColumn":23},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":13,"column":37,"nodeType":"Identifier","messageId":"undef","endLine":13,"endColumn":44},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async method 'processMessage'.","line":25,"column":9,"nodeType":"FunctionExpression","messageId":"missingReturn","endLine":25,"endColumn":23},{"ruleId":"no-unused-vars","severity":1,"message":"'userId' is assigned a value but never used.","line":27,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":27,"endColumn":17,"suggestions":[{"messageId":"removeVar","data":{"varName":"userId"},"fix":{"range":[898,928],"text":""},"desc":"Remove unused variable 'userId'."}]},{"ruleId":"consistent-return","severity":2,"message":"Async method 'processMessage' expected a return value.","line":43,"column":7,"nodeType":"ReturnStatement","messageId":"missingReturnValue","endLine":43,"endColumn":14},{"ruleId":"class-methods-use-this","severity":2,"message":"Expected 'this' to be used by class method 'isConversationalQuery'.","line":53,"column":3,"nodeType":"FunctionExpression","messageId":"missingThis","endLine":53,"endColumn":24},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":107,"column":23,"nodeType":"Identifier","messageId":"undef","endLine":107,"endColumn":30},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":119,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":119,"endColumn":20,"suggestions":[{"fix":{"range":[3828,3890],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":129,"column":23,"nodeType":"Identifier","messageId":"undef","endLine":129,"endColumn":30},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":153,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":153,"endColumn":20,"suggestions":[{"fix":{"range":[4895,4955],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":160,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":160,"endColumn":7}],"suppressedMessages":[],"errorCount":12,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const intentRouter = require('./brain/intentRouter');\nconst NLPProcessorService = require('./nlpProcessor');\nconst ContentModerationService = require('./contentModeration');\nconst MetaAIService = require('./metaAI');\nconst logger = require('../utils/logger');\n\nclass WhatsDeXBrain {\n  constructor(bot, context) {\n    this.bot = bot;\n    this.context = context;\n    this.nlp = new NLPProcessorService();\n    this.moderation = new ContentModerationService();\n    this.metaAI = new MetaAIService(process.env.META_AI_KEY);\n    this.conversationMemory = new Map(); // In-memory for now, will be replaced with DB\n\n    logger.info('WhatsDeX Brain initialized with Meta AI');\n  }\n\n  /**\n   * Process an incoming message and decide what to do.\n   *\n   * @param {object} ctx The message context from the bot.\n   * @returns {Promise<void>}\n   */\n  async processMessage(ctx) {\n    const { message } = ctx;\n    const userId = ctx.sender.jid;\n\n    // 1. Moderate the message content\n    const moderationResult = await this.moderation.moderateContent(message);\n    if (!moderationResult.safe) {\n      logger.warn('Message flagged by moderation', { moderationResult });\n      return ctx.reply('Your message has been flagged for moderation.');\n    }\n\n    // 2. Process the message with NLP to understand the intent\n    const nlpResult = await this.nlp.processInput(message);\n    logger.info('NLP Result', { nlpResult });\n\n    // 3. Check if this is a conversational query that needs AI\n    if (this.isConversationalQuery(nlpResult)) {\n      await this.handleConversationalAI(ctx, nlpResult);\n      return;\n    }\n\n    // 4. Route the message to the appropriate handler\n    await intentRouter(nlpResult, ctx, this.bot, this.context);\n  }\n\n  /**\n   * Determine if a query should be handled by conversational AI\n   */\n  isConversationalQuery(nlpResult) {\n    const conversationalIntents = ['question', 'chat', 'help', 'general'];\n    return conversationalIntents.includes(nlpResult.intent) || nlpResult.confidence < 0.8; // Low confidence = conversational\n  }\n\n  /**\n   * Handle conversational AI interactions with memory\n   */\n  async handleConversationalAI(ctx, nlpResult) {\n    const userId = ctx.sender.jid;\n    const memory = this.getConversationMemory(userId);\n\n    try {\n      const prompt = `Previous conversation: ${memory.join(' | ')}\\nCurrent message: ${ctx.message}\\nIntent: ${nlpResult.intent}\\nRespond helpfully and contextually.`;\n      const aiResponse = await this.metaAI.generateReply(prompt);\n\n      // Update memory\n      this.updateConversationMemory(userId, ctx.message, aiResponse);\n\n      await ctx.reply(aiResponse);\n    } catch (error) {\n      logger.error('Conversational AI error:', error);\n      await ctx.reply(\"Sorry, I'm having trouble processing your request right now.\");\n    }\n  }\n\n  /**\n   * Get conversation memory for a user\n   */\n  getConversationMemory(userId) {\n    return this.conversationMemory.get(userId) || [];\n  }\n\n  /**\n   * Update conversation memory\n   */\n  updateConversationMemory(userId, userMessage, aiResponse) {\n    const memory = this.getConversationMemory(userId);\n    memory.push(`User: ${userMessage}`);\n    memory.push(`AI: ${aiResponse}`);\n\n    // Keep only last 10 exchanges\n    if (memory.length > 20) {\n      memory.splice(0, memory.length - 20);\n    }\n\n    this.conversationMemory.set(userId, memory);\n  }\n\n  /**\n   * Get conversation memory for a user from database (async)\n   */\n  async getConversationMemoryDB(userId) {\n    try {\n      const context = require('../../context');\n      const memory = await context.database.ConversationMemory.findMany({\n        where: { userId },\n        orderBy: { lastUpdated: 'desc' },\n        take: 1,\n      });\n\n      if (memory.length > 0) {\n        return JSON.parse(memory[0].messages);\n      }\n      return [];\n    } catch (error) {\n      console.error('Error retrieving conversation memory:', error);\n      return this.getConversationMemory(userId); // Fallback to in-memory\n    }\n  }\n\n  /**\n   * Update conversation memory in database (async)\n   */\n  async updateConversationMemoryDB(userId, userMessage, aiResponse) {\n    try {\n      const context = require('../../context');\n      const memory = await this.getConversationMemoryDB(userId);\n      memory.push(`User: ${userMessage}`);\n      memory.push(`AI: ${aiResponse}`);\n\n      // Keep only last 20 exchanges\n      const trimmedMemory = memory.length > 40 ? memory.slice(-40) : memory;\n\n      await context.database.ConversationMemory.upsert({\n        where: {\n          id: `${userId}-memory`, // Simple composite key\n        },\n        update: {\n          messages: JSON.stringify(trimmedMemory),\n          lastUpdated: new Date(),\n        },\n        create: {\n          id: `${userId}-memory`,\n          userId,\n          messages: JSON.stringify(trimmedMemory),\n          lastUpdated: new Date(),\n        },\n      });\n    } catch (error) {\n      console.error('Error updating conversation memory:', error);\n      // Fallback to in-memory update\n      this.updateConversationMemory(userId, userMessage, aiResponse);\n    }\n  }\n}\n\nmodule.exports = WhatsDeXBrain;\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\src\\services\\analytics.js","messages":[{"ruleId":"import-x/no-extraneous-dependencies","severity":2,"message":"'ws' should be listed in the project's dependencies. Run 'npm i ws' to add it","line":1,"column":19,"nodeType":"CallExpression","messageId":"missing","endLine":1,"endColumn":32},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":19,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":26},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":2,"column":16,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":23},{"ruleId":"no-case-declarations","severity":2,"message":"Unexpected lexical declaration in case block.","line":89,"column":11,"nodeType":"VariableDeclaration","messageId":"unexpected","endLine":89,"endColumn":74,"suggestions":[{"messageId":"addBrackets","fix":{"range":[2333,2517],"text":"{ const metrics = await this.getMetrics(data.timeframe || '24h');\n          this.sendToClient(ws, {\n            type: 'metrics',\n            data: metrics,\n          });\n          break; }"},"desc":"Add {} brackets around the case block."}]},{"ruleId":"no-case-declarations","severity":2,"message":"Unexpected lexical declaration in case block.","line":97,"column":11,"nodeType":"VariableDeclaration","messageId":"unexpected","endLine":97,"endColumn":59,"suggestions":[{"messageId":"addBrackets","fix":{"range":[2559,2732],"text":"{ const dashboard = await this.getDashboardData();\n          this.sendToClient(ws, {\n            type: 'dashboard',\n            data: dashboard,\n          });\n          break; }"},"desc":"Add {} brackets around the case block."}]},{"ruleId":"class-methods-use-this","severity":2,"message":"Expected 'this' to be used by class method 'sendToClient'.","line":121,"column":3,"nodeType":"FunctionExpression","messageId":"missingThis","endLine":121,"endColumn":15},{"ruleId":"no-underscore-dangle","severity":2,"message":"Unexpected dangling '_' in '_avg'.","line":255,"column":23,"nodeType":"MemberExpression","messageId":"unexpectedUnderscore","endLine":255,"endColumn":44},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":257,"column":17,"nodeType":"Identifier","messageId":"undef","endLine":257,"endColumn":24},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":336,"column":17,"nodeType":"Identifier","messageId":"undef","endLine":336,"endColumn":24},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":337,"column":17,"nodeType":"Identifier","messageId":"undef","endLine":337,"endColumn":24},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":338,"column":14,"nodeType":"Identifier","messageId":"undef","endLine":338,"endColumn":21},{"ruleId":"no-underscore-dangle","severity":2,"message":"Unexpected dangling '_' in '_sum'.","line":348,"column":20,"nodeType":"MemberExpression","messageId":"unexpectedUnderscore","endLine":348,"endColumn":36},{"ruleId":"no-underscore-dangle","severity":2,"message":"Unexpected dangling '_' in '_count'.","line":356,"column":32,"nodeType":"MemberExpression","messageId":"unexpectedUnderscore","endLine":356,"endColumn":43},{"ruleId":"no-underscore-dangle","severity":2,"message":"Unexpected dangling '_' in '_count'.","line":481,"column":18,"nodeType":"MemberExpression","messageId":"unexpectedUnderscore","endLine":481,"endColumn":29},{"ruleId":"no-underscore-dangle","severity":2,"message":"Unexpected dangling '_' in '_count'.","line":485,"column":18,"nodeType":"MemberExpression","messageId":"unexpectedUnderscore","endLine":485,"endColumn":29},{"ruleId":"no-underscore-dangle","severity":2,"message":"Unexpected dangling '_' in '_sum'.","line":489,"column":19,"nodeType":"MemberExpression","messageId":"unexpectedUnderscore","endLine":489,"endColumn":28},{"ruleId":"no-underscore-dangle","severity":2,"message":"Unexpected dangling '_' in '_count'.","line":493,"column":18,"nodeType":"MemberExpression","messageId":"unexpectedUnderscore","endLine":493,"endColumn":29},{"ruleId":"no-underscore-dangle","severity":2,"message":"Unexpected dangling '_' in '_count'.","line":494,"column":19,"nodeType":"MemberExpression","messageId":"unexpectedUnderscore","endLine":494,"endColumn":30},{"ruleId":"no-underscore-dangle","severity":2,"message":"Unexpected dangling '_' in '_count'.","line":494,"column":37,"nodeType":"MemberExpression","messageId":"unexpectedUnderscore","endLine":494,"endColumn":48},{"ruleId":"no-underscore-dangle","severity":2,"message":"Unexpected dangling '_' in '_count'.","line":496,"column":13,"nodeType":"MemberExpression","messageId":"unexpectedUnderscore","endLine":496,"endColumn":24},{"ruleId":"no-underscore-dangle","severity":2,"message":"Unexpected dangling '_' in '_count'.","line":497,"column":19,"nodeType":"MemberExpression","messageId":"unexpectedUnderscore","endLine":497,"endColumn":30},{"ruleId":"no-underscore-dangle","severity":2,"message":"Unexpected dangling '_' in '_count'.","line":497,"column":37,"nodeType":"MemberExpression","messageId":"unexpectedUnderscore","endLine":497,"endColumn":48},{"ruleId":"no-underscore-dangle","severity":2,"message":"Unexpected dangling '_' in '_count'.","line":497,"column":66,"nodeType":"MemberExpression","messageId":"unexpectedUnderscore","endLine":497,"endColumn":77},{"ruleId":"no-underscore-dangle","severity":2,"message":"Unexpected dangling '_' in '_count'.","line":501,"column":62,"nodeType":"MemberExpression","messageId":"unexpectedUnderscore","endLine":501,"endColumn":73},{"ruleId":"no-underscore-dangle","severity":2,"message":"Unexpected dangling '_' in '_count'.","line":502,"column":67,"nodeType":"MemberExpression","messageId":"unexpectedUnderscore","endLine":502,"endColumn":78},{"ruleId":"no-underscore-dangle","severity":2,"message":"Unexpected dangling '_' in '_sum'.","line":503,"column":70,"nodeType":"MemberExpression","messageId":"unexpectedUnderscore","endLine":503,"endColumn":79},{"ruleId":"no-underscore-dangle","severity":2,"message":"Unexpected dangling '_' in '_count'.","line":509,"column":22,"nodeType":"MemberExpression","messageId":"unexpectedUnderscore","endLine":509,"endColumn":33},{"ruleId":"no-underscore-dangle","severity":2,"message":"Unexpected dangling '_' in '_count'.","line":510,"column":27,"nodeType":"MemberExpression","messageId":"unexpectedUnderscore","endLine":510,"endColumn":38},{"ruleId":"no-underscore-dangle","severity":2,"message":"Unexpected dangling '_' in '_count'.","line":510,"column":45,"nodeType":"MemberExpression","messageId":"unexpectedUnderscore","endLine":510,"endColumn":56},{"ruleId":"no-underscore-dangle","severity":2,"message":"Unexpected dangling '_' in '_count'.","line":510,"column":74,"nodeType":"MemberExpression","messageId":"unexpectedUnderscore","endLine":510,"endColumn":85},{"ruleId":"no-underscore-dangle","severity":2,"message":"Unexpected dangling '_' in '_count'.","line":682,"column":16,"nodeType":"MemberExpression","messageId":"unexpectedUnderscore","endLine":682,"endColumn":27},{"ruleId":"no-underscore-dangle","severity":2,"message":"Unexpected dangling '_' in '_count'.","line":693,"column":27,"nodeType":"MemberExpression","messageId":"unexpectedUnderscore","endLine":693,"endColumn":38},{"ruleId":"no-underscore-dangle","severity":2,"message":"Unexpected dangling '_' in '_sum'.","line":761,"column":64,"nodeType":"MemberExpression","messageId":"unexpectedUnderscore","endLine":761,"endColumn":73},{"ruleId":"no-underscore-dangle","severity":2,"message":"Unexpected dangling '_' in '_count'.","line":762,"column":32,"nodeType":"MemberExpression","messageId":"unexpectedUnderscore","endLine":762,"endColumn":42},{"ruleId":"no-underscore-dangle","severity":2,"message":"Unexpected dangling '_' in '_sum'.","line":771,"column":22,"nodeType":"MemberExpression","messageId":"unexpectedUnderscore","endLine":771,"endColumn":31},{"ruleId":"no-underscore-dangle","severity":2,"message":"Unexpected dangling '_' in '_sum'.","line":778,"column":56,"nodeType":"MemberExpression","messageId":"unexpectedUnderscore","endLine":778,"endColumn":65},{"ruleId":"no-underscore-dangle","severity":2,"message":"Unexpected dangling '_' in '_count'.","line":834,"column":16,"nodeType":"MemberExpression","messageId":"unexpectedUnderscore","endLine":834,"endColumn":27},{"ruleId":"no-underscore-dangle","severity":2,"message":"Unexpected dangling '_' in '_avg'.","line":835,"column":30,"nodeType":"MemberExpression","messageId":"unexpectedUnderscore","endLine":835,"endColumn":39},{"ruleId":"no-underscore-dangle","severity":2,"message":"Unexpected dangling '_' in '_count'.","line":839,"column":16,"nodeType":"MemberExpression","messageId":"unexpectedUnderscore","endLine":839,"endColumn":27},{"ruleId":"no-underscore-dangle","severity":2,"message":"Unexpected dangling '_' in '_count'.","line":842,"column":25,"nodeType":"MemberExpression","messageId":"unexpectedUnderscore","endLine":842,"endColumn":33},{"ruleId":"no-underscore-dangle","severity":2,"message":"Unexpected dangling '_' in '_count'.","line":842,"column":39,"nodeType":"MemberExpression","messageId":"unexpectedUnderscore","endLine":842,"endColumn":47},{"ruleId":"no-underscore-dangle","severity":2,"message":"Unexpected dangling '_' in '_count'.","line":847,"column":18,"nodeType":"MemberExpression","messageId":"unexpectedUnderscore","endLine":847,"endColumn":29},{"ruleId":"no-underscore-dangle","severity":2,"message":"Unexpected dangling '_' in '_count'.","line":927,"column":39,"nodeType":"MemberExpression","messageId":"unexpectedUnderscore","endLine":927,"endColumn":50},{"ruleId":"no-underscore-dangle","severity":2,"message":"Unexpected dangling '_' in '_count'.","line":927,"column":57,"nodeType":"MemberExpression","messageId":"unexpectedUnderscore","endLine":927,"endColumn":68},{"ruleId":"no-underscore-dangle","severity":2,"message":"Unexpected dangling '_' in '_count'.","line":930,"column":55,"nodeType":"MemberExpression","messageId":"unexpectedUnderscore","endLine":930,"endColumn":66},{"ruleId":"no-underscore-dangle","severity":2,"message":"Unexpected dangling '_' in '_count'.","line":936,"column":13,"nodeType":"MemberExpression","messageId":"unexpectedUnderscore","endLine":936,"endColumn":24},{"ruleId":"no-underscore-dangle","severity":2,"message":"Unexpected dangling '_' in '_count'.","line":937,"column":19,"nodeType":"MemberExpression","messageId":"unexpectedUnderscore","endLine":937,"endColumn":30},{"ruleId":"no-underscore-dangle","severity":2,"message":"Unexpected dangling '_' in '_count'.","line":937,"column":37,"nodeType":"MemberExpression","messageId":"unexpectedUnderscore","endLine":937,"endColumn":48},{"ruleId":"no-underscore-dangle","severity":2,"message":"Unexpected dangling '_' in '_count'.","line":937,"column":66,"nodeType":"MemberExpression","messageId":"unexpectedUnderscore","endLine":937,"endColumn":77},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":941,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":941,"endColumn":22},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":942,"column":20,"nodeType":"Identifier","messageId":"undef","endLine":942,"endColumn":27},{"ruleId":"class-methods-use-this","severity":2,"message":"Expected 'this' to be used by class method 'calculatePercentile'.","line":953,"column":3,"nodeType":"FunctionExpression","messageId":"missingThis","endLine":953,"endColumn":22},{"ruleId":"no-restricted-syntax","severity":2,"message":"iterators/generators require regenerator-runtime, which is too heavyweight for this guide to allow them. Separately, loops should be avoided in favor of array iterations.","line":970,"column":5,"nodeType":"ForOfStatement","messageId":"restrictedSyntax","endLine":974,"endColumn":6},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":1026,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":1026,"endColumn":7}],"suppressedMessages":[],"errorCount":54,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const WebSocket = require('ws');\nconst logger = require('../utils/logger');\n\nclass AnalyticsService {\n  constructor(databaseService) {\n    this.database = databaseService;\n    this.wss = null;\n    this.clients = new Set();\n    this.isInitialized = false;\n\n    // Analytics cache for performance\n    this.cache = new Map();\n    this.cacheTimeout = 5 * 60 * 1000; // 5 minutes\n\n    // Real-time metrics\n    this.metrics = {\n      activeUsers: 0,\n      totalCommands: 0,\n      aiRequests: 0,\n      responseTime: 0,\n      errorRate: 0,\n      uptime: 0,\n    };\n\n    logger.info('Analytics service initialized');\n  }\n\n  /**\n   * Initialize analytics service\n   * @param {Object} config - Configuration object\n   */\n  async initialize(config) {\n    try {\n      // Initialize WebSocket server for real-time updates\n      if (config.websocketPort) {\n        this.wss = new WebSocket.Server({ port: config.websocketPort });\n\n        this.wss.on('connection', async ws => {\n          this.clients.add(ws);\n\n          ws.on('message', message => {\n            this.handleWebSocketMessage(ws, message);\n          });\n\n          ws.on('close', () => {\n            this.clients.delete(ws);\n          });\n\n          // Send initial data\n          this.sendToClient(ws, {\n            type: 'welcome',\n            data: await this.getDashboardData(),\n          });\n        });\n\n        logger.info(`WebSocket server started on port ${config.websocketPort}`);\n      }\n\n      // Start metrics collection\n      this.startMetricsCollection();\n\n      this.isInitialized = true;\n      logger.info('Analytics service initialized successfully');\n    } catch (error) {\n      logger.error('Failed to initialize analytics service', { error: error.message });\n      throw error;\n    }\n  }\n\n  /**\n   * Handle WebSocket messages\n   * @param {WebSocket} ws - WebSocket connection\n   * @param {string} message - Message data\n   */\n  async handleWebSocketMessage(ws, message) {\n    try {\n      const data = JSON.parse(message.toString());\n\n      switch (data.type) {\n        case 'subscribe':\n          // Client wants to subscribe to real-time updates\n          this.sendToClient(ws, {\n            type: 'subscribed',\n            data: { message: 'Successfully subscribed to real-time updates' },\n          });\n          break;\n\n        case 'get_metrics':\n          const metrics = await this.getMetrics(data.timeframe || '24h');\n          this.sendToClient(ws, {\n            type: 'metrics',\n            data: metrics,\n          });\n          break;\n\n        case 'get_dashboard':\n          const dashboard = await this.getDashboardData();\n          this.sendToClient(ws, {\n            type: 'dashboard',\n            data: dashboard,\n          });\n          break;\n\n        default:\n          logger.warn('Unknown WebSocket message type', { type: data.type });\n      }\n    } catch (error) {\n      logger.error('Failed to handle WebSocket message', { error: error.message });\n      this.sendToClient(ws, {\n        type: 'error',\n        data: { message: 'Failed to process message' },\n      });\n    }\n  }\n\n  /**\n   * Send data to a specific WebSocket client\n   * @param {WebSocket} ws - WebSocket connection\n   * @param {Object} data - Data to send\n   */\n  sendToClient(ws, data) {\n    try {\n      if (ws.readyState === WebSocket.OPEN) {\n        ws.send(JSON.stringify(data));\n      }\n    } catch (error) {\n      logger.error('Failed to send data to WebSocket client', { error: error.message });\n    }\n  }\n\n  /**\n   * Broadcast data to all connected clients\n   * @param {Object} data - Data to broadcast\n   */\n  broadcast(data) {\n    try {\n      const message = JSON.stringify(data);\n      this.clients.forEach(ws => {\n        if (ws.readyState === WebSocket.OPEN) {\n          ws.send(message);\n        }\n      });\n    } catch (error) {\n      logger.error('Failed to broadcast data', { error: error.message });\n    }\n  }\n\n  /**\n   * Start metrics collection interval\n   */\n  startMetricsCollection() {\n    // Update metrics every 30 seconds\n    setInterval(async () => {\n      try {\n        await this.updateMetrics();\n        const dashboardData = await this.getDashboardData();\n\n        // Broadcast updated data to all clients\n        this.broadcast({\n          type: 'dashboard_update',\n          data: dashboardData,\n          timestamp: new Date().toISOString(),\n        });\n      } catch (error) {\n        logger.error('Failed to update metrics', { error: error.message });\n      }\n    }, 30000);\n\n    // Clean cache every 10 minutes\n    setInterval(\n      () => {\n        this.cleanCache();\n      },\n      10 * 60 * 1000\n    );\n\n    logger.info('Metrics collection started');\n  }\n\n  /**\n   * Update real-time metrics\n   */\n  async updateMetrics() {\n    try {\n      const now = new Date();\n      const oneHourAgo = new Date(now.getTime() - 60 * 60 * 1000);\n      const oneDayAgo = new Date(now.getTime() - 24 * 60 * 60 * 1000);\n\n      // Active users (users active in last hour)\n      const activeUsers = await this.database.prisma.user.count({\n        where: {\n          lastActivity: {\n            gte: oneHourAgo,\n          },\n        },\n      });\n\n      // Total commands in last 24 hours\n      const totalCommands = await this.database.prisma.commandUsage.count({\n        where: {\n          usedAt: {\n            gte: oneDayAgo,\n          },\n        },\n      });\n\n      // AI requests in last 24 hours\n      const aiRequests = await this.database.prisma.commandUsage.count({\n        where: {\n          usedAt: {\n            gte: oneDayAgo,\n          },\n          category: 'ai-chat',\n        },\n      });\n\n      // Average response time\n      const responseTimeData = await this.database.prisma.commandUsage.aggregate({\n        where: {\n          usedAt: {\n            gte: oneDayAgo,\n          },\n          executionTime: {\n            not: null,\n          },\n        },\n        _avg: {\n          executionTime: true,\n        },\n      });\n\n      // Error rate\n      const totalUsage = await this.database.prisma.commandUsage.count({\n        where: {\n          usedAt: {\n            gte: oneDayAgo,\n          },\n        },\n      });\n\n      const errorCount = await this.database.prisma.commandUsage.count({\n        where: {\n          usedAt: {\n            gte: oneDayAgo,\n          },\n          success: false,\n        },\n      });\n\n      // Update metrics\n      this.metrics = {\n        activeUsers,\n        totalCommands,\n        aiRequests,\n        responseTime: responseTimeData._avg.executionTime || 0,\n        errorRate: totalUsage > 0 ? (errorCount / totalUsage) * 100 : 0,\n        uptime: process.uptime(),\n        timestamp: now.toISOString(),\n      };\n\n      logger.debug('Metrics updated', this.metrics);\n    } catch (error) {\n      logger.error('Failed to update metrics', { error: error.message });\n    }\n  }\n\n  /**\n   * Get dashboard data\n   * @returns {Promise<Object>} Dashboard data\n   */\n  async getDashboardData() {\n    try {\n      const cacheKey = 'dashboard_data';\n      const cached = this.cache.get(cacheKey);\n\n      if (cached && Date.now() - cached.timestamp < this.cacheTimeout) {\n        return cached.data;\n      }\n\n      const now = new Date();\n      const oneDayAgo = new Date(now.getTime() - 24 * 60 * 60 * 1000);\n      const sevenDaysAgo = new Date(now.getTime() - 7 * 24 * 60 * 60 * 1000);\n\n      // User statistics\n      const totalUsers = await this.database.prisma.user.count();\n      const premiumUsers = await this.database.prisma.subscription.count({\n        where: {\n          status: 'active',\n        },\n      });\n\n      // Command statistics\n      const commandStats = await this.database.prisma.commandUsage.groupBy({\n        by: ['category'],\n        where: {\n          usedAt: {\n            gte: oneDayAgo,\n          },\n        },\n        _count: {\n          id: true,\n        },\n      });\n\n      // Revenue statistics\n      const revenueData = await this.database.prisma.payment.aggregate({\n        where: {\n          status: 'completed',\n          createdAt: {\n            gte: sevenDaysAgo,\n          },\n        },\n        _sum: {\n          amount: true,\n        },\n      });\n\n      // Recent activity\n      const recentActivity = await this.database.prisma.commandUsage.findMany({\n        take: 10,\n        orderBy: {\n          usedAt: 'desc',\n        },\n        include: {\n          user: {\n            select: {\n              name: true,\n            },\n          },\n        },\n      });\n\n      // System health\n      const systemHealth = {\n        database: await this.database.healthCheck(),\n        uptime: process.uptime(),\n        memory: process.memoryUsage(),\n        cpu: process.cpuUsage(),\n      };\n\n      const dashboardData = {\n        overview: {\n          totalUsers,\n          premiumUsers,\n          activeUsers: this.metrics.activeUsers,\n          totalCommands: this.metrics.totalCommands,\n          aiRequests: this.metrics.aiRequests,\n          revenue: revenueData._sum.amount || 0,\n        },\n        performance: {\n          responseTime: this.metrics.responseTime,\n          errorRate: this.metrics.errorRate,\n          uptime: this.metrics.uptime,\n        },\n        commandStats: commandStats.reduce((acc, stat) => {\n          acc[stat.category] = stat._count.id;\n          return acc;\n        }, {}),\n        recentActivity: recentActivity.map(activity => ({\n          id: activity.id,\n          user: activity.user.name || 'Unknown',\n          command: activity.command,\n          category: activity.category,\n          success: activity.success,\n          timestamp: activity.usedAt,\n        })),\n        systemHealth,\n        timestamp: now.toISOString(),\n      };\n\n      // Cache the data\n      this.cache.set(cacheKey, {\n        data: dashboardData,\n        timestamp: Date.now(),\n      });\n\n      return dashboardData;\n    } catch (error) {\n      logger.error('Failed to get dashboard data', { error: error.message });\n      throw error;\n    }\n  }\n\n  /**\n   * Get detailed metrics for a timeframe\n   * @param {string} timeframe - Timeframe (1h, 24h, 7d, 30d)\n   * @returns {Promise<Object>} Detailed metrics\n   */\n  async getMetrics(timeframe = '24h') {\n    try {\n      const now = new Date();\n      let startDate;\n\n      switch (timeframe) {\n        case '1h':\n          startDate = new Date(now.getTime() - 60 * 60 * 1000);\n          break;\n        case '24h':\n          startDate = new Date(now.getTime() - 24 * 60 * 60 * 1000);\n          break;\n        case '7d':\n          startDate = new Date(now.getTime() - 7 * 24 * 60 * 60 * 1000);\n          break;\n        case '30d':\n          startDate = new Date(now.getTime() - 30 * 24 * 60 * 60 * 1000);\n          break;\n        default:\n          startDate = new Date(now.getTime() - 24 * 60 * 60 * 1000);\n      }\n\n      // User growth\n      const userGrowth = await this.database.prisma.user.groupBy({\n        by: ['createdAt'],\n        where: {\n          createdAt: {\n            gte: startDate,\n          },\n        },\n        _count: {\n          id: true,\n        },\n        orderBy: {\n          createdAt: 'asc',\n        },\n      });\n\n      // Command usage over time\n      const commandUsage = await this.database.prisma.commandUsage.groupBy({\n        by: ['usedAt'],\n        where: {\n          usedAt: {\n            gte: startDate,\n          },\n        },\n        _count: {\n          id: true,\n        },\n        orderBy: {\n          usedAt: 'asc',\n        },\n      });\n\n      // Revenue over time\n      const revenueOverTime = await this.database.prisma.payment.groupBy({\n        by: ['createdAt'],\n        where: {\n          createdAt: {\n            gte: startDate,\n          },\n          status: 'completed',\n        },\n        _sum: {\n          amount: true,\n        },\n        orderBy: {\n          createdAt: 'asc',\n        },\n      });\n\n      // Error rate over time\n      const errorRate = await this.database.prisma.commandUsage.groupBy({\n        by: ['usedAt'],\n        where: {\n          usedAt: {\n            gte: startDate,\n          },\n        },\n        _count: {\n          id: true,\n          success: true,\n        },\n        orderBy: {\n          usedAt: 'asc',\n        },\n      });\n\n      return {\n        timeframe,\n        userGrowth: userGrowth.map(item => ({\n          date: item.createdAt.toISOString().split('T')[0],\n          count: item._count.id,\n        })),\n        commandUsage: commandUsage.map(item => ({\n          timestamp: item.usedAt.toISOString(),\n          count: item._count.id,\n        })),\n        revenue: revenueOverTime.map(item => ({\n          date: item.createdAt.toISOString().split('T')[0],\n          amount: item._sum.amount || 0,\n        })),\n        errorRate: errorRate.map(item => ({\n          timestamp: item.usedAt.toISOString(),\n          total: item._count.id,\n          errors: item._count.id - (item._count.success || 0),\n          rate:\n            item._count.id > 0\n              ? ((item._count.id - (item._count.success || 0)) / item._count.id) * 100\n              : 0,\n        })),\n        summary: {\n          totalUsers: userGrowth.reduce((sum, item) => sum + item._count.id, 0),\n          totalCommands: commandUsage.reduce((sum, item) => sum + item._count.id, 0),\n          totalRevenue: revenueOverTime.reduce((sum, item) => sum + (item._sum.amount || 0), 0),\n          averageErrorRate:\n            errorRate.length > 0\n              ? errorRate.reduce(\n                  (sum, item) =>\n                    sum +\n                    (item._count.id > 0\n                      ? ((item._count.id - (item._count.success || 0)) / item._count.id) * 100\n                      : 0),\n                  0\n                ) / errorRate.length\n              : 0,\n        },\n      };\n    } catch (error) {\n      logger.error('Failed to get detailed metrics', {\n        timeframe,\n        error: error.message,\n      });\n      throw error;\n    }\n  }\n\n  /**\n   * Track user behavior event\n   * @param {string} userId - User ID\n   * @param {string} event - Event name\n   * @param {Object} properties - Event properties\n   */\n  async trackEvent(userId, event, properties = {}) {\n    try {\n      await this.database.prisma.analytics.create({\n        data: {\n          metric: `event_${event}`,\n          value: 1,\n          category: 'behavior',\n          metadata: JSON.stringify({\n            userId,\n            event,\n            ...properties,\n          }),\n          recordedAt: new Date(),\n        },\n      });\n\n      // Broadcast event to WebSocket clients\n      this.broadcast({\n        type: 'event',\n        data: {\n          userId,\n          event,\n          properties,\n          timestamp: new Date().toISOString(),\n        },\n      });\n\n      logger.debug('Event tracked', { userId, event, properties });\n    } catch (error) {\n      logger.error('Failed to track event', {\n        userId,\n        event,\n        error: error.message,\n      });\n    }\n  }\n\n  /**\n   * Generate business intelligence report\n   * @param {string} reportType - Type of report\n   * @param {Object} filters - Report filters\n   * @returns {Promise<Object>} Business intelligence report\n   */\n  async generateBIReport(reportType, filters = {}) {\n    try {\n      const report = {\n        type: reportType,\n        generatedAt: new Date().toISOString(),\n        filters,\n        data: {},\n      };\n\n      switch (reportType) {\n        case 'user_engagement':\n          report.data = await this.generateUserEngagementReport(filters);\n          break;\n\n        case 'revenue_analysis':\n          report.data = await this.generateRevenueAnalysisReport(filters);\n          break;\n\n        case 'feature_usage':\n          report.data = await this.generateFeatureUsageReport(filters);\n          break;\n\n        case 'performance_metrics':\n          report.data = await this.generatePerformanceMetricsReport(filters);\n          break;\n\n        default:\n          throw new Error(`Unknown report type: ${reportType}`);\n      }\n\n      // Cache the report\n      const cacheKey = `bi_report_${reportType}_${JSON.stringify(filters)}`;\n      this.cache.set(cacheKey, {\n        data: report,\n        timestamp: Date.now(),\n      });\n\n      return report;\n    } catch (error) {\n      logger.error('Failed to generate BI report', {\n        reportType,\n        filters,\n        error: error.message,\n      });\n      throw error;\n    }\n  }\n\n  /**\n   * Generate user engagement report\n   * @param {Object} filters - Report filters\n   * @returns {Promise<Object>} User engagement data\n   */\n  async generateUserEngagementReport(filters) {\n    const startDate = filters.startDate\n      ? new Date(filters.startDate)\n      : new Date(Date.now() - 30 * 24 * 60 * 60 * 1000);\n    const endDate = filters.endDate ? new Date(filters.endDate) : new Date();\n\n    // Daily active users\n    const dau = await this.database.prisma.user.groupBy({\n      by: ['lastActivity'],\n      where: {\n        lastActivity: {\n          gte: startDate,\n          lte: endDate,\n        },\n      },\n      _count: {\n        id: true,\n      },\n    });\n\n    // Command usage by user\n    const topUsers = await this.database.prisma.commandUsage.groupBy({\n      by: ['userId'],\n      where: {\n        usedAt: {\n          gte: startDate,\n          lte: endDate,\n        },\n      },\n      _count: {\n        id: true,\n      },\n      orderBy: {\n        _count: {\n          id: 'desc',\n        },\n      },\n      take: 10,\n    });\n\n    // Session duration analysis\n    const sessionData = await this.database.prisma.userSession.findMany({\n      where: {\n        startedAt: {\n          gte: startDate,\n          lte: endDate,\n        },\n      },\n    });\n\n    return {\n      period: { startDate, endDate },\n      dailyActiveUsers: dau.map(item => ({\n        date: item.lastActivity.toISOString().split('T')[0],\n        count: item._count.id,\n      })),\n      topUsers: await Promise.all(\n        topUsers.map(async user => {\n          const userData = await this.database.prisma.user.findUnique({\n            where: { id: user.userId },\n            select: { name: true },\n          });\n          return {\n            userId: user.userId,\n            name: userData?.name || 'Unknown',\n            commandCount: user._count.id,\n          };\n        })\n      ),\n      sessionStats: {\n        totalSessions: sessionData.length,\n        averageDuration:\n          sessionData.length > 0\n            ? sessionData.reduce((sum, session) => sum + (session.duration || 0), 0) /\n              sessionData.length\n            : 0,\n        totalDuration: sessionData.reduce((sum, session) => sum + (session.duration || 0), 0),\n      },\n    };\n  }\n\n  /**\n   * Generate revenue analysis report\n   * @param {Object} filters - Report filters\n   * @returns {Promise<Object>} Revenue analysis data\n   */\n  async generateRevenueAnalysisReport(filters) {\n    const startDate = filters.startDate\n      ? new Date(filters.startDate)\n      : new Date(Date.now() - 30 * 24 * 60 * 60 * 1000);\n    const endDate = filters.endDate ? new Date(filters.endDate) : new Date();\n\n    // Revenue by plan\n    const revenueByPlan = await this.database.prisma.payment.groupBy({\n      by: ['userId'],\n      where: {\n        status: 'completed',\n        createdAt: {\n          gte: startDate,\n          lte: endDate,\n        },\n      },\n      _sum: {\n        amount: true,\n      },\n    });\n\n    // Monthly recurring revenue\n    const mrr = await this.database.prisma.subscription.aggregate({\n      where: {\n        status: 'active',\n        createdAt: {\n          lte: endDate,\n        },\n      },\n      _count: {\n        id: true,\n      },\n    });\n\n    // Churn rate\n    const churnData = await this.database.prisma.subscription.findMany({\n      where: {\n        status: 'canceled',\n        cancelledAt: {\n          gte: startDate,\n          lte: endDate,\n        },\n      },\n    });\n\n    return {\n      period: { startDate, endDate },\n      totalRevenue: revenueByPlan.reduce((sum, item) => sum + (item._sum.amount || 0), 0),\n      monthlyRecurringRevenue: mrr._count.id * 9.99, // Assuming average plan price\n      revenueByPlan: await Promise.all(\n        revenueByPlan.map(async item => {\n          const subscription = await this.database.prisma.subscription.findFirst({\n            where: { userId: item.userId },\n            select: { planKey: true },\n          });\n          return {\n            plan: subscription?.planKey || 'unknown',\n            revenue: item._sum.amount || 0,\n          };\n        })\n      ),\n      churnRate: churnData.length,\n      averageRevenuePerUser:\n        revenueByPlan.length > 0\n          ? revenueByPlan.reduce((sum, item) => sum + (item._sum.amount || 0), 0) /\n            revenueByPlan.length\n          : 0,\n    };\n  }\n\n  /**\n   * Generate feature usage report\n   * @param {Object} filters - Report filters\n   * @returns {Promise<Object>} Feature usage data\n   */\n  async generateFeatureUsageReport(filters) {\n    const startDate = filters.startDate\n      ? new Date(filters.startDate)\n      : new Date(Date.now() - 30 * 24 * 60 * 60 * 1000);\n    const endDate = filters.endDate ? new Date(filters.endDate) : new Date();\n\n    // Command usage by category\n    const commandUsage = await this.database.prisma.commandUsage.groupBy({\n      by: ['category', 'command'],\n      where: {\n        usedAt: {\n          gte: startDate,\n          lte: endDate,\n        },\n      },\n      _count: {\n        id: true,\n      },\n      _avg: {\n        executionTime: true,\n      },\n    });\n\n    // AI feature usage\n    const aiUsage = await this.database.prisma.commandUsage.groupBy({\n      by: ['command'],\n      where: {\n        usedAt: {\n          gte: startDate,\n          lte: endDate,\n        },\n        category: {\n          in: ['ai-chat', 'ai-image', 'ai-video', 'ai-misc'],\n        },\n      },\n      _count: {\n        id: true,\n      },\n    });\n\n    return {\n      period: { startDate, endDate },\n      commandUsage: commandUsage.map(item => ({\n        category: item.category,\n        command: item.command,\n        usage: item._count.id,\n        averageResponseTime: item._avg.executionTime || 0,\n      })),\n      aiUsage: aiUsage.map(item => ({\n        feature: item.command,\n        usage: item._count.id,\n      })),\n      topCommands: commandUsage\n        .sort((a, b) => b._count.id - a._count.id)\n        .slice(0, 10)\n        .map(item => ({\n          command: item.command,\n          category: item.category,\n          usage: item._count.id,\n        })),\n    };\n  }\n\n  /**\n   * Generate performance metrics report\n   * @param {Object} filters - Report filters\n   * @returns {Promise<Object>} Performance metrics data\n   */\n  async generatePerformanceMetricsReport(filters) {\n    const startDate = filters.startDate\n      ? new Date(filters.startDate)\n      : new Date(Date.now() - 7 * 24 * 60 * 60 * 1000);\n    const endDate = filters.endDate ? new Date(filters.endDate) : new Date();\n\n    // Response time trends\n    const responseTimeData = await this.database.prisma.commandUsage.findMany({\n      where: {\n        usedAt: {\n          gte: startDate,\n          lte: endDate,\n        },\n        executionTime: {\n          not: null,\n        },\n      },\n      select: {\n        executionTime: true,\n        usedAt: true,\n        success: true,\n      },\n      orderBy: {\n        usedAt: 'asc',\n      },\n    });\n\n    // Error rate trends\n    const errorData = await this.database.prisma.commandUsage.groupBy({\n      by: ['usedAt'],\n      where: {\n        usedAt: {\n          gte: startDate,\n          lte: endDate,\n        },\n      },\n      _count: {\n        id: true,\n        success: true,\n      },\n      orderBy: {\n        usedAt: 'asc',\n      },\n    });\n\n    return {\n      period: { startDate, endDate },\n      responseTime: {\n        average:\n          responseTimeData.length > 0\n            ? responseTimeData.reduce((sum, item) => sum + item.executionTime, 0) /\n              responseTimeData.length\n            : 0,\n        p95: this.calculatePercentile(\n          responseTimeData.map(item => item.executionTime),\n          95\n        ),\n        p99: this.calculatePercentile(\n          responseTimeData.map(item => item.executionTime),\n          99\n        ),\n        trend: responseTimeData.slice(-10).map(item => ({\n          timestamp: item.usedAt.toISOString(),\n          value: item.executionTime,\n        })),\n      },\n      errorRate: {\n        overall:\n          errorData.length > 0\n            ? (errorData.reduce(\n                (sum, item) => sum + (item._count.id - (item._count.success || 0)),\n                0\n              ) /\n                errorData.reduce((sum, item) => sum + item._count.id, 0)) *\n              100\n            : 0,\n        trend: errorData.map(item => ({\n          timestamp: item.usedAt.toISOString(),\n          rate:\n            item._count.id > 0\n              ? ((item._count.id - (item._count.success || 0)) / item._count.id) * 100\n              : 0,\n        })),\n      },\n      uptime: process.uptime(),\n      memoryUsage: process.memoryUsage(),\n      throughput: responseTimeData.length / ((endDate - startDate) / (1000 * 60 * 60 * 24)), // requests per day\n    };\n  }\n\n  /**\n   * Calculate percentile from array\n   * @param {Array<number>} arr - Array of numbers\n   * @param {number} p - Percentile (0-100)\n   * @returns {number} Percentile value\n   */\n  calculatePercentile(arr, p) {\n    if (arr.length === 0) return 0;\n    const sorted = arr.sort((a, b) => a - b);\n    const index = (p / 100) * (sorted.length - 1);\n    const lower = Math.floor(index);\n    const upper = Math.ceil(index);\n    const weight = index % 1;\n\n    if (upper >= sorted.length) return sorted[sorted.length - 1];\n    return sorted[lower] * (1 - weight) + sorted[upper] * weight;\n  }\n\n  /**\n   * Clean expired cache entries\n   */\n  cleanCache() {\n    const now = Date.now();\n    for (const [key, value] of this.cache.entries()) {\n      if (now - value.timestamp > this.cacheTimeout) {\n        this.cache.delete(key);\n      }\n    }\n    logger.debug('Cache cleaned', { entriesRemoved: this.cache.size });\n  }\n\n  /**\n   * Check if service is initialized\n   * @returns {boolean} Initialization status\n   */\n  isReady() {\n    return this.isInitialized;\n  }\n\n  /**\n   * Health check for analytics service\n   * @returns {Promise<Object>} Health status\n   */\n  async healthCheck() {\n    try {\n      const clientCount = this.clients.size;\n      const cacheSize = this.cache.size;\n\n      return {\n        status: 'healthy',\n        service: 'analytics',\n        initialized: this.isInitialized,\n        websocketClients: clientCount,\n        cacheEntries: cacheSize,\n        metrics: this.metrics,\n        timestamp: new Date().toISOString(),\n      };\n    } catch (error) {\n      logger.error('Analytics health check failed', { error: error.message });\n      return {\n        status: 'unhealthy',\n        service: 'analytics',\n        error: error.message,\n        timestamp: new Date().toISOString(),\n      };\n    }\n  }\n\n  /**\n   * Close WebSocket server\n   */\n  close() {\n    if (this.wss) {\n      this.wss.close();\n      logger.info('WebSocket server closed');\n    }\n  }\n}\n\nmodule.exports = AnalyticsService;\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\src\\services\\analyticsService.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":17,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":24},{"ruleId":"no-useless-constructor","severity":2,"message":"Useless constructor.","line":4,"column":3,"nodeType":"MethodDefinition","messageId":"noUselessConstructor","endLine":6,"endColumn":4,"suggestions":[{"messageId":"removeConstructor","fix":{"range":[70,141],"text":""},"desc":"Remove the constructor."}]},{"ruleId":"class-methods-use-this","severity":2,"message":"Expected 'this' to be used by class async method 'getSystemOverview'.","line":8,"column":3,"nodeType":"FunctionExpression","messageId":"missingThis","endLine":8,"endColumn":26},{"ruleId":"no-unused-vars","severity":1,"message":"'premiumUsers' is assigned a value but never used.","line":30,"column":13,"nodeType":"Identifier","messageId":"unusedVar","endLine":30,"endColumn":25,"suggestions":[{"messageId":"removeVar","data":{"varName":"premiumUsers"},"fix":{"range":[798,900],"text":""},"desc":"Remove unused variable 'premiumUsers'."}]},{"ruleId":"no-underscore-dangle","severity":2,"message":"Unexpected dangling '_' in '_sum'.","line":51,"column":28,"nodeType":"MemberExpression","messageId":"unexpectedUnderscore","endLine":51,"endColumn":46},{"ruleId":"no-unused-vars","severity":1,"message":"'previousRevenue' is assigned a value but never used.","line":75,"column":13,"nodeType":"Identifier","messageId":"unusedVar","endLine":75,"endColumn":28,"suggestions":[{"messageId":"removeVar","data":{"varName":"previousRevenue"},"fix":{"range":[2320,2559],"text":""},"desc":"Remove unused variable 'previousRevenue'."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":123,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":123,"endColumn":20,"suggestions":[{"fix":{"range":[3863,3918],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"class-methods-use-this","severity":2,"message":"Expected 'this' to be used by class async method 'getUserAnalytics'.","line":128,"column":3,"nodeType":"FunctionExpression","messageId":"missingThis","endLine":128,"endColumn":25},{"ruleId":"no-unused-vars","severity":1,"message":"'dateFilter' is assigned a value but never used.","line":131,"column":13,"nodeType":"Identifier","messageId":"unusedVar","endLine":131,"endColumn":23,"suggestions":[{"messageId":"removeVar","data":{"varName":"dateFilter"},"fix":{"range":[4077,4294],"text":""},"desc":"Remove unused variable 'dateFilter'."}]},{"ruleId":"no-nested-ternary","severity":2,"message":"Do not nest ternary expressions.","line":171,"column":23,"nodeType":"ConditionalExpression","messageId":"noNestedTernary","endLine":171,"endColumn":77},{"ruleId":"no-plusplus","severity":2,"message":"Unary operator '--' used.","line":174,"column":41,"nodeType":"UpdateExpression","messageId":"unexpectedUnaryOp","endLine":174,"endColumn":44},{"ruleId":"no-await-in-loop","severity":2,"message":"Unexpected `await` inside a loop.","line":196,"column":34,"nodeType":"AwaitExpression","messageId":"unexpectedAwait","endLine":203,"endColumn":11},{"ruleId":"no-await-in-loop","severity":2,"message":"Unexpected `await` inside a loop.","line":205,"column":37,"nodeType":"AwaitExpression","messageId":"unexpectedAwait","endLine":212,"endColumn":11},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":244,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":244,"endColumn":20,"suggestions":[{"fix":{"range":[7381,7435],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"class-methods-use-this","severity":2,"message":"Expected 'this' to be used by class async method 'getCommandAnalytics'.","line":249,"column":3,"nodeType":"FunctionExpression","messageId":"missingThis","endLine":249,"endColumn":28},{"ruleId":"no-unused-vars","severity":1,"message":"'index' is defined but never used. Allowed unused args must match /^_/u.","line":282,"column":52,"nodeType":"Identifier","messageId":"unusedVar","endLine":282,"endColumn":57,"suggestions":[{"messageId":"removeVar","data":{"varName":"index"},"fix":{"range":[8506,8513],"text":""},"desc":"Remove unused variable 'index'."}]},{"ruleId":"no-underscore-dangle","severity":2,"message":"Unexpected dangling '_' in '_count'.","line":284,"column":16,"nodeType":"MemberExpression","messageId":"unexpectedUnderscore","endLine":284,"endColumn":26},{"ruleId":"no-underscore-dangle","severity":2,"message":"Unexpected dangling '_' in '_count'.","line":285,"column":42,"nodeType":"MemberExpression","messageId":"unexpectedUnderscore","endLine":285,"endColumn":52},{"ruleId":"no-underscore-dangle","severity":2,"message":"Unexpected dangling '_' in '_count'.","line":306,"column":58,"nodeType":"MemberExpression","messageId":"unexpectedUnderscore","endLine":306,"endColumn":68},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":331,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":331,"endColumn":20,"suggestions":[{"fix":{"range":[9944,10001],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"class-methods-use-this","severity":2,"message":"Expected 'this' to be used by class async method 'getAIUsageAnalytics'.","line":336,"column":3,"nodeType":"FunctionExpression","messageId":"missingThis","endLine":336,"endColumn":28},{"ruleId":"no-underscore-dangle","severity":2,"message":"Unexpected dangling '_' in '_avg'.","line":364,"column":35,"nodeType":"MemberExpression","messageId":"unexpectedUnderscore","endLine":364,"endColumn":61},{"ruleId":"no-underscore-dangle","severity":2,"message":"Unexpected dangling '_' in '_count'.","line":377,"column":19,"nodeType":"MemberExpression","messageId":"unexpectedUnderscore","endLine":377,"endColumn":34},{"ruleId":"no-underscore-dangle","severity":2,"message":"Unexpected dangling '_' in '_count'.","line":378,"column":42,"nodeType":"MemberExpression","messageId":"unexpectedUnderscore","endLine":378,"endColumn":57},{"ruleId":"no-nested-ternary","severity":2,"message":"Do not nest ternary expressions.","line":382,"column":23,"nodeType":"ConditionalExpression","messageId":"noNestedTernary","endLine":382,"endColumn":76},{"ruleId":"no-plusplus","severity":2,"message":"Unary operator '--' used.","line":385,"column":41,"nodeType":"UpdateExpression","messageId":"unexpectedUnaryOp","endLine":385,"endColumn":44},{"ruleId":"no-await-in-loop","severity":2,"message":"Unexpected `await` inside a loop.","line":406,"column":34,"nodeType":"AwaitExpression","messageId":"unexpectedAwait","endLine":413,"endColumn":11},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":438,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":438,"endColumn":20,"suggestions":[{"fix":{"range":[13235,13293],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"class-methods-use-this","severity":2,"message":"Expected 'this' to be used by class async method 'getRevenueAnalytics'.","line":443,"column":3,"nodeType":"FunctionExpression","messageId":"missingThis","endLine":443,"endColumn":28},{"ruleId":"no-underscore-dangle","severity":2,"message":"Unexpected dangling '_' in '_sum'.","line":461,"column":28,"nodeType":"MemberExpression","messageId":"unexpectedUnderscore","endLine":461,"endColumn":46},{"ruleId":"no-underscore-dangle","severity":2,"message":"Unexpected dangling '_' in '_sum'.","line":492,"column":18,"nodeType":"MemberExpression","messageId":"unexpectedUnderscore","endLine":492,"endColumn":27},{"ruleId":"no-underscore-dangle","severity":2,"message":"Unexpected dangling '_' in '_count'.","line":493,"column":16,"nodeType":"MemberExpression","messageId":"unexpectedUnderscore","endLine":493,"endColumn":27},{"ruleId":"no-underscore-dangle","severity":2,"message":"Unexpected dangling '_' in '_sum'.","line":494,"column":42,"nodeType":"MemberExpression","messageId":"unexpectedUnderscore","endLine":494,"endColumn":51},{"ruleId":"no-plusplus","severity":2,"message":"Unary operator '--' used.","line":501,"column":41,"nodeType":"UpdateExpression","messageId":"unexpectedUnaryOp","endLine":501,"endColumn":44},{"ruleId":"no-await-in-loop","severity":2,"message":"Unexpected `await` inside a loop.","line":509,"column":30,"nodeType":"AwaitExpression","messageId":"unexpectedAwait","endLine":517,"endColumn":11},{"ruleId":"no-underscore-dangle","severity":2,"message":"Unexpected dangling '_' in '_sum'.","line":521,"column":20,"nodeType":"MemberExpression","messageId":"unexpectedUnderscore","endLine":521,"endColumn":37},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":540,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":540,"endColumn":20,"suggestions":[{"fix":{"range":[16351,16408],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"class-methods-use-this","severity":2,"message":"Expected 'this' to be used by class async method 'getModerationAnalytics'.","line":545,"column":3,"nodeType":"FunctionExpression","messageId":"missingThis","endLine":545,"endColumn":31},{"ruleId":"no-underscore-dangle","severity":2,"message":"Unexpected dangling '_' in '_avg'.","line":575,"column":33,"nodeType":"MemberExpression","messageId":"unexpectedUnderscore","endLine":575,"endColumn":57},{"ruleId":"no-underscore-dangle","severity":2,"message":"Unexpected dangling '_' in '_count'.","line":586,"column":53,"nodeType":"MemberExpression","messageId":"unexpectedUnderscore","endLine":586,"endColumn":69},{"ruleId":"no-underscore-dangle","severity":2,"message":"Unexpected dangling '_' in '_count'.","line":598,"column":52,"nodeType":"MemberExpression","messageId":"unexpectedUnderscore","endLine":598,"endColumn":68},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":623,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":623,"endColumn":20,"suggestions":[{"fix":{"range":[19013,19073],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"class-methods-use-this","severity":2,"message":"Expected 'this' to be used by class async method 'getPerformanceAnalytics'.","line":628,"column":3,"nodeType":"FunctionExpression","messageId":"missingThis","endLine":628,"endColumn":32},{"ruleId":"class-methods-use-this","severity":2,"message":"Expected 'this' to be used by class async method 'getGeographicAnalytics'.","line":648,"column":3,"nodeType":"FunctionExpression","messageId":"missingThis","endLine":648,"endColumn":31},{"ruleId":"class-methods-use-this","severity":2,"message":"Expected 'this' to be used by class async method 'getRealTimeAnalytics'.","line":661,"column":3,"nodeType":"FunctionExpression","messageId":"missingThis","endLine":661,"endColumn":29},{"ruleId":"no-underscore-dangle","severity":2,"message":"Unexpected dangling '_' in '_avg'.","line":700,"column":35,"nodeType":"MemberExpression","messageId":"unexpectedUnderscore","endLine":700,"endColumn":61},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":715,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":715,"endColumn":20,"suggestions":[{"fix":{"range":[21675,21734],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":816,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":816,"endColumn":20,"suggestions":[{"fix":{"range":[24714,24773],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"class-methods-use-this","severity":2,"message":"Expected 'this' to be used by class async method 'getTrendsAnalytics'.","line":821,"column":3,"nodeType":"FunctionExpression","messageId":"missingThis","endLine":821,"endColumn":27},{"ruleId":"no-nested-ternary","severity":2,"message":"Do not nest ternary expressions.","line":824,"column":23,"nodeType":"ConditionalExpression","messageId":"noNestedTernary","endLine":824,"endColumn":71},{"ruleId":"no-plusplus","severity":2,"message":"Unary operator '--' used.","line":828,"column":41,"nodeType":"UpdateExpression","messageId":"unexpectedUnaryOp","endLine":828,"endColumn":44},{"ruleId":"no-await-in-loop","severity":2,"message":"Unexpected `await` inside a loop.","line":845,"column":28,"nodeType":"AwaitExpression","messageId":"unexpectedAwait","endLine":845,"endColumn":84},{"ruleId":"no-await-in-loop","severity":2,"message":"Unexpected `await` inside a loop.","line":850,"column":28,"nodeType":"AwaitExpression","messageId":"unexpectedAwait","endLine":850,"endColumn":90},{"ruleId":"no-await-in-loop","severity":2,"message":"Unexpected `await` inside a loop.","line":855,"column":33,"nodeType":"AwaitExpression","messageId":"unexpectedAwait","endLine":858,"endColumn":13},{"ruleId":"no-underscore-dangle","severity":2,"message":"Unexpected dangling '_' in '_sum'.","line":859,"column":31,"nodeType":"MemberExpression","messageId":"unexpectedUnderscore","endLine":859,"endColumn":49},{"ruleId":"no-await-in-loop","severity":2,"message":"Unexpected `await` inside a loop.","line":863,"column":26,"nodeType":"AwaitExpression","messageId":"unexpectedAwait","endLine":868,"endColumn":13},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":882,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":882,"endColumn":20,"suggestions":[{"fix":{"range":[26818,26874],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":888,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":888,"endColumn":7}],"suppressedMessages":[],"errorCount":45,"fatalErrorCount":0,"warningCount":13,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const context = require('../../context');\n\nclass AnalyticsService {\n  constructor() {\n    // Real analytics service using Prisma database\n  }\n\n  async getSystemOverview(dateFilters = {}) {\n    try {\n      const { startDate, endDate } = dateFilters;\n      const dateFilter =\n        startDate && endDate\n          ? {\n              createdAt: {\n                gte: new Date(startDate),\n                lte: new Date(endDate),\n              },\n            }\n          : {};\n\n      // Get user statistics\n      const totalUsers = await context.database.user.count();\n      const activeUsers = await context.database.user.count({\n        where: {\n          lastActiveAt: {\n            gte: new Date(Date.now() - 24 * 60 * 60 * 1000), // Active in last 24 hours\n          },\n        },\n      });\n      const premiumUsers = await context.database.user.count({\n        where: { isPremium: true },\n      });\n\n      // Get command statistics\n      const totalCommands = await context.database.commandLog.count(dateFilter);\n\n      // Get AI usage statistics\n      const aiRequests = await context.database.aiRequestLog.count(dateFilter);\n      const successfulAIRequests = await context.database.aiRequestLog.count({\n        where: {\n          ...dateFilter,\n          success: true,\n        },\n      });\n\n      // Get revenue statistics\n      const revenueResult = await context.database.subscription.aggregate({\n        _sum: { amount: true },\n        where: dateFilter,\n      });\n      const totalRevenue = revenueResult._sum.amount || 0;\n\n      // Get moderation statistics\n      const moderationActions = await context.database.moderationLog.count(dateFilter);\n\n      // Calculate growth metrics (compare with previous period)\n      const periodLength =\n        startDate && endDate ? new Date(endDate) - new Date(startDate) : 30 * 24 * 60 * 60 * 1000; // 30 days default\n\n      const previousStart = new Date(\n        (startDate ? new Date(startDate) : new Date(Date.now() - periodLength)).getTime() -\n          periodLength\n      );\n      const previousEnd = startDate ? new Date(startDate) : new Date();\n\n      const previousCommands = await context.database.commandLog.count({\n        where: {\n          createdAt: {\n            gte: previousStart,\n            lte: previousEnd,\n          },\n        },\n      });\n\n      const previousRevenue = await context.database.subscription.aggregate({\n        _sum: { amount: true },\n        where: {\n          createdAt: {\n            gte: previousStart,\n            lte: previousEnd,\n          },\n        },\n      });\n\n      return {\n        summary: {\n          totalUsers,\n          activeUsers,\n          totalCommands,\n          totalRevenue,\n          aiRequests,\n          moderationActions,\n        },\n        growth: {\n          userGrowth: { daily: 0, weekly: 0, monthly: 0 }, // Would need historical data\n          revenueGrowth: {\n            daily: 0,\n            weekly: 0,\n            monthly:\n              totalCommands > 0 ? ((totalCommands - previousCommands) / previousCommands) * 100 : 0,\n          },\n        },\n        health: {\n          uptime: 99.9, // Would need monitoring system\n          errorRate: 0.1, // Would need error tracking\n          averageResponseTime: 250, // Would need performance monitoring\n        },\n        comparison: {\n          totalConnectionsChange:\n            previousCommands > 0\n              ? ((totalCommands - previousCommands) / previousCommands) * 100\n              : 0,\n          successRateChange: aiRequests > 0 ? (successfulAIRequests / aiRequests) * 100 - 95 : 0,\n          averageConnectionTimeChange: 0, // Would need historical timing data\n        },\n        timeRange: {\n          startDate: dateFilters.startDate,\n          endDate: dateFilters.endDate,\n        },\n        lastUpdated: new Date().toISOString(),\n      };\n    } catch (error) {\n      console.error('Error getting system overview:', error);\n      throw error;\n    }\n  }\n\n  async getUserAnalytics(dateFilters = {}, groupBy = 'day') {\n    try {\n      const { startDate, endDate } = dateFilters;\n      const dateFilter =\n        startDate && endDate\n          ? {\n              createdAt: {\n                gte: new Date(startDate),\n                lte: new Date(endDate),\n              },\n            }\n          : {};\n\n      // Get user statistics\n      const totalUsers = await context.database.user.count();\n      const activeUsers = await context.database.user.count({\n        where: {\n          lastActiveAt: {\n            gte: new Date(Date.now() - 24 * 60 * 60 * 1000),\n          },\n        },\n      });\n      const premiumUsers = await context.database.user.count({\n        where: { isPremium: true },\n      });\n\n      // Calculate new users for different periods\n      const today = new Date();\n      today.setHours(0, 0, 0, 0);\n      const weekAgo = new Date(today.getTime() - 7 * 24 * 60 * 60 * 1000);\n      const monthAgo = new Date(today.getTime() - 30 * 24 * 60 * 60 * 1000);\n\n      const newToday = await context.database.user.count({\n        where: { createdAt: { gte: today } },\n      });\n      const newThisWeek = await context.database.user.count({\n        where: { createdAt: { gte: weekAgo } },\n      });\n      const newThisMonth = await context.database.user.count({\n        where: { createdAt: { gte: monthAgo } },\n      });\n\n      // Generate time series data\n      const periods = groupBy === 'month' ? 12 : groupBy === 'week' ? 4 : 30;\n      const timeSeriesData = [];\n\n      for (let i = periods - 1; i >= 0; i--) {\n        const date = new Date();\n        if (groupBy === 'month') {\n          date.setMonth(date.getMonth() - i);\n          date.setDate(1);\n        } else if (groupBy === 'week') {\n          date.setDate(date.getDate() - i * 7);\n        } else {\n          date.setDate(date.getDate() - i);\n        }\n\n        const periodStart = new Date(date);\n        const periodEnd = new Date(date);\n\n        if (groupBy === 'month') {\n          periodEnd.setMonth(periodEnd.getMonth() + 1);\n        } else if (groupBy === 'week') {\n          periodEnd.setDate(periodEnd.getDate() + 7);\n        } else {\n          periodEnd.setDate(periodEnd.getDate() + 1);\n        }\n\n        const newUsersInPeriod = await context.database.user.count({\n          where: {\n            createdAt: {\n              gte: periodStart,\n              lt: periodEnd,\n            },\n          },\n        });\n\n        const activeUsersInPeriod = await context.database.user.count({\n          where: {\n            lastActiveAt: {\n              gte: periodStart,\n              lt: periodEnd,\n            },\n          },\n        });\n\n        timeSeriesData.push({\n          date: periodStart.toISOString().split('T')[0],\n          newUsers: newUsersInPeriod,\n          activeUsers: activeUsersInPeriod,\n          premiumUsers, // This would need historical tracking\n        });\n      }\n\n      return {\n        overview: {\n          totalUsers,\n          activeUsers,\n          premiumUsers,\n          newToday,\n          newThisWeek,\n          newThisMonth,\n        },\n        growth: {\n          daily: 0, // Would need historical comparison\n          weekly: 0,\n          monthly: 0,\n        },\n        timeSeries: timeSeriesData,\n        groupBy,\n        timeRange: {\n          startDate: dateFilters.startDate,\n          endDate: dateFilters.endDate,\n        },\n      };\n    } catch (error) {\n      console.error('Error getting user analytics:', error);\n      throw error;\n    }\n  }\n\n  async getCommandAnalytics(dateFilters = {}, limit = 20) {\n    try {\n      const { startDate, endDate } = dateFilters;\n      const dateFilter =\n        startDate && endDate\n          ? {\n              createdAt: {\n                gte: new Date(startDate),\n                lte: new Date(endDate),\n              },\n            }\n          : {};\n\n      // Get command statistics\n      const totalExecuted = await context.database.commandLog.count(dateFilter);\n\n      // Get unique commands\n      const uniqueCommandsResult = await context.database.commandLog.groupBy({\n        by: ['command'],\n        where: dateFilter,\n        _count: { command: true },\n      });\n      const uniqueCommands = uniqueCommandsResult.length;\n\n      // Get top commands\n      const topCommandsRaw = await context.database.commandLog.groupBy({\n        by: ['command'],\n        where: dateFilter,\n        _count: { command: true },\n        orderBy: { _count: { command: 'desc' } },\n        take: limit,\n      });\n\n      const topCommands = topCommandsRaw.map((cmd, index) => ({\n        name: cmd.command,\n        count: cmd._count.command,\n        percentage: totalExecuted > 0 ? (cmd._count.command / totalExecuted) * 100 : 0,\n      }));\n\n      // Calculate average per user\n      const totalUsers = await context.database.user.count();\n      const averagePerUser = totalUsers > 0 ? totalExecuted / totalUsers : 0;\n\n      // Get usage by hour\n      const usageByHourRaw = await context.database.commandLog.groupBy({\n        by: ['createdAt'],\n        where: dateFilter,\n        _count: { id: true },\n      });\n\n      const usageByHour = Array.from({ length: 24 }, (_, hour) => {\n        const hourCommands = usageByHourRaw.filter(log => {\n          const logHour = new Date(log.createdAt).getHours();\n          return logHour === hour;\n        });\n        return {\n          hour,\n          count: hourCommands.reduce((sum, log) => sum + log._count.id, 0),\n        };\n      });\n\n      // Find peak hour\n      const peakHour = usageByHour.reduce(\n        (max, current) => (current.count > max.count ? current : max),\n        { hour: 0, count: 0 }\n      ).hour;\n\n      return {\n        overview: {\n          totalExecuted,\n          uniqueCommands,\n          averagePerUser,\n          peakHour,\n        },\n        topCommands,\n        usageByHour,\n        timeRange: {\n          startDate: dateFilters.startDate,\n          endDate: dateFilters.endDate,\n        },\n      };\n    } catch (error) {\n      console.error('Error getting command analytics:', error);\n      throw error;\n    }\n  }\n\n  async getAIUsageAnalytics(dateFilters = {}, groupBy = 'day') {\n    try {\n      const { startDate, endDate } = dateFilters;\n      const dateFilter =\n        startDate && endDate\n          ? {\n              createdAt: {\n                gte: new Date(startDate),\n                lte: new Date(endDate),\n              },\n            }\n          : {};\n\n      // Get AI request statistics\n      const totalRequests = await context.database.aiRequestLog.count(dateFilter);\n      const successfulRequests = await context.database.aiRequestLog.count({\n        where: { ...dateFilter, success: true },\n      });\n      const failedRequests = totalRequests - successfulRequests;\n\n      // Calculate success rate\n      const successRate = totalRequests > 0 ? (successfulRequests / totalRequests) * 100 : 0;\n\n      // Get average response time\n      const avgResponseTimeResult = await context.database.aiRequestLog.aggregate({\n        _avg: { responseTime: true },\n        where: { ...dateFilter, success: true },\n      });\n      const averageResponseTime = avgResponseTimeResult._avg.responseTime || 0;\n\n      // Get top providers\n      const topProvidersRaw = await context.database.aiRequestLog.groupBy({\n        by: ['provider'],\n        where: dateFilter,\n        _count: { provider: true },\n        orderBy: { _count: { provider: 'desc' } },\n        take: 5,\n      });\n\n      const topProviders = topProvidersRaw.map(provider => ({\n        name: provider.provider,\n        requests: provider._count.provider,\n        percentage: totalRequests > 0 ? (provider._count.provider / totalRequests) * 100 : 0,\n      }));\n\n      // Get usage by time period\n      const periods = groupBy === 'month' ? 30 : groupBy === 'week' ? 7 : 1;\n      const usageByPeriod = [];\n\n      for (let i = periods - 1; i >= 0; i--) {\n        const date = new Date();\n        if (groupBy === 'month') {\n          date.setDate(date.getDate() - i);\n        } else if (groupBy === 'week') {\n          date.setDate(date.getDate() - i * 7);\n        } else {\n          date.setDate(date.getDate() - i);\n        }\n\n        const periodStart = new Date(date);\n        const periodEnd = new Date(date);\n\n        if (groupBy === 'month') {\n          periodEnd.setDate(periodEnd.getDate() + 1);\n        } else if (groupBy === 'week') {\n          periodEnd.setDate(periodEnd.getDate() + 7);\n        } else {\n          periodEnd.setDate(periodEnd.getDate() + 1);\n        }\n\n        const requestsInPeriod = await context.database.aiRequestLog.count({\n          where: {\n            createdAt: {\n              gte: periodStart,\n              lt: periodEnd,\n            },\n          },\n        });\n\n        usageByPeriod.push({\n          date: periodStart.toISOString().split('T')[0],\n          requests: requestsInPeriod,\n        });\n      }\n\n      return {\n        overview: {\n          totalRequests,\n          successfulRequests,\n          failedRequests,\n          successRate,\n          averageResponseTime,\n        },\n        topProviders,\n        usageByDay: usageByPeriod,\n        groupBy,\n        timeRange: {\n          startDate: dateFilters.startDate,\n          endDate: dateFilters.endDate,\n        },\n      };\n    } catch (error) {\n      console.error('Error getting AI usage analytics:', error);\n      throw error;\n    }\n  }\n\n  async getRevenueAnalytics(dateFilters = {}, groupBy = 'month') {\n    try {\n      const { startDate, endDate } = dateFilters;\n      const dateFilter =\n        startDate && endDate\n          ? {\n              createdAt: {\n                gte: new Date(startDate),\n                lte: new Date(endDate),\n              },\n            }\n          : {};\n\n      // Get revenue statistics\n      const revenueResult = await context.database.subscription.aggregate({\n        _sum: { amount: true },\n        where: dateFilter,\n      });\n      const totalRevenue = revenueResult._sum.amount || 0;\n\n      // Get monthly recurring revenue (active subscriptions)\n      const activeSubscriptions = await context.database.subscription.findMany({\n        where: {\n          status: 'active',\n          ...dateFilter,\n        },\n        select: { amount: true, interval: true },\n      });\n\n      const monthlyRecurringRevenue = activeSubscriptions\n        .filter(sub => sub.interval === 'month')\n        .reduce((sum, sub) => sum + sub.amount, 0);\n\n      // Get average revenue per user\n      const totalUsers = await context.database.user.count();\n      const averageRevenuePerUser = totalUsers > 0 ? totalRevenue / totalUsers : 0;\n\n      // Get top plans by revenue\n      const topPlansRaw = await context.database.subscription.groupBy({\n        by: ['planName'],\n        where: dateFilter,\n        _sum: { amount: true },\n        _count: { planName: true },\n        orderBy: { _sum: { amount: 'desc' } },\n        take: 5,\n      });\n\n      const topPlans = topPlansRaw.map(plan => ({\n        name: plan.planName,\n        revenue: plan._sum.amount || 0,\n        users: plan._count.planName,\n        percentage: totalRevenue > 0 ? ((plan._sum.amount || 0) / totalRevenue) * 100 : 0,\n      }));\n\n      // Get revenue by time period\n      const periods = 12; // Always show 12 months for revenue\n      const revenueByMonth = [];\n\n      for (let i = periods - 1; i >= 0; i--) {\n        const date = new Date();\n        date.setMonth(date.getMonth() - i);\n        date.setDate(1);\n\n        const monthStart = new Date(date.getFullYear(), date.getMonth(), 1);\n        const monthEnd = new Date(date.getFullYear(), date.getMonth() + 1, 0, 23, 59, 59);\n\n        const monthRevenue = await context.database.subscription.aggregate({\n          _sum: { amount: true },\n          where: {\n            createdAt: {\n              gte: monthStart,\n              lte: monthEnd,\n            },\n          },\n        });\n\n        revenueByMonth.push({\n          month: date.toLocaleDateString('en-US', { month: 'short', year: 'numeric' }),\n          revenue: monthRevenue._sum.amount || 0,\n        });\n      }\n\n      return {\n        overview: {\n          totalRevenue,\n          monthlyRecurringRevenue,\n          averageRevenuePerUser,\n        },\n        topPlans,\n        revenueByMonth,\n        groupBy,\n        timeRange: {\n          startDate: dateFilters.startDate,\n          endDate: dateFilters.endDate,\n        },\n      };\n    } catch (error) {\n      console.error('Error getting revenue analytics:', error);\n      throw error;\n    }\n  }\n\n  async getModerationAnalytics(dateFilters = {}, groupBy = 'day') {\n    try {\n      const { startDate, endDate } = dateFilters;\n      const dateFilter =\n        startDate && endDate\n          ? {\n              createdAt: {\n                gte: new Date(startDate),\n                lte: new Date(endDate),\n              },\n            }\n          : {};\n\n      // Get moderation statistics\n      const totalModerated = await context.database.moderationLog.count(dateFilter);\n      const blockedContent = await context.database.moderationLog.count({\n        where: { ...dateFilter, action: 'block' },\n      });\n\n      // Calculate approval rate (approved / total)\n      const approvedContent = await context.database.moderationLog.count({\n        where: { ...dateFilter, action: 'approve' },\n      });\n      const approvalRate = totalModerated > 0 ? (approvedContent / totalModerated) * 100 : 0;\n\n      // Get average review time\n      const avgReviewTimeResult = await context.database.moderationLog.aggregate({\n        _avg: { reviewTime: true },\n        where: dateFilter,\n      });\n      const averageReviewTime = avgReviewTimeResult._avg.reviewTime || 0;\n\n      // Get violations by type\n      const violationsByTypeRaw = await context.database.moderationLog.groupBy({\n        by: ['violationType'],\n        where: dateFilter,\n        _count: { violationType: true },\n      });\n\n      const violationsByType = {};\n      violationsByTypeRaw.forEach(violation => {\n        violationsByType[violation.violationType] = violation._count.violationType;\n      });\n\n      // Get violations by severity\n      const violationsBySeverityRaw = await context.database.moderationLog.groupBy({\n        by: ['severity'],\n        where: dateFilter,\n        _count: { severity: true },\n      });\n\n      const violationsBySeverity = {};\n      violationsBySeverityRaw.forEach(violation => {\n        violationsBySeverity[violation.severity] = violation._count.severity;\n      });\n\n      // Get appealed decisions (assuming there's an appeal status)\n      const appealedDecisions = await context.database.moderationLog.count({\n        where: { ...dateFilter, appealed: true },\n      });\n\n      return {\n        overview: {\n          totalModerated,\n          blockedContent,\n          appealedDecisions,\n          approvalRate,\n          averageReviewTime,\n        },\n        violationsByType,\n        violationsBySeverity,\n        groupBy,\n        timeRange: {\n          startDate: dateFilters.startDate,\n          endDate: dateFilters.endDate,\n        },\n      };\n    } catch (error) {\n      console.error('Error getting moderation analytics:', error);\n      throw error;\n    }\n  }\n\n  async getPerformanceAnalytics(dateFilters = {}, metrics = []) {\n    // This will be implemented later\n    return {\n      overview: {\n        averageResponseTime: 0,\n        uptime: 0,\n        errorRate: 0,\n        throughput: 0,\n        memoryUsage: 0,\n        cpuUsage: 0,\n      },\n      responseTimeByEndpoint: [],\n      metrics: metrics.length > 0 ? metrics : ['responseTime', 'uptime', 'errorRate', 'throughput'],\n      timeRange: {\n        startDate: dateFilters.startDate,\n        endDate: dateFilters.endDate,\n      },\n    };\n  }\n\n  async getGeographicAnalytics(dateFilters = {}, metric = 'users') {\n    // This will be implemented later\n    return {\n      topCountries: [],\n      topCities: [],\n      metric,\n      timeRange: {\n        startDate: dateFilters.startDate,\n        endDate: dateFilters.endDate,\n      },\n    };\n  }\n\n  async getRealTimeAnalytics() {\n    try {\n      // Get active users (users active in last 5 minutes)\n      const activeUsers = await context.database.user.count({\n        where: {\n          lastActiveAt: {\n            gte: new Date(Date.now() - 5 * 60 * 1000),\n          },\n        },\n      });\n\n      // Get commands per minute (last 60 seconds)\n      const oneMinuteAgo = new Date(Date.now() - 60 * 1000);\n      const commandsPerMinute = await context.database.commandLog.count({\n        where: { createdAt: { gte: oneMinuteAgo } },\n      });\n\n      // Get AI requests per minute\n      const aiRequestsPerMinute = await context.database.aiRequestLog.count({\n        where: { createdAt: { gte: oneMinuteAgo } },\n      });\n\n      // Get errors per minute (failed operations)\n      const errorsPerMinute = await context.database.commandLog.count({\n        where: {\n          createdAt: { gte: oneMinuteAgo },\n          success: false,\n        },\n      });\n\n      // Get average response time (last hour)\n      const oneHourAgo = new Date(Date.now() - 60 * 60 * 1000);\n      const avgResponseTimeResult = await context.database.commandLog.aggregate({\n        _avg: { responseTime: true },\n        where: {\n          createdAt: { gte: oneHourAgo },\n          success: true,\n        },\n      });\n      const averageResponseTime = avgResponseTimeResult._avg.responseTime || 0;\n\n      // Server load (simplified - would need actual monitoring)\n      const serverLoad = 25; // Placeholder\n\n      return {\n        activeUsers,\n        commandsPerMinute,\n        aiRequestsPerMinute,\n        errorsPerMinute,\n        averageResponseTime,\n        serverLoad,\n        timestamp: new Date().toISOString(),\n      };\n    } catch (error) {\n      console.error('Error getting real-time analytics:', error);\n      // Fallback to basic metrics\n      return {\n        activeUsers: 0,\n        commandsPerMinute: 0,\n        aiRequestsPerMinute: 0,\n        errorsPerMinute: 0,\n        averageResponseTime: 0,\n        serverLoad: 0,\n        timestamp: new Date().toISOString(),\n      };\n    }\n  }\n\n  async exportAnalytics(type, options = {}) {\n    const { startDate, endDate, format = 'json' } = options;\n\n    let data;\n    switch (type) {\n      case 'overview':\n        data = await this.getSystemOverview({ startDate, endDate });\n        break;\n      case 'users':\n        data = await this.getUserAnalytics({ startDate, endDate });\n        break;\n      case 'commands':\n        data = await this.getCommandAnalytics({ startDate, endDate });\n        break;\n      case 'ai-usage':\n        data = await this.getAIUsageAnalytics({ startDate, endDate });\n        break;\n      case 'revenue':\n        data = await this.getRevenueAnalytics({ startDate, endDate });\n        break;\n      case 'moderation':\n        data = await this.getModerationAnalytics({ startDate, endDate });\n        break;\n      case 'performance':\n        data = await this.getPerformanceAnalytics({ startDate, endDate });\n        break;\n      default:\n        throw new Error(`Unknown analytics type: ${type}`);\n    }\n\n    if (format === 'json') {\n      return JSON.stringify(data, null, 2);\n    }\n    // Simple CSV conversion (would be more sophisticated in real implementation)\n    return `Analytics Type: ${type}\\n${JSON.stringify(data, null, 2)}`;\n  }\n\n  async getDashboardAnalytics() {\n    try {\n      const overview = await this.getSystemOverview();\n      const realTime = await this.getRealTimeAnalytics();\n\n      // Generate alerts based on real data\n      const alerts = [];\n\n      // Check for high error rates\n      if (realTime.errorsPerMinute > 10) {\n        alerts.push({\n          type: 'error',\n          message: `High error rate detected: ${realTime.errorsPerMinute} errors/minute`,\n          timestamp: new Date().toISOString(),\n        });\n      }\n\n      // Check for user milestones\n      if (overview.summary.totalUsers >= 1000) {\n        alerts.push({\n          type: 'info',\n          message: `User milestone reached: ${overview.summary.totalUsers} total users`,\n          timestamp: new Date().toISOString(),\n        });\n      }\n\n      // Check for high server load\n      if (realTime.serverLoad > 80) {\n        alerts.push({\n          type: 'warning',\n          message: `High server load: ${realTime.serverLoad}%`,\n          timestamp: new Date().toISOString(),\n        });\n      }\n\n      // Calculate real trends (simplified - would need historical data)\n      const trends = {\n        userGrowth: '+0%', // Would need historical comparison\n        revenueGrowth: '+0%',\n        commandUsage: '+0%',\n      };\n\n      return {\n        overview: overview.summary,\n        realTime,\n        alerts,\n        trends,\n        lastUpdated: new Date().toISOString(),\n      };\n    } catch (error) {\n      console.error('Error getting dashboard analytics:', error);\n      throw error;\n    }\n  }\n\n  async getTrendsAnalytics(options = {}) {\n    try {\n      const { period = '30d', metrics = [] } = options;\n      const periods = period === '7d' ? 7 : period === '90d' ? 90 : 30;\n\n      const trendData = [];\n\n      for (let i = periods - 1; i >= 0; i--) {\n        const date = new Date(Date.now() - i * 24 * 60 * 60 * 1000);\n        const dayStart = new Date(date.getFullYear(), date.getMonth(), date.getDate());\n        const dayEnd = new Date(date.getFullYear(), date.getMonth(), date.getDate(), 23, 59, 59);\n\n        const dataPoint = {\n          date: dayStart.toISOString().split('T')[0],\n        };\n\n        const dateFilter = {\n          createdAt: {\n            gte: dayStart,\n            lte: dayEnd,\n          },\n        };\n\n        if (metrics.includes('users') || metrics.length === 0) {\n          const newUsers = await context.database.user.count({ where: dateFilter });\n          dataPoint.users = newUsers;\n        }\n\n        if (metrics.includes('commands') || metrics.length === 0) {\n          const commands = await context.database.commandLog.count({ where: dateFilter });\n          dataPoint.commands = commands;\n        }\n\n        if (metrics.includes('revenue') || metrics.length === 0) {\n          const revenueResult = await context.database.subscription.aggregate({\n            _sum: { amount: true },\n            where: dateFilter,\n          });\n          dataPoint.revenue = revenueResult._sum.amount || 0;\n        }\n\n        if (metrics.includes('errors') || metrics.length === 0) {\n          const errors = await context.database.commandLog.count({\n            where: {\n              ...dateFilter,\n              success: false,\n            },\n          });\n          dataPoint.errors = errors;\n        }\n\n        trendData.push(dataPoint);\n      }\n\n      return {\n        period,\n        metrics: metrics.length > 0 ? metrics : ['users', 'commands', 'revenue', 'errors'],\n        data: trendData,\n        lastUpdated: new Date().toISOString(),\n      };\n    } catch (error) {\n      console.error('Error getting trends analytics:', error);\n      throw error;\n    }\n  }\n}\n\nmodule.exports = new AnalyticsService();\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\src\\services\\auditLogger.js","messages":[{"ruleId":"import-x/no-import-module-exports","severity":2,"message":"Cannot use import declarations in modules that export using CommonJS (module.exports = 'foo' or exports.bar = 'hi')","line":1,"column":1,"nodeType":"ImportDeclaration","messageId":"notAllowed","endLine":1,"endColumn":25},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":3,"column":17,"nodeType":"Identifier","messageId":"undef","endLine":3,"endColumn":24},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":4,"column":12,"nodeType":"Identifier","messageId":"undef","endLine":4,"endColumn":19},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":84,"column":33,"nodeType":"Identifier","messageId":"undef","endLine":84,"endColumn":40},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":122,"column":11,"nodeType":"Identifier","messageId":"undef","endLine":122,"endColumn":18},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":150,"column":20,"nodeType":"Identifier","messageId":"undef","endLine":150,"endColumn":27},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":151,"column":24,"nodeType":"Identifier","messageId":"undef","endLine":151,"endColumn":31},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":159,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":159,"endColumn":20,"suggestions":[{"fix":{"range":[4764,4823],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"class-methods-use-this","severity":2,"message":"Expected 'this' to be used by class method 'parseFileSize'.","line":169,"column":3,"nodeType":"FunctionExpression","messageId":"missingThis","endLine":169,"endColumn":16},{"ruleId":"radix","severity":2,"message":"Missing radix parameter.","line":180,"column":12,"nodeType":"CallExpression","messageId":"missingRadix","endLine":180,"endColumn":25,"suggestions":[{"messageId":"addRadixParameter10","fix":{"range":[5295,5295],"text":", 10"},"desc":"Add radix parameter `10` for parsing decimal numbers."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":189,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":189,"endColumn":19,"suggestions":[{"fix":{"range":[5471,5516],"text":""},"messageId":"removeConsole","data":{"propertyName":"warn"},"desc":"Remove the console.warn()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":252,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":252,"endColumn":20,"suggestions":[{"fix":{"range":[7633,7684],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":254,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":254,"endColumn":18,"suggestions":[{"fix":{"range":[7728,7792],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"class-methods-use-this","severity":2,"message":"Expected 'this' to be used by class method 'generateId'.","line":262,"column":3,"nodeType":"FunctionExpression","messageId":"missingThis","endLine":262,"endColumn":13},{"ruleId":"no-underscore-dangle","severity":2,"message":"Unexpected dangling '_' in '_count'.","line":640,"column":31,"nodeType":"MemberExpression","messageId":"unexpectedUnderscore","endLine":640,"endColumn":42},{"ruleId":"no-underscore-dangle","severity":2,"message":"Unexpected dangling '_' in '_count'.","line":644,"column":31,"nodeType":"MemberExpression","messageId":"unexpectedUnderscore","endLine":644,"endColumn":42},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":697,"column":33,"nodeType":"Identifier","messageId":"undef","endLine":697,"endColumn":40},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":786,"column":19,"nodeType":"Identifier","messageId":"undef","endLine":786,"endColumn":26},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":799,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":799,"endColumn":7}],"suppressedMessages":[],"errorCount":15,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import path from 'path';\n\nconst winston = require('winston');\nconst fs = require('fs').promises;\n\nclass AuditLogger {\n  constructor(databaseService, options = {}) {\n    this.database = databaseService;\n    this.options = {\n      logToFile: options.logToFile !== false,\n      logToDatabase: options.logToDatabase !== false,\n      retentionDays: options.retentionDays || 90,\n      maxFileSize: options.maxFileSize || '10m',\n      maxFiles: options.maxFiles || 5,\n      ...options,\n    };\n\n    this.logger = null;\n    this.isInitialized = false;\n\n    // Audit event types\n    this.EVENT_TYPES = {\n      // User actions\n      USER_LOGIN: 'user_login',\n      USER_LOGOUT: 'user_logout',\n      USER_REGISTER: 'user_register',\n      USER_UPDATE: 'user_update',\n      USER_DELETE: 'user_delete',\n      USER_BAN: 'user_ban',\n      USER_UNBAN: 'user_unban',\n\n      // Admin actions\n      ADMIN_USER_MANAGE: 'admin_user_manage',\n      ADMIN_SYSTEM_CONFIG: 'admin_system_config',\n      ADMIN_CONTENT_MODERATE: 'admin_content_moderate',\n      ADMIN_BACKUP: 'admin_backup',\n      ADMIN_MAINTENANCE: 'admin_maintenance',\n\n      // System events\n      SYSTEM_START: 'system_start',\n      SYSTEM_STOP: 'system_stop',\n      SYSTEM_ERROR: 'system_error',\n      SYSTEM_MAINTENANCE: 'system_maintenance',\n\n      // Security events\n      SECURITY_LOGIN_ATTEMPT: 'security_login_attempt',\n      SECURITY_LOGIN_FAILURE: 'security_login_failure',\n      SECURITY_PERMISSION_DENIED: 'security_permission_denied',\n      SECURITY_SUSPICIOUS_ACTIVITY: 'security_suspicious_activity',\n\n      // Content events\n      CONTENT_CREATE: 'content_create',\n      CONTENT_UPDATE: 'content_update',\n      CONTENT_DELETE: 'content_delete',\n      CONTENT_MODERATE: 'content_moderate',\n\n      // Payment events\n      PAYMENT_SUCCESS: 'payment_success',\n      PAYMENT_FAILURE: 'payment_failure',\n      PAYMENT_REFUND: 'payment_refund',\n      SUBSCRIPTION_CHANGE: 'subscription_change',\n\n      // API events\n      API_REQUEST: 'api_request',\n      API_ERROR: 'api_error',\n      API_RATE_LIMIT: 'api_rate_limit',\n    };\n\n    // Risk levels\n    this.RISK_LEVELS = {\n      LOW: 'low',\n      MEDIUM: 'medium',\n      HIGH: 'high',\n      CRITICAL: 'critical',\n    };\n  }\n\n  /**\n   * Initialize the audit logger\n   */\n  async initialize() {\n    try {\n      // Create logs directory if it doesn't exist\n      const logsDir = path.join(process.cwd(), 'logs', 'audit');\n      await fs.mkdir(logsDir, { recursive: true });\n\n      // Configure Winston logger\n      const transports = [];\n\n      if (this.options.logToFile) {\n        transports.push(\n          new winston.transports.File({\n            filename: path.join(logsDir, 'audit.log'),\n            level: 'info',\n            format: winston.format.combine(\n              winston.format.timestamp(),\n              winston.format.errors({ stack: true }),\n              winston.format.json()\n            ),\n            maxsize: this.parseFileSize(this.options.maxFileSize),\n            maxFiles: this.options.maxFiles,\n          })\n        );\n\n        // Separate file for security events\n        transports.push(\n          new winston.transports.File({\n            filename: path.join(logsDir, 'security.log'),\n            level: 'warn',\n            format: winston.format.combine(\n              winston.format.timestamp(),\n              winston.format.errors({ stack: true }),\n              winston.format.json()\n            ),\n            maxsize: this.parseFileSize(this.options.maxFileSize),\n            maxFiles: this.options.maxFiles,\n          })\n        );\n      }\n\n      // Console transport for development\n      if (process.env.NODE_ENV === 'development') {\n        transports.push(\n          new winston.transports.Console({\n            level: 'debug',\n            format: winston.format.combine(winston.format.colorize(), winston.format.simple()),\n          })\n        );\n      }\n\n      this.logger = winston.createLogger({\n        level: 'info',\n        format: winston.format.combine(\n          winston.format.timestamp(),\n          winston.format.errors({ stack: true }),\n          winston.format.json()\n        ),\n        transports,\n      });\n\n      this.isInitialized = true;\n\n      // Log system initialization\n      await this.logEvent({\n        eventType: this.EVENT_TYPES.SYSTEM_START,\n        actor: 'system',\n        action: 'System initialization completed',\n        resource: 'audit_logger',\n        details: {\n          version: process.env.npm_package_version || '1.0.0',\n          environment: process.env.NODE_ENV || 'development',\n          timestamp: new Date().toISOString(),\n        },\n        riskLevel: this.RISK_LEVELS.LOW,\n        ipAddress: 'system',\n        userAgent: 'audit-logger',\n      });\n    } catch (error) {\n      console.error('Failed to initialize audit logger:', error);\n      throw error;\n    }\n  }\n\n  /**\n   * Parse file size string to bytes\n   * @param {string} size - Size string (e.g., '10m', '1g')\n   * @returns {number} Size in bytes\n   */\n  parseFileSize(size) {\n    const units = {\n      k: 1024,\n      m: 1024 * 1024,\n      g: 1024 * 1024 * 1024,\n    };\n\n    const match = size.toLowerCase().match(/^(\\d+)([kmg]?)$/);\n    if (!match) return 10 * 1024 * 1024; // Default 10MB\n\n    const [, num, unit] = match;\n    return parseInt(num) * (units[unit] || 1);\n  }\n\n  /**\n   * Log an audit event\n   * @param {Object} eventData - Event data\n   */\n  async logEvent(eventData) {\n    if (!this.isInitialized) {\n      console.warn('Audit logger not initialized');\n      return;\n    }\n\n    try {\n      const auditEntry = {\n        id: this.generateId(),\n        timestamp: new Date().toISOString(),\n        eventType: eventData.eventType,\n        actor: eventData.actor || 'system',\n        actorId: eventData.actorId,\n        action: eventData.action,\n        resource: eventData.resource,\n        resourceId: eventData.resourceId,\n        details: eventData.details || {},\n        riskLevel: eventData.riskLevel || this.RISK_LEVELS.LOW,\n        ipAddress: eventData.ipAddress,\n        userAgent: eventData.userAgent,\n        sessionId: eventData.sessionId,\n        location: eventData.location,\n        metadata: eventData.metadata || {},\n      };\n\n      // Log to Winston\n      const logLevel = this.getLogLevel(auditEntry.riskLevel);\n      this.logger.log(logLevel, 'Audit Event', auditEntry);\n\n      // Log to database if enabled\n      if (this.options.logToDatabase && this.database) {\n        await this.database.prisma.auditLog.create({\n          data: {\n            eventType: auditEntry.eventType,\n            actor: auditEntry.actor,\n            actorId: auditEntry.actorId,\n            action: auditEntry.action,\n            resource: auditEntry.resource,\n            resourceId: auditEntry.resourceId,\n            details: JSON.stringify(auditEntry.details),\n            riskLevel: auditEntry.riskLevel,\n            ipAddress: auditEntry.ipAddress,\n            userAgent: auditEntry.userAgent,\n            sessionId: auditEntry.sessionId,\n            location: auditEntry.location,\n            metadata: JSON.stringify(auditEntry.metadata),\n          },\n        });\n      }\n\n      // Emit real-time event if WebSocket service is available\n      if (this.websocketService) {\n        this.websocketService.broadcast({\n          type: 'audit_event',\n          data: {\n            id: auditEntry.id,\n            eventType: auditEntry.eventType,\n            actor: auditEntry.actor,\n            action: auditEntry.action,\n            timestamp: auditEntry.timestamp,\n            riskLevel: auditEntry.riskLevel,\n          },\n        });\n      }\n    } catch (error) {\n      console.error('Failed to log audit event:', error);\n      // Fallback to console logging\n      console.log('AUDIT EVENT:', JSON.stringify(eventData, null, 2));\n    }\n  }\n\n  /**\n   * Generate unique ID for audit entries\n   * @returns {string} Unique ID\n   */\n  generateId() {\n    return `audit_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n  }\n\n  /**\n   * Get Winston log level based on risk level\n   * @param {string} riskLevel - Risk level\n   * @returns {string} Winston log level\n   */\n  getLogLevel(riskLevel) {\n    switch (riskLevel) {\n      case this.RISK_LEVELS.CRITICAL:\n        return 'error';\n      case this.RISK_LEVELS.HIGH:\n        return 'warn';\n      case this.RISK_LEVELS.MEDIUM:\n        return 'info';\n      case this.RISK_LEVELS.LOW:\n      default:\n        return 'info';\n    }\n  }\n\n  /**\n   * Log user authentication events\n   * @param {Object} data - Authentication data\n   */\n  async logUserAuth(data) {\n    const eventType = data.success\n      ? this.EVENT_TYPES.USER_LOGIN\n      : this.EVENT_TYPES.SECURITY_LOGIN_FAILURE;\n\n    await this.logEvent({\n      eventType,\n      actor: data.username || data.email || 'unknown',\n      actorId: data.userId,\n      action: data.success ? 'User login successful' : 'User login failed',\n      resource: 'authentication',\n      details: {\n        method: data.method || 'password',\n        success: data.success,\n        failureReason: data.failureReason,\n        deviceInfo: data.deviceInfo,\n      },\n      riskLevel: data.success ? this.RISK_LEVELS.LOW : this.RISK_LEVELS.MEDIUM,\n      ipAddress: data.ipAddress,\n      userAgent: data.userAgent,\n      sessionId: data.sessionId,\n      location: data.location,\n    });\n  }\n\n  /**\n   * Log user management events\n   * @param {Object} data - User management data\n   */\n  async logUserManagement(data) {\n    let eventType;\n    let action;\n    let riskLevel;\n\n    switch (data.action) {\n      case 'create':\n        eventType = this.EVENT_TYPES.USER_REGISTER;\n        action = 'User account created';\n        riskLevel = this.RISK_LEVELS.LOW;\n        break;\n      case 'update':\n        eventType = this.EVENT_TYPES.USER_UPDATE;\n        action = 'User account updated';\n        riskLevel = this.RISK_LEVELS.LOW;\n        break;\n      case 'delete':\n        eventType = this.EVENT_TYPES.USER_DELETE;\n        action = 'User account deleted';\n        riskLevel = this.RISK_LEVELS.HIGH;\n        break;\n      case 'ban':\n        eventType = this.EVENT_TYPES.USER_BAN;\n        action = 'User account banned';\n        riskLevel = this.RISK_LEVELS.MEDIUM;\n        break;\n      case 'unban':\n        eventType = this.EVENT_TYPES.USER_UNBAN;\n        action = 'User account unbanned';\n        riskLevel = this.RISK_LEVELS.LOW;\n        break;\n      default:\n        eventType = this.EVENT_TYPES.ADMIN_USER_MANAGE;\n        action = `User ${data.action}`;\n        riskLevel = this.RISK_LEVELS.MEDIUM;\n    }\n\n    await this.logEvent({\n      eventType,\n      actor: data.adminUser || 'system',\n      actorId: data.adminUserId,\n      action,\n      resource: 'user',\n      resourceId: data.targetUserId,\n      details: {\n        targetUser: data.targetUser,\n        changes: data.changes,\n        reason: data.reason,\n        duration: data.duration,\n      },\n      riskLevel,\n      ipAddress: data.ipAddress,\n      userAgent: data.userAgent,\n      sessionId: data.sessionId,\n    });\n  }\n\n  /**\n   * Log payment events\n   * @param {Object} data - Payment data\n   */\n  async logPayment(data) {\n    let eventType;\n    let action;\n    let riskLevel;\n\n    switch (data.type) {\n      case 'success':\n        eventType = this.EVENT_TYPES.PAYMENT_SUCCESS;\n        action = 'Payment processed successfully';\n        riskLevel = this.RISK_LEVELS.LOW;\n        break;\n      case 'failure':\n        eventType = this.EVENT_TYPES.PAYMENT_FAILURE;\n        action = 'Payment processing failed';\n        riskLevel = this.RISK_LEVELS.MEDIUM;\n        break;\n      case 'refund':\n        eventType = this.EVENT_TYPES.PAYMENT_REFUND;\n        action = 'Payment refunded';\n        riskLevel = this.RISK_LEVELS.MEDIUM;\n        break;\n      default:\n        eventType = this.EVENT_TYPES.SUBSCRIPTION_CHANGE;\n        action = `Subscription ${data.type}`;\n        riskLevel = this.RISK_LEVELS.LOW;\n    }\n\n    await this.logEvent({\n      eventType,\n      actor: data.userId,\n      action,\n      resource: 'payment',\n      resourceId: data.paymentId,\n      details: {\n        amount: data.amount,\n        currency: data.currency,\n        method: data.method,\n        subscriptionId: data.subscriptionId,\n        plan: data.plan,\n        failureReason: data.failureReason,\n      },\n      riskLevel,\n      ipAddress: data.ipAddress,\n      userAgent: data.userAgent,\n      sessionId: data.sessionId,\n    });\n  }\n\n  /**\n   * Log security events\n   * @param {Object} data - Security event data\n   */\n  async logSecurity(data) {\n    let eventType;\n    let action;\n    let riskLevel;\n\n    switch (data.type) {\n      case 'permission_denied':\n        eventType = this.EVENT_TYPES.SECURITY_PERMISSION_DENIED;\n        action = 'Permission denied';\n        riskLevel = this.RISK_LEVELS.MEDIUM;\n        break;\n      case 'suspicious_activity':\n        eventType = this.EVENT_TYPES.SECURITY_SUSPICIOUS_ACTIVITY;\n        action = 'Suspicious activity detected';\n        riskLevel = this.RISK_LEVELS.HIGH;\n        break;\n      case 'rate_limit':\n        eventType = this.EVENT_TYPES.API_RATE_LIMIT;\n        action = 'Rate limit exceeded';\n        riskLevel = this.RISK_LEVELS.MEDIUM;\n        break;\n      default:\n        eventType = this.EVENT_TYPES.SECURITY_LOGIN_ATTEMPT;\n        action = `Security event: ${data.type}`;\n        riskLevel = this.RISK_LEVELS.MEDIUM;\n    }\n\n    await this.logEvent({\n      eventType,\n      actor: data.userId || 'unknown',\n      action,\n      resource: data.resource || 'system',\n      details: {\n        type: data.type,\n        reason: data.reason,\n        attempts: data.attempts,\n        threshold: data.threshold,\n        blocked: data.blocked,\n      },\n      riskLevel,\n      ipAddress: data.ipAddress,\n      userAgent: data.userAgent,\n      sessionId: data.sessionId,\n      location: data.location,\n    });\n  }\n\n  /**\n   * Log API events\n   * @param {Object} data - API event data\n   */\n  async logAPI(data) {\n    const eventType = data.error ? this.EVENT_TYPES.API_ERROR : this.EVENT_TYPES.API_REQUEST;\n\n    await this.logEvent({\n      eventType,\n      actor: data.userId || 'anonymous',\n      action: data.error ? 'API request failed' : 'API request processed',\n      resource: 'api',\n      resourceId: data.endpoint,\n      details: {\n        method: data.method,\n        endpoint: data.endpoint,\n        statusCode: data.statusCode,\n        responseTime: data.responseTime,\n        error: data.error,\n        userAgent: data.userAgent,\n        query: data.query,\n        body: data.body,\n      },\n      riskLevel: data.error ? this.RISK_LEVELS.MEDIUM : this.RISK_LEVELS.LOW,\n      ipAddress: data.ipAddress,\n      userAgent: data.userAgent,\n      sessionId: data.sessionId,\n    });\n  }\n\n  /**\n   * Log system events\n   * @param {Object} data - System event data\n   */\n  async logSystem(data) {\n    let eventType;\n    let action;\n    let riskLevel;\n\n    switch (data.type) {\n      case 'start':\n        eventType = this.EVENT_TYPES.SYSTEM_START;\n        action = 'System started';\n        riskLevel = this.RISK_LEVELS.LOW;\n        break;\n      case 'stop':\n        eventType = this.EVENT_TYPES.SYSTEM_STOP;\n        action = 'System stopped';\n        riskLevel = this.RISK_LEVELS.LOW;\n        break;\n      case 'error':\n        eventType = this.EVENT_TYPES.SYSTEM_ERROR;\n        action = 'System error occurred';\n        riskLevel = this.RISK_LEVELS.HIGH;\n        break;\n      case 'maintenance':\n        eventType = this.EVENT_TYPES.SYSTEM_MAINTENANCE;\n        action = 'System maintenance performed';\n        riskLevel = this.RISK_LEVELS.LOW;\n        break;\n      default:\n        eventType = this.EVENT_TYPES.SYSTEM_MAINTENANCE;\n        action = `System event: ${data.type}`;\n        riskLevel = this.RISK_LEVELS.LOW;\n    }\n\n    await this.logEvent({\n      eventType,\n      actor: 'system',\n      action,\n      resource: 'system',\n      details: {\n        type: data.type,\n        uptime: data.uptime,\n        memoryUsage: data.memoryUsage,\n        error: data.error,\n        maintenanceType: data.maintenanceType,\n      },\n      riskLevel,\n      metadata: data.metadata || {},\n    });\n  }\n\n  /**\n   * Query audit logs with filters\n   * @param {Object} filters - Query filters\n   * @returns {Promise<Array>} Audit log entries\n   */\n  async queryLogs(filters = {}) {\n    if (!this.database) {\n      throw new Error('Database service not available for querying logs');\n    }\n\n    const where = {};\n\n    if (filters.eventType) where.eventType = filters.eventType;\n    if (filters.actor) where.actor = { contains: filters.actor };\n    if (filters.actorId) where.actorId = filters.actorId;\n    if (filters.resource) where.resource = filters.resource;\n    if (filters.resourceId) where.resourceId = filters.resourceId;\n    if (filters.riskLevel) where.riskLevel = filters.riskLevel;\n    if (filters.ipAddress) where.ipAddress = filters.ipAddress;\n\n    if (filters.startDate || filters.endDate) {\n      where.createdAt = {};\n      if (filters.startDate) where.createdAt.gte = new Date(filters.startDate);\n      if (filters.endDate) where.createdAt.lte = new Date(filters.endDate);\n    }\n\n    const logs = await this.database.prisma.auditLog.findMany({\n      where,\n      orderBy: { createdAt: 'desc' },\n      take: filters.limit || 100,\n      skip: filters.offset || 0,\n    });\n\n    return logs.map(log => ({\n      ...log,\n      details: JSON.parse(log.details || '{}'),\n      metadata: JSON.parse(log.metadata || '{}'),\n    }));\n  }\n\n  /**\n   * Get audit statistics\n   * @param {Object} filters - Statistics filters\n   * @returns {Promise<Object>} Audit statistics\n   */\n  async getStatistics(filters = {}) {\n    if (!this.database) {\n      throw new Error('Database service not available for statistics');\n    }\n\n    const where = {};\n    if (filters.startDate || filters.endDate) {\n      where.createdAt = {};\n      if (filters.startDate) where.createdAt.gte = new Date(filters.startDate);\n      if (filters.endDate) where.createdAt.lte = new Date(filters.endDate);\n    }\n\n    const [totalEvents, eventsByType, eventsByRisk, recentEvents] = await Promise.all([\n      this.database.prisma.auditLog.count({ where }),\n      this.database.prisma.auditLog.groupBy({\n        by: ['eventType'],\n        where,\n        _count: { id: true },\n      }),\n      this.database.prisma.auditLog.groupBy({\n        by: ['riskLevel'],\n        where,\n        _count: { id: true },\n      }),\n      this.database.prisma.auditLog.findMany({\n        where,\n        orderBy: { createdAt: 'desc' },\n        take: 10,\n      }),\n    ]);\n\n    return {\n      totalEvents,\n      eventsByType: eventsByType.reduce((acc, item) => {\n        acc[item.eventType] = item._count.id;\n        return acc;\n      }, {}),\n      eventsByRisk: eventsByRisk.reduce((acc, item) => {\n        acc[item.riskLevel] = item._count.id;\n        return acc;\n      }, {}),\n      recentEvents: recentEvents.map(event => ({\n        ...event,\n        details: JSON.parse(event.details || '{}'),\n      })),\n    };\n  }\n\n  /**\n   * Clean up old audit logs\n   * @returns {Promise<number>} Number of deleted entries\n   */\n  async cleanup() {\n    if (!this.database) return 0;\n\n    const cutoffDate = new Date();\n    cutoffDate.setDate(cutoffDate.getDate() - this.options.retentionDays);\n\n    const result = await this.database.prisma.auditLog.deleteMany({\n      where: {\n        createdAt: {\n          lt: cutoffDate,\n        },\n      },\n    });\n\n    await this.logEvent({\n      eventType: this.EVENT_TYPES.SYSTEM_MAINTENANCE,\n      actor: 'system',\n      action: 'Audit log cleanup completed',\n      resource: 'audit_logs',\n      details: {\n        deletedCount: result.count,\n        retentionDays: this.options.retentionDays,\n        cutoffDate: cutoffDate.toISOString(),\n      },\n      riskLevel: this.RISK_LEVELS.LOW,\n    });\n\n    return result.count;\n  }\n\n  /**\n   * Export audit logs to file\n   * @param {Object} filters - Export filters\n   * @param {string} format - Export format (json, csv)\n   * @returns {Promise<string>} File path\n   */\n  async exportLogs(filters = {}, format = 'json') {\n    const logs = await this.queryLogs({ ...filters, limit: 10000 });\n\n    const exportDir = path.join(process.cwd(), 'exports');\n    await fs.mkdir(exportDir, { recursive: true });\n\n    const timestamp = new Date().toISOString().replace(/[:.]/g, '-');\n    const filename = `audit_logs_${timestamp}.${format}`;\n    const filepath = path.join(exportDir, filename);\n\n    if (format === 'csv') {\n      const csvHeaders = [\n        'ID',\n        'Timestamp',\n        'Event Type',\n        'Actor',\n        'Actor ID',\n        'Action',\n        'Resource',\n        'Resource ID',\n        'Risk Level',\n        'IP Address',\n        'Details',\n      ];\n\n      const csvRows = logs.map(log => [\n        log.id,\n        log.createdAt,\n        log.eventType,\n        log.actor,\n        log.actorId || '',\n        log.action,\n        log.resource,\n        log.resourceId || '',\n        log.riskLevel,\n        log.ipAddress || '',\n        JSON.stringify(log.details).replace(/\"/g, '\"\"'),\n      ]);\n\n      const csvContent = [csvHeaders, ...csvRows]\n        .map(row => row.map(field => `\"${field}\"`).join(','))\n        .join('\\n');\n\n      await fs.writeFile(filepath, csvContent, 'utf8');\n    } else {\n      await fs.writeFile(filepath, JSON.stringify(logs, null, 2), 'utf8');\n    }\n\n    await this.logEvent({\n      eventType: this.EVENT_TYPES.ADMIN_BACKUP,\n      actor: 'system',\n      action: 'Audit logs exported',\n      resource: 'audit_logs',\n      details: {\n        format,\n        recordCount: logs.length,\n        filters,\n        filepath,\n      },\n      riskLevel: this.RISK_LEVELS.LOW,\n    });\n\n    return filepath;\n  }\n\n  /**\n   * Set WebSocket service for real-time events\n   * @param {Object} websocketService - WebSocket service instance\n   */\n  setWebSocketService(websocketService) {\n    this.websocketService = websocketService;\n  }\n\n  /**\n   * Check if audit logger is ready\n   * @returns {boolean} Ready status\n   */\n  isReady() {\n    return this.isInitialized;\n  }\n\n  /**\n   * Close audit logger and cleanup resources\n   */\n  async close() {\n    if (this.logger) {\n      await this.logEvent({\n        eventType: this.EVENT_TYPES.SYSTEM_STOP,\n        actor: 'system',\n        action: 'Audit logger shutting down',\n        resource: 'audit_logger',\n        details: {\n          uptime: process.uptime(),\n          timestamp: new Date().toISOString(),\n        },\n        riskLevel: this.RISK_LEVELS.LOW,\n      });\n\n      this.logger.end();\n    }\n\n    this.isInitialized = false;\n  }\n}\n\nmodule.exports = AuditLogger;\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\src\\services\\auditService.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":17,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":24},{"ruleId":"no-useless-constructor","severity":2,"message":"Useless constructor.","line":4,"column":3,"nodeType":"MethodDefinition","messageId":"noUselessConstructor","endLine":6,"endColumn":4,"suggestions":[{"messageId":"removeConstructor","fix":{"range":[66,133],"text":""},"desc":"Remove the constructor."}]},{"ruleId":"class-methods-use-this","severity":2,"message":"Expected 'this' to be used by class async method 'logEvent'.","line":8,"column":3,"nodeType":"FunctionExpression","messageId":"missingThis","endLine":8,"endColumn":17},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":30,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":30,"endColumn":20,"suggestions":[{"fix":{"range":[869,920],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"class-methods-use-this","severity":2,"message":"Expected 'this' to be used by class async method 'getAuditLogs'.","line":35,"column":3,"nodeType":"FunctionExpression","messageId":"missingThis","endLine":35,"endColumn":21},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":102,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":102,"endColumn":20,"suggestions":[{"fix":{"range":[2623,2673],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"class-methods-use-this","severity":2,"message":"Expected 'this' to be used by class async method 'getAuditLogById'.","line":107,"column":3,"nodeType":"FunctionExpression","messageId":"missingThis","endLine":107,"endColumn":24},{"ruleId":"radix","severity":2,"message":"Missing radix parameter.","line":110,"column":22,"nodeType":"CallExpression","messageId":"missingRadix","endLine":110,"endColumn":34,"suggestions":[{"messageId":"addRadixParameter10","fix":{"range":[2834,2834],"text":", 10"},"desc":"Add radix parameter `10` for parsing decimal numbers."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":113,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":113,"endColumn":20,"suggestions":[{"fix":{"range":[2877,2932],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"class-methods-use-this","severity":2,"message":"Expected 'this' to be used by class async method 'getStatistics'.","line":118,"column":3,"nodeType":"FunctionExpression","messageId":"missingThis","endLine":118,"endColumn":22},{"ruleId":"no-underscore-dangle","severity":2,"message":"Unexpected dangling '_' in '_count'.","line":144,"column":40,"nodeType":"MemberExpression","messageId":"unexpectedUnderscore","endLine":144,"endColumn":51},{"ruleId":"no-underscore-dangle","severity":2,"message":"Unexpected dangling '_' in '_count'.","line":156,"column":40,"nodeType":"MemberExpression","messageId":"unexpectedUnderscore","endLine":156,"endColumn":51},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":177,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":177,"endColumn":20,"suggestions":[{"fix":{"range":[4546,4602],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"class-methods-use-this","severity":2,"message":"Expected 'this' to be used by class async method 'getEventTypes'.","line":220,"column":3,"nodeType":"FunctionExpression","messageId":"missingThis","endLine":220,"endColumn":22},{"ruleId":"no-underscore-dangle","severity":2,"message":"Unexpected dangling '_' in '_count'.","line":230,"column":16,"nodeType":"MemberExpression","messageId":"unexpectedUnderscore","endLine":230,"endColumn":27},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":233,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":233,"endColumn":20,"suggestions":[{"fix":{"range":[5972,6023],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"class-methods-use-this","severity":2,"message":"Expected 'this' to be used by class async method 'searchAuditLogs'.","line":238,"column":3,"nodeType":"FunctionExpression","messageId":"missingThis","endLine":238,"endColumn":24},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":266,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":266,"endColumn":20,"suggestions":[{"fix":{"range":[6825,6877],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"class-methods-use-this","severity":2,"message":"Expected 'this' to be used by class async method 'getUserActivity'.","line":271,"column":3,"nodeType":"FunctionExpression","messageId":"missingThis","endLine":271,"endColumn":24},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":303,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":303,"endColumn":20,"suggestions":[{"fix":{"range":[7756,7809],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"class-methods-use-this","severity":2,"message":"Expected 'this' to be used by class async method 'getResourceActivity'.","line":308,"column":3,"nodeType":"FunctionExpression","messageId":"missingThis","endLine":308,"endColumn":28},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":343,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":343,"endColumn":20,"suggestions":[{"fix":{"range":[8734,8791],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"class-methods-use-this","severity":2,"message":"Expected 'this' to be used by class async method 'cleanupOldLogs'.","line":348,"column":3,"nodeType":"FunctionExpression","messageId":"missingThis","endLine":348,"endColumn":23},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":367,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":367,"endColumn":20,"suggestions":[{"fix":{"range":[9303,9355],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":373,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":373,"endColumn":7}],"suppressedMessages":[],"errorCount":16,"fatalErrorCount":0,"warningCount":9,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const context = require('../../context');\n\nclass AuditService {\n  constructor() {\n    // Real audit service using Prisma database\n  }\n\n  async logEvent(eventData) {\n    try {\n      const logEntry = await context.database.auditLog.create({\n        data: {\n          eventType: eventData.eventType,\n          actor: eventData.actor,\n          actorId: eventData.actorId,\n          action: eventData.action,\n          resource: eventData.resource,\n          resourceId: eventData.resourceId,\n          details: eventData.details || {},\n          riskLevel: eventData.riskLevel || 'LOW',\n          ipAddress: eventData.ipAddress,\n          userAgent: eventData.userAgent,\n          sessionId: eventData.sessionId,\n          location: eventData.location,\n          metadata: eventData.metadata || {},\n        },\n      });\n\n      return logEntry;\n    } catch (error) {\n      console.error('Error logging audit event:', error);\n      throw error;\n    }\n  }\n\n  async getAuditLogs(filters = {}, options = {}) {\n    try {\n      const { page = 1, limit = 50 } = options;\n\n      // Build where clause for filters\n      const where = {};\n\n      if (filters.eventType) {\n        where.eventType = filters.eventType;\n      }\n\n      if (filters.actor) {\n        where.actor = { contains: filters.actor, mode: 'insensitive' };\n      }\n\n      if (filters.actorId) {\n        where.actorId = filters.actorId;\n      }\n\n      if (filters.resource) {\n        where.resource = filters.resource;\n      }\n\n      if (filters.resourceId) {\n        where.resourceId = filters.resourceId;\n      }\n\n      if (filters.riskLevel) {\n        where.riskLevel = filters.riskLevel.toUpperCase();\n      }\n\n      if (filters.startDate || filters.endDate) {\n        where.createdAt = {};\n        if (filters.startDate) {\n          where.createdAt.gte = new Date(filters.startDate);\n        }\n        if (filters.endDate) {\n          where.createdAt.lte = new Date(filters.endDate);\n        }\n      }\n\n      // Build orderBy\n      const orderBy = {};\n      if (filters.sortBy === 'eventType') {\n        orderBy.eventType = filters.sortOrder === 'desc' ? 'desc' : 'asc';\n      } else {\n        orderBy.createdAt = filters.sortOrder === 'asc' ? 'asc' : 'desc';\n      }\n\n      // Get total count\n      const total = await context.database.auditLog.count({ where });\n\n      // Get paginated results\n      const logs = await context.database.auditLog.findMany({\n        where,\n        orderBy,\n        skip: (page - 1) * limit,\n        take: limit,\n      });\n\n      return {\n        logs,\n        total,\n        page,\n        limit,\n      };\n    } catch (error) {\n      console.error('Error getting audit logs:', error);\n      throw error;\n    }\n  }\n\n  async getAuditLogById(id) {\n    try {\n      return await context.database.auditLog.findUnique({\n        where: { id: parseInt(id) },\n      });\n    } catch (error) {\n      console.error('Error getting audit log by ID:', error);\n      return null;\n    }\n  }\n\n  async getStatistics(filters = {}) {\n    try {\n      // Build where clause for filters\n      const where = {};\n\n      if (filters.startDate || filters.endDate) {\n        where.createdAt = {};\n        if (filters.startDate) {\n          where.createdAt.gte = new Date(filters.startDate);\n        }\n        if (filters.endDate) {\n          where.createdAt.lte = new Date(filters.endDate);\n        }\n      }\n\n      const totalEvents = await context.database.auditLog.count({ where });\n\n      // Events by type\n      const eventsByTypeRaw = await context.database.auditLog.groupBy({\n        by: ['eventType'],\n        where,\n        _count: { eventType: true },\n      });\n\n      const eventsByType = {};\n      eventsByTypeRaw.forEach(item => {\n        eventsByType[item.eventType] = item._count.eventType;\n      });\n\n      // Events by risk level\n      const eventsByRiskRaw = await context.database.auditLog.groupBy({\n        by: ['riskLevel'],\n        where,\n        _count: { riskLevel: true },\n      });\n\n      const eventsByRisk = {};\n      eventsByRiskRaw.forEach(item => {\n        eventsByRisk[item.riskLevel] = item._count.riskLevel;\n      });\n\n      // Recent events (last 10)\n      const recentEvents = await context.database.auditLog.findMany({\n        where,\n        orderBy: { createdAt: 'desc' },\n        take: 10,\n      });\n\n      return {\n        totalEvents,\n        eventsByType,\n        eventsByRisk,\n        recentEvents,\n        timeRange: {\n          startDate: filters.startDate,\n          endDate: filters.endDate,\n        },\n      };\n    } catch (error) {\n      console.error('Error getting audit statistics:', error);\n      throw error;\n    }\n  }\n\n  async exportAuditLogs(filters = {}, format = 'json') {\n    const { logs } = await this.getAuditLogs(filters, { limit: 10000 });\n\n    if (format === 'csv') {\n      const headers = [\n        'ID',\n        'Timestamp',\n        'Event Type',\n        'Actor',\n        'Actor ID',\n        'Action',\n        'Resource',\n        'Resource ID',\n        'Risk Level',\n        'IP Address',\n        'Details',\n      ];\n\n      const rows = logs.map(log => [\n        log.id,\n        log.createdAt.toISOString(),\n        log.eventType,\n        log.actor || '',\n        log.actorId || '',\n        log.action,\n        log.resource,\n        log.resourceId || '',\n        log.riskLevel,\n        log.ipAddress || '',\n        JSON.stringify(log.details).replace(/\"/g, '\"\"'),\n      ]);\n\n      return [headers, ...rows].map(row => row.map(field => `\"${field}\"`).join(',')).join('\\n');\n    }\n\n    return JSON.stringify(logs, null, 2);\n  }\n\n  async getEventTypes() {\n    try {\n      const eventTypesRaw = await context.database.auditLog.groupBy({\n        by: ['eventType'],\n        _count: { eventType: true },\n      });\n\n      return eventTypesRaw.map(item => ({\n        value: item.eventType,\n        label: item.eventType.replace(/_/g, ' ').replace(/\\b\\w/g, l => l.toUpperCase()),\n        count: item._count.eventType,\n      }));\n    } catch (error) {\n      console.error('Error getting event types:', error);\n      return [];\n    }\n  }\n\n  async searchAuditLogs(query, fields = ['actor', 'action', 'resource'], options = {}) {\n    try {\n      const { page = 1, limit = 50 } = options;\n      const searchTerm = query.toLowerCase();\n\n      // Build OR conditions for search\n      const whereConditions = fields.map(field => ({\n        [field]: { contains: searchTerm, mode: 'insensitive' },\n      }));\n\n      const where = { OR: whereConditions };\n\n      const total = await context.database.auditLog.count({ where });\n\n      const logs = await context.database.auditLog.findMany({\n        where,\n        orderBy: { createdAt: 'desc' },\n        skip: (page - 1) * limit,\n        take: limit,\n      });\n\n      return {\n        logs,\n        total,\n        page,\n        limit,\n      };\n    } catch (error) {\n      console.error('Error searching audit logs:', error);\n      throw error;\n    }\n  }\n\n  async getUserActivity(userId, dateFilters = {}, options = {}) {\n    try {\n      const { page = 1, limit = 50 } = options;\n\n      const where = { actorId: userId };\n\n      if (dateFilters.startDate || dateFilters.endDate) {\n        where.createdAt = {};\n        if (dateFilters.startDate) {\n          where.createdAt.gte = new Date(dateFilters.startDate);\n        }\n        if (dateFilters.endDate) {\n          where.createdAt.lte = new Date(dateFilters.endDate);\n        }\n      }\n\n      const total = await context.database.auditLog.count({ where });\n\n      const logs = await context.database.auditLog.findMany({\n        where,\n        orderBy: { createdAt: 'desc' },\n        skip: (page - 1) * limit,\n        take: limit,\n      });\n\n      return {\n        logs,\n        total,\n        page,\n        limit,\n      };\n    } catch (error) {\n      console.error('Error getting user activity:', error);\n      throw error;\n    }\n  }\n\n  async getResourceActivity(resource, resourceId, dateFilters = {}, options = {}) {\n    try {\n      const { page = 1, limit = 50 } = options;\n\n      const where = {\n        resource,\n        resourceId,\n      };\n\n      if (dateFilters.startDate || dateFilters.endDate) {\n        where.createdAt = {};\n        if (dateFilters.startDate) {\n          where.createdAt.gte = new Date(dateFilters.startDate);\n        }\n        if (dateFilters.endDate) {\n          where.createdAt.lte = new Date(dateFilters.endDate);\n        }\n      }\n\n      const total = await context.database.auditLog.count({ where });\n\n      const logs = await context.database.auditLog.findMany({\n        where,\n        orderBy: { createdAt: 'desc' },\n        skip: (page - 1) * limit,\n        take: limit,\n      });\n\n      return {\n        logs,\n        total,\n        page,\n        limit,\n      };\n    } catch (error) {\n      console.error('Error getting resource activity:', error);\n      throw error;\n    }\n  }\n\n  async cleanupOldLogs(days = 90) {\n    try {\n      const cutoffDate = new Date();\n      cutoffDate.setDate(cutoffDate.getDate() - days);\n\n      const deletedLogs = await context.database.auditLog.deleteMany({\n        where: {\n          createdAt: {\n            lt: cutoffDate,\n          },\n        },\n      });\n\n      return {\n        deletedCount: deletedLogs.count,\n        retentionDays: days,\n        cutoffDate: cutoffDate.toISOString(),\n      };\n    } catch (error) {\n      console.error('Error cleaning up old logs:', error);\n      throw error;\n    }\n  }\n}\n\nmodule.exports = new AuditService();\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\src\\services\\auth\\UnifiedSmartAuth.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":26,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":33},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":2,"column":22,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":29},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":3,"column":53,"nodeType":"Identifier","messageId":"undef","endLine":3,"endColumn":60},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":4,"column":14,"nodeType":"Identifier","messageId":"undef","endLine":4,"endColumn":21},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":5,"column":14,"nodeType":"Identifier","messageId":"undef","endLine":5,"endColumn":21},{"ruleId":"import-x/no-extraneous-dependencies","severity":2,"message":"'@hapi/boom' should be listed in the project's dependencies. Run 'npm i @hapi/boom' to add it","line":6,"column":18,"nodeType":"CallExpression","messageId":"missing","endLine":6,"endColumn":39},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":6,"column":18,"nodeType":"Identifier","messageId":"undef","endLine":6,"endColumn":25},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":7,"column":16,"nodeType":"Identifier","messageId":"undef","endLine":7,"endColumn":23},{"ruleId":"no-undef","severity":2,"message":"'__dirname' is not defined.","line":21,"column":34,"nodeType":"Identifier","messageId":"undef","endLine":21,"endColumn":43},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useMultiFileAuthState\" cannot be called in a class component. React Hooks must be called in a React function component or a custom React Hook function.","line":22,"column":40,"nodeType":"Identifier","endLine":22,"endColumn":61},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":95,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":95,"endColumn":7}],"suppressedMessages":[],"errorCount":11,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const { EventEmitter } = require('events');\nconst makeWASocket = require('@whiskeysockets/baileys').default;\nconst { useMultiFileAuthState, DisconnectReason } = require('@whiskeysockets/baileys');\nconst pino = require('pino');\nconst path = require('node:path');\nconst { Boom } = require('@hapi/boom');\nconst logger = require('../../utils/logger');\n\nclass UnifiedSmartAuth extends EventEmitter {\n  constructor(config) {\n    super();\n    this.config = config;\n    this.authState = 'disconnected';\n    this.client = null;\n    this.currentQrCode = null; // Initialize currentQrCode\n\n    logger.info('UnifiedSmartAuth initialized');\n  }\n\n  async connect() {\n    const authDir = path.resolve(__dirname, this.config.bot.authAdapter.default.authDir);\n    const { state, saveCreds } = await useMultiFileAuthState(authDir);\n\n    const pinoLogger = pino({ level: 'silent' });\n\n    this.client = makeWASocket({\n      auth: state,\n      printQRInTerminal: true,\n      logger: pinoLogger,\n      browser: ['WhatsDeX', 'Chrome', '1.0.0'],\n    });\n\n    this.client.ev.on('creds.update', saveCreds);\n\n    this.client.ev.on('connection.update', update => {\n      const { connection, lastDisconnect, qr } = update;\n\n      if (qr) {\n        this.currentQrCode = qr; // Store the QR code\n        this.emit('qr', qr);\n      }\n\n      if (connection === 'close') {\n        this.authState = 'disconnected';\n        const shouldReconnect =\n          lastDisconnect.error instanceof Boom\n            ? lastDisconnect.error.output.statusCode !== DisconnectReason.loggedOut\n            : true;\n\n        this.emit('disconnected', lastDisconnect.error);\n\n        if (shouldReconnect) {\n          this.connect();\n        }\n      } else if (connection === 'open') {\n        this.authState = 'connected';\n        this.emit('connected');\n      }\n    });\n\n    return this.client;\n  }\n\n  async disconnect() {\n    if (this.client) {\n      await this.client.logout();\n      this.client = null;\n      this.authState = 'disconnected';\n    }\n  }\n\n  async getPairingCode(phoneNumber) {\n    if (!this.client) {\n      throw new Error('Baileys client not initialized. Call connect() first.');\n    }\n    if (!phoneNumber) {\n      throw new Error('Phone number is required to request a pairing code.');\n    }\n    // Ensure phone number is in E.164 format without '+'\n    const formattedPhoneNumber = phoneNumber.replace(/\\D/g, '');\n    const code = await this.client.requestPairingCode(formattedPhoneNumber);\n    logger.info(`Requested Pairing Code: ${code}`);\n    return code;\n  }\n\n  async getQRCode() {\n    if (!this.client) {\n      throw new Error('Baileys client not initialized. Call connect() first.');\n    }\n    // Return the last received QR code, or null if not available\n    return this.currentQrCode || null;\n  }\n}\n\nmodule.exports = UnifiedSmartAuth;\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\src\\services\\auth\\learningEngine.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":16,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":23},{"ruleId":"no-restricted-syntax","severity":2,"message":"iterators/generators require regenerator-runtime, which is too heavyweight for this guide to allow them. Separately, loops should be avoided in favor of array iterations.","line":29,"column":5,"nodeType":"ForOfStatement","messageId":"restrictedSyntax","endLine":42,"endColumn":6},{"ruleId":"no-plusplus","severity":2,"message":"Unary operator '++' used.","line":38,"column":7,"nodeType":"UpdateExpression","messageId":"unexpectedUnaryOp","endLine":38,"endColumn":50},{"ruleId":"no-plusplus","severity":2,"message":"Unary operator '++' used.","line":40,"column":9,"nodeType":"UpdateExpression","messageId":"unexpectedUnaryOp","endLine":40,"endColumn":50},{"ruleId":"guard-for-in","severity":2,"message":"The body of a for-in should be wrapped in an if statement to filter unwanted properties from the prototype.","line":45,"column":5,"nodeType":"ForInStatement","messageId":"wrap","endLine":47,"endColumn":6},{"ruleId":"no-restricted-syntax","severity":2,"message":"for..in loops iterate over the entire prototype chain, which is virtually never what you want. Use Object.{keys,values,entries}, and iterate over the resulting array.","line":45,"column":5,"nodeType":"ForInStatement","messageId":"restrictedSyntax","endLine":47,"endColumn":6},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":65,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":65,"endColumn":7}],"suppressedMessages":[],"errorCount":7,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const logger = require('../../utils/logger');\n\nclass LearningEngine {\n  constructor(unifiedAuth) {\n    this.unifiedAuth = unifiedAuth;\n    this.authAttempts = [];\n    logger.info('LearningEngine initialized');\n  }\n\n  recordAuthResult(result) {\n    this.authAttempts.push({\n      timestamp: Date.now(),\n      method: result.method,\n      success: result.success,\n      duration: result.duration,\n      userAgent: result.userAgent,\n    });\n\n    this.optimizeBasedOnLearning();\n  }\n\n  optimizeBasedOnLearning() {\n    if (this.authAttempts.length < 100) {\n      // Not enough data to make a decision\n      return;\n    }\n\n    const methodStats = {};\n    for (const attempt of this.authAttempts) {\n      if (!methodStats[attempt.method]) {\n        methodStats[attempt.method] = {\n          totalDuration: 0,\n          totalAttempts: 0,\n          successRate: 0,\n        };\n      }\n      methodStats[attempt.method].totalDuration += attempt.duration;\n      methodStats[attempt.method].totalAttempts++;\n      if (attempt.success) {\n        methodStats[attempt.method].successRate++;\n      }\n    }\n\n    const avgDurations = {};\n    for (const method in methodStats) {\n      avgDurations[method] = methodStats[method].totalDuration / methodStats[method].totalAttempts;\n    }\n\n    // Sort the auth methods by average duration\n    this.unifiedAuth.config.auth.methods.sort((a, b) => {\n      const durationA = avgDurations[a] || Infinity;\n      const durationB = avgDurations[b] || Infinity;\n      return durationA - durationB;\n    });\n\n    logger.info('Optimized auth methods based on learning', {\n      newOrder: this.unifiedAuth.config.auth.methods,\n    });\n\n    // Clear the auth attempts to start fresh\n    this.authAttempts = [];\n  }\n}\n\nmodule.exports = LearningEngine;\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\src\\services\\auth\\pairingCodeHandler.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":16,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":23},{"ruleId":"no-unused-vars","severity":1,"message":"'options' is assigned a value but never used. Allowed unused args must match /^_/u.","line":9,"column":29,"nodeType":"Identifier","messageId":"unusedVar","endLine":9,"endColumn":36,"suggestions":[{"messageId":"removeVar","data":{"varName":"options"},"fix":{"range":[223,235],"text":""},"desc":"Remove unused variable 'options'."}]},{"ruleId":"class-methods-use-this","severity":2,"message":"Expected 'this' to be used by class method 'convertToPhonetic'.","line":21,"column":3,"nodeType":"FunctionExpression","messageId":"missingThis","endLine":21,"endColumn":20},{"ruleId":"class-methods-use-this","severity":2,"message":"Expected 'this' to be used by class method 'trackUsage'.","line":26,"column":3,"nodeType":"FunctionExpression","messageId":"missingThis","endLine":26,"endColumn":13},{"ruleId":"no-unused-vars","severity":1,"message":"'code' is defined but never used. Allowed unused args must match /^_/u.","line":26,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":26,"endColumn":18,"suggestions":[{"messageId":"removeVar","data":{"varName":"code"},"fix":{"range":[680,684],"text":""},"desc":"Remove unused variable 'code'."}]},{"ruleId":"class-methods-use-this","severity":2,"message":"Expected 'this' to be used by class method 'calculateExpiryWarning'.","line":31,"column":3,"nodeType":"FunctionExpression","messageId":"missingThis","endLine":31,"endColumn":25},{"ruleId":"no-unused-vars","severity":1,"message":"'code' is defined but never used. Allowed unused args must match /^_/u.","line":31,"column":26,"nodeType":"Identifier","messageId":"unusedVar","endLine":31,"endColumn":30,"suggestions":[{"messageId":"removeVar","data":{"varName":"code"},"fix":{"range":[771,775],"text":""},"desc":"Remove unused variable 'code'."}]},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":37,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":37,"endColumn":7}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const logger = require('../../utils/logger');\n\nclass PairingCodeHandler {\n  constructor(unifiedAuth) {\n    this.unifiedAuth = unifiedAuth;\n    logger.info('PairingCodeHandler initialized');\n  }\n\n  async getSmartPairingCode(options = {}) {\n    const nativeCode = await this.unifiedAuth.getPairingCode();\n\n    // Enhance with smart features\n    return {\n      ...nativeCode,\n      phonetic: this.convertToPhonetic(nativeCode.code), // Optional enhancement\n      analytics: this.trackUsage(nativeCode),\n      expiryWarning: this.calculateExpiryWarning(nativeCode),\n    };\n  }\n\n  convertToPhonetic(code) {\n    // TODO: Implement phonetic conversion\n    return code;\n  }\n\n  trackUsage(code) {\n    // TODO: Implement usage tracking\n    return {};\n  }\n\n  calculateExpiryWarning(code) {\n    // TODO: Implement expiry warning calculation\n    return {};\n  }\n}\n\nmodule.exports = PairingCodeHandler;\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\src\\services\\auth\\qrCodeHandler.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":16,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":23},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":14,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":14,"endColumn":7}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const logger = require('../../utils/logger');\n\nclass QRCodeHandler {\n  constructor(unifiedAuth) {\n    this.unifiedAuth = unifiedAuth;\n    logger.info('QRCodeHandler initialized');\n  }\n\n  async getQRCode() {\n    return this.unifiedAuth.getQRCode();\n  }\n}\n\nmodule.exports = QRCodeHandler;\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\src\\services\\auth\\securityManager.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":16,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":23},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":36,"column":16,"nodeType":"Identifier","messageId":"undef","endLine":36,"endColumn":23},{"ruleId":"import-x/no-import-module-exports","severity":2,"message":"Cannot use import declarations in modules that export using CommonJS (module.exports = 'foo' or exports.bar = 'hi')","line":37,"column":5,"nodeType":"ImportDeclaration","messageId":"notAllowed","endLine":37,"endColumn":29},{"ruleId":"no-undef","severity":2,"message":"'__dirname' is not defined.","line":40,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":40,"endColumn":16},{"ruleId":"no-restricted-syntax","severity":2,"message":"iterators/generators require regenerator-runtime, which is too heavyweight for this guide to allow them. Separately, loops should be avoided in favor of array iterations.","line":48,"column":7,"nodeType":"ForOfStatement","messageId":"restrictedSyntax","endLine":55,"endColumn":8},{"ruleId":"no-await-in-loop","severity":2,"message":"Unexpected `await` inside a loop.","line":50,"column":22,"nodeType":"AwaitExpression","messageId":"unexpectedAwait","endLine":50,"endColumn":45},{"ruleId":"no-await-in-loop","severity":2,"message":"Unexpected `await` inside a loop.","line":52,"column":11,"nodeType":"AwaitExpression","messageId":"unexpectedAwait","endLine":52,"endColumn":36},{"ruleId":"class-methods-use-this","severity":2,"message":"Expected 'this' to be used by class async method 'alertSecurityIssue'.","line":81,"column":3,"nodeType":"FunctionExpression","messageId":"missingThis","endLine":81,"endColumn":27},{"ruleId":"no-undef","severity":2,"message":"'securityLogger' is not defined.","line":82,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":82,"endColumn":19},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":86,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":86,"endColumn":7}],"suppressedMessages":[],"errorCount":10,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const logger = require('../../utils/logger');\n\nclass SecurityManager {\n  constructor(unifiedAuth) {\n    this.unifiedAuth = unifiedAuth;\n    this.failedLoginAttempts = new Map();\n    logger.info('SecurityManager initialized');\n  }\n\n  async verifyPairingCode(userId, code) {\n    if (await this.detectAnomalies(userId)) {\n      await this.alertSecurityIssue(`Multiple failed login attempts for user ${userId}`);\n      return false;\n    }\n\n    // TODO: Implement a more robust cryptographic verification\n    logger.info('Verifying pairing code format', { code });\n    if (!/^[\\d]{12}$/.test(code)) {\n      logger.warn('Invalid pairing code format', { code });\n      await this.recordFailedLogin(userId);\n      return false;\n    }\n\n    // Placeholder for actual verification\n    const isValid = true;\n\n    if (!isValid) {\n      await this.recordFailedLogin(userId);\n    }\n\n    return isValid;\n  }\n\n  async cleanupExpiredSessions() {\n    logger.info('Cleaning up expired sessions');\n    const fs = require('fs').promises;\n    import path from 'path';\n\n    const authDir = path.resolve(\n      __dirname,\n      '../../../',\n      this.unifiedAuth.config.bot.authAdapter.default.authDir\n    );\n    const sevenDaysAgo = Date.now() - 7 * 24 * 60 * 60 * 1000;\n\n    try {\n      const files = await fs.readdir(authDir);\n      for (const file of files) {\n        const filePath = path.join(authDir, file);\n        const stat = await fs.stat(filePath);\n        if (stat.mtime.getTime() < sevenDaysAgo) {\n          await fs.unlink(filePath);\n          logger.info(`Deleted expired session file: ${file}`);\n        }\n      }\n    } catch (error) {\n      logger.error(`Error cleaning up expired sessions: ${error.message}`);\n    }\n  }\n\n  async detectAnomalies(userId) {\n    const failedAttempts = this.failedLoginAttempts.get(userId) || 0;\n    if (failedAttempts > 5) {\n      logger.warn(`Anomaly detected for user ${userId}: multiple failed login attempts`);\n      return true;\n    }\n    return false;\n  }\n\n  async recordFailedLogin(userId) {\n    const failedAttempts = (this.failedLoginAttempts.get(userId) || 0) + 1;\n    this.failedLoginAttempts.set(userId, failedAttempts);\n    setTimeout(\n      () => {\n        this.failedLoginAttempts.delete(userId);\n      },\n      60 * 60 * 1000\n    ); // Reset after 1 hour\n  }\n\n  async alertSecurityIssue(issue) {\n    securityLogger.warn('Security issue detected', { issue });\n  }\n}\n\nmodule.exports = SecurityManager;\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\src\\services\\authenticationService.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":26,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":33},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":2,"column":26,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":33},{"ruleId":"import-x/extensions","severity":2,"message":"Missing file extension for \"./unifiedSmartAuth\"","line":2,"column":34,"nodeType":"Literal","messageId":"missing","endLine":2,"endColumn":54},{"ruleId":"import-x/no-unresolved","severity":2,"message":"Unable to resolve path to module './unifiedSmartAuth'.","line":2,"column":34,"nodeType":"Literal","messageId":"unresolved","endLine":2,"endColumn":54},{"ruleId":"no-unused-vars","severity":1,"message":"'method' is defined but never used. Allowed unused args must match /^_/u.","line":38,"column":22,"nodeType":"Identifier","messageId":"unusedVar","endLine":38,"endColumn":28,"suggestions":[{"messageId":"removeVar","data":{"varName":"method"},"fix":{"range":[1200,1206],"text":""},"desc":"Remove unused variable 'method'."}]},{"ruleId":"class-methods-use-this","severity":2,"message":"Expected 'this' to be used by class method 'getAnalytics'.","line":49,"column":3,"nodeType":"FunctionExpression","messageId":"missingThis","endLine":49,"endColumn":15},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":55,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":55,"endColumn":7}],"suppressedMessages":[],"errorCount":6,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const { EventEmitter } = require('events');\nconst UnifiedSmartAuth = require('./unifiedSmartAuth');\n\nclass AuthenticationService extends EventEmitter {\n  constructor(context, client) {\n    super();\n    this.unifiedAuth = new UnifiedSmartAuth(context.config, client);\n    this.config = context.config;\n    this.bot = client;\n\n    this.unifiedAuth.on('qr', qr => this.emit('qr', qr));\n    this.unifiedAuth.on('code', code => this.emit('code', code));\n    this.unifiedAuth.on('authenticated', () => this.emit('authentication-success', this.bot));\n    this.unifiedAuth.on('disconnected', reason => this.emit('authentication-failure', reason));\n  }\n\n  async start() {\n    const session = await this.unifiedAuth.detectExistingSession();\n    if (session.hasSession && session.isValid) {\n      await this.bot.launch();\n    } else {\n      this.emit('no-session-found');\n    }\n  }\n\n  async continueSession() {\n    if (this.bot) {\n      this.emit('authentication-success', this.bot);\n    } else {\n      this.emit('authentication-failure', new Error('Bot not initialized for continuing session.'));\n    }\n  }\n\n  async reauthenticate() {\n    this.emit('authentication-choice-required');\n  }\n\n  async authenticate(method) {\n    try {\n      if (!this.config.bot.phoneNumber) {\n        throw new Error('Phone number not provided in the configuration.');\n      }\n      await this.bot.launch();\n    } catch (error) {\n      this.emit('authentication-failure', error);\n    }\n  }\n\n  getAnalytics() {\n    // This will be implemented later\n    return {};\n  }\n}\n\nmodule.exports = AuthenticationService;\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\src\\services\\autoReconnectionEngine.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":26,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":33},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":2,"column":16,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":23},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":52,"column":18,"nodeType":"Identifier","messageId":"undef","endLine":52,"endColumn":25},{"ruleId":"import-x/no-import-module-exports","severity":2,"message":"Cannot use import declarations in modules that export using CommonJS (module.exports = 'foo' or exports.bar = 'hi')","line":53,"column":7,"nodeType":"ImportDeclaration","messageId":"notAllowed","endLine":53,"endColumn":31},{"ruleId":"no-undef","severity":2,"message":"'__dirname' is not defined.","line":55,"column":38,"nodeType":"Identifier","messageId":"undef","endLine":55,"endColumn":47},{"ruleId":"no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":59,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":59,"endColumn":19},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":69,"column":18,"nodeType":"Identifier","messageId":"undef","endLine":69,"endColumn":25},{"ruleId":"import-x/no-import-module-exports","severity":2,"message":"Cannot use import declarations in modules that export using CommonJS (module.exports = 'foo' or exports.bar = 'hi')","line":70,"column":7,"nodeType":"ImportDeclaration","messageId":"notAllowed","endLine":70,"endColumn":31},{"ruleId":"no-undef","severity":2,"message":"'__dirname' is not defined.","line":72,"column":38,"nodeType":"Identifier","messageId":"undef","endLine":72,"endColumn":47},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":83,"column":29,"nodeType":"Identifier","messageId":"undef","endLine":83,"endColumn":36},{"ruleId":"class-methods-use-this","severity":2,"message":"Expected 'this' to be used by class method 'categorizeDisconnection'.","line":136,"column":3,"nodeType":"FunctionExpression","messageId":"missingThis","endLine":136,"endColumn":26},{"ruleId":"class-methods-use-this","severity":2,"message":"Expected 'this' to be used by class method 'assessSeverity'.","line":168,"column":3,"nodeType":"FunctionExpression","messageId":"missingThis","endLine":168,"endColumn":17},{"ruleId":"class-methods-use-this","severity":2,"message":"Expected 'this' to be used by class async method 'identifyCauses'.","line":186,"column":3,"nodeType":"FunctionExpression","messageId":"missingThis","endLine":186,"endColumn":23},{"ruleId":"no-unused-vars","severity":1,"message":"'context' is defined but never used. Allowed unused args must match /^_/u.","line":256,"column":43,"nodeType":"Identifier","messageId":"unusedVar","endLine":256,"endColumn":50,"suggestions":[{"messageId":"removeVar","data":{"varName":"context"},"fix":{"range":[7217,7226],"text":""},"desc":"Remove unused variable 'context'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'strategies' is assigned a value but never used.","line":298,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":298,"endColumn":21,"suggestions":[{"messageId":"removeVar","data":{"varName":"strategies"},"fix":{"range":[8506,8978],"text":""},"desc":"Remove unused variable 'strategies'."}]},{"ruleId":"class-methods-use-this","severity":2,"message":"Expected 'this' to be used by class method 'calculateConditionMultiplier'.","line":325,"column":3,"nodeType":"FunctionExpression","messageId":"missingThis","endLine":325,"endColumn":31},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":368,"column":23,"nodeType":"Identifier","messageId":"undef","endLine":368,"endColumn":30},{"ruleId":"no-plusplus","severity":2,"message":"Unary operator '++' used.","line":464,"column":45,"nodeType":"UpdateExpression","messageId":"unexpectedUnaryOp","endLine":464,"endColumn":48},{"ruleId":"no-param-reassign","severity":2,"message":"Assignment to property of function parameter 'attempt'.","line":465,"column":7,"nodeType":"Identifier","messageId":"assignmentToFunctionParamProp","endLine":465,"endColumn":14},{"ruleId":"no-await-in-loop","severity":2,"message":"Unexpected `await` inside a loop.","line":474,"column":7,"nodeType":"AwaitExpression","messageId":"unexpectedAwait","endLine":474,"endColumn":30},{"ruleId":"no-await-in-loop","severity":2,"message":"Unexpected `await` inside a loop.","line":477,"column":23,"nodeType":"AwaitExpression","messageId":"unexpectedAwait","endLine":477,"endColumn":71},{"ruleId":"no-await-in-loop","severity":2,"message":"Unexpected `await` inside a loop.","line":480,"column":9,"nodeType":"AwaitExpression","messageId":"unexpectedAwait","endLine":480,"endColumn":54},{"ruleId":"no-plusplus","severity":2,"message":"Unary operator '++' used.","line":492,"column":45,"nodeType":"UpdateExpression","messageId":"unexpectedUnaryOp","endLine":492,"endColumn":48},{"ruleId":"no-param-reassign","severity":2,"message":"Assignment to property of function parameter 'attempt'.","line":493,"column":7,"nodeType":"Identifier","messageId":"assignmentToFunctionParamProp","endLine":493,"endColumn":14},{"ruleId":"no-await-in-loop","severity":2,"message":"Unexpected `await` inside a loop.","line":508,"column":7,"nodeType":"AwaitExpression","messageId":"unexpectedAwait","endLine":508,"endColumn":30},{"ruleId":"no-await-in-loop","severity":2,"message":"Unexpected `await` inside a loop.","line":511,"column":23,"nodeType":"AwaitExpression","messageId":"unexpectedAwait","endLine":511,"endColumn":71},{"ruleId":"no-await-in-loop","severity":2,"message":"Unexpected `await` inside a loop.","line":514,"column":9,"nodeType":"AwaitExpression","messageId":"unexpectedAwait","endLine":514,"endColumn":54},{"ruleId":"class-methods-use-this","severity":2,"message":"Expected 'this' to be used by class method 'calculateSuccessProbability'.","line":627,"column":3,"nodeType":"FunctionExpression","messageId":"missingThis","endLine":627,"endColumn":30},{"ruleId":"no-param-reassign","severity":2,"message":"Assignment to property of function parameter 'attempt'.","line":743,"column":7,"nodeType":"Identifier","messageId":"assignmentToFunctionParamProp","endLine":743,"endColumn":14},{"ruleId":"no-param-reassign","severity":2,"message":"Assignment to property of function parameter 'attempt'.","line":744,"column":7,"nodeType":"Identifier","messageId":"assignmentToFunctionParamProp","endLine":744,"endColumn":14},{"ruleId":"class-methods-use-this","severity":2,"message":"Expected 'this' to be used by class method 'getTimeOfDay'.","line":827,"column":3,"nodeType":"FunctionExpression","messageId":"missingThis","endLine":827,"endColumn":15},{"ruleId":"class-methods-use-this","severity":2,"message":"Expected 'this' to be used by class method 'assessNetworkQuality'.","line":838,"column":3,"nodeType":"FunctionExpression","messageId":"missingThis","endLine":838,"endColumn":23},{"ruleId":"class-methods-use-this","severity":2,"message":"Expected 'this' to be used by class method 'assessDeviceStatus'.","line":846,"column":3,"nodeType":"FunctionExpression","messageId":"missingThis","endLine":846,"endColumn":21},{"ruleId":"no-unused-vars","severity":1,"message":"'attempt' is defined but never used. Allowed unused args must match /^_/u.","line":854,"column":23,"nodeType":"Identifier","messageId":"unusedVar","endLine":854,"endColumn":30,"suggestions":[{"messageId":"removeVar","data":{"varName":"attempt"},"fix":{"range":[24191,24198],"text":""},"desc":"Remove unused variable 'attempt'."}]},{"ruleId":"no-await-in-loop","severity":2,"message":"Unexpected `await` inside a loop.","line":867,"column":7,"nodeType":"AwaitExpression","messageId":"unexpectedAwait","endLine":867,"endColumn":38},{"ruleId":"no-unused-vars","severity":1,"message":"'attempt' is defined but never used. Allowed unused args must match /^_/u.","line":876,"column":24,"nodeType":"Identifier","messageId":"unusedVar","endLine":876,"endColumn":31,"suggestions":[{"messageId":"removeVar","data":{"varName":"attempt"},"fix":{"range":[24746,24753],"text":""},"desc":"Remove unused variable 'attempt'."}]},{"ruleId":"no-await-in-loop","severity":2,"message":"Unexpected `await` inside a loop.","line":889,"column":7,"nodeType":"AwaitExpression","messageId":"unexpectedAwait","endLine":889,"endColumn":38},{"ruleId":"class-methods-use-this","severity":2,"message":"Expected 'this' to be used by class method 'delay'.","line":898,"column":3,"nodeType":"FunctionExpression","messageId":"missingThis","endLine":898,"endColumn":8},{"ruleId":"no-promise-executor-return","severity":2,"message":"Return values from promise executor functions cannot be read.","line":899,"column":35,"nodeType":"CallExpression","messageId":"returnsValue","endLine":899,"endColumn":58,"suggestions":[{"messageId":"wrapBraces","fix":{"range":[25315,25338],"text":"{setTimeout(resolve, ms)}"},"desc":"Wrap the expression in `{}`."}]},{"ruleId":"no-restricted-syntax","severity":2,"message":"iterators/generators require regenerator-runtime, which is too heavyweight for this guide to allow them. Separately, loops should be avoided in favor of array iterations.","line":926,"column":5,"nodeType":"ForOfStatement","messageId":"restrictedSyntax","endLine":928,"endColumn":6},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":938,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":938,"endColumn":7}],"suppressedMessages":[],"errorCount":36,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const { EventEmitter } = require('events');\nconst logger = require('../utils/logger');\n\n/**\n * Automated Reconnection Engine\n * AI-powered reconnection with intelligent retry logic\n */\nclass AutoReconnectionEngine extends EventEmitter {\n  constructor(options = {}) {\n    super();\n\n    this.maxRetries = options.maxRetries || 10;\n    this.baseDelay = options.baseDelay || 1000; // 1 second\n    this.maxDelay = options.maxDelay || 300000; // 5 minutes\n    this.backoffMultiplier = options.backoffMultiplier || 2;\n    this.jitterFactor = options.jitterFactor || 0.1;\n\n    // Connection state tracking\n    this.connectionState = {\n      isConnected: false,\n      lastConnected: null,\n      lastDisconnected: null,\n      disconnectReason: null,\n      retryCount: 0,\n      totalRetries: 0,\n      successRate: 1.0,\n      averageReconnectionTime: 0,\n    };\n\n    // AI learning data\n    this.learningData = {\n      successfulStrategies: [],\n      failedStrategies: [],\n      networkPatterns: new Map(),\n      timePatterns: new Map(),\n      devicePatterns: new Map(),\n    };\n\n    // Active reconnection attempts\n    this.activeAttempts = new Map();\n    this.reconnectionTimers = new Map();\n\n    this.loadLearningData();\n    logger.info('Auto Reconnection Engine initialized with AI learning capabilities');\n  }\n\n  /**\n   * Load AI learning data from persistent storage\n   */\n  async loadLearningData() {\n    try {\n      const fs = require('fs').promises;\n      import path from 'path';\n\n      const learningFile = path.join(__dirname, '../../.whatsdex-reconnection-learning.json');\n      const data = await fs.readFile(learningFile, 'utf8');\n      this.learningData = { ...this.learningData, ...JSON.parse(data) };\n      logger.info('Reconnection learning data loaded');\n    } catch (error) {\n      logger.info('No existing reconnection learning data found');\n    }\n  }\n\n  /**\n   * Save AI learning data to persistent storage\n   */\n  async saveLearningData() {\n    try {\n      const fs = require('fs').promises;\n      import path from 'path';\n\n      const learningFile = path.join(__dirname, '../../.whatsdex-reconnection-learning.json');\n      await fs.writeFile(learningFile, JSON.stringify(this.learningData, null, 2));\n    } catch (error) {\n      logger.error('Failed to save reconnection learning data', { error: error.message });\n    }\n  }\n\n  /**\n   * Handle disconnection and initiate reconnection\n   */\n  async handleDisconnection(reason, context = {}) {\n    const disconnectionId = require('crypto').randomUUID();\n    const timestamp = Date.now();\n\n    logger.warn('Disconnection detected', {\n      disconnectionId,\n      reason,\n      context,\n      currentState: this.connectionState,\n    });\n\n    // Update connection state\n    this.connectionState.isConnected = false;\n    this.connectionState.lastDisconnected = timestamp;\n    this.connectionState.disconnectReason = reason;\n\n    // Analyze disconnection reason\n    const analysis = await this.analyzeDisconnection(reason, context);\n\n    // Emit disconnection event\n    this.emit('disconnection', {\n      id: disconnectionId,\n      reason,\n      analysis,\n      timestamp,\n    });\n\n    // Start reconnection process\n    await this.initiateReconnection(disconnectionId, analysis, context);\n\n    return disconnectionId;\n  }\n\n  /**\n   * Analyze disconnection reason using AI\n   */\n  async analyzeDisconnection(reason, context) {\n    const analysis = {\n      type: this.categorizeDisconnection(reason),\n      severity: this.assessSeverity(reason),\n      likelyCauses: await this.identifyCauses(reason, context),\n      recommendedStrategy: await this.recommendStrategy(reason, context),\n      estimatedRecoveryTime: this.estimateRecoveryTime(reason),\n      confidence: 0.8,\n    };\n\n    logger.info('Disconnection analyzed', { reason, analysis });\n\n    return analysis;\n  }\n\n  /**\n   * Categorize disconnection type\n   */\n  categorizeDisconnection(reason) {\n    const reasonStr = reason?.toString().toLowerCase() || '';\n\n    if (\n      reasonStr.includes('network') ||\n      reasonStr.includes('timeout') ||\n      reasonStr.includes('connection')\n    ) {\n      return 'network';\n    }\n    if (\n      reasonStr.includes('auth') ||\n      reasonStr.includes('login') ||\n      reasonStr.includes('session')\n    ) {\n      return 'authentication';\n    }\n    if (reasonStr.includes('device') || reasonStr.includes('phone')) {\n      return 'device';\n    }\n    if (reasonStr.includes('server') || reasonStr.includes('maintenance')) {\n      return 'server';\n    }\n    if (reasonStr.includes('rate') || reasonStr.includes('limit')) {\n      return 'rate_limit';\n    }\n    return 'unknown';\n  }\n\n  /**\n   * Assess severity of disconnection\n   */\n  assessSeverity(reason) {\n    const reasonStr = reason?.toString().toLowerCase() || '';\n\n    if (reasonStr.includes('banned') || reasonStr.includes('blocked')) {\n      return 'critical';\n    }\n    if (reasonStr.includes('auth') || reasonStr.includes('login')) {\n      return 'high';\n    }\n    if (reasonStr.includes('network') || reasonStr.includes('timeout')) {\n      return 'medium';\n    }\n    return 'low';\n  }\n\n  /**\n   * Identify likely causes of disconnection\n   */\n  async identifyCauses(reason, context) {\n    const causes = [];\n    const reasonStr = reason?.toString().toLowerCase() || '';\n\n    // Network-related causes\n    if (reasonStr.includes('network') || reasonStr.includes('timeout')) {\n      causes.push('Network connectivity issues');\n      causes.push('WiFi signal weakness');\n      causes.push('Mobile data instability');\n    }\n\n    // Authentication causes\n    if (reasonStr.includes('auth') || reasonStr.includes('login')) {\n      causes.push('Session token expired');\n      causes.push('Device verification required');\n      causes.push('Account security measures');\n    }\n\n    // Device causes\n    if (reasonStr.includes('device') || reasonStr.includes('phone')) {\n      causes.push('Device offline');\n      causes.push('Battery optimization');\n      causes.push('App background restrictions');\n    }\n\n    // Server causes\n    if (reasonStr.includes('server')) {\n      causes.push('WhatsApp server maintenance');\n      causes.push('Regional server issues');\n      causes.push('API rate limiting');\n    }\n\n    // Learn from context\n    if (context.networkType) {\n      causes.push(`Network type: ${context.networkType}`);\n    }\n\n    if (context.deviceType) {\n      causes.push(`Device type: ${context.deviceType}`);\n    }\n\n    return causes;\n  }\n\n  /**\n   * Recommend reconnection strategy using AI\n   */\n  async recommendStrategy(reason, context) {\n    // Get historical success rates for different strategies\n    const historicalSuccess = await this.getHistoricalSuccessRates(reason, context);\n\n    // Consider current conditions\n    const currentConditions = this.assessCurrentConditions(context);\n\n    // AI-powered strategy selection\n    const strategy = this.selectOptimalStrategy(historicalSuccess, currentConditions);\n\n    logger.info('Reconnection strategy recommended', {\n      reason,\n      strategy,\n      historicalSuccess,\n      currentConditions,\n    });\n\n    return strategy;\n  }\n\n  /**\n   * Get historical success rates for reconnection strategies\n   */\n  async getHistoricalSuccessRates(reason, context) {\n    const reasonType = this.categorizeDisconnection(reason);\n    const successfulStrategies = this.learningData.successfulStrategies\n      .filter(s => s.reasonType === reasonType)\n      .slice(-20); // Last 20 successful reconnections\n\n    const strategyCounts = {};\n    successfulStrategies.forEach(s => {\n      strategyCounts[s.strategy] = (strategyCounts[s.strategy] || 0) + 1;\n    });\n\n    // Calculate success rates\n    const totalStrategies = successfulStrategies.length;\n    const successRates = {};\n\n    Object.keys(strategyCounts).forEach(strategy => {\n      successRates[strategy] = strategyCounts[strategy] / totalStrategies;\n    });\n\n    return successRates;\n  }\n\n  /**\n   * Assess current connection conditions\n   */\n  assessCurrentConditions(context) {\n    const conditions = {\n      networkQuality: this.assessNetworkQuality(context),\n      deviceStatus: this.assessDeviceStatus(context),\n      timeOfDay: this.getTimeOfDay(),\n      serverLoad: 'unknown', // Would be determined by monitoring\n      userActivity: context.userActivity || 'unknown',\n    };\n\n    return conditions;\n  }\n\n  /**\n   * Select optimal reconnection strategy\n   */\n  selectOptimalStrategy(historicalSuccess, currentConditions) {\n    // Default strategies based on disconnection type\n    const strategies = {\n      network: ['immediate_retry', 'exponential_backoff', 'network_wait'],\n      authentication: ['qr_refresh', 'pairing_code', 'device_verification'],\n      device: ['device_check', 'app_restart', 'notification_send'],\n      server: ['server_wait', 'regional_switch', 'maintenance_check'],\n      rate_limit: ['rate_limit_wait', 'request_spread', 'quota_check'],\n      unknown: ['immediate_retry', 'exponential_backoff', 'manual_intervention'],\n    };\n\n    // Find strategy with highest historical success rate\n    let bestStrategy = 'immediate_retry';\n    let bestScore = 0;\n\n    Object.entries(historicalSuccess).forEach(([strategy, successRate]) => {\n      const score = successRate * this.calculateConditionMultiplier(strategy, currentConditions);\n      if (score > bestScore) {\n        bestStrategy = strategy;\n        bestScore = score;\n      }\n    });\n\n    return bestStrategy;\n  }\n\n  /**\n   * Calculate condition multiplier for strategy scoring\n   */\n  calculateConditionMultiplier(strategy, conditions) {\n    let multiplier = 1.0;\n\n    // Network quality multiplier\n    if (conditions.networkQuality === 'poor' && strategy.includes('immediate')) {\n      multiplier *= 0.5;\n    }\n\n    // Time of day multiplier\n    if (conditions.timeOfDay === 'night' && strategy.includes('notification')) {\n      multiplier *= 1.2;\n    }\n\n    // Device status multiplier\n    if (conditions.deviceStatus === 'offline' && strategy.includes('device')) {\n      multiplier *= 1.3;\n    }\n\n    return multiplier;\n  }\n\n  /**\n   * Estimate recovery time\n   */\n  estimateRecoveryTime(reason) {\n    const reasonType = this.categorizeDisconnection(reason);\n\n    const estimates = {\n      network: { min: 5000, max: 30000, average: 15000 },\n      authentication: { min: 10000, max: 120000, average: 60000 },\n      device: { min: 30000, max: 300000, average: 120000 },\n      server: { min: 60000, max: 600000, average: 300000 },\n      rate_limit: { min: 60000, max: 3600000, average: 600000 },\n      unknown: { min: 10000, max: 60000, average: 30000 },\n    };\n\n    return estimates[reasonType] || estimates.unknown;\n  }\n\n  /**\n   * Initiate reconnection process\n   */\n  async initiateReconnection(disconnectionId, analysis, context) {\n    const attemptId = require('crypto').randomUUID();\n\n    logger.info('Initiating reconnection', {\n      disconnectionId,\n      attemptId,\n      strategy: analysis.recommendedStrategy,\n      estimatedRecovery: analysis.estimatedRecoveryTime.average,\n    });\n\n    // Create reconnection attempt\n    const attempt = {\n      id: attemptId,\n      disconnectionId,\n      strategy: analysis.recommendedStrategy,\n      startTime: Date.now(),\n      status: 'starting',\n      retryCount: 0,\n      maxRetries: this.calculateMaxRetries(analysis),\n      analysis,\n    };\n\n    this.activeAttempts.set(attemptId, attempt);\n\n    // Emit reconnection start event\n    this.emit('reconnection_start', attempt);\n\n    // Execute reconnection strategy\n    await this.executeReconnectionStrategy(attempt, context);\n\n    return attemptId;\n  }\n\n  /**\n   * Calculate maximum retries based on analysis\n   */\n  calculateMaxRetries(analysis) {\n    const baseRetries = {\n      critical: 1,\n      high: 3,\n      medium: 5,\n      low: 10,\n    };\n\n    return Math.min(baseRetries[analysis.severity] || 5, this.maxRetries);\n  }\n\n  /**\n   * Execute reconnection strategy\n   */\n  async executeReconnectionStrategy(attempt, context) {\n    const { strategy } = attempt;\n\n    try {\n      switch (strategy) {\n        case 'immediate_retry':\n          await this.executeImmediateRetry(attempt, context);\n          break;\n        case 'exponential_backoff':\n          await this.executeExponentialBackoff(attempt, context);\n          break;\n        case 'qr_refresh':\n          await this.executeQRRefresh(attempt, context);\n          break;\n        case 'pairing_code':\n          await this.executePairingCode(attempt, context);\n          break;\n        case 'device_check':\n          await this.executeDeviceCheck(attempt, context);\n          break;\n        case 'network_wait':\n          await this.executeNetworkWait(attempt, context);\n          break;\n        default:\n          await this.executeImmediateRetry(attempt, context);\n      }\n    } catch (error) {\n      logger.error('Reconnection strategy execution failed', {\n        attemptId: attempt.id,\n        strategy,\n        error: error.message,\n      });\n\n      // Record failed strategy\n      await this.recordFailedStrategy(attempt, error);\n\n      // Try fallback strategy\n      await this.tryFallbackStrategy(attempt, context);\n    }\n  }\n\n  /**\n   * Execute immediate retry strategy\n   */\n  async executeImmediateRetry(attempt, context) {\n    const delay = 1000; // 1 second\n\n    for (let i = 0; i < attempt.maxRetries; i++) {\n      attempt.retryCount = i + 1;\n\n      logger.info('Executing immediate retry', {\n        attemptId: attempt.id,\n        retryCount: attempt.retryCount,\n        delay,\n      });\n\n      // Wait for delay\n      await this.delay(delay);\n\n      // Attempt reconnection\n      const success = await this.attemptReconnection(attempt, context);\n\n      if (success) {\n        await this.handleReconnectionSuccess(attempt);\n        return;\n      }\n    }\n\n    await this.handleReconnectionFailure(attempt, 'Max retries exceeded');\n  }\n\n  /**\n   * Execute exponential backoff strategy\n   */\n  async executeExponentialBackoff(attempt, context) {\n    for (let i = 0; i < attempt.maxRetries; i++) {\n      attempt.retryCount = i + 1;\n\n      // Calculate delay with exponential backoff and jitter\n      const baseDelay = this.baseDelay * this.backoffMultiplier ** i;\n      const jitter = baseDelay * this.jitterFactor * (Math.random() * 2 - 1);\n      const delay = Math.min(baseDelay + jitter, this.maxDelay);\n\n      logger.info('Executing exponential backoff', {\n        attemptId: attempt.id,\n        retryCount: attempt.retryCount,\n        delay: Math.round(delay),\n        baseDelay: Math.round(baseDelay),\n      });\n\n      // Wait for delay\n      await this.delay(delay);\n\n      // Attempt reconnection\n      const success = await this.attemptReconnection(attempt, context);\n\n      if (success) {\n        await this.handleReconnectionSuccess(attempt);\n        return;\n      }\n    }\n\n    await this.handleReconnectionFailure(attempt, 'Max retries exceeded');\n  }\n\n  /**\n   * Execute QR refresh strategy\n   */\n  async executeQRRefresh(attempt, context) {\n    logger.info('Executing QR refresh strategy', { attemptId: attempt.id });\n\n    // This would integrate with the QR manager to refresh QR codes\n    // For now, we'll simulate the process\n    const success = await this.attemptReconnection(attempt, { ...context, qrRefresh: true });\n\n    if (success) {\n      await this.handleReconnectionSuccess(attempt);\n    } else {\n      await this.handleReconnectionFailure(attempt, 'QR refresh failed');\n    }\n  }\n\n  /**\n   * Execute pairing code strategy\n   */\n  async executePairingCode(attempt, context) {\n    logger.info('Executing pairing code strategy', { attemptId: attempt.id });\n\n    // This would integrate with the pairing code manager\n    // For now, we'll simulate the process\n    const success = await this.attemptReconnection(attempt, { ...context, pairingCode: true });\n\n    if (success) {\n      await this.handleReconnectionSuccess(attempt);\n    } else {\n      await this.handleReconnectionFailure(attempt, 'Pairing code failed');\n    }\n  }\n\n  /**\n   * Execute device check strategy\n   */\n  async executeDeviceCheck(attempt, context) {\n    logger.info('Executing device check strategy', { attemptId: attempt.id });\n\n    // Wait for device to be available\n    const deviceAvailable = await this.waitForDevice(attempt);\n\n    if (deviceAvailable) {\n      const success = await this.attemptReconnection(attempt, context);\n      if (success) {\n        await this.handleReconnectionSuccess(attempt);\n        return;\n      }\n    }\n\n    await this.handleReconnectionFailure(attempt, 'Device not available');\n  }\n\n  /**\n   * Execute network wait strategy\n   */\n  async executeNetworkWait(attempt, context) {\n    logger.info('Executing network wait strategy', { attemptId: attempt.id });\n\n    // Wait for network to be stable\n    const networkStable = await this.waitForNetwork(attempt);\n\n    if (networkStable) {\n      const success = await this.attemptReconnection(attempt, context);\n      if (success) {\n        await this.handleReconnectionSuccess(attempt);\n        return;\n      }\n    }\n\n    await this.handleReconnectionFailure(attempt, 'Network not stable');\n  }\n\n  /**\n   * Attempt actual reconnection\n   */\n  async attemptReconnection(attempt, context) {\n    try {\n      // This would contain the actual reconnection logic\n      // For now, we'll simulate based on attempt number and context\n\n      const successProbability = this.calculateSuccessProbability(attempt, context);\n      const success = Math.random() < successProbability;\n\n      logger.info('Reconnection attempt result', {\n        attemptId: attempt.id,\n        success,\n        successProbability,\n        retryCount: attempt.retryCount,\n      });\n\n      return success;\n    } catch (error) {\n      logger.error('Reconnection attempt failed', {\n        attemptId: attempt.id,\n        error: error.message,\n      });\n      return false;\n    }\n  }\n\n  /**\n   * Calculate success probability based on conditions\n   */\n  calculateSuccessProbability(attempt, context) {\n    let probability = 0.5; // Base 50% success rate\n\n    // Adjust based on retry count (diminishing returns)\n    probability -= (attempt.retryCount - 1) * 0.1;\n\n    // Adjust based on strategy\n    const strategyMultipliers = {\n      immediate_retry: 0.8,\n      exponential_backoff: 0.9,\n      qr_refresh: 0.95,\n      pairing_code: 0.9,\n      device_check: 0.85,\n      network_wait: 0.75,\n    };\n\n    probability *= strategyMultipliers[attempt.strategy] || 0.8;\n\n    // Adjust based on context\n    if (context.networkQuality === 'good') probability += 0.1;\n    if (context.deviceStatus === 'online') probability += 0.1;\n    if (context.userActivity === 'active') probability += 0.05;\n\n    return Math.max(0.1, Math.min(0.95, probability));\n  }\n\n  /**\n   * Handle successful reconnection\n   */\n  async handleReconnectionSuccess(attempt) {\n    const reconnectionTime = Date.now() - attempt.startTime;\n\n    logger.info('Reconnection successful', {\n      attemptId: attempt.id,\n      reconnectionTime,\n      retryCount: attempt.retryCount,\n      strategy: attempt.strategy,\n    });\n\n    // Update connection state\n    this.connectionState.isConnected = true;\n    this.connectionState.lastConnected = Date.now();\n    this.connectionState.retryCount = 0;\n\n    // Update success rate\n    this.updateSuccessRate(true);\n\n    // Update average reconnection time\n    this.updateAverageReconnectionTime(reconnectionTime);\n\n    // Record successful strategy\n    await this.recordSuccessfulStrategy(attempt);\n\n    // Emit success event\n    this.emit('reconnection_success', {\n      attemptId: attempt.id,\n      reconnectionTime,\n      strategy: attempt.strategy,\n      retryCount: attempt.retryCount,\n    });\n\n    // Clean up attempt\n    this.activeAttempts.delete(attempt.id);\n  }\n\n  /**\n   * Handle reconnection failure\n   */\n  async handleReconnectionFailure(attempt, reason) {\n    logger.warn('Reconnection failed', {\n      attemptId: attempt.id,\n      reason,\n      totalRetries: attempt.retryCount,\n      strategy: attempt.strategy,\n    });\n\n    // Update success rate\n    this.updateSuccessRate(false);\n\n    // Record failed strategy\n    await this.recordFailedStrategy(attempt, reason);\n\n    // Emit failure event\n    this.emit('reconnection_failure', {\n      attemptId: attempt.id,\n      reason,\n      strategy: attempt.strategy,\n      retryCount: attempt.retryCount,\n    });\n\n    // Clean up attempt\n    this.activeAttempts.delete(attempt.id);\n  }\n\n  /**\n   * Try fallback strategy\n   */\n  async tryFallbackStrategy(attempt, context) {\n    const fallbackStrategies = {\n      immediate_retry: 'exponential_backoff',\n      exponential_backoff: 'qr_refresh',\n      qr_refresh: 'pairing_code',\n      pairing_code: 'device_check',\n      device_check: 'network_wait',\n      network_wait: 'manual_intervention',\n    };\n\n    const fallbackStrategy = fallbackStrategies[attempt.strategy];\n\n    if (fallbackStrategy && fallbackStrategy !== 'manual_intervention') {\n      logger.info('Trying fallback strategy', {\n        attemptId: attempt.id,\n        originalStrategy: attempt.strategy,\n        fallbackStrategy,\n      });\n\n      attempt.strategy = fallbackStrategy;\n      attempt.retryCount = 0;\n\n      await this.executeReconnectionStrategy(attempt, context);\n    } else {\n      // No more fallback strategies\n      await this.handleReconnectionFailure(attempt, 'No viable fallback strategy');\n    }\n  }\n\n  /**\n   * Record successful strategy for AI learning\n   */\n  async recordSuccessfulStrategy(attempt) {\n    const record = {\n      strategy: attempt.strategy,\n      reasonType: attempt.analysis.type,\n      reconnectionTime: Date.now() - attempt.startTime,\n      retryCount: attempt.retryCount,\n      timestamp: Date.now(),\n      conditions: {\n        networkQuality: 'unknown', // Would be determined\n        deviceStatus: 'unknown',\n        timeOfDay: this.getTimeOfDay(),\n      },\n    };\n\n    this.learningData.successfulStrategies.push(record);\n\n    // Keep only last 100 records\n    if (this.learningData.successfulStrategies.length > 100) {\n      this.learningData.successfulStrategies = this.learningData.successfulStrategies.slice(-100);\n    }\n\n    await this.saveLearningData();\n  }\n\n  /**\n   * Record failed strategy for AI learning\n   */\n  async recordFailedStrategy(attempt, error) {\n    const record = {\n      strategy: attempt.strategy,\n      reasonType: attempt.analysis.type,\n      error: error?.message || error,\n      retryCount: attempt.retryCount,\n      timestamp: Date.now(),\n    };\n\n    this.learningData.failedStrategies.push(record);\n\n    // Keep only last 50 records\n    if (this.learningData.failedStrategies.length > 50) {\n      this.learningData.failedStrategies = this.learningData.failedStrategies.slice(-50);\n    }\n\n    await this.saveLearningData();\n  }\n\n  /**\n   * Update success rate\n   */\n  updateSuccessRate(success) {\n    const totalAttempts = this.connectionState.totalRetries + 1;\n    const successfulAttempts = success\n      ? this.connectionState.successRate * this.connectionState.totalRetries + 1\n      : this.connectionState.successRate * this.connectionState.totalRetries;\n\n    this.connectionState.successRate = successfulAttempts / totalAttempts;\n    this.connectionState.totalRetries = totalAttempts;\n  }\n\n  /**\n   * Update average reconnection time\n   */\n  updateAverageReconnectionTime(time) {\n    const totalTimes =\n      this.connectionState.averageReconnectionTime * (this.connectionState.totalRetries - 1) + time;\n    this.connectionState.averageReconnectionTime = totalTimes / this.connectionState.totalRetries;\n  }\n\n  /**\n   * Get time of day\n   */\n  getTimeOfDay() {\n    const hour = new Date().getHours();\n    if (hour >= 6 && hour < 12) return 'morning';\n    if (hour >= 12 && hour < 18) return 'afternoon';\n    if (hour >= 18 && hour < 22) return 'evening';\n    return 'night';\n  }\n\n  /**\n   * Assess network quality\n   */\n  assessNetworkQuality(context) {\n    // This would be determined by actual network monitoring\n    return context.networkQuality || 'unknown';\n  }\n\n  /**\n   * Assess device status\n   */\n  assessDeviceStatus(context) {\n    // This would be determined by device monitoring\n    return context.deviceStatus || 'unknown';\n  }\n\n  /**\n   * Wait for device to be available\n   */\n  async waitForDevice(attempt) {\n    // Simulate waiting for device\n    const maxWait = 5 * 60 * 1000; // 5 minutes\n    const checkInterval = 10000; // 10 seconds\n\n    for (let waited = 0; waited < maxWait; waited += checkInterval) {\n      // In real implementation, this would check device connectivity\n      const deviceAvailable = Math.random() > 0.7; // Simulate 30% chance\n\n      if (deviceAvailable) {\n        return true;\n      }\n\n      await this.delay(checkInterval);\n    }\n\n    return false;\n  }\n\n  /**\n   * Wait for network to be stable\n   */\n  async waitForNetwork(attempt) {\n    // Simulate waiting for network\n    const maxWait = 2 * 60 * 1000; // 2 minutes\n    const checkInterval = 5000; // 5 seconds\n\n    for (let waited = 0; waited < maxWait; waited += checkInterval) {\n      // In real implementation, this would check network connectivity\n      const networkStable = Math.random() > 0.5; // Simulate 50% chance\n\n      if (networkStable) {\n        return true;\n      }\n\n      await this.delay(checkInterval);\n    }\n\n    return false;\n  }\n\n  /**\n   * Utility delay function\n   */\n  delay(ms) {\n    return new Promise(resolve => setTimeout(resolve, ms));\n  }\n\n  /**\n   * Get reconnection statistics\n   */\n  getStats() {\n    return {\n      connectionState: this.connectionState,\n      activeAttempts: this.activeAttempts.size,\n      learningData: {\n        successfulStrategies: this.learningData.successfulStrategies.length,\n        failedStrategies: this.learningData.failedStrategies.length,\n        networkPatterns: this.learningData.networkPatterns.size,\n        timePatterns: this.learningData.timePatterns.size,\n        devicePatterns: this.learningData.devicePatterns.size,\n      },\n    };\n  }\n\n  /**\n   * Shutdown and cleanup\n   */\n  async shutdown() {\n    logger.info('Shutting down Auto Reconnection Engine');\n\n    // Clear all timers\n    for (const timer of this.reconnectionTimers.values()) {\n      clearTimeout(timer);\n    }\n    this.reconnectionTimers.clear();\n\n    // Save learning data\n    await this.saveLearningData();\n\n    logger.info('Auto Reconnection Engine shutdown complete');\n  }\n}\n\nmodule.exports = AutoReconnectionEngine;\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\src\\services\\brain\\commandHandler.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":1,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":7}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"module.exports = async (nlpResult, ctx, bot, context) => {\n  bot.ev.emit('messages.upsert', {\n    ...ctx.msg,\n    content: `${context.config.bot.prefix}${nlpResult.command} ${nlpResult.args.join(' ')}`,\n  });\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\src\\services\\brain\\defaultHandler.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":20,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":27},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":3,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":3,"endColumn":7},{"ruleId":"no-unused-vars","severity":1,"message":"'context' is defined but never used. Allowed unused args must match /^_/u.","line":3,"column":46,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":53,"suggestions":[{"messageId":"removeVar","data":{"varName":"context"},"fix":{"range":[86,95],"text":""},"desc":"Remove unused variable 'context'."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const didYouMean = require('didyoumean');\n\nmodule.exports = async (nlpResult, ctx, bot, context) => {\n  const allCommands = [...bot.cmd.values()].flatMap(cmd => [cmd.name, ...(cmd.aliases || [])]);\n  const suggestedCommand = didYouMean(nlpResult.command, allCommands);\n\n  if (suggestedCommand) {\n    ctx.reply(`I'm sorry, I don't understand. Did you mean \"${suggestedCommand}\"?`);\n  } else {\n    ctx.reply(\n      \"I'm sorry, I don't understand. I am still learning. You can try asking me a question or using a command. To see the list of commands, type /help.\"\n    );\n  }\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\src\\services\\brain\\farewellHandler.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":1,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":7}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"module.exports = async (nlpResult, ctx, bot, context) => {\n  bot.ev.emit('messages.upsert', {\n    ...ctx.msg,\n    content: `${context.config.bot.prefix}goodbye`,\n  });\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\src\\services\\brain\\greetingHandler.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":1,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":7}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"module.exports = async (nlpResult, ctx, bot, context) => {\n  bot.ev.emit('messages.upsert', {\n    ...ctx.msg,\n    content: `${context.config.bot.prefix}hello`,\n  });\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\src\\services\\brain\\intentRouter.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":24,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":31},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":2,"column":25,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":32},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":3,"column":25,"nodeType":"Identifier","messageId":"undef","endLine":3,"endColumn":32},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":4,"column":25,"nodeType":"Identifier","messageId":"undef","endLine":4,"endColumn":32},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":5,"column":24,"nodeType":"Identifier","messageId":"undef","endLine":5,"endColumn":31},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":7,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":7,"endColumn":7}],"suppressedMessages":[],"errorCount":6,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const commandHandler = require('./commandHandler');\nconst greetingHandler = require('./greetingHandler');\nconst farewellHandler = require('./farewellHandler');\nconst questionHandler = require('./questionHandler');\nconst defaultHandler = require('./defaultHandler');\n\nmodule.exports = async (nlpResult, ctx, bot, context) => {\n  switch (nlpResult.intent) {\n    case 'command':\n      await commandHandler(nlpResult, ctx, bot, context);\n      break;\n    case 'greeting':\n      await greetingHandler(nlpResult, ctx, bot, context);\n      break;\n    case 'farewell':\n      await farewellHandler(nlpResult, ctx, bot, context);\n      break;\n    case 'question':\n      await questionHandler(nlpResult, ctx, bot, context);\n      break;\n    default:\n      await defaultHandler(nlpResult, ctx, bot, context);\n      break;\n  }\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\src\\services\\brain\\questionHandler.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":23,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":30},{"ruleId":"import-x/extensions","severity":2,"message":"Unexpected use of file extension \"js\" for \"../../../services/gemini.js\"","line":1,"column":31,"nodeType":"Literal","messageId":"unexpected","endLine":1,"endColumn":60,"suggestions":[{"fix":{"range":[30,59],"text":"'../../../services/gemini'"},"messageId":"removeUnexpected","data":{"extension":"js","importPath":"../../../services/gemini.js","fixedImportPath":"../../../services/gemini"},"desc":"Remove unexpected \"js\" file extension from \"../../../services/gemini.js\" into \"../../../services/gemini\""}]},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":2,"column":16,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":23},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":6,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":6,"endColumn":7},{"ruleId":"no-unused-vars","severity":1,"message":"'bot' is defined but never used. Allowed unused args must match /^_/u.","line":6,"column":41,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":44,"suggestions":[{"messageId":"removeVar","data":{"varName":"bot"},"fix":{"range":[184,189],"text":""},"desc":"Remove unused variable 'bot'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'context' is defined but never used. Allowed unused args must match /^_/u.","line":6,"column":46,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":53,"suggestions":[{"messageId":"removeVar","data":{"varName":"context"},"fix":{"range":[189,198],"text":""},"desc":"Remove unused variable 'context'."}]}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const GeminiService = require('../../../services/gemini.js');\nconst logger = require('../../utils/logger');\n\nconst gemini = new GeminiService();\n\nmodule.exports = async (nlpResult, ctx, bot, context) => {\n  try {\n    const response = await gemini.getChatCompletion(ctx.message);\n    ctx.reply(response);\n  } catch (error) {\n    logger.error('Error answering question with Gemini', { error });\n    ctx.reply('I apologize, but I encountered an error while trying to answer your question.');\n  }\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\src\\services\\cache.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":22},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":2,"column":16,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":23},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":14,"column":14,"nodeType":"Identifier","messageId":"undef","endLine":14,"endColumn":21},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":15,"column":19,"nodeType":"Identifier","messageId":"undef","endLine":15,"endColumn":26},{"ruleId":"class-methods-use-this","severity":2,"message":"Expected 'this' to be used by class method 'parseRedisInfo'.","line":294,"column":3,"nodeType":"FunctionExpression","messageId":"missingThis","endLine":294,"endColumn":17},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":344,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":344,"endColumn":7}],"suppressedMessages":[],"errorCount":6,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const redis = require('redis');\nconst logger = require('../utils/logger');\n\nclass CacheService {\n  constructor() {\n    this.client = null;\n    this.isConnected = false;\n    this.connect();\n  }\n\n  async connect() {\n    try {\n      this.client = redis.createClient({\n        url: process.env.REDIS_URL || 'redis://localhost:6379',\n        password: process.env.REDIS_PASSWORD,\n      });\n\n      this.client.on('error', err => {\n        logger.error('Redis connection error:', err);\n        this.isConnected = false;\n      });\n\n      this.client.on('connect', () => {\n        logger.info('Connected to Redis');\n        this.isConnected = true;\n      });\n\n      this.client.on('ready', () => {\n        this.isConnected = true;\n      });\n\n      this.client.on('end', () => {\n        this.isConnected = false;\n      });\n\n      await this.client.connect();\n    } catch (error) {\n      logger.error('Failed to connect to Redis:', error);\n      this.isConnected = false;\n    }\n  }\n\n  /**\n   * Get a value from cache\n   * @param {string} key - Cache key\n   * @returns {Promise<any>} Cached value or null\n   */\n  async get(key) {\n    if (!this.isConnected || !this.client) {\n      return null;\n    }\n\n    try {\n      const value = await this.client.get(key);\n      return value ? JSON.parse(value) : null;\n    } catch (error) {\n      logger.error('Cache get error:', error);\n      return null;\n    }\n  }\n\n  /**\n   * Set a value in cache\n   * @param {string} key - Cache key\n   * @param {any} value - Value to cache\n   * @param {number} ttlSeconds - Time to live in seconds (default: 3600)\n   * @returns {Promise<boolean>} Success status\n   */\n  async set(key, value, ttlSeconds = 3600) {\n    if (!this.isConnected || !this.client) {\n      return false;\n    }\n\n    try {\n      const serializedValue = JSON.stringify(value);\n      if (ttlSeconds > 0) {\n        await this.client.setEx(key, ttlSeconds, serializedValue);\n      } else {\n        await this.client.set(key, serializedValue);\n      }\n      return true;\n    } catch (error) {\n      logger.error('Cache set error:', error);\n      return false;\n    }\n  }\n\n  /**\n   * Delete a key from cache\n   * @param {string} key - Cache key\n   * @returns {Promise<boolean>} Success status\n   */\n  async delete(key) {\n    if (!this.isConnected || !this.client) {\n      return false;\n    }\n\n    try {\n      await this.client.del(key);\n      return true;\n    } catch (error) {\n      logger.error('Cache delete error:', error);\n      return false;\n    }\n  }\n\n  /**\n   * Check if key exists\n   * @param {string} key - Cache key\n   * @returns {Promise<boolean>} Whether key exists\n   */\n  async exists(key) {\n    if (!this.isConnected || !this.client) {\n      return false;\n    }\n\n    try {\n      const result = await this.client.exists(key);\n      return result === 1;\n    } catch (error) {\n      logger.error('Cache exists error:', error);\n      return false;\n    }\n  }\n\n  /**\n   * Set multiple keys at once\n   * @param {Object} keyValuePairs - Object with key-value pairs\n   * @param {number} ttlSeconds - Time to live in seconds\n   * @returns {Promise<boolean>} Success status\n   */\n  async mset(keyValuePairs, ttlSeconds = 3600) {\n    if (!this.isConnected || !this.client) {\n      return false;\n    }\n\n    try {\n      const pipeline = this.client.multi();\n      Object.entries(keyValuePairs).forEach(([key, value]) => {\n        const serializedValue = JSON.stringify(value);\n        if (ttlSeconds > 0) {\n          pipeline.setEx(key, ttlSeconds, serializedValue);\n        } else {\n          pipeline.set(key, serializedValue);\n        }\n      });\n      await pipeline.exec();\n      return true;\n    } catch (error) {\n      logger.error('Cache mset error:', error);\n      return false;\n    }\n  }\n\n  /**\n   * Get multiple keys at once\n   * @param {Array<string>} keys - Array of cache keys\n   * @returns {Promise<Object>} Object with key-value pairs\n   */\n  async mget(keys) {\n    if (!this.isConnected || !this.client) {\n      return {};\n    }\n\n    try {\n      const values = await this.client.mGet(keys);\n      const result = {};\n      keys.forEach((key, index) => {\n        if (values[index]) {\n          try {\n            result[key] = JSON.parse(values[index]);\n          } catch (parseError) {\n            logger.warn(`Failed to parse cached value for key ${key}:`, parseError);\n            result[key] = null;\n          }\n        } else {\n          result[key] = null;\n        }\n      });\n      return result;\n    } catch (error) {\n      logger.error('Cache mget error:', error);\n      return {};\n    }\n  }\n\n  /**\n   * Increment a numeric value\n   * @param {string} key - Cache key\n   * @param {number} amount - Amount to increment by (default: 1)\n   * @returns {Promise<number|null>} New value or null on error\n   */\n  async increment(key, amount = 1) {\n    if (!this.isConnected || !this.client) {\n      return null;\n    }\n\n    try {\n      return await this.client.incrBy(key, amount);\n    } catch (error) {\n      logger.error('Cache increment error:', error);\n      return null;\n    }\n  }\n\n  /**\n   * Set expiration time for a key\n   * @param {string} key - Cache key\n   * @param {number} ttlSeconds - Time to live in seconds\n   * @returns {Promise<boolean>} Success status\n   */\n  async expire(key, ttlSeconds) {\n    if (!this.isConnected || !this.client) {\n      return false;\n    }\n\n    try {\n      return await this.client.expire(key, ttlSeconds);\n    } catch (error) {\n      logger.error('Cache expire error:', error);\n      return false;\n    }\n  }\n\n  /**\n   * Get time to live for a key\n   * @param {string} key - Cache key\n   * @returns {Promise<number>} TTL in seconds (-2 if key doesn't exist, -1 if no expiration)\n   */\n  async ttl(key) {\n    if (!this.isConnected || !this.client) {\n      return -2;\n    }\n\n    try {\n      return await this.client.ttl(key);\n    } catch (error) {\n      logger.error('Cache ttl error:', error);\n      return -2;\n    }\n  }\n\n  /**\n   * Clear cache by pattern\n   * @param {string} pattern - Pattern to match (e.g., 'user:*')\n   * @returns {Promise<number>} Number of keys deleted\n   */\n  async invalidatePattern(pattern) {\n    if (!this.isConnected || !this.client) {\n      return 0;\n    }\n\n    try {\n      const keys = await this.client.keys(pattern);\n      if (keys.length > 0) {\n        return await this.client.del(keys);\n      }\n      return 0;\n    } catch (error) {\n      logger.error('Cache invalidate pattern error:', error);\n      return 0;\n    }\n  }\n\n  /**\n   * Get cache statistics\n   * @returns {Promise<Object>} Cache statistics\n   */\n  async getStats() {\n    if (!this.isConnected || !this.client) {\n      return { connected: false };\n    }\n\n    try {\n      const info = await this.client.info();\n      const dbSize = await this.client.dbSize();\n\n      return {\n        connected: true,\n        dbSize,\n        info: this.parseRedisInfo(info),\n      };\n    } catch (error) {\n      logger.error('Cache stats error:', error);\n      return { connected: false, error: error.message };\n    }\n  }\n\n  /**\n   * Parse Redis INFO command output\n   * @param {string} info - Raw Redis info\n   * @returns {Object} Parsed info object\n   */\n  parseRedisInfo(info) {\n    const lines = info.split('\\n');\n    const parsed = {};\n\n    lines.forEach(line => {\n      if (line.includes(':')) {\n        const [key, value] = line.split(':');\n        parsed[key] = value;\n      }\n    });\n\n    return parsed;\n  }\n\n  /**\n   * Health check\n   * @returns {Promise<Object>} Health status\n   */\n  async healthCheck() {\n    try {\n      if (!this.isConnected || !this.client) {\n        return { status: 'disconnected' };\n      }\n\n      await this.client.ping();\n      const stats = await this.getStats();\n\n      return {\n        status: 'healthy',\n        ...stats,\n      };\n    } catch (error) {\n      return {\n        status: 'unhealthy',\n        error: error.message,\n      };\n    }\n  }\n\n  /**\n   * Close connection\n   */\n  async close() {\n    if (this.client) {\n      await this.client.quit();\n      this.isConnected = false;\n    }\n  }\n}\n\nmodule.exports = CacheService;\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\src\\services\\commandRegistry.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":16,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":23},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":11,"column":34,"nodeType":"Identifier","messageId":"undef","endLine":11,"endColumn":41},{"ruleId":"no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":13,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":13,"endColumn":19},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":19,"column":28,"nodeType":"Identifier","messageId":"undef","endLine":19,"endColumn":35},{"ruleId":"no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":21,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":21,"endColumn":19},{"ruleId":"class-methods-use-this","severity":2,"message":"Expected 'this' to be used by class method 'timeout'.","line":153,"column":3,"nodeType":"FunctionExpression","messageId":"missingThis","endLine":153,"endColumn":10},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":180,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":180,"endColumn":7}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const logger = require('../utils/logger');\n\nclass CommandRegistry {\n  constructor() {\n    this.commands = new Map();\n    this.rateLimiter = null;\n    this.cache = null;\n\n    // Initialize rate limiter if available\n    try {\n      const RateLimiterService = require('./rateLimiter');\n      this.rateLimiter = new RateLimiterService();\n    } catch (error) {\n      logger.warn('Rate limiter not available, proceeding without rate limiting');\n    }\n\n    // Initialize cache if available\n    try {\n      const CacheService = require('./cache');\n      this.cache = new CacheService();\n    } catch (error) {\n      logger.warn('Cache service not available, proceeding without caching');\n    }\n  }\n\n  /**\n   * Register a new command\n   * @param {Object} command - Command definition\n   */\n  register(command) {\n    if (!command.name || !command.execute) {\n      throw new Error('Command must have name and execute function');\n    }\n\n    this.commands.set(command.name, {\n      name: command.name,\n      category: command.category || 'misc',\n      description: command.description || '',\n      usage: command.usage || '',\n      rateLimit: command.rateLimit || { maxCalls: 10, windowMs: 60000 },\n      permissions: command.permissions || [],\n      execute: command.execute,\n    });\n\n    logger.info(`Registered command: ${command.name}`);\n  }\n\n  /**\n   * Execute a command with rate limiting and caching\n   * @param {string} commandName - Name of the command\n   * @param {Object} context - Command execution context\n   * @returns {Promise<Object>} Command result\n   */\n  async execute(commandName, context) {\n    const command = this.commands.get(commandName);\n    if (!command) {\n      throw new Error(`Command not found: ${commandName}`);\n    }\n\n    // Rate limiting check\n    if (this.rateLimiter && command.rateLimit) {\n      const allowed = await this.rateLimiter.check(\n        `${context.userId}:${commandName}`,\n        command.rateLimit\n      );\n      if (!allowed) {\n        throw new Error('Rate limit exceeded. Please try again later.');\n      }\n    }\n\n    // Execute with timeout\n    try {\n      const result = await Promise.race([\n        command.execute(context),\n        this.timeout(30000, `Command ${commandName} timeout`),\n      ]);\n\n      return {\n        success: true,\n        command: commandName,\n        result,\n        timestamp: new Date().toISOString(),\n      };\n    } catch (error) {\n      logger.error(`Command execution failed: ${commandName}`, {\n        error: error.message,\n        userId: context.userId,\n      });\n\n      return {\n        success: false,\n        command: commandName,\n        error: error.message,\n        timestamp: new Date().toISOString(),\n      };\n    }\n  }\n\n  /**\n   * Get all registered commands\n   * @returns {Array} Array of command definitions\n   */\n  getAllCommands() {\n    return Array.from(this.commands.values());\n  }\n\n  /**\n   * Get commands by category\n   * @param {string} category - Category to filter by\n   * @returns {Array} Array of commands in the category\n   */\n  getCommandsByCategory(category) {\n    return Array.from(this.commands.values()).filter(cmd => cmd.category === category);\n  }\n\n  /**\n   * Check if a command exists\n   * @param {string} commandName - Name of the command\n   * @returns {boolean} Whether the command exists\n   */\n  hasCommand(commandName) {\n    return this.commands.has(commandName);\n  }\n\n  /**\n   * Get command definition\n   * @param {string} commandName - Name of the command\n   * @returns {Object|null} Command definition or null if not found\n   */\n  getCommand(commandName) {\n    return this.commands.get(commandName) || null;\n  }\n\n  /**\n   * Remove a command\n   * @param {string} commandName - Name of the command to remove\n   * @returns {boolean} Whether the command was removed\n   */\n  removeCommand(commandName) {\n    const removed = this.commands.delete(commandName);\n    if (removed) {\n      logger.info(`Removed command: ${commandName}`);\n    }\n    return removed;\n  }\n\n  /**\n   * Utility function for timeout\n   * @param {number} ms - Milliseconds to wait\n   * @param {string} message - Timeout message\n   * @returns {Promise} Promise that rejects after timeout\n   */\n  timeout(ms, message) {\n    return new Promise((_, reject) => {\n      setTimeout(() => reject(new Error(message)), ms);\n    });\n  }\n\n  /**\n   * Get registry statistics\n   * @returns {Object} Statistics about the registry\n   */\n  getStats() {\n    const commands = Array.from(this.commands.values());\n    const categories = {};\n\n    commands.forEach(cmd => {\n      categories[cmd.category] = (categories[cmd.category] || 0) + 1;\n    });\n\n    return {\n      totalCommands: commands.length,\n      categories,\n      rateLimiterEnabled: !!this.rateLimiter,\n      cacheEnabled: !!this.cache,\n    };\n  }\n}\n\nmodule.exports = CommandRegistry;\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\src\\services\\commandSuggestions.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":23,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":30},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":2,"column":16,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":23},{"ruleId":"no-restricted-syntax","severity":2,"message":"iterators/generators require regenerator-runtime, which is too heavyweight for this guide to allow them. Separately, loops should be avoided in favor of array iterations.","line":189,"column":5,"nodeType":"ForOfStatement","messageId":"restrictedSyntax","endLine":227,"endColumn":6},{"ruleId":"no-continue","severity":2,"message":"Unexpected use of continue statement.","line":190,"column":56,"nodeType":"ContinueStatement","messageId":"unexpected","endLine":190,"endColumn":65},{"ruleId":"class-methods-use-this","severity":2,"message":"Expected 'this' to be used by class method 'extractKeywords'.","line":238,"column":3,"nodeType":"FunctionExpression","messageId":"missingThis","endLine":238,"endColumn":18},{"ruleId":"class-methods-use-this","severity":2,"message":"Expected 'this' to be used by class method 'fallbackSuggestions'.","line":277,"column":3,"nodeType":"FunctionExpression","messageId":"missingThis","endLine":277,"endColumn":22},{"ruleId":"class-methods-use-this","severity":2,"message":"Expected 'this' to be used by class async method 'getUserCommandHistory'.","line":350,"column":3,"nodeType":"FunctionExpression","messageId":"missingThis","endLine":350,"endColumn":30},{"ruleId":"class-methods-use-this","severity":2,"message":"Expected 'this' to be used by class async method 'learnFromInteraction'.","line":369,"column":3,"nodeType":"FunctionExpression","messageId":"missingThis","endLine":369,"endColumn":29},{"ruleId":"class-methods-use-this","severity":2,"message":"Expected 'this' to be used by class method 'getPopularCommands'.","line":392,"column":3,"nodeType":"FunctionExpression","messageId":"missingThis","endLine":392,"endColumn":21},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":453,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":453,"endColumn":7}],"suppressedMessages":[],"errorCount":10,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const GeminiService = require('../../services/gemini');\nconst logger = require('../utils/logger');\n\nclass CommandSuggestionsService {\n  constructor() {\n    this.gemini = new GeminiService();\n    this.commandCategories = {\n      ai: ['gemini', 'chatgpt', 'deepseek', 'felo', 'hika', 'venice'],\n      image: ['dalle', 'flux', 'animagine', 'deepdreams', 'text2image'],\n      video: ['videogpt'],\n      misc: [\n        'editimage',\n        'geminicanvas',\n        'geminiedit',\n        'image2prompt',\n        'removewm',\n        'upscale',\n        'youtubesummarizer',\n      ],\n      converter: ['sticker', 'stickerwm', 'toaudio', 'togif', 'toimage', 'tovid', 'tovn'],\n      downloader: [\n        'youtubevideo',\n        'youtubeaudio',\n        'instagramdl',\n        'facebookdl',\n        'tiktokdl',\n        'twitterdl',\n        'spotifydl',\n        'soundclouddl',\n      ],\n      entertainment: ['meme', 'joke', 'quotes', 'cecan', 'waifu', 'animeinfo', 'mangainfo'],\n      game: ['tebakgambar', 'tebaklagu', 'family100', 'suit', 'kuis'],\n      group: ['add', 'kick', 'promote', 'demote', 'tagall', 'hidetag'],\n      information: ['ping', 'about', 'server', 'uptime', 'speedtest'],\n      profile: ['profile', 'coin', 'leaderboard', 'claim'],\n      search: ['googlesearch', 'youtubesearch', 'githubsearch', 'npmsearch'],\n      tool: ['weather', 'translate', 'ocr', 'fetch', 'screenshot'],\n    };\n\n    this.commandDescriptions = {\n      // AI commands\n      gemini: 'Chat with Google Gemini AI assistant',\n      chatgpt: 'Chat with OpenAI GPT models',\n      dalle: 'Generate images using DALL-E',\n\n      // Media commands\n      sticker: 'Convert images to WhatsApp stickers',\n      youtubevideo: 'Download videos from YouTube',\n      instagramdl: 'Download content from Instagram',\n\n      // Entertainment\n      meme: 'Get random memes',\n      joke: 'Get random jokes',\n      weather: 'Get weather information',\n\n      // Utilities\n      translate: 'Translate text between languages',\n      ping: 'Check bot response time',\n      profile: 'View your profile information',\n    };\n  }\n\n  /**\n   * Analyze user input and suggest relevant commands\n   * @param {string} userInput - The user's message\n   * @param {Array} recentCommands - Recently used commands by the user\n   * @returns {Promise<Array>} Array of suggested commands with confidence scores\n   */\n  async suggestCommands(userInput, recentCommands = []) {\n    if (!userInput || userInput.trim().length < 2) {\n      return [];\n    }\n\n    try {\n      logger.debug('Analyzing user input for command suggestions', {\n        inputLength: userInput.length,\n        recentCommandsCount: recentCommands.length,\n      });\n\n      // Create context for AI analysis\n      const context = this.buildAnalysisContext(userInput, recentCommands);\n\n      // Get suggestions from Gemini\n      const suggestions = await this.analyzeWithGemini(context);\n\n      // Filter and rank suggestions\n      const rankedSuggestions = await this.rankSuggestions(suggestions, userInput, recentCommands);\n\n      logger.debug('Generated command suggestions', {\n        input: userInput.substring(0, 50),\n        suggestionsCount: rankedSuggestions.length,\n      });\n\n      return rankedSuggestions.slice(0, 5); // Return top 5 suggestions\n    } catch (error) {\n      logger.error('Error generating command suggestions', {\n        error: error.message,\n        userInput: userInput.substring(0, 100),\n      });\n\n      // Fallback to basic keyword matching\n      return this.fallbackSuggestions(userInput);\n    }\n  }\n\n  /**\n   * Build context for AI analysis\n   * @param {string} userInput - User's message\n   * @param {Array} recentCommands - Recent command usage\n   * @returns {string} Analysis context\n   */\n  buildAnalysisContext(userInput, recentCommands) {\n    const recentCmds = recentCommands.slice(-3).join(', ');\n    const availableCategories = Object.keys(this.commandCategories).join(', ');\n\n    return `Analyze this user message and suggest the most relevant WhatsApp bot commands.\n\nUser Message: \"${userInput}\"\n\nRecent Commands Used: ${recentCmds || 'none'}\n\nAvailable Command Categories: ${availableCategories}\n\nFor each category, consider:\n- AI/Chat: For questions, conversations, analysis\n- Image: For image generation, editing, conversion\n- Video: For video processing and generation\n- Converter: For file format conversions\n- Downloader: For downloading content from platforms\n- Entertainment: For fun content, memes, jokes\n- Game: For games and quizzes\n- Group: For group management\n- Information: For bot info and system status\n- Profile: For user profile and statistics\n- Search: For web and platform searches\n- Tool: For utilities like weather, translation\n\nReturn a JSON array of suggested commands with confidence scores (0-1):\n[{\"command\": \"command_name\", \"category\": \"category_name\", \"confidence\": 0.85, \"reason\": \"brief reason\"}]`;\n  }\n\n  /**\n   * Analyze user input with Gemini AI\n   * @param {string} context - Analysis context\n   * @returns {Promise<Array>} AI-generated suggestions\n   */\n  async analyzeWithGemini(context) {\n    try {\n      const prompt = `${context}\n\nRespond with ONLY a valid JSON array. No additional text or formatting.`;\n\n      const response = await this.gemini.getChatCompletion(prompt);\n\n      // Clean the response to ensure it's valid JSON\n      const cleanedResponse = response\n        .trim()\n        .replace(/^```json\\s*/, '')\n        .replace(/\\s*```$/, '');\n\n      const suggestions = JSON.parse(cleanedResponse);\n\n      if (!Array.isArray(suggestions)) {\n        throw new Error('Invalid response format from Gemini');\n      }\n\n      return suggestions;\n    } catch (error) {\n      logger.warn('Failed to parse Gemini suggestions response', {\n        error: error.message,\n        response: error.response?.data || 'No response data',\n      });\n\n      // Return empty array on parsing error\n      return [];\n    }\n  }\n\n  /**\n   * Rank and filter suggestions based on various factors\n   * @param {Array} suggestions - Raw AI suggestions\n   * @param {string} userInput - Original user input\n   * @param {Array} recentCommands - Recent command usage\n   * @returns {Promise<Array>} Ranked suggestions\n   */\n  async rankSuggestions(suggestions, userInput, recentCommands) {\n    const ranked = [];\n\n    for (const suggestion of suggestions) {\n      if (!suggestion.command || !suggestion.category) continue;\n\n      let score = suggestion.confidence || 0.5;\n\n      // Boost score for recently used commands\n      if (recentCommands.includes(suggestion.command)) {\n        score += 0.2;\n      }\n\n      // Boost score for keyword matches in user input\n      const keywords = this.extractKeywords(userInput);\n      const commandDesc = this.commandDescriptions[suggestion.command] || '';\n      const keywordMatches = keywords.filter(\n        keyword =>\n          commandDesc.toLowerCase().includes(keyword.toLowerCase()) ||\n          suggestion.command.toLowerCase().includes(keyword.toLowerCase())\n      ).length;\n\n      score += keywordMatches * 0.1;\n\n      // Boost score for category relevance\n      const categoryCommands = this.commandCategories[suggestion.category] || [];\n      if (categoryCommands.includes(suggestion.command)) {\n        score += 0.1;\n      }\n\n      // Ensure score doesn't exceed 1.0\n      score = Math.min(score, 1.0);\n\n      ranked.push({\n        command: suggestion.command,\n        category: suggestion.category,\n        confidence: score,\n        reason: suggestion.reason || 'AI suggested',\n        description:\n          this.commandDescriptions[suggestion.command] || `${suggestion.command} command`,\n      });\n    }\n\n    // Sort by confidence score (highest first)\n    return ranked.sort((a, b) => b.confidence - a.confidence);\n  }\n\n  /**\n   * Extract keywords from user input\n   * @param {string} input - User input text\n   * @returns {Array} Array of keywords\n   */\n  extractKeywords(input) {\n    const keywords = [];\n\n    // Common action words\n    const actions = [\n      'download',\n      'convert',\n      'generate',\n      'create',\n      'get',\n      'find',\n      'search',\n      'play',\n      'show',\n      'tell',\n    ];\n    const media = ['video', 'image', 'photo', 'music', 'song', 'sticker', 'gif', 'audio'];\n    const platforms = ['youtube', 'instagram', 'facebook', 'tiktok', 'twitter', 'spotify'];\n\n    const words = input.toLowerCase().split(/\\s+/);\n\n    keywords.push(\n      ...words.filter(\n        word =>\n          actions.includes(word) ||\n          media.includes(word) ||\n          platforms.includes(word) ||\n          word.length > 3 // Longer words are likely more specific\n      )\n    );\n\n    return [...new Set(keywords)]; // Remove duplicates\n  }\n\n  /**\n   * Fallback suggestions using basic keyword matching\n   * @param {string} userInput - User input\n   * @returns {Array} Basic suggestions\n   */\n  fallbackSuggestions(userInput) {\n    const input = userInput.toLowerCase();\n    const suggestions = [];\n\n    // Basic keyword matching\n    if (input.includes('weather') || input.includes('temperature')) {\n      suggestions.push({\n        command: 'weather',\n        category: 'tool',\n        confidence: 0.8,\n        reason: 'Weather-related keywords detected',\n        description: 'Get weather information',\n      });\n    }\n\n    if (input.includes('translate') || input.includes('translation')) {\n      suggestions.push({\n        command: 'translate',\n        category: 'tool',\n        confidence: 0.8,\n        reason: 'Translation keywords detected',\n        description: 'Translate text between languages',\n      });\n    }\n\n    if (input.includes('image') || input.includes('picture') || input.includes('photo')) {\n      suggestions.push({\n        command: 'dalle',\n        category: 'image',\n        confidence: 0.7,\n        reason: 'Image-related keywords detected',\n        description: 'Generate images using DALL-E',\n      });\n    }\n\n    if (input.includes('video') || input.includes('youtube')) {\n      suggestions.push({\n        command: 'youtubevideo',\n        category: 'downloader',\n        confidence: 0.7,\n        reason: 'Video/YouTube keywords detected',\n        description: 'Download videos from YouTube',\n      });\n    }\n\n    if (input.includes('sticker') || input.includes('emoji')) {\n      suggestions.push({\n        command: 'sticker',\n        category: 'converter',\n        confidence: 0.7,\n        reason: 'Sticker-related keywords detected',\n        description: 'Convert images to WhatsApp stickers',\n      });\n    }\n\n    if (input.includes('joke') || input.includes('funny')) {\n      suggestions.push({\n        command: 'joke',\n        category: 'entertainment',\n        confidence: 0.6,\n        reason: 'Humor-related keywords detected',\n        description: 'Get random jokes',\n      });\n    }\n\n    return suggestions;\n  }\n\n  /**\n   * Get command usage statistics for personalization\n   * @param {string} userId - User ID\n   * @returns {Promise<Array>} Recent command usage\n   */\n  async getUserCommandHistory(userId) {\n    try {\n      // This would integrate with your database service\n      // For now, return a mock implementation\n      const mockHistory = ['ping', 'weather', 'gemini'];\n      logger.debug('Retrieved user command history', { userId, historyCount: mockHistory.length });\n      return mockHistory;\n    } catch (error) {\n      logger.error('Error retrieving user command history', { userId, error: error.message });\n      return [];\n    }\n  }\n\n  /**\n   * Learn from user interactions to improve suggestions\n   * @param {string} userId - User ID\n   * @param {string} selectedCommand - Command the user actually used\n   * @param {string} originalInput - Original user input\n   */\n  async learnFromInteraction(userId, selectedCommand, originalInput) {\n    try {\n      logger.debug('Learning from user interaction', {\n        userId,\n        selectedCommand,\n        inputLength: originalInput.length,\n      });\n\n      // This would store learning data for future improvements\n      // Could be used to fine-tune the AI suggestions over time\n    } catch (error) {\n      logger.error('Error learning from user interaction', {\n        userId,\n        selectedCommand,\n        error: error.message,\n      });\n    }\n  }\n\n  /**\n   * Get popular commands for general suggestions\n   * @returns {Array} Popular command suggestions\n   */\n  getPopularCommands() {\n    return [\n      {\n        command: 'gemini',\n        category: 'ai-chat',\n        confidence: 0.9,\n        reason: 'Most popular AI chat command',\n        description: 'Chat with Google Gemini AI assistant',\n      },\n      {\n        command: 'ping',\n        category: 'information',\n        confidence: 0.8,\n        reason: 'Frequently used status check',\n        description: 'Check bot response time',\n      },\n      {\n        command: 'weather',\n        category: 'tool',\n        confidence: 0.7,\n        reason: 'Popular utility command',\n        description: 'Get weather information',\n      },\n      {\n        command: 'sticker',\n        category: 'converter',\n        confidence: 0.6,\n        reason: 'Popular media conversion',\n        description: 'Convert images to WhatsApp stickers',\n      },\n    ];\n  }\n\n  /**\n   * Health check for the suggestions service\n   * @returns {Promise<Object>} Health status\n   */\n  async healthCheck() {\n    try {\n      const testInput = 'hello world';\n      const suggestions = await this.suggestCommands(testInput);\n\n      return {\n        status: 'healthy',\n        service: 'command-suggestions',\n        testInput,\n        suggestionsCount: suggestions.length,\n        timestamp: new Date().toISOString(),\n      };\n    } catch (error) {\n      logger.error('Command suggestions health check failed', { error: error.message });\n      return {\n        status: 'unhealthy',\n        service: 'command-suggestions',\n        error: error.message,\n        timestamp: new Date().toISOString(),\n      };\n    }\n  }\n}\n\nmodule.exports = CommandSuggestionsService;\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\src\\services\\contentModeration.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":23,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":30},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":2,"column":16,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":23},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":7,"column":30,"nodeType":"Identifier","messageId":"undef","endLine":7,"endColumn":37},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":8,"column":23,"nodeType":"Identifier","messageId":"undef","endLine":8,"endColumn":30},{"ruleId":"class-methods-use-this","severity":2,"message":"Expected 'this' to be used by class method 'performPatternChecks'.","line":131,"column":3,"nodeType":"FunctionExpression","messageId":"missingThis","endLine":131,"endColumn":23},{"ruleId":"class-methods-use-this","severity":2,"message":"Expected 'this' to be used by class async method 'adjustForGroupContext'.","line":205,"column":3,"nodeType":"FunctionExpression","messageId":"missingThis","endLine":205,"endColumn":30},{"ruleId":"no-unused-vars","severity":1,"message":"'context' is defined but never used. Allowed unused args must match /^_/u.","line":205,"column":38,"nodeType":"Identifier","messageId":"unusedVar","endLine":205,"endColumn":45,"suggestions":[{"messageId":"removeVar","data":{"varName":"context"},"fix":{"range":[5882,5891],"text":""},"desc":"Remove unused variable 'context'."}]},{"ruleId":"class-methods-use-this","severity":2,"message":"Expected 'this' to be used by class async method 'adjustForUserHistory'.","line":217,"column":3,"nodeType":"FunctionExpression","messageId":"missingThis","endLine":217,"endColumn":29},{"ruleId":"no-unused-vars","severity":1,"message":"'userId' is defined but never used. Allowed unused args must match /^_/u.","line":217,"column":37,"nodeType":"Identifier","messageId":"unusedVar","endLine":217,"endColumn":43,"suggestions":[{"messageId":"removeVar","data":{"varName":"userId"},"fix":{"range":[6261,6269],"text":""},"desc":"Remove unused variable 'userId'."}]},{"ruleId":"class-methods-use-this","severity":2,"message":"Expected 'this' to be used by class async method 'getStatistics'.","line":246,"column":3,"nodeType":"FunctionExpression","messageId":"missingThis","endLine":246,"endColumn":22},{"ruleId":"no-restricted-syntax","severity":2,"message":"iterators/generators require regenerator-runtime, which is too heavyweight for this guide to allow them. Separately, loops should be avoided in favor of array iterations.","line":270,"column":5,"nodeType":"ForOfStatement","messageId":"restrictedSyntax","endLine":276,"endColumn":6},{"ruleId":"no-await-in-loop","severity":2,"message":"Unexpected `await` inside a loop.","line":271,"column":22,"nodeType":"AwaitExpression","messageId":"unexpectedAwait","endLine":271,"endColumn":76},{"ruleId":"class-methods-use-this","severity":2,"message":"Expected 'this' to be used by class async method 'reportFeedback'.","line":288,"column":3,"nodeType":"FunctionExpression","messageId":"missingThis","endLine":288,"endColumn":23},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":358,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":358,"endColumn":7}],"suppressedMessages":[],"errorCount":12,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const GeminiService = require('../../services/gemini');\nconst logger = require('../utils/logger');\n\nclass ContentModerationService {\n  constructor() {\n    this.gemini = new GeminiService();\n    this.moderationEnabled = process.env.CONTENT_MODERATION_ENABLED === 'true';\n    this.strictMode = process.env.MODERATION_STRICT_MODE === 'true';\n\n    // Moderation thresholds\n    this.thresholds = {\n      hate: 0.8,\n      violence: 0.7,\n      adult: 0.6,\n      spam: 0.5,\n      harassment: 0.7,\n    };\n\n    // Content categories to monitor\n    this.categories = [\n      'hate_speech',\n      'violence',\n      'adult_content',\n      'spam',\n      'harassment',\n      'bullying',\n      'discrimination',\n      'self_harm',\n      'illegal_activities',\n    ];\n\n    logger.info('Content moderation service initialized', {\n      enabled: this.moderationEnabled,\n      strictMode: this.strictMode,\n    });\n  }\n\n  /**\n   * Moderate content using AI\n   * @param {string} content - Content to moderate\n   * @param {Object} context - Additional context (userId, groupId, etc.)\n   * @returns {Promise<Object>} Moderation result\n   */\n  async moderateContent(content, context = {}) {\n    if (!this.moderationEnabled || !content) {\n      return { safe: true, score: 0, categories: [] };\n    }\n\n    try {\n      logger.debug('Moderating content', {\n        contentLength: content.length,\n        userId: context.userId,\n        groupId: context.groupId,\n      });\n\n      const moderationResult = await this.gemini.moderateContent(content);\n\n      // Enhance result with additional checks\n      const enhancedResult = await this.enhanceModeration(content, moderationResult, context);\n\n      // Log moderation results\n      if (!enhancedResult.safe) {\n        logger.warn('Content flagged by moderation', {\n          userId: context.userId,\n          groupId: context.groupId,\n          categories: enhancedResult.categories,\n          score: enhancedResult.score,\n          contentPreview: content.substring(0, 100),\n        });\n      }\n\n      return enhancedResult;\n    } catch (error) {\n      logger.error('Content moderation failed', {\n        error: error.message,\n        contentLength: content.length,\n        userId: context.userId,\n      });\n\n      // Default to safe if moderation fails\n      return {\n        safe: true,\n        score: 0,\n        categories: [],\n        reason: 'Moderation service unavailable',\n        fallback: true,\n      };\n    }\n  }\n\n  /**\n   * Enhance moderation with additional checks\n   * @param {string} content - Original content\n   * @param {Object} aiResult - AI moderation result\n   * @param {Object} context - Context information\n   * @returns {Promise<Object>} Enhanced moderation result\n   */\n  async enhanceModeration(content, aiResult, context) {\n    const enhanced = { ...aiResult };\n\n    // Additional pattern-based checks\n    const patternChecks = this.performPatternChecks(content);\n\n    // Combine AI and pattern results\n    enhanced.categories = [\n      ...new Set([...(enhanced.categories || []), ...patternChecks.categories]),\n    ];\n    enhanced.score = Math.max(enhanced.score || 0, patternChecks.score);\n\n    // Context-based adjustments\n    if (context.groupId) {\n      enhanced.score = await this.adjustForGroupContext(enhanced.score, context);\n    }\n\n    // User history consideration\n    if (context.userId) {\n      enhanced.score = await this.adjustForUserHistory(enhanced.score, context.userId);\n    }\n\n    // Determine final safety status\n    enhanced.safe = this.determineSafety(enhanced.score, enhanced.categories);\n\n    return enhanced;\n  }\n\n  /**\n   * Perform pattern-based content checks\n   * @param {string} content - Content to check\n   * @returns {Object} Pattern check results\n   */\n  performPatternChecks(content) {\n    const lowerContent = content.toLowerCase();\n    const categories = [];\n    let score = 0;\n\n    // Hate speech patterns\n    const hatePatterns = [\n      /\\b(nigger|nigga)\\b/i,\n      /\\b(faggot|fag)\\b/i,\n      /\\b(kike|heeb)\\b/i,\n      /\\b(chink|gook)\\b/i,\n      /\\b(spic|wetback)\\b/i,\n      /\\b(raghead|towelhead)\\b/i,\n    ];\n\n    // Violence patterns\n    const violencePatterns = [\n      /\\b(kill|murder|assassinate)\\b.*\\b(you|him|her|them)\\b/i,\n      /\\b(bomb|explode|detonate)\\b/i,\n      /\\b(shoot|stab|beat|rape)\\b.*\\b(you|him|her|them)\\b/i,\n    ];\n\n    // Spam patterns\n    const spamPatterns = [\n      /(\\+?\\d{1,3}[-.\\s]?)?\\(?(\\d{3})\\)?[-.\\s]?(\\d{3})[-.\\s]?(\\d{4})/g, // Phone numbers\n      /\\b(?:https?:\\/\\/)?(?:www\\.)?[a-z0-9-]+\\.[a-z]{2,}(?:\\/\\S*)?/gi, // URLs\n      /\\b[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,}\\b/gi, // Emails\n    ];\n\n    // Check hate speech\n    if (hatePatterns.some(pattern => pattern.test(lowerContent))) {\n      categories.push('hate_speech');\n      score = Math.max(score, 0.9);\n    }\n\n    // Check violence\n    if (violencePatterns.some(pattern => pattern.test(lowerContent))) {\n      categories.push('violence');\n      score = Math.max(score, 0.8);\n    }\n\n    // Check spam\n    const spamMatches = spamPatterns.reduce(\n      (count, pattern) => count + (lowerContent.match(pattern) || []).length,\n      0\n    );\n\n    if (spamMatches > 2) {\n      categories.push('spam');\n      score = Math.max(score, 0.6);\n    }\n\n    // Check for excessive caps\n    const capsRatio = (content.match(/[A-Z]/g) || []).length / content.length;\n    if (capsRatio > 0.7 && content.length > 10) {\n      categories.push('spam');\n      score = Math.max(score, 0.4);\n    }\n\n    // Check for repeated characters\n    if (/(.)\\1{4,}/.test(content)) {\n      categories.push('spam');\n      score = Math.max(score, 0.3);\n    }\n\n    return { categories, score };\n  }\n\n  /**\n   * Adjust moderation score based on group context\n   * @param {number} score - Current moderation score\n   * @param {Object} context - Group context\n   * @returns {Promise<number>} Adjusted score\n   */\n  async adjustForGroupContext(score, context) {\n    // This would check group settings for moderation strictness\n    // For now, return the original score\n    return score;\n  }\n\n  /**\n   * Adjust moderation score based on user history\n   * @param {number} score - Current moderation score\n   * @param {string} userId - User ID\n   * @returns {Promise<number>} Adjusted score\n   */\n  async adjustForUserHistory(score, userId) {\n    // This would check user's moderation history\n    // For now, return the original score\n    return score;\n  }\n\n  /**\n   * Determine if content is safe based on score and categories\n   * @param {number} score - Moderation score\n   * @param {Array} categories - Flagged categories\n   * @returns {boolean} Whether content is safe\n   */\n  determineSafety(score, categories) {\n    // Always block certain categories regardless of score\n    const alwaysBlock = ['hate_speech', 'violence', 'self_harm', 'illegal_activities'];\n\n    if (categories.some(cat => alwaysBlock.includes(cat))) {\n      return false;\n    }\n\n    // Use thresholds for other categories\n    const threshold = this.strictMode ? 0.3 : 0.5;\n    return score < threshold;\n  }\n\n  /**\n   * Get moderation statistics\n   * @returns {Promise<Object>} Moderation statistics\n   */\n  async getStatistics() {\n    try {\n      // This would return actual statistics from the database\n      return {\n        totalModerated: 0,\n        blockedContent: 0,\n        categoriesBreakdown: {},\n        averageScore: 0,\n        lastUpdated: new Date().toISOString(),\n      };\n    } catch (error) {\n      logger.error('Failed to get moderation statistics', { error: error.message });\n      return null;\n    }\n  }\n\n  /**\n   * Moderate content in bulk\n   * @param {Array} contentArray - Array of content objects\n   * @returns {Promise<Array>} Array of moderation results\n   */\n  async moderateBulk(contentArray) {\n    const results = [];\n\n    for (const item of contentArray) {\n      const result = await this.moderateContent(item.content, item.context);\n      results.push({\n        ...item,\n        moderation: result,\n      });\n    }\n\n    return results;\n  }\n\n  /**\n   * Report false positive/negative\n   * @param {string} content - The content\n   * @param {Object} moderationResult - The moderation result\n   * @param {boolean} correctDecision - Whether the moderation was correct\n   * @param {string} feedback - User feedback\n   */\n  async reportFeedback(content, moderationResult, correctDecision, feedback) {\n    try {\n      logger.info('Moderation feedback received', {\n        contentLength: content.length,\n        wasCorrect: correctDecision,\n        feedback: feedback.substring(0, 100),\n        categories: moderationResult.categories,\n        score: moderationResult.score,\n      });\n\n      // This would store feedback for model improvement\n      // Could be used to fine-tune moderation over time\n    } catch (error) {\n      logger.error('Failed to process moderation feedback', { error: error.message });\n    }\n  }\n\n  /**\n   * Update moderation settings\n   * @param {Object} settings - New settings\n   */\n  updateSettings(settings) {\n    if (settings.enabled !== undefined) {\n      this.moderationEnabled = settings.enabled;\n    }\n\n    if (settings.strictMode !== undefined) {\n      this.strictMode = settings.strictMode;\n    }\n\n    if (settings.thresholds) {\n      this.thresholds = { ...this.thresholds, ...settings.thresholds };\n    }\n\n    logger.info('Moderation settings updated', {\n      enabled: this.moderationEnabled,\n      strictMode: this.strictMode,\n      thresholds: this.thresholds,\n    });\n  }\n\n  /**\n   * Health check for moderation service\n   * @returns {Promise<Object>} Health status\n   */\n  async healthCheck() {\n    try {\n      const testContent = 'This is a test message for moderation.';\n      const result = await this.moderateContent(testContent);\n\n      return {\n        status: 'healthy',\n        service: 'content-moderation',\n        enabled: this.moderationEnabled,\n        strictMode: this.strictMode,\n        testResult: result,\n        timestamp: new Date().toISOString(),\n      };\n    } catch (error) {\n      logger.error('Content moderation health check failed', { error: error.message });\n      return {\n        status: 'unhealthy',\n        service: 'content-moderation',\n        error: error.message,\n        timestamp: new Date().toISOString(),\n      };\n    }\n  }\n}\n\nmodule.exports = ContentModerationService;\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\src\\services\\database.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":26,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":33},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":2,"column":16,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":23},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":37,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":37,"endColumn":18,"suggestions":[{"fix":{"range":[892,1025],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":39,"column":9,"nodeType":"Identifier","messageId":"undef","endLine":39,"endColumn":16},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":41,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":41,"endColumn":18,"suggestions":[{"fix":{"range":[1032,1089],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":45,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":45,"endColumn":18,"suggestions":[{"fix":{"range":[1217,1258],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":47,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":47,"endColumn":18,"suggestions":[{"fix":{"range":[1287,1336],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"class-methods-use-this","severity":2,"message":"Expected 'this' to be used by class method 'parseTimeframe'.","line":350,"column":3,"nodeType":"FunctionExpression","messageId":"missingThis","endLine":350,"endColumn":17},{"ruleId":"radix","severity":2,"message":"Missing radix parameter.","line":354,"column":19,"nodeType":"CallExpression","messageId":"missingRadix","endLine":354,"endColumn":37,"suggestions":[{"messageId":"addRadixParameter10","fix":{"range":[9227,9227],"text":", 10"},"desc":"Add radix parameter `10` for parsing decimal numbers."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":370,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":370,"endColumn":18,"suggestions":[{"fix":{"range":[9543,9605],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":373,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":373,"endColumn":20,"suggestions":[{"fix":{"range":[9733,9768],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":378,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":378,"endColumn":18,"suggestions":[{"fix":{"range":[9933,9984],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-restricted-syntax","severity":2,"message":"iterators/generators require regenerator-runtime, which is too heavyweight for this guide to allow them. Separately, loops should be avoided in favor of array iterations.","line":391,"column":7,"nodeType":"ForOfStatement","messageId":"restrictedSyntax","endLine":396,"endColumn":8},{"ruleId":"no-await-in-loop","severity":2,"message":"Unexpected `await` inside a loop.","line":392,"column":9,"nodeType":"AwaitExpression","messageId":"unexpectedAwait","endLine":395,"endColumn":11},{"ruleId":"no-restricted-syntax","severity":2,"message":"iterators/generators require regenerator-runtime, which is too heavyweight for this guide to allow them. Separately, loops should be avoided in favor of array iterations.","line":400,"column":7,"nodeType":"ForOfStatement","messageId":"restrictedSyntax","endLine":405,"endColumn":8},{"ruleId":"no-await-in-loop","severity":2,"message":"Unexpected `await` inside a loop.","line":401,"column":9,"nodeType":"AwaitExpression","messageId":"unexpectedAwait","endLine":404,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":415,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":415,"endColumn":7}],"suppressedMessages":[],"errorCount":10,"fatalErrorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const { PrismaClient } = require('@prisma/client');\nconst logger = require('../utils/logger');\n\nclass DatabaseService {\n  constructor() {\n    this.prisma = new PrismaClient({\n      log: [\n        { level: 'query', emit: 'event' },\n        { level: 'info', emit: 'event' },\n        { level: 'warn', emit: 'event' },\n        { level: 'error', emit: 'event' },\n      ],\n    });\n\n    // Log database events\n    this.prisma.$on('query', e => {\n      logger.debug(`Query: ${e.query}`, { duration: e.duration, params: e.params });\n    });\n\n    this.prisma.$on('info', e => {\n      logger.info(`Database Info: ${e.message}`);\n    });\n\n    this.prisma.$on('warn', e => {\n      logger.warn(`Database Warning: ${e.message}`);\n    });\n\n    this.prisma.$on('error', e => {\n      logger.error(`Database Error: ${e.message}`);\n    });\n\n    this.isConnected = false;\n  }\n\n  async connect() {\n    try {\n      console.log(\n        'Attempting DB connect; DATABASE_URL exists:',\n        process.env.DATABASE_URL ? 'yes (masked)' : 'no'\n      );\n      console.log('Prisma client initialized:', !!this.prisma);\n      await this.prisma.$connect();\n      this.isConnected = true;\n      logger.info('Database connected successfully');\n      console.log('DB connected successfully');\n    } catch (error) {\n      console.log('DB connect failed:', error.message);\n      logger.error('Failed to connect to database', { error: error.message });\n      throw error;\n    }\n  }\n\n  async disconnect() {\n    try {\n      await this.prisma.$disconnect();\n      this.isConnected = false;\n      logger.info('Database disconnected successfully');\n    } catch (error) {\n      logger.error('Failed to disconnect from database', { error: error.message });\n      throw error;\n    }\n  }\n\n  // User management methods\n  async getUser(jid) {\n    try {\n      const user = await this.prisma.user.findUnique({\n        where: { jid },\n        include: {\n          groups: {\n            include: {\n              group: true,\n            },\n          },\n          subscriptions: {\n            include: {\n              plan: true,\n            },\n            where: {\n              status: 'active',\n            },\n          },\n        },\n      });\n\n      if (user) {\n        // Convert to the format expected by existing code\n        return {\n          ...user,\n          premium: user.premium || user.subscriptions.length > 0,\n          groups: user.groups.map(ug => ug.groupId),\n        };\n      }\n\n      return null;\n    } catch (error) {\n      logger.error('Error getting user', { jid, error: error.message });\n      throw error;\n    }\n  }\n\n  async createUser(userData) {\n    try {\n      const user = await this.prisma.user.create({\n        data: {\n          jid: userData.jid,\n          name: userData.name,\n          phone: userData.phone,\n          avatar: userData.avatar,\n          xp: userData.xp || 0,\n          level: userData.level || 1,\n          coin: userData.coin || 0,\n          premium: userData.premium || false,\n          banned: userData.banned || false,\n        },\n      });\n\n      logger.info('User created', { userId: user.id, jid: user.jid });\n      return user;\n    } catch (error) {\n      logger.error('Error creating user', { userData, error: error.message });\n      throw error;\n    }\n  }\n\n  async updateUser(jid, updateData) {\n    try {\n      const user = await this.prisma.user.update({\n        where: { jid },\n        data: updateData,\n      });\n\n      logger.info('User updated', { jid, updates: Object.keys(updateData) });\n      return user;\n    } catch (error) {\n      logger.error('Error updating user', { jid, updateData, error: error.message });\n      throw error;\n    }\n  }\n\n  async upsertUser(userData) {\n    try {\n      const user = await this.prisma.user.upsert({\n        where: { jid: userData.jid },\n        update: userData,\n        create: {\n          jid: userData.jid,\n          name: userData.name,\n          phone: userData.phone,\n          avatar: userData.avatar,\n          xp: userData.xp || 0,\n          level: userData.level || 1,\n          coin: userData.coin || 0,\n          premium: userData.premium || false,\n          banned: userData.banned || false,\n        },\n      });\n\n      return user;\n    } catch (error) {\n      logger.error('Error upserting user', { userData, error: error.message });\n      throw error;\n    }\n  }\n\n  // Group management methods\n  async getGroup(jid) {\n    try {\n      const group = await this.prisma.group.findUnique({\n        where: { jid },\n        include: {\n          users: {\n            include: {\n              user: true,\n            },\n          },\n          settings: true,\n        },\n      });\n\n      if (group) {\n        return {\n          ...group,\n          members: group.users.map(ug => ({\n            jid: ug.user.jid,\n            role: ug.role,\n          })),\n          settings: group.settings.reduce((acc, setting) => {\n            acc[setting.settingKey] = setting.settingValue;\n            return acc;\n          }, {}),\n        };\n      }\n\n      return null;\n    } catch (error) {\n      logger.error('Error getting group', { jid, error: error.message });\n      throw error;\n    }\n  }\n\n  async createGroup(groupData) {\n    try {\n      const group = await this.prisma.group.create({\n        data: {\n          jid: groupData.jid,\n          name: groupData.name,\n          description: groupData.description,\n          avatar: groupData.avatar,\n          ownerJid: groupData.ownerJid,\n          memberCount: groupData.memberCount || 0,\n        },\n      });\n\n      logger.info('Group created', { groupId: group.id, jid: group.jid });\n      return group;\n    } catch (error) {\n      logger.error('Error creating group', { groupData, error: error.message });\n      throw error;\n    }\n  }\n\n  async updateGroup(jid, updateData) {\n    try {\n      const group = await this.prisma.group.update({\n        where: { jid },\n        data: updateData,\n      });\n\n      logger.info('Group updated', { jid, updates: Object.keys(updateData) });\n      return group;\n    } catch (error) {\n      logger.error('Error updating group', { jid, updateData, error: error.message });\n      throw error;\n    }\n  }\n\n  // User-Group relationship methods\n  async addUserToGroup(userJid, groupJid, role = 'member') {\n    try {\n      const userGroup = await this.prisma.userGroup.create({\n        data: {\n          userId: (await this.getUser(userJid)).id,\n          groupId: (await this.getGroup(groupJid)).id,\n          role,\n        },\n      });\n\n      logger.info('User added to group', { userJid, groupJid, role });\n      return userGroup;\n    } catch (error) {\n      logger.error('Error adding user to group', { userJid, groupJid, role, error: error.message });\n      throw error;\n    }\n  }\n\n  async removeUserFromGroup(userJid, groupJid) {\n    try {\n      const user = await this.getUser(userJid);\n      const group = await this.getGroup(groupJid);\n\n      await this.prisma.userGroup.delete({\n        where: {\n          userId_groupId: {\n            userId: user.id,\n            groupId: group.id,\n          },\n        },\n      });\n\n      logger.info('User removed from group', { userJid, groupJid });\n    } catch (error) {\n      logger.error('Error removing user from group', { userJid, groupJid, error: error.message });\n      throw error;\n    }\n  }\n\n  // Command usage tracking\n  async logCommandUsage(\n    userJid,\n    command,\n    category,\n    success = true,\n    executionTime = null,\n    error = null\n  ) {\n    try {\n      const user = await this.getUser(userJid);\n      if (!user) return;\n\n      await this.prisma.commandUsage.create({\n        data: {\n          userId: user.id,\n          command,\n          category,\n          success,\n          executionTime,\n          errorMessage: error?.message,\n        },\n      });\n\n      logger.command(command, userJid, success, executionTime, error);\n    } catch (err) {\n      logger.error('Error logging command usage', { userJid, command, error: err.message });\n    }\n  }\n\n  // Analytics methods\n  async recordAnalytics(metric, value, category, metadata = {}) {\n    try {\n      await this.prisma.analytics.create({\n        data: {\n          metric,\n          value: parseFloat(value),\n          category,\n          metadata: JSON.stringify(metadata),\n        },\n      });\n    } catch (error) {\n      logger.error('Error recording analytics', { metric, value, category, error: error.message });\n    }\n  }\n\n  async getAnalytics(timeframe = '24 hours') {\n    try {\n      const startDate = new Date(Date.now() - this.parseTimeframe(timeframe));\n\n      const analytics = await this.prisma.analytics.findMany({\n        where: {\n          recordedAt: {\n            gte: startDate,\n          },\n        },\n        orderBy: {\n          recordedAt: 'desc',\n        },\n      });\n\n      return analytics.map(item => ({\n        ...item,\n        metadata: JSON.parse(item.metadata || '{}'),\n      }));\n    } catch (error) {\n      logger.error('Error getting analytics', { timeframe, error: error.message });\n      throw error;\n    }\n  }\n\n  // Utility methods\n  parseTimeframe(timeframe) {\n    const match = timeframe.match(/(\\d+)\\s*(hour|day|week|month)s?/i);\n    if (!match) return 24 * 60 * 60 * 1000; // 24 hours default\n\n    const value = parseInt(match[1]);\n    const unit = match[2].toLowerCase();\n\n    const multipliers = {\n      hour: 60 * 60 * 1000,\n      day: 24 * 60 * 60 * 1000,\n      week: 7 * 24 * 60 * 60 * 1000,\n      month: 30 * 24 * 60 * 60 * 1000,\n    };\n\n    return value * multipliers[unit];\n  }\n\n  // Health check\n  async healthCheck() {\n    try {\n      console.log('Health check: Prisma available:', !!this.prisma);\n      if (this.prisma && typeof this.prisma.$queryRaw === 'function') {\n        await this.prisma.$queryRaw`SELECT 1`;\n        console.log('Health check passed');\n        return { status: 'healthy', database: 'connected' };\n      }\n      throw new Error('$queryRaw not available on prisma client');\n    } catch (error) {\n      console.log('Health check failed:', error.message);\n      logger.error('Database health check failed', { error: error.message });\n      return { status: 'unhealthy', database: 'disconnected', error: error.message };\n    }\n  }\n\n  // Migration helpers\n  async migrateFromSimplDB(oldDb) {\n    try {\n      logger.info('Starting migration from SimplDB to PostgreSQL');\n\n      // Migrate users\n      const users = oldDb.get('users') || {};\n      for (const [jid, userData] of Object.entries(users)) {\n        await this.upsertUser({\n          jid,\n          ...userData,\n        });\n      }\n\n      // Migrate groups\n      const groups = oldDb.get('groups') || {};\n      for (const [jid, groupData] of Object.entries(groups)) {\n        await this.createGroup({\n          jid,\n          ...groupData,\n        });\n      }\n\n      logger.info('Migration completed successfully');\n    } catch (error) {\n      logger.error('Migration failed', { error: error.message });\n      throw error;\n    }\n  }\n}\n\nmodule.exports = DatabaseService;\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\src\\services\\enhancedDownloadersService.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":6,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":6,"endColumn":22},{"ruleId":"import-x/no-extraneous-dependencies","severity":2,"message":"'cheerio' should be listed in the project's dependencies. Run 'npm i cheerio' to add it","line":7,"column":17,"nodeType":"CallExpression","messageId":"missing","endLine":7,"endColumn":35},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":7,"column":17,"nodeType":"Identifier","messageId":"undef","endLine":7,"endColumn":24},{"ruleId":"no-unused-vars","severity":1,"message":"'JSDOM' is assigned a value but never used.","line":8,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":8,"endColumn":14,"suggestions":[{"messageId":"removeVar","data":{"varName":"JSDOM"},"fix":{"range":[235,270],"text":""},"desc":"Remove unused variable 'JSDOM'."}]},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":8,"column":19,"nodeType":"Identifier","messageId":"undef","endLine":8,"endColumn":26},{"ruleId":"import-x/no-unresolved","severity":2,"message":"Unable to resolve path to module 'jsdom'.","line":8,"column":27,"nodeType":"Literal","messageId":"unresolved","endLine":8,"endColumn":34},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":9,"column":17,"nodeType":"Identifier","messageId":"undef","endLine":9,"endColumn":24},{"ruleId":"class-methods-use-this","severity":2,"message":"Expected 'this' to be used by class async method 'pixivDownloader'.","line":21,"column":3,"nodeType":"FunctionExpression","messageId":"missingThis","endLine":21,"endColumn":24},{"ruleId":"no-plusplus","severity":2,"message":"Unary operator '++' used.","line":42,"column":57,"nodeType":"UpdateExpression","messageId":"unexpectedUnaryOp","endLine":42,"endColumn":60},{"ruleId":"no-await-in-loop","severity":2,"message":"Unexpected `await` inside a loop.","line":47,"column":34,"nodeType":"AwaitExpression","messageId":"unexpectedAwait","endLine":49,"endColumn":12},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":65,"column":11,"nodeType":"MemberExpression","messageId":"unexpected","endLine":65,"endColumn":24,"suggestions":[{"fix":{"range":[2227,2296],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-continue","severity":2,"message":"Unexpected use of continue statement.","line":66,"column":11,"nodeType":"ContinueStatement","messageId":"unexpected","endLine":66,"endColumn":20},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":81,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":81,"endColumn":20,"suggestions":[{"fix":{"range":[2617,2668],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"class-methods-use-this","severity":2,"message":"Expected 'this' to be used by class async method 'pinterestDownloader'.","line":95,"column":3,"nodeType":"FunctionExpression","messageId":"missingThis","endLine":95,"endColumn":28},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":129,"column":11,"nodeType":"MemberExpression","messageId":"unexpected","endLine":129,"endColumn":24,"suggestions":[{"fix":{"range":[4265,4321],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":156,"column":11,"nodeType":"MemberExpression","messageId":"unexpected","endLine":156,"endColumn":24,"suggestions":[{"fix":{"range":[5666,5716],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":174,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":174,"endColumn":20,"suggestions":[{"fix":{"range":[6094,6149],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"class-methods-use-this","severity":2,"message":"Expected 'this' to be used by class async method 'enhancedYouTubeSearch'.","line":188,"column":3,"nodeType":"FunctionExpression","messageId":"missingThis","endLine":188,"endColumn":30},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":194,"column":19,"nodeType":"Identifier","messageId":"undef","endLine":194,"endColumn":26},{"ruleId":"import-x/no-unresolved","severity":2,"message":"Unable to resolve path to module 'yt-search'.","line":194,"column":27,"nodeType":"Literal","messageId":"unresolved","endLine":194,"endColumn":38},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":225,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":225,"endColumn":20,"suggestions":[{"fix":{"range":[7554,7612],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"class-methods-use-this","severity":2,"message":"Expected 'this' to be used by class async method 'enhancedMediaFireDownloader'.","line":234,"column":3,"nodeType":"FunctionExpression","messageId":"missingThis","endLine":234,"endColumn":36},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":296,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":296,"endColumn":20,"suggestions":[{"fix":{"range":[9660,9715],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"class-methods-use-this","severity":2,"message":"Expected 'this' to be used by class async method 'checkRateLimit'.","line":311,"column":3,"nodeType":"FunctionExpression","messageId":"missingThis","endLine":311,"endColumn":23},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":359,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":359,"endColumn":20,"suggestions":[{"fix":{"range":[11469,11531],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-restricted-syntax","severity":2,"message":"iterators/generators require regenerator-runtime, which is too heavyweight for this guide to allow them. Separately, loops should be avoided in favor of array iterations.","line":371,"column":5,"nodeType":"ForOfStatement","messageId":"restrictedSyntax","endLine":375,"endColumn":6},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":379,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":379,"endColumn":7}],"suppressedMessages":[],"errorCount":18,"fatalErrorCount":0,"warningCount":9,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Enhanced Downloaders Service - Advanced media downloading features\n * Implements pixiv, pinterest, and other platform downloads with proper error handling\n */\n\nconst axios = require('axios');\nconst cheerio = require('cheerio');\nconst { JSDOM } = require('jsdom');\nconst context = require('../../context');\n\nclass EnhancedDownloadersService {\n  constructor() {\n    this.rateLimits = new Map();\n    this.sessionCookies = new Map();\n  }\n\n  /**\n   * Pixiv downloader implementation\n   * @param {string} query - Search query\n   */\n  async pixivDownloader(query) {\n    try {\n      if (!query) {\n        throw new Error('Please provide search query');\n      }\n\n      // Use pixiv API through a proxy service\n      const response = await axios.get(\n        `https://api.allorigins.win/get?url=${encodeURIComponent(`https://www.pixiv.net/ajax/search/artworks/${encodeURIComponent(query)}?word=${encodeURIComponent(query)}&order=date_d&mode=all&p=1&s_mode=s_tag&type=all&lang=en`)}`\n      );\n\n      const data = JSON.parse(response.data.contents);\n      const artworks = data.body.illustManga.data;\n\n      if (!artworks || artworks.length === 0) {\n        throw new Error('No artworks found');\n      }\n\n      const results = [];\n\n      // Get up to 5 artworks\n      for (let i = 0; i < Math.min(5, artworks.length); i++) {\n        const artwork = artworks[i];\n\n        try {\n          // Get artwork details\n          const detailResponse = await axios.get(\n            `https://api.allorigins.win/get?url=${encodeURIComponent(`https://www.pixiv.net/ajax/illust/${artwork.id}`)}`\n          );\n\n          const detailData = JSON.parse(detailResponse.data.contents);\n          const artworkData = detailData.body;\n\n          results.push({\n            id: artwork.id,\n            title: artworkData.title || 'Untitled',\n            artist: artworkData.userName || 'Unknown Artist',\n            description: artworkData.description || '',\n            imageUrl: artworkData.urls?.original || artwork.url,\n            tags: artworkData.tags?.tags?.map(tag => tag.tag) || [],\n            viewCount: artworkData.viewCount || 0,\n            bookmarkCount: artworkData.bookmarkCount || 0,\n          });\n        } catch (error) {\n          console.error(`Error getting artwork ${artwork.id} details:`, error);\n          continue;\n        }\n      }\n\n      if (results.length === 0) {\n        throw new Error('Failed to retrieve artwork details');\n      }\n\n      return {\n        success: true,\n        query,\n        results,\n        message: `Found ${results.length} artworks for \"${query}\"`,\n      };\n    } catch (error) {\n      console.error('Error in pixiv downloader:', error);\n\n      if (error.response?.status === 429) {\n        throw new Error('Rate limit exceeded. Please try again later.');\n      }\n\n      throw new Error('Failed to search Pixiv');\n    }\n  }\n\n  /**\n   * Pinterest downloader implementation\n   * @param {string} query - Search query\n   */\n  async pinterestDownloader(query) {\n    try {\n      if (!query) {\n        throw new Error('Please provide search query');\n      }\n\n      // Use Pinterest search API\n      const response = await axios.get(\n        `https://api.allorigins.win/get?url=${encodeURIComponent(`https://www.pinterest.com/search/pins/?q=${encodeURIComponent(query)}&rs=typed`)}`\n      );\n\n      const $ = cheerio.load(response.data.contents);\n      const pins = [];\n\n      // Extract pin data from HTML\n      $('script[data-test-id=\"pin-script\"]').each((index, element) => {\n        try {\n          const scriptContent = $(element).html();\n          if (scriptContent) {\n            // Extract JSON data from script\n            const jsonMatch = scriptContent.match(/\\{.*\\}/);\n            if (jsonMatch) {\n              const pinData = JSON.parse(jsonMatch[0]);\n              pins.push({\n                id: pinData.id || `pin_${index}`,\n                title: pinData.title || 'Untitled',\n                description: pinData.description || '',\n                imageUrl: pinData.image_url || pinData.images?.orig?.url,\n                link: pinData.link || `https://pinterest.com/pin/${pinData.id}`,\n                uploader: pinData.uploader || 'Unknown',\n              });\n            }\n          }\n        } catch (error) {\n          console.error('Error parsing Pinterest script:', error);\n        }\n      });\n\n      // Alternative: Use Pinterest API proxy\n      if (pins.length === 0) {\n        try {\n          const apiResponse = await axios.get(\n            `https://api.allorigins.win/get?url=${encodeURIComponent(`https://www.pinterest.com/resource/BaseSearchResource/get/?source_url=/search/pins/?q=${encodeURIComponent(query)}&data=%7B%22options%22%3A%7B%22article%22%3Anull%2C%22appliedProductFilters%22%3A%22---%22%2C%22price%22%3A%22---%22%2C%22customizedProductType%22%3A%22---%22%7D%2C%22context%22%3A%7B%7D%2C%22query%22%3A%22${encodeURIComponent(query)}%22%2C%22scope%22%3A%22pins%22%2C%22bookmarks%22%3A%5B%5D%7D`)}`\n          );\n\n          const apiData = JSON.parse(apiResponse.data.contents);\n          const resources = apiData.resource_response?.data?.results || [];\n\n          resources.forEach((resource, index) => {\n            if (resource.images?.orig) {\n              pins.push({\n                id: resource.id || `pin_${index}`,\n                title: resource.title || 'Untitled',\n                description: resource.description || '',\n                imageUrl: resource.images.orig.url,\n                link: `https://pinterest.com/pin/${resource.id}`,\n                uploader: resource.pinner?.full_name || 'Unknown',\n              });\n            }\n          });\n        } catch (error) {\n          console.error('Error with Pinterest API:', error);\n        }\n      }\n\n      if (pins.length === 0) {\n        throw new Error('No pins found');\n      }\n\n      // Return up to 10 results\n      const limitedResults = pins.slice(0, 10);\n\n      return {\n        success: true,\n        query,\n        results: limitedResults,\n        message: `Found ${limitedResults.length} pins for \"${query}\"`,\n      };\n    } catch (error) {\n      console.error('Error in pinterest downloader:', error);\n\n      if (error.response?.status === 429) {\n        throw new Error('Rate limit exceeded. Please try again later.');\n      }\n\n      throw new Error('Failed to search Pinterest');\n    }\n  }\n\n  /**\n   * Enhanced YouTube search with better metadata\n   * @param {string} query - Search query\n   */\n  async enhancedYouTubeSearch(query) {\n    try {\n      if (!query) {\n        throw new Error('Please provide search query');\n      }\n\n      const yts = require('yt-search');\n\n      const searchResults = await yts.search({\n        query,\n        count: 10,\n        category: 'music',\n      });\n\n      const enhancedResults = searchResults.videos.map(video => ({\n        id: video.videoId,\n        title: video.title,\n        url: video.url,\n        thumbnail: video.thumbnail,\n        duration: video.duration?.timestamp || 'Unknown',\n        views: video.views?.toLocaleString() || '0',\n        uploaded: video.ago || 'Unknown',\n        author: {\n          name: video.author?.name || 'Unknown',\n          channelId: video.author?.channelId || '',\n          verified: video.author?.verified || false,\n        },\n        description: `${video.description?.substring(0, 200)}...` || 'No description',\n      }));\n\n      return {\n        success: true,\n        query,\n        results: enhancedResults,\n        message: `Found ${enhancedResults.length} videos for \"${query}\"`,\n      };\n    } catch (error) {\n      console.error('Error in enhanced YouTube search:', error);\n      throw new Error('Failed to search YouTube');\n    }\n  }\n\n  /**\n   * MediaFire downloader with enhanced features\n   * @param {string} url - MediaFire URL\n   */\n  async enhancedMediaFireDownloader(url) {\n    try {\n      if (!url || !url.includes('mediafire.com')) {\n        throw new Error('Please provide valid MediaFire URL');\n      }\n\n      // Get the download page\n      const response = await axios.get(url, {\n        headers: {\n          'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36',\n        },\n        timeout: 30000,\n      });\n\n      const $ = cheerio.load(response.data);\n\n      // Extract download link\n      let downloadLink = '';\n\n      // Look for download button\n      $('a[aria-label=\"Download file\"]').each((index, element) => {\n        const href = $(element).attr('href');\n        if (href && href.includes('mediafire.com')) {\n          downloadLink = href;\n        }\n      });\n\n      // Alternative: Look for script data\n      if (!downloadLink) {\n        $('script').each((index, element) => {\n          const scriptContent = $(element).html();\n          if (scriptContent && scriptContent.includes('downloadUrl')) {\n            const match = scriptContent.match(/\"downloadUrl\":\"([^\"]+)\"/);\n            if (match) {\n              downloadLink = match[1].replace(/\\\\/g, '');\n            }\n          }\n        });\n      }\n\n      if (!downloadLink) {\n        throw new Error('Download link not found');\n      }\n\n      // Get file info\n      const fileName =\n        $('div.dl-info div.filename').text().trim() || $('h1').text().trim() || 'Unknown File';\n\n      const fileSize = $('div.dl-info div.filesize').text().trim() || 'Unknown Size';\n\n      const uploadDate = $('div.dl-info div.uploaded').text().trim() || 'Unknown Date';\n\n      return {\n        success: true,\n        url: downloadLink,\n        fileName,\n        fileSize,\n        uploadDate,\n        originalUrl: url,\n        message: `File: ${fileName}\\nSize: ${fileSize}\\nUpload: ${uploadDate}`,\n      };\n    } catch (error) {\n      console.error('Error in MediaFire downloader:', error);\n\n      if (error.response?.status === 429) {\n        throw new Error('Rate limit exceeded. Please try again later.');\n      }\n\n      throw new Error('Failed to download from MediaFire');\n    }\n  }\n\n  /**\n   * Check rate limit for download operations (now uses database)\n   * @param {string} userId - User ID\n   * @param {string} platform - Platform name\n   */\n  async checkRateLimit(userId, platform) {\n    const key = `downloader_${platform}_${userId}`;\n    const now = Date.now();\n\n    const limits = {\n      pixiv: { cooldown: 30000, maxPerCooldown: 2 }, // 30 seconds, 2 searches\n      pinterest: { cooldown: 15000, maxPerCooldown: 3 }, // 15 seconds, 3 searches\n      youtube: { cooldown: 10000, maxPerCooldown: 5 }, // 10 seconds, 5 searches\n      mediafire: { cooldown: 20000, maxPerCooldown: 2 }, // 20 seconds, 2 downloads\n    };\n\n    const config = limits[platform] || { cooldown: 30000, maxPerCooldown: 1 };\n\n    try {\n      const existingLimit = await context.database.rateLimit.findUnique({\n        where: { key },\n      });\n\n      if (!existingLimit || now - existingLimit.lastUsed.getTime() > config.cooldown) {\n        await context.database.rateLimit.upsert({\n          where: { key },\n          update: {\n            count: 1,\n            lastUsed: new Date(),\n          },\n          create: {\n            key,\n            count: 1,\n            lastUsed: new Date(),\n          },\n        });\n        return true;\n      }\n\n      if (existingLimit.count >= config.maxPerCooldown) {\n        return false;\n      }\n\n      await context.database.rateLimit.update({\n        where: { key },\n        data: {\n          count: { increment: 1 },\n          lastUsed: new Date(),\n        },\n      });\n\n      return true;\n    } catch (error) {\n      console.error('Error checking downloader rate limit:', error);\n      return false; // Fail safe\n    }\n  }\n\n  /**\n   * Clean up old session data\n   */\n  cleanupOldSessions() {\n    const now = Date.now();\n    const maxAge = 60 * 60 * 1000; // 1 hour\n\n    for (const [key, data] of this.sessionCookies.entries()) {\n      if (now - data.timestamp > maxAge) {\n        this.sessionCookies.delete(key);\n      }\n    }\n  }\n}\n\nmodule.exports = new EnhancedDownloadersService();\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\src\\services\\errorHandler.js","messages":[{"ruleId":"max-classes-per-file","severity":2,"message":"File has too many classes (2). Maximum allowed is 1.","line":6,"column":1,"nodeType":"Program","messageId":"maximumExceeded","endLine":298,"endColumn":1},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":6,"column":16,"nodeType":"Identifier","messageId":"undef","endLine":6,"endColumn":23},{"ruleId":"class-methods-use-this","severity":2,"message":"Expected 'this' to be used by class method 'handleProgrammingError'.","line":52,"column":3,"nodeType":"FunctionExpression","messageId":"missingThis","endLine":52,"endColumn":25},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":62,"column":9,"nodeType":"Identifier","messageId":"undef","endLine":62,"endColumn":16},{"ruleId":"class-methods-use-this","severity":2,"message":"Expected 'this' to be used by class method 'handleDatabaseError'.","line":73,"column":3,"nodeType":"FunctionExpression","messageId":"missingThis","endLine":73,"endColumn":22},{"ruleId":"class-methods-use-this","severity":2,"message":"Expected 'this' to be used by class method 'handleApiError'.","line":97,"column":3,"nodeType":"FunctionExpression","messageId":"missingThis","endLine":97,"endColumn":17},{"ruleId":"class-methods-use-this","severity":2,"message":"Expected 'this' to be used by class method 'handleWhatsAppError'.","line":125,"column":3,"nodeType":"FunctionExpression","messageId":"missingThis","endLine":125,"endColumn":22},{"ruleId":"class-methods-use-this","severity":2,"message":"Expected 'this' to be used by class method 'getUserFriendlyMessage'.","line":148,"column":3,"nodeType":"FunctionExpression","messageId":"missingThis","endLine":148,"endColumn":25},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":164,"column":9,"nodeType":"Identifier","messageId":"undef","endLine":164,"endColumn":16},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":295,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":295,"endColumn":7},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":296,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":296,"endColumn":7},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":297,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":297,"endColumn":7}],"suppressedMessages":[],"errorCount":12,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Centralized Error Handling Service\n * Provides consistent error handling across the application\n */\n\nconst logger = require('../utils/logger');\n\nclass AppError extends Error {\n  constructor(message, statusCode = 500, isOperational = true) {\n    super(message);\n    this.statusCode = statusCode;\n    this.isOperational = isOperational;\n    this.timestamp = new Date().toISOString();\n\n    Error.captureStackTrace(this, this.constructor);\n  }\n}\n\nclass ErrorHandler {\n  constructor() {\n    this.errorTypes = {\n      VALIDATION_ERROR: 'ValidationError',\n      DATABASE_ERROR: 'DatabaseError',\n      NETWORK_ERROR: 'NetworkError',\n      AUTHENTICATION_ERROR: 'AuthenticationError',\n      AUTHORIZATION_ERROR: 'AuthorizationError',\n      NOT_FOUND_ERROR: 'NotFoundError',\n      RATE_LIMIT_ERROR: 'RateLimitError',\n      EXTERNAL_API_ERROR: 'ExternalApiError',\n    };\n  }\n\n  /**\n   * Handle operational errors\n   */\n  handleOperationalError(error, context = {}) {\n    logger.error('Operational Error:', {\n      message: error.message,\n      stack: error.stack,\n      context,\n      timestamp: new Date().toISOString(),\n    });\n\n    // Don't expose internal errors to users\n    const userMessage = this.getUserFriendlyMessage(error);\n    return { success: false, message: userMessage, error: error.message };\n  }\n\n  /**\n   * Handle programming errors (bugs)\n   */\n  handleProgrammingError(error, context = {}) {\n    logger.error('Programming Error:', {\n      message: error.message,\n      stack: error.stack,\n      context,\n      timestamp: new Date().toISOString(),\n    });\n\n    // For programming errors, we might want to exit the process\n    // in development, but handle gracefully in production\n    if (process.env.NODE_ENV === 'production') {\n      // Log and continue\n      return { success: false, message: 'An unexpected error occurred' };\n    }\n    // In development, throw to get full stack trace\n    throw error;\n  }\n\n  /**\n   * Handle database errors\n   */\n  handleDatabaseError(error, operation = 'unknown') {\n    logger.error('Database Error:', {\n      operation,\n      message: error.message,\n      code: error.code,\n      meta: error.meta,\n      timestamp: new Date().toISOString(),\n    });\n\n    // Handle specific database errors\n    if (error.code === 'P1001') {\n      return { success: false, message: 'Database connection failed' };\n    }\n\n    if (error.code === 'P2002') {\n      return { success: false, message: 'Data already exists' };\n    }\n\n    return { success: false, message: 'Database operation failed' };\n  }\n\n  /**\n   * Handle API errors\n   */\n  handleApiError(error, service = 'unknown') {\n    logger.error('API Error:', {\n      service,\n      message: error.message,\n      status: error.response?.status,\n      data: error.response?.data,\n      timestamp: new Date().toISOString(),\n    });\n\n    const status = error.response?.status;\n    if (status === 401) {\n      return { success: false, message: 'Authentication failed' };\n    }\n\n    if (status === 403) {\n      return { success: false, message: 'Access forbidden' };\n    }\n\n    if (status === 429) {\n      return { success: false, message: 'Rate limit exceeded' };\n    }\n\n    return { success: false, message: `Service ${service} unavailable` };\n  }\n\n  /**\n   * Handle WhatsApp-specific errors\n   */\n  handleWhatsAppError(error, operation = 'unknown') {\n    logger.error('WhatsApp Error:', {\n      operation,\n      message: error.message,\n      stack: error.stack,\n      timestamp: new Date().toISOString(),\n    });\n\n    // Handle specific WhatsApp errors\n    if (error.message?.includes('connection')) {\n      return { success: false, message: 'WhatsApp connection failed' };\n    }\n\n    if (error.message?.includes('auth')) {\n      return { success: false, message: 'WhatsApp authentication failed' };\n    }\n\n    return { success: false, message: 'WhatsApp operation failed' };\n  }\n\n  /**\n   * Get user-friendly error message\n   */\n  getUserFriendlyMessage(error) {\n    // Map technical errors to user-friendly messages\n    const errorMappings = {\n      ENOTFOUND: 'Service temporarily unavailable',\n      ECONNREFUSED: 'Connection failed',\n      ETIMEDOUT: 'Request timed out',\n      EACCES: 'Permission denied',\n      ENOENT: 'Resource not found',\n    };\n\n    const technicalCode = error.code || error.errno;\n    if (technicalCode && errorMappings[technicalCode]) {\n      return errorMappings[technicalCode];\n    }\n\n    // For unknown errors, provide generic message\n    if (process.env.NODE_ENV === 'production') {\n      return 'An error occurred. Please try again later.';\n    }\n\n    // In development, show the actual error\n    return error.message || 'An unexpected error occurred';\n  }\n\n  /**\n   * Create standardized error response\n   */\n  createErrorResponse(error, context = {}) {\n    const baseResponse = {\n      success: false,\n      timestamp: new Date().toISOString(),\n      context,\n    };\n\n    if (error instanceof AppError) {\n      return {\n        ...baseResponse,\n        message: error.message,\n        statusCode: error.statusCode,\n        type: 'AppError',\n      };\n    }\n\n    // Handle different error types\n    if (error.name === 'ValidationError') {\n      return {\n        ...baseResponse,\n        message: 'Invalid input data',\n        statusCode: 400,\n        type: 'ValidationError',\n        details: error.details,\n      };\n    }\n\n    if (error.name === 'CastError') {\n      return {\n        ...baseResponse,\n        message: 'Invalid data format',\n        statusCode: 400,\n        type: 'CastError',\n      };\n    }\n\n    // Default error response\n    return {\n      ...baseResponse,\n      message: this.getUserFriendlyMessage(error),\n      statusCode: 500,\n      type: 'UnknownError',\n    };\n  }\n\n  /**\n   * Async error wrapper for routes/controllers\n   */\n  asyncHandler(fn) {\n    return (req, res, next) => {\n      Promise.resolve(fn(req, res, next)).catch(error => {\n        const errorResponse = this.createErrorResponse(error, {\n          url: req.url,\n          method: req.method,\n          ip: req.ip,\n        });\n\n        logger.error('Unhandled async error:', error);\n\n        res.status(errorResponse.statusCode).json(errorResponse);\n      });\n    };\n  }\n\n  /**\n   * WhatsApp command error wrapper\n   */\n  commandHandler(fn) {\n    return async ctx => {\n      try {\n        return await fn(ctx);\n      } catch (error) {\n        logger.error('Command error:', {\n          command: ctx.used?.command,\n          user: ctx.getId(ctx.sender.jid),\n          error: error.message,\n          stack: error.stack,\n        });\n\n        const errorResponse = this.handleOperationalError(error, {\n          command: ctx.used?.command,\n          user: ctx.getId(ctx.sender.jid),\n        });\n\n        return ctx.reply(errorResponse.message);\n      }\n    };\n  }\n\n  /**\n   * Database operation wrapper\n   */\n  databaseHandler(fn) {\n    return async (...args) => {\n      try {\n        return await fn(...args);\n      } catch (error) {\n        return this.handleDatabaseError(error, fn.name);\n      }\n    };\n  }\n\n  /**\n   * API call wrapper\n   */\n  apiHandler(fn, serviceName) {\n    return async (...args) => {\n      try {\n        return await fn(...args);\n      } catch (error) {\n        return this.handleApiError(error, serviceName);\n      }\n    };\n  }\n}\n\n// Create singleton instance\nconst errorHandler = new ErrorHandler();\n\n// Export both class and instance\nmodule.exports = errorHandler;\nmodule.exports.AppError = AppError;\nmodule.exports.ErrorHandler = ErrorHandler;\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\src\\services\\funCommandsService.js","messages":[{"ruleId":"import-x/no-import-module-exports","severity":2,"message":"Cannot use import declarations in modules that export using CommonJS (module.exports = 'foo' or exports.bar = 'hi')","line":6,"column":1,"nodeType":"ImportDeclaration","messageId":"notAllowed","endLine":6,"endColumn":25},{"ruleId":"no-unused-vars","severity":1,"message":"'path' is defined but never used.","line":6,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":12,"suggestions":[{"messageId":"removeVar","data":{"varName":"path"},"fix":{"range":[158,168],"text":""},"desc":"Remove unused variable 'path'."}]},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":8,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":8,"endColumn":22},{"ruleId":"no-unused-vars","severity":1,"message":"'fs' is assigned a value but never used.","line":9,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":9,"endColumn":9,"suggestions":[{"messageId":"removeVar","data":{"varName":"fs"},"fix":{"range":[209,243],"text":""},"desc":"Remove unused variable 'fs'."}]},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":9,"column":12,"nodeType":"Identifier","messageId":"undef","endLine":9,"endColumn":19},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":26,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":26,"endColumn":20,"suggestions":[{"fix":{"range":[556,621],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":40,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":40,"endColumn":20,"suggestions":[{"fix":{"range":[942,993],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":73,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":73,"endColumn":20,"suggestions":[{"fix":{"range":[2023,2074],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"class-methods-use-this","severity":2,"message":"Expected 'this' to be used by class async method 'cekSifat'.","line":87,"column":3,"nodeType":"FunctionExpression","messageId":"missingThis","endLine":87,"endColumn":17},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":146,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":146,"endColumn":20,"suggestions":[{"fix":{"range":[4040,4084],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":168,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":168,"endColumn":20,"suggestions":[{"fix":{"range":[4629,4674],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"class-methods-use-this","severity":2,"message":"Expected 'this' to be used by class async method 'cekMati'.","line":177,"column":3,"nodeType":"FunctionExpression","messageId":"missingThis","endLine":177,"endColumn":16},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":188,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":188,"endColumn":20,"suggestions":[{"fix":{"range":[5282,5325],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":223,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":223,"endColumn":20,"suggestions":[{"fix":{"range":[6283,6340],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"class-methods-use-this","severity":2,"message":"Expected 'this' to be used by class async method 'bisakah'.","line":232,"column":3,"nodeType":"FunctionExpression","messageId":"missingThis","endLine":232,"endColumn":16},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":253,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":253,"endColumn":20,"suggestions":[{"fix":{"range":[6997,7039],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"class-methods-use-this","severity":2,"message":"Expected 'this' to be used by class async method 'apakah'.","line":262,"column":3,"nodeType":"FunctionExpression","messageId":"missingThis","endLine":262,"endColumn":15},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":282,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":282,"endColumn":20,"suggestions":[{"fix":{"range":[7656,7697],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"class-methods-use-this","severity":2,"message":"Expected 'this' to be used by class async method 'kapan'.","line":291,"column":3,"nodeType":"FunctionExpression","messageId":"missingThis","endLine":291,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":329,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":329,"endColumn":20,"suggestions":[{"fix":{"range":[8743,8783],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-plusplus","severity":2,"message":"Unary operator '++' used.","line":355,"column":5,"nodeType":"UpdateExpression","messageId":"unexpectedUnaryOp","endLine":355,"endColumn":18},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":360,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":360,"endColumn":7}],"suppressedMessages":[],"errorCount":10,"fatalErrorCount":0,"warningCount":12,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Fun Commands Service - Entertainment features for WhatsApp Bot\n * Implements fun interactions with proper error handling and rate limiting\n */\n\nimport path from 'path';\n\nconst axios = require('axios');\nconst fs = require('fs').promises;\n\nclass FunCommandsService {\n  constructor() {\n    this.rateLimits = new Map();\n    this.khodamData = null;\n    this.quotesData = null;\n  }\n\n  /**\n   * Initialize service data\n   */\n  async initialize() {\n    try {\n      await this.loadKhodamData();\n      await this.loadQuotesData();\n    } catch (error) {\n      console.error('Error initializing fun commands service:', error);\n    }\n  }\n\n  /**\n   * Load Khodam data from external source\n   */\n  async loadKhodamData() {\n    try {\n      const response = await axios.get(\n        'https://raw.githubusercontent.com/nazedev/database/refs/heads/master/random/cekkhodam.json'\n      );\n      this.khodamData = response.data;\n    } catch (error) {\n      console.error('Error loading khodam data:', error);\n      // Fallback data\n      this.khodamData = [\n        { nama: 'Dokter Indosiar', deskripsi: 'Khodam yang selalu memberikan resep obat' },\n        { nama: 'Sigit Rendang', deskripsi: 'Khodam yang ahli dalam kuliner' },\n        { nama: 'Ustadz Sinetron', deskripsi: 'Khodam yang pandai berdakwah' },\n      ];\n    }\n  }\n\n  /**\n   * Load quotes data\n   */\n  async loadQuotesData() {\n    try {\n      const [motivasiRes, bijakRes, bucinRes] = await Promise.all([\n        axios.get(\n          'https://raw.githubusercontent.com/nazedev/database/refs/heads/master/kata-kata/motivasi.json'\n        ),\n        axios.get(\n          'https://raw.githubusercontent.com/nazedev/database/refs/heads/master/kata-kata/bijak.json'\n        ),\n        axios.get(\n          'https://raw.githubusercontent.com/nazedev/database/refs/heads/master/kata-kata/bucin.json'\n        ),\n      ]);\n\n      this.quotesData = {\n        motivasi: motivasiRes.data,\n        bijak: bijakRes.data,\n        bucin: bucinRes.data,\n      };\n    } catch (error) {\n      console.error('Error loading quotes data:', error);\n      // Fallback data\n      this.quotesData = {\n        motivasi: ['Tetap semangat!'],\n        bijak: ['Hidup adalah pilihan'],\n        bucin: ['Aku sayang kamu'],\n      };\n    }\n  }\n\n  /**\n   * Cek Sifat command implementation\n   * @param {string} name - Name to analyze\n   */\n  async cekSifat(name) {\n    try {\n      const sifatBaik = [\n        'Bijak',\n        'Sabar',\n        'Kreatif',\n        'Humoris',\n        'Mudah bergaul',\n        'Mandiri',\n        'Setia',\n        'Jujur',\n        'Dermawan',\n        'Idealis',\n        'Adil',\n        'Sopan',\n        'Tekun',\n        'Rajin',\n        'Pemaaf',\n      ];\n\n      const sifatBuruk = [\n        'Sombong',\n        'Minder',\n        'Pendendam',\n        'Sensitif',\n        'Perfeksionis',\n        'Caper',\n        'Pelit',\n        'Egois',\n        'Pesimis',\n        'Penyendiri',\n      ];\n\n      const randomSifatBaik = sifatBaik[Math.floor(Math.random() * sifatBaik.length)];\n      const randomSifatBuruk = sifatBuruk[Math.floor(Math.random() * sifatBuruk.length)];\n\n      const keberanian = Math.floor(Math.random() * 100);\n      const kepedulian = Math.floor(Math.random() * 100);\n      const kecemasan = Math.floor(Math.random() * 100);\n      const ketakutan = Math.floor(Math.random() * 100);\n      const akhlakBaik = Math.floor(Math.random() * 100);\n      const akhlakBuruk = Math.floor(Math.random() * 100);\n\n      return {\n        success: true,\n        result:\n          `â•­â”€â”€âã€Œ *Cek Sifat* ã€â\\n` +\n          `â”‚â€¢ Sifat ${name}\\n` +\n          `â”‚â€¢ Orang yang : *${randomSifatBaik}*\\n` +\n          `â”‚â€¢ Kekurangan : *${randomSifatBuruk}*\\n` +\n          `â”‚â€¢ Keberanian : *${keberanian}%*\\n` +\n          `â”‚â€¢ Kepedulian : *${kepedulian}%*\\n` +\n          `â”‚â€¢ Kecemasan : *${kecemasan}%*\\n` +\n          `â”‚â€¢ Ketakutan : *${ketakutan}%*\\n` +\n          `â”‚â€¢ Akhlak Baik : *${akhlakBaik}%*\\n` +\n          `â”‚â€¢ Akhlak Buruk : *${akhlakBuruk}%*\\n` +\n          `â•°â”€â”€â”€â”€â”€â”€â`,\n      };\n    } catch (error) {\n      console.error('Error in cek sifat:', error);\n      throw new Error('Failed to analyze personality');\n    }\n  }\n\n  /**\n   * Cek Khodam command implementation\n   * @param {string} name - Name to check\n   */\n  async cekKhodam(name) {\n    try {\n      if (!this.khodamData) {\n        await this.loadKhodamData();\n      }\n\n      const randomKhodam = this.khodamData[Math.floor(Math.random() * this.khodamData.length)];\n\n      return {\n        success: true,\n        result: `Khodam dari *${name}* adalah *${randomKhodam.nama}*\\n_${randomKhodam.deskripsi}_`,\n      };\n    } catch (error) {\n      console.error('Error in cek khodam:', error);\n      throw new Error('Failed to check khodam');\n    }\n  }\n\n  /**\n   * Cek Mati command implementation\n   * @param {string} name - Name to check\n   */\n  async cekMati(name) {\n    try {\n      // Use agify.io API for age prediction\n      const response = await axios.get(`https://api.agify.io/?name=${encodeURIComponent(name)}`);\n      const age = response.data.age || Math.floor(Math.random() * 90) + 20;\n\n      return {\n        success: true,\n        result: `Nama : ${name}\\n*Mati Pada Umur :* ${age} Tahun.\\n\\n_Cepet Cepet Tobat Bro_\\n_Soalnya Mati ga ada yang tau_`,\n      };\n    } catch (error) {\n      console.error('Error in cek mati:', error);\n      // Fallback if API fails\n      const age = Math.floor(Math.random() * 90) + 20;\n      return {\n        success: true,\n        result: `Nama : ${name}\\n*Mati Pada Umur :* ${age} Tahun.\\n\\n_Cepet Cepet Tobat Bro_\\n_Soalnya Mati ga ada yang tau_`,\n      };\n    }\n  }\n\n  /**\n   * Get random quote by category\n   * @param {string} category - Quote category (motivasi, bijak, bucin)\n   */\n  async getRandomQuote(category) {\n    try {\n      if (!this.quotesData) {\n        await this.loadQuotesData();\n      }\n\n      const quotes = this.quotesData[category];\n      if (!quotes || quotes.length === 0) {\n        throw new Error('Quotes not available');\n      }\n\n      const randomQuote = quotes[Math.floor(Math.random() * quotes.length)];\n\n      return {\n        success: true,\n        result:\n          category === 'quotes'\n            ? `_${randomQuote.quotes}_\\n\\n*- ${randomQuote.author}*`\n            : randomQuote,\n      };\n    } catch (error) {\n      console.error(`Error getting ${category} quote:`, error);\n      throw new Error(`Failed to get ${category} quote`);\n    }\n  }\n\n  /**\n   * Bisakah command implementation\n   * @param {string} text - Question to ask\n   */\n  async bisakah(text) {\n    try {\n      const responses = [\n        'Bisa',\n        'Coba Saja',\n        'Pasti Bisa',\n        'Mungkin Saja',\n        'Tidak Bisa',\n        'Tidak Mungkin',\n        'Coba Ulangi',\n        'Ngimpi kah?',\n        'yakin bisa?',\n      ];\n\n      const randomResponse = responses[Math.floor(Math.random() * responses.length)];\n\n      return {\n        success: true,\n        result: `*Bisakah ${text}*\\nJawab : ${randomResponse}`,\n      };\n    } catch (error) {\n      console.error('Error in bisakah:', error);\n      throw new Error('Failed to process question');\n    }\n  }\n\n  /**\n   * Apakah command implementation\n   * @param {string} text - Question to ask\n   */\n  async apakah(text) {\n    try {\n      const responses = [\n        'Iya',\n        'Tidak',\n        'Bisa Jadi',\n        'Coba Ulangi',\n        'Mungkin Saja',\n        'Mungkin Tidak',\n        'Mungkin Iya',\n        'Ntahlah',\n      ];\n\n      const randomResponse = responses[Math.floor(Math.random() * responses.length)];\n\n      return {\n        success: true,\n        result: `*Apakah ${text}*\\nJawab : ${randomResponse}`,\n      };\n    } catch (error) {\n      console.error('Error in apakah:', error);\n      throw new Error('Failed to process question');\n    }\n  }\n\n  /**\n   * Kapan command implementation\n   * @param {string} text - Question to ask\n   */\n  async kapan(text) {\n    try {\n      const responses = [\n        'Besok',\n        'Lusa',\n        'Nanti',\n        '4 Hari Lagi',\n        '5 Hari Lagi',\n        '6 Hari Lagi',\n        '1 Minggu Lagi',\n        '2 Minggu Lagi',\n        '3 Minggu Lagi',\n        '1 Bulan Lagi',\n        '2 Bulan Lagi',\n        '3 Bulan Lagi',\n        '4 Bulan Lagi',\n        '5 Bulan Lagi',\n        '6 Bulan Lagi',\n        '1 Tahun Lagi',\n        '2 Tahun Lagi',\n        '3 Tahun Lagi',\n        '4 Tahun Lagi',\n        '5 Tahun Lagi',\n        '6 Tahun Lagi',\n        '1 Abad lagi',\n        '3 Hari Lagi',\n        'Bulan Depan',\n        'Ntahlah',\n        'Tidak Akan Pernah',\n      ];\n\n      const randomResponse = responses[Math.floor(Math.random() * responses.length)];\n\n      return {\n        success: true,\n        result: `*Kapan ${text}*\\nJawab : ${randomResponse}`,\n      };\n    } catch (error) {\n      console.error('Error in kapan:', error);\n      throw new Error('Failed to process question');\n    }\n  }\n\n  /**\n   * Check rate limit for fun commands\n   * @param {string} userId - User ID\n   * @param {string} command - Command name\n   */\n  checkRateLimit(userId, command) {\n    const key = `${userId}_${command}`;\n    const now = Date.now();\n    const limit = this.rateLimits.get(key);\n\n    if (!limit || now - limit.lastUsed > 30000) {\n      // 30 seconds cooldown\n      this.rateLimits.set(key, { lastUsed: now, count: 1 });\n      return true;\n    }\n\n    if (limit.count >= 5) {\n      // Max 5 uses per 30 seconds\n      return false;\n    }\n\n    limit.count++;\n    return true;\n  }\n}\n\nmodule.exports = new FunCommandsService();\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\src\\services\\gamesService.js","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'axios' is assigned a value but never used.","line":6,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":12,"suggestions":[{"messageId":"removeVar","data":{"varName":"axios"},"fix":{"range":[145,176],"text":""},"desc":"Remove unused variable 'axios'."}]},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":6,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":6,"endColumn":22},{"ruleId":"no-unused-vars","severity":1,"message":"'AkinatorAnswer' is assigned a value but never used.","line":7,"column":22,"nodeType":"Identifier","messageId":"unusedVar","endLine":7,"endColumn":36,"suggestions":[{"messageId":"removeVar","data":{"varName":"AkinatorAnswer"},"fix":{"range":[196,212],"text":""},"desc":"Remove unused variable 'AkinatorAnswer'."}]},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":7,"column":41,"nodeType":"Identifier","messageId":"undef","endLine":7,"endColumn":48},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":8,"column":19,"nodeType":"Identifier","messageId":"undef","endLine":8,"endColumn":26},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":54,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":54,"endColumn":20,"suggestions":[{"fix":{"range":[1495,1545],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-plusplus","severity":2,"message":"Unary operator '++' used.","line":85,"column":9,"nodeType":"UpdateExpression","messageId":"unexpectedUnaryOp","endLine":85,"endColumn":20},{"ruleId":"no-plusplus","severity":2,"message":"Unary operator '--' used.","line":86,"column":9,"nodeType":"UpdateExpression","messageId":"unexpectedUnaryOp","endLine":86,"endColumn":20},{"ruleId":"no-plusplus","severity":2,"message":"Unary operator '++' used.","line":101,"column":7,"nodeType":"UpdateExpression","messageId":"unexpectedUnaryOp","endLine":101,"endColumn":18},{"ruleId":"no-plusplus","severity":2,"message":"Unary operator '--' used.","line":102,"column":7,"nodeType":"UpdateExpression","messageId":"unexpectedUnaryOp","endLine":102,"endColumn":19},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":113,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":113,"endColumn":20,"suggestions":[{"fix":{"range":[3220,3278],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":151,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":151,"endColumn":20,"suggestions":[{"fix":{"range":[4263,4312],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"eqeqeq","severity":2,"message":"Expected '===' and instead saw '=='.","line":170,"column":47,"nodeType":"BinaryExpression","messageId":"unexpected","endLine":170,"endColumn":49,"suggestions":[{"messageId":"replaceOperator","data":{"expectedOperator":"===","actualOperator":"=="},"fix":{"range":[4837,4839],"text":"==="},"desc":"Use '===' instead of '=='."}]},{"ruleId":"eqeqeq","severity":2,"message":"Expected '===' and instead saw '=='.","line":180,"column":267,"nodeType":"BinaryExpression","messageId":"unexpected","endLine":180,"endColumn":269,"suggestions":[{"messageId":"replaceOperator","data":{"expectedOperator":"===","actualOperator":"=="},"fix":{"range":[5381,5383],"text":"==="},"desc":"Use '===' instead of '=='."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":205,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":205,"endColumn":20,"suggestions":[{"fix":{"range":[6361,6419],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":246,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":246,"endColumn":20,"suggestions":[{"fix":{"range":[7544,7595],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":279,"column":16,"nodeType":"Identifier","messageId":"unusedVar","endLine":279,"endColumn":21},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":312,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":312,"endColumn":20,"suggestions":[{"fix":{"range":[9601,9654],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"class-methods-use-this","severity":2,"message":"Expected 'this' to be used by class method 'generateBombPositions'.","line":320,"column":3,"nodeType":"FunctionExpression","messageId":"missingThis","endLine":320,"endColumn":24},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":345,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":345,"endColumn":18,"suggestions":[{"fix":{"range":[10456,10511],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":347,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":347,"endColumn":20,"suggestions":[{"fix":{"range":[10540,10583],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-restricted-syntax","severity":2,"message":"iterators/generators require regenerator-runtime, which is too heavyweight for this guide to allow them. Separately, loops should be avoided in favor of array iterations.","line":357,"column":5,"nodeType":"ForOfStatement","messageId":"restrictedSyntax","endLine":362,"endColumn":6},{"ruleId":"no-continue","severity":2,"message":"Unexpected use of continue statement.","line":359,"column":53,"nodeType":"ContinueStatement","messageId":"unexpected","endLine":359,"endColumn":62},{"ruleId":"no-restricted-syntax","severity":2,"message":"iterators/generators require regenerator-runtime, which is too heavyweight for this guide to allow them. Separately, loops should be avoided in favor of array iterations.","line":373,"column":5,"nodeType":"ForOfStatement","messageId":"restrictedSyntax","endLine":377,"endColumn":6},{"ruleId":"no-plusplus","severity":2,"message":"Unary operator '++' used.","line":401,"column":5,"nodeType":"UpdateExpression","messageId":"unexpectedUnaryOp","endLine":401,"endColumn":18},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":406,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":406,"endColumn":7}],"suppressedMessages":[],"errorCount":15,"fatalErrorCount":0,"warningCount":11,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Games Service - Interactive games for WhatsApp Bot\n * Implements proper architecture with error handling, logging, and rate limiting\n */\n\nconst axios = require('axios');\nconst { AkinatorAPI, AkinatorAnswer } = require('aki-api');\nconst { Chess } = require('chess.js');\n\nclass GamesService {\n  constructor() {\n    this.activeGames = new Map();\n    this.gameTimeouts = new Map();\n    this.rateLimits = new Map();\n  }\n\n  /**\n   * Tebak Bom Game Implementation\n   * @param {string} chatId - Chat ID\n   * @param {string} playerId - Player ID\n   */\n  async startTebakBom(chatId, playerId) {\n    try {\n      const gameId = `${chatId}_${playerId}_${Date.now()}`;\n\n      const gameData = {\n        id: gameId,\n        chatId,\n        playerId,\n        petak: this.generateBombPositions(),\n        board: ['1ï¸âƒ£', '2ï¸âƒ£', '3ï¸âƒ£', '4ï¸âƒ£', '5ï¸âƒ£', '6ï¸âƒ£', '7ï¸âƒ£', '8ï¸âƒ£', '9ï¸âƒ£', 'ðŸ”Ÿ'],\n        bomb: 3,\n        lolos: 7,\n        pick: 0,\n        nyawa: ['â¤ï¸', 'â¤ï¸', 'â¤ï¸'],\n        startTime: Date.now(),\n      };\n\n      this.activeGames.set(gameId, gameData);\n\n      // Set timeout for 2 minutes\n      const timeout = setTimeout(() => {\n        this.endGame(gameId, 'timeout');\n      }, 120000);\n\n      this.gameTimeouts.set(gameId, timeout);\n\n      return {\n        success: true,\n        message: `*TEBAK BOM*\\n\\n${gameData.board.join('')}\\n\\nPilih angka tersebut! Jangan sampai terkena Bom!\\nBomb: ${gameData.bomb}\\nNyawa: ${gameData.nyawa.join('')}`,\n        gameId,\n      };\n    } catch (error) {\n      console.error('Error starting tebak bom:', error);\n      throw new Error('Failed to start tebak bom game');\n    }\n  }\n\n  /**\n   * Process Tebak Bom guess\n   * @param {string} gameId - Game ID\n   * @param {number} guess - User's guess (1-10)\n   */\n  async processTebakBomGuess(gameId, guess) {\n    try {\n      const game = this.activeGames.get(gameId);\n      if (!game) {\n        return { success: false, message: 'Game tidak ditemukan!' };\n      }\n\n      if (guess < 1 || guess > 10) {\n        return { success: false, message: 'Pilih angka 1-10!' };\n      }\n\n      const position = guess - 1;\n\n      // Check if position already picked\n      if (game.petak[position] === 1) {\n        return { success: false, message: 'Posisi sudah dipilih sebelumnya!' };\n      }\n\n      // Check if it's a bomb\n      if (game.petak[position] === 2) {\n        game.board[position] = 'ðŸ’£';\n        game.pick++;\n        game.bomb--;\n        game.nyawa.pop();\n\n        if (game.nyawa.length < 1) {\n          return await this.endGame(gameId, 'lose');\n        }\n        return {\n          success: true,\n          message: `*PILIH ANGKA*\\n\\nKamu terkena bomb\\n${game.board.join('')}\\n\\nTerpilih: ${game.pick}\\nSisa nyawa: ${game.nyawa.join('')}`,\n          isBomb: true,\n        };\n      }\n      // Safe position\n      game.petak[position] = 1;\n      game.board[position] = 'ðŸŒ€';\n      game.pick++;\n      game.lolos--;\n\n      if (game.lolos < 1) {\n        return await this.endGame(gameId, 'win');\n      }\n      return {\n        success: true,\n        message: `*PILIH ANGKA*\\n\\n${game.board.join('')}\\n\\nTerpilih: ${game.pick}\\nSisa nyawa: ${game.nyawa.join('')}\\nBomb: ${game.bomb}`,\n        isSafe: true,\n      };\n    } catch (error) {\n      console.error('Error processing tebak bom guess:', error);\n      throw new Error('Failed to process guess');\n    }\n  }\n\n  /**\n   * Akinator Game Implementation\n   * @param {string} playerId - Player ID\n   */\n  async startAkinator(playerId) {\n    try {\n      const gameId = `akinator_${playerId}_${Date.now()}`;\n\n      const akinator = new AkinatorAPI({ region: 'id', childMode: false });\n      await akinator.start();\n\n      const gameData = {\n        id: gameId,\n        playerId,\n        akinator,\n        startTime: Date.now(),\n      };\n\n      this.activeGames.set(gameId, gameData);\n\n      // Set timeout for 10 minutes\n      const timeout = setTimeout(() => {\n        this.endGame(gameId, 'timeout');\n      }, 600000);\n\n      this.gameTimeouts.set(gameId, timeout);\n\n      return {\n        success: true,\n        message: `ðŸŽ® Akinator Game:\\n\\n@${playerId.split('@')[0]}\\n${akinator.question}\\n\\n- 0 - Ya\\n- 1 - Tidak\\n- 2 - Tidak Tau\\n- 3 - Mungkin\\n- 4 - Mungkin Tidak\\n- 5 - Back`,\n        gameId,\n      };\n    } catch (error) {\n      console.error('Error starting akinator:', error);\n      throw new Error('Failed to start akinator game');\n    }\n  }\n\n  /**\n   * Process Akinator answer\n   * @param {string} gameId - Game ID\n   * @param {number} answer - User's answer (0-5)\n   */\n  async processAkinatorAnswer(gameId, answer) {\n    try {\n      const game = this.activeGames.get(gameId);\n      if (!game || !game.akinator) {\n        return { success: false, message: 'Game akinator tidak ditemukan!' };\n      }\n\n      if (answer === 5) {\n        // Back/End game\n        if (game.akinator.progress.toFixed(0) == 0) {\n          await this.endGame(gameId, 'quit');\n          return { success: true, message: 'ðŸŽ® Akinator Game End!\\nWith *0* Progress' };\n        }\n\n        game.akinator.isWin = false;\n        await game.akinator.cancelAnswer();\n\n        return {\n          success: true,\n          message: `ðŸŽ® Akinator Game Back:\\n\\n@${game.playerId.split('@')[0]} (${game.akinator.progress.toFixed(2)})%\\n${game.akinator.question}\\n\\n- 0 - Ya\\n- 1 - Tidak\\n- 2 - Tidak Tau\\n- 3 - Mungkin\\n- 4 - Mungkin Tidak\\n- 5 - ${game.akinator.progress.toFixed(0) == 0 ? 'End' : 'Back'}`,\n          needNewQuestion: true,\n        };\n      }\n\n      await game.akinator.answer(answer);\n\n      if (game.akinator.isWin) {\n        return {\n          success: true,\n          message: `ðŸŽ® Akinator Answer:\\n\\n@${game.playerId.split('@')[0]}\\nDia adalah *${game.akinator.sugestion_name}*\\n_${game.akinator.sugestion_desc}_\\n\\n- 5 - Back\\n- *Ya* (untuk keluar dari sesi)`,\n          isWin: true,\n          suggestion: {\n            name: game.akinator.sugestion_name,\n            description: game.akinator.sugestion_desc,\n            photo: game.akinator.sugestion_photo,\n          },\n        };\n      }\n      return {\n        success: true,\n        message: `ðŸŽ® Akinator Game:\\n\\n@${game.playerId.split('@')[0]} (${game.akinator.progress.toFixed(2)})%\\n${game.akinator.question}\\n\\n- 0 - Ya\\n- 1 - Tidak\\n- 2 - Tidak Tau\\n- 3 - Mungkin\\n- 4 - Mungkin Tidak\\n- 5 - Back`,\n        progress: game.akinator.progress,\n      };\n    } catch (error) {\n      console.error('Error processing akinator answer:', error);\n      throw new Error('Failed to process akinator answer');\n    }\n  }\n\n  /**\n   * Chess Game Implementation\n   * @param {string} chatId - Chat ID\n   * @param {string} player1Id - Player 1 ID\n   * @param {string} player2Id - Player 2 ID\n   */\n  async startChessGame(chatId, player1Id, player2Id) {\n    try {\n      const gameId = `chess_${chatId}_${Date.now()}`;\n\n      const gameData = {\n        id: gameId,\n        chatId,\n        player1: player1Id,\n        player2: player2Id,\n        game: new Chess(),\n        turn: player1Id,\n        startTime: Date.now(),\n        botMode: false,\n      };\n\n      this.activeGames.set(gameId, gameData);\n\n      // Set timeout for 30 minutes\n      const timeout = setTimeout(() => {\n        this.endGame(gameId, 'timeout');\n      }, 1800000);\n\n      this.gameTimeouts.set(gameId, timeout);\n\n      return {\n        success: true,\n        message: `â™Ÿï¸CHESS GAME\\n\\n@${player1Id.split('@')[0]} vs @${player2Id.split('@')[0]}\\n\\n@${player1Id.split('@')[0]} mulai duluan!\\nGiliran: @${player1Id.split('@')[0]}\\n\\nFormat: from to (e2 e4)`,\n        gameId,\n      };\n    } catch (error) {\n      console.error('Error starting chess game:', error);\n      throw new Error('Failed to start chess game');\n    }\n  }\n\n  /**\n   * Process Chess move\n   * @param {string} gameId - Game ID\n   * @param {string} playerId - Player making the move\n   * @param {string} move - Chess move (e.g., \"e2 e4\")\n   */\n  async processChessMove(gameId, playerId, move) {\n    try {\n      const game = this.activeGames.get(gameId);\n      if (!game || !game.game) {\n        return { success: false, message: 'Game catur tidak ditemukan!' };\n      }\n\n      if (game.turn !== playerId) {\n        return { success: false, message: 'Bukan giliranmu!' };\n      }\n\n      if (game.game.isGameOver()) {\n        return { success: false, message: 'Game sudah selesai!' };\n      }\n\n      const [from, to] = move.toLowerCase().split(' ');\n      if (!from || !to || from.length !== 2 || to.length !== 2) {\n        return { success: false, message: 'Format salah! Gunakan: e2 e4' };\n      }\n\n      try {\n        game.game.move({ from, to });\n      } catch (error) {\n        return { success: false, message: 'Langkah tidak valid!' };\n      }\n\n      // Switch turns\n      game.turn = game.turn === game.player1 ? game.player2 : game.player1;\n\n      if (game.game.isGameOver()) {\n        let result;\n        if (game.game.isCheckmate()) {\n          const winner = game.game.turn() === 'w' ? game.player2 : game.player1;\n          result = `â™Ÿï¸CHECKMATE!\\n@${winner.split('@')[0]} menang!`;\n        } else if (game.game.isDraw()) {\n          result = 'â™Ÿï¸DRAW!\\nPermainan seri!';\n        } else {\n          result = 'â™Ÿï¸GAME OVER!';\n        }\n\n        await this.endGame(gameId, 'finished');\n        return {\n          success: true,\n          message: result,\n          gameOver: true,\n          fen: game.game.fen(),\n        };\n      }\n\n      return {\n        success: true,\n        message: `â™Ÿï¸CHESS GAME\\n\\nLangkah: ${from} â†’ ${to}\\nGiliran: @${game.turn.split('@')[0]}\\n\\nReply pesan ini untuk lanjut bermain!\\nExample: e2 e4`,\n        fen: game.game.fen(),\n      };\n    } catch (error) {\n      console.error('Error processing chess move:', error);\n      throw new Error('Failed to process chess move');\n    }\n  }\n\n  /**\n   * Generate bomb positions for tebak bom game\n   */\n  generateBombPositions() {\n    const positions = [0, 0, 0, 2, 0, 2, 0, 2, 0, 0]; // 3 bombs at positions 3, 5, 7\n    return positions.sort(() => Math.random() - 0.5);\n  }\n\n  /**\n   * End game and cleanup\n   * @param {string} gameId - Game ID\n   * @param {string} reason - Reason for ending\n   */\n  async endGame(gameId, reason) {\n    try {\n      const game = this.activeGames.get(gameId);\n      if (!game) return;\n\n      // Clear timeout\n      const timeout = this.gameTimeouts.get(gameId);\n      if (timeout) {\n        clearTimeout(timeout);\n        this.gameTimeouts.delete(gameId);\n      }\n\n      // Remove from active games\n      this.activeGames.delete(gameId);\n\n      console.log(`Game ${gameId} ended. Reason: ${reason}`);\n    } catch (error) {\n      console.error('Error ending game:', error);\n    }\n  }\n\n  /**\n   * Get active game by player\n   * @param {string} playerId - Player ID\n   * @param {string} gameType - Type of game\n   */\n  getActiveGame(playerId, gameType = null) {\n    for (const [gameId, game] of this.activeGames.entries()) {\n      if (game.playerId === playerId || game.player1 === playerId || game.player2 === playerId) {\n        if (gameType && !gameId.includes(gameType)) continue;\n        return { gameId, game };\n      }\n    }\n    return null;\n  }\n\n  /**\n   * Clean up inactive games\n   */\n  cleanupInactiveGames() {\n    const now = Date.now();\n    const maxGameTime = 30 * 60 * 1000; // 30 minutes\n\n    for (const [gameId, game] of this.activeGames.entries()) {\n      if (now - game.startTime > maxGameTime) {\n        this.endGame(gameId, 'cleanup');\n      }\n    }\n  }\n\n  /**\n   * Check rate limits for games\n   * @param {string} playerId - Player ID\n   * @param {string} gameType - Type of game\n   */\n  checkRateLimit(playerId, gameType) {\n    const key = `${playerId}_${gameType}`;\n    const now = Date.now();\n    const limit = this.rateLimits.get(key);\n\n    if (!limit || now - limit.lastGame > 60000) {\n      // 1 minute cooldown\n      this.rateLimits.set(key, { lastGame: now, count: 1 });\n      return true;\n    }\n\n    if (limit.count >= 3) {\n      // Max 3 games per minute\n      return false;\n    }\n\n    limit.count++;\n    return true;\n  }\n}\n\nmodule.exports = new GamesService();\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\src\\services\\gamesServiceFixed.js","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'axios' is assigned a value but never used.","line":6,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":12,"suggestions":[{"messageId":"removeVar","data":{"varName":"axios"},"fix":{"range":[145,176],"text":""},"desc":"Remove unused variable 'axios'."}]},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":6,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":6,"endColumn":22},{"ruleId":"no-unused-vars","severity":1,"message":"'AkinatorAnswer' is assigned a value but never used.","line":7,"column":22,"nodeType":"Identifier","messageId":"unusedVar","endLine":7,"endColumn":36,"suggestions":[{"messageId":"removeVar","data":{"varName":"AkinatorAnswer"},"fix":{"range":[196,212],"text":""},"desc":"Remove unused variable 'AkinatorAnswer'."}]},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":7,"column":41,"nodeType":"Identifier","messageId":"undef","endLine":7,"endColumn":48},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":8,"column":19,"nodeType":"Identifier","messageId":"undef","endLine":8,"endColumn":26},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":54,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":54,"endColumn":20,"suggestions":[{"fix":{"range":[1495,1545],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-plusplus","severity":2,"message":"Unary operator '++' used.","line":85,"column":9,"nodeType":"UpdateExpression","messageId":"unexpectedUnaryOp","endLine":85,"endColumn":20},{"ruleId":"no-plusplus","severity":2,"message":"Unary operator '--' used.","line":86,"column":9,"nodeType":"UpdateExpression","messageId":"unexpectedUnaryOp","endLine":86,"endColumn":20},{"ruleId":"no-plusplus","severity":2,"message":"Unary operator '++' used.","line":101,"column":7,"nodeType":"UpdateExpression","messageId":"unexpectedUnaryOp","endLine":101,"endColumn":18},{"ruleId":"no-plusplus","severity":2,"message":"Unary operator '--' used.","line":102,"column":7,"nodeType":"UpdateExpression","messageId":"unexpectedUnaryOp","endLine":102,"endColumn":19},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":113,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":113,"endColumn":20,"suggestions":[{"fix":{"range":[3220,3278],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":151,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":151,"endColumn":20,"suggestions":[{"fix":{"range":[4263,4312],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"eqeqeq","severity":2,"message":"Expected '===' and instead saw '=='.","line":170,"column":47,"nodeType":"BinaryExpression","messageId":"unexpected","endLine":170,"endColumn":49,"suggestions":[{"messageId":"replaceOperator","data":{"expectedOperator":"===","actualOperator":"=="},"fix":{"range":[4837,4839],"text":"==="},"desc":"Use '===' instead of '=='."}]},{"ruleId":"eqeqeq","severity":2,"message":"Expected '===' and instead saw '=='.","line":180,"column":267,"nodeType":"BinaryExpression","messageId":"unexpected","endLine":180,"endColumn":269,"suggestions":[{"messageId":"replaceOperator","data":{"expectedOperator":"===","actualOperator":"=="},"fix":{"range":[5381,5383],"text":"==="},"desc":"Use '===' instead of '=='."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":205,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":205,"endColumn":20,"suggestions":[{"fix":{"range":[6361,6419],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":246,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":246,"endColumn":20,"suggestions":[{"fix":{"range":[7544,7595],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":279,"column":16,"nodeType":"Identifier","messageId":"unusedVar","endLine":279,"endColumn":21},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":312,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":312,"endColumn":20,"suggestions":[{"fix":{"range":[9601,9654],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"class-methods-use-this","severity":2,"message":"Expected 'this' to be used by class method 'generateBombPositions'.","line":320,"column":3,"nodeType":"FunctionExpression","messageId":"missingThis","endLine":320,"endColumn":24},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":345,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":345,"endColumn":18,"suggestions":[{"fix":{"range":[10456,10511],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":347,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":347,"endColumn":20,"suggestions":[{"fix":{"range":[10540,10583],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-restricted-syntax","severity":2,"message":"iterators/generators require regenerator-runtime, which is too heavyweight for this guide to allow them. Separately, loops should be avoided in favor of array iterations.","line":357,"column":5,"nodeType":"ForOfStatement","messageId":"restrictedSyntax","endLine":362,"endColumn":6},{"ruleId":"no-continue","severity":2,"message":"Unexpected use of continue statement.","line":359,"column":53,"nodeType":"ContinueStatement","messageId":"unexpected","endLine":359,"endColumn":62},{"ruleId":"no-restricted-syntax","severity":2,"message":"iterators/generators require regenerator-runtime, which is too heavyweight for this guide to allow them. Separately, loops should be avoided in favor of array iterations.","line":373,"column":5,"nodeType":"ForOfStatement","messageId":"restrictedSyntax","endLine":377,"endColumn":6},{"ruleId":"no-plusplus","severity":2,"message":"Unary operator '++' used.","line":401,"column":5,"nodeType":"UpdateExpression","messageId":"unexpectedUnaryOp","endLine":401,"endColumn":18},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":413,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":413,"endColumn":7}],"suppressedMessages":[],"errorCount":15,"fatalErrorCount":0,"warningCount":11,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Games Service - Interactive games for WhatsApp Bot\n * Implements proper architecture with error handling, logging, and rate limiting\n */\n\nconst axios = require('axios');\nconst { AkinatorAPI, AkinatorAnswer } = require('aki-api');\nconst { Chess } = require('chess.js');\n\nclass GamesService {\n  constructor() {\n    this.activeGames = new Map();\n    this.gameTimeouts = new Map();\n    this.rateLimits = new Map();\n  }\n\n  /**\n   * Tebak Bom Game Implementation\n   * @param {string} chatId - Chat ID\n   * @param {string} playerId - Player ID\n   */\n  async startTebakBom(chatId, playerId) {\n    try {\n      const gameId = `${chatId}_${playerId}_${Date.now()}`;\n\n      const gameData = {\n        id: gameId,\n        chatId,\n        playerId,\n        petak: this.generateBombPositions(),\n        board: ['1ï¸âƒ£', '2ï¸âƒ£', '3ï¸âƒ£', '4ï¸âƒ£', '5ï¸âƒ£', '6ï¸âƒ£', '7ï¸âƒ£', '8ï¸âƒ£', '9ï¸âƒ£', 'ðŸ”Ÿ'],\n        bomb: 3,\n        lolos: 7,\n        pick: 0,\n        nyawa: ['â¤ï¸', 'â¤ï¸', 'â¤ï¸'],\n        startTime: Date.now(),\n      };\n\n      this.activeGames.set(gameId, gameData);\n\n      // Set timeout for 2 minutes\n      const timeout = setTimeout(() => {\n        this.endGame(gameId, 'timeout');\n      }, 120000);\n\n      this.gameTimeouts.set(gameId, timeout);\n\n      return {\n        success: true,\n        message: `*TEBAK BOM*\\n\\n${gameData.board.join('')}\\n\\nPilih angka tersebut! Jangan sampai terkena Bom!\\nBomb: ${gameData.bomb}\\nNyawa: ${gameData.nyawa.join('')}`,\n        gameId,\n      };\n    } catch (error) {\n      console.error('Error starting tebak bom:', error);\n      throw new Error('Failed to start tebak bom game');\n    }\n  }\n\n  /**\n   * Process Tebak Bom guess\n   * @param {string} gameId - Game ID\n   * @param {number} guess - User's guess (1-10)\n   */\n  async processTebakBomGuess(gameId, guess) {\n    try {\n      const game = this.activeGames.get(gameId);\n      if (!game) {\n        return { success: false, message: 'Game tidak ditemukan!' };\n      }\n\n      if (guess < 1 || guess > 10) {\n        return { success: false, message: 'Pilih angka 1-10!' };\n      }\n\n      const position = guess - 1;\n\n      // Check if position already picked\n      if (game.petak[position] === 1) {\n        return { success: false, message: 'Posisi sudah dipilih sebelumnya!' };\n      }\n\n      // Check if it's a bomb\n      if (game.petak[position] === 2) {\n        game.board[position] = 'ðŸ’£';\n        game.pick++;\n        game.bomb--;\n        game.nyawa.pop();\n\n        if (game.nyawa.length < 1) {\n          return await this.endGame(gameId, 'lose');\n        }\n        return {\n          success: true,\n          message: `*PILIH ANGKA*\\n\\nKamu terkena bomb\\n${game.board.join('')}\\n\\nTerpilih: ${game.pick}\\nSisa nyawa: ${game.nyawa.join('')}`,\n          isBomb: true,\n        };\n      }\n      // Safe position\n      game.petak[position] = 1;\n      game.board[position] = 'ðŸŒ€';\n      game.pick++;\n      game.lolos--;\n\n      if (game.lolos < 1) {\n        return await this.endGame(gameId, 'win');\n      }\n      return {\n        success: true,\n        message: `*PILIH ANGKA*\\n\\n${game.board.join('')}\\n\\nTerpilih: ${game.pick}\\nSisa nyawa: ${game.nyawa.join('')}\\nBomb: ${game.bomb}`,\n        isSafe: true,\n      };\n    } catch (error) {\n      console.error('Error processing tebak bom guess:', error);\n      throw new Error('Failed to process guess');\n    }\n  }\n\n  /**\n   * Akinator Game Implementation\n   * @param {string} playerId - Player ID\n   */\n  async startAkinator(playerId) {\n    try {\n      const gameId = `akinator_${playerId}_${Date.now()}`;\n\n      const akinator = new AkinatorAPI({ region: 'id', childMode: false });\n      await akinator.start();\n\n      const gameData = {\n        id: gameId,\n        playerId,\n        akinator,\n        startTime: Date.now(),\n      };\n\n      this.activeGames.set(gameId, gameData);\n\n      // Set timeout for 10 minutes\n      const timeout = setTimeout(() => {\n        this.endGame(gameId, 'timeout');\n      }, 600000);\n\n      this.gameTimeouts.set(gameId, timeout);\n\n      return {\n        success: true,\n        message: `ðŸŽ® Akinator Game:\\n\\n@${playerId.split('@')[0]}\\n${akinator.question}\\n\\n- 0 - Ya\\n- 1 - Tidak\\n- 2 - Tidak Tau\\n- 3 - Mungkin\\n- 4 - Mungkin Tidak\\n- 5 - Back`,\n        gameId,\n      };\n    } catch (error) {\n      console.error('Error starting akinator:', error);\n      throw new Error('Failed to start akinator game');\n    }\n  }\n\n  /**\n   * Process Akinator answer\n   * @param {string} gameId - Game ID\n   * @param {number} answer - User's answer (0-5)\n   */\n  async processAkinatorAnswer(gameId, answer) {\n    try {\n      const game = this.activeGames.get(gameId);\n      if (!game || !game.akinator) {\n        return { success: false, message: 'Game akinator tidak ditemukan!' };\n      }\n\n      if (answer === 5) {\n        // Back/End game\n        if (game.akinator.progress.toFixed(0) == 0) {\n          await this.endGame(gameId, 'quit');\n          return { success: true, message: 'ðŸŽ® Akinator Game End!\\nWith *0* Progress' };\n        }\n\n        game.akinator.isWin = false;\n        await game.akinator.cancelAnswer();\n\n        return {\n          success: true,\n          message: `ðŸŽ® Akinator Game Back:\\n\\n@${game.playerId.split('@')[0]} (${game.akinator.progress.toFixed(2)})%\\n${game.akinator.question}\\n\\n- 0 - Ya\\n- 1 - Tidak\\n- 2 - Tidak Tau\\n- 3 - Mungkin\\n- 4 - Mungkin Tidak\\n- 5 - ${game.akinator.progress.toFixed(0) == 0 ? 'End' : 'Back'}`,\n          needNewQuestion: true,\n        };\n      }\n\n      await game.akinator.answer(answer);\n\n      if (game.akinator.isWin) {\n        return {\n          success: true,\n          message: `ðŸŽ® Akinator Answer:\\n\\n@${game.playerId.split('@')[0]}\\nDia adalah *${game.akinator.sugestion_name}*\\n_${game.akinator.sugestion_desc}_\\n\\n- 5 - Back\\n- *Ya* (untuk keluar dari sesi)`,\n          isWin: true,\n          suggestion: {\n            name: game.akinator.sugestion_name,\n            description: game.akinator.sugestion_desc,\n            photo: game.akinator.sugestion_photo,\n          },\n        };\n      }\n      return {\n        success: true,\n        message: `ðŸŽ® Akinator Game:\\n\\n@${game.playerId.split('@')[0]} (${game.akinator.progress.toFixed(2)})%\\n${game.akinator.question}\\n\\n- 0 - Ya\\n- 1 - Tidak\\n- 2 - Tidak Tau\\n- 3 - Mungkin\\n- 4 - Mungkin Tidak\\n- 5 - Back`,\n        progress: game.akinator.progress,\n      };\n    } catch (error) {\n      console.error('Error processing akinator answer:', error);\n      throw new Error('Failed to process akinator answer');\n    }\n  }\n\n  /**\n   * Chess Game Implementation\n   * @param {string} chatId - Chat ID\n   * @param {string} player1Id - Player 1 ID\n   * @param {string} player2Id - Player 2 ID\n   */\n  async startChessGame(chatId, player1Id, player2Id) {\n    try {\n      const gameId = `chess_${chatId}_${Date.now()}`;\n\n      const gameData = {\n        id: gameId,\n        chatId,\n        player1: player1Id,\n        player2: player2Id,\n        game: new Chess(),\n        turn: player1Id,\n        startTime: Date.now(),\n        botMode: false,\n      };\n\n      this.activeGames.set(gameId, gameData);\n\n      // Set timeout for 30 minutes\n      const timeout = setTimeout(() => {\n        this.endGame(gameId, 'timeout');\n      }, 1800000);\n\n      this.gameTimeouts.set(gameId, timeout);\n\n      return {\n        success: true,\n        message: `â™Ÿï¸CHESS GAME\\n\\n@${player1Id.split('@')[0]} vs @${player2Id.split('@')[0]}\\n\\n@${player1Id.split('@')[0]} mulai duluan!\\nGiliran: @${player1Id.split('@')[0]}\\n\\nFormat: from to (e2 e4)`,\n        gameId,\n      };\n    } catch (error) {\n      console.error('Error starting chess game:', error);\n      throw new Error('Failed to start chess game');\n    }\n  }\n\n  /**\n   * Process Chess move\n   * @param {string} gameId - Game ID\n   * @param {string} playerId - Player making the move\n   * @param {string} move - Chess move (e.g., \"e2 e4\")\n   */\n  async processChessMove(gameId, playerId, move) {\n    try {\n      const game = this.activeGames.get(gameId);\n      if (!game || !game.game) {\n        return { success: false, message: 'Game catur tidak ditemukan!' };\n      }\n\n      if (game.turn !== playerId) {\n        return { success: false, message: 'Bukan giliranmu!' };\n      }\n\n      if (game.game.isGameOver()) {\n        return { success: false, message: 'Game sudah selesai!' };\n      }\n\n      const [from, to] = move.toLowerCase().split(' ');\n      if (!from || !to || from.length !== 2 || to.length !== 2) {\n        return { success: false, message: 'Format salah! Gunakan: e2 e4' };\n      }\n\n      try {\n        game.game.move({ from, to });\n      } catch (error) {\n        return { success: false, message: 'Langkah tidak valid!' };\n      }\n\n      // Switch turns\n      game.turn = game.turn === game.player1 ? game.player2 : game.player1;\n\n      if (game.game.isGameOver()) {\n        let result;\n        if (game.game.isCheckmate()) {\n          const winner = game.game.turn() === 'w' ? game.player2 : game.player1;\n          result = `â™Ÿï¸CHECKMATE!\\n@${winner.split('@')[0]} menang!`;\n        } else if (game.game.isDraw()) {\n          result = 'â™Ÿï¸DRAW!\\nPermainan seri!';\n        } else {\n          result = 'â™Ÿï¸GAME OVER!';\n        }\n\n        await this.endGame(gameId, 'finished');\n        return {\n          success: true,\n          message: result,\n          gameOver: true,\n          fen: game.game.fen(),\n        };\n      }\n\n      return {\n        success: true,\n        message: `â™Ÿï¸CHESS GAME\\n\\nLangkah: ${from} â†’ ${to}\\nGiliran: @${game.turn.split('@')[0]}\\n\\nReply pesan ini untuk lanjut bermain!\\nExample: e2 e4`,\n        fen: game.game.fen(),\n      };\n    } catch (error) {\n      console.error('Error processing chess move:', error);\n      throw new Error('Failed to process chess move');\n    }\n  }\n\n  /**\n   * Generate bomb positions for tebak bom game\n   */\n  generateBombPositions() {\n    const positions = [0, 0, 0, 2, 0, 2, 0, 2, 0, 0]; // 3 bombs at positions 3, 5, 7\n    return positions.sort(() => Math.random() - 0.5);\n  }\n\n  /**\n   * End game and cleanup\n   * @param {string} gameId - Game ID\n   * @param {string} reason - Reason for ending\n   */\n  async endGame(gameId, reason) {\n    try {\n      const game = this.activeGames.get(gameId);\n      if (!game) return;\n\n      // Clear timeout\n      const timeout = this.gameTimeouts.get(gameId);\n      if (timeout) {\n        clearTimeout(timeout);\n        this.gameTimeouts.delete(gameId);\n      }\n\n      // Remove from active games\n      this.activeGames.delete(gameId);\n\n      console.log(`Game ${gameId} ended. Reason: ${reason}`);\n    } catch (error) {\n      console.error('Error ending game:', error);\n    }\n  }\n\n  /**\n   * Get active game by player\n   * @param {string} playerId - Player ID\n   * @param {string} gameType - Type of game\n   */\n  getActiveGame(playerId, gameType = null) {\n    for (const [gameId, game] of this.activeGames.entries()) {\n      if (game.playerId === playerId || game.player1 === playerId || game.player2 === playerId) {\n        if (gameType && !gameId.includes(gameType)) continue;\n        return { gameId, game };\n      }\n    }\n    return null;\n  }\n\n  /**\n   * Clean up inactive games\n   */\n  cleanupInactiveGames() {\n    const now = Date.now();\n    const maxGameTime = 30 * 60 * 1000; // 30 minutes\n\n    for (const [gameId, game] of this.activeGames.entries()) {\n      if (now - game.startTime > maxGameTime) {\n        this.endGame(gameId, 'cleanup');\n      }\n    }\n  }\n\n  /**\n   * Check rate limits for games\n   * @param {string} playerId - Player ID\n   * @param {string} gameType - Type of game\n   */\n  checkRateLimit(playerId, gameType) {\n    const key = `${playerId}_${gameType}`;\n    const now = Date.now();\n    const limit = this.rateLimits.get(key);\n\n    if (!limit || now - limit.lastGame > 60000) {\n      // 1 minute cooldown\n      this.rateLimits.set(key, { lastGame: now, count: 1 });\n      return true;\n    }\n\n    if (limit.count >= 3) {\n      // Max 3 games per minute\n      return false;\n    }\n\n    limit.count++;\n    return true;\n  }\n\n  /**\n   * Get active games count (for monitoring)\n   */\n  getActiveGamesCount() {\n    return this.activeGames.size;\n  }\n}\n\nmodule.exports = new GamesService();\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\src\\services\\index.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":6,"column":22,"nodeType":"Identifier","messageId":"undef","endLine":6,"endColumn":29},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":7,"column":28,"nodeType":"Identifier","messageId":"undef","endLine":7,"endColumn":35},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":8,"column":24,"nodeType":"Identifier","messageId":"undef","endLine":8,"endColumn":31},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":9,"column":36,"nodeType":"Identifier","messageId":"undef","endLine":9,"endColumn":43},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":10,"column":23,"nodeType":"Identifier","messageId":"undef","endLine":10,"endColumn":30},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":23,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":23,"endColumn":18,"suggestions":[{"fix":{"range":[590,633],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":41,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":41,"endColumn":18,"suggestions":[{"fix":{"range":[1176,1231],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":43,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":43,"endColumn":20,"suggestions":[{"fix":{"range":[1260,1315],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":55,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":55,"endColumn":18,"suggestions":[{"fix":{"range":[1560,1610],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":57,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":57,"endColumn":18,"suggestions":[{"fix":{"range":[1667,1712],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":59,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":59,"endColumn":20,"suggestions":[{"fix":{"range":[1741,1803],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"class-methods-use-this","severity":2,"message":"Expected 'this' to be used by class method 'setupCleanupIntervals'.","line":67,"column":3,"nodeType":"FunctionExpression","messageId":"missingThis","endLine":67,"endColumn":24},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":74,"column":11,"nodeType":"MemberExpression","messageId":"unexpected","endLine":74,"endColumn":24,"suggestions":[{"fix":{"range":[2083,2132],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":86,"column":11,"nodeType":"MemberExpression","messageId":"unexpected","endLine":86,"endColumn":24,"suggestions":[{"fix":{"range":[2344,2394],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":98,"column":11,"nodeType":"MemberExpression","messageId":"unexpected","endLine":98,"endColumn":24,"suggestions":[{"fix":{"range":[2636,2691],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":110,"column":11,"nodeType":"MemberExpression","messageId":"unexpected","endLine":110,"endColumn":24,"suggestions":[{"fix":{"range":[2912,2969],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":155,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":155,"endColumn":7}],"suppressedMessages":[],"errorCount":7,"fatalErrorCount":0,"warningCount":10,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Services Index - Initialize all services\n * Ensures proper initialization of all services with error handling\n */\n\nconst gamesService = require('./gamesService');\nconst funCommandsService = require('./funCommandsService');\nconst stickerService = require('./stickerService');\nconst enhancedDownloadersService = require('./enhancedDownloadersService');\nconst menfesService = require('./menfesService');\n\nclass ServicesManager {\n  constructor() {\n    this.initialized = false;\n    this.services = {};\n  }\n\n  /**\n   * Initialize all services\n   */\n  async initialize() {\n    try {\n      console.log('ðŸ”„ Initializing services...');\n\n      // Initialize services in order\n      await this.initializeService('funCommands', async () => {\n        await funCommandsService.initialize();\n        return funCommandsService;\n      });\n\n      // Initialize other services\n      this.services.games = gamesService;\n      this.services.sticker = stickerService;\n      this.services.enhancedDownloaders = enhancedDownloadersService;\n      this.services.menfes = menfesService;\n\n      // Set up cleanup intervals\n      this.setupCleanupIntervals();\n\n      this.initialized = true;\n      console.log('âœ… All services initialized successfully');\n    } catch (error) {\n      console.error('âŒ Error initializing services:', error);\n      throw error;\n    }\n  }\n\n  /**\n   * Initialize individual service\n   * @param {string} name - Service name\n   * @param {Function} initFunction - Initialization function\n   */\n  async initializeService(name, initFunction) {\n    try {\n      console.log(`ðŸ”„ Initializing ${name} service...`);\n      this.services[name] = await initFunction();\n      console.log(`âœ… ${name} service initialized`);\n    } catch (error) {\n      console.error(`âŒ Error initializing ${name} service:`, error);\n      throw error;\n    }\n  }\n\n  /**\n   * Set up cleanup intervals for services\n   */\n  setupCleanupIntervals() {\n    // Clean up games every 5 minutes\n    setInterval(\n      () => {\n        try {\n          gamesService.cleanupInactiveGames();\n        } catch (error) {\n          console.error('Error cleaning up games:', error);\n        }\n      },\n      5 * 60 * 1000\n    );\n\n    // Clean up menfes sessions every 2 minutes\n    setInterval(\n      () => {\n        try {\n          menfesService.cleanup();\n        } catch (error) {\n          console.error('Error cleaning up menfes:', error);\n        }\n      },\n      2 * 60 * 1000\n    );\n\n    // Clean up downloaders sessions every 10 minutes\n    setInterval(\n      () => {\n        try {\n          enhancedDownloadersService.cleanupOldSessions();\n        } catch (error) {\n          console.error('Error cleaning up downloaders:', error);\n        }\n      },\n      10 * 60 * 1000\n    );\n\n    // Clean up sticker temp files every hour\n    setInterval(\n      () => {\n        try {\n          stickerService.cleanupTempFiles();\n        } catch (error) {\n          console.error('Error cleaning up sticker files:', error);\n        }\n      },\n      60 * 60 * 1000\n    );\n  }\n\n  /**\n   * Get service instance\n   * @param {string} name - Service name\n   */\n  getService(name) {\n    if (!this.initialized) {\n      throw new Error('Services not initialized. Call initialize() first.');\n    }\n\n    const service = this.services[name];\n    if (!service) {\n      throw new Error(`Service '${name}' not found`);\n    }\n\n    return service;\n  }\n\n  /**\n   * Check if services are initialized\n   */\n  isInitialized() {\n    return this.initialized;\n  }\n\n  /**\n   * Get initialization status\n   */\n  getStatus() {\n    return {\n      initialized: this.initialized,\n      services: Object.keys(this.services),\n      activeGames: gamesService.getActiveGamesCount(),\n      activeMenfes: menfesService.getActiveSessionsCount(),\n    };\n  }\n}\n\n// Export singleton instance\nmodule.exports = new ServicesManager();\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\src\\services\\interactiveAuth.js","messages":[{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":44,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":44,"endColumn":18,"suggestions":[{"fix":{"range":[845,907],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'fs' is assigned a value but never used.","line":46,"column":13,"nodeType":"Identifier","messageId":"unusedVar","endLine":46,"endColumn":15,"suggestions":[{"messageId":"removeVar","data":{"varName":"fs"},"fix":{"range":[915,949],"text":""},"desc":"Remove unused variable 'fs'."}]},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":46,"column":18,"nodeType":"Identifier","messageId":"undef","endLine":46,"endColumn":25},{"ruleId":"import-x/no-import-module-exports","severity":2,"message":"Cannot use import declarations in modules that export using CommonJS (module.exports = 'foo' or exports.bar = 'hi')","line":47,"column":7,"nodeType":"ImportDeclaration","messageId":"notAllowed","endLine":47,"endColumn":31},{"ruleId":"no-undef","severity":2,"message":"'__dirname' is not defined.","line":49,"column":35,"nodeType":"Identifier","messageId":"undef","endLine":49,"endColumn":44},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":84,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":84,"endColumn":20,"suggestions":[{"fix":{"range":[2240,2307],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":94,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":94,"endColumn":18,"suggestions":[{"fix":{"range":[2550,2637],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-useless-concat","severity":2,"message":"Unexpected string concatenation of literals.","line":94,"column":24,"nodeType":"BinaryExpression","messageId":"unexpectedConcat","endLine":94,"endColumn":25},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":95,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":95,"endColumn":18,"suggestions":[{"fix":{"range":[2644,2724],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":96,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":96,"endColumn":18,"suggestions":[{"fix":{"range":[2731,2811],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":97,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":97,"endColumn":18,"suggestions":[{"fix":{"range":[2818,2898],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":98,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":98,"endColumn":18,"suggestions":[{"fix":{"range":[2905,2984],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":99,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":99,"endColumn":18,"suggestions":[{"fix":{"range":[2991,3133],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":102,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":102,"endColumn":18,"suggestions":[{"fix":{"range":[3140,3263],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":105,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":105,"endColumn":18,"suggestions":[{"fix":{"range":[3270,3350],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":106,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":106,"endColumn":18,"suggestions":[{"fix":{"range":[3357,3437],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":107,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":107,"endColumn":18,"suggestions":[{"fix":{"range":[3444,3524],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":108,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":108,"endColumn":18,"suggestions":[{"fix":{"range":[3531,3611],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":109,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":109,"endColumn":18,"suggestions":[{"fix":{"range":[3618,3698],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":110,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":110,"endColumn":18,"suggestions":[{"fix":{"range":[3705,3785],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":111,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":111,"endColumn":18,"suggestions":[{"fix":{"range":[3792,3872],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":112,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":112,"endColumn":18,"suggestions":[{"fix":{"range":[3879,3959],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":113,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":113,"endColumn":18,"suggestions":[{"fix":{"range":[3966,4046],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":117,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":117,"endColumn":20,"suggestions":[{"fix":{"range":[4137,4211],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":122,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":122,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":130,"column":13,"nodeType":"MemberExpression","messageId":"unexpected","endLine":130,"endColumn":24,"suggestions":[{"fix":{"range":[4539,4603],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":136,"column":13,"nodeType":"MemberExpression","messageId":"unexpected","endLine":136,"endColumn":24,"suggestions":[{"fix":{"range":[4734,4780],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":149,"column":13,"nodeType":"MemberExpression","messageId":"unexpected","endLine":149,"endColumn":24,"suggestions":[{"fix":{"range":[5157,5225],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":165,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":165,"endColumn":18,"suggestions":[{"fix":{"range":[5558,5645],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-useless-concat","severity":2,"message":"Unexpected string concatenation of literals.","line":165,"column":24,"nodeType":"BinaryExpression","messageId":"unexpectedConcat","endLine":165,"endColumn":25},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":166,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":166,"endColumn":18,"suggestions":[{"fix":{"range":[5652,5732],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":167,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":167,"endColumn":18,"suggestions":[{"fix":{"range":[5739,5819],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":168,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":168,"endColumn":18,"suggestions":[{"fix":{"range":[5826,5906],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":169,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":169,"endColumn":18,"suggestions":[{"fix":{"range":[5913,5993],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":170,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":170,"endColumn":18,"suggestions":[{"fix":{"range":[6000,6080],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":171,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":171,"endColumn":18,"suggestions":[{"fix":{"range":[6087,6167],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":172,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":172,"endColumn":18,"suggestions":[{"fix":{"range":[6174,6254],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":173,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":173,"endColumn":18,"suggestions":[{"fix":{"range":[6261,6341],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":174,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":174,"endColumn":18,"suggestions":[{"fix":{"range":[6348,6428],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":175,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":175,"endColumn":18,"suggestions":[{"fix":{"range":[6435,6515],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":176,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":176,"endColumn":18,"suggestions":[{"fix":{"range":[6522,6602],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":177,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":177,"endColumn":18,"suggestions":[{"fix":{"range":[6609,6689],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":178,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":178,"endColumn":18,"suggestions":[{"fix":{"range":[6696,6776],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":179,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":179,"endColumn":18,"suggestions":[{"fix":{"range":[6783,6863],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":180,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":180,"endColumn":18,"suggestions":[{"fix":{"range":[6870,6950],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":181,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":181,"endColumn":18,"suggestions":[{"fix":{"range":[6957,7037],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":182,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":182,"endColumn":18,"suggestions":[{"fix":{"range":[7044,7124],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":186,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":186,"endColumn":20,"suggestions":[{"fix":{"range":[7215,7294],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":191,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":191,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":199,"column":13,"nodeType":"MemberExpression","messageId":"unexpected","endLine":199,"endColumn":24,"suggestions":[{"fix":{"range":[7612,7662],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":205,"column":13,"nodeType":"MemberExpression","messageId":"unexpected","endLine":205,"endColumn":24,"suggestions":[{"fix":{"range":[7787,7842],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":212,"column":13,"nodeType":"MemberExpression","messageId":"unexpected","endLine":212,"endColumn":24,"suggestions":[{"fix":{"range":[8001,8057],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":216,"column":13,"nodeType":"MemberExpression","messageId":"unexpected","endLine":216,"endColumn":24,"suggestions":[{"fix":{"range":[8137,8205],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-case-declarations","severity":2,"message":"Unexpected lexical declaration in case block.","line":246,"column":11,"nodeType":"VariableDeclaration","messageId":"unexpected","endLine":246,"endColumn":81,"suggestions":[{"messageId":"addBrackets","fix":{"range":[8887,9087],"text":"{ const smartMethod = await this.unifiedAuth.getSmartAuthMethod(config);\n          method = smartMethod.method;\n          result = await this.unifiedAuth.authStrategies[method](config);\n          break; }"},"desc":"Add {} brackets around the case block."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":262,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":262,"endColumn":20,"suggestions":[{"fix":{"range":[9393,9473],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":273,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":273,"endColumn":16,"suggestions":[{"fix":{"range":[9634,9692],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-useless-concat","severity":2,"message":"Unexpected string concatenation of literals.","line":273,"column":22,"nodeType":"BinaryExpression","messageId":"unexpectedConcat","endLine":273,"endColumn":23},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":274,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":274,"endColumn":16,"suggestions":[{"fix":{"range":[9697,9725],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":275,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":275,"endColumn":16,"suggestions":[{"fix":{"range":[9730,9788],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":276,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":276,"endColumn":16,"suggestions":[{"fix":{"range":[9793,9847],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":277,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":277,"endColumn":16,"suggestions":[{"fix":{"range":[9852,9912],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":278,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":278,"endColumn":16,"suggestions":[{"fix":{"range":[9917,9986],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":281,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":281,"endColumn":18,"suggestions":[{"fix":{"range":[10076,10113],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":283,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":283,"endColumn":20,"suggestions":[{"fix":{"range":[10197,10272],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":287,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":287,"endColumn":16,"suggestions":[{"fix":{"range":[10294,10338],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"class-methods-use-this","severity":2,"message":"Expected 'this' to be used by class method 'formatPhoneNumber'.","line":293,"column":3,"nodeType":"FunctionExpression","messageId":"missingThis","endLine":293,"endColumn":20},{"ruleId":"class-methods-use-this","severity":2,"message":"Expected 'this' to be used by class async method 'checkPathExists'.","line":308,"column":3,"nodeType":"FunctionExpression","messageId":"missingThis","endLine":308,"endColumn":24},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":310,"column":13,"nodeType":"Identifier","messageId":"undef","endLine":310,"endColumn":20},{"ruleId":"class-methods-use-this","severity":2,"message":"Expected 'this' to be used by class async method 'analyzeCredsFile'.","line":320,"column":3,"nodeType":"FunctionExpression","messageId":"missingThis","endLine":320,"endColumn":25},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":322,"column":18,"nodeType":"Identifier","messageId":"undef","endLine":322,"endColumn":25},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":337,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":337,"endColumn":20,"suggestions":[{"fix":{"range":[11797,11859],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":343,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":343,"endColumn":7}],"suppressedMessages":[],"errorCount":15,"fatalErrorCount":0,"warningCount":57,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Interactive Authentication Enhancement\n * Adds user choice prompts and session detection to UnifiedSmartAuth\n */\n\nclass InteractiveAuthEnhancement {\n  constructor(unifiedAuth) {\n    this.unifiedAuth = unifiedAuth;\n    this.phoneticAlphabet = {\n      A: 'Alpha',\n      B: 'Bravo',\n      C: 'Charlie',\n      D: 'Delta',\n      E: 'Echo',\n      F: 'Foxtrot',\n      G: 'Golf',\n      H: 'Hotel',\n      I: 'India',\n      J: 'Juliet',\n      K: 'Kilo',\n      L: 'Lima',\n      M: 'Mike',\n      N: 'November',\n      O: 'Oscar',\n      P: 'Papa',\n      Q: 'Quebec',\n      R: 'Romeo',\n      S: 'Sierra',\n      T: 'Tango',\n      U: 'Uniform',\n      V: 'Victor',\n      W: 'Whiskey',\n      X: 'X-ray',\n      Y: 'Yankee',\n      Z: 'Zulu',\n    };\n  }\n\n  /**\n   * Detect existing authenticated session\n   */\n  async detectExistingSession() {\n    try {\n      console.log('ðŸ” Detecting existing authenticated session...');\n\n      const fs = require('fs').promises;\n      import path from 'path';\n\n      const statePath = path.join(__dirname, '../../state');\n      const credsPath = path.join(statePath, 'creds.json');\n\n      // Check if state directory and creds file exist\n      const stateExists = await this.checkPathExists(statePath);\n      const credsExists = await this.checkPathExists(credsPath);\n\n      if (!stateExists || !credsExists) {\n        return { hasSession: false, isValid: false, reason: 'No session files found' };\n      }\n\n      // Analyze credentials file\n      const credsAnalysis = await this.analyzeCredsFile(credsPath);\n\n      // Check if session is valid and registered\n      const isValid =\n        credsAnalysis.hasKeys && credsAnalysis.hasRegistration && credsAnalysis.hasPhoneNumber;\n\n      if (isValid) {\n        return {\n          hasSession: true,\n          isValid: true,\n          sessionInfo: {\n            phoneNumber: credsAnalysis.phoneNumber,\n            registrationId: credsAnalysis.registrationId,\n            lastActive:\n              credsAnalysis.processedHistoryMessages.length > 0\n                ? new Date().toISOString()\n                : 'Unknown',\n          },\n        };\n      }\n\n      return { hasSession: false, isValid: false, reason: 'Session exists but not valid' };\n    } catch (error) {\n      console.error('Failed to detect existing session:', error.message);\n      return { hasSession: false, isValid: false, reason: 'Detection failed' };\n    }\n  }\n\n  /**\n   * Interactive session choice for existing sessions\n   */\n  async promptSessionChoice(sessionInfo) {\n    return new Promise(resolve => {\n      console.log('\\n' + 'â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—');\n      console.log('â•‘                    WhatsDeX Authentication                   â•‘');\n      console.log('â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£');\n      console.log('â•‘                                                              â•‘');\n      console.log(`â•‘  âœ… Session Status: Active session found                     â•‘`);\n      console.log(\n        `â•‘  ðŸ“± Phone: ${this.formatPhoneNumber(sessionInfo.sessionInfo.phoneNumber) || 'Unknown'}                     â•‘`\n      );\n      console.log(\n        `â•‘  ðŸ•’ Last active: ${sessionInfo.sessionInfo.lastActive || 'Unknown'}                     â•‘`\n      );\n      console.log('â•‘                                                              â•‘');\n      console.log('â•‘  What would you like to do?                                  â•‘');\n      console.log('â•‘                                                              â•‘');\n      console.log('â•‘  1. ðŸš€ Continue existing session                             â•‘');\n      console.log('â•‘  2. ðŸ”„ Re-authenticate (New session)                         â•‘');\n      console.log('â•‘  3. ðŸ“Š View session analytics                                â•‘');\n      console.log('â•‘                                                              â•‘');\n      console.log('â•‘  Your choice (1-3) [Default: Continue]:                      â•‘');\n      console.log('â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•');\n\n      // Set timeout for auto-selection\n      const timeout = setTimeout(() => {\n        console.log('\\nâ° No input received, continuing with existing session...');\n        resolve('continue');\n      }, 15000); // 15 seconds\n\n      // Handle user input\n      process.stdin.once('data', data => {\n        clearTimeout(timeout);\n        const input = data.toString().trim().toLowerCase();\n\n        switch (input) {\n          case '1':\n          case 'continue':\n          case 'c':\n            console.log('âœ… Continuing with existing authenticated session');\n            resolve('continue');\n            break;\n          case '2':\n          case 're-auth':\n          case 'r':\n            console.log('ðŸ”„ Re-authentication requested');\n            resolve('re-auth');\n            break;\n          case '3':\n          case 'analytics':\n          case 'a':\n            this.displayAnalytics();\n            // After showing analytics, ask again\n            setTimeout(() => {\n              this.promptSessionChoice(sessionInfo).then(resolve);\n            }, 2000);\n            break;\n          default:\n            console.log(`âŒ Invalid choice: ${input}. Please enter 1, 2, or 3.`);\n            // Retry\n            setTimeout(() => {\n              this.promptSessionChoice(sessionInfo).then(resolve);\n            }, 1000);\n            break;\n        }\n      });\n    });\n  }\n\n  /**\n   * Interactive authentication method choice\n   */\n  async promptAuthenticationChoice() {\n    return new Promise(resolve => {\n      console.log('\\n' + 'â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—');\n      console.log('â•‘                    WhatsDeX Authentication                   â•‘');\n      console.log('â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£');\n      console.log('â•‘                                                              â•‘');\n      console.log('â•‘  ðŸ” Session Status: No active session found                  â•‘');\n      console.log('â•‘                                                              â•‘');\n      console.log('â•‘  Choose authentication method:                               â•‘');\n      console.log('â•‘                                                              â•‘');\n      console.log('â•‘  1. ðŸ“± QR Code (Recommended for beginners)                   â•‘');\n      console.log('â•‘     Scan with WhatsApp camera                                â•‘');\n      console.log('â•‘                                                              â•‘');\n      console.log('â•‘  2. ðŸ”¢ Pairing Code (Advanced users)                         â•‘');\n      console.log('â•‘     Enter code in WhatsApp Linked Devices                    â•‘');\n      console.log('â•‘                                                              â•‘');\n      console.log('â•‘  3. ðŸ”„ Auto-select (Based on learning data)                  â•‘');\n      console.log('â•‘                                                              â•‘');\n      console.log('â•‘  Your choice (1-3) [Press Enter for auto]:                   â•‘');\n      console.log('â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•');\n\n      // Set timeout for auto-selection\n      const timeout = setTimeout(() => {\n        console.log('\\nâ° No input received, auto-selecting based on learning data...');\n        resolve('auto');\n      }, 20000); // 20 seconds\n\n      // Handle user input\n      process.stdin.once('data', data => {\n        clearTimeout(timeout);\n        const input = data.toString().trim().toLowerCase();\n\n        switch (input) {\n          case '1':\n          case 'qr':\n          case 'q':\n            console.log('ðŸ“± QR Code authentication selected');\n            resolve('qr');\n            break;\n          case '2':\n          case 'pairing':\n          case 'p':\n            console.log('ðŸ”¢ Pairing Code authentication selected');\n            resolve('pairing');\n            break;\n          case '3':\n          case 'auto':\n          case 'a':\n          case '': // Enter key\n            console.log('ðŸ”„ Auto-selection based on learning data');\n            resolve('auto');\n            break;\n          default:\n            console.log(`âŒ Invalid choice: ${input}. Please enter 1, 2, or 3.`);\n            // Retry\n            setTimeout(() => {\n              this.promptAuthenticationChoice().then(resolve);\n            }, 1000);\n            break;\n        }\n      });\n    });\n  }\n\n  /**\n   * Execute chosen authentication method\n   */\n  async executeChosenMethod(choice, config) {\n    try {\n      let method;\n      let result;\n\n      switch (choice) {\n        case 'qr':\n          method = 'qr';\n          result = await this.unifiedAuth.handleQRStrategy(config);\n          break;\n        case 'pairing':\n          method = 'pairing';\n          result = await this.unifiedAuth.handlePairingStrategy(config);\n          break;\n        case 'auto':\n        default:\n          const smartMethod = await this.unifiedAuth.getSmartAuthMethod(config);\n          method = smartMethod.method;\n          result = await this.unifiedAuth.authStrategies[method](config);\n          break;\n      }\n\n      // Record user choice for learning\n      await this.unifiedAuth.recordUserChoice({\n        type: 'authentication_method',\n        choice: method,\n        timestamp: Date.now(),\n        userSelected: choice !== 'auto',\n      });\n\n      return { method, result };\n    } catch (error) {\n      console.error('Failed to execute chosen authentication method:', error.message);\n      throw error;\n    }\n  }\n\n  /**\n   * Display analytics information\n   */\n  displayAnalytics() {\n    const analytics = this.unifiedAuth.getAnalytics();\n\n    console.log('\\n' + 'ðŸ“Š UNIFIED AUTHENTICATION ANALYTICS');\n    console.log('â•'.repeat(50));\n    console.log(`Total Attempts: ${analytics.totalAttempts}`);\n    console.log(`Success Rate: ${analytics.successRate}`);\n    console.log(`Active Sessions: ${analytics.activeSessions}`);\n    console.log(`Learning Data Points: ${analytics.learningDataPoints}`);\n\n    if (analytics.methodStats && Object.keys(analytics.methodStats).length > 0) {\n      console.log('\\nMethod Performance:');\n      Object.entries(analytics.methodStats).forEach(([method, stats]) => {\n        console.log(`  ${method}: ${stats.successes}/${stats.attempts} successes`);\n      });\n    }\n\n    console.log('\\nPress Enter to continue...');\n  }\n\n  /**\n   * Format phone number for display\n   */\n  formatPhoneNumber(phone) {\n    if (!phone) return 'Not configured';\n    const cleaned = phone.replace(/\\D/g, '');\n    if (cleaned.length === 10) {\n      return `+${cleaned.slice(0, 3)} ${cleaned.slice(3, 6)} ${cleaned.slice(6)}`;\n    }\n    if (cleaned.length === 12) {\n      return `+${cleaned.slice(0, 3)} ${cleaned.slice(3, 6)} ${cleaned.slice(6, 9)} ${cleaned.slice(9)}`;\n    }\n    return `+${cleaned}`;\n  }\n\n  /**\n   * Check if file/directory exists\n   */\n  async checkPathExists(filePath) {\n    try {\n      await require('fs').promises.access(filePath);\n      return true;\n    } catch {\n      return false;\n    }\n  }\n\n  /**\n   * Analyze credentials file\n   */\n  async analyzeCredsFile(credsPath) {\n    try {\n      const fs = require('fs').promises;\n      const credsContent = await fs.readFile(credsPath, 'utf8');\n      const credsData = JSON.parse(credsContent);\n\n      return {\n        hasKeys: !!(credsData.noiseKey && credsData.signedIdentityKey),\n        hasRegistration: credsData.registered === true,\n        hasPhoneNumber: !!(credsData.me && credsData.me.id),\n        phoneNumber: credsData.me?.id || null,\n        pairingCode: credsData.pairingCode || null,\n        registrationId: credsData.registrationId || null,\n        accountSettings: credsData.accountSettings || {},\n        processedHistoryMessages: credsData.processedHistoryMessages || [],\n      };\n    } catch (error) {\n      console.error('Failed to analyze creds file:', error.message);\n      throw error;\n    }\n  }\n}\n\nmodule.exports = InteractiveAuthEnhancement;\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\src\\services\\jobQueue.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":22},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":2,"column":16,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":23},{"ruleId":"no-restricted-syntax","severity":2,"message":"iterators/generators require regenerator-runtime, which is too heavyweight for this guide to allow them. Separately, loops should be avoided in favor of array iterations.","line":57,"column":7,"nodeType":"ForOfStatement","messageId":"restrictedSyntax","endLine":59,"endColumn":8},{"ruleId":"no-await-in-loop","severity":2,"message":"Unexpected `await` inside a loop.","line":58,"column":9,"nodeType":"AwaitExpression","messageId":"unexpectedAwait","endLine":58,"endColumn":50},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":81,"column":17,"nodeType":"Identifier","messageId":"undef","endLine":81,"endColumn":24},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":82,"column":17,"nodeType":"Identifier","messageId":"undef","endLine":82,"endColumn":24},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":83,"column":21,"nodeType":"Identifier","messageId":"undef","endLine":83,"endColumn":28},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":84,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":84,"endColumn":22},{"ruleId":"class-methods-use-this","severity":2,"message":"Expected 'this' to be used by class method 'setupQueueListeners'.","line":110,"column":3,"nodeType":"FunctionExpression","messageId":"missingThis","endLine":110,"endColumn":22},{"ruleId":"no-unused-vars","severity":1,"message":"'jobPromise' is defined but never used. Allowed unused args must match /^_/u.","line":123,"column":30,"nodeType":"Identifier","messageId":"unusedVar","endLine":123,"endColumn":40,"suggestions":[{"messageId":"removeVar","data":{"varName":"jobPromise"},"fix":{"range":[3077,3089],"text":""},"desc":"Remove unused variable 'jobPromise'."}]},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":158,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":158,"endColumn":12},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":163,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":163,"endColumn":12},{"ruleId":"no-restricted-syntax","severity":2,"message":"iterators/generators require regenerator-runtime, which is too heavyweight for this guide to allow them. Separately, loops should be avoided in favor of array iterations.","line":319,"column":5,"nodeType":"ForOfStatement","messageId":"restrictedSyntax","endLine":324,"endColumn":6},{"ruleId":"no-await-in-loop","severity":2,"message":"Unexpected `await` inside a loop.","line":320,"column":26,"nodeType":"AwaitExpression","messageId":"unexpectedAwait","endLine":320,"endColumn":61},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":439,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":439,"endColumn":7}],"suppressedMessages":[],"errorCount":14,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const Queue = require('bull');\nconst logger = require('../utils/logger');\n\nclass JobQueueService {\n  constructor() {\n    this.queues = new Map();\n    this.processors = new Map();\n    this.isInitialized = false;\n\n    // Default job options\n    this.defaultJobOptions = {\n      removeOnComplete: 50, // Keep last 50 completed jobs\n      removeOnFail: 100, // Keep last 100 failed jobs\n      attempts: 3,\n      backoff: {\n        type: 'exponential',\n        delay: 5000,\n      },\n    };\n\n    // Queue configurations\n    this.queueConfigs = {\n      'ai-processing': {\n        concurrency: 2,\n        priority: 10,\n      },\n      'media-processing': {\n        concurrency: 3,\n        priority: 8,\n      },\n      notification: {\n        concurrency: 5,\n        priority: 5,\n      },\n      analytics: {\n        concurrency: 1,\n        priority: 3,\n      },\n      cleanup: {\n        concurrency: 1,\n        priority: 1,\n      },\n    };\n\n    logger.info('Job queue service initialized');\n  }\n\n  /**\n   * Initialize all queues\n   */\n  async initialize() {\n    if (this.isInitialized) return;\n\n    try {\n      logger.info('Initializing job queues...');\n\n      for (const [queueName, config] of Object.entries(this.queueConfigs)) {\n        await this.createQueue(queueName, config);\n      }\n\n      // Set up global error handlers\n      this.setupGlobalErrorHandlers();\n\n      this.isInitialized = true;\n      logger.info('All job queues initialized successfully');\n    } catch (error) {\n      logger.error('Failed to initialize job queues', { error: error.message });\n      throw error;\n    }\n  }\n\n  /**\n   * Create a new queue\n   * @param {string} queueName - Name of the queue\n   * @param {Object} config - Queue configuration\n   */\n  async createQueue(queueName, config = {}) {\n    try {\n      const queue = new Queue(queueName, {\n        redis: {\n          host: process.env.REDIS_HOST || 'localhost',\n          port: process.env.REDIS_PORT || 6379,\n          password: process.env.REDIS_PASSWORD || '',\n          db: process.env.REDIS_DB || 0,\n        },\n        defaultJobOptions: {\n          ...this.defaultJobOptions,\n          priority: config.priority || 5,\n        },\n      });\n\n      this.queues.set(queueName, queue);\n\n      // Set up queue event listeners\n      this.setupQueueListeners(queue, queueName);\n\n      logger.info(`Queue '${queueName}' created successfully`);\n      return queue;\n    } catch (error) {\n      logger.error(`Failed to create queue '${queueName}'`, { error: error.message });\n      throw error;\n    }\n  }\n\n  /**\n   * Set up event listeners for a queue\n   * @param {Queue} queue - Bull queue instance\n   * @param {string} queueName - Name of the queue\n   */\n  setupQueueListeners(queue, queueName) {\n    queue.on('ready', () => {\n      logger.info(`Queue '${queueName}' is ready`);\n    });\n\n    queue.on('error', error => {\n      logger.error(`Queue '${queueName}' error`, { error: error.message });\n    });\n\n    queue.on('waiting', jobId => {\n      logger.debug(`Job ${jobId} is waiting in queue '${queueName}'`);\n    });\n\n    queue.on('active', (job, jobPromise) => {\n      logger.debug(`Job ${job.id} started in queue '${queueName}'`, {\n        jobName: job.name,\n        data: job.data,\n      });\n    });\n\n    queue.on('completed', (job, result) => {\n      logger.info(`Job ${job.id} completed in queue '${queueName}'`, {\n        jobName: job.name,\n        duration: job.finishedOn - job.processedOn,\n        result: typeof result === 'object' ? JSON.stringify(result) : result,\n      });\n    });\n\n    queue.on('failed', (job, err) => {\n      logger.error(`Job ${job.id} failed in queue '${queueName}'`, {\n        jobName: job.name,\n        error: err.message,\n        attemptsMade: job.attemptsMade,\n        attemptsRemaining: job.opts.attempts - job.attemptsMade,\n      });\n    });\n\n    queue.on('stalled', job => {\n      logger.warn(`Job ${job.id} stalled in queue '${queueName}'`, {\n        jobName: job.name,\n      });\n    });\n  }\n\n  /**\n   * Set up global error handlers\n   */\n  setupGlobalErrorHandlers() {\n    process.on('SIGTERM', async () => {\n      logger.info('Received SIGTERM, closing job queues...');\n      await this.closeAllQueues();\n    });\n\n    process.on('SIGINT', async () => {\n      logger.info('Received SIGINT, closing job queues...');\n      await this.closeAllQueues();\n    });\n  }\n\n  /**\n   * Add a job to a queue\n   * @param {string} queueName - Name of the queue\n   * @param {string} jobName - Name of the job\n   * @param {Object} data - Job data\n   * @param {Object} options - Job options\n   * @returns {Promise<Job>} Job instance\n   */\n  async addJob(queueName, jobName, data = {}, options = {}) {\n    try {\n      const queue = this.queues.get(queueName);\n      if (!queue) {\n        throw new Error(`Queue '${queueName}' not found`);\n      }\n\n      // Strip circular references to prevent JSON.stringify errors in Bull\n      let serializableData;\n      try {\n        serializableData = JSON.parse(JSON.stringify(data));\n      } catch (serializeError) {\n        logger.warn('Data contains circular references, serializing with fallback', {\n          error: serializeError.message,\n        });\n        serializableData = {\n          jobName,\n          timestamp: Date.now(),\n          originalDataSize: Object.keys(data).length,\n        };\n      }\n\n      const jobOptions = {\n        ...this.defaultJobOptions,\n        ...options,\n        timestamp: Date.now(),\n      };\n\n      const job = await queue.add(jobName, serializableData, jobOptions);\n\n      logger.debug(`Job added to queue '${queueName}'`, {\n        jobId: job.id,\n        jobName,\n        data: JSON.stringify(serializableData).substring(0, 200),\n      });\n\n      return job;\n    } catch (error) {\n      logger.error(`Failed to add job to queue '${queueName}'`, {\n        jobName,\n        error: error.message,\n      });\n      throw error;\n    }\n  }\n\n  /**\n   * Register a job processor\n   * @param {string} queueName - Name of the queue\n   * @param {string} jobName - Name of the job\n   * @param {Function} processor - Job processor function\n   */\n  registerProcessor(queueName, jobName, processor) {\n    try {\n      const queue = this.queues.get(queueName);\n      if (!queue) {\n        throw new Error(`Queue '${queueName}' not found`);\n      }\n\n      const processorKey = `${queueName}:${jobName}`;\n      this.processors.set(processorKey, processor);\n\n      queue.process(jobName, this.queueConfigs[queueName]?.concurrency || 1, async job => {\n        const startTime = Date.now();\n\n        try {\n          logger.debug(`Processing job ${job.id} (${jobName}) in queue '${queueName}'`);\n\n          const result = await processor(job.data, job);\n\n          const duration = Date.now() - startTime;\n          logger.debug(`Job ${job.id} processed successfully`, {\n            jobName,\n            duration,\n            result: typeof result === 'object' ? JSON.stringify(result) : result,\n          });\n\n          return result;\n        } catch (error) {\n          const duration = Date.now() - startTime;\n          logger.error(`Job ${job.id} processing failed`, {\n            jobName,\n            duration,\n            error: error.message,\n            stack: error.stack,\n          });\n          throw error;\n        }\n      });\n\n      logger.info(`Processor registered for job '${jobName}' in queue '${queueName}'`);\n    } catch (error) {\n      logger.error(`Failed to register processor for job '${jobName}'`, {\n        queueName,\n        error: error.message,\n      });\n      throw error;\n    }\n  }\n\n  /**\n   * Get queue statistics\n   * @param {string} queueName - Name of the queue\n   * @returns {Promise<Object>} Queue statistics\n   */\n  async getQueueStats(queueName) {\n    try {\n      const queue = this.queues.get(queueName);\n      if (!queue) {\n        throw new Error(`Queue '${queueName}' not found`);\n      }\n\n      const [waiting, active, completed, failed, delayed] = await Promise.all([\n        queue.getWaiting(),\n        queue.getActive(),\n        queue.getCompleted(),\n        queue.getFailed(),\n        queue.getDelayed(),\n      ]);\n\n      return {\n        queueName,\n        waiting: waiting.length,\n        active: active.length,\n        completed: completed.length,\n        failed: failed.length,\n        delayed: delayed.length,\n        total: waiting.length + active.length + completed.length + failed.length + delayed.length,\n      };\n    } catch (error) {\n      logger.error(`Failed to get stats for queue '${queueName}'`, { error: error.message });\n      return null;\n    }\n  }\n\n  /**\n   * Get all queue statistics\n   * @returns {Promise<Array>} Array of queue statistics\n   */\n  async getAllQueueStats() {\n    const stats = [];\n\n    for (const queueName of this.queues.keys()) {\n      const queueStats = await this.getQueueStats(queueName);\n      if (queueStats) {\n        stats.push(queueStats);\n      }\n    }\n\n    return stats;\n  }\n\n  /**\n   * Clear a queue\n   * @param {string} queueName - Name of the queue\n   * @param {string} state - State to clear (completed, failed, active, waiting)\n   */\n  async clearQueue(queueName, state = 'completed') {\n    try {\n      const queue = this.queues.get(queueName);\n      if (!queue) {\n        throw new Error(`Queue '${queueName}' not found`);\n      }\n\n      let count = 0;\n\n      switch (state) {\n        case 'completed':\n          count = await queue.clean(0, 'completed');\n          break;\n        case 'failed':\n          count = await queue.clean(0, 'failed');\n          break;\n        case 'active':\n          count = await queue.clean(0, 'active');\n          break;\n        case 'waiting':\n          await queue.empty();\n          count = 'all';\n          break;\n        default:\n          throw new Error(`Invalid state: ${state}`);\n      }\n\n      logger.info(`Cleared ${count} ${state} jobs from queue '${queueName}'`);\n      return count;\n    } catch (error) {\n      logger.error(`Failed to clear queue '${queueName}'`, {\n        state,\n        error: error.message,\n      });\n      throw error;\n    }\n  }\n\n  /**\n   * Close all queues\n   */\n  async closeAllQueues() {\n    logger.info('Closing all job queues...');\n\n    const closePromises = Array.from(this.queues.values()).map(async queue => {\n      try {\n        await queue.close();\n        logger.debug('Queue closed successfully');\n      } catch (error) {\n        logger.error('Error closing queue', { error: error.message });\n      }\n    });\n\n    await Promise.all(closePromises);\n    logger.info('All job queues closed');\n  }\n\n  /**\n   * Health check for job queue service\n   * @returns {Promise<Object>} Health status\n   */\n  async healthCheck() {\n    try {\n      const stats = await this.getAllQueueStats();\n      const totalJobs = stats.reduce((sum, queue) => sum + queue.total, 0);\n      const activeJobs = stats.reduce((sum, queue) => sum + queue.active, 0);\n\n      return {\n        status: 'healthy',\n        service: 'job-queue',\n        queues: stats.length,\n        totalJobs,\n        activeJobs,\n        queuesStatus: stats,\n        timestamp: new Date().toISOString(),\n      };\n    } catch (error) {\n      logger.error('Job queue health check failed', { error: error.message });\n      return {\n        status: 'unhealthy',\n        service: 'job-queue',\n        error: error.message,\n        timestamp: new Date().toISOString(),\n      };\n    }\n  }\n\n  /**\n   * Get queue instance\n   * @param {string} queueName - Name of the queue\n   * @returns {Queue} Queue instance\n   */\n  getQueue(queueName) {\n    return this.queues.get(queueName);\n  }\n\n  /**\n   * Check if service is initialized\n   * @returns {boolean} Initialization status\n   */\n  isReady() {\n    return this.isInitialized;\n  }\n}\n\nmodule.exports = JobQueueService;\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\src\\services\\mathQuizService.js","messages":[{"ruleId":"class-methods-use-this","severity":2,"message":"Expected 'this' to be used by class method 'randomInt'.","line":36,"column":3,"nodeType":"FunctionExpression","messageId":"missingThis","endLine":36,"endColumn":12},{"ruleId":"no-param-reassign","severity":2,"message":"Assignment to function parameter 'from'.","line":37,"column":21,"nodeType":"Identifier","messageId":"assignmentToFunctionParam","endLine":37,"endColumn":25},{"ruleId":"no-param-reassign","severity":2,"message":"Assignment to function parameter 'to'.","line":37,"column":27,"nodeType":"Identifier","messageId":"assignmentToFunctionParam","endLine":37,"endColumn":29},{"ruleId":"no-param-reassign","severity":2,"message":"Assignment to function parameter 'from'.","line":38,"column":5,"nodeType":"Identifier","messageId":"assignmentToFunctionParam","endLine":38,"endColumn":9},{"ruleId":"no-param-reassign","severity":2,"message":"Assignment to function parameter 'to'.","line":39,"column":5,"nodeType":"Identifier","messageId":"assignmentToFunctionParam","endLine":39,"endColumn":7},{"ruleId":"class-methods-use-this","severity":2,"message":"Expected 'this' to be used by class method 'pickRandom'.","line":47,"column":3,"nodeType":"FunctionExpression","messageId":"missingThis","endLine":47,"endColumn":13},{"ruleId":"no-new-func","severity":2,"message":"The Function constructor is eval.","line":73,"column":18,"nodeType":"NewExpression","messageId":"noFunctionConstructor","endLine":73,"endColumn":93},{"ruleId":"no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":74,"column":16,"nodeType":"Identifier","messageId":"unusedVar","endLine":74,"endColumn":21},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":93,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":93,"endColumn":20,"suggestions":[{"fix":{"range":[2439,2495],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":147,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":147,"endColumn":20,"suggestions":[{"fix":{"range":[4077,4127],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":186,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":186,"endColumn":20,"suggestions":[{"fix":{"range":[5284,5338],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-restricted-syntax","severity":2,"message":"iterators/generators require regenerator-runtime, which is too heavyweight for this guide to allow them. Separately, loops should be avoided in favor of array iterations.","line":196,"column":5,"nodeType":"ForOfStatement","messageId":"restrictedSyntax","endLine":200,"endColumn":6},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":224,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":224,"endColumn":18,"suggestions":[{"fix":{"range":[6196,6256],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":226,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":226,"endColumn":20,"suggestions":[{"fix":{"range":[6285,6333],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-plusplus","severity":2,"message":"Unary operator '++' used.","line":251,"column":5,"nodeType":"UpdateExpression","messageId":"unexpectedUnaryOp","endLine":251,"endColumn":18},{"ruleId":"no-restricted-syntax","severity":2,"message":"iterators/generators require regenerator-runtime, which is too heavyweight for this guide to allow them. Separately, loops should be avoided in favor of array iterations.","line":261,"column":5,"nodeType":"ForOfStatement","messageId":"restrictedSyntax","endLine":266,"endColumn":6},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":299,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":299,"endColumn":7}],"suppressedMessages":[],"errorCount":11,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Math Quiz Service - Interactive math challenges\n * Implements different difficulty levels with proper architecture\n */\n\nclass MathQuizService {\n  constructor() {\n    this.activeQuizzes = new Map();\n    this.quizTimeouts = new Map();\n    this.rateLimits = new Map();\n\n    // Math difficulty configurations\n    this.modes = {\n      noob: [-3, 3, -3, 3, '+-', 15000, 10],\n      easy: [-10, 10, -10, 10, '*/+-', 20000, 40],\n      medium: [-40, 40, -20, 20, '*/+-', 40000, 150],\n      hard: [-100, 100, -70, 70, '*/+-', 60000, 350],\n      extreme: [-999999, 999999, -999999, 999999, '*/', 99999, 9999],\n      impossible: [-99999999999, 99999999999, -99999999999, 999999999999, '*/', 30000, 35000],\n      impossible2: [-999999999999999, 999999999999999, -999, 999, '/', 30000, 50000],\n    };\n\n    this.operators = {\n      '+': '+',\n      '-': '-',\n      '*': 'Ã—',\n      '/': 'Ã·',\n    };\n  }\n\n  /**\n   * Generate random integer between two values\n   * @param {number} from - Minimum value\n   * @param {number} to - Maximum value\n   */\n  randomInt(from, to) {\n    if (from > to) [from, to] = [to, from];\n    from = Math.floor(from);\n    to = Math.floor(to);\n    return Math.floor((to - from) * Math.random() + from);\n  }\n\n  /**\n   * Pick random item from array\n   * @param {Array} list - Array to pick from\n   */\n  pickRandom(list) {\n    return list[Math.floor(Math.random() * list.length)];\n  }\n\n  /**\n   * Generate math question\n   * @param {string} mode - Difficulty mode\n   */\n  async generateMathQuestion(mode) {\n    try {\n      if (!this.modes[mode]) {\n        throw new Error(`Invalid mode: ${mode}`);\n      }\n\n      const [a1, a2, b1, b2, ops, time, bonus] = this.modes[mode];\n      let a = this.randomInt(a1, a2);\n      let b = this.randomInt(b1, b2);\n      let op = this.pickRandom([...ops]);\n\n      // Handle division to avoid division by zero\n      if (op === '/' && b === 0) {\n        b = 1;\n      }\n\n      let result;\n      try {\n        result = new Function(`return ${a} ${op.replace('/', '*')} ${b < 0 ? `(${b})` : b}`)();\n      } catch (error) {\n        // Fallback for complex operations\n        result = a + b;\n        op = '+';\n      }\n\n      // Handle division case\n      if (op === '/') {\n        [a, result] = [result, a];\n      }\n\n      return {\n        soal: `${a} ${this.operators[op]} ${b}`,\n        mode,\n        waktu: time,\n        hadiah: bonus,\n        jawaban: result,\n      };\n    } catch (error) {\n      console.error('Error generating math question:', error);\n      throw new Error('Failed to generate math question');\n    }\n  }\n\n  /**\n   * Start math quiz\n   * @param {string} chatId - Chat ID\n   * @param {string} playerId - Player ID\n   * @param {string} mode - Difficulty mode\n   */\n  async startMathQuiz(chatId, playerId, mode = 'easy') {\n    try {\n      const quizId = `math_${chatId}_${playerId}_${Date.now()}`;\n\n      // Check if user already has active quiz\n      const activeQuiz = this.getActiveQuiz(playerId);\n      if (activeQuiz) {\n        throw new Error('Kamu masih memiliki quiz matematika yang aktif!');\n      }\n\n      // Check rate limit\n      if (!this.checkRateLimit(playerId, 'mathquiz')) {\n        throw new Error('Rate limit exceeded. Please wait before starting new quiz.');\n      }\n\n      // Generate question\n      const question = await this.generateMathQuestion(mode);\n\n      const quizData = {\n        id: quizId,\n        chatId,\n        playerId,\n        question,\n        startTime: Date.now(),\n      };\n\n      this.activeQuizzes.set(quizId, quizData);\n\n      // Set timeout based on difficulty\n      const timeout = setTimeout(() => {\n        this.endQuiz(quizId, 'timeout');\n      }, question.waktu);\n\n      this.quizTimeouts.set(quizId, timeout);\n\n      return {\n        success: true,\n        message: `*Math Quiz - ${mode.toUpperCase()}*\\n\\n*Berapa hasil dari:*\\n*${question.soal}*\\n\\n*Waktu:* ${(question.waktu / 1000).toFixed(1)} detik\\n*Hadiah:* ${question.hadiah} money`,\n        quizId,\n        question: question.soal,\n        timeLimit: question.waktu / 1000,\n      };\n    } catch (error) {\n      console.error('Error starting math quiz:', error);\n      throw error;\n    }\n  }\n\n  /**\n   * Process math answer\n   * @param {string} quizId - Quiz ID\n   * @param {number} answer - User's answer\n   */\n  async processMathAnswer(quizId, answer) {\n    try {\n      const quiz = this.activeQuizzes.get(quizId);\n      if (!quiz) {\n        return { success: false, message: 'Quiz tidak ditemukan!' };\n      }\n\n      // Check if answer is correct\n      const isCorrect = Math.abs(parseFloat(answer) - quiz.question.jawaban) < 0.01;\n\n      if (isCorrect) {\n        // Correct answer\n        await this.endQuiz(quizId, 'correct');\n\n        return {\n          success: true,\n          correct: true,\n          message: `*Jawaban Benar! ðŸŽ‰*\\n\\n*Soal:* ${quiz.question.soal}\\n*Jawaban:* ${quiz.question.jawaban}\\n*Hadiah:* ${quiz.question.hadiah} money`,\n          reward: quiz.question.hadiah,\n        };\n      }\n      // Wrong answer\n      return {\n        success: true,\n        correct: false,\n        message: `*Jawaban Salah!*\\n\\n*Soal:* ${quiz.question.soal}\\n*Jawaban Kamu:* ${answer}\\n*Jawaban Benar:* ${quiz.question.jawaban}`,\n        correctAnswer: quiz.question.jawaban,\n      };\n    } catch (error) {\n      console.error('Error processing math answer:', error);\n      throw new Error('Failed to process answer');\n    }\n  }\n\n  /**\n   * Get active quiz by player\n   * @param {string} playerId - Player ID\n   */\n  getActiveQuiz(playerId) {\n    for (const [quizId, quiz] of this.activeQuizzes.entries()) {\n      if (quiz.playerId === playerId) {\n        return { quizId, quiz };\n      }\n    }\n    return null;\n  }\n\n  /**\n   * End quiz and cleanup\n   * @param {string} quizId - Quiz ID\n   * @param {string} reason - Reason for ending\n   */\n  async endQuiz(quizId, reason) {\n    try {\n      const quiz = this.activeQuizzes.get(quizId);\n      if (!quiz) return;\n\n      // Clear timeout\n      const timeout = this.quizTimeouts.get(quizId);\n      if (timeout) {\n        clearTimeout(timeout);\n        this.quizTimeouts.delete(quizId);\n      }\n\n      // Remove from active quizzes\n      this.activeQuizzes.delete(quizId);\n\n      console.log(`Math quiz ${quizId} ended. Reason: ${reason}`);\n    } catch (error) {\n      console.error('Error ending math quiz:', error);\n    }\n  }\n\n  /**\n   * Check rate limit for math quizzes\n   * @param {string} playerId - Player ID\n   * @param {string} operation - Operation type\n   */\n  checkRateLimit(playerId, operation) {\n    const key = `${playerId}_${operation}`;\n    const now = Date.now();\n    const limit = this.rateLimits.get(key);\n\n    if (!limit || now - limit.lastQuiz > 60000) {\n      // 1 minute cooldown\n      this.rateLimits.set(key, { lastQuiz: now, count: 1 });\n      return true;\n    }\n\n    if (limit.count >= 5) {\n      // Max 5 quizzes per minute\n      return false;\n    }\n\n    limit.count++;\n    return true;\n  }\n\n  /**\n   * Clean up inactive quizzes\n   */\n  cleanupInactiveQuizzes() {\n    const now = Date.now();\n\n    for (const [quizId, quiz] of this.activeQuizzes.entries()) {\n      if (now - quiz.startTime > 300000) {\n        // 5 minutes max\n        this.endQuiz(quizId, 'cleanup');\n      }\n    }\n  }\n\n  /**\n   * Get available modes\n   */\n  getAvailableModes() {\n    return Object.keys(this.modes);\n  }\n\n  /**\n   * Get mode information\n   * @param {string} mode - Mode name\n   */\n  getModeInfo(mode) {\n    if (!this.modes[mode]) {\n      return null;\n    }\n\n    const [a1, a2, b1, b2, ops, time, bonus] = this.modes[mode];\n    return {\n      name: mode,\n      range: `${a1} to ${a2}, ${b1} to ${b2}`,\n      operators: ops\n        .split('')\n        .map(op => this.operators[op])\n        .join(', '),\n      timeLimit: `${time / 1000} seconds`,\n      reward: bonus,\n    };\n  }\n}\n\nmodule.exports = new MathQuizService();\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\src\\services\\menfesService.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":6,"column":16,"nodeType":"Identifier","messageId":"undef","endLine":6,"endColumn":23},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":84,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":84,"endColumn":20,"suggestions":[{"fix":{"range":[2553,2608],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-plusplus","severity":2,"message":"Unary operator '++' used.","line":139,"column":7,"nodeType":"UpdateExpression","messageId":"unexpectedUnaryOp","endLine":139,"endColumn":29},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":147,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":147,"endColumn":20,"suggestions":[{"fix":{"range":[4287,4341],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":202,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":202,"endColumn":20,"suggestions":[{"fix":{"range":[5834,5887],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-plusplus","severity":2,"message":"Unary operator '++' used.","line":259,"column":5,"nodeType":"UpdateExpression","messageId":"unexpectedUnaryOp","endLine":259,"endColumn":18},{"ruleId":"no-restricted-syntax","severity":2,"message":"iterators/generators require regenerator-runtime, which is too heavyweight for this guide to allow them. Separately, loops should be avoided in favor of array iterations.","line":270,"column":5,"nodeType":"ForOfStatement","messageId":"restrictedSyntax","endLine":275,"endColumn":6},{"ruleId":"no-restricted-syntax","severity":2,"message":"iterators/generators require regenerator-runtime, which is too heavyweight for this guide to allow them. Separately, loops should be avoided in favor of array iterations.","line":278,"column":5,"nodeType":"ForOfStatement","messageId":"restrictedSyntax","endLine":282,"endColumn":6},{"ruleId":"no-restricted-syntax","severity":2,"message":"iterators/generators require regenerator-runtime, which is too heavyweight for this guide to allow them. Separately, loops should be avoided in favor of array iterations.","line":285,"column":5,"nodeType":"ForOfStatement","messageId":"restrictedSyntax","endLine":289,"endColumn":6},{"ruleId":"class-methods-use-this","severity":2,"message":"Expected 'this' to be used by class method 'moderateContent'.","line":303,"column":3,"nodeType":"FunctionExpression","messageId":"missingThis","endLine":303,"endColumn":18},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":323,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":323,"endColumn":7}],"suppressedMessages":[],"errorCount":8,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Menfes/Confess Service - Anonymous messaging system\n * Implements private messaging between users with proper privacy and rate limiting\n */\n\nconst crypto = require('crypto');\n\nclass MenfesService {\n  constructor() {\n    this.activeSessions = new Map();\n    this.sessionTimeouts = new Map();\n    this.rateLimits = new Map();\n    this.messageHistory = new Map();\n  }\n\n  /**\n   * Start menfes session between two users\n   * @param {string} fromUser - Sender user ID\n   * @param {string} toUser - Target user ID (phone number)\n   * @param {string} fakeName - Anonymous name to use\n   */\n  async startMenfesSession(fromUser, toUser, fakeName) {\n    try {\n      // Validate phone number format\n      const cleanNumber = toUser.replace(/\\D/g, '');\n      if (cleanNumber.length < 10 || cleanNumber.length > 15) {\n        throw new Error('Invalid phone number format');\n      }\n\n      const targetJid = `${cleanNumber}@s.whatsapp.net`;\n\n      // Check if session already exists\n      if (this.activeSessions.has(fromUser)) {\n        throw new Error(`Kamu Sedang Berada Di Sesi menfes!`);\n      }\n\n      if (this.activeSessions.has(targetJid)) {\n        throw new Error('Target user sudah dalam sesi menfes dengan orang lain');\n      }\n\n      // Check rate limits\n      if (!this.checkRateLimit(fromUser, 'start_session')) {\n        throw new Error('Rate limit exceeded. Please wait before starting new session');\n      }\n\n      const sessionId = crypto.randomUUID();\n\n      const sessionData = {\n        id: sessionId,\n        fromUser,\n        toUser: targetJid,\n        fakeName: fakeName || 'Seseorang',\n        startTime: Date.now(),\n        messageCount: 0,\n        isActive: true,\n      };\n\n      // Create bidirectional sessions\n      this.activeSessions.set(fromUser, sessionData);\n      this.activeSessions.set(targetJid, {\n        ...sessionData,\n        fromUser: targetJid,\n        toUser: fromUser,\n        fakeName: 'Penerima',\n      });\n\n      // Set session timeout (10 minutes)\n      const timeout = setTimeout(() => {\n        this.endMenfesSession(fromUser, 'timeout');\n      }, 600000);\n\n      this.sessionTimeouts.set(fromUser, timeout);\n      this.sessionTimeouts.set(targetJid, timeout);\n\n      // Initialize message history\n      this.messageHistory.set(sessionId, []);\n\n      return {\n        success: true,\n        sessionId,\n        message: `_Memulai menfes..._\\n*Silahkan Mulai kirim pesan/media*\\n*Durasi menfes hanya selama 10 menit*\\n*Note :* jika ingin mengakhiri ketik _*delmenfes*_`,\n      };\n    } catch (error) {\n      console.error('Error starting menfes session:', error);\n      throw error;\n    }\n  }\n\n  /**\n   * Send menfes message\n   * @param {string} fromUser - Sender user ID\n   * @param {Object} message - Message object\n   */\n  async sendMenfesMessage(fromUser, message) {\n    try {\n      const session = this.activeSessions.get(fromUser);\n      if (!session || !session.isActive) {\n        throw new Error('No active menfes session found');\n      }\n\n      // Check if session is still valid\n      if (Date.now() - session.startTime > 600000) {\n        await this.endMenfesSession(fromUser, 'expired');\n        throw new Error('Session expired');\n      }\n\n      // Check rate limits for messages\n      if (!this.checkRateLimit(fromUser, 'send_message')) {\n        throw new Error('Rate limit exceeded. Please slow down');\n      }\n\n      // Prepare message for forwarding\n      const menfesMessage = {\n        ...message,\n        contextInfo: {\n          isForwarded: true,\n          forwardingScore: 1,\n          quotedMessage: {\n            conversation: `*Pesan Dari ${session.fakeName}*`,\n          },\n          key: {\n            remoteJid: '0@s.whatsapp.net',\n            fromMe: false,\n            participant: '0@s.whatsapp.net',\n          },\n        },\n      };\n\n      // Store message in history\n      const messageHistory = this.messageHistory.get(session.id);\n      messageHistory.push({\n        from: fromUser,\n        to: session.toUser,\n        message: menfesMessage,\n        timestamp: Date.now(),\n      });\n\n      // Update message count\n      session.messageCount++;\n\n      return {\n        success: true,\n        message: 'Pesan berhasil dikirim melalui menfes',\n        forwarded: true,\n      };\n    } catch (error) {\n      console.error('Error sending menfes message:', error);\n      throw error;\n    }\n  }\n\n  /**\n   * End menfes session\n   * @param {string} userId - User ID\n   * @param {string} reason - Reason for ending\n   */\n  async endMenfesSession(userId, reason = 'manual') {\n    try {\n      const session = this.activeSessions.get(userId);\n      if (!session) {\n        return { success: false, message: 'No active session found' };\n      }\n\n      // Clear timeouts\n      const timeout = this.sessionTimeouts.get(userId);\n      if (timeout) {\n        clearTimeout(timeout);\n        this.sessionTimeouts.delete(userId);\n      }\n\n      const otherUser = session.fromUser === userId ? session.toUser : session.fromUser;\n\n      const otherTimeout = this.sessionTimeouts.get(otherUser);\n      if (otherTimeout) {\n        clearTimeout(otherTimeout);\n        this.sessionTimeouts.delete(otherUser);\n      }\n\n      // Remove sessions\n      this.activeSessions.delete(userId);\n      this.activeSessions.delete(otherUser);\n\n      // Archive message history\n      const history = this.messageHistory.get(session.id);\n      if (history) {\n        // Keep history for 24 hours for moderation purposes\n        setTimeout(\n          () => {\n            this.messageHistory.delete(session.id);\n          },\n          24 * 60 * 60 * 1000\n        );\n      }\n\n      return {\n        success: true,\n        message: `Sukses Mengakhiri Sesi menfes!\\nAlasan: ${reason}`,\n        sessionId: session.id,\n        messageCount: session.messageCount,\n      };\n    } catch (error) {\n      console.error('Error ending menfes session:', error);\n      throw new Error('Failed to end menfes session');\n    }\n  }\n\n  /**\n   * Get active session for user\n   * @param {string} userId - User ID\n   */\n  getActiveSession(userId) {\n    return this.activeSessions.get(userId);\n  }\n\n  /**\n   * Get session statistics\n   * @param {string} sessionId - Session ID\n   */\n  getSessionStats(sessionId) {\n    const history = this.messageHistory.get(sessionId);\n    if (!history) {\n      return null;\n    }\n\n    return {\n      messageCount: history.length,\n      duration:\n        history.length > 0 ? history[history.length - 1].timestamp - history[0].timestamp : 0,\n      participants: [...new Set(history.map(h => h.from))],\n    };\n  }\n\n  /**\n   * Check rate limit for operations\n   * @param {string} userId - User ID\n   * @param {string} operation - Operation type\n   */\n  checkRateLimit(userId, operation) {\n    const key = `${userId}_${operation}`;\n    const now = Date.now();\n    const limit = this.rateLimits.get(key);\n\n    const limits = {\n      start_session: { cooldown: 300000, maxPerCooldown: 1 }, // 5 minutes, 1 session\n      send_message: { cooldown: 10000, maxPerCooldown: 5 }, // 10 seconds, 5 messages\n    };\n\n    const config = limits[operation] || { cooldown: 60000, maxPerCooldown: 1 };\n\n    if (!limit || now - limit.lastUsed > config.cooldown) {\n      this.rateLimits.set(key, { lastUsed: now, count: 1 });\n      return true;\n    }\n\n    if (limit.count >= config.maxPerCooldown) {\n      return false;\n    }\n\n    limit.count++;\n    return true;\n  }\n\n  /**\n   * Clean up expired sessions and old data\n   */\n  cleanup() {\n    const now = Date.now();\n\n    // Clean up expired sessions\n    for (const [userId, session] of this.activeSessions.entries()) {\n      if (now - session.startTime > 600000) {\n        // 10 minutes\n        this.endMenfesSession(userId, 'expired');\n      }\n    }\n\n    // Clean up old message history (older than 24 hours)\n    for (const [sessionId, history] of this.messageHistory.entries()) {\n      if (history.length > 0 && now - history[0].timestamp > 24 * 60 * 60 * 1000) {\n        this.messageHistory.delete(sessionId);\n      }\n    }\n\n    // Clean up old rate limits (older than 1 hour)\n    for (const [key, limit] of this.rateLimits.entries()) {\n      if (now - limit.lastUsed > 60 * 60 * 1000) {\n        this.rateLimits.delete(key);\n      }\n    }\n  }\n\n  /**\n   * Get active sessions count (for monitoring)\n   */\n  getActiveSessionsCount() {\n    return this.activeSessions.size / 2; // Divide by 2 since each session has 2 entries\n  }\n\n  /**\n   * Moderate message content (basic filtering)\n   * @param {string} content - Message content\n   */\n  moderateContent(content) {\n    if (!content) return true;\n\n    // Basic content filtering\n    const forbiddenWords = [\n      'spam',\n      'scam',\n      'hack',\n      'illegal',\n      'drugs',\n      'violence',\n      'threat',\n      'harassment',\n    ];\n\n    const lowerContent = content.toLowerCase();\n    return !forbiddenWords.some(word => lowerContent.includes(word));\n  }\n}\n\nmodule.exports = new MenfesService();\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\src\\services\\messageQueue.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":27,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":34},{"ruleId":"no-unused-vars","severity":1,"message":"'Redis' is assigned a value but never used.","line":2,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":14,"suggestions":[{"messageId":"removeVar","data":{"varName":"Redis"},"fix":{"range":[45,89],"text":""},"desc":"Remove unused variable 'Redis'."}]},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":2,"column":19,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":26},{"ruleId":"import-x/no-unresolved","severity":2,"message":"Unable to resolve path to module '@upstash/redis'.","line":2,"column":27,"nodeType":"Literal","messageId":"unresolved","endLine":2,"endColumn":43},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":3,"column":26,"nodeType":"Identifier","messageId":"undef","endLine":3,"endColumn":33},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":9,"column":13,"nodeType":"Identifier","messageId":"undef","endLine":9,"endColumn":20},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":10,"column":13,"nodeType":"Identifier","messageId":"undef","endLine":10,"endColumn":20},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":11,"column":17,"nodeType":"Identifier","messageId":"undef","endLine":11,"endColumn":24},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":12,"column":17,"nodeType":"Identifier","messageId":"undef","endLine":12,"endColumn":24},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":33,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":33,"endColumn":20,"suggestions":[{"fix":{"range":[950,1034],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":44,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":44,"endColumn":18,"suggestions":[{"fix":{"range":[1297,1349],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":48,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":48,"endColumn":20,"suggestions":[{"fix":{"range":[1410,1473],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":51,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":51,"endColumn":16,"suggestions":[{"fix":{"range":[1487,1534],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":63,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":63,"endColumn":18,"suggestions":[{"fix":{"range":[1796,1845],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":66,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":66,"endColumn":20,"suggestions":[{"fix":{"range":[1892,1948],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":94,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":94,"endColumn":16,"suggestions":[{"fix":{"range":[2565,2607],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":98,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":98,"endColumn":7}],"suppressedMessages":[],"errorCount":9,"fatalErrorCount":0,"warningCount":8,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const { Queue, Worker } = require('bullmq');\nconst { Redis } = require('@upstash/redis'); // Using Upstash Redis\nconst messageProcessor = require('../message-processor');\n\nclass MessageQueueService {\n  constructor() {\n    // Initialize Redis connection with Upstash\n    this.redisConnection = {\n      host: process.env.REDIS_HOST || 'localhost',\n      port: process.env.REDIS_PORT || 6379,\n      password: process.env.REDIS_PASSWORD,\n      username: process.env.REDIS_USERNAME,\n    };\n\n    // Create queue for messages\n    this.messageQueue = new Queue('whatsdex-messages', {\n      connection: this.redisConnection,\n      defaultJobOptions: {\n        removeOnComplete: 50,\n        removeOnFail: 100,\n        attempts: 3,\n        backoff: {\n          type: 'exponential',\n          delay: 2000,\n        },\n      },\n    });\n\n    // Create worker to process messages\n    this.worker = new Worker(\n      'whatsdex-messages',\n      async job => {\n        console.log(`Processing job ${job.id} with data:`, job.data.serializableMsg.key.id);\n        await messageProcessor(job);\n      },\n      {\n        connection: this.redisConnection,\n        concurrency: 5, // Process up to 5 messages concurrently\n      }\n    );\n\n    // Event listeners for monitoring\n    this.worker.on('completed', job => {\n      console.log(`Job ${job.id} completed successfully`);\n    });\n\n    this.worker.on('failed', (job, err) => {\n      console.error(`Job ${job.id} failed with error:`, err.message);\n    });\n\n    console.log('MessageQueueService initialized');\n  }\n\n  /**\n   * Add a message to the processing queue\n   */\n  async addMessage(serializableMsg) {\n    try {\n      const job = await this.messageQueue.add('process-message', {\n        serializableMsg,\n        timestamp: new Date().toISOString(),\n      });\n      console.log(`Added message to queue: ${job.id}`);\n      return job;\n    } catch (error) {\n      console.error('Failed to add message to queue:', error);\n      throw error;\n    }\n  }\n\n  /**\n   * Get queue statistics\n   */\n  async getStats() {\n    const waiting = await this.messageQueue.getWaiting();\n    const active = await this.messageQueue.getActive();\n    const completed = await this.messageQueue.getCompleted();\n    const failed = await this.messageQueue.getFailed();\n\n    return {\n      waiting: waiting.length,\n      active: active.length,\n      completed: completed.length,\n      failed: failed.length,\n    };\n  }\n\n  /**\n   * Gracefully close the queue and worker\n   */\n  async close() {\n    await this.worker.close();\n    await this.messageQueue.close();\n    console.log('MessageQueueService closed');\n  }\n}\n\nmodule.exports = MessageQueueService;\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\src\\services\\metaAI.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":22},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":29,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":29,"endColumn":20,"suggestions":[{"fix":{"range":[828,884],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":52,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":52,"endColumn":20,"suggestions":[{"fix":{"range":[1437,1496],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":76,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":76,"endColumn":20,"suggestions":[{"fix":{"range":[2004,2060],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":107,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":107,"endColumn":20,"suggestions":[{"fix":{"range":[2839,2893],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":113,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":113,"endColumn":7}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const axios = require('axios');\n\nclass MetaAIService {\n  constructor(apiKey) {\n    this.apiKey = apiKey;\n    this.baseURL = 'https://api.meta.ai/v1'; // Hypothetical endpoint; replace with actual Meta AI API\n  }\n\n  async generateReply(prompt, options = {}) {\n    try {\n      const response = await axios.post(\n        `${this.baseURL}/chat/completions`,\n        {\n          model: options.model || 'llama-3.1-8b',\n          messages: [{ role: 'user', content: prompt }],\n          max_tokens: options.maxTokens || 150,\n          temperature: options.temperature || 0.7,\n        },\n        {\n          headers: {\n            Authorization: `Bearer ${this.apiKey}`,\n            'Content-Type': 'application/json',\n          },\n        }\n      );\n\n      return response.data.choices[0].message.content;\n    } catch (error) {\n      console.error('Meta AI reply generation error:', error);\n      throw new Error('Failed to generate AI reply');\n    }\n  }\n\n  async transcribeVoice(audioBuffer) {\n    try {\n      const response = await axios.post(\n        `${this.baseURL}/audio/transcriptions`,\n        {\n          file: audioBuffer,\n          model: 'whisper-1', // Assuming Meta uses Whisper-like model\n        },\n        {\n          headers: {\n            Authorization: `Bearer ${this.apiKey}`,\n            'Content-Type': 'multipart/form-data',\n          },\n        }\n      );\n\n      return response.data.text;\n    } catch (error) {\n      console.error('Meta AI voice transcription error:', error);\n      throw new Error('Failed to transcribe voice');\n    }\n  }\n\n  async generateImage(prompt) {\n    try {\n      const response = await axios.post(\n        `${this.baseURL}/images/generations`,\n        {\n          prompt,\n          n: 1,\n          size: '512x512',\n        },\n        {\n          headers: {\n            Authorization: `Bearer ${this.apiKey}`,\n            'Content-Type': 'application/json',\n          },\n        }\n      );\n\n      return response.data.data[0].url;\n    } catch (error) {\n      console.error('Meta AI image generation error:', error);\n      throw new Error('Failed to generate image');\n    }\n  }\n\n  async analyzeImage(imageUrl, prompt = 'Describe this image') {\n    try {\n      const response = await axios.post(\n        `${this.baseURL}/chat/completions`,\n        {\n          model: 'llama-3.1-vision',\n          messages: [\n            {\n              role: 'user',\n              content: [\n                { type: 'text', text: prompt },\n                { type: 'image_url', image_url: { url: imageUrl } },\n              ],\n            },\n          ],\n        },\n        {\n          headers: {\n            Authorization: `Bearer ${this.apiKey}`,\n            'Content-Type': 'application/json',\n          },\n        }\n      );\n\n      return response.data.choices[0].message.content;\n    } catch (error) {\n      console.error('Meta AI image analysis error:', error);\n      throw new Error('Failed to analyze image');\n    }\n  }\n}\n\nmodule.exports = MetaAIService;\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\src\\services\\moderationService.js","messages":[{"ruleId":"radix","severity":2,"message":"Missing radix parameter.","line":116,"column":58,"nodeType":"CallExpression","messageId":"missingRadix","endLine":116,"endColumn":70,"suggestions":[{"messageId":"addRadixParameter10","fix":{"range":[3369,3369],"text":", 10"},"desc":"Add radix parameter `10` for parsing decimal numbers."}]},{"ruleId":"no-shadow","severity":2,"message":"'item' is already declared in the upper scope on line 120 column 11.","line":120,"column":44,"nodeType":"Identifier","messageId":"noShadow","endLine":120,"endColumn":48},{"ruleId":"radix","severity":2,"message":"Missing radix parameter.","line":120,"column":64,"nodeType":"CallExpression","messageId":"missingRadix","endLine":120,"endColumn":76,"suggestions":[{"messageId":"addRadixParameter10","fix":{"range":[3507,3507],"text":", 10"},"desc":"Add radix parameter `10` for parsing decimal numbers."}]},{"ruleId":"no-restricted-syntax","severity":2,"message":"iterators/generators require regenerator-runtime, which is too heavyweight for this guide to allow them. Separately, loops should be avoided in favor of array iterations.","line":139,"column":5,"nodeType":"ForOfStatement","messageId":"restrictedSyntax","endLine":146,"endColumn":6},{"ruleId":"no-await-in-loop","severity":2,"message":"Unexpected `await` inside a loop.","line":141,"column":24,"nodeType":"AwaitExpression","messageId":"unexpectedAwait","endLine":141,"endColumn":75},{"ruleId":"no-plusplus","severity":2,"message":"Unary operator '++' used.","line":244,"column":11,"nodeType":"UpdateExpression","messageId":"unexpectedUnaryOp","endLine":244,"endColumn":33},{"ruleId":"no-restricted-syntax","severity":2,"message":"iterators/generators require regenerator-runtime, which is too heavyweight for this guide to allow them. Separately, loops should be avoided in favor of array iterations.","line":260,"column":5,"nodeType":"ForOfStatement","messageId":"restrictedSyntax","endLine":266,"endColumn":6},{"ruleId":"no-unused-vars","severity":1,"message":"'userId' is assigned a value but never used.","line":260,"column":17,"nodeType":"Identifier","messageId":"unusedVar","endLine":260,"endColumn":23,"suggestions":[{"messageId":"removeVar","data":{"varName":"userId"},"fix":{"range":[7425,7431],"text":""},"desc":"Remove unused variable 'userId'."}]},{"ruleId":"radix","severity":2,"message":"Missing radix parameter.","line":261,"column":55,"nodeType":"CallExpression","messageId":"missingRadix","endLine":261,"endColumn":76,"suggestions":[{"messageId":"addRadixParameter10","fix":{"range":[7555,7555],"text":", 10"},"desc":"Add radix parameter `10` for parsing decimal numbers."}]},{"ruleId":"class-methods-use-this","severity":2,"message":"Expected 'this' to be used by class async method 'getModerationSettings'.","line":270,"column":3,"nodeType":"FunctionExpression","messageId":"missingThis","endLine":270,"endColumn":30},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":292,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":292,"endColumn":7}],"suppressedMessages":[],"errorCount":10,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Mock Moderation Service for testing\n// This will be replaced with actual database implementation in Phase 7.2\n\nclass ModerationService {\n  constructor() {\n    this.moderationQueue = [];\n    this.userViolations = new Map();\n    this.nextQueueId = 1;\n    this.nextViolationId = 1;\n    this.initializeMockData();\n  }\n\n  initializeMockData() {\n    // Mock moderation queue items\n    const mockQueueItems = [\n      {\n        id: 1,\n        contentType: 'message',\n        contentId: 'msg-123',\n        userId: 'user-1',\n        content: 'This is a test message that might contain spam content',\n        metadata: { messageLength: 58, hasLinks: false },\n        priority: 'normal',\n        status: 'pending',\n        createdAt: new Date(Date.now() - 30 * 60 * 1000), // 30 minutes ago\n      },\n      {\n        id: 2,\n        contentType: 'message',\n        contentId: 'msg-124',\n        userId: 'user-2',\n        content: 'Another message for moderation review',\n        metadata: { messageLength: 35, hasLinks: false },\n        priority: 'low',\n        status: 'pending',\n        createdAt: new Date(Date.now() - 15 * 60 * 1000), // 15 minutes ago\n      },\n    ];\n\n    this.moderationQueue = mockQueueItems;\n    this.nextQueueId = mockQueueItems.length + 1;\n\n    // Mock user violations\n    const mockViolations = [\n      {\n        id: 1,\n        userId: 'user-1',\n        violationType: 'spam',\n        severity: 'low',\n        reason: 'Excessive repeated messages',\n        evidence: 'Sent 50 similar messages in 10 minutes',\n        action: 'warn',\n        duration: 0,\n        status: 'active',\n        moderatorId: 'admin-1',\n        createdAt: new Date(Date.now() - 2 * 60 * 60 * 1000), // 2 hours ago\n      },\n      {\n        id: 2,\n        userId: 'user-2',\n        violationType: 'harassment',\n        severity: 'medium',\n        reason: 'Inappropriate language towards other users',\n        evidence: 'Multiple reports from other users',\n        action: 'ban',\n        duration: 24, // 24 hours\n        status: 'active',\n        moderatorId: 'admin-1',\n        createdAt: new Date(Date.now() - 1 * 60 * 60 * 1000), // 1 hour ago\n      },\n    ];\n\n    mockViolations.forEach(violation => {\n      if (!this.userViolations.has(violation.userId)) {\n        this.userViolations.set(violation.userId, []);\n      }\n      this.userViolations.get(violation.userId).push(violation);\n    });\n\n    this.nextViolationId = mockViolations.length + 1;\n  }\n\n  async getModerationQueue(filters = {}, options = {}) {\n    const { page = 1, limit = 50 } = options;\n    let items = [...this.moderationQueue];\n\n    // Apply filters\n    if (filters.status) {\n      items = items.filter(item => item.status === filters.status);\n    }\n\n    if (filters.priority) {\n      items = items.filter(item => item.priority === filters.priority);\n    }\n\n    if (filters.contentType) {\n      items = items.filter(item => item.contentType === filters.contentType);\n    }\n\n    // Sort by createdAt desc\n    items.sort((a, b) => b.createdAt - a.createdAt);\n\n    const total = items.length;\n    const startIndex = (page - 1) * limit;\n    const paginatedItems = items.slice(startIndex, startIndex + limit);\n\n    return {\n      items: paginatedItems,\n      total,\n      page,\n      limit,\n    };\n  }\n\n  async getModerationQueueItem(id) {\n    return this.moderationQueue.find(item => item.id === parseInt(id)) || null;\n  }\n\n  async reviewModerationItem(id, reviewData) {\n    const item = this.moderationQueue.find(item => item.id === parseInt(id));\n    if (!item) {\n      throw new Error('Moderation queue item not found');\n    }\n\n    item.status = reviewData.action === 'approve' ? 'approved' : 'rejected';\n    item.reviewedAt = new Date();\n    item.moderatorId = reviewData.moderatorId;\n    item.reviewNotes = reviewData.notes;\n\n    return item;\n  }\n\n  async bulkReviewModerationItems(itemIds, reviewData) {\n    const results = {\n      successful: [],\n      failed: [],\n    };\n\n    for (const itemId of itemIds) {\n      try {\n        const result = await this.reviewModerationItem(itemId, reviewData);\n        results.successful.push(result);\n      } catch (error) {\n        results.failed.push({ id: itemId, error: error.message });\n      }\n    }\n\n    return results;\n  }\n\n  async getModerationStatistics(dateFilters = {}) {\n    let queueItems = [...this.moderationQueue];\n    let violations = [];\n\n    this.userViolations.forEach(userViolations => {\n      violations.push(...userViolations);\n    });\n\n    // Apply date filters\n    if (dateFilters.startDate) {\n      const startDate = new Date(dateFilters.startDate);\n      queueItems = queueItems.filter(item => item.createdAt >= startDate);\n      violations = violations.filter(v => v.createdAt >= startDate);\n    }\n\n    if (dateFilters.endDate) {\n      const endDate = new Date(dateFilters.endDate);\n      queueItems = queueItems.filter(item => item.createdAt <= endDate);\n      violations = violations.filter(v => v.createdAt <= endDate);\n    }\n\n    const totalQueued = queueItems.length;\n    const pendingItems = queueItems.filter(item => item.status === 'pending').length;\n    const reviewedItems = queueItems.filter(item => item.status !== 'pending').length;\n\n    const totalViolations = violations.length;\n    const activeViolations = violations.filter(v => v.status === 'active').length;\n\n    // Violations by type\n    const violationsByType = {};\n    violations.forEach(v => {\n      violationsByType[v.violationType] = (violationsByType[v.violationType] || 0) + 1;\n    });\n\n    // Violations by severity\n    const violationsBySeverity = {};\n    violations.forEach(v => {\n      violationsBySeverity[v.severity] = (violationsBySeverity[v.severity] || 0) + 1;\n    });\n\n    return {\n      queue: {\n        totalQueued,\n        pendingItems,\n        reviewedItems,\n        approvalRate:\n          reviewedItems > 0\n            ? (\n                (queueItems.filter(item => item.status === 'approved').length / reviewedItems) *\n                100\n              ).toFixed(1)\n            : 0,\n      },\n      violations: {\n        totalViolations,\n        activeViolations,\n        violationsByType,\n        violationsBySeverity,\n      },\n      timeRange: {\n        startDate: dateFilters.startDate,\n        endDate: dateFilters.endDate,\n      },\n      lastUpdated: new Date().toISOString(),\n    };\n  }\n\n  async getUserViolations(userId, filters = {}, options = {}) {\n    const { page = 1, limit = 50 } = options;\n    let violations = this.userViolations.get(userId) || [];\n\n    // Apply filters\n    if (filters.status) {\n      violations = violations.filter(v => v.status === filters.status);\n    }\n\n    // Sort by createdAt desc\n    violations.sort((a, b) => b.createdAt - a.createdAt);\n\n    const total = violations.length;\n    const startIndex = (page - 1) * limit;\n    const paginatedViolations = violations.slice(startIndex, startIndex + limit);\n\n    return {\n      violations: paginatedViolations,\n      total,\n      page,\n      limit,\n    };\n  }\n\n  async addUserViolation(userId, violationData) {\n    const violation = {\n      id: this.nextViolationId++,\n      userId,\n      ...violationData,\n      status: 'active',\n      createdAt: new Date(),\n    };\n\n    if (!this.userViolations.has(userId)) {\n      this.userViolations.set(userId, []);\n    }\n\n    this.userViolations.get(userId).push(violation);\n    return violation;\n  }\n\n  async updateUserViolation(violationId, updateData) {\n    for (const [userId, violations] of this.userViolations.entries()) {\n      const violation = violations.find(v => v.id === parseInt(violationId));\n      if (violation) {\n        Object.assign(violation, updateData);\n        return violation;\n      }\n    }\n    return null;\n  }\n\n  async getModerationSettings() {\n    return {\n      contentModerationEnabled: true,\n      autoModeration: true,\n      moderationThreshold: 0.8,\n      bannedWords: ['spam', 'scam', 'offensive'],\n      maxMessageLength: 4096,\n      rateLimitEnabled: true,\n      spamDetectionEnabled: true,\n    };\n  }\n\n  async updateModerationSettings(settings) {\n    // In a real implementation, this would update the settings\n    return {\n      ...(await this.getModerationSettings()),\n      ...settings,\n      updatedAt: new Date().toISOString(),\n    };\n  }\n}\n\nmodule.exports = new ModerationService();\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\src\\services\\monitoring.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":26,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":33},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":2,"column":16,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":23},{"ruleId":"class-methods-use-this","severity":2,"message":"Expected 'this' to be used by class method 'categorizeCommand'.","line":349,"column":3,"nodeType":"FunctionExpression","messageId":"missingThis","endLine":349,"endColumn":20},{"ruleId":"no-restricted-syntax","severity":2,"message":"iterators/generators require regenerator-runtime, which is too heavyweight for this guide to allow them. Separately, loops should be avoided in favor of array iterations.","line":359,"column":5,"nodeType":"ForOfStatement","messageId":"restrictedSyntax","endLine":363,"endColumn":6},{"ruleId":"class-methods-use-this","severity":2,"message":"Expected 'this' to be used by class method 'isCriticalError'.","line":373,"column":3,"nodeType":"FunctionExpression","messageId":"missingThis","endLine":373,"endColumn":18},{"ruleId":"class-methods-use-this","severity":2,"message":"Expected 'this' to be used by class method 'parseTimeRange'.","line":387,"column":3,"nodeType":"FunctionExpression","messageId":"missingThis","endLine":387,"endColumn":17},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":405,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":405,"endColumn":7}],"suppressedMessages":[],"errorCount":7,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const { PrismaClient } = require('@prisma/client');\nconst logger = require('../utils/logger');\n\nclass MonitoringService {\n  constructor() {\n    this.prisma = new PrismaClient();\n    this.metrics = {\n      responseTimes: [],\n      errorCounts: new Map(),\n      commandUsage: new Map(),\n      activeConnections: 0,\n      memoryUsage: 0,\n      cacheHitRate: 0,\n    };\n\n    // Start periodic cleanup and aggregation\n    this.startPeriodicTasks();\n  }\n\n  /**\n   * Record API response time\n   * @param {string} endpoint - API endpoint\n   * @param {number} responseTime - Response time in milliseconds\n   * @param {number} statusCode - HTTP status code\n   */\n  async recordResponseTime(endpoint, responseTime, statusCode) {\n    try {\n      // Store in database for long-term analysis\n      await this.prisma.analytics.create({\n        data: {\n          metric: 'response_time',\n          value: responseTime,\n          category: 'api',\n          metadata: JSON.stringify({ endpoint, statusCode }),\n        },\n      });\n\n      // Keep in-memory metrics for quick access\n      this.metrics.responseTimes.push({\n        endpoint,\n        responseTime,\n        statusCode,\n        timestamp: Date.now(),\n      });\n\n      // Keep only last 1000 entries\n      if (this.metrics.responseTimes.length > 1000) {\n        this.metrics.responseTimes = this.metrics.responseTimes.slice(-1000);\n      }\n\n      // Log slow requests\n      if (responseTime > 1000) {\n        logger.warn('Slow API response', {\n          endpoint,\n          responseTime,\n          statusCode,\n        });\n      }\n    } catch (error) {\n      logger.error('Failed to record response time:', error);\n    }\n  }\n\n  /**\n   * Record command usage\n   * @param {string} command - Command name\n   * @param {string} userId - User ID\n   * @param {boolean} success - Whether command succeeded\n   * @param {number} executionTime - Execution time in milliseconds\n   */\n  async recordCommandUsage(command, userId, success = true, executionTime = null) {\n    try {\n      // Store in database\n      await this.prisma.commandUsage.create({\n        data: {\n          userId,\n          command,\n          category: this.categorizeCommand(command),\n          success,\n          executionTime,\n          errorMessage: success ? null : 'Command failed',\n        },\n      });\n\n      // Update in-memory counters\n      const key = `${command}:${success ? 'success' : 'error'}`;\n      this.metrics.commandUsage.set(key, (this.metrics.commandUsage.get(key) || 0) + 1);\n\n      // Log command metrics\n      logger.info('Command executed', {\n        command,\n        userId,\n        success,\n        executionTime,\n      });\n    } catch (error) {\n      logger.error('Failed to record command usage:', error);\n    }\n  }\n\n  /**\n   * Record error\n   * @param {Error} error - Error object\n   * @param {Object} context - Additional context\n   */\n  async recordError(error, context = {}) {\n    try {\n      const errorKey = error.name || 'UnknownError';\n      this.metrics.errorCounts.set(errorKey, (this.metrics.errorCounts.get(errorKey) || 0) + 1);\n\n      // Store in database\n      await this.prisma.errorLog.create({\n        data: {\n          level: 'error',\n          message: error.message,\n          stack: error.stack,\n          userId: context.userId,\n          command: context.command,\n          metadata: JSON.stringify(context),\n        },\n      });\n\n      // Log critical errors\n      if (this.isCriticalError(error)) {\n        logger.error('Critical error recorded', {\n          error: error.message,\n          stack: error.stack,\n          context,\n        });\n      }\n    } catch (dbError) {\n      logger.error('Failed to record error:', dbError);\n    }\n  }\n\n  /**\n   * Record audit event\n   * @param {Object} event - Audit event data\n   */\n  async recordAuditEvent(event) {\n    try {\n      await this.prisma.auditLog.create({\n        data: {\n          eventType: event.eventType,\n          actor: event.actor,\n          actorId: event.actorId,\n          action: event.action,\n          resource: event.resource,\n          resourceId: event.resourceId,\n          details: event.details ? JSON.stringify(event.details) : null,\n          riskLevel: event.riskLevel || 'low',\n          ipAddress: event.ipAddress,\n          userAgent: event.userAgent,\n          sessionId: event.sessionId,\n          location: event.location,\n          metadata: event.metadata ? JSON.stringify(event.metadata) : null,\n        },\n      });\n\n      // Log high-risk events immediately\n      if (event.riskLevel === 'high' || event.riskLevel === 'critical') {\n        logger.warn('High-risk audit event', event);\n      }\n    } catch (error) {\n      logger.error('Failed to record audit event:', error);\n    }\n  }\n\n  /**\n   * Update system metrics\n   * @param {Object} systemMetrics - System metrics\n   */\n  updateSystemMetrics(systemMetrics) {\n    this.metrics.memoryUsage = systemMetrics.memoryUsage || 0;\n    this.metrics.cacheHitRate = systemMetrics.cacheHitRate || 0;\n    this.metrics.activeConnections = systemMetrics.activeConnections || 0;\n  }\n\n  /**\n   * Get current metrics summary\n   * @returns {Object} Metrics summary\n   */\n  getMetricsSummary() {\n    const now = Date.now();\n    const lastHour = now - 60 * 60 * 1000;\n\n    // Calculate response time stats from last hour\n    const recentResponses = this.metrics.responseTimes.filter(r => r.timestamp > lastHour);\n    const avgResponseTime =\n      recentResponses.length > 0\n        ? recentResponses.reduce((sum, r) => sum + r.responseTime, 0) / recentResponses.length\n        : 0;\n\n    // Calculate error rate\n    const totalCommands = Array.from(this.metrics.commandUsage.values()).reduce((a, b) => a + b, 0);\n    const errorCommands = Array.from(this.metrics.commandUsage.entries())\n      .filter(([key]) => key.endsWith(':error'))\n      .reduce((sum, [, count]) => sum + count, 0);\n    const errorRate = totalCommands > 0 ? (errorCommands / totalCommands) * 100 : 0;\n\n    return {\n      activeUsers: this.metrics.activeConnections,\n      avgResponseTime: Math.round(avgResponseTime),\n      errorRate: parseFloat(errorRate.toFixed(2)),\n      memoryUsage: this.metrics.memoryUsage,\n      cacheHitRate: this.metrics.cacheHitRate,\n      totalCommands,\n      recentResponses: recentResponses.length,\n      timestamp: new Date().toISOString(),\n    };\n  }\n\n  /**\n   * Get detailed analytics\n   * @param {string} timeRange - Time range (1h, 24h, 7d)\n   * @returns {Object} Detailed analytics\n   */\n  async getDetailedAnalytics(timeRange = '24h') {\n    try {\n      const hours = this.parseTimeRange(timeRange);\n      const since = new Date(Date.now() - hours * 60 * 60 * 1000);\n\n      const [responseTimes, commandStats, errorStats] = await Promise.all([\n        this.prisma.analytics.findMany({\n          where: {\n            recordedAt: { gte: since },\n            metric: 'response_time',\n          },\n          orderBy: { recordedAt: 'desc' },\n        }),\n        this.prisma.commandUsage.groupBy({\n          by: ['command', 'success'],\n          where: { usedAt: { gte: since } },\n          _count: true,\n        }),\n        this.prisma.errorLog.findMany({\n          where: { createdAt: { gte: since } },\n          select: { level: true, message: true, createdAt: true },\n        }),\n      ]);\n\n      return {\n        responseTimes: responseTimes.map(rt => ({\n          value: rt.value,\n          timestamp: rt.recordedAt,\n          metadata: JSON.parse(rt.metadata || '{}'),\n        })),\n        commandStats,\n        errorStats,\n        timeRange,\n      };\n    } catch (error) {\n      logger.error('Failed to get detailed analytics:', error);\n      return { error: error.message };\n    }\n  }\n\n  /**\n   * Health check\n   * @returns {Object} Health status\n   */\n  async healthCheck() {\n    try {\n      // Check database connectivity\n      await this.prisma.$queryRaw`SELECT 1`;\n\n      const metrics = this.getMetricsSummary();\n\n      return {\n        status: 'healthy',\n        database: 'connected',\n        metrics,\n        timestamp: new Date().toISOString(),\n      };\n    } catch (error) {\n      return {\n        status: 'unhealthy',\n        database: 'disconnected',\n        error: error.message,\n        timestamp: new Date().toISOString(),\n      };\n    }\n  }\n\n  /**\n   * Start periodic cleanup tasks\n   */\n  startPeriodicTasks() {\n    // Clean up old in-memory metrics every hour\n    setInterval(\n      () => {\n        const oneHourAgo = Date.now() - 60 * 60 * 1000;\n        this.metrics.responseTimes = this.metrics.responseTimes.filter(\n          r => r.timestamp > oneHourAgo\n        );\n      },\n      60 * 60 * 1000\n    ); // Every hour\n\n    // Aggregate and archive old data daily\n    setInterval(\n      async () => {\n        try {\n          await this.archiveOldData();\n        } catch (error) {\n          logger.error('Failed to archive old data:', error);\n        }\n      },\n      24 * 60 * 60 * 1000\n    ); // Daily\n  }\n\n  /**\n   * Archive old analytics data\n   */\n  async archiveOldData() {\n    try {\n      const thirtyDaysAgo = new Date(Date.now() - 30 * 24 * 60 * 60 * 1000);\n\n      // Archive old analytics data (keep last 30 days in main table)\n      const oldAnalyticsCount = await this.prisma.analytics.deleteMany({\n        where: {\n          recordedAt: { lt: thirtyDaysAgo },\n        },\n      });\n\n      // Archive old command usage (keep last 90 days)\n      const ninetyDaysAgo = new Date(Date.now() - 90 * 24 * 60 * 60 * 1000);\n      const oldCommandCount = await this.prisma.commandUsage.deleteMany({\n        where: {\n          usedAt: { lt: ninetyDaysAgo },\n        },\n      });\n\n      logger.info('Archived old monitoring data', {\n        analyticsDeleted: oldAnalyticsCount.count,\n        commandsDeleted: oldCommandCount.count,\n      });\n    } catch (error) {\n      logger.error('Failed to archive old data:', error);\n    }\n  }\n\n  /**\n   * Categorize command based on name\n   * @param {string} command - Command name\n   * @returns {string} Category\n   */\n  categorizeCommand(command) {\n    const categories = {\n      ai: ['ai', 'chat', 'ask', 'gpt', 'gemini'],\n      media: ['sticker', 'image', 'video', 'audio', 'download'],\n      games: ['game', 'quiz', 'play', 'suit'],\n      utility: ['ping', 'help', 'menu', 'info'],\n      social: ['menfes', 'confess', 'profile'],\n      admin: ['ban', 'kick', 'promote', 'demote'],\n    };\n\n    for (const [category, keywords] of Object.entries(categories)) {\n      if (keywords.some(keyword => command.toLowerCase().includes(keyword))) {\n        return category;\n      }\n    }\n\n    return 'misc';\n  }\n\n  /**\n   * Check if error is critical\n   * @param {Error} error - Error object\n   * @returns {boolean} Whether error is critical\n   */\n  isCriticalError(error) {\n    const criticalErrors = ['DatabaseError', 'ConnectionError', 'AuthenticationError'];\n    return (\n      criticalErrors.includes(error.name) ||\n      error.message.toLowerCase().includes('critical') ||\n      error.message.toLowerCase().includes('fatal')\n    );\n  }\n\n  /**\n   * Parse time range string\n   * @param {string} timeRange - Time range string\n   * @returns {number} Hours\n   */\n  parseTimeRange(timeRange) {\n    const ranges = {\n      '1h': 1,\n      '24h': 24,\n      '7d': 168,\n      '30d': 720,\n    };\n    return ranges[timeRange] || 24;\n  }\n\n  /**\n   * Close database connection\n   */\n  async close() {\n    await this.prisma.$disconnect();\n  }\n}\n\nmodule.exports = MonitoringService;\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\src\\services\\multiBotService.js","messages":[{"ruleId":"import-x/no-import-module-exports","severity":2,"message":"Cannot use import declarations in modules that export using CommonJS (module.exports = 'foo' or exports.bar = 'hi')","line":6,"column":1,"nodeType":"ImportDeclaration","messageId":"notAllowed","endLine":6,"endColumn":25},{"ruleId":"no-unused-vars","severity":1,"message":"'spawn' is assigned a value but never used.","line":8,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":8,"endColumn":14,"suggestions":[{"messageId":"removeVar","data":{"varName":"spawn"},"fix":{"range":[171,214],"text":""},"desc":"Remove unused variable 'spawn'."}]},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":8,"column":19,"nodeType":"Identifier","messageId":"undef","endLine":8,"endColumn":26},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":9,"column":12,"nodeType":"Identifier","messageId":"undef","endLine":9,"endColumn":19},{"ruleId":"import-x/no-extraneous-dependencies","severity":2,"message":"'@hapi/boom' should be listed in the project's dependencies. Run 'npm i @hapi/boom' to add it","line":10,"column":18,"nodeType":"CallExpression","messageId":"missing","endLine":10,"endColumn":39},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":10,"column":18,"nodeType":"Identifier","messageId":"undef","endLine":10,"endColumn":25},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":11,"column":19,"nodeType":"Identifier","messageId":"undef","endLine":11,"endColumn":26},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":19,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":19,"endColumn":12},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":20,"column":17,"nodeType":"Identifier","messageId":"undef","endLine":20,"endColumn":24},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":29,"column":30,"nodeType":"Identifier","messageId":"undef","endLine":29,"endColumn":37},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":40,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":40,"endColumn":20,"suggestions":[{"fix":{"range":[1078,1140],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":125,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":125,"endColumn":20,"suggestions":[{"fix":{"range":[3503,3547],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'saveCreds' is assigned a value but never used.","line":137,"column":22,"nodeType":"Identifier","messageId":"unusedVar","endLine":137,"endColumn":31,"suggestions":[{"messageId":"removeVar","data":{"varName":"saveCreds"},"fix":{"range":[3781,3792],"text":""},"desc":"Remove unused variable 'saveCreds'."}]},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useMultiFileAuthState\" cannot be called in a class component. React Hooks must be called in a React function component or a custom React Hook function.","line":137,"column":42,"nodeType":"Identifier","endLine":137,"endColumn":63},{"ruleId":"no-unused-vars","severity":1,"message":"'version' is assigned a value but never used.","line":138,"column":15,"nodeType":"Identifier","messageId":"unusedVar","endLine":138,"endColumn":22,"suggestions":[{"messageId":"removeVar","data":{"varName":"version"},"fix":{"range":[3873,3881],"text":""},"desc":"Remove unused variable 'version'."}]},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":142,"column":17,"nodeType":"Identifier","messageId":"undef","endLine":142,"endColumn":24},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":167,"column":57,"nodeType":"Identifier","messageId":"undef","endLine":167,"endColumn":64},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":179,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":179,"endColumn":20,"suggestions":[{"fix":{"range":[5169,5221],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-undef","severity":2,"message":"'saveCreds' is not defined.","line":194,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":194,"endColumn":24},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":196,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":196,"endColumn":22,"suggestions":[{"fix":{"range":[5658,5712],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":217,"column":11,"nodeType":"MemberExpression","messageId":"unexpected","endLine":217,"endColumn":22,"suggestions":[{"fix":{"range":[6355,6428],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":220,"column":11,"nodeType":"MemberExpression","messageId":"unexpected","endLine":220,"endColumn":22,"suggestions":[{"fix":{"range":[6560,6600],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":223,"column":11,"nodeType":"MemberExpression","messageId":"unexpected","endLine":223,"endColumn":22,"suggestions":[{"fix":{"range":[6733,6783],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":226,"column":11,"nodeType":"MemberExpression","messageId":"unexpected","endLine":226,"endColumn":22,"suggestions":[{"fix":{"range":[6873,6926],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":232,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":232,"endColumn":20,"suggestions":[{"fix":{"range":[7049,7101],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":250,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":250,"endColumn":22,"suggestions":[{"fix":{"range":[7594,7648],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":266,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":266,"endColumn":20,"suggestions":[{"fix":{"range":[8016,8083],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-plusplus","severity":2,"message":"Unary operator '++' used.","line":271,"column":7,"nodeType":"UpdateExpression","messageId":"unexpectedUnaryOp","endLine":271,"endColumn":34},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":281,"column":11,"nodeType":"MemberExpression","messageId":"unexpected","endLine":281,"endColumn":24,"suggestions":[{"fix":{"range":[8478,8536],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":285,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":285,"endColumn":20,"suggestions":[{"fix":{"range":[8591,8648],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":322,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":322,"endColumn":22,"suggestions":[{"fix":{"range":[9555,9612],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":325,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":325,"endColumn":18,"suggestions":[{"fix":{"range":[9628,9684],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":333,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":333,"endColumn":20,"suggestions":[{"fix":{"range":[9831,9875],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"class-methods-use-this","severity":2,"message":"Expected 'this' to be used by class async method 'checkRateLimit'.","line":371,"column":3,"nodeType":"FunctionExpression","messageId":"missingThis","endLine":371,"endColumn":23},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":417,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":417,"endColumn":20,"suggestions":[{"fix":{"range":[11878,11929],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":428,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":428,"endColumn":19},{"ruleId":"no-restricted-syntax","severity":2,"message":"iterators/generators require regenerator-runtime, which is too heavyweight for this guide to allow them. Separately, loops should be avoided in favor of array iterations.","line":443,"column":7,"nodeType":"ForOfStatement","messageId":"restrictedSyntax","endLine":453,"endColumn":8},{"ruleId":"no-restricted-syntax","severity":2,"message":"iterators/generators require regenerator-runtime, which is too heavyweight for this guide to allow them. Separately, loops should be avoided in favor of array iterations.","line":458,"column":7,"nodeType":"ForOfStatement","messageId":"restrictedSyntax","endLine":487,"endColumn":8},{"ruleId":"no-await-in-loop","severity":2,"message":"Unexpected `await` inside a loop.","line":460,"column":22,"nodeType":"AwaitExpression","messageId":"unexpectedAwait","endLine":460,"endColumn":44},{"ruleId":"no-await-in-loop","severity":2,"message":"Unexpected `await` inside a loop.","line":464,"column":25,"nodeType":"AwaitExpression","messageId":"unexpectedAwait","endLine":464,"endColumn":50},{"ruleId":"no-await-in-loop","severity":2,"message":"Unexpected `await` inside a loop.","line":469,"column":13,"nodeType":"AwaitExpression","messageId":"unexpectedAwait","endLine":476,"endColumn":15},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":489,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":489,"endColumn":20,"suggestions":[{"fix":{"range":[13927,13980],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-restricted-syntax","severity":2,"message":"iterators/generators require regenerator-runtime, which is too heavyweight for this guide to allow them. Separately, loops should be avoided in favor of array iterations.","line":510,"column":7,"nodeType":"ForOfStatement","messageId":"restrictedSyntax","endLine":525,"endColumn":8},{"ruleId":"no-await-in-loop","severity":2,"message":"Unexpected `await` inside a loop.","line":514,"column":11,"nodeType":"AwaitExpression","messageId":"unexpectedAwait","endLine":514,"endColumn":64},{"ruleId":"no-await-in-loop","severity":2,"message":"Unexpected `await` inside a loop.","line":517,"column":11,"nodeType":"AwaitExpression","messageId":"unexpectedAwait","endLine":519,"endColumn":13},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":523,"column":11,"nodeType":"MemberExpression","messageId":"unexpected","endLine":523,"endColumn":24,"suggestions":[{"fix":{"range":[14853,14909],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":527,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":527,"endColumn":20,"suggestions":[{"fix":{"range":[14956,15010],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":543,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":543,"endColumn":7}],"suppressedMessages":[],"errorCount":24,"fatalErrorCount":0,"warningCount":24,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Multi-Bot Service - Allow users to create their own bot instances\n * Implements JadiBot functionality with proper session management\n */\n\nimport path from 'path';\n\nconst { spawn } = require('child_process');\nconst fs = require('fs').promises;\nconst { Boom } = require('@hapi/boom');\nconst NodeCache = require('node-cache');\nconst {\n  default: WAConnection,\n  useMultiFileAuthState,\n  Browsers,\n  DisconnectReason,\n  makeCacheableSignalKeyStore,\n  fetchLatestBaileysVersion,\n} = require('@whiskeysockets/baileys');\nconst context = require('../../context');\n\nclass MultiBotService {\n  constructor() {\n    this.activeBots = new Map();\n    this.botProcesses = new Map();\n    this.msgRetryCounterCache = new NodeCache();\n    this.groupCache = new NodeCache({ stdTTL: 5 * 60, useClones: false });\n    this.rateLimits = new Map();\n    this.botsDir = path.join(process.cwd(), 'database', 'jadibot');\n  }\n\n  /**\n   * Initialize service\n   */\n  async initialize() {\n    try {\n      await this.ensureBotsDirectory();\n      await this.loadExistingBots();\n    } catch (error) {\n      console.error('Error initializing multi-bot service:', error);\n    }\n  }\n\n  /**\n   * Create new bot instance for user\n   * @param {string} userId - User ID who wants to create bot\n   * @param {Object} mainBot - Main bot instance for store access\n   */\n  async createBot(userId, mainBot) {\n    try {\n      // Check rate limit from database\n      const rateLimitKey = `multibot_create_${userId}`;\n      const existingLimit = await context.database.rateLimit.findUnique({\n        where: { key: rateLimitKey },\n      });\n\n      const now = Date.now();\n      const cooldown = 5 * 60 * 1000; // 5 minutes\n\n      if (\n        existingLimit &&\n        now - existingLimit.lastUsed.getTime() < cooldown &&\n        existingLimit.count >= 1\n      ) {\n        throw new Error('Rate limit exceeded. Please wait before creating new bot.');\n      }\n\n      // Check if user already has active bot in database\n      const existingBot = await context.database.multiBot.findUnique({\n        where: { userId },\n      });\n\n      if (existingBot && existingBot.isActive) {\n        throw new Error('You already have an active bot instance!');\n      }\n\n      // Create bot record in database\n      const botData = await context.database.multiBot.upsert({\n        where: { userId },\n        update: {\n          isActive: true,\n          reconnectAttempts: 0,\n          updatedAt: new Date(),\n        },\n        create: {\n          userId,\n          isActive: true,\n          reconnectAttempts: 0,\n          maxReconnectAttempts: 5,\n        },\n      });\n\n      // Update rate limit\n      await context.database.rateLimit.upsert({\n        where: { key: rateLimitKey },\n        update: {\n          count: { increment: 1 },\n          lastUsed: new Date(),\n        },\n        create: {\n          key: rateLimitKey,\n          count: 1,\n          lastUsed: new Date(),\n        },\n      });\n\n      this.activeBots.set(userId, {\n        id: botData.id,\n        userId: botData.userId,\n        createdAt: botData.createdAt.getTime(),\n        isActive: botData.isActive,\n        reconnectAttempts: botData.reconnectAttempts,\n        maxReconnectAttempts: botData.maxReconnectAttempts,\n      });\n\n      // Start bot process\n      await this.startBotProcess(userId, mainBot);\n\n      return {\n        success: true,\n        message: 'Bot instance created successfully! Use the pairing code to connect.',\n        botId: userId,\n      };\n    } catch (error) {\n      console.error('Error creating bot:', error);\n      throw error;\n    }\n  }\n\n  /**\n   * Start bot process for user\n   * @param {string} userId - User ID\n   * @param {Object} mainBot - Main bot instance\n   */\n  async startBotProcess(userId, mainBot) {\n    try {\n      const { state, saveCreds } = await useMultiFileAuthState(path.join(this.botsDir, userId));\n      const { version, isLatest } = await fetchLatestBaileysVersion();\n\n      const bot = WAConnection({\n        isLatest,\n        logger: require('pino')({ level: 'silent' }),\n        getMessage: async key => {\n          if (mainBot.store) {\n            const msg = await mainBot.store.loadMessage(key.remoteJid, key.id);\n            return msg?.message || '';\n          }\n          return { conversation: 'Halo Saya Adalah Bot' };\n        },\n        syncFullHistory: false,\n        maxMsgRetryCount: 15,\n        msgRetryCounterCache: this.msgRetryCounterCache,\n        retryRequestDelayMs: 10,\n        defaultQueryTimeoutMs: 0,\n        cachedGroupMetadata: async jid => this.groupCache.get(jid),\n        browser: Browsers.ubuntu('Chrome'),\n        transactionOpts: {\n          maxCommitRetries: 10,\n          delayBetweenTriesMs: 10,\n        },\n        appStateMacVerification: {\n          patch: true,\n          snapshot: true,\n        },\n        auth: {\n          creds: state.creds,\n          keys: makeCacheableSignalKeyStore(state.keys, require('pino')({ level: 'silent' })),\n        },\n      });\n\n      // Set up event handlers\n      this.setupBotEventHandlers(bot, userId, mainBot);\n\n      // Store bot instance\n      this.botProcesses.set(userId, bot);\n\n      return bot;\n    } catch (error) {\n      console.error('Error starting bot process:', error);\n      throw new Error('Failed to start bot process');\n    }\n  }\n\n  /**\n   * Set up event handlers for bot\n   * @param {Object} bot - Bot instance\n   * @param {string} userId - User ID\n   * @param {Object} mainBot - Main bot instance\n   */\n  setupBotEventHandlers(bot, userId, mainBot) {\n    // Save credentials on update\n    bot.ev.on('creds.update', async () => {\n      try {\n        await saveCreds();\n      } catch (error) {\n        console.error('Error saving bot credentials:', error);\n      }\n    });\n\n    // Handle connection updates\n    bot.ev.on('connection.update', async update => {\n      const { connection, lastDisconnect, receivedPendingNotifications } = update;\n\n      if (connection === 'close') {\n        const reason = new Boom(lastDisconnect?.error)?.output.statusCode;\n\n        if (\n          [\n            DisconnectReason.connectionLost,\n            DisconnectReason.connectionClosed,\n            DisconnectReason.restartRequired,\n            DisconnectReason.timedOut,\n            DisconnectReason.badSession,\n            DisconnectReason.connectionReplaced,\n          ].includes(reason)\n        ) {\n          console.log(`Bot ${userId} connection lost, attempting to reconnect...`);\n          await this.handleBotReconnection(userId, mainBot);\n        } else if (reason === DisconnectReason.loggedOut) {\n          console.log(`Bot ${userId} logged out`);\n          await this.stopBot(userId, 'logged_out');\n        } else if (reason === DisconnectReason.multideviceMismatch) {\n          console.log(`Bot ${userId} multidevice mismatch`);\n          await this.stopBot(userId, 'multidevice_mismatch');\n        } else {\n          console.log(`Bot ${userId} disconnected: ${reason}`);\n          await this.stopBot(userId, 'unknown_disconnect');\n        }\n      }\n\n      if (connection === 'open') {\n        console.log(`Bot ${userId} connected successfully`);\n        const botData = this.activeBots.get(userId);\n        if (botData) {\n          botData.reconnectAttempts = 0;\n        }\n      }\n\n      if (receivedPendingNotifications === 'true') {\n        bot.ev.flush();\n      }\n    });\n\n    // Handle messages (forward to main bot logic)\n    bot.ev.on('messages.upsert', async message => {\n      try {\n        // Process messages through main bot's message handler\n        await mainBot.messageHandler(bot, message);\n      } catch (error) {\n        console.error('Error processing bot message:', error);\n      }\n    });\n  }\n\n  /**\n   * Handle bot reconnection\n   * @param {string} userId - User ID\n   * @param {Object} mainBot - Main bot instance\n   */\n  async handleBotReconnection(userId, mainBot) {\n    try {\n      const botData = this.activeBots.get(userId);\n      if (!botData) return;\n\n      if (botData.reconnectAttempts >= botData.maxReconnectAttempts) {\n        console.log(`Max reconnection attempts reached for bot ${userId}`);\n        await this.stopBot(userId, 'max_reconnect_attempts');\n        return;\n      }\n\n      botData.reconnectAttempts++;\n\n      // Wait before reconnecting\n      setTimeout(async () => {\n        try {\n          const bot = this.botProcesses.get(userId);\n          if (bot && !bot.user) {\n            await this.startBotProcess(userId, mainBot);\n          }\n        } catch (error) {\n          console.error(`Error reconnecting bot ${userId}:`, error);\n        }\n      }, 5000);\n    } catch (error) {\n      console.error('Error handling bot reconnection:', error);\n    }\n  }\n\n  /**\n   * Stop bot instance\n   * @param {string} userId - User ID\n   * @param {string} reason - Reason for stopping\n   */\n  async stopBot(userId, reason = 'manual') {\n    try {\n      const bot = this.botProcesses.get(userId);\n      if (bot) {\n        bot.end('Stop');\n        bot.ev.removeAllListeners();\n        this.botProcesses.delete(userId);\n      }\n\n      // Update database record\n      await context.database.multiBot.updateMany({\n        where: { userId },\n        data: {\n          isActive: false,\n          stoppedAt: new Date(),\n          stopReason: reason,\n          updatedAt: new Date(),\n        },\n      });\n\n      // Remove from active bots\n      this.activeBots.delete(userId);\n\n      // Clean up bot directory\n      try {\n        const botDir = path.join(this.botsDir, userId);\n        await fs.rm(botDir, { recursive: true, force: true });\n      } catch (error) {\n        console.error('Error cleaning up bot directory:', error);\n      }\n\n      console.log(`Bot ${userId} stopped. Reason: ${reason}`);\n\n      return {\n        success: true,\n        message: 'Bot instance stopped successfully',\n        reason,\n      };\n    } catch (error) {\n      console.error('Error stopping bot:', error);\n      throw new Error('Failed to stop bot');\n    }\n  }\n\n  /**\n   * Get bot list\n   */\n  getActiveBots() {\n    return Array.from(this.activeBots.entries()).map(([userId, data]) => ({\n      userId,\n      createdAt: data.createdAt,\n      isActive: data.isActive,\n      reconnectAttempts: data.reconnectAttempts,\n    }));\n  }\n\n  /**\n   * Get bot by user ID\n   * @param {string} userId - User ID\n   */\n  getBot(userId) {\n    return this.activeBots.get(userId);\n  }\n\n  /**\n   * Check if user has active bot\n   * @param {string} userId - User ID\n   */\n  hasActiveBot(userId) {\n    return this.activeBots.has(userId);\n  }\n\n  /**\n   * Check rate limit for bot operations (now uses database)\n   * @param {string} userId - User ID\n   * @param {string} operation - Operation type\n   */\n  async checkRateLimit(userId, operation) {\n    const key = `multibot_${operation}_${userId}`;\n    const now = Date.now();\n\n    const limits = {\n      create_bot: { cooldown: 300000, maxPerCooldown: 1 }, // 5 minutes, 1 bot\n      stop_bot: { cooldown: 60000, maxPerCooldown: 3 }, // 1 minute, 3 operations\n    };\n\n    const config = limits[operation] || { cooldown: 60000, maxPerCooldown: 1 };\n\n    try {\n      const existingLimit = await context.database.rateLimit.findUnique({\n        where: { key },\n      });\n\n      if (!existingLimit || now - existingLimit.lastUsed.getTime() > config.cooldown) {\n        await context.database.rateLimit.upsert({\n          where: { key },\n          update: {\n            count: 1,\n            lastUsed: new Date(),\n          },\n          create: {\n            key,\n            count: 1,\n            lastUsed: new Date(),\n          },\n        });\n        return true;\n      }\n\n      if (existingLimit.count >= config.maxPerCooldown) {\n        return false;\n      }\n\n      await context.database.rateLimit.update({\n        where: { key },\n        data: {\n          count: { increment: 1 },\n          lastUsed: new Date(),\n        },\n      });\n\n      return true;\n    } catch (error) {\n      console.error('Error checking rate limit:', error);\n      return false; // Fail safe\n    }\n  }\n\n  /**\n   * Ensure bots directory exists\n   */\n  async ensureBotsDirectory() {\n    try {\n      await fs.access(this.botsDir);\n    } catch (error) {\n      await fs.mkdir(this.botsDir, { recursive: true });\n    }\n  }\n\n  /**\n   * Load existing bots on startup\n   */\n  async loadExistingBots() {\n    try {\n      // Load from database instead of file system\n      const bots = await context.database.multiBot.findMany({\n        where: { isActive: true },\n      });\n\n      for (const bot of bots) {\n        this.activeBots.set(bot.userId, {\n          id: bot.id,\n          userId: bot.userId,\n          createdAt: bot.createdAt.getTime(),\n          isActive: bot.isActive,\n          reconnectAttempts: bot.reconnectAttempts,\n          maxReconnectAttempts: bot.maxReconnectAttempts,\n          needsRestart: !bot.isActive,\n        });\n      }\n\n      // Also check file system for any orphaned directories\n      const botsDir = await fs.readdir(this.botsDir);\n\n      for (const botDir of botsDir) {\n        const botPath = path.join(this.botsDir, botDir);\n        const stat = await fs.stat(botPath);\n\n        if (stat.isDirectory() && !this.activeBots.has(botDir)) {\n          // Check if bot directory has auth files\n          const files = await fs.readdir(botPath);\n          const hasAuth = files.some(file => file.includes('creds'));\n\n          if (hasAuth) {\n            // Create database record for orphaned bot\n            await context.database.multiBot.create({\n              data: {\n                userId: botDir,\n                isActive: false,\n                reconnectAttempts: 0,\n                maxReconnectAttempts: 5,\n              },\n            });\n\n            this.activeBots.set(botDir, {\n              id: botDir,\n              userId: botDir,\n              createdAt: stat.birthtime.getTime(),\n              isActive: false,\n              needsRestart: true,\n            });\n          }\n        }\n      }\n    } catch (error) {\n      console.error('Error loading existing bots:', error);\n    }\n  }\n\n  /**\n   * Clean up inactive bots\n   */\n  async cleanupInactiveBots() {\n    try {\n      const maxInactiveTime = new Date(Date.now() - 24 * 60 * 60 * 1000); // 24 hours ago\n\n      // Find inactive bots older than 24 hours\n      const inactiveBots = await context.database.multiBot.findMany({\n        where: {\n          isActive: false,\n          updatedAt: {\n            lt: maxInactiveTime,\n          },\n        },\n      });\n\n      for (const bot of inactiveBots) {\n        try {\n          // Clean up bot directory\n          const botDir = path.join(this.botsDir, bot.userId);\n          await fs.rm(botDir, { recursive: true, force: true });\n\n          // Remove from database\n          await context.database.multiBot.delete({\n            where: { id: bot.id },\n          });\n\n          this.activeBots.delete(bot.userId);\n        } catch (error) {\n          console.error('Error cleaning up inactive bot:', error);\n        }\n      }\n    } catch (error) {\n      console.error('Error in cleanupInactiveBots:', error);\n    }\n  }\n\n  /**\n   * Get bot statistics\n   */\n  getStats() {\n    return {\n      activeBots: this.activeBots.size,\n      runningProcesses: this.botProcesses.size,\n      totalBots: this.activeBots.size,\n    };\n  }\n}\n\nmodule.exports = new MultiBotService();\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\src\\services\\nlpProcessor.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":23,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":30},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":2,"column":16,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":23},{"ruleId":"class-methods-use-this","severity":2,"message":"Expected 'this' to be used by class method 'preprocessInput'.","line":191,"column":3,"nodeType":"FunctionExpression","messageId":"missingThis","endLine":191,"endColumn":18},{"ruleId":"class-methods-use-this","severity":2,"message":"Expected 'this' to be used by class method 'extractKeywords'.","line":205,"column":3,"nodeType":"FunctionExpression","messageId":"missingThis","endLine":205,"endColumn":18},{"ruleId":"no-restricted-syntax","severity":2,"message":"iterators/generators require regenerator-runtime, which is too heavyweight for this guide to allow them. Separately, loops should be avoided in favor of array iterations.","line":227,"column":5,"nodeType":"ForOfStatement","messageId":"restrictedSyntax","endLine":231,"endColumn":6},{"ruleId":"no-unused-vars","severity":1,"message":"'context' is defined but never used. Allowed unused args must match /^_/u.","line":243,"column":41,"nodeType":"Identifier","messageId":"unusedVar","endLine":243,"endColumn":48,"suggestions":[{"messageId":"removeVar","data":{"varName":"context"},"fix":{"range":[6940,6949],"text":""},"desc":"Remove unused variable 'context'."}]},{"ruleId":"no-restricted-syntax","severity":2,"message":"iterators/generators require regenerator-runtime, which is too heavyweight for this guide to allow them. Separately, loops should be avoided in favor of array iterations.","line":304,"column":5,"nodeType":"ForOfStatement","messageId":"restrictedSyntax","endLine":319,"endColumn":6},{"ruleId":"no-unused-vars","severity":1,"message":"'category' is assigned a value but never used.","line":304,"column":17,"nodeType":"Identifier","messageId":"unusedVar","endLine":304,"endColumn":25,"suggestions":[{"messageId":"removeVar","data":{"varName":"category"},"fix":{"range":[9029,9037],"text":""},"desc":"Remove unused variable 'category'."}]},{"ruleId":"class-methods-use-this","severity":2,"message":"Expected 'this' to be used by class method 'selectBestCommand'.","line":336,"column":3,"nodeType":"FunctionExpression","messageId":"missingThis","endLine":336,"endColumn":20},{"ruleId":"class-methods-use-this","severity":2,"message":"Expected 'this' to be used by class method 'extractParameters'.","line":370,"column":3,"nodeType":"FunctionExpression","messageId":"missingThis","endLine":370,"endColumn":20},{"ruleId":"class-methods-use-this","severity":2,"message":"Expected 'this' to be used by class method 'getAlternativeCommands'.","line":407,"column":3,"nodeType":"FunctionExpression","messageId":"missingThis","endLine":407,"endColumn":25},{"ruleId":"class-methods-use-this","severity":2,"message":"Expected 'this' to be used by class method 'calculateConfidence'.","line":426,"column":3,"nodeType":"FunctionExpression","messageId":"missingThis","endLine":426,"endColumn":22},{"ruleId":"class-methods-use-this","severity":2,"message":"Expected 'this' to be used by class method 'fallbackIntentClassification'.","line":454,"column":3,"nodeType":"FunctionExpression","messageId":"missingThis","endLine":454,"endColumn":31},{"ruleId":"no-unused-vars","severity":1,"message":"'keywords' is defined but never used. Allowed unused args must match /^_/u.","line":454,"column":39,"nodeType":"Identifier","messageId":"unusedVar","endLine":454,"endColumn":47,"suggestions":[{"messageId":"removeVar","data":{"varName":"keywords"},"fix":{"range":[13496,13506],"text":""},"desc":"Remove unused variable 'keywords'."}]},{"ruleId":"no-restricted-syntax","severity":2,"message":"iterators/generators require regenerator-runtime, which is too heavyweight for this guide to allow them. Separately, loops should be avoided in favor of array iterations.","line":500,"column":5,"nodeType":"ForOfStatement","messageId":"restrictedSyntax","endLine":512,"endColumn":6},{"ruleId":"no-restricted-syntax","severity":2,"message":"iterators/generators require regenerator-runtime, which is too heavyweight for this guide to allow them. Separately, loops should be avoided in favor of array iterations.","line":501,"column":7,"nodeType":"ForOfStatement","messageId":"restrictedSyntax","endLine":511,"endColumn":8},{"ruleId":"class-methods-use-this","severity":2,"message":"Expected 'this' to be used by class method 'generateCacheKey'.","line":530,"column":3,"nodeType":"FunctionExpression","messageId":"missingThis","endLine":530,"endColumn":19},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":531,"column":18,"nodeType":"Identifier","messageId":"undef","endLine":531,"endColumn":25},{"ruleId":"no-restricted-syntax","severity":2,"message":"iterators/generators require regenerator-runtime, which is too heavyweight for this guide to allow them. Separately, loops should be avoided in favor of array iterations.","line":571,"column":5,"nodeType":"ForOfStatement","messageId":"restrictedSyntax","endLine":575,"endColumn":6},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":608,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":608,"endColumn":7}],"suppressedMessages":[],"errorCount":17,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const GeminiService = require('../../services/gemini');\nconst logger = require('../utils/logger');\n\nclass NLPProcessorService {\n  constructor() {\n    this.gemini = new GeminiService();\n    this.intentCache = new Map();\n    this.cacheExpiry = 30 * 60 * 1000; // 30 minutes\n\n    // Command patterns and keywords\n    this.commandPatterns = {\n      // AI/Chat commands\n      chat: {\n        keywords: ['talk', 'chat', 'ask', 'tell', 'explain', 'help', 'question', 'answer'],\n        commands: ['gemini', 'chatgpt', 'deepseek', 'felo', 'hika', 'venice'],\n      },\n\n      // Image commands\n      image: {\n        keywords: ['image', 'picture', 'photo', 'generate', 'create', 'draw', 'design', 'art'],\n        commands: ['dalle', 'flux', 'animagine', 'deepdreams', 'text2image'],\n      },\n\n      // Video commands\n      video: {\n        keywords: ['video', 'movie', 'film', 'clip', 'download', 'stream'],\n        commands: ['videogpt', 'youtubevideo'],\n      },\n\n      // Download commands\n      download: {\n        keywords: ['download', 'get', 'save', 'fetch', 'retrieve'],\n        commands: [\n          'youtubevideo',\n          'youtubeaudio',\n          'instagramdl',\n          'facebookdl',\n          'tiktokdl',\n          'twitterdl',\n          'spotifydl',\n          'soundclouddl',\n        ],\n      },\n\n      // Entertainment commands\n      entertainment: {\n        keywords: ['fun', 'joke', 'meme', 'quote', 'game', 'play', 'entertain'],\n        commands: ['joke', 'meme', 'quotes', 'cecan', 'waifu', 'animeinfo', 'mangainfo'],\n      },\n\n      // Utility commands\n      utility: {\n        keywords: ['weather', 'translate', 'convert', 'sticker', 'ocr', 'search'],\n        commands: ['weather', 'translate', 'sticker', 'ocr', 'googlesearch', 'youtubesearch'],\n      },\n\n      // Information commands\n      info: {\n        keywords: ['info', 'information', 'about', 'status', 'ping', 'uptime', 'server'],\n        commands: ['ping', 'about', 'server', 'uptime', 'speedtest'],\n      },\n\n      // Profile commands\n      profile: {\n        keywords: ['profile', 'level', 'xp', 'coin', 'balance', 'stats', 'leaderboard'],\n        commands: ['profile', 'coin', 'leaderboard', 'claim'],\n      },\n\n      // Greeting commands\n      greeting: {\n        keywords: ['hello', 'hi', 'hey', 'good morning', 'good afternoon', 'good evening'],\n        commands: ['hello'],\n      },\n\n      // Farewell commands\n      farewell: {\n        keywords: ['goodbye', 'bye', 'see you', 'take care'],\n        commands: ['goodbye'],\n      },\n    };\n\n    // Intent mapping\n    this.intentMap = {\n      create_image: 'dalle',\n      generate_image: 'dalle',\n      make_sticker: 'sticker',\n      download_video: 'youtubevideo',\n      download_music: 'youtubeaudio',\n      get_weather: 'weather',\n      translate_text: 'translate',\n      tell_joke: 'joke',\n      show_meme: 'meme',\n      check_profile: 'profile',\n      search_google: 'googlesearch',\n      search_youtube: 'youtubesearch',\n      play_game: 'family100',\n      get_quote: 'quotes',\n      greeting: 'hello',\n      farewell: 'goodbye',\n    };\n\n    logger.info('NLP Processor service initialized');\n  }\n\n  /**\n   * Process natural language input and extract command intent\n   * @param {string} input - User's natural language input\n   * @param {Object} context - User context (history, preferences, etc.)\n   * @returns {Promise<Object>} Processing result with intent and confidence\n   */\n  async processInput(input, context = {}) {\n    if (!input || input.trim().length < 2) {\n      return { intent: null, confidence: 0, command: null };\n    }\n\n    try {\n      logger.debug('Processing natural language input', {\n        inputLength: input.length,\n        userId: context.userId,\n      });\n\n      // Check cache first\n      const cacheKey = this.generateCacheKey(input, context);\n      const cachedResult = this.getCachedResult(cacheKey);\n      if (cachedResult) {\n        logger.debug('Returning cached NLP result', { cacheKey });\n        return cachedResult;\n      }\n\n      // Multi-step processing\n      const result = await this.multiStepProcessing(input, context);\n\n      // Cache the result\n      this.setCachedResult(cacheKey, result);\n\n      logger.debug('NLP processing completed', {\n        intent: result.intent,\n        confidence: result.confidence,\n        command: result.command,\n      });\n\n      return result;\n    } catch (error) {\n      logger.error('NLP processing failed', {\n        error: error.message,\n        input: input.substring(0, 100),\n      });\n\n      // Fallback to pattern matching\n      return this.patternMatchingFallback(input);\n    }\n  }\n\n  /**\n   * Multi-step natural language processing\n   * @param {string} input - User input\n   * @param {Object} context - Context information\n   * @returns {Promise<Object>} Processing result\n   */\n  async multiStepProcessing(input, context) {\n    // Step 1: Preprocessing\n    const processedInput = this.preprocessInput(input);\n\n    // Step 2: Keyword extraction\n    const keywords = this.extractKeywords(processedInput);\n\n    // Step 3: Intent classification\n    const intentResult = await this.classifyIntent(processedInput, keywords, context);\n\n    // Step 4: Command mapping\n    const commandResult = this.mapToCommand(intentResult, keywords, context);\n\n    // Step 5: Confidence calculation\n    const confidence = this.calculateConfidence(intentResult, keywords, commandResult);\n\n    return {\n      intent: intentResult.intent,\n      confidence,\n      command: commandResult.command,\n      parameters: commandResult.parameters,\n      alternatives: commandResult.alternatives,\n      explanation: intentResult.explanation,\n    };\n  }\n\n  /**\n   * Preprocess input text\n   * @param {string} input - Raw input\n   * @returns {string} Processed input\n   */\n  preprocessInput(input) {\n    return input\n      .toLowerCase()\n      .trim()\n      .replace(/[^\\w\\s]/g, ' ') // Remove punctuation\n      .replace(/\\s+/g, ' ') // Normalize whitespace\n      .substring(0, 500); // Limit length\n  }\n\n  /**\n   * Extract keywords from input\n   * @param {string} input - Processed input\n   * @returns {Array} Array of keywords\n   */\n  extractKeywords(input) {\n    const words = input.split(' ');\n    const keywords = [];\n\n    // Extract meaningful words (longer than 2 chars, not common words)\n    const stopWords = [\n      'the',\n      'and',\n      'or',\n      'but',\n      'in',\n      'on',\n      'at',\n      'to',\n      'for',\n      'of',\n      'with',\n      'by',\n      'an',\n      'a',\n    ];\n\n    for (const word of words) {\n      if (word.length > 2 && !stopWords.includes(word)) {\n        keywords.push(word);\n      }\n    }\n\n    return keywords;\n  }\n\n  /**\n   * Classify user intent using AI\n   * @param {string} input - Processed input\n   * @param {Array} keywords - Extracted keywords\n   * @param {Object} context - Context information\n   * @returns {Promise<Object>} Intent classification result\n   */\n  async classifyIntent(input, keywords, context) {\n    try {\n      const prompt = `Analyze this user message and determine their intent. Respond with a JSON object containing:\n- intent: the primary intent (e.g., \"create_image\", \"download_video\", \"get_weather\", \"tell_joke\")\n- confidence: confidence score (0-1)\n- explanation: brief explanation of the intent\n\nMessage: \"${input}\"\nKeywords: ${keywords.join(', ')}\n\nAvailable intents:\n- create_image: generate or create images\n- download_video: download videos from platforms\n- download_music: download audio/music\n- get_weather: check weather information\n- translate_text: translate between languages\n- tell_joke: get jokes or humor\n- show_meme: display memes\n- search_web: search the internet\n- play_game: play games or quizzes\n- get_info: get information or status\n- convert_media: convert files (sticker, audio, etc.)\n- greeting: greet the user\n- farewell: say goodbye to the user\n\nRespond with ONLY valid JSON, no additional text.`;\n\n      const response = await this.gemini.getChatCompletion(prompt);\n      const result = JSON.parse(response);\n\n      return {\n        intent: result.intent || 'unknown',\n        confidence: result.confidence || 0.5,\n        explanation: result.explanation || 'AI-classified intent',\n      };\n    } catch (error) {\n      logger.warn('AI intent classification failed, using fallback', { error: error.message });\n      return this.fallbackIntentClassification(input, keywords);\n    }\n  }\n\n  /**\n   * Map intent to specific bot command\n   * @param {Object} intentResult - Intent classification result\n   * @param {Array} keywords - Keywords from input\n   * @param {Object} context - Context information\n   * @returns {Object} Command mapping result\n   */\n  mapToCommand(intentResult, keywords, context) {\n    const { intent } = intentResult;\n\n    // Direct intent mapping\n    if (this.intentMap[intent]) {\n      return {\n        command: this.intentMap[intent],\n        parameters: this.extractParameters(intent, keywords),\n        alternatives: this.getAlternativeCommands(intent),\n      };\n    }\n\n    // Pattern-based mapping\n    for (const [category, data] of Object.entries(this.commandPatterns)) {\n      const keywordMatch = keywords.some(keyword =>\n        data.keywords.some(\n          catKeyword => catKeyword.includes(keyword) || keyword.includes(catKeyword)\n        )\n      );\n\n      if (keywordMatch) {\n        const bestCommand = this.selectBestCommand(data.commands, keywords, context);\n        return {\n          command: bestCommand,\n          parameters: this.extractParameters(intent, keywords),\n          alternatives: data.commands.filter(cmd => cmd !== bestCommand),\n        };\n      }\n    }\n\n    // Fallback to most common command\n    return {\n      command: 'gemini',\n      parameters: {},\n      alternatives: ['chatgpt', 'ping', 'help'],\n    };\n  }\n\n  /**\n   * Select the best command from alternatives\n   * @param {Array} commands - Available commands\n   * @param {Array} keywords - User keywords\n   * @param {Object} context - User context\n   * @returns {string} Best command match\n   */\n  selectBestCommand(commands, keywords, context) {\n    // Score each command based on keyword relevance\n    const scores = commands.map(command => {\n      let score = 0;\n\n      // Check if command name matches keywords\n      if (keywords.some(keyword => command.includes(keyword))) {\n        score += 0.5;\n      }\n\n      // Check user history preference\n      if (context.recentCommands && context.recentCommands.includes(command)) {\n        score += 0.3;\n      }\n\n      // Check command popularity (could be from analytics)\n      if (['gemini', 'ping', 'weather'].includes(command)) {\n        score += 0.2;\n      }\n\n      return { command, score };\n    });\n\n    // Return highest scoring command\n    scores.sort((a, b) => b.score - a.score);\n    return scores[0].command;\n  }\n\n  /**\n   * Extract parameters from user input\n   * @param {string} intent - Classified intent\n   * @param {Array} keywords - Keywords from input\n   * @returns {Object} Extracted parameters\n   */\n  extractParameters(intent, keywords) {\n    const params = {};\n\n    // Extract location for weather\n    if (intent === 'get_weather') {\n      const locationKeywords = keywords.filter(\n        keyword => !['weather', 'get', 'check', 'show', 'tell'].includes(keyword)\n      );\n      if (locationKeywords.length > 0) {\n        params.location = locationKeywords.join(' ');\n      }\n    }\n\n    // Extract search query\n    if (['search_web', 'download_video', 'download_music'].includes(intent)) {\n      params.query = keywords\n        .filter(\n          keyword =>\n            !['download', 'search', 'find', 'get', 'video', 'music', 'song'].includes(keyword)\n        )\n        .join(' ');\n    }\n\n    // Extract translation parameters\n    if (intent === 'translate_text') {\n      // This would need more sophisticated parsing\n      params.text = keywords.join(' ');\n    }\n\n    return params;\n  }\n\n  /**\n   * Get alternative commands for an intent\n   * @param {string} intent - The intent\n   * @returns {Array} Alternative commands\n   */\n  getAlternativeCommands(intent) {\n    const alternatives = {\n      create_image: ['flux', 'animagine', 'deepdreams'],\n      download_video: ['instagramdl', 'facebookdl', 'tiktokdl'],\n      get_weather: ['ping'], // Limited alternatives\n      tell_joke: ['meme', 'quotes'],\n      search_web: ['youtubesearch', 'githubsearch'],\n    };\n\n    return alternatives[intent] || [];\n  }\n\n  /**\n   * Calculate overall confidence score\n   * @param {Object} intentResult - Intent classification\n   * @param {Array} keywords - Keywords\n   * @param {Object} commandResult - Command mapping\n   * @returns {number} Confidence score (0-1)\n   */\n  calculateConfidence(intentResult, keywords, commandResult) {\n    let confidence = intentResult.confidence || 0.5;\n\n    // Boost confidence for direct keyword matches\n    if (keywords.some(keyword => commandResult.command.includes(keyword))) {\n      confidence += 0.2;\n    }\n\n    // Boost confidence for clear intents\n    const clearIntents = ['create_image', 'get_weather', 'tell_joke'];\n    if (clearIntents.includes(intentResult.intent)) {\n      confidence += 0.1;\n    }\n\n    // Reduce confidence for ambiguous inputs\n    if (keywords.length < 2) {\n      confidence -= 0.2;\n    }\n\n    return Math.max(0, Math.min(1, confidence));\n  }\n\n  /**\n   * Fallback intent classification using patterns\n   * @param {string} input - User input\n   * @param {Array} keywords - Keywords\n   * @returns {Object} Fallback classification\n   */\n  fallbackIntentClassification(input, keywords) {\n    // Simple pattern matching\n    if (input.includes('weather') || input.includes('temperature')) {\n      return { intent: 'get_weather', confidence: 0.8, explanation: 'Weather keywords detected' };\n    }\n\n    if (input.includes('image') || input.includes('picture') || input.includes('generate')) {\n      return {\n        intent: 'create_image',\n        confidence: 0.8,\n        explanation: 'Image-related keywords detected',\n      };\n    }\n\n    if (input.includes('download') || input.includes('video')) {\n      return {\n        intent: 'download_video',\n        confidence: 0.7,\n        explanation: 'Download keywords detected',\n      };\n    }\n\n    if (input.includes('joke') || input.includes('funny')) {\n      return { intent: 'tell_joke', confidence: 0.8, explanation: 'Humor keywords detected' };\n    }\n\n    if (input.includes('hello') || input.includes('hi') || input.includes('hey')) {\n      return { intent: 'greeting', confidence: 0.9, explanation: 'Greeting keywords detected' };\n    }\n\n    if (input.includes('goodbye') || input.includes('bye')) {\n      return { intent: 'farewell', confidence: 0.9, explanation: 'Farewell keywords detected' };\n    }\n\n    return { intent: 'unknown', confidence: 0.3, explanation: 'Unable to classify intent' };\n  }\n\n  /**\n   * Pattern matching fallback\n   * @param {string} input - User input\n   * @returns {Object} Fallback result\n   */\n  patternMatchingFallback(input) {\n    const lowerInput = input.toLowerCase();\n\n    // Direct pattern matches\n    for (const [category, data] of Object.entries(this.commandPatterns)) {\n      for (const keyword of data.keywords) {\n        if (lowerInput.includes(keyword)) {\n          return {\n            intent: category,\n            confidence: 0.6,\n            command: data.commands[0], // Use first command as default\n            parameters: {},\n            alternatives: data.commands.slice(1),\n          };\n        }\n      }\n    }\n\n    // Default fallback\n    return {\n      intent: 'unknown',\n      confidence: 0.2,\n      command: 'gemini',\n      parameters: {},\n      alternatives: ['ping', 'help'],\n    };\n  }\n\n  /**\n   * Generate cache key for NLP results\n   * @param {string} input - User input\n   * @param {Object} context - Context information\n   * @returns {string} Cache key\n   */\n  generateCacheKey(input, context) {\n    const hash = require('crypto').createHash('md5');\n    hash.update(\n      `${input}:${context.userId || 'anonymous'}:${context.recentCommands?.join(',') || ''}`\n    );\n    return `nlp:${hash.digest('hex')}`;\n  }\n\n  /**\n   * Get cached result\n   * @param {string} key - Cache key\n   * @returns {Object|null} Cached result or null\n   */\n  getCachedResult(key) {\n    const cached = this.intentCache.get(key);\n    if (cached && Date.now() - cached.timestamp < this.cacheExpiry) {\n      return cached.result;\n    }\n    if (cached) {\n      this.intentCache.delete(key); // Remove expired entry\n    }\n    return null;\n  }\n\n  /**\n   * Set cached result\n   * @param {string} key - Cache key\n   * @param {Object} result - Result to cache\n   */\n  setCachedResult(key, result) {\n    this.intentCache.set(key, {\n      result,\n      timestamp: Date.now(),\n    });\n  }\n\n  /**\n   * Clear expired cache entries\n   */\n  clearExpiredCache() {\n    const now = Date.now();\n    for (const [key, value] of this.intentCache.entries()) {\n      if (now - value.timestamp > this.cacheExpiry) {\n        this.intentCache.delete(key);\n      }\n    }\n    logger.debug(`Cleared expired NLP cache entries. Remaining: ${this.intentCache.size}`);\n  }\n\n  /**\n   * Health check for NLP service\n   * @returns {Promise<Object>} Health status\n   */\n  async healthCheck() {\n    try {\n      const testInput = 'hello world';\n      const result = await this.processInput(testInput);\n\n      return {\n        status: 'healthy',\n        service: 'nlp-processor',\n        cacheSize: this.intentCache.size,\n        testInput,\n        testResult: result.intent,\n        timestamp: new Date().toISOString(),\n      };\n    } catch (error) {\n      logger.error('NLP processor health check failed', { error: error.message });\n      return {\n        status: 'unhealthy',\n        service: 'nlp-processor',\n        error: error.message,\n        timestamp: new Date().toISOString(),\n      };\n    }\n  }\n}\n\nmodule.exports = NLPProcessorService;\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\src\\services\\rateLimiter.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":30,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":37},{"ruleId":"import-x/no-unresolved","severity":2,"message":"Unable to resolve path to module 'rate-limiter-flexible'.","line":1,"column":38,"nodeType":"Literal","messageId":"unresolved","endLine":1,"endColumn":61},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":2,"column":16,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":23},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":11,"column":21,"nodeType":"Identifier","messageId":"undef","endLine":11,"endColumn":28},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":13,"column":14,"nodeType":"Identifier","messageId":"undef","endLine":13,"endColumn":21},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":14,"column":19,"nodeType":"Identifier","messageId":"undef","endLine":14,"endColumn":26},{"ruleId":"class-methods-use-this","severity":2,"message":"Expected 'this' to be used by class method 'createPresetLimiters'.","line":201,"column":3,"nodeType":"FunctionExpression","messageId":"missingThis","endLine":201,"endColumn":23},{"ruleId":"no-restricted-syntax","severity":2,"message":"iterators/generators require regenerator-runtime, which is too heavyweight for this guide to allow them. Separately, loops should be avoided in favor of array iterations.","line":269,"column":5,"nodeType":"ForOfStatement","messageId":"restrictedSyntax","endLine":276,"endColumn":6},{"ruleId":"class-methods-use-this","severity":2,"message":"Expected 'this' to be used by class method 'parseRedisInfo'.","line":286,"column":3,"nodeType":"FunctionExpression","messageId":"missingThis","endLine":286,"endColumn":17},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":336,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":336,"endColumn":7}],"suppressedMessages":[],"errorCount":10,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const { RateLimiterRedis } = require('rate-limiter-flexible');\nconst logger = require('../utils/logger');\n\nclass RateLimiterService {\n  constructor() {\n    this.limiters = new Map();\n    this.redisClient = null;\n\n    // Initialize Redis client\n    try {\n      const redis = require('redis');\n      this.redisClient = redis.createClient({\n        url: process.env.REDIS_URL || 'redis://localhost:6379',\n        password: process.env.REDIS_PASSWORD,\n      });\n\n      this.redisClient.on('error', err => {\n        logger.error('Rate limiter Redis connection error:', err);\n      });\n\n      this.redisClient.on('connect', () => {\n        logger.info('Rate limiter connected to Redis');\n      });\n\n      // Connect to Redis\n      this.redisClient.connect().catch(err => {\n        logger.error('Failed to connect rate limiter to Redis:', err);\n      });\n    } catch (error) {\n      logger.error('Failed to initialize Redis for rate limiter:', error);\n    }\n  }\n\n  /**\n   * Get or create a rate limiter for specific configuration\n   * @param {Object} config - Rate limiter configuration\n   * @param {number} config.points - Number of requests allowed\n   * @param {number} config.duration - Time window in seconds\n   * @param {string} config.keyPrefix - Prefix for Redis keys\n   * @returns {RateLimiterRedis} Rate limiter instance\n   */\n  getLimiter(config) {\n    const key = `${config.points}:${config.duration}:${config.keyPrefix || 'default'}`;\n\n    if (!this.limiters.has(key)) {\n      if (!this.redisClient) {\n        throw new Error('Redis client not available for rate limiting');\n      }\n\n      this.limiters.set(\n        key,\n        new RateLimiterRedis({\n          storeClient: this.redisClient,\n          points: config.points,\n          duration: config.duration,\n          keyPrefix: config.keyPrefix || 'rl',\n          inmemoryBlockOnConsumed: config.points, // Block if consumed all points\n          inmemoryBlockDuration: config.blockDuration || 60, // Block duration in seconds\n          insuranceLimiter: new RateLimiterRedis({\n            storeClient: this.redisClient,\n            points: Math.floor(config.points / 2),\n            duration: config.duration * 2,\n            keyPrefix: `${config.keyPrefix || 'rl'}_insurance`,\n          }),\n        })\n      );\n    }\n\n    return this.limiters.get(key);\n  }\n\n  /**\n   * Check if request is allowed\n   * @param {string} key - Unique identifier for the requester\n   * @param {Object} config - Rate limiter configuration\n   * @returns {Promise<boolean>} Whether the request is allowed\n   */\n  async check(key, config) {\n    try {\n      const limiter = this.getLimiter(config);\n      await limiter.consume(key);\n      return true;\n    } catch (rejRes) {\n      logger.warn('Rate limit exceeded', {\n        key,\n        points: config.points,\n        duration: config.duration,\n        remainingPoints: rejRes.remainingPoints,\n        msBeforeNext: rejRes.msBeforeNext,\n      });\n      return false;\n    }\n  }\n\n  /**\n   * Get rate limit status for a key\n   * @param {string} key - Unique identifier for the requester\n   * @param {Object} config - Rate limiter configuration\n   * @returns {Promise<Object>} Rate limit status\n   */\n  async getStatus(key, config) {\n    try {\n      const limiter = this.getLimiter(config);\n      const res = await limiter.get(key);\n\n      return {\n        remainingPoints: res.remainingPoints,\n        msBeforeNext: res.msBeforeNext,\n        consumedPoints: res.consumedPoints,\n        isBlocked: false,\n      };\n    } catch (error) {\n      return {\n        remainingPoints: 0,\n        msBeforeNext: 0,\n        consumedPoints: config.points,\n        isBlocked: true,\n        error: error.message,\n      };\n    }\n  }\n\n  /**\n   * Block a key manually\n   * @param {string} key - Unique identifier for the requester\n   * @param {number} seconds - Block duration in seconds\n   * @param {Object} config - Rate limiter configuration\n   * @returns {Promise<boolean>} Success status\n   */\n  async block(key, seconds, config) {\n    try {\n      const limiter = this.getLimiter(config);\n      await limiter.block(key, seconds);\n      logger.info('Manually blocked key', { key, seconds });\n      return true;\n    } catch (error) {\n      logger.error('Failed to block key', { key, error: error.message });\n      return false;\n    }\n  }\n\n  /**\n   * Unblock a key\n   * @param {string} key - Unique identifier for the requester\n   * @param {Object} config - Rate limiter configuration\n   * @returns {Promise<boolean>} Success status\n   */\n  async unblock(key, config) {\n    try {\n      const limiter = this.getLimiter(config);\n      await limiter.delete(key);\n      logger.info('Unblocked key', { key });\n      return true;\n    } catch (error) {\n      logger.error('Failed to unblock key', { key, error: error.message });\n      return false;\n    }\n  }\n\n  /**\n   * Penalize a key (consume extra points)\n   * @param {string} key - Unique identifier for the requester\n   * @param {number} points - Points to consume\n   * @param {Object} config - Rate limiter configuration\n   * @returns {Promise<boolean>} Success status\n   */\n  async penalize(key, points, config) {\n    try {\n      const limiter = this.getLimiter(config);\n      await limiter.penalty(key, points);\n      logger.info('Penalized key', { key, points });\n      return true;\n    } catch (error) {\n      logger.error('Failed to penalize key', { key, error: error.message });\n      return false;\n    }\n  }\n\n  /**\n   * Reward a key (reduce consumed points)\n   * @param {string} key - Unique identifier for the requester\n   * @param {number} points - Points to reward\n   * @param {Object} config - Rate limiter configuration\n   * @returns {Promise<boolean>} Success status\n   */\n  async reward(key, points, config) {\n    try {\n      const limiter = this.getLimiter(config);\n      await limiter.reward(key, points);\n      logger.info('Rewarded key', { key, points });\n      return true;\n    } catch (error) {\n      logger.error('Failed to reward key', { key, error: error.message });\n      return false;\n    }\n  }\n\n  /**\n   * Create predefined rate limiters for common use cases\n   */\n  createPresetLimiters() {\n    return {\n      // AI Chat commands - strict limits\n      aiChat: {\n        points: 20, // 20 requests\n        duration: 60, // per minute\n        keyPrefix: 'ai_chat',\n      },\n\n      // General commands - moderate limits\n      generalCommands: {\n        points: 50, // 50 requests\n        duration: 60, // per minute\n        keyPrefix: 'general',\n      },\n\n      // Media processing - lower limits due to resource usage\n      mediaProcessing: {\n        points: 10, // 10 requests\n        duration: 60, // per minute\n        keyPrefix: 'media',\n      },\n\n      // API endpoints - higher limits for web dashboard\n      apiRequests: {\n        points: 100, // 100 requests\n        duration: 60, // per minute\n        keyPrefix: 'api',\n      },\n\n      // File uploads - strict limits\n      fileUploads: {\n        points: 5, // 5 uploads\n        duration: 300, // per 5 minutes\n        keyPrefix: 'upload',\n      },\n\n      // Admin actions - very strict limits\n      adminActions: {\n        points: 10, // 10 actions\n        duration: 60, // per minute\n        keyPrefix: 'admin',\n      },\n    };\n  }\n\n  /**\n   * Get rate limiter statistics\n   * @returns {Promise<Object>} Statistics about rate limiters\n   */\n  async getStats() {\n    const stats = {\n      connected: !!this.redisClient,\n      limitersCount: this.limiters.size,\n      limiters: [],\n    };\n\n    if (this.redisClient) {\n      try {\n        // Get Redis stats\n        const redisInfo = await this.redisClient.info();\n        stats.redis = this.parseRedisInfo(redisInfo);\n      } catch (error) {\n        stats.redis = { error: error.message };\n      }\n    }\n\n    // Get limiter configurations\n    for (const [key, limiter] of this.limiters) {\n      stats.limiters.push({\n        key,\n        points: limiter.points,\n        duration: limiter.duration,\n        keyPrefix: limiter.keyPrefix,\n      });\n    }\n\n    return stats;\n  }\n\n  /**\n   * Parse Redis INFO command output\n   * @param {string} info - Raw Redis info\n   * @returns {Object} Parsed info object\n   */\n  parseRedisInfo(info) {\n    const lines = info.split('\\n');\n    const parsed = {};\n\n    lines.forEach(line => {\n      if (line.includes(':')) {\n        const [key, value] = line.split(':');\n        parsed[key] = value;\n      }\n    });\n\n    return parsed;\n  }\n\n  /**\n   * Health check\n   * @returns {Promise<Object>} Health status\n   */\n  async healthCheck() {\n    try {\n      if (!this.redisClient) {\n        return { status: 'disconnected', service: 'rate-limiter' };\n      }\n\n      await this.redisClient.ping();\n\n      return {\n        status: 'healthy',\n        service: 'rate-limiter',\n        limiters: this.limiters.size,\n      };\n    } catch (error) {\n      return {\n        status: 'unhealthy',\n        service: 'rate-limiter',\n        error: error.message,\n      };\n    }\n  }\n\n  /**\n   * Close Redis connection\n   */\n  async close() {\n    if (this.redisClient) {\n      await this.redisClient.quit();\n    }\n  }\n}\n\nmodule.exports = RateLimiterService;\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\src\\services\\servicesManager.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":6,"column":22,"nodeType":"Identifier","messageId":"undef","endLine":6,"endColumn":29},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":7,"column":28,"nodeType":"Identifier","messageId":"undef","endLine":7,"endColumn":35},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":8,"column":24,"nodeType":"Identifier","messageId":"undef","endLine":8,"endColumn":31},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":9,"column":36,"nodeType":"Identifier","messageId":"undef","endLine":9,"endColumn":43},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":10,"column":23,"nodeType":"Identifier","messageId":"undef","endLine":10,"endColumn":30},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":11,"column":25,"nodeType":"Identifier","messageId":"undef","endLine":11,"endColumn":32},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":12,"column":29,"nodeType":"Identifier","messageId":"undef","endLine":12,"endColumn":36},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":25,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":25,"endColumn":18,"suggestions":[{"fix":{"range":[724,767],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":49,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":49,"endColumn":18,"suggestions":[{"fix":{"range":[1518,1573],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":51,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":51,"endColumn":20,"suggestions":[{"fix":{"range":[1602,1657],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":63,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":63,"endColumn":18,"suggestions":[{"fix":{"range":[1902,1952],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":65,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":65,"endColumn":18,"suggestions":[{"fix":{"range":[2009,2054],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":67,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":67,"endColumn":20,"suggestions":[{"fix":{"range":[2083,2145],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"class-methods-use-this","severity":2,"message":"Expected 'this' to be used by class method 'setupCleanupIntervals'.","line":75,"column":3,"nodeType":"FunctionExpression","messageId":"missingThis","endLine":75,"endColumn":24},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":82,"column":11,"nodeType":"MemberExpression","messageId":"unexpected","endLine":82,"endColumn":24,"suggestions":[{"fix":{"range":[2425,2474],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":94,"column":11,"nodeType":"MemberExpression","messageId":"unexpected","endLine":94,"endColumn":24,"suggestions":[{"fix":{"range":[2686,2736],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":106,"column":11,"nodeType":"MemberExpression","messageId":"unexpected","endLine":106,"endColumn":24,"suggestions":[{"fix":{"range":[2978,3033],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":118,"column":11,"nodeType":"MemberExpression","messageId":"unexpected","endLine":118,"endColumn":24,"suggestions":[{"fix":{"range":[3254,3311],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":130,"column":11,"nodeType":"MemberExpression","messageId":"unexpected","endLine":130,"endColumn":24,"suggestions":[{"fix":{"range":[3538,3594],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":142,"column":11,"nodeType":"MemberExpression","messageId":"unexpected","endLine":142,"endColumn":24,"suggestions":[{"fix":{"range":[3815,3868],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":187,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":187,"endColumn":7}],"suppressedMessages":[],"errorCount":9,"fatalErrorCount":0,"warningCount":12,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Services Manager - Initialize and manage all services\n * Ensures proper initialization of all services with error handling\n */\n\nconst gamesService = require('./gamesServiceFixed');\nconst funCommandsService = require('./funCommandsService');\nconst stickerService = require('./stickerService');\nconst enhancedDownloadersService = require('./enhancedDownloadersService');\nconst menfesService = require('./menfesService');\nconst mathQuizService = require('./mathQuizService');\nconst textToSpeechService = require('./textToSpeechService');\n\nclass ServicesManager {\n  constructor() {\n    this.initialized = false;\n    this.services = {};\n  }\n\n  /**\n   * Initialize all services\n   */\n  async initialize() {\n    try {\n      console.log('ðŸ”„ Initializing services...');\n\n      // Initialize services in order\n      await this.initializeService('funCommands', async () => {\n        await funCommandsService.initialize();\n        return funCommandsService;\n      });\n\n      await this.initializeService('textToSpeech', async () => {\n        await textToSpeechService.initialize();\n        return textToSpeechService;\n      });\n\n      // Initialize other services\n      this.services.games = gamesService;\n      this.services.sticker = stickerService;\n      this.services.enhancedDownloaders = enhancedDownloadersService;\n      this.services.menfes = menfesService;\n      this.services.mathQuiz = mathQuizService;\n\n      // Set up cleanup intervals\n      this.setupCleanupIntervals();\n\n      this.initialized = true;\n      console.log('âœ… All services initialized successfully');\n    } catch (error) {\n      console.error('âŒ Error initializing services:', error);\n      throw error;\n    }\n  }\n\n  /**\n   * Initialize individual service\n   * @param {string} name - Service name\n   * @param {Function} initFunction - Initialization function\n   */\n  async initializeService(name, initFunction) {\n    try {\n      console.log(`ðŸ”„ Initializing ${name} service...`);\n      this.services[name] = await initFunction();\n      console.log(`âœ… ${name} service initialized`);\n    } catch (error) {\n      console.error(`âŒ Error initializing ${name} service:`, error);\n      throw error;\n    }\n  }\n\n  /**\n   * Set up cleanup intervals for services\n   */\n  setupCleanupIntervals() {\n    // Clean up games every 5 minutes\n    setInterval(\n      () => {\n        try {\n          gamesService.cleanupInactiveGames();\n        } catch (error) {\n          console.error('Error cleaning up games:', error);\n        }\n      },\n      5 * 60 * 1000\n    );\n\n    // Clean up menfes sessions every 2 minutes\n    setInterval(\n      () => {\n        try {\n          menfesService.cleanup();\n        } catch (error) {\n          console.error('Error cleaning up menfes:', error);\n        }\n      },\n      2 * 60 * 1000\n    );\n\n    // Clean up downloaders sessions every 10 minutes\n    setInterval(\n      () => {\n        try {\n          enhancedDownloadersService.cleanupOldSessions();\n        } catch (error) {\n          console.error('Error cleaning up downloaders:', error);\n        }\n      },\n      10 * 60 * 1000\n    );\n\n    // Clean up sticker temp files every hour\n    setInterval(\n      () => {\n        try {\n          stickerService.cleanupTempFiles();\n        } catch (error) {\n          console.error('Error cleaning up sticker files:', error);\n        }\n      },\n      60 * 60 * 1000\n    );\n\n    // Clean up math quizzes every 3 minutes\n    setInterval(\n      () => {\n        try {\n          mathQuizService.cleanupInactiveQuizzes();\n        } catch (error) {\n          console.error('Error cleaning up math quizzes:', error);\n        }\n      },\n      3 * 60 * 1000\n    );\n\n    // Clean up TTS files every 30 minutes\n    setInterval(\n      () => {\n        try {\n          textToSpeechService.cleanupOldFiles();\n        } catch (error) {\n          console.error('Error cleaning up TTS files:', error);\n        }\n      },\n      30 * 60 * 1000\n    );\n  }\n\n  /**\n   * Get service instance\n   * @param {string} name - Service name\n   */\n  getService(name) {\n    if (!this.initialized) {\n      throw new Error('Services not initialized. Call initialize() first.');\n    }\n\n    const service = this.services[name];\n    if (!service) {\n      throw new Error(`Service '${name}' not found`);\n    }\n\n    return service;\n  }\n\n  /**\n   * Check if services are initialized\n   */\n  isInitialized() {\n    return this.initialized;\n  }\n\n  /**\n   * Get initialization status\n   */\n  getStatus() {\n    return {\n      initialized: this.initialized,\n      services: Object.keys(this.services),\n      activeGames: gamesService.getActiveGamesCount(),\n      activeMenfes: menfesService.getActiveSessionsCount(),\n    };\n  }\n}\n\n// Export singleton instance\nmodule.exports = new ServicesManager();\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\src\\services\\servicesManagerUpdated.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":6,"column":22,"nodeType":"Identifier","messageId":"undef","endLine":6,"endColumn":29},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":7,"column":28,"nodeType":"Identifier","messageId":"undef","endLine":7,"endColumn":35},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":8,"column":24,"nodeType":"Identifier","messageId":"undef","endLine":8,"endColumn":31},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":9,"column":36,"nodeType":"Identifier","messageId":"undef","endLine":9,"endColumn":43},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":10,"column":23,"nodeType":"Identifier","messageId":"undef","endLine":10,"endColumn":30},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":11,"column":25,"nodeType":"Identifier","messageId":"undef","endLine":11,"endColumn":32},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":12,"column":29,"nodeType":"Identifier","messageId":"undef","endLine":12,"endColumn":36},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":13,"column":24,"nodeType":"Identifier","messageId":"undef","endLine":13,"endColumn":31},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":14,"column":25,"nodeType":"Identifier","messageId":"undef","endLine":14,"endColumn":32},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":27,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":27,"endColumn":18,"suggestions":[{"fix":{"range":[830,873],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":61,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":61,"endColumn":18,"suggestions":[{"fix":{"range":[1917,1972],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":63,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":63,"endColumn":20,"suggestions":[{"fix":{"range":[2001,2056],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":75,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":75,"endColumn":18,"suggestions":[{"fix":{"range":[2301,2351],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":77,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":77,"endColumn":18,"suggestions":[{"fix":{"range":[2408,2453],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":79,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":79,"endColumn":20,"suggestions":[{"fix":{"range":[2482,2544],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"class-methods-use-this","severity":2,"message":"Expected 'this' to be used by class method 'setupCleanupIntervals'.","line":87,"column":3,"nodeType":"FunctionExpression","messageId":"missingThis","endLine":87,"endColumn":24},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":94,"column":11,"nodeType":"MemberExpression","messageId":"unexpected","endLine":94,"endColumn":24,"suggestions":[{"fix":{"range":[2824,2873],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":106,"column":11,"nodeType":"MemberExpression","messageId":"unexpected","endLine":106,"endColumn":24,"suggestions":[{"fix":{"range":[3085,3135],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":118,"column":11,"nodeType":"MemberExpression","messageId":"unexpected","endLine":118,"endColumn":24,"suggestions":[{"fix":{"range":[3377,3432],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":130,"column":11,"nodeType":"MemberExpression","messageId":"unexpected","endLine":130,"endColumn":24,"suggestions":[{"fix":{"range":[3653,3710],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":142,"column":11,"nodeType":"MemberExpression","messageId":"unexpected","endLine":142,"endColumn":24,"suggestions":[{"fix":{"range":[3937,3993],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":154,"column":11,"nodeType":"MemberExpression","messageId":"unexpected","endLine":154,"endColumn":24,"suggestions":[{"fix":{"range":[4214,4267],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":166,"column":11,"nodeType":"MemberExpression","messageId":"unexpected","endLine":166,"endColumn":24,"suggestions":[{"fix":{"range":[4488,4545],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":178,"column":11,"nodeType":"MemberExpression","messageId":"unexpected","endLine":178,"endColumn":24,"suggestions":[{"fix":{"range":[4777,4831],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":224,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":224,"endColumn":7}],"suppressedMessages":[],"errorCount":11,"fatalErrorCount":0,"warningCount":14,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Services Manager - Initialize and manage all services\n * Ensures proper initialization of all services with error handling\n */\n\nconst gamesService = require('./gamesServiceFixed');\nconst funCommandsService = require('./funCommandsService');\nconst stickerService = require('./stickerService');\nconst enhancedDownloadersService = require('./enhancedDownloadersService');\nconst menfesService = require('./menfesService');\nconst mathQuizService = require('./mathQuizService');\nconst textToSpeechService = require('./textToSpeechService');\nconst writingService = require('./writingService');\nconst multiBotService = require('./multiBotService');\n\nclass ServicesManager {\n  constructor() {\n    this.initialized = false;\n    this.services = {};\n  }\n\n  /**\n   * Initialize all services\n   */\n  async initialize() {\n    try {\n      console.log('ðŸ”„ Initializing services...');\n\n      // Initialize services in order\n      await this.initializeService('funCommands', async () => {\n        await funCommandsService.initialize();\n        return funCommandsService;\n      });\n\n      await this.initializeService('textToSpeech', async () => {\n        await textToSpeechService.initialize();\n        return textToSpeechService;\n      });\n\n      await this.initializeService('writing', async () => {\n        await writingService.initialize();\n        return writingService;\n      });\n\n      await this.initializeService('multiBot', async () => {\n        await multiBotService.initialize();\n        return multiBotService;\n      });\n\n      // Initialize other services\n      this.services.games = gamesService;\n      this.services.sticker = stickerService;\n      this.services.enhancedDownloaders = enhancedDownloadersService;\n      this.services.menfes = menfesService;\n      this.services.mathQuiz = mathQuizService;\n\n      // Set up cleanup intervals\n      this.setupCleanupIntervals();\n\n      this.initialized = true;\n      console.log('âœ… All services initialized successfully');\n    } catch (error) {\n      console.error('âŒ Error initializing services:', error);\n      throw error;\n    }\n  }\n\n  /**\n   * Initialize individual service\n   * @param {string} name - Service name\n   * @param {Function} initFunction - Initialization function\n   */\n  async initializeService(name, initFunction) {\n    try {\n      console.log(`ðŸ”„ Initializing ${name} service...`);\n      this.services[name] = await initFunction();\n      console.log(`âœ… ${name} service initialized`);\n    } catch (error) {\n      console.error(`âŒ Error initializing ${name} service:`, error);\n      throw error;\n    }\n  }\n\n  /**\n   * Set up cleanup intervals for services\n   */\n  setupCleanupIntervals() {\n    // Clean up games every 5 minutes\n    setInterval(\n      () => {\n        try {\n          gamesService.cleanupInactiveGames();\n        } catch (error) {\n          console.error('Error cleaning up games:', error);\n        }\n      },\n      5 * 60 * 1000\n    );\n\n    // Clean up menfes sessions every 2 minutes\n    setInterval(\n      () => {\n        try {\n          menfesService.cleanup();\n        } catch (error) {\n          console.error('Error cleaning up menfes:', error);\n        }\n      },\n      2 * 60 * 1000\n    );\n\n    // Clean up downloaders sessions every 10 minutes\n    setInterval(\n      () => {\n        try {\n          enhancedDownloadersService.cleanupOldSessions();\n        } catch (error) {\n          console.error('Error cleaning up downloaders:', error);\n        }\n      },\n      10 * 60 * 1000\n    );\n\n    // Clean up sticker temp files every hour\n    setInterval(\n      () => {\n        try {\n          stickerService.cleanupTempFiles();\n        } catch (error) {\n          console.error('Error cleaning up sticker files:', error);\n        }\n      },\n      60 * 60 * 1000\n    );\n\n    // Clean up math quizzes every 3 minutes\n    setInterval(\n      () => {\n        try {\n          mathQuizService.cleanupInactiveQuizzes();\n        } catch (error) {\n          console.error('Error cleaning up math quizzes:', error);\n        }\n      },\n      3 * 60 * 1000\n    );\n\n    // Clean up TTS files every 30 minutes\n    setInterval(\n      () => {\n        try {\n          textToSpeechService.cleanupOldFiles();\n        } catch (error) {\n          console.error('Error cleaning up TTS files:', error);\n        }\n      },\n      30 * 60 * 1000\n    );\n\n    // Clean up writing files every 45 minutes\n    setInterval(\n      () => {\n        try {\n          writingService.cleanupOldFiles();\n        } catch (error) {\n          console.error('Error cleaning up writing files:', error);\n        }\n      },\n      45 * 60 * 1000\n    );\n\n    // Clean up inactive multi-bots every 15 minutes\n    setInterval(\n      () => {\n        try {\n          multiBotService.cleanupInactiveBots();\n        } catch (error) {\n          console.error('Error cleaning up multi-bots:', error);\n        }\n      },\n      15 * 60 * 1000\n    );\n  }\n\n  /**\n   * Get service instance\n   * @param {string} name - Service name\n   */\n  getService(name) {\n    if (!this.initialized) {\n      throw new Error('Services not initialized. Call initialize() first.');\n    }\n\n    const service = this.services[name];\n    if (!service) {\n      throw new Error(`Service '${name}' not found`);\n    }\n\n    return service;\n  }\n\n  /**\n   * Check if services are initialized\n   */\n  isInitialized() {\n    return this.initialized;\n  }\n\n  /**\n   * Get initialization status\n   */\n  getStatus() {\n    return {\n      initialized: this.initialized,\n      services: Object.keys(this.services),\n      activeGames: gamesService.getActiveGamesCount(),\n      activeMenfes: menfesService.getActiveSessionsCount(),\n      activeBots: multiBotService.getStats().activeBots,\n    };\n  }\n}\n\n// Export singleton instance\nmodule.exports = new ServicesManager();\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\src\\services\\sessionManager.js","messages":[{"ruleId":"import-x/no-import-module-exports","severity":2,"message":"Cannot use import declarations in modules that export using CommonJS (module.exports = 'foo' or exports.bar = 'hi')","line":1,"column":1,"nodeType":"ImportDeclaration","messageId":"notAllowed","endLine":1,"endColumn":25},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":3,"column":16,"nodeType":"Identifier","messageId":"undef","endLine":3,"endColumn":23},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":4,"column":12,"nodeType":"Identifier","messageId":"undef","endLine":4,"endColumn":19},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":5,"column":16,"nodeType":"Identifier","messageId":"undef","endLine":5,"endColumn":23},{"ruleId":"no-undef","severity":2,"message":"'__dirname' is not defined.","line":13,"column":55,"nodeType":"Identifier","messageId":"undef","endLine":13,"endColumn":64},{"ruleId":"no-undef","severity":2,"message":"'__dirname' is not defined.","line":14,"column":53,"nodeType":"Identifier","messageId":"undef","endLine":14,"endColumn":62},{"ruleId":"no-restricted-syntax","severity":2,"message":"iterators/generators require regenerator-runtime, which is too heavyweight for this guide to allow them. Separately, loops should be avoided in favor of array iterations.","line":62,"column":7,"nodeType":"ForOfStatement","messageId":"restrictedSyntax","endLine":77,"endColumn":8},{"ruleId":"no-await-in-loop","severity":2,"message":"Unexpected `await` inside a loop.","line":65,"column":31,"nodeType":"AwaitExpression","messageId":"unexpectedAwait","endLine":65,"endColumn":72},{"ruleId":"no-await-in-loop","severity":2,"message":"Unexpected `await` inside a loop.","line":72,"column":13,"nodeType":"AwaitExpression","messageId":"unexpectedAwait","endLine":72,"endColumn":52},{"ruleId":"no-plusplus","severity":2,"message":"Unary operator '++' used.","line":256,"column":5,"nodeType":"UpdateExpression","messageId":"unexpectedUnaryOp","endLine":256,"endColumn":34},{"ruleId":"no-restricted-syntax","severity":2,"message":"iterators/generators require regenerator-runtime, which is too heavyweight for this guide to allow them. Separately, loops should be avoided in favor of array iterations.","line":361,"column":7,"nodeType":"ForOfStatement","messageId":"restrictedSyntax","endLine":363,"endColumn":8},{"ruleId":"no-restricted-syntax","severity":2,"message":"iterators/generators require regenerator-runtime, which is too heavyweight for this guide to allow them. Separately, loops should be avoided in favor of array iterations.","line":375,"column":5,"nodeType":"ForOfStatement","messageId":"restrictedSyntax","endLine":380,"endColumn":6},{"ruleId":"no-restricted-syntax","severity":2,"message":"iterators/generators require regenerator-runtime, which is too heavyweight for this guide to allow them. Separately, loops should be avoided in favor of array iterations.","line":408,"column":5,"nodeType":"ForOfStatement","messageId":"restrictedSyntax","endLine":413,"endColumn":6},{"ruleId":"no-await-in-loop","severity":2,"message":"Unexpected `await` inside a loop.","line":410,"column":9,"nodeType":"AwaitExpression","messageId":"unexpectedAwait","endLine":410,"endColumn":45},{"ruleId":"no-plusplus","severity":2,"message":"Unary operator '++' used.","line":411,"column":9,"nodeType":"UpdateExpression","messageId":"unexpectedUnaryOp","endLine":411,"endColumn":18},{"ruleId":"no-restricted-syntax","severity":2,"message":"iterators/generators require regenerator-runtime, which is too heavyweight for this guide to allow them. Separately, loops should be avoided in favor of array iterations.","line":446,"column":7,"nodeType":"ForOfStatement","messageId":"restrictedSyntax","endLine":449,"endColumn":8},{"ruleId":"no-await-in-loop","severity":2,"message":"Unexpected `await` inside a loop.","line":448,"column":9,"nodeType":"AwaitExpression","messageId":"unexpectedAwait","endLine":448,"endColumn":46},{"ruleId":"no-restricted-syntax","severity":2,"message":"iterators/generators require regenerator-runtime, which is too heavyweight for this guide to allow them. Separately, loops should be avoided in favor of array iterations.","line":478,"column":7,"nodeType":"ForOfStatement","messageId":"restrictedSyntax","endLine":485,"endColumn":8},{"ruleId":"no-await-in-loop","severity":2,"message":"Unexpected `await` inside a loop.","line":482,"column":11,"nodeType":"AwaitExpression","messageId":"unexpectedAwait","endLine":482,"endColumn":48},{"ruleId":"no-plusplus","severity":2,"message":"Unary operator '++' used.","line":483,"column":11,"nodeType":"UpdateExpression","messageId":"unexpectedUnaryOp","endLine":483,"endColumn":21},{"ruleId":"class-methods-use-this","severity":2,"message":"Expected 'this' to be used by class method 'isSessionValid'.","line":528,"column":3,"nodeType":"FunctionExpression","messageId":"missingThis","endLine":528,"endColumn":17},{"ruleId":"no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":555,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":555,"endColumn":19},{"ruleId":"no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":567,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":567,"endColumn":19},{"ruleId":"no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":592,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":592,"endColumn":19},{"ruleId":"no-restricted-syntax","severity":2,"message":"iterators/generators require regenerator-runtime, which is too heavyweight for this guide to allow them. Separately, loops should be avoided in favor of array iterations.","line":627,"column":5,"nodeType":"ForOfStatement","messageId":"restrictedSyntax","endLine":630,"endColumn":6},{"ruleId":"no-await-in-loop","severity":2,"message":"Unexpected `await` inside a loop.","line":628,"column":7,"nodeType":"AwaitExpression","messageId":"unexpectedAwait","endLine":628,"endColumn":44},{"ruleId":"no-plusplus","severity":2,"message":"Unary operator '++' used.","line":629,"column":7,"nodeType":"UpdateExpression","messageId":"unexpectedUnaryOp","endLine":629,"endColumn":21},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":655,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":655,"endColumn":7}],"suppressedMessages":[],"errorCount":25,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import path from 'path';\n\nconst crypto = require('crypto');\nconst fs = require('fs').promises;\nconst logger = require('../utils/logger');\n\n/**\n * Ultra-Smart Session Manager\n * Multi-device session management with persistence and recovery\n */\nclass UltraSmartSessionManager {\n  constructor(options = {}) {\n    this.sessionDir = options.sessionDir || path.join(__dirname, '../../sessions');\n    this.backupDir = options.backupDir || path.join(__dirname, '../../backups');\n    this.maxDevices = options.maxDevices || 5;\n    this.sessionTimeout = options.sessionTimeout || 30 * 24 * 60 * 60 * 1000; // 30 days\n    this.backupInterval = options.backupInterval || 60 * 60 * 1000; // 1 hour\n\n    // Session storage\n    this.activeSessions = new Map();\n    this.deviceSessions = new Map();\n    this.sessionHistory = new Map();\n\n    // Recovery data\n    this.recoveryPoints = new Map();\n\n    // Initialize directories\n    this.initializeDirectories();\n\n    // Start backup timer\n    this.startBackupTimer();\n\n    logger.info('Ultra-Smart Session Manager initialized', {\n      sessionDir: this.sessionDir,\n      maxDevices: this.maxDevices,\n      sessionTimeout: this.sessionTimeout,\n    });\n  }\n\n  /**\n   * Initialize session directories\n   */\n  async initializeDirectories() {\n    try {\n      await fs.mkdir(this.sessionDir, { recursive: true });\n      await fs.mkdir(this.backupDir, { recursive: true });\n      await this.loadExistingSessions();\n      logger.info('Session directories initialized');\n    } catch (error) {\n      logger.error('Failed to initialize session directories', { error: error.message });\n    }\n  }\n\n  /**\n   * Load existing sessions from disk\n   */\n  async loadExistingSessions() {\n    try {\n      const files = await fs.readdir(this.sessionDir);\n      const sessionFiles = files.filter(file => file.endsWith('.session'));\n\n      for (const file of sessionFiles) {\n        try {\n          const sessionId = file.replace('.session', '');\n          const sessionData = await this.loadSessionFromFile(sessionId);\n\n          if (sessionData && this.isSessionValid(sessionData)) {\n            this.activeSessions.set(sessionId, sessionData);\n            this.indexDeviceSession(sessionData);\n          } else {\n            // Clean up invalid session\n            await this.deleteSessionFile(sessionId);\n          }\n        } catch (error) {\n          logger.warn('Failed to load session file', { file, error: error.message });\n        }\n      }\n\n      logger.info('Existing sessions loaded', { count: this.activeSessions.size });\n    } catch (error) {\n      logger.error('Failed to load existing sessions', { error: error.message });\n    }\n  }\n\n  /**\n   * Create new session\n   */\n  async createSession(sessionData, deviceInfo = {}) {\n    const sessionId = crypto.randomUUID();\n    const now = Date.now();\n\n    const session = {\n      id: sessionId,\n      created: now,\n      lastActivity: now,\n      expires: now + this.sessionTimeout,\n      data: sessionData,\n      device: {\n        id: deviceInfo.id || crypto.randomBytes(8).toString('hex'),\n        type: deviceInfo.type || 'unknown',\n        os: deviceInfo.os || 'unknown',\n        browser: deviceInfo.browser || 'unknown',\n        ip: deviceInfo.ip || 'unknown',\n        userAgent: deviceInfo.userAgent || 'unknown',\n        ...deviceInfo,\n      },\n      metadata: {\n        version: '1.0',\n        createdBy: 'UltraSmartSessionManager',\n        tags: deviceInfo.tags || [],\n      },\n      stats: {\n        connections: 1,\n        reconnections: 0,\n        dataTransferred: 0,\n        lastBackup: null,\n      },\n    };\n\n    // Check device limit\n    const deviceSessions = this.getDeviceSessions(session.device.id);\n    if (deviceSessions.length >= this.maxDevices) {\n      // Remove oldest session for this device\n      const oldestSession = deviceSessions.sort((a, b) => a.created - b.created)[0];\n      await this.destroySession(oldestSession.id);\n    }\n\n    // Save session\n    this.activeSessions.set(sessionId, session);\n    this.indexDeviceSession(session);\n\n    // Persist to disk\n    await this.saveSessionToFile(session);\n\n    // Create recovery point\n    await this.createRecoveryPoint(session);\n\n    logger.info('Session created', {\n      sessionId,\n      deviceId: session.device.id,\n      deviceType: session.device.type,\n    });\n\n    return session;\n  }\n\n  /**\n   * Get session by ID\n   */\n  async getSession(sessionId) {\n    const session = this.activeSessions.get(sessionId);\n\n    if (!session) {\n      return null;\n    }\n\n    // Check if session is expired\n    if (!this.isSessionValid(session)) {\n      await this.destroySession(sessionId);\n      return null;\n    }\n\n    // Update last activity\n    session.lastActivity = Date.now();\n    await this.saveSessionToFile(session);\n\n    return session;\n  }\n\n  /**\n   * Update session data\n   */\n  async updateSession(sessionId, updates) {\n    const session = await this.getSession(sessionId);\n\n    if (!session) {\n      throw new Error(`Session ${sessionId} not found`);\n    }\n\n    // Update session data\n    Object.assign(session.data, updates);\n    session.lastActivity = Date.now();\n\n    // Update stats\n    if (updates.dataTransferred) {\n      session.stats.dataTransferred += updates.dataTransferred;\n    }\n\n    // Save updated session\n    await this.saveSessionToFile(session);\n\n    logger.debug('Session updated', { sessionId, updates: Object.keys(updates) });\n\n    return session;\n  }\n\n  /**\n   * Destroy session\n   */\n  async destroySession(sessionId) {\n    const session = this.activeSessions.get(sessionId);\n\n    if (!session) {\n      return false;\n    }\n\n    // Remove from memory\n    this.activeSessions.delete(sessionId);\n    this.unindexDeviceSession(session);\n\n    // Remove from disk\n    await this.deleteSessionFile(sessionId);\n\n    // Add to history\n    this.sessionHistory.set(sessionId, {\n      ...session,\n      destroyed: Date.now(),\n      reason: 'manual',\n    });\n\n    logger.info('Session destroyed', {\n      sessionId,\n      deviceId: session.device.id,\n      duration: Date.now() - session.created,\n    });\n\n    return true;\n  }\n\n  /**\n   * Get all sessions for a device\n   */\n  getDeviceSessions(deviceId) {\n    return Array.from(this.deviceSessions.get(deviceId) || []);\n  }\n\n  /**\n   * Transfer session to another device\n   */\n  async transferSession(sessionId, newDeviceInfo) {\n    const session = await this.getSession(sessionId);\n\n    if (!session) {\n      throw new Error(`Session ${sessionId} not found`);\n    }\n\n    // Check device limit for new device\n    const newDeviceSessions = this.getDeviceSessions(newDeviceInfo.id);\n    if (newDeviceSessions.length >= this.maxDevices) {\n      throw new Error(`Device ${newDeviceInfo.id} has reached maximum session limit`);\n    }\n\n    // Update device info\n    const oldDeviceId = session.device.id;\n    session.device = { ...session.device, ...newDeviceInfo };\n    session.stats.reconnections++;\n\n    // Re-index session\n    this.unindexDeviceSession(session);\n    this.indexDeviceSession(session);\n\n    // Save updated session\n    await this.saveSessionToFile(session);\n\n    logger.info('Session transferred', {\n      sessionId,\n      fromDevice: oldDeviceId,\n      toDevice: newDeviceInfo.id,\n    });\n\n    return session;\n  }\n\n  /**\n   * Clone session for multi-device support\n   */\n  async cloneSession(sessionId, newDeviceInfo) {\n    const originalSession = await this.getSession(sessionId);\n\n    if (!originalSession) {\n      throw new Error(`Session ${sessionId} not found`);\n    }\n\n    // Check device limit\n    const deviceSessions = this.getDeviceSessions(newDeviceInfo.id);\n    if (deviceSessions.length >= this.maxDevices) {\n      throw new Error(`Device ${newDeviceInfo.id} has reached maximum session limit`);\n    }\n\n    // Create cloned session\n    const clonedSession = {\n      ...originalSession,\n      id: crypto.randomUUID(),\n      created: Date.now(),\n      device: { ...originalSession.device, ...newDeviceInfo },\n      stats: { ...originalSession.stats, connections: 1, reconnections: 0 },\n    };\n\n    // Save cloned session\n    this.activeSessions.set(clonedSession.id, clonedSession);\n    this.indexDeviceSession(clonedSession);\n    await this.saveSessionToFile(clonedSession);\n\n    logger.info('Session cloned', {\n      originalSessionId: sessionId,\n      clonedSessionId: clonedSession.id,\n      deviceId: newDeviceInfo.id,\n    });\n\n    return clonedSession;\n  }\n\n  /**\n   * Recover session from backup\n   */\n  async recoverSession(sessionId) {\n    try {\n      // Try to load from backup\n      const backupData = await this.loadBackup(sessionId);\n\n      if (backupData && this.isSessionValid(backupData)) {\n        // Restore session\n        this.activeSessions.set(sessionId, backupData);\n        this.indexDeviceSession(backupData);\n        await this.saveSessionToFile(backupData);\n\n        logger.info('Session recovered from backup', { sessionId });\n\n        return backupData;\n      }\n    } catch (error) {\n      logger.error('Failed to recover session', { sessionId, error: error.message });\n    }\n\n    return null;\n  }\n\n  /**\n   * Create recovery point\n   */\n  async createRecoveryPoint(session) {\n    const recoveryId = `${session.id}_${Date.now()}`;\n    const recoveryData = {\n      sessionId: session.id,\n      timestamp: Date.now(),\n      data: JSON.stringify(session),\n      checksum: crypto.createHash('sha256').update(JSON.stringify(session)).digest('hex'),\n    };\n\n    this.recoveryPoints.set(recoveryId, recoveryData);\n\n    // Save to backup file\n    await this.saveBackup(session.id, recoveryData);\n\n    // Clean old recovery points (keep last 10)\n    const sessionRecoveryPoints = Array.from(this.recoveryPoints.entries())\n      .filter(([key]) => key.startsWith(`${session.id}_`))\n      .sort((a, b) => b[1].timestamp - a[1].timestamp);\n\n    if (sessionRecoveryPoints.length > 10) {\n      for (const [key] of sessionRecoveryPoints.slice(10)) {\n        this.recoveryPoints.delete(key);\n      }\n    }\n  }\n\n  /**\n   * Get session statistics\n   */\n  getSessionStats() {\n    const now = Date.now();\n    const activeCount = this.activeSessions.size;\n\n    const deviceStats = {};\n    for (const [deviceId, sessions] of this.deviceSessions.entries()) {\n      deviceStats[deviceId] = {\n        count: sessions.size,\n        types: [...new Set(Array.from(sessions).map(s => s.device.type))],\n      };\n    }\n\n    const sessionDurations = Array.from(this.activeSessions.values()).map(\n      session => now - session.created\n    );\n\n    const averageDuration =\n      sessionDurations.length > 0\n        ? sessionDurations.reduce((a, b) => a + b, 0) / sessionDurations.length\n        : 0;\n\n    return {\n      activeSessions: activeCount,\n      totalDevices: this.deviceSessions.size,\n      deviceStats,\n      averageSessionDuration: Math.round(averageDuration / 1000 / 60), // minutes\n      recoveryPoints: this.recoveryPoints.size,\n      sessionHistory: this.sessionHistory.size,\n    };\n  }\n\n  /**\n   * Clean up expired sessions\n   */\n  async cleanupExpiredSessions() {\n    const now = Date.now();\n    let cleaned = 0;\n\n    for (const [sessionId, session] of this.activeSessions.entries()) {\n      if (session.expires < now) {\n        await this.destroySession(sessionId);\n        cleaned++;\n      }\n    }\n\n    if (cleaned > 0) {\n      logger.info('Cleaned up expired sessions', { cleaned });\n    }\n\n    return cleaned;\n  }\n\n  /**\n   * Backup all sessions\n   */\n  async backupAllSessions() {\n    try {\n      const backupData = {\n        timestamp: Date.now(),\n        sessions: Array.from(this.activeSessions.values()),\n        metadata: {\n          version: '1.0',\n          totalSessions: this.activeSessions.size,\n          checksum: '',\n        },\n      };\n\n      // Calculate checksum\n      const dataString = JSON.stringify(backupData.sessions);\n      backupData.metadata.checksum = crypto.createHash('sha256').update(dataString).digest('hex');\n\n      // Save backup\n      const backupFile = path.join(this.backupDir, `sessions_backup_${Date.now()}.json`);\n      await fs.writeFile(backupFile, JSON.stringify(backupData, null, 2));\n\n      // Update last backup time for all sessions\n      for (const session of this.activeSessions.values()) {\n        session.stats.lastBackup = Date.now();\n        await this.saveSessionToFile(session);\n      }\n\n      logger.info('Sessions backup completed', {\n        file: backupFile,\n        sessionsCount: backupData.sessions.length,\n      });\n    } catch (error) {\n      logger.error('Failed to backup sessions', { error: error.message });\n    }\n  }\n\n  /**\n   * Restore sessions from backup\n   */\n  async restoreFromBackup(backupFile) {\n    try {\n      const backupPath = path.join(this.backupDir, backupFile);\n      const backupData = JSON.parse(await fs.readFile(backupPath, 'utf8'));\n\n      // Validate backup\n      const dataString = JSON.stringify(backupData.sessions);\n      const checksum = crypto.createHash('sha256').update(dataString).digest('hex');\n\n      if (checksum !== backupData.metadata.checksum) {\n        throw new Error('Backup checksum validation failed');\n      }\n\n      // Restore sessions\n      let restored = 0;\n      for (const session of backupData.sessions) {\n        if (this.isSessionValid(session)) {\n          this.activeSessions.set(session.id, session);\n          this.indexDeviceSession(session);\n          await this.saveSessionToFile(session);\n          restored++;\n        }\n      }\n\n      logger.info('Sessions restored from backup', {\n        file: backupFile,\n        restored,\n        total: backupData.sessions.length,\n      });\n\n      return restored;\n    } catch (error) {\n      logger.error('Failed to restore from backup', { backupFile, error: error.message });\n      throw error;\n    }\n  }\n\n  /**\n   * Index session by device\n   */\n  indexDeviceSession(session) {\n    const deviceId = session.device.id;\n    if (!this.deviceSessions.has(deviceId)) {\n      this.deviceSessions.set(deviceId, new Set());\n    }\n    this.deviceSessions.get(deviceId).add(session);\n  }\n\n  /**\n   * Remove session from device index\n   */\n  unindexDeviceSession(session) {\n    const deviceId = session.device.id;\n    const deviceSessions = this.deviceSessions.get(deviceId);\n    if (deviceSessions) {\n      deviceSessions.delete(session);\n      if (deviceSessions.size === 0) {\n        this.deviceSessions.delete(deviceId);\n      }\n    }\n  }\n\n  /**\n   * Check if session is valid\n   */\n  isSessionValid(session) {\n    return session.expires > Date.now();\n  }\n\n  /**\n   * Save session to file\n   */\n  async saveSessionToFile(session) {\n    try {\n      const filePath = path.join(this.sessionDir, `${session.id}.session`);\n      await fs.writeFile(filePath, JSON.stringify(session, null, 2));\n    } catch (error) {\n      logger.error('Failed to save session to file', {\n        sessionId: session.id,\n        error: error.message,\n      });\n    }\n  }\n\n  /**\n   * Load session from file\n   */\n  async loadSessionFromFile(sessionId) {\n    try {\n      const filePath = path.join(this.sessionDir, `${sessionId}.session`);\n      const data = await fs.readFile(filePath, 'utf8');\n      return JSON.parse(data);\n    } catch (error) {\n      return null;\n    }\n  }\n\n  /**\n   * Delete session file\n   */\n  async deleteSessionFile(sessionId) {\n    try {\n      const filePath = path.join(this.sessionDir, `${sessionId}.session`);\n      await fs.unlink(filePath);\n    } catch (error) {\n      // File might not exist, ignore error\n    }\n  }\n\n  /**\n   * Save backup\n   */\n  async saveBackup(sessionId, backupData) {\n    try {\n      const backupFile = path.join(this.backupDir, `${sessionId}_backup.json`);\n      await fs.writeFile(backupFile, JSON.stringify(backupData, null, 2));\n    } catch (error) {\n      logger.error('Failed to save backup', { sessionId, error: error.message });\n    }\n  }\n\n  /**\n   * Load backup\n   */\n  async loadBackup(sessionId) {\n    try {\n      const backupFile = path.join(this.backupDir, `${sessionId}_backup.json`);\n      const data = await fs.readFile(backupFile, 'utf8');\n      return JSON.parse(data);\n    } catch (error) {\n      return null;\n    }\n  }\n\n  /**\n   * Start backup timer\n   */\n  startBackupTimer() {\n    setInterval(() => {\n      this.backupAllSessions();\n    }, this.backupInterval);\n  }\n\n  /**\n   * Get all active sessions\n   */\n  getActiveSessions() {\n    return Array.from(this.activeSessions.values());\n  }\n\n  /**\n   * Get session by device ID\n   */\n  getSessionsByDevice(deviceId) {\n    return this.getDeviceSessions(deviceId);\n  }\n\n  /**\n   * Force disconnect device\n   */\n  async disconnectDevice(deviceId) {\n    const deviceSessions = this.getDeviceSessions(deviceId);\n    let disconnected = 0;\n\n    for (const session of deviceSessions) {\n      await this.destroySession(session.id);\n      disconnected++;\n    }\n\n    logger.info('Device disconnected', { deviceId, sessionsDisconnected: disconnected });\n\n    return disconnected;\n  }\n\n  /**\n   * Shutdown and cleanup\n   */\n  async shutdown() {\n    logger.info('Shutting down Ultra-Smart Session Manager');\n\n    // Save all sessions before shutdown\n    await this.backupAllSessions();\n\n    // Clear all data\n    this.activeSessions.clear();\n    this.deviceSessions.clear();\n    this.recoveryPoints.clear();\n\n    logger.info('Ultra-Smart Session Manager shutdown complete');\n  }\n}\n\nmodule.exports = UltraSmartSessionManager;\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\src\\services\\settingsService.js","messages":[{"ruleId":"no-restricted-syntax","severity":2,"message":"iterators/generators require regenerator-runtime, which is too heavyweight for this guide to allow them. Separately, loops should be avoided in favor of array iterations.","line":150,"column":5,"nodeType":"ForOfStatement","messageId":"restrictedSyntax","endLine":155,"endColumn":6},{"ruleId":"no-unused-vars","severity":1,"message":"'key' is assigned a value but never used.","line":150,"column":17,"nodeType":"Identifier","messageId":"unusedVar","endLine":150,"endColumn":20,"suggestions":[{"messageId":"removeVar","data":{"varName":"key"},"fix":{"range":[4089,4092],"text":""},"desc":"Remove unused variable 'key'."}]},{"ruleId":"no-restricted-syntax","severity":2,"message":"iterators/generators require regenerator-runtime, which is too heavyweight for this guide to allow them. Separately, loops should be avoided in favor of array iterations.","line":161,"column":5,"nodeType":"ForOfStatement","messageId":"restrictedSyntax","endLine":165,"endColumn":6},{"ruleId":"no-unused-vars","severity":1,"message":"'key' is assigned a value but never used.","line":161,"column":17,"nodeType":"Identifier","messageId":"unusedVar","endLine":161,"endColumn":20,"suggestions":[{"messageId":"removeVar","data":{"varName":"key"},"fix":{"range":[4409,4412],"text":""},"desc":"Remove unused variable 'key'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'updatedBy' is defined but never used. Allowed unused args must match /^_/u.","line":174,"column":58,"nodeType":"Identifier","messageId":"unusedVar","endLine":174,"endColumn":67,"suggestions":[{"messageId":"removeVar","data":{"varName":"updatedBy"},"fix":{"range":[4775,4786],"text":""},"desc":"Remove unused variable 'updatedBy'."}]},{"ruleId":"no-restricted-globals","severity":2,"message":"Unexpected use of 'isNaN'. Use Number.isNaN instead https://github.com/airbnb/javascript#standard-library--isnan","line":210,"column":53,"nodeType":"Identifier","messageId":"customMessage","endLine":210,"endColumn":58},{"ruleId":"no-unused-vars","severity":1,"message":"'updatedBy' is defined but never used. Allowed unused args must match /^_/u.","line":253,"column":43,"nodeType":"Identifier","messageId":"unusedVar","endLine":253,"endColumn":52,"suggestions":[{"messageId":"removeVar","data":{"varName":"updatedBy"},"fix":{"range":[6915,6926],"text":""},"desc":"Remove unused variable 'updatedBy'."}]},{"ruleId":"no-restricted-syntax","severity":2,"message":"iterators/generators require regenerator-runtime, which is too heavyweight for this guide to allow them. Separately, loops should be avoided in favor of array iterations.","line":261,"column":5,"nodeType":"ForOfStatement","messageId":"restrictedSyntax","endLine":263,"endColumn":6},{"ruleId":"default-param-last","severity":2,"message":"Default parameters should be last.","line":284,"column":34,"nodeType":"AssignmentPattern","messageId":"shouldBeLast","endLine":284,"endColumn":49},{"ruleId":"no-restricted-syntax","severity":2,"message":"iterators/generators require regenerator-runtime, which is too heavyweight for this guide to allow them. Separately, loops should be avoided in favor of array iterations.","line":300,"column":5,"nodeType":"ForOfStatement","messageId":"restrictedSyntax","endLine":320,"endColumn":6},{"ruleId":"no-await-in-loop","severity":2,"message":"Unexpected `await` inside a loop.","line":303,"column":28,"nodeType":"AwaitExpression","messageId":"unexpectedAwait","endLine":303,"endColumn":95},{"ruleId":"no-await-in-loop","severity":2,"message":"Unexpected `await` inside a loop.","line":306,"column":11,"nodeType":"AwaitExpression","messageId":"unexpectedAwait","endLine":312,"endColumn":12},{"ruleId":"no-restricted-syntax","severity":2,"message":"iterators/generators require regenerator-runtime, which is too heavyweight for this guide to allow them. Separately, loops should be avoided in favor of array iterations.","line":327,"column":5,"nodeType":"ForOfStatement","messageId":"restrictedSyntax","endLine":329,"endColumn":6},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":339,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":339,"endColumn":7}],"suppressedMessages":[],"errorCount":10,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Mock Settings Service for testing\n// This will be replaced with actual database implementation in Phase 7.2\n\nclass SettingsService {\n  constructor() {\n    this.settings = new Map();\n    this.initializeDefaultSettings();\n  }\n\n  initializeDefaultSettings() {\n    const defaultSettings = {\n      // General settings\n      'general.botName': {\n        category: 'general',\n        key: 'botName',\n        value: 'WhatsDeX',\n        valueType: 'string',\n        description: 'Bot display name',\n        isEncrypted: false,\n      },\n      'general.botDescription': {\n        category: 'general',\n        key: 'botDescription',\n        value: 'Advanced WhatsApp Bot with AI Features',\n        valueType: 'string',\n        description: 'Bot description',\n        isEncrypted: false,\n      },\n      'general.ownerName': {\n        category: 'general',\n        key: 'ownerName',\n        value: 'CodeDeX',\n        valueType: 'string',\n        description: 'Bot owner name',\n        isEncrypted: false,\n      },\n      'general.timezone': {\n        category: 'general',\n        key: 'timezone',\n        value: 'Africa/Accra',\n        valueType: 'string',\n        description: 'System timezone',\n        isEncrypted: false,\n      },\n\n      // Security settings\n      'security.jwtSecret': {\n        category: 'security',\n        key: 'jwtSecret',\n        value: 'your-jwt-secret-key',\n        valueType: 'string',\n        description: 'JWT signing secret',\n        isEncrypted: true,\n      },\n      'security.bcryptRounds': {\n        category: 'security',\n        key: 'bcryptRounds',\n        value: 12,\n        valueType: 'number',\n        description: 'BCrypt hashing rounds',\n        isEncrypted: false,\n      },\n      'security.maxLoginAttempts': {\n        category: 'security',\n        key: 'maxLoginAttempts',\n        value: 5,\n        valueType: 'number',\n        description: 'Maximum login attempts before lockout',\n        isEncrypted: false,\n      },\n\n      // API settings\n      'api.openaiApiKey': {\n        category: 'api',\n        key: 'openaiApiKey',\n        value: 'sk-your-openai-key',\n        valueType: 'string',\n        description: 'OpenAI API key',\n        isEncrypted: true,\n      },\n      'api.stripeSecretKey': {\n        category: 'api',\n        key: 'stripeSecretKey',\n        value: 'sk_test_your-stripe-key',\n        valueType: 'string',\n        description: 'Stripe secret key',\n        isEncrypted: true,\n      },\n\n      // Database settings\n      'database.host': {\n        category: 'database',\n        key: 'host',\n        value: 'localhost',\n        valueType: 'string',\n        description: 'Database host',\n        isEncrypted: false,\n      },\n      'database.port': {\n        category: 'database',\n        key: 'port',\n        value: 5432,\n        valueType: 'number',\n        description: 'Database port',\n        isEncrypted: false,\n      },\n      'database.database': {\n        category: 'database',\n        key: 'database',\n        value: 'whatsdex',\n        valueType: 'string',\n        description: 'Database name',\n        isEncrypted: false,\n      },\n\n      // Moderation settings\n      'moderation.contentModerationEnabled': {\n        category: 'moderation',\n        key: 'contentModerationEnabled',\n        value: true,\n        valueType: 'boolean',\n        description: 'Enable content moderation',\n        isEncrypted: false,\n      },\n      'moderation.autoModeration': {\n        category: 'moderation',\n        key: 'autoModeration',\n        value: true,\n        valueType: 'boolean',\n        description: 'Enable automatic moderation',\n        isEncrypted: false,\n      },\n      'moderation.moderationThreshold': {\n        category: 'moderation',\n        key: 'moderationThreshold',\n        value: 0.8,\n        valueType: 'number',\n        description: 'Moderation confidence threshold',\n        isEncrypted: false,\n      },\n    };\n\n    Object.entries(defaultSettings).forEach(([key, setting]) => {\n      this.settings.set(key, { ...setting, updatedAt: new Date() });\n    });\n  }\n\n  async getAllSettings() {\n    const settings = {};\n    for (const [key, setting] of this.settings.entries()) {\n      if (!settings[setting.category]) {\n        settings[setting.category] = {};\n      }\n      settings[setting.category][setting.key] = setting.value;\n    }\n    return settings;\n  }\n\n  async getSettingsByCategory(category) {\n    const categorySettings = [];\n    for (const [key, setting] of this.settings.entries()) {\n      if (setting.category === category) {\n        categorySettings.push(setting);\n      }\n    }\n    return categorySettings;\n  }\n\n  async getSetting(category, key) {\n    const settingKey = `${category}.${key}`;\n    return this.settings.get(settingKey) || null;\n  }\n\n  async updateSetting(category, key, value, description, updatedBy) {\n    const settingKey = `${category}.${key}`;\n    const existingSetting = this.settings.get(settingKey);\n\n    if (!existingSetting) {\n      throw new Error(`Setting ${settingKey} not found`);\n    }\n\n    const updatedSetting = {\n      ...existingSetting,\n      value,\n      description: description || existingSetting.description,\n      updatedAt: new Date(),\n    };\n\n    this.settings.set(settingKey, updatedSetting);\n    return updatedSetting;\n  }\n\n  async validateSetting(category, key, value) {\n    const settingKey = `${category}.${key}`;\n    const setting = this.settings.get(settingKey);\n\n    if (!setting) {\n      return { valid: false, message: `Setting ${settingKey} not found` };\n    }\n\n    // Type validation\n    const expectedType = setting.valueType;\n    let isValidType = false;\n\n    switch (expectedType) {\n      case 'string':\n        isValidType = typeof value === 'string';\n        break;\n      case 'number':\n        isValidType = typeof value === 'number' && !isNaN(value);\n        break;\n      case 'boolean':\n        isValidType = typeof value === 'boolean';\n        break;\n      case 'json':\n        try {\n          JSON.parse(value);\n          isValidType = true;\n        } catch {\n          isValidType = false;\n        }\n        break;\n      default:\n        isValidType = true;\n    }\n\n    if (!isValidType) {\n      return { valid: false, message: `Value must be of type ${expectedType}` };\n    }\n\n    // Specific validations\n    if (category === 'database' && key === 'port') {\n      if (value < 1 || value > 65535) {\n        return { valid: false, message: 'Port must be between 1 and 65535' };\n      }\n    }\n\n    if (category === 'security' && key === 'bcryptRounds') {\n      if (value < 8 || value > 20) {\n        return { valid: false, message: 'BCrypt rounds must be between 8 and 20' };\n      }\n    }\n\n    if (category === 'moderation' && key === 'moderationThreshold') {\n      if (value < 0 || value > 1) {\n        return { valid: false, message: 'Threshold must be between 0 and 1' };\n      }\n    }\n\n    return { valid: true, message: 'Valid' };\n  }\n\n  async resetCategoryToDefaults(category, updatedBy) {\n    // This would reset all settings in a category to their defaults\n    // For now, return the current settings\n    return await this.getSettingsByCategory(category);\n  }\n\n  async exportSettings(format = 'json') {\n    const allSettings = {};\n    for (const [key, setting] of this.settings.entries()) {\n      allSettings[key] = setting;\n    }\n\n    if (format === 'json') {\n      return JSON.stringify(allSettings, null, 2);\n    }\n\n    // CSV format\n    const headers = ['Category', 'Key', 'Value', 'Type', 'Description', 'Encrypted', 'Updated At'];\n    const rows = Array.from(this.settings.values()).map(setting => [\n      setting.category,\n      setting.key,\n      setting.value,\n      setting.valueType,\n      setting.description || '',\n      setting.isEncrypted,\n      setting.updatedAt.toISOString(),\n    ]);\n\n    return [headers, ...rows].map(row => row.map(field => `\"${field}\"`).join(',')).join('\\n');\n  }\n\n  async importSettings(settings, format = 'json', updatedBy) {\n    let parsedSettings;\n\n    if (format === 'json') {\n      if (typeof settings === 'string') {\n        parsedSettings = JSON.parse(settings);\n      } else {\n        parsedSettings = settings;\n      }\n    } else {\n      throw new Error('CSV import not implemented yet');\n    }\n\n    const imported = [];\n    const errors = [];\n\n    for (const [key, settingData] of Object.entries(parsedSettings)) {\n      try {\n        const [category, settingKey] = key.split('.');\n        const validation = await this.validateSetting(category, settingKey, settingData.value);\n\n        if (validation.valid) {\n          await this.updateSetting(\n            category,\n            settingKey,\n            settingData.value,\n            settingData.description,\n            updatedBy\n          );\n          imported.push({ category, key: settingKey, value: settingData.value });\n        } else {\n          errors.push({ key, error: validation.message });\n        }\n      } catch (error) {\n        errors.push({ key, error: error.message });\n      }\n    }\n\n    return { imported, errors };\n  }\n\n  async getCategories() {\n    const categories = new Set();\n    for (const setting of this.settings.values()) {\n      categories.add(setting.category);\n    }\n\n    return Array.from(categories).map(category => ({\n      name: category,\n      label: category.charAt(0).toUpperCase() + category.slice(1),\n      count: Array.from(this.settings.values()).filter(s => s.category === category).length,\n    }));\n  }\n}\n\nmodule.exports = new SettingsService();\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\src\\services\\stickerService.js","messages":[{"ruleId":"import-x/no-import-module-exports","severity":2,"message":"Cannot use import declarations in modules that export using CommonJS (module.exports = 'foo' or exports.bar = 'hi')","line":6,"column":1,"nodeType":"ImportDeclaration","messageId":"notAllowed","endLine":6,"endColumn":25},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":8,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":8,"endColumn":22},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":9,"column":12,"nodeType":"Identifier","messageId":"undef","endLine":9,"endColumn":19},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":10,"column":23,"nodeType":"Identifier","messageId":"undef","endLine":10,"endColumn":30},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":11,"column":17,"nodeType":"Identifier","messageId":"undef","endLine":11,"endColumn":24},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":15,"column":30,"nodeType":"Identifier","messageId":"undef","endLine":15,"endColumn":37},{"ruleId":"class-methods-use-this","severity":2,"message":"Expected 'this' to be used by class async method 'emojiMix'.","line":24,"column":3,"nodeType":"FunctionExpression","messageId":"missingThis","endLine":24,"endColumn":17},{"ruleId":"no-plusplus","severity":2,"message":"Unary operator '++' used.","line":42,"column":70,"nodeType":"UpdateExpression","messageId":"unexpectedUnaryOp","endLine":42,"endColumn":73},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":56,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":56,"endColumn":20,"suggestions":[{"fix":{"range":[1708,1752],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"class-methods-use-this","severity":2,"message":"Expected 'this' to be used by class async method 'createBratSticker'.","line":70,"column":3,"nodeType":"FunctionExpression","messageId":"missingThis","endLine":70,"endColumn":26},{"ruleId":"no-undef","severity":2,"message":"'Buffer' is not defined.","line":88,"column":17,"nodeType":"Identifier","messageId":"undef","endLine":88,"endColumn":23},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":92,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":92,"endColumn":20,"suggestions":[{"fix":{"range":[2672,2725],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-plusplus","severity":2,"message":"Unary operator '++' used.","line":121,"column":41,"nodeType":"UpdateExpression","messageId":"unexpectedUnaryOp","endLine":121,"endColumn":44},{"ruleId":"no-await-in-loop","severity":2,"message":"Unexpected `await` inside a loop.","line":125,"column":28,"nodeType":"AwaitExpression","messageId":"unexpectedAwait","endLine":128,"endColumn":12},{"ruleId":"no-await-in-loop","severity":2,"message":"Unexpected `await` inside a loop.","line":131,"column":11,"nodeType":"AwaitExpression","messageId":"unexpectedAwait","endLine":131,"endColumn":68},{"ruleId":"no-undef","severity":2,"message":"'Buffer' is not defined.","line":131,"column":41,"nodeType":"Identifier","messageId":"undef","endLine":131,"endColumn":47},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":134,"column":11,"nodeType":"MemberExpression","messageId":"unexpected","endLine":134,"endColumn":24,"suggestions":[{"fix":{"range":[3950,4001],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-continue","severity":2,"message":"Unexpected use of continue statement.","line":135,"column":11,"nodeType":"ContinueStatement","messageId":"unexpected","endLine":135,"endColumn":20},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":147,"column":27,"nodeType":"Identifier","messageId":"undef","endLine":147,"endColumn":34},{"ruleId":"no-unused-vars","severity":1,"message":"'index' is defined but never used. Allowed unused args must match /^_/u.","line":153,"column":40,"nodeType":"Identifier","messageId":"unusedVar","endLine":153,"endColumn":45,"suggestions":[{"messageId":"removeVar","data":{"varName":"index"},"fix":{"range":[4566,4573],"text":""},"desc":"Remove unused variable 'index'."}]},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":163,"column":9,"nodeType":"Identifier","messageId":"undef","endLine":163,"endColumn":16},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":222,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":222,"endColumn":20,"suggestions":[{"fix":{"range":[6407,6458],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"class-methods-use-this","severity":2,"message":"Expected 'this' to be used by class async method 'createSticker'.","line":232,"column":3,"nodeType":"FunctionExpression","messageId":"missingThis","endLine":232,"endColumn":22},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":248,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":248,"endColumn":20,"suggestions":[{"fix":{"range":[7105,7153],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"class-methods-use-this","severity":2,"message":"Expected 'this' to be used by class async method 'downloadMediaForSticker'.","line":257,"column":3,"nodeType":"FunctionExpression","messageId":"missingThis","endLine":257,"endColumn":32},{"ruleId":"no-undef","severity":2,"message":"'Buffer' is not defined.","line":264,"column":14,"nodeType":"Identifier","messageId":"undef","endLine":264,"endColumn":20},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":266,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":266,"endColumn":20,"suggestions":[{"fix":{"range":[7554,7615],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":277,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":277,"endColumn":19},{"ruleId":"class-methods-use-this","severity":2,"message":"Expected 'this' to be used by class async method 'checkRateLimit'.","line":288,"column":3,"nodeType":"FunctionExpression","messageId":"missingThis","endLine":288,"endColumn":23},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":335,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":335,"endColumn":20,"suggestions":[{"fix":{"range":[9389,9448],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-restricted-syntax","severity":2,"message":"iterators/generators require regenerator-runtime, which is too heavyweight for this guide to allow them. Separately, loops should be avoided in favor of array iterations.","line":351,"column":7,"nodeType":"ForOfStatement","messageId":"restrictedSyntax","endLine":358,"endColumn":8},{"ruleId":"no-await-in-loop","severity":2,"message":"Unexpected `await` inside a loop.","line":353,"column":23,"nodeType":"AwaitExpression","messageId":"unexpectedAwait","endLine":353,"endColumn":46},{"ruleId":"no-await-in-loop","severity":2,"message":"Unexpected `await` inside a loop.","line":356,"column":11,"nodeType":"AwaitExpression","messageId":"unexpectedAwait","endLine":356,"endColumn":52},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":360,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":360,"endColumn":20,"suggestions":[{"fix":{"range":[10040,10094],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":365,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":365,"endColumn":7}],"suppressedMessages":[],"errorCount":25,"fatalErrorCount":0,"warningCount":10,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Sticker Service - Advanced sticker creation features\n * Implements emojimix, brat, and other creative sticker features\n */\n\nimport path from 'path';\n\nconst axios = require('axios');\nconst fs = require('fs').promises;\nconst { writeExif } = require('../../lib/exif');\nconst context = require('../../context');\n\nclass StickerService {\n  constructor() {\n    this.tempDir = path.join(process.cwd(), 'database', 'temp');\n    this.rateLimits = new Map();\n  }\n\n  /**\n   * Emoji Mix implementation\n   * @param {string} emoji1 - First emoji\n   * @param {string} emoji2 - Second emoji\n   */\n  async emojiMix(emoji1, emoji2) {\n    try {\n      if (!emoji1 || !emoji2) {\n        throw new Error('Please provide two emojis to mix');\n      }\n\n      // Use Google's Emoji Kitchen API (Tenor)\n      const response = await axios.get(\n        `https://tenor.googleapis.com/v2/featured?key=LIVDSRZULELA&contentfilter=high&media_filter=png_transparent&component=proactive&collection=emoji_kitchen_v5&q=${encodeURIComponent(emoji1)}_${encodeURIComponent(emoji2)}`\n      );\n\n      if (!response.data.results || response.data.results.length === 0) {\n        throw new Error(`Mix Emoji ${emoji1}+${emoji2} Tidak Ditemukan!`);\n      }\n\n      const stickers = [];\n\n      // Get up to 3 mixed emoji results\n      for (let i = 0; i < Math.min(3, response.data.results.length); i++) {\n        const result = response.data.results[i];\n        stickers.push({\n          url: result.url,\n          name: `emojimix_${i + 1}.png`,\n        });\n      }\n\n      return {\n        success: true,\n        stickers,\n        message: `Berhasil membuat ${stickers.length} emoji mix untuk ${emoji1}+${emoji2}`,\n      };\n    } catch (error) {\n      console.error('Error in emoji mix:', error);\n\n      if (error.response?.status === 429) {\n        throw new Error('Rate limit exceeded. Please try again later.');\n      }\n\n      throw new Error('Failed to create emoji mix');\n    }\n  }\n\n  /**\n   * Brat sticker implementation\n   * @param {string} text - Text to create brat sticker\n   */\n  async createBratSticker(text) {\n    try {\n      if (!text || text.length === 0) {\n        throw new Error('Please provide text for brat sticker');\n      }\n\n      if (text.length > 50) {\n        throw new Error('Text too long. Maximum 50 characters.');\n      }\n\n      // Use brat API\n      const response = await axios.get(\n        `https://aqul-brat.hf.space/?text=${encodeURIComponent(text)}`,\n        { responseType: 'arraybuffer' }\n      );\n\n      return {\n        success: true,\n        buffer: Buffer.from(response.data),\n        message: `Berhasil membuat brat sticker: \"${text}\"`,\n      };\n    } catch (error) {\n      console.error('Error creating brat sticker:', error);\n\n      if (error.response?.status === 429) {\n        throw new Error('Rate limit exceeded. Please try again later.');\n      }\n\n      throw new Error('Failed to create brat sticker');\n    }\n  }\n\n  /**\n   * Brat video implementation\n   * @param {string} text - Text for brat video\n   */\n  async createBratVideo(text) {\n    try {\n      if (!text || text.length === 0) {\n        throw new Error('Please provide text for brat video');\n      }\n\n      const words = text.split(' ');\n      if (words.length > 10) {\n        throw new Error('Text too long. Maximum 10 words.');\n      }\n\n      const tempDir = await this.ensureTempDir();\n      const framePaths = [];\n\n      // Create frames for each word\n      for (let i = 0; i < words.length; i++) {\n        const currentText = words.slice(0, i + 1).join(' ');\n\n        try {\n          const response = await axios.get(\n            `https://aqul-brat.hf.space/?text=${encodeURIComponent(currentText)}`,\n            { responseType: 'arraybuffer' }\n          );\n\n          const framePath = path.join(tempDir, `brat_${Date.now()}_${i}.png`);\n          await fs.writeFile(framePath, Buffer.from(response.data));\n          framePaths.push(framePath);\n        } catch (error) {\n          console.error(`Error creating frame ${i}:`, error);\n          continue;\n        }\n      }\n\n      if (framePaths.length === 0) {\n        throw new Error('Failed to create brat video frames');\n      }\n\n      // Create video from frames using ffmpeg\n      const outputPath = path.join(tempDir, `brat_video_${Date.now()}.mp4`);\n\n      return new Promise((resolve, reject) => {\n        const { spawn } = require('child_process');\n\n        // Create file list for ffmpeg\n        const fileListPath = path.join(tempDir, `filelist_${Date.now()}.txt`);\n        let fileListContent = '';\n\n        framePaths.forEach((framePath, index) => {\n          fileListContent += `file '${framePath}'\\n`;\n          fileListContent += `duration 0.5\\n`;\n        });\n\n        // Add last frame for 3 seconds\n        fileListContent += `file '${framePaths[framePaths.length - 1]}'\\n`;\n        fileListContent += `duration 3\\n`;\n\n        // Write file list\n        require('fs').writeFileSync(fileListPath, fileListContent);\n\n        // Create video using ffmpeg\n        const ffmpeg = spawn('ffmpeg', [\n          '-y',\n          '-f',\n          'concat',\n          '-safe',\n          '0',\n          '-i',\n          fileListPath,\n          '-vf',\n          'fps=30',\n          '-c:v',\n          'libx264',\n          '-preset',\n          'veryfast',\n          '-pix_fmt',\n          'yuv420p',\n          '-t',\n          '00:00:10',\n          outputPath,\n        ]);\n\n        let stderr = '';\n        ffmpeg.stderr.on('data', data => {\n          stderr += data.toString();\n        });\n\n        ffmpeg.on('close', async code => {\n          try {\n            // Cleanup frame files and file list\n            await Promise.all([\n              ...framePaths.map(p => fs.unlink(p).catch(() => {})),\n              fs.unlink(fileListPath).catch(() => {}),\n            ]);\n\n            if (code === 0) {\n              const videoBuffer = await fs.readFile(outputPath);\n              await fs.unlink(outputPath).catch(() => {});\n\n              resolve({\n                success: true,\n                buffer: videoBuffer,\n                message: `Berhasil membuat brat video: \"${text}\"`,\n              });\n            } else {\n              reject(new Error(`FFmpeg error: ${stderr}`));\n            }\n          } catch (error) {\n            reject(error);\n          }\n        });\n\n        ffmpeg.on('error', error => {\n          reject(error);\n        });\n      });\n    } catch (error) {\n      console.error('Error creating brat video:', error);\n      throw new Error('Failed to create brat video');\n    }\n  }\n\n  /**\n   * Create sticker with custom text and author\n   * @param {Buffer} mediaBuffer - Media buffer\n   * @param {Object} options - Sticker options\n   */\n  async createSticker(mediaBuffer, options = {}) {\n    try {\n      const { packname = 'WhatsDeX Bot', author = 'CodeDeX', categories = [] } = options;\n\n      const stickerBuffer = await writeExif(mediaBuffer, {\n        packname,\n        author,\n        categories,\n      });\n\n      return {\n        success: true,\n        buffer: stickerBuffer,\n        message: 'Sticker berhasil dibuat',\n      };\n    } catch (error) {\n      console.error('Error creating sticker:', error);\n      throw new Error('Failed to create sticker');\n    }\n  }\n\n  /**\n   * Download and process media for sticker creation\n   * @param {string} url - Media URL\n   */\n  async downloadMediaForSticker(url) {\n    try {\n      const response = await axios.get(url, {\n        responseType: 'arraybuffer',\n        timeout: 30000,\n      });\n\n      return Buffer.from(response.data);\n    } catch (error) {\n      console.error('Error downloading media for sticker:', error);\n      throw new Error('Failed to download media');\n    }\n  }\n\n  /**\n   * Ensure temp directory exists\n   */\n  async ensureTempDir() {\n    try {\n      await fs.access(this.tempDir);\n    } catch (error) {\n      await fs.mkdir(this.tempDir, { recursive: true });\n    }\n    return this.tempDir;\n  }\n\n  /**\n   * Check rate limit for sticker operations (now uses database)\n   * @param {string} userId - User ID\n   * @param {string} operation - Operation type\n   */\n  async checkRateLimit(userId, operation) {\n    const key = `sticker_${operation}_${userId}`;\n    const now = Date.now();\n\n    const limits = {\n      emojimix: { cooldown: 10000, maxPerCooldown: 3 }, // 10 seconds, 3 operations\n      brat: { cooldown: 15000, maxPerCooldown: 2 }, // 15 seconds, 2 operations\n      bratvideo: { cooldown: 30000, maxPerCooldown: 1 }, // 30 seconds, 1 operation\n    };\n\n    const config = limits[operation] || { cooldown: 30000, maxPerCooldown: 1 };\n\n    try {\n      const existingLimit = await context.database.rateLimit.findUnique({\n        where: { key },\n      });\n\n      if (!existingLimit || now - existingLimit.lastUsed.getTime() > config.cooldown) {\n        await context.database.rateLimit.upsert({\n          where: { key },\n          update: {\n            count: 1,\n            lastUsed: new Date(),\n          },\n          create: {\n            key,\n            count: 1,\n            lastUsed: new Date(),\n          },\n        });\n        return true;\n      }\n\n      if (existingLimit.count >= config.maxPerCooldown) {\n        return false;\n      }\n\n      await context.database.rateLimit.update({\n        where: { key },\n        data: {\n          count: { increment: 1 },\n          lastUsed: new Date(),\n        },\n      });\n\n      return true;\n    } catch (error) {\n      console.error('Error checking sticker rate limit:', error);\n      return false; // Fail safe\n    }\n  }\n\n  /**\n   * Clean up old temp files\n   */\n  async cleanupTempFiles() {\n    try {\n      const tempDir = await this.ensureTempDir();\n      const files = await fs.readdir(tempDir);\n\n      const now = Date.now();\n      const maxAge = 24 * 60 * 60 * 1000; // 24 hours\n\n      for (const file of files) {\n        const filePath = path.join(tempDir, file);\n        const stats = await fs.stat(filePath);\n\n        if (now - stats.mtime.getTime() > maxAge) {\n          await fs.unlink(filePath).catch(() => {});\n        }\n      }\n    } catch (error) {\n      console.error('Error cleaning up temp files:', error);\n    }\n  }\n}\n\nmodule.exports = new StickerService();\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\src\\services\\stripe.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":16,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":23},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":2,"column":16,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":23},{"ruleId":"no-restricted-syntax","severity":2,"message":"iterators/generators require regenerator-runtime, which is too heavyweight for this guide to allow them. Separately, loops should be avoided in favor of array iterations.","line":98,"column":7,"nodeType":"ForOfStatement","messageId":"restrictedSyntax","endLine":151,"endColumn":8},{"ruleId":"no-await-in-loop","severity":2,"message":"Unexpected `await` inside a loop.","line":101,"column":26,"nodeType":"AwaitExpression","messageId":"unexpectedAwait","endLine":101,"endColumn":73},{"ruleId":"no-await-in-loop","severity":2,"message":"Unexpected `await` inside a loop.","line":107,"column":21,"nodeType":"AwaitExpression","messageId":"unexpectedAwait","endLine":114,"endColumn":13},{"ruleId":"no-await-in-loop","severity":2,"message":"Unexpected `await` inside a loop.","line":119,"column":24,"nodeType":"AwaitExpression","messageId":"unexpectedAwait","endLine":122,"endColumn":11},{"ruleId":"no-await-in-loop","severity":2,"message":"Unexpected `await` inside a loop.","line":133,"column":19,"nodeType":"AwaitExpression","messageId":"unexpectedAwait","endLine":144,"endColumn":13},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":333,"column":28,"nodeType":"Identifier","messageId":"undef","endLine":333,"endColumn":35},{"ruleId":"import-x/extensions","severity":2,"message":"Missing file extension for \"../context\"","line":333,"column":36,"nodeType":"Literal","messageId":"missing","endLine":333,"endColumn":48},{"ruleId":"import-x/no-unresolved","severity":2,"message":"Unable to resolve path to module '../context'.","line":333,"column":36,"nodeType":"Literal","messageId":"unresolved","endLine":333,"endColumn":48},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":565,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":565,"endColumn":7}],"suppressedMessages":[],"errorCount":11,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const Stripe = require('stripe');\nconst logger = require('../utils/logger');\n\nclass StripeService {\n  constructor() {\n    this.stripe = null;\n    this.webhookSecret = null;\n    this.isInitialized = false;\n\n    // Subscription plans configuration\n    this.plans = {\n      basic: {\n        id: 'basic_monthly',\n        name: 'Basic',\n        price: 499, // $4.99\n        currency: 'usd',\n        interval: 'month',\n        features: [\n          '100 AI requests per month',\n          'Basic image generation',\n          'Standard support',\n          'Community access',\n        ],\n      },\n      pro: {\n        id: 'pro_monthly',\n        name: 'Pro',\n        price: 999, // $9.99\n        currency: 'usd',\n        interval: 'month',\n        features: [\n          'Unlimited AI requests',\n          'Advanced image generation',\n          'Priority support',\n          'Custom commands',\n          'Analytics dashboard',\n          'API access',\n        ],\n      },\n      enterprise: {\n        id: 'enterprise_monthly',\n        name: 'Enterprise',\n        price: 2999, // $29.99\n        currency: 'usd',\n        interval: 'month',\n        features: [\n          'Everything in Pro',\n          'White-label solution',\n          'Dedicated support',\n          'Custom integrations',\n          'Advanced analytics',\n          'SLA guarantee',\n          'Custom training',\n        ],\n      },\n    };\n\n    logger.info('Stripe service initialized');\n  }\n\n  /**\n   * Initialize Stripe service\n   * @param {string} secretKey - Stripe secret key\n   * @param {string} webhookSecret - Stripe webhook secret\n   */\n  async initialize(secretKey, webhookSecret) {\n    try {\n      if (!secretKey) {\n        throw new Error('Stripe secret key is required');\n      }\n\n      this.stripe = new Stripe(secretKey, {\n        apiVersion: '2023-10-16',\n        timeout: 10000,\n        maxNetworkRetries: 3,\n      });\n\n      this.webhookSecret = webhookSecret;\n      this.isInitialized = true;\n\n      logger.info('Stripe service initialized successfully');\n\n      // Create or verify subscription products\n      await this.initializeProducts();\n    } catch (error) {\n      logger.error('Failed to initialize Stripe service', { error: error.message });\n      throw error;\n    }\n  }\n\n  /**\n   * Initialize Stripe products and prices\n   */\n  async initializeProducts() {\n    try {\n      logger.info('Initializing Stripe products and prices...');\n\n      for (const [planKey, planConfig] of Object.entries(this.plans)) {\n        // Check if product exists\n        let product;\n        const products = await this.stripe.products.list({ limit: 100 });\n\n        product = products.data.find(p => p.metadata.plan_key === planKey);\n\n        if (!product) {\n          // Create product\n          product = await this.stripe.products.create({\n            name: planConfig.name,\n            description: `${planConfig.name} subscription plan`,\n            metadata: {\n              plan_key: planKey,\n              features: JSON.stringify(planConfig.features),\n            },\n          });\n          logger.info(`Created Stripe product: ${product.name}`);\n        }\n\n        // Check if price exists\n        const prices = await this.stripe.prices.list({\n          product: product.id,\n          active: true,\n        });\n\n        let price = prices.data.find(\n          p =>\n            p.unit_amount === planConfig.price &&\n            p.currency === planConfig.currency &&\n            p.recurring?.interval === planConfig.interval\n        );\n\n        if (!price) {\n          // Create price\n          price = await this.stripe.prices.create({\n            product: product.id,\n            unit_amount: planConfig.price,\n            currency: planConfig.currency,\n            recurring: {\n              interval: planConfig.interval,\n              interval_count: 1,\n            },\n            metadata: {\n              plan_key: planKey,\n            },\n          });\n          logger.info(`Created Stripe price: ${price.id} for ${planConfig.name}`);\n        }\n\n        // Update plan with Stripe IDs\n        this.plans[planKey].productId = product.id;\n        this.plans[planKey].priceId = price.id;\n      }\n\n      logger.info('Stripe products and prices initialized successfully');\n    } catch (error) {\n      logger.error('Failed to initialize Stripe products', { error: error.message });\n      throw error;\n    }\n  }\n\n  /**\n   * Create a customer\n   * @param {Object} customerData - Customer data\n   * @returns {Promise<Object>} Stripe customer object\n   */\n  async createCustomer(customerData) {\n    try {\n      const customer = await this.stripe.customers.create({\n        email: customerData.email,\n        name: customerData.name,\n        phone: customerData.phone,\n        metadata: {\n          userId: customerData.userId,\n          source: 'whatsdex',\n        },\n      });\n\n      logger.info('Stripe customer created', {\n        customerId: customer.id,\n        userId: customerData.userId,\n      });\n\n      return customer;\n    } catch (error) {\n      logger.error('Failed to create Stripe customer', {\n        userId: customerData.userId,\n        error: error.message,\n      });\n      throw error;\n    }\n  }\n\n  /**\n   * Create a subscription\n   * @param {string} customerId - Stripe customer ID\n   * @param {string} planKey - Plan key (basic, pro, enterprise)\n   * @param {Object} options - Additional options\n   * @returns {Promise<Object>} Subscription object\n   */\n  async createSubscription(customerId, planKey, options = {}) {\n    try {\n      const plan = this.plans[planKey];\n      if (!plan) {\n        throw new Error(`Invalid plan key: ${planKey}`);\n      }\n\n      const subscriptionData = {\n        customer: customerId,\n        items: [\n          {\n            price: plan.priceId,\n          },\n        ],\n        metadata: {\n          planKey,\n          userId: options.userId,\n        },\n        payment_behavior: 'default_incomplete',\n        expand: ['latest_invoice.payment_intent'],\n      };\n\n      // Add trial period if specified\n      if (options.trialDays) {\n        subscriptionData.trial_period_days = options.trialDays;\n      }\n\n      // Add coupon if specified\n      if (options.couponId) {\n        subscriptionData.coupon = options.couponId;\n      }\n\n      const subscription = await this.stripe.subscriptions.create(subscriptionData);\n\n      logger.info('Stripe subscription created', {\n        subscriptionId: subscription.id,\n        customerId,\n        planKey,\n        status: subscription.status,\n      });\n\n      return subscription;\n    } catch (error) {\n      logger.error('Failed to create Stripe subscription', {\n        customerId,\n        planKey,\n        error: error.message,\n      });\n      throw error;\n    }\n  }\n\n  /**\n   * Cancel a subscription\n   * @param {string} subscriptionId - Stripe subscription ID\n   * @param {boolean} cancelAtPeriodEnd - Cancel at period end or immediately\n   * @returns {Promise<Object>} Updated subscription object\n   */\n  async cancelSubscription(subscriptionId, cancelAtPeriodEnd = true) {\n    try {\n      const subscription = await this.stripe.subscriptions.update(subscriptionId, {\n        cancel_at_period_end: cancelAtPeriodEnd,\n      });\n\n      logger.info('Stripe subscription cancelled', {\n        subscriptionId,\n        cancelAtPeriodEnd,\n        status: subscription.status,\n      });\n\n      return subscription;\n    } catch (error) {\n      logger.error('Failed to cancel Stripe subscription', {\n        subscriptionId,\n        error: error.message,\n      });\n      throw error;\n    }\n  }\n\n  /**\n   * Update subscription plan\n   * @param {string} subscriptionId - Stripe subscription ID\n   * @param {string} newPlanKey - New plan key\n   * @returns {Promise<Object>} Updated subscription object\n   */\n  async updateSubscriptionPlan(subscriptionId, newPlanKey) {\n    try {\n      const newPlan = this.plans[newPlanKey];\n      if (!newPlan) {\n        throw new Error(`Invalid plan key: ${newPlanKey}`);\n      }\n\n      const subscription = await this.stripe.subscriptions.retrieve(subscriptionId);\n      const subscriptionItem = subscription.items.data[0];\n\n      const updatedSubscription = await this.stripe.subscriptions.update(subscriptionId, {\n        items: [\n          {\n            id: subscriptionItem.id,\n            price: newPlan.priceId,\n          },\n        ],\n        proration_behavior: 'create_prorations',\n      });\n\n      logger.info('Stripe subscription plan updated', {\n        subscriptionId,\n        oldPlan: subscription.metadata.planKey,\n        newPlan: newPlanKey,\n      });\n\n      return updatedSubscription;\n    } catch (error) {\n      logger.error('Failed to update Stripe subscription plan', {\n        subscriptionId,\n        newPlanKey,\n        error: error.message,\n      });\n      throw error;\n    }\n  }\n\n  /**\n   * Handle Stripe webhook\n   * @param {string} payload - Raw webhook payload\n   * @param {string} signature - Stripe signature\n   * @returns {Promise<Object>} Webhook event\n   */\n  async handleWebhook(payload, signature) {\n    try {\n      const event = this.stripe.webhooks.constructEvent(payload, signature, this.webhookSecret);\n\n      // Idempotency check for webhook replay protection\n      const { database } = require('../context');\n      const existing = await database.auditLog.findFirst({\n        where: {\n          details: {\n            contains: event.id,\n          },\n          createdAt: {\n            gt: new Date(Date.now() - 5 * 60 * 1000), // 5 minutes\n          },\n        },\n      });\n\n      if (existing) {\n        logger.warn('Duplicate webhook event', { eventId: event.id });\n        return { event, duplicate: true };\n      }\n\n      // Log the event for idempotency\n      await database.auditLog.create({\n        eventType: 'stripe_webhook',\n        actor: 'stripe',\n        action: event.type,\n        details: JSON.stringify({ eventId: event.id, type: event.type }),\n        riskLevel: 'high',\n      });\n\n      logger.info('Stripe webhook received', {\n        type: event.type,\n        id: event.id,\n      });\n\n      return event;\n    } catch (error) {\n      logger.error('Failed to handle Stripe webhook', {\n        error: error.message,\n      });\n      throw error;\n    }\n  }\n\n  /**\n   * Create a payment intent for one-time payments\n   * @param {Object} paymentData - Payment data\n   * @returns {Promise<Object>} Payment intent\n   */\n  async createPaymentIntent(paymentData) {\n    try {\n      const paymentIntent = await this.stripe.paymentIntents.create({\n        amount: paymentData.amount,\n        currency: paymentData.currency || 'usd',\n        metadata: {\n          userId: paymentData.userId,\n          type: paymentData.type || 'one_time',\n          description: paymentData.description,\n        },\n        receipt_email: paymentData.email,\n      });\n\n      logger.info('Stripe payment intent created', {\n        paymentIntentId: paymentIntent.id,\n        amount: paymentData.amount,\n        userId: paymentData.userId,\n      });\n\n      return paymentIntent;\n    } catch (error) {\n      logger.error('Failed to create Stripe payment intent', {\n        userId: paymentData.userId,\n        error: error.message,\n      });\n      throw error;\n    }\n  }\n\n  /**\n   * Get customer payment methods\n   * @param {string} customerId - Stripe customer ID\n   * @returns {Promise<Array>} Payment methods\n   */\n  async getCustomerPaymentMethods(customerId) {\n    try {\n      const paymentMethods = await this.stripe.paymentMethods.list({\n        customer: customerId,\n        type: 'card',\n      });\n\n      return paymentMethods.data;\n    } catch (error) {\n      logger.error('Failed to get customer payment methods', {\n        customerId,\n        error: error.message,\n      });\n      throw error;\n    }\n  }\n\n  /**\n   * Create a coupon\n   * @param {Object} couponData - Coupon data\n   * @returns {Promise<Object>} Coupon object\n   */\n  async createCoupon(couponData) {\n    try {\n      const coupon = await this.stripe.coupons.create({\n        percent_off: couponData.percentOff,\n        duration: couponData.duration || 'once',\n        duration_in_months: couponData.durationInMonths,\n        metadata: {\n          code: couponData.code,\n          description: couponData.description,\n        },\n      });\n\n      logger.info('Stripe coupon created', {\n        couponId: coupon.id,\n        percentOff: couponData.percentOff,\n        code: couponData.code,\n      });\n\n      return coupon;\n    } catch (error) {\n      logger.error('Failed to create Stripe coupon', {\n        code: couponData.code,\n        error: error.message,\n      });\n      throw error;\n    }\n  }\n\n  /**\n   * Get subscription details\n   * @param {string} subscriptionId - Stripe subscription ID\n   * @returns {Promise<Object>} Subscription object\n   */\n  async getSubscription(subscriptionId) {\n    try {\n      const subscription = await this.stripe.subscriptions.retrieve(subscriptionId);\n      return subscription;\n    } catch (error) {\n      logger.error('Failed to get Stripe subscription', {\n        subscriptionId,\n        error: error.message,\n      });\n      throw error;\n    }\n  }\n\n  /**\n   * Get customer details\n   * @param {string} customerId - Stripe customer ID\n   * @returns {Promise<Object>} Customer object\n   */\n  async getCustomer(customerId) {\n    try {\n      const customer = await this.stripe.customers.retrieve(customerId);\n      return customer;\n    } catch (error) {\n      logger.error('Failed to get Stripe customer', {\n        customerId,\n        error: error.message,\n      });\n      throw error;\n    }\n  }\n\n  /**\n   * List customer subscriptions\n   * @param {string} customerId - Stripe customer ID\n   * @returns {Promise<Array>} Subscriptions array\n   */\n  async listCustomerSubscriptions(customerId) {\n    try {\n      const subscriptions = await this.stripe.subscriptions.list({\n        customer: customerId,\n        status: 'all',\n        limit: 100,\n      });\n\n      return subscriptions.data;\n    } catch (error) {\n      logger.error('Failed to list customer subscriptions', {\n        customerId,\n        error: error.message,\n      });\n      throw error;\n    }\n  }\n\n  /**\n   * Get available plans\n   * @returns {Object} Plans configuration\n   */\n  getPlans() {\n    return this.plans;\n  }\n\n  /**\n   * Check if service is initialized\n   * @returns {boolean} Initialization status\n   */\n  isReady() {\n    return this.isInitialized;\n  }\n\n  /**\n   * Health check for Stripe service\n   * @returns {Promise<Object>} Health status\n   */\n  async healthCheck() {\n    try {\n      // Test API connectivity\n      await this.stripe.balance.retrieve();\n\n      return {\n        status: 'healthy',\n        service: 'stripe',\n        initialized: this.isInitialized,\n        plansCount: Object.keys(this.plans).length,\n        timestamp: new Date().toISOString(),\n      };\n    } catch (error) {\n      logger.error('Stripe health check failed', { error: error.message });\n      return {\n        status: 'unhealthy',\n        service: 'stripe',\n        error: error.message,\n        timestamp: new Date().toISOString(),\n      };\n    }\n  }\n}\n\nmodule.exports = StripeService;\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\src\\services\\subscription.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":23,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":30},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":2,"column":16,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":23},{"ruleId":"no-unused-vars","severity":1,"message":"'paymentMethod' is defined but never used. Allowed unused args must match /^_/u.","line":79,"column":45,"nodeType":"Identifier","messageId":"unusedVar","endLine":79,"endColumn":58,"suggestions":[{"messageId":"removeVar","data":{"varName":"paymentMethod"},"fix":{"range":[2254,2269],"text":""},"desc":"Remove unused variable 'paymentMethod'."}]},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":761,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":761,"endColumn":7}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const StripeService = require('./stripe');\nconst logger = require('../utils/logger');\n\nclass SubscriptionService {\n  constructor(databaseService) {\n    this.database = databaseService;\n    this.stripe = new StripeService();\n    this.isInitialized = false;\n\n    // Usage limits for different plans\n    this.usageLimits = {\n      free: {\n        aiRequests: 50,\n        imageGenerations: 10,\n        commands: 1000,\n        storage: 100 * 1024 * 1024, // 100MB\n        premiumCommands: false,\n        analytics: false,\n        apiAccess: false,\n      },\n      basic: {\n        aiRequests: 100,\n        imageGenerations: 25,\n        commands: 5000,\n        storage: 500 * 1024 * 1024, // 500MB\n        premiumCommands: false,\n        analytics: false,\n        apiAccess: false,\n      },\n      pro: {\n        aiRequests: -1, // Unlimited\n        imageGenerations: 100,\n        commands: -1, // Unlimited\n        storage: 2 * 1024 * 1024 * 1024, // 2GB\n        premiumCommands: true,\n        analytics: true,\n        apiAccess: true,\n      },\n      enterprise: {\n        aiRequests: -1, // Unlimited\n        imageGenerations: -1, // Unlimited\n        commands: -1, // Unlimited\n        storage: 10 * 1024 * 1024 * 1024, // 10GB\n        premiumCommands: true,\n        analytics: true,\n        apiAccess: true,\n        whiteLabel: true,\n        customIntegrations: true,\n        dedicatedSupport: true,\n      },\n    };\n\n    logger.info('Subscription service initialized');\n  }\n\n  /**\n   * Initialize subscription service\n   * @param {Object} config - Configuration object\n   */\n  async initialize(config) {\n    try {\n      await this.stripe.initialize(config.stripeSecretKey, config.stripeWebhookSecret);\n\n      this.isInitialized = true;\n      logger.info('Subscription service initialized successfully');\n    } catch (error) {\n      logger.error('Failed to initialize subscription service', { error: error.message });\n      throw error;\n    }\n  }\n\n  /**\n   * Create a new subscription for a user\n   * @param {string} userId - User ID\n   * @param {string} planKey - Plan key (basic, pro, enterprise)\n   * @param {Object} paymentMethod - Payment method details\n   * @returns {Promise<Object>} Subscription result\n   */\n  async createSubscription(userId, planKey, paymentMethod) {\n    try {\n      // Validate plan\n      if (!this.usageLimits[planKey]) {\n        throw new Error(`Invalid plan key: ${planKey}`);\n      }\n\n      // Get or create Stripe customer\n      let customer = await this.getStripeCustomer(userId);\n      if (!customer) {\n        const user = await this.database.getUser(userId);\n        if (!user) {\n          throw new Error(`User not found: ${userId}`);\n        }\n\n        customer = await this.stripe.createCustomer({\n          userId,\n          email: user.email,\n          name: user.name,\n          phone: user.phone,\n        });\n\n        // Save customer ID to database\n        await this.database.updateUser(userId, {\n          stripeCustomerId: customer.id,\n        });\n      }\n\n      // Create subscription\n      const subscription = await this.stripe.createSubscription(customer.id, planKey, { userId });\n\n      // Save subscription to database\n      const subscriptionData = {\n        userId,\n        stripeSubscriptionId: subscription.id,\n        planKey,\n        status: subscription.status,\n        currentPeriodStart: new Date(subscription.current_period_start * 1000),\n        currentPeriodEnd: new Date(subscription.current_period_end * 1000),\n        cancelAtPeriodEnd: subscription.cancel_at_period_end,\n        createdAt: new Date(),\n      };\n\n      await this.database.prisma.subscription.create({\n        data: subscriptionData,\n      });\n\n      // Reset usage counters for new subscription\n      await this.resetUsageCounters(userId);\n\n      logger.info('Subscription created successfully', {\n        userId,\n        planKey,\n        subscriptionId: subscription.id,\n      });\n\n      return {\n        subscription,\n        clientSecret: subscription.latest_invoice.payment_intent?.client_secret,\n      };\n    } catch (error) {\n      logger.error('Failed to create subscription', {\n        userId,\n        planKey,\n        error: error.message,\n      });\n      throw error;\n    }\n  }\n\n  /**\n   * Cancel user subscription\n   * @param {string} userId - User ID\n   * @param {boolean} cancelAtPeriodEnd - Cancel at period end or immediately\n   * @returns {Promise<Object>} Cancellation result\n   */\n  async cancelSubscription(userId, cancelAtPeriodEnd = true) {\n    try {\n      const subscription = await this.database.prisma.subscription.findFirst({\n        where: {\n          userId,\n          status: { in: ['active', 'trialing'] },\n        },\n      });\n\n      if (!subscription) {\n        throw new Error('No active subscription found');\n      }\n\n      const stripeSubscription = await this.stripe.cancelSubscription(\n        subscription.stripeSubscriptionId,\n        cancelAtPeriodEnd\n      );\n\n      // Update database\n      await this.database.prisma.subscription.update({\n        where: { id: subscription.id },\n        data: {\n          status: stripeSubscription.status,\n          cancelAtPeriodEnd: stripeSubscription.cancel_at_period_end,\n          cancelledAt: cancelAtPeriodEnd ? null : new Date(),\n        },\n      });\n\n      logger.info('Subscription cancelled', {\n        userId,\n        subscriptionId: subscription.stripeSubscriptionId,\n        cancelAtPeriodEnd,\n      });\n\n      return stripeSubscription;\n    } catch (error) {\n      logger.error('Failed to cancel subscription', {\n        userId,\n        error: error.message,\n      });\n      throw error;\n    }\n  }\n\n  /**\n   * Update user subscription plan\n   * @param {string} userId - User ID\n   * @param {string} newPlanKey - New plan key\n   * @returns {Promise<Object>} Update result\n   */\n  async updateSubscriptionPlan(userId, newPlanKey) {\n    try {\n      if (!this.usageLimits[newPlanKey]) {\n        throw new Error(`Invalid plan key: ${newPlanKey}`);\n      }\n\n      const subscription = await this.database.prisma.subscription.findFirst({\n        where: {\n          userId,\n          status: { in: ['active', 'trialing'] },\n        },\n      });\n\n      if (!subscription) {\n        throw new Error('No active subscription found');\n      }\n\n      const stripeSubscription = await this.stripe.updateSubscriptionPlan(\n        subscription.stripeSubscriptionId,\n        newPlanKey\n      );\n\n      // Update database\n      await this.database.prisma.subscription.update({\n        where: { id: subscription.id },\n        data: {\n          planKey: newPlanKey,\n          status: stripeSubscription.status,\n          currentPeriodStart: new Date(stripeSubscription.current_period_start * 1000),\n          currentPeriodEnd: new Date(stripeSubscription.current_period_end * 1000),\n        },\n      });\n\n      logger.info('Subscription plan updated', {\n        userId,\n        oldPlan: subscription.planKey,\n        newPlan: newPlanKey,\n      });\n\n      return stripeSubscription;\n    } catch (error) {\n      logger.error('Failed to update subscription plan', {\n        userId,\n        newPlanKey,\n        error: error.message,\n      });\n      throw error;\n    }\n  }\n\n  /**\n   * Check if user has access to a feature\n   * @param {string} userId - User ID\n   * @param {string} feature - Feature name\n   * @returns {Promise<boolean>} Access status\n   */\n  async checkFeatureAccess(userId, feature) {\n    try {\n      const planKey = await this.getUserPlan(userId);\n      const limits = this.usageLimits[planKey];\n\n      if (!limits) {\n        return false;\n      }\n\n      // Check specific feature access\n      switch (feature) {\n        case 'ai_requests':\n          return limits.aiRequests === -1 || limits.aiRequests > 0;\n        case 'image_generation':\n          return limits.imageGenerations === -1 || limits.imageGenerations > 0;\n        case 'premium_commands':\n          return limits.premiumCommands;\n        case 'analytics':\n          return limits.analytics;\n        case 'api_access':\n          return limits.apiAccess;\n        case 'white_label':\n          return limits.whiteLabel;\n        case 'custom_integrations':\n          return limits.customIntegrations;\n        case 'dedicated_support':\n          return limits.dedicatedSupport;\n        default:\n          return false;\n      }\n    } catch (error) {\n      logger.error('Failed to check feature access', {\n        userId,\n        feature,\n        error: error.message,\n      });\n      return false;\n    }\n  }\n\n  /**\n   * Track usage for a user\n   * @param {string} userId - User ID\n   * @param {string} feature - Feature name\n   * @param {number} amount - Usage amount\n   * @returns {Promise<Object>} Usage tracking result\n   */\n  async trackUsage(userId, feature, amount = 1) {\n    try {\n      const planKey = await this.getUserPlan(userId);\n      const limits = this.usageLimits[planKey];\n\n      if (!limits) {\n        throw new Error('Invalid plan configuration');\n      }\n\n      // Get current usage\n      const currentUsage = await this.getCurrentUsage(userId, feature);\n\n      // Check limits\n      const limit = this.getFeatureLimit(planKey, feature);\n      if (limit !== -1 && currentUsage + amount > limit) {\n        throw new Error(`Usage limit exceeded for ${feature}`);\n      }\n\n      // Update usage in database\n      const usageKey = `${feature}_used`;\n      const existingUsage = await this.database.prisma.user.findUnique({\n        where: { id: userId },\n        select: { [usageKey]: true },\n      });\n\n      const newUsage = (existingUsage?.[usageKey] || 0) + amount;\n\n      await this.database.prisma.user.update({\n        where: { id: userId },\n        data: { [usageKey]: newUsage },\n      });\n\n      // Log usage\n      await this.database.prisma.analytics.create({\n        data: {\n          metric: `usage_${feature}`,\n          value: amount,\n          category: 'usage',\n          metadata: JSON.stringify({ userId, planKey }),\n          recordedAt: new Date(),\n        },\n      });\n\n      logger.debug('Usage tracked', {\n        userId,\n        feature,\n        amount,\n        newTotal: newUsage,\n        limit,\n      });\n\n      return {\n        used: newUsage,\n        limit,\n        remaining: limit === -1 ? -1 : limit - newUsage,\n      };\n    } catch (error) {\n      logger.error('Failed to track usage', {\n        userId,\n        feature,\n        amount,\n        error: error.message,\n      });\n      throw error;\n    }\n  }\n\n  /**\n   * Get current usage for a user and feature\n   * @param {string} userId - User ID\n   * @param {string} feature - Feature name\n   * @returns {Promise<number>} Current usage\n   */\n  async getCurrentUsage(userId, feature) {\n    try {\n      const usageKey = `${feature}_used`;\n      const user = await this.database.prisma.user.findUnique({\n        where: { id: userId },\n        select: { [usageKey]: true },\n      });\n\n      return user?.[usageKey] || 0;\n    } catch (error) {\n      logger.error('Failed to get current usage', {\n        userId,\n        feature,\n        error: error.message,\n      });\n      return 0;\n    }\n  }\n\n  /**\n   * Get feature limit for a plan\n   * @param {string} planKey - Plan key\n   * @param {string} feature - Feature name\n   * @returns {number} Feature limit\n   */\n  getFeatureLimit(planKey, feature) {\n    const limits = this.usageLimits[planKey];\n    if (!limits) return 0;\n\n    switch (feature) {\n      case 'ai_requests':\n        return limits.aiRequests;\n      case 'image_generation':\n        return limits.imageGenerations;\n      case 'commands':\n        return limits.commands;\n      case 'storage':\n        return limits.storage;\n      default:\n        return 0;\n    }\n  }\n\n  /**\n   * Get user's current plan\n   * @param {string} userId - User ID\n   * @returns {Promise<string>} Plan key\n   */\n  async getUserPlan(userId) {\n    try {\n      const subscription = await this.database.prisma.subscription.findFirst({\n        where: {\n          userId,\n          status: { in: ['active', 'trialing'] },\n        },\n        orderBy: {\n          createdAt: 'desc',\n        },\n      });\n\n      return subscription?.planKey || 'free';\n    } catch (error) {\n      logger.error('Failed to get user plan', {\n        userId,\n        error: error.message,\n      });\n      return 'free';\n    }\n  }\n\n  /**\n   * Get user's subscription details\n   * @param {string} userId - User ID\n   * @returns {Promise<Object>} Subscription details\n   */\n  async getUserSubscription(userId) {\n    try {\n      const subscription = await this.database.prisma.subscription.findFirst({\n        where: {\n          userId,\n          status: { in: ['active', 'trialing'] },\n        },\n        orderBy: {\n          createdAt: 'desc',\n        },\n      });\n\n      if (!subscription) {\n        return {\n          plan: 'free',\n          status: 'none',\n          limits: this.usageLimits.free,\n        };\n      }\n\n      return {\n        id: subscription.id,\n        plan: subscription.planKey,\n        status: subscription.status,\n        currentPeriodStart: subscription.currentPeriodStart,\n        currentPeriodEnd: subscription.currentPeriodEnd,\n        cancelAtPeriodEnd: subscription.cancelAtPeriodEnd,\n        limits: this.usageLimits[subscription.planKey] || this.usageLimits.free,\n      };\n    } catch (error) {\n      logger.error('Failed to get user subscription', {\n        userId,\n        error: error.message,\n      });\n      return {\n        plan: 'free',\n        status: 'error',\n        limits: this.usageLimits.free,\n      };\n    }\n  }\n\n  /**\n   * Reset usage counters (called monthly or on subscription change)\n   * @param {string} userId - User ID\n   * @returns {Promise<void>}\n   */\n  async resetUsageCounters(userId) {\n    try {\n      await this.database.prisma.user.update({\n        where: { id: userId },\n        data: {\n          ai_requests_used: 0,\n          image_generations_used: 0,\n          commands_used: 0,\n          storage_used: 0,\n        },\n      });\n\n      logger.info('Usage counters reset', { userId });\n    } catch (error) {\n      logger.error('Failed to reset usage counters', {\n        userId,\n        error: error.message,\n      });\n      throw error;\n    }\n  }\n\n  /**\n   * Get Stripe customer for user\n   * @param {string} userId - User ID\n   * @returns {Promise<Object>} Stripe customer\n   */\n  async getStripeCustomer(userId) {\n    try {\n      const user = await this.database.prisma.user.findUnique({\n        where: { id: userId },\n        select: { stripeCustomerId: true },\n      });\n\n      if (!user?.stripeCustomerId) {\n        return null;\n      }\n\n      return await this.stripe.getCustomer(user.stripeCustomerId);\n    } catch (error) {\n      logger.error('Failed to get Stripe customer', {\n        userId,\n        error: error.message,\n      });\n      return null;\n    }\n  }\n\n  /**\n   * Get available plans\n   * @returns {Object} Plans configuration\n   */\n  getPlans() {\n    return this.usageLimits;\n  }\n\n  /**\n   * Handle Stripe webhook events\n   * @param {Object} event - Stripe webhook event\n   * @returns {Promise<void>}\n   */\n  async handleWebhook(event) {\n    try {\n      switch (event.type) {\n        case 'customer.subscription.created':\n        case 'customer.subscription.updated':\n          await this.handleSubscriptionUpdate(event.data.object);\n          break;\n\n        case 'customer.subscription.deleted':\n          await this.handleSubscriptionCancellation(event.data.object);\n          break;\n\n        case 'invoice.payment_succeeded':\n          await this.handlePaymentSuccess(event.data.object);\n          break;\n\n        case 'invoice.payment_failed':\n          await this.handlePaymentFailure(event.data.object);\n          break;\n\n        default:\n          logger.debug('Unhandled webhook event', { type: event.type });\n      }\n    } catch (error) {\n      logger.error('Failed to handle webhook', {\n        eventType: event.type,\n        error: error.message,\n      });\n      throw error;\n    }\n  }\n\n  /**\n   * Handle subscription updates from webhooks\n   * @param {Object} subscription - Stripe subscription object\n   */\n  async handleSubscriptionUpdate(subscription) {\n    try {\n      const localSubscription = await this.database.prisma.subscription.findFirst({\n        where: { stripeSubscriptionId: subscription.id },\n      });\n\n      if (localSubscription) {\n        await this.database.prisma.subscription.update({\n          where: { id: localSubscription.id },\n          data: {\n            status: subscription.status,\n            currentPeriodStart: new Date(subscription.current_period_start * 1000),\n            currentPeriodEnd: new Date(subscription.current_period_end * 1000),\n            cancelAtPeriodEnd: subscription.cancel_at_period_end,\n          },\n        });\n\n        // Reset usage counters on renewal\n        if (subscription.status === 'active') {\n          await this.resetUsageCounters(localSubscription.userId);\n        }\n\n        logger.info('Subscription updated from webhook', {\n          subscriptionId: subscription.id,\n          status: subscription.status,\n        });\n      }\n    } catch (error) {\n      logger.error('Failed to handle subscription update', {\n        subscriptionId: subscription.id,\n        error: error.message,\n      });\n    }\n  }\n\n  /**\n   * Handle subscription cancellations from webhooks\n   * @param {Object} subscription - Stripe subscription object\n   */\n  async handleSubscriptionCancellation(subscription) {\n    try {\n      await this.database.prisma.subscription.updateMany({\n        where: { stripeSubscriptionId: subscription.id },\n        data: {\n          status: 'canceled',\n          cancelledAt: new Date(),\n        },\n      });\n\n      logger.info('Subscription cancelled from webhook', {\n        subscriptionId: subscription.id,\n      });\n    } catch (error) {\n      logger.error('Failed to handle subscription cancellation', {\n        subscriptionId: subscription.id,\n        error: error.message,\n      });\n    }\n  }\n\n  /**\n   * Handle successful payments from webhooks\n   * @param {Object} invoice - Stripe invoice object\n   */\n  async handlePaymentSuccess(invoice) {\n    try {\n      // Record payment in database\n      await this.database.prisma.payment.create({\n        data: {\n          userId: invoice.customer_metadata?.userId,\n          amount: invoice.amount_due,\n          currency: invoice.currency,\n          status: 'completed',\n          paymentMethod: 'stripe',\n          transactionId: invoice.id,\n          description: `Subscription payment - ${invoice.subscription}`,\n          createdAt: new Date(),\n        },\n      });\n\n      logger.info('Payment recorded', {\n        invoiceId: invoice.id,\n        amount: invoice.amount_due,\n        customerId: invoice.customer,\n      });\n    } catch (error) {\n      logger.error('Failed to handle payment success', {\n        invoiceId: invoice.id,\n        error: error.message,\n      });\n    }\n  }\n\n  /**\n   * Handle failed payments from webhooks\n   * @param {Object} invoice - Stripe invoice object\n   */\n  async handlePaymentFailure(invoice) {\n    try {\n      // Record failed payment\n      await this.database.prisma.payment.create({\n        data: {\n          userId: invoice.customer_metadata?.userId,\n          amount: invoice.amount_due,\n          currency: invoice.currency,\n          status: 'failed',\n          paymentMethod: 'stripe',\n          transactionId: invoice.id,\n          description: `Failed payment - ${invoice.subscription}`,\n          createdAt: new Date(),\n        },\n      });\n\n      logger.warn('Payment failed', {\n        invoiceId: invoice.id,\n        customerId: invoice.customer,\n      });\n    } catch (error) {\n      logger.error('Failed to handle payment failure', {\n        invoiceId: invoice.id,\n        error: error.message,\n      });\n    }\n  }\n\n  /**\n   * Check if service is initialized\n   * @returns {boolean} Initialization status\n   */\n  isReady() {\n    return this.isInitialized;\n  }\n\n  /**\n   * Health check for subscription service\n   * @returns {Promise<Object>} Health status\n   */\n  async healthCheck() {\n    try {\n      const stripeHealth = await this.stripe.healthCheck();\n\n      return {\n        status: 'healthy',\n        service: 'subscription',\n        initialized: this.isInitialized,\n        stripe: stripeHealth,\n        plansCount: Object.keys(this.usageLimits).length,\n        timestamp: new Date().toISOString(),\n      };\n    } catch (error) {\n      logger.error('Subscription health check failed', { error: error.message });\n      return {\n        status: 'unhealthy',\n        service: 'subscription',\n        error: error.message,\n        timestamp: new Date().toISOString(),\n      };\n    }\n  }\n}\n\nmodule.exports = SubscriptionService;\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\src\\services\\textToSpeechService.js","messages":[{"ruleId":"import-x/no-import-module-exports","severity":2,"message":"Cannot use import declarations in modules that export using CommonJS (module.exports = 'foo' or exports.bar = 'hi')","line":6,"column":1,"nodeType":"ImportDeclaration","messageId":"notAllowed","endLine":6,"endColumn":25},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":8,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":8,"endColumn":22},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":9,"column":12,"nodeType":"Identifier","messageId":"undef","endLine":9,"endColumn":19},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":10,"column":17,"nodeType":"Identifier","messageId":"undef","endLine":10,"endColumn":24},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":15,"column":30,"nodeType":"Identifier","messageId":"undef","endLine":15,"endColumn":37},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":25,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":25,"endColumn":20,"suggestions":[{"fix":{"range":[551,607],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-undef","severity":2,"message":"'Buffer' is not defined.","line":67,"column":17,"nodeType":"Identifier","messageId":"undef","endLine":67,"endColumn":23},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":73,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":73,"endColumn":20,"suggestions":[{"fix":{"range":[2072,2121],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'voice' is assigned a value but never used.","line":94,"column":45,"nodeType":"Identifier","messageId":"unusedVar","endLine":94,"endColumn":50,"suggestions":[{"messageId":"removeVar","data":{"varName":"voice"},"fix":{"range":[2660,2678],"text":""},"desc":"Remove unused variable 'voice'."}]},{"ruleId":"no-undef","severity":2,"message":"'Buffer' is not defined.","line":135,"column":17,"nodeType":"Identifier","messageId":"undef","endLine":135,"endColumn":23},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":141,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":141,"endColumn":20,"suggestions":[{"fix":{"range":[4023,4081],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"class-methods-use-this","severity":2,"message":"Expected 'this' to be used by class method 'getAvailableLanguages'.","line":155,"column":3,"nodeType":"FunctionExpression","messageId":"missingThis","endLine":155,"endColumn":24},{"ruleId":"class-methods-use-this","severity":2,"message":"Expected 'this' to be used by class async method 'checkRateLimit'.","line":186,"column":3,"nodeType":"FunctionExpression","messageId":"missingThis","endLine":186,"endColumn":23},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":232,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":232,"endColumn":20,"suggestions":[{"fix":{"range":[6212,6267],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":243,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":243,"endColumn":19},{"ruleId":"no-restricted-syntax","severity":2,"message":"iterators/generators require regenerator-runtime, which is too heavyweight for this guide to allow them. Separately, loops should be avoided in favor of array iterations.","line":259,"column":7,"nodeType":"ForOfStatement","messageId":"restrictedSyntax","endLine":268,"endColumn":8},{"ruleId":"no-await-in-loop","severity":2,"message":"Unexpected `await` inside a loop.","line":262,"column":25,"nodeType":"AwaitExpression","messageId":"unexpectedAwait","endLine":262,"endColumn":48},{"ruleId":"no-await-in-loop","severity":2,"message":"Unexpected `await` inside a loop.","line":265,"column":13,"nodeType":"AwaitExpression","messageId":"unexpectedAwait","endLine":265,"endColumn":54},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":270,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":270,"endColumn":20,"suggestions":[{"fix":{"range":[7166,7219],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":292,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":292,"endColumn":20,"suggestions":[{"fix":{"range":[7718,7765],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":298,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":298,"endColumn":7}],"suppressedMessages":[],"errorCount":13,"fatalErrorCount":0,"warningCount":8,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Text-to-Speech Service - Convert text to audio\n * Implements TTS functionality with proper error handling and rate limiting\n */\n\nimport path from 'path';\n\nconst axios = require('axios');\nconst fs = require('fs').promises;\nconst context = require('../../context');\n\nclass TextToSpeechService {\n  constructor() {\n    this.rateLimits = new Map();\n    this.tempDir = path.join(process.cwd(), 'database', 'tts');\n  }\n\n  /**\n   * Initialize service\n   */\n  async initialize() {\n    try {\n      await this.ensureTempDir();\n    } catch (error) {\n      console.error('Error initializing TTS service:', error);\n    }\n  }\n\n  /**\n   * Convert text to speech\n   * @param {string} text - Text to convert\n   * @param {string} language - Language code (default: 'id')\n   */\n  async textToSpeech(text, language = 'id') {\n    try {\n      if (!text || text.length === 0) {\n        throw new Error('Please provide text to convert');\n      }\n\n      if (text.length > 500) {\n        throw new Error('Text too long. Maximum 500 characters.');\n      }\n\n      // Check rate limit from database\n      if (!(await this.checkRateLimit('tts_global'))) {\n        throw new Error('Rate limit exceeded. Please wait before using TTS again.');\n      }\n\n      // Use Google Translate TTS API\n      const ttsUrl = `https://translate.google.com/translate_tts?ie=UTF-8&client=tw-ob&tl=${language}&q=${encodeURIComponent(text)}`;\n\n      const response = await axios.get(ttsUrl, {\n        responseType: 'arraybuffer',\n        headers: {\n          'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36',\n          Referer: 'https://translate.google.com/',\n        },\n        timeout: 30000,\n      });\n\n      if (response.data.length < 100) {\n        throw new Error('TTS generation failed - empty response');\n      }\n\n      return {\n        success: true,\n        buffer: Buffer.from(response.data),\n        text,\n        language,\n        message: `Berhasil mengconvert teks ke suara: \"${text.substring(0, 50)}${text.length > 50 ? '...' : ''}\"`,\n      };\n    } catch (error) {\n      console.error('Error in text-to-speech:', error);\n\n      if (error.message.includes('Rate limit')) {\n        throw error;\n      }\n\n      if (error.response?.status === 429) {\n        throw new Error('TTS service rate limit exceeded. Please try again later.');\n      }\n\n      throw new Error('Failed to convert text to speech');\n    }\n  }\n\n  /**\n   * Convert text to speech with voice options\n   * @param {string} text - Text to convert\n   * @param {Object} options - TTS options\n   */\n  async textToSpeechAdvanced(text, options = {}) {\n    try {\n      const { language = 'id', speed = 1.0, voice = 'female' } = options;\n\n      if (!text || text.length === 0) {\n        throw new Error('Please provide text to convert');\n      }\n\n      if (text.length > 1000) {\n        throw new Error('Text too long. Maximum 1000 characters.');\n      }\n\n      // Check rate limit from database\n      if (!(await this.checkRateLimit('tts_advanced'))) {\n        throw new Error('Rate limit exceeded. Please wait before using advanced TTS.');\n      }\n\n      // Use alternative TTS service for more options\n      const response = await axios.post(\n        'https://api.voicerss.org/',\n        {\n          key: 'your_api_key_here', // Would need actual API key\n          src: text,\n          hl: language,\n          r: speed,\n          c: 'mp3',\n          f: '44khz_16bit_stereo',\n        },\n        {\n          headers: {\n            'Content-Type': 'application/x-www-form-urlencoded',\n          },\n          responseType: 'arraybuffer',\n          timeout: 30000,\n        }\n      );\n\n      if (response.data.length < 100) {\n        throw new Error('Advanced TTS generation failed');\n      }\n\n      return {\n        success: true,\n        buffer: Buffer.from(response.data),\n        text,\n        options,\n        message: `Berhasil mengconvert dengan pengaturan advanced: \"${text.substring(0, 50)}${text.length > 50 ? '...' : ''}\"`,\n      };\n    } catch (error) {\n      console.error('Error in advanced text-to-speech:', error);\n\n      if (error.message.includes('Rate limit')) {\n        throw error;\n      }\n\n      // Fallback to basic TTS\n      return await this.textToSpeech(text, options.language);\n    }\n  }\n\n  /**\n   * Get available languages for TTS\n   */\n  getAvailableLanguages() {\n    return {\n      id: 'Indonesian',\n      en: 'English',\n      es: 'Spanish',\n      fr: 'French',\n      de: 'German',\n      it: 'Italian',\n      pt: 'Portuguese',\n      ru: 'Russian',\n      ja: 'Japanese',\n      ko: 'Korean',\n      zh: 'Chinese',\n      ar: 'Arabic',\n      hi: 'Hindi',\n    };\n  }\n\n  /**\n   * Validate language code\n   * @param {string} language - Language code to validate\n   */\n  validateLanguage(language) {\n    const available = this.getAvailableLanguages();\n    return available[language] !== undefined;\n  }\n\n  /**\n   * Check rate limit for TTS operations (now uses database)\n   * @param {string} operation - Operation type\n   */\n  async checkRateLimit(operation) {\n    const key = `tts_${operation}`;\n    const now = Date.now();\n\n    const limits = {\n      tts_global: { cooldown: 5000, maxPerCooldown: 3 }, // 5 seconds, 3 operations\n      tts_advanced: { cooldown: 10000, maxPerCooldown: 2 }, // 10 seconds, 2 operations\n    };\n\n    const config = limits[operation] || { cooldown: 10000, maxPerCooldown: 1 };\n\n    try {\n      const existingLimit = await context.database.rateLimit.findUnique({\n        where: { key },\n      });\n\n      if (!existingLimit || now - existingLimit.lastUsed.getTime() > config.cooldown) {\n        await context.database.rateLimit.upsert({\n          where: { key },\n          update: {\n            count: 1,\n            lastUsed: new Date(),\n          },\n          create: {\n            key,\n            count: 1,\n            lastUsed: new Date(),\n          },\n        });\n        return true;\n      }\n\n      if (existingLimit.count >= config.maxPerCooldown) {\n        return false;\n      }\n\n      await context.database.rateLimit.update({\n        where: { key },\n        data: {\n          count: { increment: 1 },\n          lastUsed: new Date(),\n        },\n      });\n\n      return true;\n    } catch (error) {\n      console.error('Error checking TTS rate limit:', error);\n      return false; // Fail safe\n    }\n  }\n\n  /**\n   * Ensure temp directory exists\n   */\n  async ensureTempDir() {\n    try {\n      await fs.access(this.tempDir);\n    } catch (error) {\n      await fs.mkdir(this.tempDir, { recursive: true });\n    }\n  }\n\n  /**\n   * Clean up old TTS files\n   */\n  async cleanupOldFiles() {\n    try {\n      const tempDir = await this.ensureTempDir();\n      const files = await fs.readdir(tempDir);\n\n      const now = Date.now();\n      const maxAge = 60 * 60 * 1000; // 1 hour\n\n      for (const file of files) {\n        if (file.endsWith('.mp3') || file.endsWith('.wav') || file.endsWith('.ogg')) {\n          const filePath = path.join(tempDir, file);\n          const stats = await fs.stat(filePath);\n\n          if (now - stats.mtime.getTime() > maxAge) {\n            await fs.unlink(filePath).catch(() => {});\n          }\n        }\n      }\n    } catch (error) {\n      console.error('Error cleaning up TTS files:', error);\n    }\n  }\n\n  /**\n   * Save TTS audio to file\n   * @param {Buffer} audioBuffer - Audio buffer\n   * @param {string} filename - Output filename\n   */\n  async saveTTSFile(audioBuffer, filename) {\n    try {\n      const tempDir = await this.ensureTempDir();\n      const filePath = path.join(tempDir, filename);\n\n      await fs.writeFile(filePath, audioBuffer);\n\n      return {\n        success: true,\n        filePath,\n        message: 'TTS audio saved successfully',\n      };\n    } catch (error) {\n      console.error('Error saving TTS file:', error);\n      throw new Error('Failed to save TTS audio');\n    }\n  }\n}\n\nmodule.exports = new TextToSpeechService();\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\src\\services\\userService.js","messages":[{"ruleId":"radix","severity":2,"message":"Missing radix parameter.","line":64,"column":43,"nodeType":"CallExpression","messageId":"missingRadix","endLine":64,"endColumn":74,"suggestions":[{"messageId":"addRadixParameter10","fix":{"range":[1676,1676],"text":", 10"},"desc":"Add radix parameter `10` for parsing decimal numbers."}]},{"ruleId":"no-plusplus","severity":2,"message":"Unary operator '++' used.","line":121,"column":24,"nodeType":"UpdateExpression","messageId":"unexpectedUnaryOp","endLine":121,"endColumn":37},{"ruleId":"no-restricted-syntax","severity":2,"message":"iterators/generators require regenerator-runtime, which is too heavyweight for this guide to allow them. Separately, loops should be avoided in favor of array iterations.","line":161,"column":5,"nodeType":"ForOfStatement","messageId":"restrictedSyntax","endLine":192,"endColumn":6},{"ruleId":"no-await-in-loop","severity":2,"message":"Unexpected `await` inside a loop.","line":167,"column":27,"nodeType":"AwaitExpression","messageId":"unexpectedAwait","endLine":167,"endColumn":78},{"ruleId":"no-await-in-loop","severity":2,"message":"Unexpected `await` inside a loop.","line":170,"column":27,"nodeType":"AwaitExpression","messageId":"unexpectedAwait","endLine":170,"endColumn":78},{"ruleId":"no-await-in-loop","severity":2,"message":"Unexpected `await` inside a loop.","line":173,"column":27,"nodeType":"AwaitExpression","messageId":"unexpectedAwait","endLine":173,"endColumn":56},{"ruleId":"no-await-in-loop","severity":2,"message":"Unexpected `await` inside a loop.","line":177,"column":29,"nodeType":"AwaitExpression","messageId":"unexpectedAwait","endLine":177,"endColumn":82},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":275,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":275,"endColumn":7}],"suppressedMessages":[],"errorCount":8,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Mock User Service for testing\n// This will be replaced with actual database implementation in Phase 7.2\n\nclass UserService {\n  constructor() {\n    this.users = new Map();\n    this.nextId = 1;\n\n    // Add some mock users for testing\n    this.initializeMockData();\n  }\n\n  initializeMockData() {\n    const mockUsers = [\n      {\n        id: 'user-1',\n        name: 'John Doe',\n        email: 'john@example.com',\n        phone: '+1234567890',\n        plan: 'pro',\n        status: 'active',\n        joinDate: new Date('2024-01-15'),\n        lastActivity: new Date(),\n        commandsUsed: 1250,\n        aiRequests: 340,\n        totalSpent: 299.99,\n        level: 15,\n        xp: 8750,\n      },\n      {\n        id: 'user-2',\n        name: 'Jane Smith',\n        email: 'jane@example.com',\n        phone: '+1234567891',\n        plan: 'basic',\n        status: 'active',\n        joinDate: new Date('2024-02-20'),\n        lastActivity: new Date(Date.now() - 2 * 60 * 60 * 1000), // 2 hours ago\n        commandsUsed: 890,\n        aiRequests: 156,\n        totalSpent: 149.99,\n        level: 12,\n        xp: 6200,\n      },\n      {\n        id: 'user-3',\n        name: 'Bob Johnson',\n        email: 'bob@example.com',\n        phone: '+1234567892',\n        plan: 'free',\n        status: 'inactive',\n        joinDate: new Date('2024-03-10'),\n        lastActivity: new Date(Date.now() - 7 * 24 * 60 * 60 * 1000), // 7 days ago\n        commandsUsed: 45,\n        aiRequests: 12,\n        totalSpent: 0,\n        level: 3,\n        xp: 180,\n      },\n    ];\n\n    mockUsers.forEach(user => {\n      this.users.set(user.id, user);\n      this.nextId = Math.max(this.nextId, parseInt(user.id.split('-')[1]) + 1);\n    });\n  }\n\n  async getUsers(filters = {}, options = {}) {\n    const { page = 1, limit = 20 } = options;\n    let users = Array.from(this.users.values());\n\n    // Apply filters\n    if (filters.search) {\n      const searchTerm = filters.search.toLowerCase();\n      users = users.filter(\n        user =>\n          user.name.toLowerCase().includes(searchTerm) ||\n          user.email.toLowerCase().includes(searchTerm) ||\n          user.phone.includes(searchTerm)\n      );\n    }\n\n    if (filters.status) {\n      users = users.filter(user => user.status === filters.status);\n    }\n\n    if (filters.plan) {\n      users = users.filter(user => user.plan === filters.plan);\n    }\n\n    // Apply sorting\n    if (filters.sortBy) {\n      users.sort((a, b) => {\n        const aVal = a[filters.sortBy];\n        const bVal = b[filters.sortBy];\n\n        if (filters.sortOrder === 'desc') {\n          return aVal < bVal ? 1 : -1;\n        }\n        return aVal > bVal ? 1 : -1;\n      });\n    }\n\n    const total = users.length;\n    const startIndex = (page - 1) * limit;\n    const paginatedUsers = users.slice(startIndex, startIndex + limit);\n\n    return {\n      users: paginatedUsers,\n      total,\n      page,\n      limit,\n    };\n  }\n\n  async getUserById(id) {\n    return this.users.get(id) || null;\n  }\n\n  async createUser(userData) {\n    const id = `user-${this.nextId++}`;\n    const newUser = {\n      id,\n      ...userData,\n      joinDate: new Date(),\n      lastActivity: new Date(),\n      commandsUsed: 0,\n      aiRequests: 0,\n      totalSpent: 0,\n      level: 1,\n      xp: 0,\n    };\n\n    this.users.set(id, newUser);\n    return newUser;\n  }\n\n  async updateUser(id, updateData) {\n    const user = this.users.get(id);\n    if (!user) return null;\n\n    const updatedUser = { ...user, ...updateData };\n    this.users.set(id, updatedUser);\n    return updatedUser;\n  }\n\n  async deleteUser(id) {\n    const user = this.users.get(id);\n    if (!user) return null;\n\n    this.users.delete(id);\n    return user;\n  }\n\n  async bulkAction(action, userIds, options = {}) {\n    const results = {\n      successful: [],\n      failed: [],\n    };\n\n    for (const userId of userIds) {\n      try {\n        let updatedUser;\n\n        switch (action) {\n          case 'ban':\n            updatedUser = await this.updateUser(userId, { status: 'banned' });\n            break;\n          case 'unban':\n            updatedUser = await this.updateUser(userId, { status: 'active' });\n            break;\n          case 'delete':\n            updatedUser = await this.deleteUser(userId);\n            break;\n          case 'update_plan':\n            if (options.plan) {\n              updatedUser = await this.updateUser(userId, { plan: options.plan });\n            }\n            break;\n          default:\n            throw new Error(`Unknown action: ${action}`);\n        }\n\n        if (updatedUser) {\n          results.successful.push(updatedUser);\n        } else {\n          results.failed.push({ id: userId, error: 'User not found' });\n        }\n      } catch (error) {\n        results.failed.push({ id: userId, error: error.message });\n      }\n    }\n\n    return results;\n  }\n\n  async exportUsers(filters = {}, format = 'json') {\n    const { users } = await this.getUsers(filters, { limit: 10000 });\n\n    if (format === 'csv') {\n      const headers = [\n        'ID',\n        'Name',\n        'Email',\n        'Phone',\n        'Plan',\n        'Status',\n        'Join Date',\n        'Last Activity',\n        'Commands Used',\n        'AI Requests',\n        'Total Spent',\n        'Level',\n        'XP',\n      ];\n      const rows = users.map(user => [\n        user.id,\n        user.name,\n        user.email,\n        user.phone,\n        user.plan,\n        user.status,\n        user.joinDate.toISOString(),\n        user.lastActivity.toISOString(),\n        user.commandsUsed,\n        user.aiRequests,\n        user.totalSpent,\n        user.level,\n        user.xp,\n      ]);\n\n      return [headers, ...rows].map(row => row.join(',')).join('\\n');\n    }\n\n    return JSON.stringify(users, null, 2);\n  }\n\n  async getStatistics() {\n    const users = Array.from(this.users.values());\n    const totalUsers = users.length;\n    const activeUsers = users.filter(u => u.status === 'active').length;\n    const premiumUsers = users.filter(u => u.plan !== 'free').length;\n    const bannedUsers = users.filter(u => u.status === 'banned').length;\n\n    const totalCommands = users.reduce((sum, u) => sum + u.commandsUsed, 0);\n    const totalAIRequests = users.reduce((sum, u) => sum + u.aiRequests, 0);\n    const totalRevenue = users.reduce((sum, u) => sum + u.totalSpent, 0);\n\n    return {\n      overview: {\n        totalUsers,\n        activeUsers,\n        premiumUsers,\n        bannedUsers,\n      },\n      activity: {\n        totalCommands,\n        totalAIRequests,\n        averageCommandsPerUser: totalUsers > 0 ? Math.round(totalCommands / totalUsers) : 0,\n        averageAIRequestsPerUser: totalUsers > 0 ? Math.round(totalAIRequests / totalUsers) : 0,\n      },\n      revenue: {\n        totalRevenue,\n        averageRevenuePerUser:\n          totalUsers > 0 ? Math.round((totalRevenue / totalUsers) * 100) / 100 : 0,\n        premiumRevenue: users\n          .filter(u => u.plan !== 'free')\n          .reduce((sum, u) => sum + u.totalSpent, 0),\n      },\n      lastUpdated: new Date().toISOString(),\n    };\n  }\n}\n\nmodule.exports = new UserService();\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\src\\services\\writingService.js","messages":[{"ruleId":"import-x/no-import-module-exports","severity":2,"message":"Cannot use import declarations in modules that export using CommonJS (module.exports = 'foo' or exports.bar = 'hi')","line":6,"column":1,"nodeType":"ImportDeclaration","messageId":"notAllowed","endLine":6,"endColumn":25},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":8,"column":12,"nodeType":"Identifier","messageId":"undef","endLine":8,"endColumn":19},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":9,"column":19,"nodeType":"Identifier","messageId":"undef","endLine":9,"endColumn":26},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":10,"column":17,"nodeType":"Identifier","messageId":"undef","endLine":10,"endColumn":24},{"ruleId":"no-undef","severity":2,"message":"'__dirname' is not defined.","line":16,"column":26,"nodeType":"Identifier","messageId":"undef","endLine":16,"endColumn":35},{"ruleId":"no-undef","severity":2,"message":"'__dirname' is not defined.","line":24,"column":26,"nodeType":"Identifier","messageId":"undef","endLine":24,"endColumn":35},{"ruleId":"no-undef","severity":2,"message":"'__dirname' is not defined.","line":32,"column":26,"nodeType":"Identifier","messageId":"undef","endLine":32,"endColumn":35},{"ruleId":"no-undef","severity":2,"message":"'__dirname' is not defined.","line":40,"column":26,"nodeType":"Identifier","messageId":"undef","endLine":40,"endColumn":35},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":56,"column":30,"nodeType":"Identifier","messageId":"undef","endLine":56,"endColumn":37},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":67,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":67,"endColumn":20,"suggestions":[{"fix":{"range":[1765,1825],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-undef","severity":2,"message":"'__dirname' is not defined.","line":115,"column":21,"nodeType":"Identifier","messageId":"undef","endLine":115,"endColumn":30},{"ruleId":"no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":147,"column":22,"nodeType":"Identifier","messageId":"unusedVar","endLine":147,"endColumn":27},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":160,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":160,"endColumn":20,"suggestions":[{"fix":{"range":[4692,4740],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"class-methods-use-this","severity":2,"message":"Expected 'this' to be used by class method 'getTemplateDescription'.","line":180,"column":3,"nodeType":"FunctionExpression","messageId":"missingThis","endLine":180,"endColumn":25},{"ruleId":"class-methods-use-this","severity":2,"message":"Expected 'this' to be used by class async method 'checkRateLimit'.","line":205,"column":3,"nodeType":"FunctionExpression","messageId":"missingThis","endLine":205,"endColumn":23},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":246,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":246,"endColumn":20,"suggestions":[{"fix":{"range":[6788,6847],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":257,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":257,"endColumn":19},{"ruleId":"no-undef","severity":2,"message":"'__dirname' is not defined.","line":268,"column":35,"nodeType":"Identifier","messageId":"undef","endLine":268,"endColumn":44},{"ruleId":"no-restricted-syntax","severity":2,"message":"iterators/generators require regenerator-runtime, which is too heavyweight for this guide to allow them. Separately, loops should be avoided in favor of array iterations.","line":277,"column":7,"nodeType":"ForOfStatement","messageId":"restrictedSyntax","endLine":287,"endColumn":8},{"ruleId":"no-unused-vars","severity":1,"message":"'fontId' is assigned a value but never used.","line":277,"column":19,"nodeType":"Identifier","messageId":"unusedVar","endLine":277,"endColumn":25,"suggestions":[{"messageId":"removeVar","data":{"varName":"fontId"},"fix":{"range":[7613,7619],"text":""},"desc":"Remove unused variable 'fontId'."}]},{"ruleId":"no-undef","severity":2,"message":"'__dirname' is not defined.","line":278,"column":38,"nodeType":"Identifier","messageId":"undef","endLine":278,"endColumn":47},{"ruleId":"no-await-in-loop","severity":2,"message":"Unexpected `await` inside a loop.","line":282,"column":11,"nodeType":"AwaitExpression","messageId":"unexpectedAwait","endLine":282,"endColumn":38},{"ruleId":"no-await-in-loop","severity":2,"message":"Unexpected `await` inside a loop.","line":283,"column":11,"nodeType":"AwaitExpression","messageId":"unexpectedAwait","endLine":283,"endColumn":50},{"ruleId":"no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":284,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":284,"endColumn":23},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":285,"column":11,"nodeType":"MemberExpression","messageId":"unexpected","endLine":285,"endColumn":23,"suggestions":[{"fix":{"range":[7939,8004],"text":""},"messageId":"removeConsole","data":{"propertyName":"warn"},"desc":"Remove the console.warn()."}]},{"ruleId":"no-restricted-syntax","severity":2,"message":"iterators/generators require regenerator-runtime, which is too heavyweight for this guide to allow them. Separately, loops should be avoided in favor of array iterations.","line":290,"column":7,"nodeType":"ForOfStatement","messageId":"restrictedSyntax","endLine":303,"endColumn":8},{"ruleId":"no-undef","severity":2,"message":"'__dirname' is not defined.","line":292,"column":38,"nodeType":"Identifier","messageId":"undef","endLine":292,"endColumn":47},{"ruleId":"no-await-in-loop","severity":2,"message":"Unexpected `await` inside a loop.","line":296,"column":11,"nodeType":"AwaitExpression","messageId":"unexpectedAwait","endLine":296,"endColumn":38},{"ruleId":"no-await-in-loop","severity":2,"message":"Unexpected `await` inside a loop.","line":297,"column":11,"nodeType":"AwaitExpression","messageId":"unexpectedAwait","endLine":297,"endColumn":50},{"ruleId":"no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":300,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":300,"endColumn":23},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":301,"column":11,"nodeType":"MemberExpression","messageId":"unexpected","endLine":301,"endColumn":23,"suggestions":[{"fix":{"range":[8594,8665],"text":""},"messageId":"removeConsole","data":{"propertyName":"warn"},"desc":"Remove the console.warn()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":305,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":305,"endColumn":20,"suggestions":[{"fix":{"range":[8712,8759],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-restricted-syntax","severity":2,"message":"iterators/generators require regenerator-runtime, which is too heavyweight for this guide to allow them. Separately, loops should be avoided in favor of array iterations.","line":320,"column":7,"nodeType":"ForOfStatement","messageId":"restrictedSyntax","endLine":329,"endColumn":8},{"ruleId":"no-await-in-loop","severity":2,"message":"Unexpected `await` inside a loop.","line":323,"column":25,"nodeType":"AwaitExpression","messageId":"unexpectedAwait","endLine":323,"endColumn":48},{"ruleId":"no-await-in-loop","severity":2,"message":"Unexpected `await` inside a loop.","line":326,"column":13,"nodeType":"AwaitExpression","messageId":"unexpectedAwait","endLine":326,"endColumn":54},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":331,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":331,"endColumn":20,"suggestions":[{"fix":{"range":[9401,9458],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":336,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":336,"endColumn":7}],"suppressedMessages":[],"errorCount":25,"fatalErrorCount":0,"warningCount":12,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Writing Service - Create custom text images and handwriting\n * Implements writing/handwriting features with multiple fonts and templates\n */\n\nimport path from 'path';\n\nconst fs = require('fs').promises;\nconst { spawn } = require('child_process');\nconst context = require('../../context');\n\nclass WritingService {\n  constructor() {\n    this.templates = {\n      'buku-kiri': {\n        image: path.join(__dirname, '../../assets/writing/book-left.jpg'),\n        font: 'Indie-Flower.ttf',\n        position: { x: 140, y: 153 },\n        size: '960x1280',\n        pointsize: 23,\n        interline: 2,\n      },\n      'buku-kanan': {\n        image: path.join(__dirname, '../../assets/writing/book-right.jpg'),\n        font: 'Indie-Flower.ttf',\n        position: { x: 128, y: 129 },\n        size: '960x1280',\n        pointsize: 23,\n        interline: 2,\n      },\n      'folio-kiri': {\n        image: path.join(__dirname, '../../assets/writing/folio-left.jpg'),\n        font: 'Indie-Flower.ttf',\n        position: { x: 48, y: 185 },\n        size: '1720x1280',\n        pointsize: 23,\n        interline: 4,\n      },\n      'folio-kanan': {\n        image: path.join(__dirname, '../../assets/writing/folio-right.jpg'),\n        font: 'Indie-Flower.ttf',\n        position: { x: 89, y: 190 },\n        size: '1720x1280',\n        pointsize: 23,\n        interline: 4,\n      },\n    };\n\n    this.fonts = {\n      indie: 'Indie-Flower.ttf',\n      impact: 'impact.ttf',\n      obelix: 'ObelixProBIt-cyr.ttf',\n    };\n\n    this.rateLimits = new Map();\n    this.tempDir = path.join(process.cwd(), 'database', 'writing');\n  }\n\n  /**\n   * Initialize service\n   */\n  async initialize() {\n    try {\n      await this.ensureTempDir();\n      await this.ensureAssets();\n    } catch (error) {\n      console.error('Error initializing writing service:', error);\n    }\n  }\n\n  /**\n   * Create writing/handwriting image\n   * @param {string} text - Text to write\n   * @param {string} template - Template type (buku-kiri, buku-kanan, folio-kiri, folio-kanan)\n   * @param {string} font - Font type (indie, impact, obelix)\n   */\n  async createWriting(text, template = 'buku-kiri', font = 'indie') {\n    try {\n      if (!text || text.length === 0) {\n        throw new Error('Please provide text to write');\n      }\n\n      if (text.length > 500) {\n        throw new Error('Text too long. Maximum 500 characters.');\n      }\n\n      // Check rate limit from database\n      if (!(await this.checkRateLimit('writing'))) {\n        throw new Error('Rate limit exceeded. Please wait before creating new writing.');\n      }\n\n      const templateConfig = this.templates[template];\n      const fontFile = this.fonts[font];\n\n      if (!templateConfig) {\n        throw new Error(`Invalid template: ${template}`);\n      }\n\n      if (!fontFile) {\n        throw new Error(`Invalid font: ${font}`);\n      }\n\n      // Process text for ImageMagick\n      const processedText = text.replace(/(\\S+\\s*){1,9}/g, '$&\\n');\n      const fixHeight = processedText.split('\\n').slice(0, 31).join('\\n');\n\n      const tempDir = await this.ensureTempDir();\n      const outputPath = path.join(tempDir, `writing_${Date.now()}.jpg`);\n\n      // Use ImageMagick to create the writing\n      return new Promise((resolve, reject) => {\n        const convert = spawn('convert', [\n          templateConfig.image,\n          '-font',\n          path.join(__dirname, '../../assets/fonts', fontFile),\n          '-size',\n          templateConfig.size,\n          '-pointsize',\n          templateConfig.pointsize,\n          '-interline-spacing',\n          templateConfig.interline,\n          '-annotate',\n          `+${templateConfig.position.x}+${templateConfig.position.y}`,\n          fixHeight,\n          outputPath,\n        ]);\n\n        let stderr = '';\n        convert.stderr.on('data', data => {\n          stderr += data.toString();\n        });\n\n        convert.on('close', async code => {\n          if (code === 0) {\n            try {\n              const resultBuffer = await fs.readFile(outputPath);\n              await fs.unlink(outputPath).catch(() => {});\n\n              resolve({\n                success: true,\n                buffer: resultBuffer,\n                text,\n                template,\n                font,\n                message: `Berhasil membuat tulisan: \"${text.substring(0, 50)}${text.length > 50 ? '...' : ''}\"`,\n              });\n            } catch (error) {\n              reject(new Error('Failed to read output file'));\n            }\n          } else {\n            reject(new Error(`ImageMagick error: ${stderr}`));\n          }\n        });\n\n        convert.on('error', error => {\n          reject(error);\n        });\n      });\n    } catch (error) {\n      console.error('Error creating writing:', error);\n      throw error;\n    }\n  }\n\n  /**\n   * Get available templates\n   */\n  getAvailableTemplates() {\n    return Object.keys(this.templates).map(template => ({\n      id: template,\n      name: template.replace('-', ' ').toUpperCase(),\n      description: this.getTemplateDescription(template),\n    }));\n  }\n\n  /**\n   * Get template description\n   * @param {string} template - Template ID\n   */\n  getTemplateDescription(template) {\n    const descriptions = {\n      'buku-kiri': 'Left page book template',\n      'buku-kanan': 'Right page book template',\n      'folio-kiri': 'Left page folio template',\n      'folio-kanan': 'Right page folio template',\n    };\n    return descriptions[template] || 'Unknown template';\n  }\n\n  /**\n   * Get available fonts\n   */\n  getAvailableFonts() {\n    return Object.entries(this.fonts).map(([id, file]) => ({\n      id,\n      name: id.charAt(0).toUpperCase() + id.slice(1),\n      file,\n    }));\n  }\n\n  /**\n   * Check rate limit for writing operations (now uses database)\n   * @param {string} operation - Operation type\n   */\n  async checkRateLimit(operation) {\n    const key = `writing_${operation}`;\n    const now = Date.now();\n    const cooldown = 30000; // 30 seconds\n    const maxPerCooldown = 3;\n\n    try {\n      const existingLimit = await context.database.rateLimit.findUnique({\n        where: { key },\n      });\n\n      if (!existingLimit || now - existingLimit.lastUsed.getTime() > cooldown) {\n        await context.database.rateLimit.upsert({\n          where: { key },\n          update: {\n            count: 1,\n            lastUsed: new Date(),\n          },\n          create: {\n            key,\n            count: 1,\n            lastUsed: new Date(),\n          },\n        });\n        return true;\n      }\n\n      if (existingLimit.count >= maxPerCooldown) {\n        return false;\n      }\n\n      await context.database.rateLimit.update({\n        where: { key },\n        data: {\n          count: { increment: 1 },\n          lastUsed: new Date(),\n        },\n      });\n\n      return true;\n    } catch (error) {\n      console.error('Error checking writing rate limit:', error);\n      return false; // Fail safe\n    }\n  }\n\n  /**\n   * Ensure temp directory exists\n   */\n  async ensureTempDir() {\n    try {\n      await fs.access(this.tempDir);\n    } catch (error) {\n      await fs.mkdir(this.tempDir, { recursive: true });\n    }\n    return this.tempDir;\n  }\n\n  /**\n   * Ensure assets directory and files exist\n   */\n  async ensureAssets() {\n    try {\n      const assetsDir = path.join(__dirname, '../../assets');\n      const fontsDir = path.join(assetsDir, 'fonts');\n      const writingDir = path.join(assetsDir, 'writing');\n\n      // Create directories if they don't exist\n      await fs.mkdir(fontsDir, { recursive: true });\n      await fs.mkdir(writingDir, { recursive: true });\n\n      // Copy font files if they don't exist\n      for (const [fontId, fontFile] of Object.entries(this.fonts)) {\n        const sourcePath = path.join(__dirname, '../../lib/fonts', fontFile);\n        const destPath = path.join(fontsDir, fontFile);\n\n        try {\n          await fs.access(sourcePath);\n          await fs.copyFile(sourcePath, destPath);\n        } catch (error) {\n          console.warn(`Font file ${fontFile} not found at ${sourcePath}`);\n        }\n      }\n\n      // Copy template images if they don't exist\n      for (const [templateId, config] of Object.entries(this.templates)) {\n        const imageName = config.image.split('/').pop();\n        const sourcePath = path.join(__dirname, '../../lib/writing', imageName);\n        const destPath = path.join(writingDir, imageName);\n\n        try {\n          await fs.access(sourcePath);\n          await fs.copyFile(sourcePath, destPath);\n          // Update config to point to new location\n          this.templates[templateId].image = destPath;\n        } catch (error) {\n          console.warn(`Template image ${imageName} not found at ${sourcePath}`);\n        }\n      }\n    } catch (error) {\n      console.error('Error ensuring assets:', error);\n    }\n  }\n\n  /**\n   * Clean up old writing files\n   */\n  async cleanupOldFiles() {\n    try {\n      const tempDir = await this.ensureTempDir();\n      const files = await fs.readdir(tempDir);\n\n      const now = Date.now();\n      const maxAge = 60 * 60 * 1000; // 1 hour\n\n      for (const file of files) {\n        if (file.startsWith('writing_') && file.endsWith('.jpg')) {\n          const filePath = path.join(tempDir, file);\n          const stats = await fs.stat(filePath);\n\n          if (now - stats.mtime.getTime() > maxAge) {\n            await fs.unlink(filePath).catch(() => {});\n          }\n        }\n      }\n    } catch (error) {\n      console.error('Error cleaning up writing files:', error);\n    }\n  }\n}\n\nmodule.exports = new WritingService();\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\src\\utils\\baileysUtils.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":13,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":13,"endColumn":7}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const getJid = input => {\n  if (input.endsWith('@s.whatsapp.net') || input.endsWith('@g.us')) {\n    return input;\n  }\n  return `${input}@s.whatsapp.net`; // Default to user JID\n};\n\nconst getSender = msg =>\n  msg.key.fromMe ? getJid(msg.key.remoteJid) : getJid(msg.key.participant || msg.key.remoteJid);\n\nconst getGroup = msg => (msg.key.remoteJid.endsWith('@g.us') ? msg.key.remoteJid : null);\n\nmodule.exports = {\n  getJid,\n  getSender,\n  getGroup,\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\src\\utils\\consoleSuppressor.js","messages":[{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":8,"column":31,"nodeType":"MemberExpression","messageId":"unexpected","endLine":8,"endColumn":42},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":9,"column":32,"nodeType":"MemberExpression","messageId":"unexpected","endLine":9,"endColumn":44},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":10,"column":32,"nodeType":"MemberExpression","messageId":"unexpected","endLine":10,"endColumn":44},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":11,"column":33,"nodeType":"MemberExpression","messageId":"unexpected","endLine":11,"endColumn":46},{"ruleId":"no-unused-vars","severity":1,"message":"'methodName' is defined but never used. Allowed unused args must match /^_/u.","line":23,"column":24,"nodeType":"Identifier","messageId":"unusedVar","endLine":23,"endColumn":34,"suggestions":[{"messageId":"removeVar","data":{"varName":"methodName"},"fix":{"range":[670,682],"text":""},"desc":"Remove unused variable 'methodName'."}]},{"ruleId":"no-plusplus","severity":2,"message":"Unary operator '++' used.","line":39,"column":11,"nodeType":"UpdateExpression","messageId":"unexpectedUnaryOp","endLine":39,"endColumn":28},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":51,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":51,"endColumn":16},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":52,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":52,"endColumn":17},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":53,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":53,"endColumn":17},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":54,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":54,"endColumn":18},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":62,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":62,"endColumn":20,"suggestions":[{"fix":{"range":[1877,1955],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":76,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":76,"endColumn":16},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":77,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":77,"endColumn":17},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":78,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":78,"endColumn":17},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":79,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":79,"endColumn":18},{"ruleId":"no-unused-vars","severity":1,"message":"'suppressPatterns' is assigned a value but never used.","line":86,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":86,"endColumn":27,"suggestions":[{"messageId":"removeVar","data":{"varName":"suppressPatterns"},"fix":{"range":[2440,2586],"text":""},"desc":"Remove unused variable 'suppressPatterns'."}]},{"ruleId":"no-plusplus","severity":2,"message":"Unary operator '++' used.","line":100,"column":11,"nodeType":"UpdateExpression","messageId":"unexpectedUnaryOp","endLine":100,"endColumn":25},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":113,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":113,"endColumn":16},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":114,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":114,"endColumn":17},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":120,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":120,"endColumn":18,"suggestions":[{"fix":{"range":[3443,3523],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":129,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":129,"endColumn":7}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":18,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Console Output Suppressor Utility\n * Temporarily suppresses specific console messages during operations\n */\n\nclass ConsoleSuppressor {\n  constructor() {\n    this.originalConsoleLog = console.log;\n    this.originalConsoleInfo = console.info;\n    this.originalConsoleWarn = console.warn;\n    this.originalConsoleError = console.error;\n  }\n\n  /**\n   * Suppress console output for specific patterns during a function execution\n   */\n  async suppressDuringExecution(operation, suppressPatterns = [], showSummary = true) {\n    let suppressedCount = 0;\n    const suppressedMessages = [];\n\n    // Override console methods\n    const overrideConsole =\n      (originalMethod, methodName) =>\n      (...args) => {\n        const message = args.join(' ');\n\n        // Check if message matches any suppress pattern\n        const shouldSuppress = suppressPatterns.some(pattern => {\n          if (typeof pattern === 'string') {\n            return message.includes(pattern);\n          }\n          if (pattern instanceof RegExp) {\n            return pattern.test(message);\n          }\n          return false;\n        });\n\n        if (shouldSuppress) {\n          suppressedCount++;\n          if (showSummary) {\n            suppressedMessages.push(message);\n          }\n          return; // Suppress the message\n        }\n\n        // Allow the message through\n        originalMethod.apply(console, args);\n      };\n\n    // Apply overrides\n    console.log = overrideConsole(this.originalConsoleLog, 'log');\n    console.info = overrideConsole(this.originalConsoleInfo, 'info');\n    console.warn = overrideConsole(this.originalConsoleWarn, 'warn');\n    console.error = overrideConsole(this.originalConsoleError, 'error');\n\n    try {\n      // Execute the operation\n      const result = await operation();\n\n      // Show summary if requested\n      if (showSummary && suppressedCount > 0) {\n        console.log(`âœ… Operation completed (${suppressedCount} messages suppressed)`);\n      }\n\n      return result;\n    } finally {\n      // Always restore original console methods\n      this.restore();\n    }\n  }\n\n  /**\n   * Restore original console methods\n   */\n  restore() {\n    console.log = this.originalConsoleLog;\n    console.info = this.originalConsoleInfo;\n    console.warn = this.originalConsoleWarn;\n    console.error = this.originalConsoleError;\n  }\n\n  /**\n   * Suppress command handler loading messages\n   */\n  async suppressCommandLoading(operation) {\n    const suppressPatterns = [\n      '[command-handler] Loaded Command -',\n      '[command-handler] Loaded Hears -',\n      '[command-handler]',\n    ];\n\n    let commandCount = 0;\n\n    // Count commands while suppressing\n    const countingOverride =\n      originalMethod =>\n      (...args) => {\n        const message = args.join(' ');\n        if (message.includes('[command-handler] Loaded Command -')) {\n          commandCount++;\n          return; // Suppress\n        }\n        if (message.includes('[command-handler] Loaded Hears -')) {\n          return; // Suppress\n        }\n        if (message.includes('[command-handler]')) {\n          return; // Suppress other command-handler messages\n        }\n        originalMethod.apply(console, args);\n      };\n\n    // Apply counting overrides\n    console.log = countingOverride(this.originalConsoleLog);\n    console.info = countingOverride(this.originalConsoleInfo);\n\n    try {\n      const result = await operation();\n\n      // Show simple success message\n      console.log(`âœ… Command handler loaded successfully (${commandCount} commands)`);\n\n      return result;\n    } finally {\n      this.restore();\n    }\n  }\n}\n\nmodule.exports = ConsoleSuppressor;\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\src\\utils\\createBotContext.js","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'moment' is assigned a value but never used.","line":1,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13,"suggestions":[{"messageId":"removeVar","data":{"varName":"moment"},"fix":{"range":[0,42],"text":""},"desc":"Remove unused variable 'moment'."}]},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":16,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":23},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":2,"column":41,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":48},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":3,"column":22,"nodeType":"Identifier","messageId":"undef","endLine":3,"endColumn":29},{"ruleId":"import-x/extensions","severity":2,"message":"Unexpected use of file extension \"js\" for \"../middleware/cooldown.js\"","line":3,"column":30,"nodeType":"Literal","messageId":"unexpected","endLine":3,"endColumn":57,"suggestions":[{"fix":{"range":[175,202],"text":"'../middleware/cooldown'"},"messageId":"removeUnexpected","data":{"extension":"js","importPath":"../middleware/cooldown.js","fixedImportPath":"../middleware/cooldown"},"desc":"Remove unexpected \"js\" file extension from \"../middleware/cooldown.js\" into \"../middleware/cooldown\""}]},{"ruleId":"no-unused-vars","severity":1,"message":"'formatter' is assigned a value but never used.","line":11,"column":36,"nodeType":"Identifier","messageId":"unusedVar","endLine":11,"endColumn":45,"suggestions":[{"messageId":"removeVar","data":{"varName":"formatter"},"fix":{"range":[377,388],"text":""},"desc":"Remove unused variable 'formatter'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'groupJid' is assigned a value but never used.","line":16,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":16,"endColumn":17,"suggestions":[{"messageId":"removeVar","data":{"varName":"groupJid"},"fix":{"range":[581,626],"text":""},"desc":"Remove unused variable 'groupJid'."}]},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":26,"column":20,"nodeType":"Identifier","messageId":"undef","endLine":26,"endColumn":27},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":36,"column":20,"nodeType":"Identifier","messageId":"undef","endLine":36,"endColumn":27},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":49,"column":20,"nodeType":"Identifier","messageId":"undef","endLine":49,"endColumn":27},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":146,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":146,"endColumn":7}],"suppressedMessages":[],"errorCount":8,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const moment = require('moment-timezone'); // Assuming moment-timezone is used\nconst { getJid, getSender, getGroup } = require('./baileysUtils');\nconst { Cooldown } = require('../middleware/cooldown.js'); // Re-adding the import\n\nconst createBotContext = async (\n  botInstance,\n  rawBaileysMessage,\n  originalContext,\n  requestInfo = {}\n) => {\n  const { database, tools, config, formatter } = originalContext;\n\n  const senderJid = getSender(rawBaileysMessage);\n  const senderId = getSender(rawBaileysMessage);\n  const isGroup = rawBaileysMessage.key.remoteJid.endsWith('@g.us');\n  const groupJid = getGroup(rawBaileysMessage);\n  const groupId = getGroup(rawBaileysMessage);\n\n  // Instantiate Cooldown\n  const cooldown = new Cooldown(); // New: Instantiate Cooldown\n\n  // Simulate ctx.reply\n  const reply = async content => {\n    const messageContent = typeof content === 'string' ? { text: content } : content;\n    // This will call the Next.js API route to send the message\n    await fetch(`${process.env.BOT_SERVICE_URL}/send`, {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({ to: rawBaileysMessage.key.remoteJid, message: messageContent }),\n    });\n  };\n\n  // Simulate ctx.replyReact\n  const replyReact = async emoji => {\n    // This will call the Next.js API route to send a reaction\n    await fetch(`${process.env.BOT_SERVICE_URL}/send`, {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({\n        to: rawBaileysMessage.key.remoteJid,\n        message: { react: { text: emoji, key: rawBaileysMessage.key } },\n      }),\n    });\n  };\n\n  // Simulate ctx.simulateTyping\n  const simulateTyping = async () => {\n    // This will call the Next.js API route to send a typing status\n    await fetch(`${process.env.BOT_SERVICE_URL}/send`, {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({ to: rawBaileysMessage.key.remoteJid, message: { typing: true } }),\n    });\n  };\n\n  // Implement ctx.group() methods using Prisma\n  const group = (jid = groupId) => ({\n    isAdmin: async userJid => {\n      if (!jid) return false; // Not a group\n      const user = await database.prisma.user.findUnique({ where: { jid: userJid } });\n      if (!user) return false;\n      const userGroup = await database.prisma.userGroup.findUnique({\n        where: { userId_groupId: { userId: user.id, groupId: jid } },\n      });\n      return userGroup ? userGroup.role === 'admin' || userGroup.role === 'owner' : false;\n    },\n    isBotAdmin: async () => {\n      if (!jid) return false; // Not a group\n      const botJid = config.bot.jid; // Assuming bot JID is in config\n      const botUser = await database.prisma.user.findUnique({ where: { jid: botJid } });\n      if (!botUser) return false;\n      const botUserGroup = await database.prisma.userGroup.findUnique({\n        where: { userId_groupId: { userId: botUser.id, groupId: jid } },\n      });\n      return botUserGroup ? botUserGroup.role === 'admin' || botUserGroup.role === 'owner' : false;\n    },\n    members: async () => {\n      if (!jid) return []; // Not a group\n      const groupMembers = await database.prisma.userGroup.findMany({\n        where: { groupId: jid },\n        include: { user: true },\n      });\n      return groupMembers.map(gm => ({\n        jid: gm.user.jid,\n        id: gm.user.id,\n        role: gm.role,\n      }));\n    },\n  });\n\n  // Simulate ctx.used (command parsing)\n  const used = {\n    command:\n      rawBaileysMessage.message?.conversation\n        ?.split(' ')[0]\n        ?.toLowerCase()\n        .substring(config.bot.prefix.length) || '',\n    prefix: config.bot.prefix,\n    args: rawBaileysMessage.message?.conversation?.split(' ').slice(1) || [],\n    text: rawBaileysMessage.message?.conversation || '',\n  };\n\n  // Simulate ctx.bot.cmd.get\n  const getCommand = commandName =>\n    // This assumes originalContext.bot.cmd is available and has a get method\n    originalContext.bot.cmd.get(commandName);\n  const ctx = {\n    bot: {\n      ...botInstance,\n      cmd: {\n        get: getCommand,\n        values: () => originalContext.bot.cmd.values(), // Assuming this is needed\n      },\n      context: originalContext, // Provide access to original context\n    },\n    msg: rawBaileysMessage,\n    isGroup: () => isGroup,\n    isPrivate: () => !isGroup,\n    groupId, // Add groupId to ctx\n    sender: { jid: senderJid, id: senderId }, // Assuming senderId is also needed\n    getId: jid => getJid(jid),\n    group,\n    reply,\n    replyReact,\n    simulateTyping,\n    used,\n    cooldown, // New: Add cooldown instance to ctx\n    // Add other properties as needed based on your middleware's usage\n    ip: requestInfo.ip || 'unknown',\n    userAgent: requestInfo.userAgent || 'WhatsApp',\n    sessionId: requestInfo.sessionId || 'unknown',\n    location: requestInfo.location || 'unknown',\n  };\n\n  // Re-evaluate isOwner and isAdmin based on the new ctx structure\n  const isOwner = tools.cmd.isOwner(config, senderId, rawBaileysMessage.key.id);\n  const isAdmin = isGroup ? await ctx.group().isAdmin(senderId) : false; // Use senderId for isAdmin check\n\n  // Add these to ctx if they are used directly by commands\n  ctx.isOwner = isOwner;\n  ctx.isAdmin = isAdmin;\n\n  return ctx;\n};\n\nmodule.exports = createBotContext;\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\src\\utils\\logger.js","messages":[{"ruleId":"import-x/no-import-module-exports","severity":2,"message":"Cannot use import declarations in modules that export using CommonJS (module.exports = 'foo' or exports.bar = 'hi')","line":1,"column":1,"nodeType":"ImportDeclaration","messageId":"notAllowed","endLine":1,"endColumn":25},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":3,"column":17,"nodeType":"Identifier","messageId":"undef","endLine":3,"endColumn":24},{"ruleId":"no-unused-vars","severity":1,"message":"'showLogs' is assigned a value but never used.","line":33,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":33,"endColumn":15,"suggestions":[{"messageId":"removeVar","data":{"varName":"showLogs"},"fix":{"range":[645,783],"text":""},"desc":"Remove unused variable 'showLogs'."}]},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":34,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":34,"endColumn":10},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":40,"column":10,"nodeType":"Identifier","messageId":"undef","endLine":40,"endColumn":17},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":52,"column":27,"nodeType":"Identifier","messageId":"undef","endLine":52,"endColumn":34},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":63,"column":27,"nodeType":"Identifier","messageId":"undef","endLine":63,"endColumn":34},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":74,"column":27,"nodeType":"Identifier","messageId":"undef","endLine":74,"endColumn":34},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":82,"column":12,"nodeType":"Identifier","messageId":"undef","endLine":82,"endColumn":19},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":84,"column":27,"nodeType":"Identifier","messageId":"undef","endLine":84,"endColumn":34},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":180,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":180,"endColumn":7}],"suppressedMessages":[],"errorCount":10,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import path from 'path';\n\nconst winston = require('winston');\n\n// Define log levels\nconst levels = {\n  error: 0,\n  warn: 1,\n  info: 2,\n  http: 3,\n  debug: 4,\n};\n\n// Define colors for each level\nconst colors = {\n  error: 'red',\n  warn: 'yellow',\n  info: 'green',\n  http: 'magenta',\n  debug: 'blue',\n};\n\nwinston.addColors(colors);\n\n// Define the format for logs\nconst format = winston.format.combine(\n  winston.format.timestamp({ format: 'YYYY-MM-DD HH:mm:ss:ms' }),\n  winston.format.colorize({ all: true }),\n  winston.format.printf(info => `${info.timestamp} ${info.level}: ${info.message}`)\n);\n\n// Define which logs to show based on environment\nconst showLogs =\n  process.env.NODE_ENV === 'production'\n    ? ['error', 'warn', 'info']\n    : ['error', 'warn', 'info', 'http', 'debug'];\n\n// Create the logger\nconst logger = winston.createLogger({\n  level: process.env.LOG_LEVEL || 'info',\n  levels,\n  format,\n  transports: [\n    // Console transport for development\n    new winston.transports.Console({\n      level: 'debug',\n      format: winston.format.combine(winston.format.colorize(), winston.format.simple()),\n    }),\n\n    // File transport for all logs\n    new winston.transports.File({\n      filename: path.join(process.cwd(), 'logs', 'app.log'),\n      level: 'info',\n      format: winston.format.combine(\n        winston.format.timestamp(),\n        winston.format.errors({ stack: true }),\n        winston.format.json()\n      ),\n    }),\n\n    // Separate file for errors\n    new winston.transports.File({\n      filename: path.join(process.cwd(), 'logs', 'error.log'),\n      level: 'error',\n      format: winston.format.combine(\n        winston.format.timestamp(),\n        winston.format.errors({ stack: true }),\n        winston.format.json()\n      ),\n    }),\n\n    // HTTP requests log\n    new winston.transports.File({\n      filename: path.join(process.cwd(), 'logs', 'http.log'),\n      level: 'http',\n      format: winston.format.combine(winston.format.timestamp(), winston.format.json()),\n    }),\n  ],\n});\n\n// Create logs directory if it doesn't exist\nconst fs = require('fs');\n\nconst logsDir = path.join(process.cwd(), 'logs');\nif (!fs.existsSync(logsDir)) {\n  fs.mkdirSync(logsDir, { recursive: true });\n}\n\n// Enhanced logger with additional methods\nconst enhancedLogger = {\n  // Standard logging methods\n  error: (message, meta = {}) => {\n    logger.error(message, meta);\n  },\n\n  warn: (message, meta = {}) => {\n    logger.warn(message, meta);\n  },\n\n  info: (message, meta = {}) => {\n    logger.info(message, meta);\n  },\n\n  http: (message, meta = {}) => {\n    logger.http(message, meta);\n  },\n\n  debug: (message, meta = {}) => {\n    logger.debug(message, meta);\n  },\n\n  // Specialized methods for bot operations\n  command: (command, userId, success = true, executionTime = null, error = null) => {\n    const level = success ? 'info' : 'error';\n    const message = `Command: ${command} | User: ${userId} | Success: ${success}`;\n    const meta = {\n      command,\n      userId,\n      success,\n      executionTime,\n      error: error?.message || null,\n      stack: error?.stack || null,\n    };\n\n    logger.log(level, message, meta);\n  },\n\n  userActivity: (userId, action, details = {}) => {\n    const message = `User Activity: ${action} | User: ${userId}`;\n    logger.info(message, { userId, action, ...details });\n  },\n\n  groupActivity: (groupId, action, userId, details = {}) => {\n    const message = `Group Activity: ${action} | Group: ${groupId} | User: ${userId}`;\n    logger.info(message, { groupId, userId, action, ...details });\n  },\n\n  apiRequest: (method, url, statusCode, responseTime, userId = null) => {\n    const message = `${method} ${url} ${statusCode} ${responseTime}ms`;\n    const meta = {\n      method,\n      url,\n      statusCode,\n      responseTime,\n      userId,\n    };\n\n    const level = statusCode >= 400 ? 'warn' : 'http';\n    logger.log(level, message, meta);\n  },\n\n  performance: (operation, duration, metadata = {}) => {\n    const message = `Performance: ${operation} took ${duration}ms`;\n    logger.info(message, { operation, duration, ...metadata });\n  },\n\n  security: (event, userId = null, details = {}) => {\n    const message = `Security Event: ${event}`;\n    logger.warn(message, { userId, event, ...details });\n  },\n\n  // Method to log with context\n  withContext: context => ({\n    error: (message, meta = {}) => enhancedLogger.error(message, { ...context, ...meta }),\n    warn: (message, meta = {}) => enhancedLogger.warn(message, { ...context, ...meta }),\n    info: (message, meta = {}) => enhancedLogger.info(message, { ...context, ...meta }),\n    debug: (message, meta = {}) => enhancedLogger.debug(message, { ...context, ...meta }),\n    command: (command, userId, success, executionTime, error) =>\n      enhancedLogger.command(command, userId, success, executionTime, error),\n  }),\n\n  // Stream for Morgan HTTP logging\n  stream: {\n    write: message => {\n      logger.http(message.trim());\n    },\n  },\n};\n\nmodule.exports = enhancedLogger;\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\src\\utils\\migration.js","messages":[{"ruleId":"import-x/no-import-module-exports","severity":2,"message":"Cannot use import declarations in modules that export using CommonJS (module.exports = 'foo' or exports.bar = 'hi')","line":1,"column":1,"nodeType":"ImportDeclaration","messageId":"notAllowed","endLine":1,"endColumn":25},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":3,"column":25,"nodeType":"Identifier","messageId":"undef","endLine":3,"endColumn":32},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":4,"column":16,"nodeType":"Identifier","messageId":"undef","endLine":4,"endColumn":23},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":5,"column":12,"nodeType":"Identifier","messageId":"undef","endLine":5,"endColumn":19},{"ruleId":"import-x/order","severity":2,"message":"`fs` import should occur before import of `../services/database`","line":5,"column":12,"nodeType":"CallExpression","messageId":"order","endLine":5,"endColumn":25},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":10,"column":36,"nodeType":"Identifier","messageId":"undef","endLine":10,"endColumn":43},{"ruleId":"no-restricted-syntax","severity":2,"message":"iterators/generators require regenerator-runtime, which is too heavyweight for this guide to allow them. Separately, loops should be avoided in favor of array iterations.","line":54,"column":7,"nodeType":"ForOfStatement","messageId":"restrictedSyntax","endLine":56,"endColumn":8},{"ruleId":"no-await-in-loop","severity":2,"message":"Unexpected `await` inside a loop.","line":55,"column":9,"nodeType":"AwaitExpression","messageId":"unexpectedAwait","endLine":55,"endColumn":51},{"ruleId":"no-restricted-syntax","severity":2,"message":"iterators/generators require regenerator-runtime, which is too heavyweight for this guide to allow them. Separately, loops should be avoided in favor of array iterations.","line":78,"column":7,"nodeType":"ForOfStatement","messageId":"restrictedSyntax","endLine":82,"endColumn":8},{"ruleId":"no-await-in-loop","severity":2,"message":"Unexpected `await` inside a loop.","line":80,"column":11,"nodeType":"AwaitExpression","messageId":"unexpectedAwait","endLine":80,"endColumn":64},{"ruleId":"no-shadow","severity":2,"message":"'fs' is already declared in the upper scope on line 5 column 7.","line":151,"column":13,"nodeType":"Identifier","messageId":"noShadow","endLine":151,"endColumn":15},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":151,"column":18,"nodeType":"Identifier","messageId":"undef","endLine":151,"endColumn":25},{"ruleId":"no-restricted-syntax","severity":2,"message":"iterators/generators require regenerator-runtime, which is too heavyweight for this guide to allow them. Separately, loops should be avoided in favor of array iterations.","line":162,"column":9,"nodeType":"ForOfStatement","messageId":"restrictedSyntax","endLine":174,"endColumn":10},{"ruleId":"no-await-in-loop","severity":2,"message":"Unexpected `await` inside a loop.","line":163,"column":11,"nodeType":"AwaitExpression","messageId":"unexpectedAwait","endLine":173,"endColumn":13},{"ruleId":"no-restricted-syntax","severity":2,"message":"iterators/generators require regenerator-runtime, which is too heavyweight for this guide to allow them. Separately, loops should be avoided in favor of array iterations.","line":180,"column":9,"nodeType":"ForOfStatement","messageId":"restrictedSyntax","endLine":189,"endColumn":10},{"ruleId":"no-await-in-loop","severity":2,"message":"Unexpected `await` inside a loop.","line":181,"column":11,"nodeType":"AwaitExpression","messageId":"unexpectedAwait","endLine":188,"endColumn":13},{"ruleId":"no-restricted-syntax","severity":2,"message":"iterators/generators require regenerator-runtime, which is too heavyweight for this guide to allow them. Separately, loops should be avoided in favor of array iterations.","line":195,"column":9,"nodeType":"ForOfStatement","messageId":"restrictedSyntax","endLine":209,"endColumn":10},{"ruleId":"no-unused-vars","severity":1,"message":"'id' is assigned a value but never used.","line":195,"column":21,"nodeType":"Identifier","messageId":"unusedVar","endLine":195,"endColumn":23,"suggestions":[{"messageId":"removeVar","data":{"varName":"id"},"fix":{"range":[5928,5930],"text":""},"desc":"Remove unused variable 'id'."}]},{"ruleId":"no-await-in-loop","severity":2,"message":"Unexpected `await` inside a loop.","line":196,"column":11,"nodeType":"AwaitExpression","messageId":"unexpectedAwait","endLine":208,"endColumn":13},{"ruleId":"no-await-in-loop","severity":2,"message":"Unexpected `await` inside a loop.","line":198,"column":28,"nodeType":"AwaitExpression","messageId":"unexpectedAwait","endLine":198,"endColumn":77},{"ruleId":"class-methods-use-this","severity":2,"message":"Expected 'this' to be used by class method 'extractRollbackSql'.","line":253,"column":3,"nodeType":"FunctionExpression","messageId":"missingThis","endLine":253,"endColumn":21},{"ruleId":"no-restricted-syntax","severity":2,"message":"iterators/generators require regenerator-runtime, which is too heavyweight for this guide to allow them. Separately, loops should be avoided in favor of array iterations.","line":258,"column":5,"nodeType":"ForOfStatement","messageId":"restrictedSyntax","endLine":269,"endColumn":6},{"ruleId":"no-continue","severity":2,"message":"Unexpected use of continue statement.","line":261,"column":9,"nodeType":"ContinueStatement","messageId":"unexpected","endLine":261,"endColumn":18},{"ruleId":"no-restricted-syntax","severity":2,"message":"iterators/generators require regenerator-runtime, which is too heavyweight for this guide to allow them. Separately, loops should be avoided in favor of array iterations.","line":287,"column":7,"nodeType":"ForOfStatement","messageId":"restrictedSyntax","endLine":294,"endColumn":8},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":308,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":308,"endColumn":7}],"suppressedMessages":[],"errorCount":24,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import path from 'path';\n\nconst DatabaseService = require('../services/database');\nconst logger = require('./logger');\nconst fs = require('fs').promises;\n\nclass MigrationService {\n  constructor() {\n    this.database = new DatabaseService();\n    this.migrationPath = path.join(process.cwd(), 'migrations');\n  }\n\n  async initialize() {\n    await this.database.connect();\n    await this.ensureMigrationTable();\n  }\n\n  // Ensure migration tracking table exists\n  async ensureMigrationTable() {\n    try {\n      await this.database.prisma.$executeRaw`\n        CREATE TABLE IF NOT EXISTS \"_migrations\" (\n          id SERIAL PRIMARY KEY,\n          name VARCHAR(255) NOT NULL UNIQUE,\n          executed_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n        );\n      `;\n      logger.info('Migration tracking table ensured');\n    } catch (error) {\n      logger.error('Failed to create migration table', { error: error.message });\n      throw error;\n    }\n  }\n\n  // Run all pending migrations\n  async runMigrations() {\n    try {\n      logger.info('Starting database migrations');\n\n      const migrationFiles = await this.getMigrationFiles();\n      const executedMigrations = await this.getExecutedMigrations();\n\n      const pendingMigrations = migrationFiles.filter(\n        file => !executedMigrations.includes(file.replace('.sql', ''))\n      );\n\n      if (pendingMigrations.length === 0) {\n        logger.info('No pending migrations found');\n        return;\n      }\n\n      logger.info(`Found ${pendingMigrations.length} pending migrations`);\n\n      for (const migrationFile of pendingMigrations) {\n        await this.executeMigration(migrationFile);\n      }\n\n      logger.info('All migrations completed successfully');\n    } catch (error) {\n      logger.error('Migration process failed', { error: error.message });\n      throw error;\n    }\n  }\n\n  // Execute a single migration\n  async executeMigration(filename) {\n    const migrationName = filename.replace('.sql', '');\n    const filePath = path.join(this.migrationPath, filename);\n\n    try {\n      logger.info(`Executing migration: ${migrationName}`);\n\n      const sql = await fs.readFile(filePath, 'utf8');\n\n      // Split SQL commands and execute them\n      const commands = sql.split(';').filter(cmd => cmd.trim().length > 0);\n\n      for (const command of commands) {\n        if (command.trim()) {\n          await this.database.prisma.$executeRawUnsafe(command);\n        }\n      }\n\n      // Record migration as executed\n      await this.database.prisma.$executeRaw`\n        INSERT INTO \"_migrations\" (name) VALUES (${migrationName});\n      `;\n\n      logger.info(`Migration ${migrationName} executed successfully`);\n    } catch (error) {\n      logger.error(`Migration ${migrationName} failed`, { error: error.message });\n      throw error;\n    }\n  }\n\n  // Get list of migration files\n  async getMigrationFiles() {\n    try {\n      await fs.access(this.migrationPath);\n    } catch {\n      await fs.mkdir(this.migrationPath, { recursive: true });\n      logger.info('Created migrations directory');\n      return [];\n    }\n\n    const files = await fs.readdir(this.migrationPath);\n    return files.filter(file => file.endsWith('.sql')).sort(); // Ensure consistent order\n  }\n\n  // Get list of executed migrations\n  async getExecutedMigrations() {\n    try {\n      const result = await this.database.prisma.$queryRaw`\n        SELECT name FROM \"_migrations\" ORDER BY executed_at;\n      `;\n      return result.map(row => row.name);\n    } catch (error) {\n      // If table doesn't exist yet, return empty array\n      if (error.message.includes('relation \"_migrations\" does not exist')) {\n        return [];\n      }\n      throw error;\n    }\n  }\n\n  // Create a new migration file\n  async createMigration(name, sql = '') {\n    const timestamp = new Date().toISOString().replace(/[:.]/g, '-').slice(0, -5);\n    const filename = `${timestamp}_${name}.sql`;\n    const filePath = path.join(this.migrationPath, filename);\n\n    const template = `-- Migration: ${name}\n-- Created at: ${new Date().toISOString()}\n\n${sql}\n\n-- End of migration: ${name}\n`;\n\n    await fs.writeFile(filePath, template, 'utf8');\n    logger.info(`Created migration file: ${filename}`);\n\n    return filename;\n  }\n\n  // Migrate data from SimplDB to PostgreSQL\n  async migrateFromSimplDB(simplDbPath = './database.json') {\n    try {\n      logger.info('Starting migration from SimplDB to PostgreSQL');\n\n      const fs = require('fs');\n      if (!fs.existsSync(simplDbPath)) {\n        logger.warn('SimplDB file not found, skipping migration');\n        return;\n      }\n\n      const simplData = JSON.parse(fs.readFileSync(simplDbPath, 'utf8'));\n\n      // Migrate users\n      if (simplData.users) {\n        logger.info(`Migrating ${Object.keys(simplData.users).length} users`);\n        for (const [jid, userData] of Object.entries(simplData.users)) {\n          await this.database.upsertUser({\n            jid,\n            name: userData.name,\n            phone: userData.phone,\n            avatar: userData.avatar,\n            xp: userData.xp || 0,\n            level: userData.level || 1,\n            coin: userData.coin || 0,\n            premium: userData.premium || false,\n            banned: userData.banned || false,\n          });\n        }\n      }\n\n      // Migrate groups\n      if (simplData.groups) {\n        logger.info(`Migrating ${Object.keys(simplData.groups).length} groups`);\n        for (const [jid, groupData] of Object.entries(simplData.groups)) {\n          await this.database.createGroup({\n            jid,\n            name: groupData.name,\n            description: groupData.description,\n            avatar: groupData.avatar,\n            ownerJid: groupData.ownerJid,\n            memberCount: groupData.memberCount || 0,\n          });\n        }\n      }\n\n      // Migrate menfess\n      if (simplData.menfess) {\n        logger.info(`Migrating ${Object.keys(simplData.menfess).length} menfess messages`);\n        for (const [id, menfessData] of Object.entries(simplData.menfess)) {\n          await this.database.prisma.menfess.create({\n            data: {\n              fromUserId: (await this.database.getUser(menfessData.fromUser)).id,\n              toGroupId: menfessData.toGroup,\n              toUserId: menfessData.toUser,\n              message: menfessData.message,\n              mediaUrl: menfessData.mediaUrl,\n              mediaType: menfessData.mediaType,\n              sentAt: new Date(menfessData.sentAt || Date.now()),\n              delivered: menfessData.delivered || false,\n              read: menfessData.read || false,\n            },\n          });\n        }\n      }\n\n      logger.info('Migration from SimplDB completed successfully');\n    } catch (error) {\n      logger.error('Migration from SimplDB failed', { error: error.message });\n      throw error;\n    }\n  }\n\n  // Rollback last migration\n  async rollbackLast() {\n    try {\n      const executedMigrations = await this.getExecutedMigrations();\n\n      if (executedMigrations.length === 0) {\n        logger.warn('No migrations to rollback');\n        return;\n      }\n\n      const lastMigration = executedMigrations[executedMigrations.length - 1];\n      const filePath = path.join(this.migrationPath, `${lastMigration}.sql`);\n\n      // Read the migration file to get rollback SQL\n      const sql = await fs.readFile(filePath, 'utf8');\n      const rollbackSql = this.extractRollbackSql(sql);\n\n      if (rollbackSql) {\n        await this.database.prisma.$executeRawUnsafe(rollbackSql);\n      }\n\n      // Remove from migration tracking\n      await this.database.prisma.$executeRaw`\n        DELETE FROM \"_migrations\" WHERE name = ${lastMigration};\n      `;\n\n      logger.info(`Rolled back migration: ${lastMigration}`);\n    } catch (error) {\n      logger.error('Rollback failed', { error: error.message });\n      throw error;\n    }\n  }\n\n  // Extract rollback SQL from migration file (basic implementation)\n  extractRollbackSql(sql) {\n    const lines = sql.split('\\n');\n    const rollbackLines = [];\n    let inRollback = false;\n\n    for (const line of lines) {\n      if (line.includes('-- ROLLBACK START')) {\n        inRollback = true;\n        continue;\n      }\n      if (line.includes('-- ROLLBACK END')) {\n        break;\n      }\n      if (inRollback) {\n        rollbackLines.push(line);\n      }\n    }\n\n    return rollbackLines.length > 0 ? rollbackLines.join('\\n') : null;\n  }\n\n  // Get migration status\n  async getStatus() {\n    try {\n      const migrationFiles = await this.getMigrationFiles();\n      const executedMigrations = await this.getExecutedMigrations();\n\n      const status = {\n        total: migrationFiles.length,\n        executed: executedMigrations.length,\n        pending: migrationFiles.length - executedMigrations.length,\n        migrations: [],\n      };\n\n      for (const file of migrationFiles) {\n        const name = file.replace('.sql', '');\n        status.migrations.push({\n          name,\n          status: executedMigrations.includes(name) ? 'executed' : 'pending',\n          file,\n        });\n      }\n\n      return status;\n    } catch (error) {\n      logger.error('Failed to get migration status', { error: error.message });\n      throw error;\n    }\n  }\n\n  async close() {\n    await this.database.disconnect();\n  }\n}\n\nmodule.exports = MigrationService;\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\src\\utils\\securityLogger.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":17,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":24},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":9,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":9,"endColumn":7}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const winston = require('winston');\n\nconst securityLogger = winston.createLogger({\n  level: 'warn',\n  format: winston.format.json(),\n  transports: [new winston.transports.File({ filename: 'security.log' })],\n});\n\nmodule.exports = securityLogger;\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\src\\worker.js","messages":[{"ruleId":"import-x/no-import-module-exports","severity":2,"message":"Cannot use import declarations in modules that export using CommonJS (module.exports = 'foo' or exports.bar = 'hi')","line":1,"column":1,"nodeType":"ImportDeclaration","messageId":"notAllowed","endLine":1,"endColumn":25},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":3,"column":14,"nodeType":"Identifier","messageId":"undef","endLine":3,"endColumn":21},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":4,"column":26,"nodeType":"Identifier","messageId":"undef","endLine":4,"endColumn":33},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":7,"column":13,"nodeType":"Identifier","messageId":"undef","endLine":7,"endColumn":20},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":8,"column":13,"nodeType":"Identifier","messageId":"undef","endLine":8,"endColumn":20},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":10,"column":11,"nodeType":"Identifier","messageId":"undef","endLine":10,"endColumn":18},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":11,"column":11,"nodeType":"Identifier","messageId":"undef","endLine":11,"endColumn":18},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":15,"column":32,"nodeType":"MemberExpression","messageId":"unexpected","endLine":15,"endColumn":43},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":20,"column":3,"nodeType":"MemberExpression","messageId":"unexpected","endLine":20,"endColumn":14,"suggestions":[{"fix":{"range":[531,581],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"import-x/no-dynamic-require","severity":2,"message":"Calls to require() should use string literals","line":21,"column":21,"nodeType":"CallExpression","messageId":"require","endLine":21,"endColumn":74},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":21,"column":21,"nodeType":"Identifier","messageId":"undef","endLine":21,"endColumn":28},{"ruleId":"no-undef","severity":2,"message":"'__dirname' is not defined.","line":21,"column":39,"nodeType":"Identifier","messageId":"undef","endLine":21,"endColumn":48},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":25,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":25,"endColumn":7}],"suppressedMessages":[],"errorCount":11,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import path from 'path';\n\nconst Bull = require('bull');\nconst { createClient } = require('redis');\n\nconst redisClient = createClient({\n  username: process.env.REDIS_USERNAME || 'default',\n  password: process.env.REDIS_PASSWORD || '',\n  socket: {\n    host: process.env.REDIS_HOST || 'localhost',\n    port: process.env.REDIS_PORT || 6379,\n  },\n});\n\nredisClient.on('error', err => console.log('Redis Client Error', err));\n\nconst messageQueue = new Bull('message-queue', { redis: redisClient });\n\nmessageQueue.process(async job => {\n  console.log('worker.js: Processing job:', job.id);\n  const processor = require(path.join(__dirname, 'message-processor.js'));\n  await processor(job);\n});\n\nmodule.exports = messageQueue;\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\state.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":1,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":7}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"module.exports = {\n  uptime: '0 detik',\n  dbSize: 'N/A',\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\test-interactive-auth.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":8,"column":36,"nodeType":"Identifier","messageId":"undef","endLine":8,"endColumn":43},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":9,"column":26,"nodeType":"Identifier","messageId":"undef","endLine":9,"endColumn":33},{"ruleId":"import-x/extensions","severity":2,"message":"Missing file extension for \"./src/services/unifiedSmartAuth\"","line":9,"column":34,"nodeType":"Literal","messageId":"missing","endLine":9,"endColumn":67},{"ruleId":"import-x/no-unresolved","severity":2,"message":"Unable to resolve path to module './src/services/unifiedSmartAuth'.","line":9,"column":34,"nodeType":"Literal","messageId":"unresolved","endLine":9,"endColumn":67},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":12,"column":3,"nodeType":"MemberExpression","messageId":"unexpected","endLine":12,"endColumn":14,"suggestions":[{"fix":{"range":[326,386],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":13,"column":3,"nodeType":"MemberExpression","messageId":"unexpected","endLine":13,"endColumn":14,"suggestions":[{"fix":{"range":[389,417],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":20,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":20,"endColumn":16,"suggestions":[{"fix":{"range":[579,629],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":23,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":23,"endColumn":16,"suggestions":[{"fix":{"range":[665,714],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":25,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":25,"endColumn":16,"suggestions":[{"fix":{"range":[791,846],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":28,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":28,"endColumn":16,"suggestions":[{"fix":{"range":[893,953],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":29,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":29,"endColumn":16,"suggestions":[{"fix":{"range":[958,1044],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":32,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":32,"endColumn":16,"suggestions":[{"fix":{"range":[1121,1164],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":35,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":35,"endColumn":16,"suggestions":[{"fix":{"range":[1200,1249],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":38,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":38,"endColumn":16,"suggestions":[{"fix":{"range":[1295,1377],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":39,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":39,"endColumn":16,"suggestions":[{"fix":{"range":[1382,1442],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":41,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":41,"endColumn":18,"suggestions":[{"fix":{"range":[1467,1514],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":42,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":42,"endColumn":12},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":47,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":47,"endColumn":12},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":47,"column":22,"nodeType":"Identifier","messageId":"undef","endLine":47,"endColumn":28},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":48,"column":31,"nodeType":"MemberExpression","messageId":"unexpected","endLine":48,"endColumn":44},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":51,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":51,"endColumn":7}],"suppressedMessages":[],"errorCount":8,"fatalErrorCount":0,"warningCount":13,"fixableErrorCount":0,"fixableWarningCount":0,"source":"#!/usr/bin/env node\n\n/**\n * Test Interactive Authentication System\n * Demonstrates the new interactive authentication choice system\n */\n\nconst InteractiveAuthEnhancement = require('./src/services/interactiveAuth');\nconst UnifiedSmartAuth = require('./src/services/unifiedSmartAuth');\n\nasync function testInteractiveAuth() {\n  console.log('ðŸ§ª Testing Interactive Authentication System');\n  console.log('â•'.repeat(50));\n\n  try {\n    // Initialize systems\n    const unifiedAuth = new UnifiedSmartAuth();\n    const interactiveAuth = new InteractiveAuthEnhancement(unifiedAuth);\n\n    console.log('âœ… Systems initialized successfully');\n\n    // Test session detection\n    console.log('\\nðŸ” Testing session detection...');\n    const sessionCheck = await interactiveAuth.detectExistingSession();\n    console.log('Session detection result:', sessionCheck);\n\n    // Test authentication choice prompt\n    console.log('\\nðŸŽ¯ Testing authentication choice prompt...');\n    console.log('Note: This will prompt for user input. Press Enter for auto-selection.');\n\n    const choice = await interactiveAuth.promptAuthenticationChoice();\n    console.log('User choice result:', choice);\n\n    // Test analytics display\n    console.log('\\nðŸ“Š Testing analytics display...');\n    interactiveAuth.displayAnalytics();\n\n    console.log('\\nâœ… Interactive Authentication System test completed successfully!');\n    console.log('ðŸŽ‰ The system is ready for user interaction!');\n  } catch (error) {\n    console.error('âŒ Test failed:', error.message);\n    process.exit(1);\n  }\n}\n\n// Run the test\nif (require.main === module) {\n  testInteractiveAuth().catch(console.error);\n}\n\nmodule.exports = { testInteractiveAuth };\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\test-smart-auth.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":26,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":33},{"ruleId":"import-x/extensions","severity":2,"message":"Missing file extension for \"./src/services/smartAuthManager\"","line":1,"column":34,"nodeType":"Literal","messageId":"missing","endLine":1,"endColumn":67},{"ruleId":"import-x/no-unresolved","severity":2,"message":"Unable to resolve path to module './src/services/smartAuthManager'.","line":1,"column":34,"nodeType":"Literal","messageId":"unresolved","endLine":1,"endColumn":67},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":2,"column":16,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":23},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":5,"column":3,"nodeType":"MemberExpression","messageId":"unexpected","endLine":5,"endColumn":14,"suggestions":[{"fix":{"range":[141,200],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":10,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":10,"endColumn":16,"suggestions":[{"fix":{"range":[261,322],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":13,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":13,"endColumn":16,"suggestions":[{"fix":{"range":[395,431],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":14,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":14,"endColumn":16,"suggestions":[{"fix":{"range":[436,506],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":15,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":15,"endColumn":16,"suggestions":[{"fix":{"range":[511,572],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":16,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":16,"endColumn":16,"suggestions":[{"fix":{"range":[577,637],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":17,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":17,"endColumn":16,"suggestions":[{"fix":{"range":[642,719],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":18,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":18,"endColumn":16,"suggestions":[{"fix":{"range":[724,799],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":20,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":20,"endColumn":16,"suggestions":[{"fix":{"range":[805,859],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":23,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":23,"endColumn":16,"suggestions":[{"fix":{"range":[930,978],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":24,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":24,"endColumn":16,"suggestions":[{"fix":{"range":[983,1039],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":25,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":25,"endColumn":16,"suggestions":[{"fix":{"range":[1044,1115],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":26,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":26,"endColumn":16,"suggestions":[{"fix":{"range":[1120,1207],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":29,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":29,"endColumn":18,"suggestions":[{"fix":{"range":[1250,1284],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":30,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":30,"endColumn":18,"suggestions":[{"fix":{"range":[1291,1349],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":32,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":32,"endColumn":20,"suggestions":[{"fix":{"range":[1408,1473],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":36,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":36,"endColumn":16,"suggestions":[{"fix":{"range":[1493,1553],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":38,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":38,"endColumn":18,"suggestions":[{"fix":{"range":[1578,1625],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":39,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":39,"endColumn":18,"suggestions":[{"fix":{"range":[1630,1667],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":19,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const SmartAuthManager = require('./src/services/smartAuthManager');\nconst config = require('./config');\n\nasync function testSmartAuth() {\n  console.log('ðŸ§  Testing Smart Authentication System...\\n');\n\n  try {\n    const smartAuth = new SmartAuthManager();\n\n    console.log('ðŸ” Detecting current authentication status...');\n    const authAnalysis = await smartAuth.detectAuthStatus(config);\n\n    console.log('ðŸ“Š Analysis Results:');\n    console.log(`   - Is Authenticated: ${authAnalysis.isAuthenticated}`);\n    console.log(`   - Method: ${authAnalysis.method || 'None'}`);\n    console.log(`   - Confidence: ${authAnalysis.confidence}%`);\n    console.log(`   - Phone Number: ${authAnalysis.phoneNumber || 'Not found'}`);\n    console.log(`   - Recommendation: ${authAnalysis.recommendation.message}`);\n\n    console.log('\\nðŸŽ¯ Executing smart authentication...');\n    const authResult = await smartAuth.executeSmartAuth(config);\n\n    console.log('âœ… Authentication setup complete!');\n    console.log(`   - Method: ${authResult.result.method}`);\n    console.log(`   - Phone Required: ${authResult.result.phoneRequired}`);\n    console.log(`   - Phone Number: ${authResult.result.phoneNumber || 'Not configured'}`);\n\n    if (authResult.instructions) {\n      console.log('\\nðŸ“‹ Instructions:');\n      console.log(`   Title: ${authResult.instructions.title}`);\n      if (authResult.instructions.introduction) {\n        console.log(`   Intro: ${authResult.instructions.introduction}`);\n      }\n    }\n\n    console.log('\\nðŸŽ‰ Smart Authentication System is working!');\n  } catch (error) {\n    console.error('âŒ Test failed:', error.message);\n    console.error('Stack:', error.stack);\n  }\n}\n\ntestSmartAuth();\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\tests\\e2e\\bot.test.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":26,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":33}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const { test, expect } = require('@playwright/test');\n\ntest.describe('Bot Flows', () => {\n  test('Ping command responds <2s', async ({ page }) => {\n    // Mock Baileys or use test server - for now, assume test server running on localhost:3000\n    await page.goto('http://localhost:3000'); // Adjust to bot interface URL\n    const startTime = Date.now();\n    // Simulate sending /ping command - assuming input field with id 'command-input' and send button\n    await page.fill('#command-input', '/ping');\n    await page.click('#send-button');\n    await expect(page.locator('#response')).toContainText('Pong'); // Assume response selector\n    const responseTime = Date.now() - startTime;\n    expect(responseTime).toBeLessThan(2000);\n  });\n\n  test('Moderation blocks NSFW', async ({ page }) => {\n    await page.goto('http://localhost:3000');\n    // Upload mock NSFW image - assume file input\n    await page.setInputFiles('#file-input', 'path/to/mock-nsfw.jpg'); // Provide mock path\n    await page.click('#upload-button');\n    await expect(page.locator('#moderation-message')).toContainText(\n      'Blocked: NSFW content detected'\n    );\n  });\n});\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\tests\\setup.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":7,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":7,"endColumn":8},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":10,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":10,"endColumn":5},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":11,"column":12,"nodeType":"Identifier","messageId":"undef","endLine":11,"endColumn":16},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":13,"column":34,"nodeType":"Identifier","messageId":"undef","endLine":13,"endColumn":38},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":13,"column":60,"nodeType":"Identifier","messageId":"undef","endLine":13,"endColumn":64},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":13,"column":79,"nodeType":"Identifier","messageId":"undef","endLine":13,"endColumn":83},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":14,"column":26,"nodeType":"Identifier","messageId":"undef","endLine":14,"endColumn":30},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":14,"column":78,"nodeType":"Identifier","messageId":"undef","endLine":14,"endColumn":82},{"ruleId":"no-unused-vars","severity":1,"message":"'Formatter' is assigned a value but never used.","line":19,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":19,"endColumn":16,"suggestions":[{"messageId":"removeVar","data":{"varName":"Formatter"},"fix":{"range":[553,701],"text":""},"desc":"Remove unused variable 'Formatter'."}]},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":27,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":27,"endColumn":5},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":28,"column":17,"nodeType":"Identifier","messageId":"undef","endLine":28,"endColumn":21},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":29,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":29,"endColumn":19},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":30,"column":18,"nodeType":"Identifier","messageId":"undef","endLine":30,"endColumn":22},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":32,"column":19,"nodeType":"Identifier","messageId":"undef","endLine":32,"endColumn":23},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":33,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":33,"endColumn":19},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":34,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":34,"endColumn":19},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":35,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":35,"endColumn":19},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":38,"column":19,"nodeType":"Identifier","messageId":"undef","endLine":38,"endColumn":23},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":39,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":39,"endColumn":19},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":40,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":40,"endColumn":19},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":42,"column":16,"nodeType":"Identifier","messageId":"undef","endLine":42,"endColumn":20},{"ruleId":"no-undef","severity":2,"message":"'global' is not defined.","line":47,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":47,"endColumn":7},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":55,"column":12,"nodeType":"Identifier","messageId":"undef","endLine":55,"endColumn":16},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":56,"column":17,"nodeType":"Identifier","messageId":"undef","endLine":56,"endColumn":21},{"ruleId":"no-promise-executor-return","severity":2,"message":"Return values from promise executor functions cannot be read.","line":87,"column":38,"nodeType":"CallExpression","messageId":"returnsValue","endLine":87,"endColumn":61,"suggestions":[{"messageId":"wrapBraces","fix":{"range":[2165,2188],"text":"{setTimeout(resolve, ms)}"},"desc":"Wrap the expression in `{}`."}]},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":92,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":92,"endColumn":9},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":95,"column":16,"nodeType":"Identifier","messageId":"undef","endLine":95,"endColumn":23},{"ruleId":"no-restricted-syntax","severity":2,"message":"iterators/generators require regenerator-runtime, which is too heavyweight for this guide to allow them. Separately, loops should be avoided in favor of array iterations.","line":100,"column":5,"nodeType":"ForOfStatement","messageId":"restrictedSyntax","endLine":106,"endColumn":6},{"ruleId":"no-await-in-loop","severity":2,"message":"Unexpected `await` inside a loop.","line":102,"column":9,"nodeType":"AwaitExpression","messageId":"unexpectedAwait","endLine":102,"endColumn":58},{"ruleId":"no-undef","severity":2,"message":"'__dirname' is not defined.","line":102,"column":35,"nodeType":"Identifier","messageId":"undef","endLine":102,"endColumn":44},{"ruleId":"no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":103,"column":16,"nodeType":"Identifier","messageId":"unusedVar","endLine":103,"endColumn":21},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":111,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":111,"endColumn":8},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":112,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":112,"endColumn":8},{"ruleId":"no-undef","severity":2,"message":"'beforeEach' is not defined.","line":115,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":115,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'jest' is not defined.","line":116,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":116,"endColumn":7},{"ruleId":"no-undef","severity":2,"message":"'afterEach' is not defined.","line":120,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":120,"endColumn":10},{"ruleId":"no-undef","severity":2,"message":"'global' is not defined.","line":121,"column":9,"nodeType":"Identifier","messageId":"undef","endLine":121,"endColumn":15},{"ruleId":"no-undef","severity":2,"message":"'afterAll' is not defined.","line":125,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":125,"endColumn":9},{"ruleId":"no-undef","severity":2,"message":"'global' is not defined.","line":126,"column":9,"nodeType":"Identifier","messageId":"undef","endLine":126,"endColumn":15}],"suppressedMessages":[],"errorCount":37,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Jest test setup file\n * Configures test environment and global utilities\n */\n\n// Load environment variables for testing\nrequire('dotenv').config({ path: '.env.test' });\n\n// Mock external dependencies\njest.mock('@whiskeysockets/baileys', () => ({\n  default: jest\n    .fn()\n    .mockReturnValue({ ev: { on: jest.fn() }, sendMessage: jest.fn(), logout: jest.fn() }),\n  useMultiFileAuthState: jest.fn().mockResolvedValue({ state: {}, saveCreds: jest.fn() }),\n  DisconnectReason: { loggedOut: 'loggedOut' },\n  S_WHATSAPP_NET: '@s.whatsapp.net',\n}));\n\nconst Formatter = {\n  quote: text => `_${text}_`,\n  italic: text => `_${text}_`,\n  bold: text => `*${text}*`,\n  monospace: text => ```${text}```,\n};\n\n// Mock Prisma\njest.mock('@prisma/client', () => ({\n  PrismaClient: jest.fn().mockImplementation(() => ({\n    $connect: jest.fn(),\n    $disconnect: jest.fn(),\n    user: {\n      findUnique: jest.fn(),\n      create: jest.fn(),\n      update: jest.fn(),\n      upsert: jest.fn(),\n    },\n    group: {\n      findUnique: jest.fn(),\n      create: jest.fn(),\n      update: jest.fn(),\n    },\n    $queryRaw: jest.fn(),\n  })),\n}));\n\n// Global test utilities\nglobal.testUtils = {\n  // Create mock WhatsApp context\n  createMockContext: (overrides = {}) => ({\n    used: { command: 'test', prefix: '!' },\n    args: [],\n    msg: { text: 'test message' },\n    sender: { jid: '1234567890@s.whatsapp.net' },\n    getId: jid => jid.split('@')[0],\n    reply: jest.fn(),\n    replyReact: jest.fn(),\n    isGroup: () => false,\n    getMessage: () => 'test message',\n    ...overrides,\n  }),\n\n  // Create mock database user\n  createMockUser: (overrides = {}) => ({\n    id: 'user-123',\n    jid: '1234567890@s.whatsapp.net',\n    name: 'Test User',\n    xp: 100,\n    level: 1,\n    coin: 50,\n    premium: false,\n    banned: false,\n    lastActivity: new Date(),\n    ...overrides,\n  }),\n\n  // Create mock database group\n  createMockGroup: (overrides = {}) => ({\n    id: 'group-123',\n    jid: '120363123456789012@g.us',\n    name: 'Test Group',\n    memberCount: 10,\n    ownerJid: '1234567890@s.whatsapp.net',\n    ...overrides,\n  }),\n\n  // Wait for async operations\n  wait: ms => new Promise(resolve => setTimeout(resolve, ms)),\n\n  // Clean up after tests\n  cleanup: async () => {\n    // Reset all mocks\n    jest.clearAllMocks();\n\n    // Clean up any test files\n    const fs = require('fs').promises;\n    import path from 'path';\n\n    const testFiles = ['test.db', 'test.db-journal'];\n\n    for (const file of testFiles) {\n      try {\n        await fs.unlink(path.join(__dirname, '..', file));\n      } catch (error) {\n        // File doesn't exist, continue\n      }\n    }\n  },\n};\n\n// Set up test environment\nprocess.env.NODE_ENV = 'test';\nprocess.env.DATABASE_URL = 'file:./test.db';\n\n// Global beforeEach\nbeforeEach(() => {\n  jest.clearAllMocks();\n});\n\n// Global afterEach\nafterEach(async () => {\n  await global.testUtils.cleanup();\n});\n\n// Global afterAll\nafterAll(async () => {\n  await global.testUtils.cleanup();\n});\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\tools\\ai-tools.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":1,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":7}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"module.exports = [\n  {\n    type: 'function',\n    function: {\n      name: 'youtubesearch',\n      description: 'Search for videos on YouTube based on a query.',\n      parameters: {\n        type: 'object',\n        properties: {\n          query: {\n            type: 'string',\n            description:\n              'The search query. For example, \"best programming tutorials\" or \"cat videos\".',\n          },\n        },\n        required: ['query'],\n      },\n    },\n  },\n  {\n    type: 'function',\n    function: {\n      name: 'googlesearch',\n      description: 'Search Google for up-to-date information on a topic.',\n      parameters: {\n        type: 'object',\n        properties: {\n          query: {\n            type: 'string',\n            description: 'The search query.',\n          },\n        },\n        required: ['query'],\n      },\n    },\n  },\n  {\n    type: 'function',\n    function: {\n      name: 'weather',\n      description: 'Get the current weather for a specific location.',\n      parameters: {\n        type: 'object',\n        properties: {\n          location: {\n            type: 'string',\n            description:\n              'The city or location to get the weather for, e.g., \"San Francisco\" or \"Tokyo\".',\n          },\n        },\n        required: ['location'],\n      },\n    },\n  },\n  {\n    type: 'function',\n    function: {\n      name: 'translate',\n      description: 'Translate text from one language to another.',\n      parameters: {\n        type: 'object',\n        properties: {\n          text: {\n            type: 'string',\n            description: 'The text to translate.',\n          },\n          to: {\n            type: 'string',\n            description:\n              'The 2-letter ISO 639-1 code for the target language, e.g., \"en\" for English, \"es\" for Spanish.',\n          },\n        },\n        required: ['text', 'to'],\n      },\n    },\n  },\n];\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\tools\\api.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":2,"column":14,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":21},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":3,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":3,"endColumn":22},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":4,"column":18,"nodeType":"Identifier","messageId":"undef","endLine":4,"endColumn":25},{"ruleId":"default-param-last","severity":2,"message":"Default parameters should be last.","line":37,"column":44,"nodeType":"AssignmentPattern","messageId":"shouldBeLast","endLine":37,"endColumn":55},{"ruleId":"no-param-reassign","severity":2,"message":"Assignment to function parameter 'apiNameOrURL'.","line":42,"column":7,"nodeType":"Identifier","messageId":"assignmentToFunctionParam","endLine":42,"endColumn":19},{"ruleId":"no-undef","severity":2,"message":"'consolefy' is not defined.","line":54,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":54,"endColumn":14},{"ruleId":"no-underscore-dangle","severity":2,"message":"Unexpected dangling '_' in '_boundary'.","line":69,"column":56,"nodeType":"MemberExpression","messageId":"unexpectedUnderscore","endLine":69,"endColumn":70},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":90,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":90,"endColumn":7}],"suppressedMessages":[],"errorCount":8,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Impor modul dan dependensi yang diperlukan\nconst util = require('node:util');\nconst axios = require('axios');\nconst FormData = require('form-data');\n\n// Daftar API gratis\nconst APIs = {\n  davidcyril: {\n    baseURL: 'https://apis.davidcyriltech.my.id',\n  },\n  diibot: {\n    baseURL: 'https://api.diioffc.web.id',\n  },\n  hang: {\n    baseURL: 'https://api.hanggts.xyz',\n  },\n  izumi: {\n    baseURL: 'https://izumiiiiiiii.dpdns.org',\n  },\n  neko: {\n    baseURL: 'https://api.nekoo.qzz.io',\n  },\n  siputzx: {\n    baseURL: 'https://api.siputzx.my.id',\n  },\n  yp: {\n    baseURL: 'https://api.ypnk.dpdns.org',\n  },\n  zell: {\n    baseURL: 'https://zellapi.autos',\n  },\n  zenzxz: {\n    baseURL: 'https://api.zenzxz.my.id',\n  },\n};\n\nfunction createUrl(apiNameOrURL, endpoint, params = {}, apiKeyParamName) {\n  try {\n    const api = APIs[apiNameOrURL];\n    if (!api) {\n      const url = new URL(apiNameOrURL);\n      apiNameOrURL = url;\n    }\n\n    const queryParams = new URLSearchParams(params);\n    if (apiKeyParamName && api && 'APIKey' in api) queryParams.set(apiKeyParamName, api.APIKey);\n\n    const baseURL = api ? api.baseURL : apiNameOrURL.origin;\n    const apiUrl = new URL(endpoint, baseURL);\n    apiUrl.search = queryParams.toString();\n\n    return apiUrl.toString();\n  } catch (error) {\n    consolefy.error(`Error: ${util.format(error)}`);\n    return null;\n  }\n}\n\nfunction listUrl() {\n  return APIs;\n}\n\nasync function uploadImage(buffer) {\n  const form = new FormData();\n  form.append('source', buffer, 'image.jpg');\n\n  const { data } = await axios.post('https://freeimage.host/api/1/upload', form, {\n    headers: {\n      'Content-Type': `multipart/form-data; boundary=${form._boundary}`,\n      'X-API-Key': '6d207e02198a847aa98d0a2a901485a5',\n    },\n  });\n\n  return data.image.url;\n}\n\nasync function uploadFile(buffer, filename) {\n  const form = new FormData();\n  form.append('file', buffer, filename);\n\n  const { data } = await axios.post('https://file.io', form, {\n    headers: {\n      ...form.getHeaders(),\n    },\n  });\n\n  return data.link;\n}\n\nmodule.exports = {\n  createUrl,\n  listUrl,\n  uploadImage,\n  uploadFile,\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\tools\\cmd.js","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'jidDecode' is assigned a value but never used.","line":3,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":12,"suggestions":[{"messageId":"removeVar","data":{"varName":"jidDecode"},"fix":{"range":[56,66],"text":""},"desc":"Remove unused variable 'jidDecode'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'proto' is assigned a value but never used.","line":4,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":4,"endColumn":8,"suggestions":[{"messageId":"removeVar","data":{"varName":"proto"},"fix":{"range":[65,74],"text":""},"desc":"Remove unused variable 'proto'."}]},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":9,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":9,"endColumn":12},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":10,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":10,"endColumn":22},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":11,"column":20,"nodeType":"Identifier","messageId":"undef","endLine":11,"endColumn":27},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":12,"column":14,"nodeType":"Identifier","messageId":"undef","endLine":12,"endColumn":21},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":13,"column":13,"nodeType":"Identifier","messageId":"undef","endLine":13,"endColumn":20},{"ruleId":"import-x/extensions","severity":2,"message":"Unexpected use of file extension \"js\" for \"./api.js\"","line":13,"column":21,"nodeType":"Literal","messageId":"unexpected","endLine":13,"endColumn":31,"suggestions":[{"fix":{"range":[311,321],"text":"'./api'"},"messageId":"removeUnexpected","data":{"extension":"js","importPath":"./api.js","fixedImportPath":"./api"},"desc":"Remove unexpected \"js\" file extension from \"./api.js\" into \"./api\""}]},{"ruleId":"no-unused-vars","severity":1,"message":"'config' is assigned a value but never used.","line":14,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":14,"endColumn":13,"suggestions":[{"messageId":"removeVar","data":{"varName":"config"},"fix":{"range":[324,363],"text":""},"desc":"Remove unused variable 'config'."}]},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":14,"column":16,"nodeType":"Identifier","messageId":"undef","endLine":14,"endColumn":23},{"ruleId":"import-x/extensions","severity":2,"message":"Unexpected use of file extension \"js\" for \"../config.js\"","line":14,"column":24,"nodeType":"Literal","messageId":"unexpected","endLine":14,"endColumn":38,"suggestions":[{"fix":{"range":[347,361],"text":"'../config'"},"messageId":"removeUnexpected","data":{"extension":"js","importPath":"../config.js","fixedImportPath":"../config"},"desc":"Remove unexpected \"js\" file extension from \"../config.js\" into \"../config\""}]},{"ruleId":"no-unused-vars","severity":1,"message":"'formatter' is assigned a value but never used.","line":15,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":15,"endColumn":16,"suggestions":[{"messageId":"removeVar","data":{"varName":"formatter"},"fix":{"range":[364,415],"text":""},"desc":"Remove unused variable 'formatter'."}]},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":15,"column":19,"nodeType":"Identifier","messageId":"undef","endLine":15,"endColumn":26},{"ruleId":"import-x/extensions","severity":2,"message":"Unexpected use of file extension \"js\" for \"../utils/formatter.js\"","line":15,"column":27,"nodeType":"Literal","messageId":"unexpected","endLine":15,"endColumn":50,"suggestions":[{"fix":{"range":[390,413],"text":"'../utils/formatter'"},"messageId":"removeUnexpected","data":{"extension":"js","importPath":"../utils/formatter.js","fixedImportPath":"../utils/formatter"},"desc":"Remove unexpected \"js\" file extension from \"../utils/formatter.js\" into \"../utils/formatter\""}]},{"ruleId":"no-param-reassign","severity":2,"message":"Assignment to function parameter 'botName'.","line":19,"column":3,"nodeType":"Identifier","messageId":"assignmentToFunctionParam","endLine":19,"endColumn":10},{"ruleId":"no-restricted-syntax","severity":2,"message":"iterators/generators require regenerator-runtime, which is too heavyweight for this guide to allow them. Separately, loops should be avoided in favor of array iterations.","line":29,"column":3,"nodeType":"ForOfStatement","messageId":"restrictedSyntax","endLine":34,"endColumn":4},{"ruleId":"no-restricted-syntax","severity":2,"message":"iterators/generators require regenerator-runtime, which is too heavyweight for this guide to allow them. Separately, loops should be avoided in favor of array iterations.","line":48,"column":3,"nodeType":"ForOfStatement","messageId":"restrictedSyntax","endLine":53,"endColumn":4},{"ruleId":"no-shadow","severity":2,"message":"'config' is already declared in the upper scope on line 14 column 7.","line":73,"column":22,"nodeType":"Identifier","messageId":"noShadow","endLine":73,"endColumn":28},{"ruleId":"no-plusplus","severity":2,"message":"Unary operator '++' used.","line":77,"column":34,"nodeType":"UpdateExpression","messageId":"unexpectedUnaryOp","endLine":77,"endColumn":37},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async function 'handleError'.","line":96,"column":16,"nodeType":"FunctionDeclaration","messageId":"missingReturn","endLine":96,"endColumn":27},{"ruleId":"no-shadow","severity":2,"message":"'config' is already declared in the upper scope on line 14 column 7.","line":97,"column":11,"nodeType":"Identifier","messageId":"noShadow","endLine":97,"endColumn":17},{"ruleId":"no-shadow","severity":2,"message":"'formatter' is already declared in the upper scope on line 15 column 7.","line":97,"column":19,"nodeType":"Identifier","messageId":"noShadow","endLine":97,"endColumn":28},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":103,"column":3,"nodeType":"MemberExpression","messageId":"unexpected","endLine":103,"endColumn":16,"suggestions":[{"fix":{"range":[2918,2955],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-shadow","severity":2,"message":"'config' is already declared in the upper scope on line 14 column 7.","line":127,"column":16,"nodeType":"Identifier","messageId":"noShadow","endLine":127,"endColumn":22},{"ruleId":"no-shadow","severity":2,"message":"'config' is already declared in the upper scope on line 14 column 7.","line":161,"column":18,"nodeType":"Identifier","messageId":"noShadow","endLine":161,"endColumn":24},{"ruleId":"no-plusplus","severity":2,"message":"Unary operator '++' used.","line":193,"column":36,"nodeType":"UpdateExpression","messageId":"unexpectedUnaryOp","endLine":193,"endColumn":39},{"ruleId":"no-plusplus","severity":2,"message":"Unary operator '++' used.","line":204,"column":11,"nodeType":"UpdateExpression","messageId":"unexpectedUnaryOp","endLine":204,"endColumn":14},{"ruleId":"no-undef","severity":2,"message":"'consolefy' is not defined.","line":231,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":231,"endColumn":14},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":236,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":236,"endColumn":7}],"suppressedMessages":[],"errorCount":24,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Impor modul dan dependensi yang diperlukan\nconst {\n  jidDecode,\n  proto,\n  getContentType,\n  S_WHATSAPP_NET,\n  STORIES_JID,\n  META_AI_JID,\n} = require('@whiskeysockets/baileys');\nconst axios = require('axios');\nconst didYouMean = require('didyoumean');\nconst util = require('node:util');\nconst api = require('./api.js');\nconst config = require('../config.js');\nconst formatter = require('../utils/formatter.js');\n\nconst formatBotName = botName => {\n  if (!botName) return null;\n  botName = botName.toLowerCase();\n  return botName.replace(/[aiueo0-9\\W_]/g, '');\n};\n\nfunction checkMedia(message, required) {\n  if (!message || !required) return false;\n\n  const type = getContentType(message);\n  const mediaList = Array.isArray(required) ? required : [required];\n\n  for (const media of mediaList) {\n    if (type === media) return media;\n    if (type === 'extendedTextMessage' && media === 'text') return media;\n    if (type === 'videoMessage' && media === 'gif') return media;\n    if (type === 'documentWithCaptionMessage' && media === 'document') return media;\n  }\n\n  return false;\n}\n\nfunction checkQuotedMedia(message, required) {\n  if (!message || !required) return false;\n\n  const quoted = message.extendedTextMessage?.contextInfo?.quotedMessage;\n  if (!quoted) return false;\n\n  const type = getContentType(quoted);\n  const mediaList = Array.isArray(required) ? required : [required];\n\n  for (const media of mediaList) {\n    if (type === media) return media;\n    if (type === 'extendedTextMessage' && media === 'text') return media;\n    if (type === 'videoMessage' && media === 'gif') return media;\n    if (type === 'documentWithCaptionMessage' && media === 'document') return media;\n  }\n\n  return false;\n}\n\nfunction fakeMetaAiQuotedText(text) {\n  if (!text) return null;\n\n  const quoted = {\n    key: {\n      remoteJid: STORIES_JID,\n      participant: META_AI_JID,\n    },\n    message: {\n      conversation: text,\n    },\n  };\n  return quoted;\n}\n\nfunction generateUID(config, id, withBotName = true) {\n  if (!id) return null;\n\n  let hash = 0;\n  for (let i = 0; i < id.length; i++) {\n    const charCode = id.charCodeAt(i);\n    hash = (hash * 31 + charCode) % 1000000007;\n  }\n\n  const uniquePart = id.split('').reverse().join('').charCodeAt(0).toString(16);\n  let uid = `${Math.abs(hash).toString(16).toLowerCase()}-${uniquePart}`;\n  if (withBotName) uid += `_${formatBotName(config.bot.name)}-wabot`;\n\n  return uid;\n}\n\nfunction getRandomElement(array) {\n  if (!array || !array.length) return null;\n\n  const randomIndex = Math.floor(Math.random() * array.length);\n  return array[randomIndex];\n}\n\nasync function handleError(ctx, error, useAxios = false, reportErrorToOwner = true) {\n  const { config, formatter } = ctx.bot.context;\n  const { isGroup } = ctx;\n  const groupJid = isGroup ? ctx.id : null;\n  const groupSubject = isGroup ? await ctx.group(groupJid).name() : null;\n  const errorText = util.format(error);\n\n  console.error(`Error: ${errorText}`);\n  if (config.system.reportErrorToOwner && reportErrorToOwner)\n    await ctx.replyWithJid(config.owner.id + S_WHATSAPP_NET, {\n      text:\n        `${formatter.quote(isGroup ? `âš ï¸ Terjadi kesalahan dari grup: @${groupJid}, oleh: @${ctx.getId(ctx.sender.jid)}` : `âš ï¸ Terjadi kesalahan dari: @${ctx.getId(ctx.sender.jid)}`)}\n` +\n        `${formatter.quote('Â· Â· â”€ Â·âœ¶Â· â”€ Â· Â·')}\n${formatter.monospace(errorText)}`,\n      mentions: [ctx.sender.jid],\n      contextInfo: {\n        groupMentions: isGroup\n          ? [\n              {\n                groupJid,\n                groupSubject,\n              },\n            ]\n          : [],\n      },\n    });\n  if (useAxios && error.status !== 200) return await ctx.reply(config.msg.notFound);\n  await ctx.reply(formatter.quote(`âš ï¸ Terjadi kesalahan: ${error.message}`));\n}\n\nfunction isCmd(config, content, bot) {\n  if (!content || !bot) return null;\n\n  const prefix = content.charAt(0);\n  if (!new RegExp(bot.prefix, 'i').test(content)) return false;\n\n  const [cmdName, ...inputArray] = content.slice(1).trim().toLowerCase().split(/\\s+/);\n  const input = inputArray.join(' ');\n\n  const cmds = Array.from(bot.cmd.values());\n  const matchedCmd = cmds.find(cmd => cmd.name === cmdName || cmd.aliases?.includes(cmdName));\n\n  if (matchedCmd)\n    return {\n      msg: content,\n      prefix,\n      name: cmdName,\n      input,\n    };\n\n  const mean = didYouMean(\n    cmdName,\n    cmds.flatMap(cmd => [cmd.name, ...(cmd.aliases || [])])\n  );\n  return mean\n    ? {\n        msg: content,\n        prefix,\n        didyoumean: mean,\n        input,\n      }\n    : false;\n}\n\nfunction isOwner(config, id, messageId) {\n  if (!id) return false;\n\n  if (\n    config.system.selfOwner ||\n    config.bot.id === config.owner.id ||\n    config.owner.co.includes(config.bot.id)\n  ) {\n    if (messageId.startsWith('3EB0')) return false; // Anti rce/injection (aka backdoor) ygy\n    return config.bot.id === id || config.owner.id === id || config.owner.co.includes(id);\n  }\n\n  return config.owner.id === id || config.owner.co.includes(id);\n}\n\nfunction isUrl(url) {\n  if (!url) return false;\n\n  const urlRegex = /(https?:\\/\\/[^\\s]+)/g;\n  return urlRegex.test(url);\n}\n\nfunction parseFlag(argsString, customRules = {}) {\n  if (!argsString)\n    return {\n      input: null,\n    };\n\n  const options = {};\n  const input = [];\n  const args = argsString.trim().split(/\\s+/);\n\n  for (let i = 0; i < args.length; i++) {\n    const arg = args[i];\n\n    if (customRules[arg]) {\n      const rule = customRules[arg];\n\n      if (rule.type === 'value') {\n        const value = args[i + 1];\n\n        if (value && rule.validator(value)) {\n          options[rule.key] = rule.parser(value);\n          i++;\n        } else {\n          options[rule.key] = rule.default || null;\n        }\n      } else if (rule.type === 'boolean') {\n        options[rule.key] = true;\n      }\n    } else {\n      input.push(arg);\n    }\n  }\n\n  options.input = input.join(' ');\n  return options;\n}\n\nasync function translate(text, to) {\n  if (!text || !to) return null;\n\n  try {\n    const apiUrl = api.createUrl('davidcyril', '/tools/translate', {\n      text,\n      to,\n    });\n    const result = (await axios.get(apiUrl)).data.translated_text;\n    return result;\n  } catch (error) {\n    consolefy.error(`Error: ${util.format(error)}`);\n    return null;\n  }\n}\n\nmodule.exports = {\n  checkMedia,\n  checkQuotedMedia,\n  fakeMetaAiQuotedText,\n  generateUID,\n  getRandomElement,\n  handleError,\n  isCmd,\n  isOwner,\n  isUrl,\n  parseFlag,\n  translate,\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\tools\\exports.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":2,"column":14,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":21},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":6,"column":8,"nodeType":"Identifier","messageId":"undef","endLine":6,"endColumn":15},{"ruleId":"import-x/extensions","severity":2,"message":"Unexpected use of file extension \"js\" for \"./api.js\"","line":6,"column":16,"nodeType":"Literal","messageId":"unexpected","endLine":6,"endColumn":26,"suggestions":[{"fix":{"range":[152,162],"text":"'./api'"},"messageId":"removeUnexpected","data":{"extension":"js","importPath":"./api.js","fixedImportPath":"./api"},"desc":"Remove unexpected \"js\" file extension from \"./api.js\" into \"./api\""}]},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":7,"column":8,"nodeType":"Identifier","messageId":"undef","endLine":7,"endColumn":15},{"ruleId":"import-x/extensions","severity":2,"message":"Unexpected use of file extension \"js\" for \"./cmd.js\"","line":7,"column":16,"nodeType":"Literal","messageId":"unexpected","endLine":7,"endColumn":26,"suggestions":[{"fix":{"range":[180,190],"text":"'./cmd'"},"messageId":"removeUnexpected","data":{"extension":"js","importPath":"./cmd.js","fixedImportPath":"./cmd"},"desc":"Remove unexpected \"js\" file extension from \"./cmd.js\" into \"./cmd\""}]},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":8,"column":9,"nodeType":"Identifier","messageId":"undef","endLine":8,"endColumn":16},{"ruleId":"import-x/extensions","severity":2,"message":"Unexpected use of file extension \"js\" for \"./list.js\"","line":8,"column":17,"nodeType":"Literal","messageId":"unexpected","endLine":8,"endColumn":28,"suggestions":[{"fix":{"range":[209,220],"text":"'./list'"},"messageId":"removeUnexpected","data":{"extension":"js","importPath":"./list.js","fixedImportPath":"./list"},"desc":"Remove unexpected \"js\" file extension from \"./list.js\" into \"./list\""}]},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":10,"column":8,"nodeType":"Identifier","messageId":"undef","endLine":10,"endColumn":15},{"ruleId":"import-x/extensions","severity":2,"message":"Unexpected use of file extension \"js\" for \"./msg.js\"","line":10,"column":16,"nodeType":"Literal","messageId":"unexpected","endLine":10,"endColumn":26,"suggestions":[{"fix":{"range":[246,256],"text":"'./msg'"},"messageId":"removeUnexpected","data":{"extension":"js","importPath":"./msg.js","fixedImportPath":"./msg"},"desc":"Remove unexpected \"js\" file extension from \"./msg.js\" into \"./msg\""}]},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":11,"column":9,"nodeType":"Identifier","messageId":"undef","endLine":11,"endColumn":16},{"ruleId":"import-x/extensions","severity":2,"message":"Unexpected use of file extension \"js\" for \"./warn.js\"","line":11,"column":17,"nodeType":"Literal","messageId":"unexpected","endLine":11,"endColumn":28,"suggestions":[{"fix":{"range":[275,286],"text":"'./warn'"},"messageId":"removeUnexpected","data":{"extension":"js","importPath":"./warn.js","fixedImportPath":"./warn"},"desc":"Remove unexpected \"js\" file extension from \"./warn.js\" into \"./warn\""}]},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":14,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":14,"endColumn":7}],"suppressedMessages":[],"errorCount":12,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Import required modules and dependencies\nconst mime = require('mime-types');\n\n// Export required modules or functions\nconst tools = {\n  api: require('./api.js'),\n  cmd: require('./cmd.js'),\n  list: require('./list.js'),\n  mime,\n  msg: require('./msg.js'),\n  warn: require('./warn.js'),\n};\n\nmodule.exports = tools;\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\tools\\list.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":2,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":22},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":3,"column":14,"nodeType":"Identifier","messageId":"undef","endLine":3,"endColumn":21},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":4,"column":19,"nodeType":"Identifier","messageId":"undef","endLine":4,"endColumn":26},{"ruleId":"import-x/extensions","severity":2,"message":"Unexpected use of file extension \"js\" for \"../utils/formatter.js\"","line":4,"column":27,"nodeType":"Literal","messageId":"unexpected","endLine":4,"endColumn":50,"suggestions":[{"fix":{"range":[139,162],"text":"'../utils/formatter'"},"messageId":"removeUnexpected","data":{"extension":"js","importPath":"../utils/formatter.js","fixedImportPath":"../utils/formatter"},"desc":"Remove unexpected \"js\" file extension from \"../utils/formatter.js\" into \"../utils/formatter\""}]},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":5,"column":13,"nodeType":"Identifier","messageId":"undef","endLine":5,"endColumn":20},{"ruleId":"import-x/extensions","severity":2,"message":"Unexpected use of file extension \"js\" for \"./api.js\"","line":5,"column":21,"nodeType":"Literal","messageId":"unexpected","endLine":5,"endColumn":31,"suggestions":[{"fix":{"range":[185,195],"text":"'./api'"},"messageId":"removeUnexpected","data":{"extension":"js","importPath":"./api.js","fixedImportPath":"./api"},"desc":"Remove unexpected \"js\" file extension from \"./api.js\" into \"./api\""}]},{"ruleId":"no-undef","severity":2,"message":"'consolefy' is not defined.","line":231,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":231,"endColumn":14},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":236,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":236,"endColumn":7}],"suppressedMessages":[],"errorCount":8,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Impor modul dan dependensi yang diperlukan\nconst axios = require('axios');\nconst util = require('node:util');\nconst formatter = require('../utils/formatter.js');\nconst api = require('./api.js');\n\nasync function get(type) {\n  try {\n    let text = '';\n    const createList = (data, list) =>\n      data.map(list).join(`\\n${formatter.quote('Â· Â· â”€ Â·âœ¶Â· â”€ Â· Â·')}\\n`);\n\n    switch (type) {\n      case 'alkitab': {\n        const { data } = (\n          await axios.get(api.createUrl('https://api-alkitab.vercel.app', '/api/book'))\n        ).data;\n        text = createList(\n          data,\n          list =>\n            `${formatter.quote(`Buku: ${list.name} (${list.abbr})`)}\\n` +\n            `${formatter.quote(`Jumlah Bab: ${list.chapter}`)}`\n        );\n        break;\n      }\n      case 'alquran': {\n        const data = (await axios.get(api.createUrl('neko', '/religious/nuquran-listsurah'))).data\n          .result.list;\n        text = createList(\n          data,\n          list =>\n            `${formatter.quote(`Surah: ${list.name} (${list.id})`)}\\n` +\n            `${formatter.quote(`Jumlah Ayat: ${list.verse_count}`)}`\n        );\n        break;\n      }\n      case 'cecan': {\n        const data = ['china', 'indonesia', 'japan', 'vietnam', 'korea', 'malaysia', 'thailand'];\n        text = createList(data, list => formatter.quote(list));\n        break;\n      }\n      case 'claim': {\n        const data = [\n          'daily (Hadiah harian)',\n          'weekly (Hadiah mingguan)',\n          'monthly (Hadiah bulanan)',\n          'yearly (Hadiah tahunan)',\n        ];\n        text = createList(data, list => formatter.quote(list));\n        break;\n      }\n      case 'fixdb': {\n        const data = ['user (Data pengguna)', 'group (Data grup)', 'menfess (Data menfess)'];\n        text = createList(data, list => formatter.quote(list));\n        break;\n      }\n      case 'group': {\n        const data = [\n          'open (Buka grup)',\n          'close (Tutup grup)',\n          'lock (Kunci grup)',\n          'unlock (Buka kunci grup)',\n          'approve (Aktifkan persetujuan masuk)',\n          'disapprove (Nonaktifkan persetujuan masuk)',\n          'invite (Izinkan anggota menambah anggota)',\n          'restrict (Hanya admin yang bisa menambah anggota)',\n        ];\n        text = createList(data, list => formatter.quote(list));\n        break;\n      }\n      case 'how': {\n        const data = [\n          'howgay (Seberapa gay)',\n          'howpintar (Seberapa pintar)',\n          'howcantik (Seberapa cantik)',\n          'howganteng (Seberapa ganteng)',\n          'howgabut (Seberapa gabut)',\n          'howgila (Seberapa gila)',\n          'howlesbi (Seberapa lesbi)',\n          'howstress (Seberapa stress)',\n          'howbucin (Seberapa bucin)',\n          'howjones (Seberapa jones)',\n          'howsadboy (Seberapa sadboy)',\n        ];\n        text = createList(data, list => formatter.quote(list));\n        break;\n      }\n      case 'mode': {\n        const data = [\n          'group (Mode group, hanya merespons dalam obrolan grup)',\n          'private (Mode private, hanya merespons dalam obrolan pribadi)',\n          'public (Mode publik, merespons dalam obrolan grup dan obrolan pribadi)',\n          'self (Mode self, hanya merespons dirinya sendiri dan ownernya)',\n        ];\n        text = createList(data, list => formatter.quote(list));\n        break;\n      }\n      case 'nsfwhub': {\n        const data = [\n          'anal',\n          'ass',\n          'bdsm',\n          'black',\n          'blowjub',\n          'boobs',\n          'bottomless',\n          'collared',\n          'cum',\n          'cumsluts',\n          'dick',\n          'dom',\n          'dp',\n          'easter',\n          'extreme',\n          'feet',\n          'finger',\n          'fuck',\n          'futa',\n          'gay',\n          'group',\n          'hentai',\n          'kiss',\n          'lesbian',\n          'lick',\n          'pegged',\n          'puffies',\n          'pussy',\n          'real',\n          'sixtynine',\n          'suck',\n          'tattoo',\n          'tiny',\n          'xmas',\n        ];\n        text = createList(data, list => formatter.quote(list));\n        break;\n      }\n      case 'osettext': {\n        const data = [\n          'donate - Variabel yang tersedia: %tag%, %name%, %prefix%, %command%, %footer%, %readmore% (Atur teks donasi)',\n          'price - Variabel yang tersedia: %tag%, %name%, %prefix%, %command%, %footer%, %readmore% (Atur teks harga)',\n          'qris (Atur gambar QRIS untuk donasi, gambar harus berupa link)',\n        ];\n        text = createList(data, list => formatter.quote(list));\n        break;\n      }\n      case 'setoption': {\n        const data = [\n          'antiaudio (Anti audio)',\n          'Antidocument (Anti dokumen)',\n          'Antigif (Anti GIF)',\n          'Antiimage (Anti gambar)',\n          'antilink (Anti link)',\n          'antinsfw (Anti NSFW, seperti pornografi)',\n          'antispam (Anti spam)',\n          'antisticker (Anti stiker)',\n          'antivideo (Anti video)',\n          'antitoxic (Anti toxic, seperti bahasa kasar)',\n          `autokick (Dikeluarkan secara otomatis, jika ada yang melanggar salah satu opsi ${formatter.inlineCode('anti...')})`,\n          'gamerestrict (Anggota dilarang bermain game)',\n          'welcome (Sambutan member)',\n        ];\n        text = createList(data, list => formatter.quote(list));\n        break;\n      }\n      case 'setprofile': {\n        const data = ['autolevelup (Otomatis naik level)', 'username (Nama pengguna)'];\n        text = createList(data, list => formatter.quote(list));\n        break;\n      }\n      case 'settext': {\n        const data = [\n          'goodbye (Teks goodbye, variabel yang tersedia: %tag%, %subject%, %description%)',\n          'intro (Teks intro)',\n          'welcome (Teks welcome, variabel yang tersedia: %tag%, %subject%, %description%)',\n        ];\n        text = createList(data, list => formatter.quote(list));\n        break;\n      }\n      case 'translate': {\n        const { data } = await axios.get(\n          api.createUrl(\n            'https://raw.githubusercontent.com',\n            '/itsecurityco/to-google-translate/refs/heads/master/supported_languages.json'\n          )\n        );\n        text = createList(\n          data,\n          list =>\n            `${formatter.quote(`Kode: ${list.code}`)}\\n` +\n            `${formatter.quote(`Bahasa: ${list.language}`)}`\n        );\n        break;\n      }\n      case 'waifuim': {\n        const data = [\n          'ass',\n          'ecchi',\n          'ero',\n          'hentai',\n          'maid',\n          'milf',\n          'oppai',\n          'oral',\n          'paizuri',\n          'selfies',\n          'uniform',\n          'waifu',\n        ];\n        text = createList(data, list => formatter.quote(list));\n        break;\n      }\n      case 'waifupics': {\n        const data = ['waifu', 'neko', 'shinobu', 'megumin'];\n        text = createList(data, list => formatter.quote(list));\n        break;\n      }\n      case 'waifupicsnsfw': {\n        const data = ['waifu', 'neko', 'trap'];\n        text = createList(data, list => formatter.quote(list));\n        break;\n      }\n      default: {\n        text = formatter.quote(`âŽ Tipe tidak diketahui: ${type}`);\n        break;\n      }\n    }\n\n    return text;\n  } catch (error) {\n    consolefy.error(`Error: ${util.format(error)}`);\n    return null;\n  }\n}\n\nmodule.exports = {\n  get,\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\tools\\msg.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":19,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":26},{"ruleId":"import-x/extensions","severity":2,"message":"Unexpected use of file extension \"js\" for \"../utils/formatter.js\"","line":1,"column":27,"nodeType":"Literal","messageId":"unexpected","endLine":1,"endColumn":50,"suggestions":[{"fix":{"range":[26,49],"text":"'../utils/formatter'"},"messageId":"removeUnexpected","data":{"extension":"js","importPath":"../utils/formatter.js","fixedImportPath":"../utils/formatter"},"desc":"Remove unexpected \"js\" file extension from \"../utils/formatter.js\" into \"../utils/formatter\""}]},{"ruleId":"no-restricted-syntax","severity":2,"message":"iterators/generators require regenerator-runtime, which is too heavyweight for this guide to allow them. Separately, loops should be avoided in favor of array iterations.","line":39,"column":5,"nodeType":"ForOfStatement","messageId":"restrictedSyntax","endLine":45,"endColumn":6},{"ruleId":"no-param-reassign","severity":2,"message":"Assignment to function parameter 'ms'.","line":43,"column":9,"nodeType":"Identifier","messageId":"assignmentToFunctionParam","endLine":43,"endColumn":11},{"ruleId":"no-restricted-syntax","severity":2,"message":"iterators/generators require regenerator-runtime, which is too heavyweight for this guide to allow them. Separately, loops should be avoided in favor of array iterations.","line":50,"column":3,"nodeType":"ForOfStatement","messageId":"restrictedSyntax","endLine":56,"endColumn":4},{"ruleId":"no-param-reassign","severity":2,"message":"Assignment to function parameter 'ms'.","line":54,"column":7,"nodeType":"Identifier","messageId":"assignmentToFunctionParam","endLine":54,"endColumn":9},{"ruleId":"no-plusplus","severity":2,"message":"Unary operator '--' used.","line":68,"column":5,"nodeType":"UpdateExpression","messageId":"unexpectedUnaryOp","endLine":68,"endColumn":12},{"ruleId":"no-plusplus","severity":2,"message":"Unary operator '++' used.","line":73,"column":5,"nodeType":"UpdateExpression","messageId":"unexpectedUnaryOp","endLine":73,"endColumn":12},{"ruleId":"no-plusplus","severity":2,"message":"Unary operator '--' used.","line":87,"column":5,"nodeType":"UpdateExpression","messageId":"unexpectedUnaryOp","endLine":87,"endColumn":12},{"ruleId":"no-plusplus","severity":2,"message":"Unary operator '++' used.","line":92,"column":5,"nodeType":"UpdateExpression","messageId":"unexpectedUnaryOp","endLine":92,"endColumn":12},{"ruleId":"prefer-destructuring","severity":2,"message":"Use array destructuring.","line":137,"column":5,"nodeType":"AssignmentExpression","messageId":"preferDestructuring","endLine":137,"endColumn":48},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":175,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":175,"endColumn":7}],"suppressedMessages":[],"errorCount":12,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const formatter = require('../utils/formatter.js');\n\nconst bytes = [\n  'yBytes',\n  'zBytes',\n  'aBytes',\n  'fBytes',\n  'pBytes',\n  'nBytes',\n  'ÂµBytes',\n  'mBytes',\n  'Bytes',\n  'KiB',\n  'MiB',\n  'GiB',\n  'TiB',\n  'PiB',\n  'EiB',\n  'ZiB',\n  'YiB',\n];\n\nfunction convertMsToDuration(ms, units = []) {\n  if (!ms || ms <= 0) return '0 days';\n\n  const timeUnits = {\n    year: 31557600000,\n    month: 2629800000,\n    week: 604800000,\n    day: 86400000,\n    hour: 3600000,\n    minute: 60000,\n    second: 1000,\n    millisecond: 1,\n  };\n\n  if (units.length > 0) {\n    const result = [];\n    for (const unit of units) {\n      if (timeUnits[unit]) {\n        const value = Math.floor(ms / timeUnits[unit]);\n        if (value > 0) result.push(`${value} ${unit}`);\n        ms %= timeUnits[unit];\n      }\n    }\n    return result.join(' ') || `0 ${units[0]}`;\n  }\n\n  const result = [];\n  for (const [unit, duration] of Object.entries(timeUnits)) {\n    const value = Math.floor(ms / duration);\n    if (value > 0) {\n      result.push(`${value} ${unit}`);\n      ms %= duration;\n    }\n  }\n  return result.join(' ') || '0 seconds';\n}\n\nfunction formatSize(byteCount) {\n  if (!byteCount) return '0 Bytes';\n\n  let index = 8;\n  let size = byteCount;\n\n  while (size < 1 && index > 0) {\n    size *= 1024;\n    index--;\n  }\n\n  while (size >= 1024 && index < bytes.length - 1) {\n    size /= 1024;\n    index++;\n  }\n\n  return `${size.toFixed(2)} ${bytes[index]}`;\n}\n\nfunction formatSizePerSecond(byteCount) {\n  if (!byteCount) return '0 Bytes/s';\n\n  let index = 8;\n  let size = byteCount;\n\n  while (size < 1 && index > 0) {\n    size *= 1024;\n    index--;\n  }\n\n  while (size >= 1024 && index < bytes.length - 1) {\n    size /= 1024;\n    index++;\n  }\n\n  return `${size.toFixed(2)} ${bytes[index]}/s`;\n}\n\nfunction generateCmdExample(used, args) {\n  if (!used) return `${formatter.inlineCode('used')} must be provided!`;\n  if (!args) return `${formatter.inlineCode('args')} must be provided!`;\n\n  const cmdMsg = `Example: ${formatter.inlineCode(`${used.prefix + used.command} ${args}`)}`;\n  return cmdMsg;\n}\n\nfunction generateInstruction(actions, mediaTypes) {\n  if (!actions || !actions.length)\n    return `${formatter.inlineCode('actions')} required must be specified!`;\n\n  let translatedMediaTypes;\n  if (typeof mediaTypes === 'string') {\n    translatedMediaTypes = [mediaTypes];\n  } else if (Array.isArray(mediaTypes)) {\n    translatedMediaTypes = mediaTypes;\n  } else {\n    return `${formatter.inlineCode('mediaTypes')} harus berupa string atau array string!`;\n  }\n\n  const mediaTypeTranslations = {\n    audio: 'audio',\n    document: 'document',\n    gif: 'GIF',\n    image: 'image',\n    sticker: 'sticker',\n    text: 'text',\n    video: 'video',\n    viewOnce: 'view once',\n  };\n\n  const translatedMediaTypeList = translatedMediaTypes.map(type => mediaTypeTranslations[type]);\n\n  let mediaTypesList;\n  if (translatedMediaTypeList.length > 1) {\n    const lastMediaType = translatedMediaTypeList[translatedMediaTypeList.length - 1];\n    mediaTypesList = `${translatedMediaTypeList.slice(0, -1).join(', ')}, atau ${lastMediaType}`;\n  } else {\n    mediaTypesList = translatedMediaTypeList[0];\n  }\n\n  const actionTranslations = {\n    send: 'Send',\n    reply: 'Reply',\n  };\n\n  const instructions = actions.map(action => `${actionTranslations[action]}`);\n  const actionList = instructions.join(actions.length > 1 ? ' or ' : '');\n  return `ðŸ“Œ ${actionList} ${mediaTypesList}!`;\n}\n\nfunction generatesFlagInfo(flags) {\n  if (typeof flags !== 'object' || !flags)\n    return `${formatter.inlineCode('flags')} must be an object!`;\n\n  const flagInfo = `Flags:\\n${Object.entries(flags)\n    .map(([flag, description]) =>\n      formatter.quote(`â€¢ ${formatter.inlineCode(flag)}: ${description}`)\n    )\n    .join('\\n')}`;\n  return flagInfo;\n}\n\nfunction generateNotes(notes) {\n  if (!Array.isArray(notes)) return `${formatter.inlineCode('notes')} must be a string!`;\n\n  const notesMsg = `Notes:\\n${notes.map(note => formatter.quote(`â€¢ ${note}`)).join('\\n')}`;\n  return notesMsg;\n}\n\nfunction ucwords(text) {\n  if (!text) return null;\n\n  return text.toLowerCase().replace(/\\b\\w/g, t => t.toUpperCase());\n}\n\nmodule.exports = {\n  convertMsToDuration,\n  formatSize,\n  formatSizePerSecond,\n  generateCmdExample,\n  generateInstruction,\n  generatesFlagInfo,\n  generateNotes,\n  ucwords,\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\tools\\warn.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":40,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":40,"endColumn":7}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"async function addWarning(ctx, groupDb, senderJid, groupId) {\n  const { database, formatter, config } = ctx.bot.context;\n  const senderId = ctx.getId(senderJid);\n  const maxWarnings = groupDb?.maxwarnings || 3;\n\n  const warnings = groupDb?.warnings || [];\n\n  const userWarning = warnings.find(warning => warning.userId === senderId);\n  let currentWarnings = userWarning ? userWarning.count : 0;\n  currentWarnings += 1;\n\n  if (userWarning) {\n    userWarning.count = currentWarnings;\n  } else {\n    warnings.push({\n      userId: senderId,\n      count: currentWarnings,\n    });\n  }\n\n  await database.group.update(groupId, { warnings });\n  await ctx.reply({\n    text: formatter.quote(`âš ï¸ Warning ${currentWarnings}/${maxWarnings} for @${senderId}!`),\n    mentions: [senderJid],\n  });\n\n  if (currentWarnings >= maxWarnings) {\n    await ctx.reply(\n      formatter.quote(\n        `â›” You have received ${maxWarnings} warnings and will be removed from the group!`\n      )\n    );\n    if (!config.system.restrict) await ctx.group().kick(senderJid);\n    await database.group.update(groupId, {\n      warnings: warnings.filter(warning => warning.userId !== senderId),\n    });\n  }\n}\n\nmodule.exports = {\n  addWarning,\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\utils\\formatter.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":17,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":17,"endColumn":7}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const quote = text => `> ${text}`;\n\nconst bold = text => `*${text}*`;\n\nconst italic = text => `_${text}_`;\n\nconst monospace = text => `\\\n\\\n${text}\\\n\\\n`;\n\nconst inlineCode = text => `\\\n${text}\\\n`;\n\nmodule.exports = {\n  quote,\n  bold,\n  italic,\n  monospace,\n  inlineCode,\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\utils\\formatters.js","messages":[{"ruleId":"no-restricted-syntax","severity":2,"message":"iterators/generators require regenerator-runtime, which is too heavyweight for this guide to allow them. Separately, loops should be avoided in favor of array iterations.","line":17,"column":5,"nodeType":"ForOfStatement","messageId":"restrictedSyntax","endLine":23,"endColumn":6},{"ruleId":"no-param-reassign","severity":2,"message":"Assignment to function parameter 'ms'.","line":21,"column":9,"nodeType":"Identifier","messageId":"assignmentToFunctionParam","endLine":21,"endColumn":11},{"ruleId":"no-restricted-syntax","severity":2,"message":"iterators/generators require regenerator-runtime, which is too heavyweight for this guide to allow them. Separately, loops should be avoided in favor of array iterations.","line":28,"column":3,"nodeType":"ForOfStatement","messageId":"restrictedSyntax","endLine":34,"endColumn":4},{"ruleId":"no-param-reassign","severity":2,"message":"Assignment to function parameter 'ms'.","line":32,"column":7,"nodeType":"Identifier","messageId":"assignmentToFunctionParam","endLine":32,"endColumn":9},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":44,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":44,"endColumn":7}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"function convertMsToDuration(ms, units = []) {\n  if (!ms || ms <= 0) return '0 hari';\n\n  const timeUnits = {\n    tahun: 31557600000,\n    bulan: 2629800000,\n    minggu: 604800000,\n    hari: 86400000,\n    jam: 3600000,\n    menit: 60000,\n    detik: 1000,\n    milidetik: 1,\n  };\n\n  if (units.length > 0) {\n    const result = [];\n    for (const unit of units) {\n      if (timeUnits[unit]) {\n        const value = Math.floor(ms / timeUnits[unit]);\n        if (value > 0) result.push(`${value} ${unit}`);\n        ms %= timeUnits[unit];\n      }\n    }\n    return result.join(' ') || `0 ${units[0]}`;\n  }\n\n  const result = [];\n  for (const [unit, duration] of Object.entries(timeUnits)) {\n    const value = Math.floor(ms / duration);\n    if (value > 0) {\n      result.push(`${value} ${unit}`);\n      ms %= duration;\n    }\n  }\n  return result.join(' ') || '0 detik';\n}\n\nfunction ucwords(text) {\n  if (!text) return null;\n\n  return text.toLowerCase().replace(/\\b\\w/g, t => t.toUpperCase());\n}\n\nmodule.exports = {\n  convertMsToDuration,\n  ucwords,\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\web\\@\\components\\ui\\badge.tsx","messages":[{"ruleId":"import-x/extensions","severity":2,"message":"Missing file extension for \"@/lib/utils\"","line":4,"column":20,"nodeType":"Literal","messageId":"missing","endLine":4,"endColumn":33},{"ruleId":"import-x/no-unresolved","severity":2,"message":"Unable to resolve path to module '@/lib/utils'.","line":4,"column":20,"nodeType":"Literal","messageId":"unresolved","endLine":4,"endColumn":33}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from 'react';\nimport { cva, type VariantProps } from 'class-variance-authority';\n\nimport { cn } from '@/lib/utils';\n\nconst badgeVariants = cva(\n  'inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2',\n  {\n    variants: {\n      variant: {\n        default: 'border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80',\n        secondary:\n          'border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80',\n        destructive:\n          'border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80',\n        outline: 'text-foreground',\n      },\n    },\n    defaultVariants: {\n      variant: 'default',\n    },\n  }\n);\n\nexport interface BadgeProps\n  extends React.HTMLAttributes<HTMLDivElement>,\n    VariantProps<typeof badgeVariants> {}\n\nfunction Badge({ className, variant, ...props }: BadgeProps) {\n  return <div className={cn(badgeVariants({ variant }), className)} {...props} />;\n}\n\nexport { Badge, badgeVariants };\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\web\\@\\components\\ui\\button.tsx","messages":[{"ruleId":"import-x/extensions","severity":2,"message":"Missing file extension for \"@/lib/utils\"","line":5,"column":20,"nodeType":"Literal","messageId":"missing","endLine":5,"endColumn":33},{"ruleId":"import-x/no-unresolved","severity":2,"message":"Unable to resolve path to module '@/lib/utils'.","line":5,"column":20,"nodeType":"Literal","messageId":"unresolved","endLine":5,"endColumn":33},{"ruleId":"react/require-default-props","severity":2,"message":"propType \"asChild\" is not required, but has no corresponding defaultProps declaration.","line":37,"column":3,"nodeType":"TSPropertySignature","messageId":"shouldHaveDefault","endLine":37,"endColumn":21}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from 'react';\nimport { Slot } from '@radix-ui/react-slot';\nimport { cva, type VariantProps } from 'class-variance-authority';\n\nimport { cn } from '@/lib/utils';\n\nconst buttonVariants = cva(\n  'inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0',\n  {\n    variants: {\n      variant: {\n        default: 'bg-primary text-primary-foreground shadow hover:bg-primary/90',\n        destructive: 'bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90',\n        outline:\n          'border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground',\n        secondary: 'bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80',\n        ghost: 'hover:bg-accent hover:text-accent-foreground',\n        link: 'text-primary underline-offset-4 hover:underline',\n      },\n      size: {\n        default: 'h-9 px-4 py-2',\n        sm: 'h-8 rounded-md px-3 text-xs',\n        lg: 'h-10 rounded-md px-8',\n        icon: 'h-9 w-9',\n      },\n    },\n    defaultVariants: {\n      variant: 'default',\n      size: 'default',\n    },\n  }\n);\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof buttonVariants> {\n  asChild?: boolean;\n}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? Slot : 'button';\n    return (\n      <Comp className={cn(buttonVariants({ variant, size, className }))} ref={ref} {...props} />\n    );\n  }\n);\nButton.displayName = 'Button';\n\nexport { Button, buttonVariants };\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\web\\@\\components\\ui\\card.tsx","messages":[{"ruleId":"import-x/extensions","severity":2,"message":"Missing file extension for \"@/lib/utils\"","line":3,"column":20,"nodeType":"Literal","messageId":"missing","endLine":3,"endColumn":33},{"ruleId":"import-x/no-unresolved","severity":2,"message":"Unable to resolve path to module '@/lib/utils'.","line":3,"column":20,"nodeType":"Literal","messageId":"unresolved","endLine":3,"endColumn":33}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from 'react';\n\nimport { cn } from '@/lib/utils';\n\nconst Card = React.forwardRef<HTMLDivElement, React.HTMLAttributes<HTMLDivElement>>(\n  ({ className, ...props }, ref) => (\n    <div\n      ref={ref}\n      className={cn('rounded-xl border bg-card text-card-foreground shadow', className)}\n      {...props}\n    />\n  )\n);\nCard.displayName = 'Card';\n\nconst CardHeader = React.forwardRef<HTMLDivElement, React.HTMLAttributes<HTMLDivElement>>(\n  ({ className, ...props }, ref) => (\n    <div ref={ref} className={cn('flex flex-col space-y-1.5 p-6', className)} {...props} />\n  )\n);\nCardHeader.displayName = 'CardHeader';\n\nconst CardTitle = React.forwardRef<HTMLDivElement, React.HTMLAttributes<HTMLDivElement>>(\n  ({ className, ...props }, ref) => (\n    <div\n      ref={ref}\n      className={cn('font-semibold leading-none tracking-tight', className)}\n      {...props}\n    />\n  )\n);\nCardTitle.displayName = 'CardTitle';\n\nconst CardDescription = React.forwardRef<HTMLDivElement, React.HTMLAttributes<HTMLDivElement>>(\n  ({ className, ...props }, ref) => (\n    <div ref={ref} className={cn('text-sm text-muted-foreground', className)} {...props} />\n  )\n);\nCardDescription.displayName = 'CardDescription';\n\nconst CardContent = React.forwardRef<HTMLDivElement, React.HTMLAttributes<HTMLDivElement>>(\n  ({ className, ...props }, ref) => (\n    <div ref={ref} className={cn('p-6 pt-0', className)} {...props} />\n  )\n);\nCardContent.displayName = 'CardContent';\n\nconst CardFooter = React.forwardRef<HTMLDivElement, React.HTMLAttributes<HTMLDivElement>>(\n  ({ className, ...props }, ref) => (\n    <div ref={ref} className={cn('flex items-center p-6 pt-0', className)} {...props} />\n  )\n);\nCardFooter.displayName = 'CardFooter';\n\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent };\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\web\\@\\components\\ui\\input.tsx","messages":[{"ruleId":"import-x/extensions","severity":2,"message":"Missing file extension for \"@/lib/utils\"","line":3,"column":20,"nodeType":"Literal","messageId":"missing","endLine":3,"endColumn":33},{"ruleId":"import-x/no-unresolved","severity":2,"message":"Unable to resolve path to module '@/lib/utils'.","line":3,"column":20,"nodeType":"Literal","messageId":"unresolved","endLine":3,"endColumn":33},{"ruleId":"import-x/prefer-default-export","severity":2,"message":"Prefer default export on a file with single export.","line":20,"column":10,"nodeType":"ExportSpecifier","messageId":"single","endLine":20,"endColumn":15}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from 'react';\n\nimport { cn } from '@/lib/utils';\n\nconst Input = React.forwardRef<HTMLInputElement, React.ComponentProps<'input'>>(\n  ({ className, type, ...props }, ref) => (\n    <input\n      type={type}\n      className={cn(\n        'flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm',\n        className\n      )}\n      ref={ref}\n      {...props}\n    />\n  )\n);\nInput.displayName = 'Input';\n\nexport { Input };\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\web\\app\\api\\health\\route.js","messages":[{"ruleId":"import-x/no-extraneous-dependencies","severity":2,"message":"'@prisma/client' should be listed in the project's dependencies. Run 'npm i @prisma/client' to add it","line":2,"column":1,"nodeType":"ImportDeclaration","messageId":"missing","endLine":2,"endColumn":47},{"ruleId":"import-x/no-extraneous-dependencies","severity":2,"message":"'redis' should be listed in the project's dependencies. Run 'npm i redis' to add it","line":3,"column":1,"nodeType":"ImportDeclaration","messageId":"missing","endLine":3,"endColumn":27},{"ruleId":"import-x/prefer-default-export","severity":2,"message":"Prefer default export on a file with single export.","line":7,"column":1,"nodeType":"ExportNamedDeclaration","messageId":"single","endLine":83,"endColumn":2},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":26,"column":14,"nodeType":"Identifier","messageId":"undef","endLine":26,"endColumn":21},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":27,"column":19,"nodeType":"Identifier","messageId":"undef","endLine":27,"endColumn":26},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":59,"column":34,"nodeType":"Identifier","messageId":"undef","endLine":59,"endColumn":41},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":61,"column":26,"nodeType":"Identifier","messageId":"undef","endLine":61,"endColumn":33},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":62,"column":20,"nodeType":"Identifier","messageId":"undef","endLine":62,"endColumn":27},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":71,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":71,"endColumn":18,"suggestions":[{"fix":{"range":[2092,2137],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]}],"suppressedMessages":[],"errorCount":8,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { NextResponse } from 'next/server';\nimport { PrismaClient } from '@prisma/client';\nimport redis from 'redis';\n\nconst prisma = new PrismaClient();\n\nexport async function GET() {\n  try {\n    const health = {\n      timestamp: new Date().toISOString(),\n      services: {},\n    };\n\n    // Database health check\n    try {\n      await prisma.$queryRaw`SELECT 1`;\n      health.services.database = 'healthy';\n    } catch (error) {\n      health.services.database = 'unhealthy';\n      health.services.database_error = error.message;\n    }\n\n    // Redis health check\n    try {\n      const redisClient = redis.createClient({\n        url: process.env.REDIS_URL || 'redis://localhost:6379',\n        password: process.env.REDIS_PASSWORD,\n      });\n\n      await redisClient.connect();\n      await redisClient.ping();\n      await redisClient.quit();\n      health.services.redis = 'healthy';\n    } catch (error) {\n      health.services.redis = 'unhealthy';\n      health.services.redis_error = error.message;\n    }\n\n    // WhatsApp connection check (mock - would need actual connection status)\n    health.services.whatsapp = 'connected'; // This would come from actual bot status\n\n    // Gemini AI service check\n    try {\n      const response = await fetch('http://localhost:3001/health/gemini', {\n        timeout: 5000,\n      });\n      if (response.ok) {\n        health.services.gemini = 'healthy';\n      } else {\n        health.services.gemini = 'unhealthy';\n      }\n    } catch (error) {\n      health.services.gemini = 'unhealthy';\n      health.services.gemini_error = error.message;\n    }\n\n    // System metrics\n    health.system = {\n      memoryUsage: `${Math.round(process.memoryUsage().heapUsed / 1024 / 1024)}MB`,\n      cpuUsage: 'N/A', // Would need additional monitoring\n      uptime: Math.floor(process.uptime()),\n      nodeVersion: process.version,\n    };\n\n    // Overall status\n    const allHealthy = Object.values(health.services).every(status => status === 'healthy');\n    health.status = allHealthy ? 'healthy' : 'degraded';\n\n    return NextResponse.json(health);\n  } catch (error) {\n    console.error('Health check failed:', error);\n    return NextResponse.json(\n      {\n        status: 'unhealthy',\n        error: error.message,\n        timestamp: new Date().toISOString(),\n      },\n      { status: 500 }\n    );\n  } finally {\n    await prisma.$disconnect();\n  }\n}\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\web\\app\\api\\log\\route.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":21,"column":9,"nodeType":"Identifier","messageId":"undef","endLine":21,"endColumn":16},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":27,"column":29,"nodeType":"Identifier","messageId":"undef","endLine":27,"endColumn":36},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":58,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":58,"endColumn":18,"suggestions":[{"fix":{"range":[1765,1818],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":66,"column":31,"nodeType":"Identifier","messageId":"undef","endLine":66,"endColumn":38},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":74,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":74,"endColumn":18,"suggestions":[{"fix":{"range":[2360,2409],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { NextResponse } from 'next/server';\nimport winston from 'winston';\nimport fs from 'fs/promises';\nimport path from 'path';\n\n// Configure Winston logger\nconst logger = winston.createLogger({\n  level: 'info',\n  format: winston.format.combine(\n    winston.format.timestamp(),\n    winston.format.errors({ stack: true }),\n    winston.format.json()\n  ),\n  defaultMeta: { service: 'whatsdex-web' },\n  transports: [\n    // Write all logs with importance level of `error` or less to `error.log`\n    new winston.transports.File({ filename: 'logs/error.log', level: 'error' }),\n    // Write all logs with importance level of `info` or less to `combined.log`\n    new winston.transports.File({ filename: 'logs/combined.log' }),\n    // Write to console in development\n    ...(process.env.NODE_ENV !== 'production' ? [new winston.transports.Console()] : []),\n  ],\n});\n\n// Ensure logs directory exists\nasync function ensureLogsDirectory() {\n  const logsDir = path.join(process.cwd(), 'logs');\n  try {\n    await fs.access(logsDir);\n  } catch {\n    await fs.mkdir(logsDir, { recursive: true });\n  }\n}\n\nexport async function POST(request) {\n  try {\n    await ensureLogsDirectory();\n\n    const logData = await request.json();\n\n    // Validate log data\n    if (!logData || typeof logData !== 'object') {\n      return NextResponse.json({ error: 'Invalid log data' }, { status: 400 });\n    }\n\n    // Log based on level or default to info\n    const level = logData.level || 'info';\n    const message = logData.message || JSON.stringify(logData);\n\n    logger.log(level, message, {\n      ...logData,\n      timestamp: new Date().toISOString(),\n      source: 'edge-middleware',\n    });\n\n    return NextResponse.json({ status: 'Log received' }, { status: 200 });\n  } catch (error) {\n    console.error('Failed to process log event:', error);\n    return NextResponse.json({ error: 'Internal Server Error' }, { status: 500 });\n  }\n}\n\n// Optional: GET endpoint to retrieve logs (for admin purposes)\nexport async function GET() {\n  try {\n    const logsDir = path.join(process.cwd(), 'logs');\n    const combinedLogPath = path.join(logsDir, 'combined.log');\n\n    const logs = await fs.readFile(combinedLogPath, 'utf-8');\n    const logLines = logs.trim().split('\\n').slice(-100); // Last 100 lines\n\n    return NextResponse.json({ logs: logLines }, { status: 200 });\n  } catch (error) {\n    console.error('Failed to retrieve logs:', error);\n    return NextResponse.json({ error: 'Failed to retrieve logs' }, { status: 500 });\n  }\n}\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\web\\app\\api\\metrics\\route.js","messages":[{"ruleId":"import-x/no-extraneous-dependencies","severity":2,"message":"'@prisma/client' should be listed in the project's dependencies. Run 'npm i @prisma/client' to add it","line":2,"column":1,"nodeType":"ImportDeclaration","messageId":"missing","endLine":2,"endColumn":47},{"ruleId":"import-x/prefer-default-export","severity":2,"message":"Prefer default export on a file with single export.","line":6,"column":1,"nodeType":"ExportNamedDeclaration","messageId":"single","endLine":86,"endColumn":2},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":53,"column":31,"nodeType":"Identifier","messageId":"undef","endLine":53,"endColumn":38},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":81,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":81,"endColumn":18,"suggestions":[{"fix":{"range":[2018,2067],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { NextResponse } from 'next/server';\nimport { PrismaClient } from '@prisma/client';\n\nconst prisma = new PrismaClient();\n\nexport async function GET() {\n  try {\n    // Get active users (users active in last 24 hours)\n    const twentyFourHoursAgo = new Date(Date.now() - 24 * 60 * 60 * 1000);\n    const activeUsers = await prisma.user.count({\n      where: {\n        lastActivity: {\n          gte: twentyFourHoursAgo,\n        },\n      },\n    });\n\n    // Get messages today\n    const today = new Date();\n    today.setHours(0, 0, 0, 0);\n    const messagesToday = await prisma.commandUsage.count({\n      where: {\n        usedAt: {\n          gte: today,\n        },\n      },\n    });\n\n    // Get average response time from recent commands\n    const recentCommands = await prisma.commandUsage.findMany({\n      where: {\n        usedAt: {\n          gte: twentyFourHoursAgo,\n        },\n        executionTime: {\n          not: null,\n        },\n      },\n      select: {\n        executionTime: true,\n      },\n      take: 1000,\n    });\n\n    const avgResponseTime =\n      recentCommands.length > 0\n        ? Math.round(\n            recentCommands.reduce((sum, cmd) => sum + cmd.executionTime, 0) / recentCommands.length\n          )\n        : 0;\n\n    // Get system uptime (mock for now - would come from monitoring service)\n    const uptime = Math.floor(process.uptime());\n\n    // Get total commands executed\n    const totalCommands = await prisma.commandUsage.count();\n\n    // Get error rate (commands with errors in last 24h)\n    const errors24h = await prisma.commandUsage.count({\n      where: {\n        usedAt: {\n          gte: twentyFourHoursAgo,\n        },\n        success: false,\n      },\n    });\n\n    const errorRate = messagesToday > 0 ? ((errors24h / messagesToday) * 100).toFixed(2) : 0;\n\n    const metrics = {\n      activeUsers,\n      messagesToday,\n      avgResponseTime,\n      uptime,\n      totalCommands,\n      errorRate: parseFloat(errorRate),\n    };\n\n    return NextResponse.json(metrics);\n  } catch (error) {\n    console.error('Failed to fetch metrics:', error);\n    return NextResponse.json({ error: 'Failed to fetch metrics' }, { status: 500 });\n  } finally {\n    await prisma.$disconnect();\n  }\n}\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\web\\app\\dashboard\\page.js","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'PieChart' is defined but never used.","line":15,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":15,"endColumn":11,"suggestions":[{"messageId":"removeVar","data":{"varName":"PieChart"},"fix":{"range":[215,227],"text":""},"desc":"Remove unused variable 'PieChart'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Pie' is defined but never used.","line":16,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":16,"endColumn":6,"suggestions":[{"messageId":"removeVar","data":{"varName":"Pie"},"fix":{"range":[227,234],"text":""},"desc":"Remove unused variable 'Pie'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Cell' is defined but never used.","line":17,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":17,"endColumn":7,"suggestions":[{"messageId":"removeVar","data":{"varName":"Cell"},"fix":{"range":[234,242],"text":""},"desc":"Remove unused variable 'Cell'."}]},{"ruleId":"import-x/extensions","severity":2,"message":"Missing file extension for \"@/components/ui/card\"","line":19,"column":58,"nodeType":"Literal","messageId":"missing","endLine":19,"endColumn":80},{"ruleId":"import-x/no-unresolved","severity":2,"message":"Unable to resolve path to module '@/components/ui/card'.","line":19,"column":58,"nodeType":"Literal","messageId":"unresolved","endLine":19,"endColumn":80},{"ruleId":"import-x/extensions","severity":2,"message":"Missing file extension for \"@/components/ui/badge\"","line":20,"column":23,"nodeType":"Literal","messageId":"missing","endLine":20,"endColumn":46},{"ruleId":"import-x/no-unresolved","severity":2,"message":"Unable to resolve path to module '@/components/ui/badge'.","line":20,"column":23,"nodeType":"Literal","messageId":"unresolved","endLine":20,"endColumn":46},{"ruleId":"no-unused-vars","severity":1,"message":"'Button' is defined but never used.","line":21,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":21,"endColumn":16,"suggestions":[{"messageId":"removeVar","data":{"varName":"Button"},"fix":{"range":[391,439],"text":""},"desc":"Remove unused variable 'Button'."}]},{"ruleId":"import-x/extensions","severity":2,"message":"Missing file extension for \"@/components/ui/button\"","line":21,"column":24,"nodeType":"Literal","messageId":"missing","endLine":21,"endColumn":48},{"ruleId":"import-x/no-unresolved","severity":2,"message":"Unable to resolve path to module '@/components/ui/button'.","line":21,"column":24,"nodeType":"Literal","messageId":"unresolved","endLine":21,"endColumn":48},{"ruleId":"import-x/extensions","severity":2,"message":"Missing file extension for \"@/components/ui/tabs\"","line":22,"column":58,"nodeType":"Literal","messageId":"missing","endLine":22,"endColumn":80},{"ruleId":"import-x/no-unresolved","severity":2,"message":"Unable to resolve path to module '@/components/ui/tabs'.","line":22,"column":58,"nodeType":"Literal","messageId":"unresolved","endLine":22,"endColumn":80},{"ruleId":"no-unused-vars","severity":1,"message":"'socket' is assigned a value but never used.","line":37,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":37,"endColumn":16,"suggestions":[{"messageId":"removeVar","data":{"varName":"socket"},"fix":{"range":[912,918],"text":""},"desc":"Remove unused variable 'socket'."}]},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":41,"column":33,"nodeType":"Identifier","messageId":"undef","endLine":41,"endColumn":40},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":46,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":46,"endColumn":18,"suggestions":[{"fix":{"range":[1208,1253],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-use-before-define","severity":2,"message":"'fetchInitialData' was used before it was defined.","line":69,"column":5,"nodeType":"Identifier","messageId":"usedBeforeDefined","endLine":69,"endColumn":21},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":88,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":88,"endColumn":20,"suggestions":[{"fix":{"range":[2336,2390],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"react/jsx-filename-extension","severity":2,"message":"JSX not allowed in files with extension '.js'","line":102,"column":5,"nodeType":"JSXElement","messageId":"noJSXWithExtension","endLine":308,"endColumn":11}],"suppressedMessages":[],"errorCount":11,"fatalErrorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport { useState, useEffect } from 'react';\nimport { io } from 'socket.io-client';\nimport {\n  LineChart,\n  Line,\n  XAxis,\n  YAxis,\n  CartesianGrid,\n  Tooltip,\n  ResponsiveContainer,\n  BarChart,\n  Bar,\n  PieChart,\n  Pie,\n  Cell,\n} from 'recharts';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Badge } from '@/components/ui/badge';\nimport { Button } from '@/components/ui/button';\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\n\nexport default function DashboardPage() {\n  const [metrics, setMetrics] = useState({\n    activeUsers: 0,\n    messagesToday: 0,\n    avgResponseTime: 0,\n    uptime: 0,\n    totalCommands: 0,\n    errorRate: 0,\n  });\n\n  const [commandStats, setCommandStats] = useState([]);\n  const [userActivity, setUserActivity] = useState([]);\n  const [systemHealth, setSystemHealth] = useState({});\n  const [socket, setSocket] = useState(null);\n\n  useEffect(() => {\n    // Initialize Socket.IO connection\n    const socketConnection = io(process.env.NEXT_PUBLIC_SOCKET_URL || 'http://localhost:3001', {\n      transports: ['websocket', 'polling'],\n    });\n\n    socketConnection.on('connect', () => {\n      console.log('Connected to dashboard socket');\n      socketConnection.emit('subscribe:metrics');\n    });\n\n    socketConnection.on('metrics:update', data => {\n      setMetrics(data);\n    });\n\n    socketConnection.on('command:stats', data => {\n      setCommandStats(data);\n    });\n\n    socketConnection.on('user:activity', data => {\n      setUserActivity(prev => [data, ...prev.slice(0, 49)]); // Keep last 50 entries\n    });\n\n    socketConnection.on('system:health', data => {\n      setSystemHealth(data);\n    });\n\n    setSocket(socketConnection);\n\n    // Fetch initial data\n    fetchInitialData();\n\n    return () => {\n      socketConnection.disconnect();\n    };\n  }, []);\n\n  const fetchInitialData = async () => {\n    try {\n      const [metricsRes, commandsRes, healthRes] = await Promise.all([\n        fetch('/api/metrics'),\n        fetch('/api/commands/stats'),\n        fetch('/api/health'),\n      ]);\n\n      if (metricsRes.ok) setMetrics(await metricsRes.json());\n      if (commandsRes.ok) setCommandStats(await commandsRes.json());\n      if (healthRes.ok) setSystemHealth(await healthRes.json());\n    } catch (error) {\n      console.error('Failed to fetch initial data:', error);\n    }\n  };\n\n  const formatUptime = uptime => {\n    const days = Math.floor(uptime / 86400);\n    const hours = Math.floor((uptime % 86400) / 3600);\n    const minutes = Math.floor((uptime % 3600) / 60);\n    return `${days}d ${hours}h ${minutes}m`;\n  };\n\n  const formatResponseTime = ms => (ms < 1000 ? `${ms}ms` : `${(ms / 1000).toFixed(2)}s`);\n\n  return (\n    <div className=\"p-6 max-w-7xl mx-auto\">\n      <div className=\"mb-8\">\n        <h1 className=\"text-3xl font-bold text-gray-900 dark:text-white\">WhatsDeX Dashboard</h1>\n        <p className=\"text-gray-600 dark:text-gray-400 mt-2\">\n          Real-time monitoring and analytics for your WhatsApp bot\n        </p>\n      </div>\n\n      {/* Key Metrics Cards */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8\">\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium\">Active Users</CardTitle>\n            <Badge variant=\"secondary\">Live</Badge>\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold\">{metrics.activeUsers.toLocaleString()}</div>\n            <p className=\"text-xs text-muted-foreground\">Currently online</p>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium\">Messages Today</CardTitle>\n            <Badge variant=\"secondary\">24h</Badge>\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold\">{metrics.messagesToday.toLocaleString()}</div>\n            <p className=\"text-xs text-muted-foreground\">Total messages processed</p>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium\">Avg Response Time</CardTitle>\n            <Badge variant={metrics.avgResponseTime < 500 ? 'default' : 'destructive'}>\n              {metrics.avgResponseTime < 500 ? 'Good' : 'Slow'}\n            </Badge>\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold\">{formatResponseTime(metrics.avgResponseTime)}</div>\n            <p className=\"text-xs text-muted-foreground\">Command execution time</p>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium\">System Uptime</CardTitle>\n            <Badge variant=\"outline\">99.9%</Badge>\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold\">{formatUptime(metrics.uptime)}</div>\n            <p className=\"text-xs text-muted-foreground\">Continuous operation</p>\n          </CardContent>\n        </Card>\n      </div>\n\n      {/* Charts and Analytics */}\n      <Tabs defaultValue=\"overview\" className=\"space-y-6\">\n        <TabsList>\n          <TabsTrigger value=\"overview\">Overview</TabsTrigger>\n          <TabsTrigger value=\"commands\">Commands</TabsTrigger>\n          <TabsTrigger value=\"users\">Users</TabsTrigger>\n          <TabsTrigger value=\"system\">System</TabsTrigger>\n        </TabsList>\n\n        <TabsContent value=\"overview\" className=\"space-y-6\">\n          <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n            <Card>\n              <CardHeader>\n                <CardTitle>Message Volume (Last 24h)</CardTitle>\n              </CardHeader>\n              <CardContent>\n                <ResponsiveContainer width=\"100%\" height={300}>\n                  <LineChart data={userActivity}>\n                    <CartesianGrid strokeDasharray=\"3 3\" />\n                    <XAxis dataKey=\"timestamp\" />\n                    <YAxis />\n                    <Tooltip />\n                    <Line type=\"monotone\" dataKey=\"messages\" stroke=\"#8884d8\" strokeWidth={2} />\n                  </LineChart>\n                </ResponsiveContainer>\n              </CardContent>\n            </Card>\n\n            <Card>\n              <CardHeader>\n                <CardTitle>Response Time Distribution</CardTitle>\n              </CardHeader>\n              <CardContent>\n                <ResponsiveContainer width=\"100%\" height={300}>\n                  <BarChart\n                    data={[\n                      { range: '<100ms', count: 45 },\n                      { range: '100-500ms', count: 32 },\n                      { range: '500-1000ms', count: 15 },\n                      { range: '1-2s', count: 6 },\n                      { range: '>2s', count: 2 },\n                    ]}\n                  >\n                    <CartesianGrid strokeDasharray=\"3 3\" />\n                    <XAxis dataKey=\"range\" />\n                    <YAxis />\n                    <Tooltip />\n                    <Bar dataKey=\"count\" fill=\"#82ca9d\" />\n                  </BarChart>\n                </ResponsiveContainer>\n              </CardContent>\n            </Card>\n          </div>\n        </TabsContent>\n\n        <TabsContent value=\"commands\" className=\"space-y-6\">\n          <Card>\n            <CardHeader>\n              <CardTitle>Command Usage Statistics</CardTitle>\n            </CardHeader>\n            <CardContent>\n              <ResponsiveContainer width=\"100%\" height={400}>\n                <BarChart data={commandStats}>\n                  <CartesianGrid strokeDasharray=\"3 3\" />\n                  <XAxis dataKey=\"command\" />\n                  <YAxis />\n                  <Tooltip />\n                  <Bar dataKey=\"usage\" fill=\"#8884d8\" />\n                </BarChart>\n              </ResponsiveContainer>\n            </CardContent>\n          </Card>\n        </TabsContent>\n\n        <TabsContent value=\"users\" className=\"space-y-6\">\n          <Card>\n            <CardHeader>\n              <CardTitle>User Activity Heatmap</CardTitle>\n            </CardHeader>\n            <CardContent>\n              <div className=\"text-center text-muted-foreground\">\n                User activity visualization coming soon...\n              </div>\n            </CardContent>\n          </Card>\n        </TabsContent>\n\n        <TabsContent value=\"system\" className=\"space-y-6\">\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n            <Card>\n              <CardHeader>\n                <CardTitle>System Health</CardTitle>\n              </CardHeader>\n              <CardContent className=\"space-y-4\">\n                <div className=\"flex justify-between items-center\">\n                  <span>Database</span>\n                  <Badge variant={systemHealth.database === 'healthy' ? 'default' : 'destructive'}>\n                    {systemHealth.database || 'unknown'}\n                  </Badge>\n                </div>\n                <div className=\"flex justify-between items-center\">\n                  <span>Redis Cache</span>\n                  <Badge variant={systemHealth.redis === 'healthy' ? 'default' : 'destructive'}>\n                    {systemHealth.redis || 'unknown'}\n                  </Badge>\n                </div>\n                <div className=\"flex justify-between items-center\">\n                  <span>WhatsApp Connection</span>\n                  <Badge\n                    variant={systemHealth.whatsapp === 'connected' ? 'default' : 'destructive'}\n                  >\n                    {systemHealth.whatsapp || 'unknown'}\n                  </Badge>\n                </div>\n                <div className=\"flex justify-between items-center\">\n                  <span>AI Service</span>\n                  <Badge variant={systemHealth.gemini === 'healthy' ? 'default' : 'destructive'}>\n                    {systemHealth.gemini || 'unknown'}\n                  </Badge>\n                </div>\n              </CardContent>\n            </Card>\n\n            <Card>\n              <CardHeader>\n                <CardTitle>Performance Metrics</CardTitle>\n              </CardHeader>\n              <CardContent className=\"space-y-4\">\n                <div className=\"flex justify-between items-center\">\n                  <span>Memory Usage</span>\n                  <span className=\"font-mono\">{systemHealth.memoryUsage || 'N/A'}</span>\n                </div>\n                <div className=\"flex justify-between items-center\">\n                  <span>CPU Usage</span>\n                  <span className=\"font-mono\">{systemHealth.cpuUsage || 'N/A'}</span>\n                </div>\n                <div className=\"flex justify-between items-center\">\n                  <span>Cache Hit Rate</span>\n                  <span className=\"font-mono\">{systemHealth.cacheHitRate || 'N/A'}</span>\n                </div>\n                <div className=\"flex justify-between items-center\">\n                  <span>Error Rate</span>\n                  <span className=\"font-mono\">{systemHealth.errorRate || 'N/A'}</span>\n                </div>\n              </CardContent>\n            </Card>\n          </div>\n        </TabsContent>\n      </Tabs>\n    </div>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\web\\components\\admin\\ui\\button.tsx","messages":[{"ruleId":"react/require-default-props","severity":2,"message":"propType \"asChild\" is not required, but has no corresponding defaultProps declaration.","line":36,"column":3,"nodeType":"TSPropertySignature","messageId":"shouldHaveDefault","endLine":36,"endColumn":21}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from 'react';\nimport { Slot } from '@radix-ui/react-slot';\nimport { cva, type VariantProps } from 'class-variance-authority';\n\nimport { cn } from '../../../lib/utils';\n\nconst buttonVariants = cva(\n  'inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0',\n  {\n    variants: {\n      variant: {\n        default: 'bg-primary text-primary-foreground hover:bg-primary/90',\n        destructive: 'bg-destructive text-destructive-foreground hover:bg-destructive/90',\n        outline: 'border border-input bg-background hover:bg-accent hover:text-accent-foreground',\n        secondary: 'bg-secondary text-secondary-foreground hover:bg-secondary/80',\n        ghost: 'hover:bg-accent hover:text-accent-foreground',\n        link: 'text-primary underline-offset-4 hover:underline',\n      },\n      size: {\n        default: 'h-10 px-4 py-2',\n        sm: 'h-9 rounded-md px-3',\n        lg: 'h-11 rounded-md px-8',\n        icon: 'h-10 w-10',\n      },\n    },\n    defaultVariants: {\n      variant: 'default',\n      size: 'default',\n    },\n  }\n);\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof buttonVariants> {\n  asChild?: boolean;\n}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? Slot : 'button';\n    return (\n      <Comp className={cn(buttonVariants({ variant, size, className }))} ref={ref} {...props} />\n    );\n  }\n);\nButton.displayName = 'Button';\n\nexport { Button, buttonVariants };\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\web\\components\\chart-area-default.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'YAxis' is defined but never used.","line":4,"column":49,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":54},{"ruleId":"import-x/extensions","severity":2,"message":"Missing file extension for \"@/components/ui/card\"","line":13,"column":8,"nodeType":"Literal","messageId":"missing","endLine":13,"endColumn":30},{"ruleId":"import-x/no-unresolved","severity":2,"message":"Unable to resolve path to module '@/components/ui/card'.","line":13,"column":8,"nodeType":"Literal","messageId":"unresolved","endLine":13,"endColumn":30},{"ruleId":"import-x/extensions","severity":2,"message":"Missing file extension for \"@/components/ui/chart\"","line":19,"column":8,"nodeType":"Literal","messageId":"missing","endLine":19,"endColumn":31},{"ruleId":"import-x/no-unresolved","severity":2,"message":"Unable to resolve path to module '@/components/ui/chart'.","line":19,"column":8,"nodeType":"Literal","messageId":"unresolved","endLine":19,"endColumn":31}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport { TrendingUp } from 'lucide-react';\nimport { Area, AreaChart, CartesianGrid, XAxis, YAxis } from 'recharts';\n\nimport {\n  Card,\n  CardContent,\n  CardDescription,\n  CardFooter,\n  CardHeader,\n  CardTitle,\n} from '@/components/ui/card';\nimport {\n  ChartConfig,\n  ChartContainer,\n  ChartTooltip,\n  ChartTooltipContent,\n} from '@/components/ui/chart';\n\nconst chartData = [\n  { month: 'January', desktop: 186, mobile: 80 },\n  { month: 'February', desktop: 305, mobile: 200 },\n  { month: 'March', desktop: 237, mobile: 120 },\n  { month: 'April', desktop: 73, mobile: 190 },\n  { month: 'May', desktop: 209, mobile: 130 },\n  { month: 'June', desktop: 214, mobile: 140 },\n];\n\nconst chartConfig = {\n  desktop: {\n    label: 'Desktop',\n    color: 'hsl(var(--chart-1))',\n  },\n  mobile: {\n    label: 'Mobile',\n    color: 'hsl(var(--chart-2))',\n  },\n} satisfies ChartConfig;\n\nexport default function Component() {\n  return (\n    <Card>\n      <CardHeader>\n        <CardTitle>Area Chart - Stacked</CardTitle>\n        <CardDescription>Showing total visitors for the last 6 months</CardDescription>\n      </CardHeader>\n      <CardContent>\n        <ChartContainer config={chartConfig}>\n          <AreaChart\n            accessibilityLayer\n            data={chartData}\n            margin={{\n              left: 12,\n              right: 12,\n            }}\n          >\n            <CartesianGrid vertical={false} />\n            <XAxis\n              dataKey=\"month\"\n              tickLine={false}\n              axisLine={false}\n              tickMargin={8}\n              tickFormatter={value => value.slice(0, 3)}\n            />\n            <ChartTooltip cursor={false} content={<ChartTooltipContent indicator=\"dot\" />} />\n            <Area\n              dataKey=\"mobile\"\n              type=\"natural\"\n              fill=\"var(--color-mobile)\"\n              fillOpacity={0.4}\n              stroke=\"var(--color-mobile)\"\n              stackId=\"a\"\n            />\n            <Area\n              dataKey=\"desktop\"\n              type=\"natural\"\n              fill=\"var(--color-desktop)\"\n              fillOpacity={0.4}\n              stroke=\"var(--color-desktop)\"\n              stackId=\"a\"\n            />\n          </AreaChart>\n        </ChartContainer>\n      </CardContent>\n      <CardFooter>\n        <div className=\"flex w-full items-start gap-2 text-sm\">\n          <div className=\"grid gap-2\">\n            <div className=\"flex items-center gap-2 font-medium leading-none\">\n              Trending up by 5.2% this month <TrendingUp className=\"h-4 w-4\" />\n            </div>\n            <div className=\"flex items-center gap-2 leading-none text-muted-foreground\">\n              January - June 2024\n            </div>\n          </div>\n        </div>\n      </CardFooter>\n    </Card>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\web\\components\\common\\CommandPalette.tsx","messages":[{"ruleId":"import-x/prefer-default-export","severity":2,"message":"Prefer default export on a file with single export.","line":4,"column":1,"nodeType":"ExportNamedDeclaration","messageId":"single","endLine":36,"endColumn":2},{"ruleId":"@typescript-eslint/no-shadow","severity":2,"message":"'open' is already declared in the upper scope on line 5 column 10.","line":11,"column":17,"nodeType":"Identifier","messageId":"noShadow","endLine":11,"endColumn":21}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from 'react';\nimport { Command } from 'cmdk';\n\nexport function CommandPalette() {\n  const [open, setOpen] = React.useState(false);\n\n  React.useEffect(() => {\n    const down = (e: KeyboardEvent) => {\n      if (e.key === 'k' && (e.metaKey || e.ctrlKey)) {\n        e.preventDefault();\n        setOpen(open => !open);\n      }\n    };\n\n    document.addEventListener('keydown', down);\n    return () => document.removeEventListener('keydown', down);\n  }, []);\n\n  return (\n    <Command.Dialog open={open} onOpenChange={setOpen} label=\"Global Command Menu\">\n      <Command.Input />\n      <Command.List>\n        <Command.Empty>No results found.</Command.Empty>\n\n        <Command.Group heading=\"Letters\">\n          <Command.Item>a</Command.Item>\n          <Command.Item>b</Command.Item>\n          <Command.Separator />\n          <Command.Item>c</Command.Item>\n        </Command.Group>\n\n        <Command.Item>Apple</Command.Item>\n      </Command.List>\n    </Command.Dialog>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\web\\components\\common\\Layout.js","messages":[{"ruleId":"import-x/extensions","severity":2,"message":"Missing file extension for \"@/lib/utils\"","line":15,"column":20,"nodeType":"Literal","messageId":"missing","endLine":15,"endColumn":33},{"ruleId":"import-x/no-unresolved","severity":2,"message":"Unable to resolve path to module '@/lib/utils'.","line":15,"column":20,"nodeType":"Literal","messageId":"unresolved","endLine":15,"endColumn":33},{"ruleId":"import-x/extensions","severity":2,"message":"Missing file extension for \"@/contexts/ThemeContext\"","line":16,"column":30,"nodeType":"Literal","messageId":"missing","endLine":16,"endColumn":55},{"ruleId":"import-x/no-unresolved","severity":2,"message":"Unable to resolve path to module '@/contexts/ThemeContext'.","line":16,"column":30,"nodeType":"Literal","messageId":"unresolved","endLine":16,"endColumn":55},{"ruleId":"import-x/extensions","severity":2,"message":"Missing file extension for \"./CommandPalette\"","line":18,"column":32,"nodeType":"Literal","messageId":"missing","endLine":18,"endColumn":50},{"ruleId":"import-x/no-unresolved","severity":2,"message":"Unable to resolve path to module './CommandPalette'.","line":18,"column":32,"nodeType":"Literal","messageId":"unresolved","endLine":18,"endColumn":50},{"ruleId":"react/prop-types","severity":2,"message":"'children' is missing in props validation","line":31,"column":19,"nodeType":"Property","messageId":"missingPropType","endLine":31,"endColumn":27},{"ruleId":"react/prop-types","severity":2,"message":"'title' is missing in props validation","line":31,"column":29,"nodeType":"Property","messageId":"missingPropType","endLine":31,"endColumn":57},{"ruleId":"react/jsx-filename-extension","severity":2,"message":"JSX not allowed in files with extension '.js'","line":84,"column":5,"nodeType":"JSXElement","messageId":"noJSXWithExtension","endLine":251,"endColumn":11},{"ruleId":"no-use-before-define","severity":2,"message":"'SidebarContent' was used before it was defined.","line":140,"column":16,"nodeType":"JSXIdentifier","messageId":"usedBeforeDefined","endLine":140,"endColumn":30},{"ruleId":"no-use-before-define","severity":2,"message":"'SidebarContent' was used before it was defined.","line":158,"column":12,"nodeType":"JSXIdentifier","messageId":"usedBeforeDefined","endLine":158,"endColumn":26},{"ruleId":"react/prop-types","severity":2,"message":"'navigation' is missing in props validation","line":256,"column":27,"nodeType":"Property","messageId":"missingPropType","endLine":256,"endColumn":37},{"ruleId":"react/prop-types","severity":2,"message":"'darkMode' is missing in props validation","line":256,"column":39,"nodeType":"Property","messageId":"missingPropType","endLine":256,"endColumn":47},{"ruleId":"react/prop-types","severity":2,"message":"'onClose' is missing in props validation","line":256,"column":49,"nodeType":"Property","messageId":"missingPropType","endLine":256,"endColumn":56},{"ruleId":"react/button-has-type","severity":2,"message":"Missing an explicit type attribute for button","line":290,"column":11,"nodeType":"JSXElement","messageId":"missingType","endLine":300,"endColumn":20},{"ruleId":"react/prop-types","severity":2,"message":"'navigation.map' is missing in props validation","line":306,"column":21,"nodeType":"Identifier","messageId":"missingPropType","endLine":306,"endColumn":24}],"suppressedMessages":[],"errorCount":16,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect, useContext } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport {\n  Bars3Icon,\n  XMarkIcon,\n  SunIcon,\n  MoonIcon,\n  BellIcon,\n  Cog6ToothIcon,\n  ChartBarIcon,\n  UserGroupIcon,\n  CpuChipIcon,\n  SignalIcon,\n} from '@heroicons/react/24/outline';\nimport { cn } from '@/lib/utils';\nimport { ThemeContext } from '@/contexts/ThemeContext';\n\nimport { CommandPalette } from './CommandPalette';\n\nconst getNavigationItemClass = (item, darkMode) => {\n  if (item.current) {\n    return darkMode\n      ? 'bg-blue-500/20 text-blue-400 border border-blue-500/30'\n      : 'bg-blue-500/20 text-blue-600 border border-blue-500/30';\n  }\n  return darkMode\n    ? 'text-slate-400 hover:text-white hover:bg-slate-700/50'\n    : 'text-slate-600 hover:text-slate-900 hover:bg-white/50';\n};\n\nfunction Layout({ children, title = 'WhatsDeX Dashboard' }) {\n  const [sidebarOpen, setSidebarOpen] = useState(false);\n  const { darkMode, toggleDarkMode } = useContext(ThemeContext);\n  const [notifications, setNotifications] = useState([]);\n\n  // Simulate new notifications\n  useEffect(() => {\n    const interval = setInterval(() => {\n      setNotifications(prev => [\n        ...prev,\n        {\n          id: Date.now(),\n          text: `New notification at ${new Date().toLocaleTimeString()}`,\n        },\n      ]);\n    }, 5000);\n    return () => clearInterval(interval);\n  }, []);\n\n  const navigation = [\n    {\n      name: 'Dashboard',\n      href: '/',\n      icon: ChartBarIcon,\n      current: true,\n    },\n    {\n      name: 'Users',\n      href: '/users',\n      icon: UserGroupIcon,\n      current: false,\n    },\n    {\n      name: 'AI Analytics',\n      href: '/ai-analytics',\n      icon: CpuChipIcon,\n      current: false,\n    },\n    {\n      name: 'System',\n      href: '/system',\n      icon: SignalIcon,\n      current: false,\n    },\n    {\n      name: 'Settings',\n      href: '/settings',\n      icon: Cog6ToothIcon,\n      current: false,\n    },\n  ];\n\n  return (\n    <div\n      className={cn(\n        'min-h-screen bg-gradient-to-br transition-all duration-500',\n        darkMode\n          ? 'from-slate-900 via-slate-800 to-slate-900'\n          : 'from-blue-50 via-indigo-50 to-purple-50'\n      )}\n    >\n      <CommandPalette />\n      {/* Background Effects */}\n      <div className=\"fixed inset-0 overflow-hidden pointer-events-none\">\n        <div\n          className={cn(\n            'absolute -top-40 -right-40 w-80 h-80 rounded-full blur-3xl opacity-20 animate-float',\n            darkMode ? 'bg-blue-500' : 'bg-blue-400'\n          )}\n        />\n        <div\n          className={cn(\n            'absolute -bottom-40 -left-40 w-80 h-80 rounded-full blur-3xl opacity-20 animate-float',\n            darkMode ? 'bg-purple-500' : 'bg-purple-400'\n          )}\n          style={{ animationDelay: '2s' }}\n        />\n        <div\n          className={cn(\n            'absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-96 h-96 rounded-full blur-3xl opacity-10 animate-pulse-slow',\n            darkMode ? 'bg-indigo-500' : 'bg-indigo-400'\n          )}\n        />\n      </div>\n\n      {/* Sidebar */}\n      <AnimatePresence>\n        {sidebarOpen && (\n          <>\n            {/* Backdrop */}\n            <motion.div\n              initial={{ opacity: 0 }}\n              animate={{ opacity: 1 }}\n              exit={{ opacity: 0 }}\n              className=\"fixed inset-0 z-40 bg-black/50 backdrop-blur-sm lg:hidden\"\n              onClick={() => setSidebarOpen(false)}\n            />\n\n            {/* Sidebar Panel */}\n            <motion.div\n              initial={{ x: '-100%' }}\n              animate={{ x: 0 }}\n              exit={{ x: '-100%' }}\n              transition={{ type: 'tween', duration: 0.3 }}\n              className={cn(\n                'fixed inset-y-0 left-0 z-50 w-64 backdrop-blur-xl border-r',\n                darkMode ? 'bg-slate-900/80 border-slate-700/50' : 'bg-white/80 border-white/20'\n              )}\n            >\n              <SidebarContent\n                navigation={navigation}\n                darkMode={darkMode}\n                onClose={() => setSidebarOpen(false)}\n              />\n            </motion.div>\n          </>\n        )}\n      </AnimatePresence>\n\n      {/* Desktop Sidebar */}\n      <div className=\"hidden lg:fixed lg:inset-y-0 lg:left-0 lg:z-40 lg:block lg:w-64\">\n        <div\n          className={cn(\n            'h-full backdrop-blur-xl border-r',\n            darkMode ? 'bg-slate-900/80 border-slate-700/50' : 'bg-white/80 border-white/20'\n          )}\n        >\n          <SidebarContent navigation={navigation} darkMode={darkMode} />\n        </div>\n      </div>\n\n      {/* Main Content */}\n      <div className=\"lg:pl-64\">\n        {/* Top Navigation */}\n        <div\n          className={cn(\n            'sticky top-0 z-30 backdrop-blur-xl border-b',\n            darkMode ? 'bg-slate-900/60 border-slate-700/50' : 'bg-white/60 border-white/20'\n          )}\n        >\n          <div className=\"flex h-16 items-center justify-between px-4 sm:px-6 lg:px-8\">\n            {/* Mobile menu button */}\n            <button\n              type=\"button\"\n              className={cn(\n                'rounded-lg p-2 transition-all duration-200 hover:scale-105',\n                darkMode\n                  ? 'text-slate-400 hover:text-white hover:bg-slate-700/50'\n                  : 'text-slate-600 hover:text-slate-900 hover:bg-white/50'\n              )}\n              onClick={() => setSidebarOpen(true)}\n            >\n              <Bars3Icon className=\"h-6 w-6\" />\n            </button>\n\n            {/* Title */}\n            <motion.h1\n              initial={{ opacity: 0, y: -20 }}\n              animate={{ opacity: 1, y: 0 }}\n              className={cn('text-xl font-bold', darkMode ? 'text-white' : 'text-slate-900')}\n            >\n              {title}\n            </motion.h1>\n\n            {/* Right side actions */}\n            <div className=\"flex items-center space-x-4\">\n              {/* Theme toggle */}\n              <motion.button\n                whileHover={{ scale: 1.05 }}\n                whileTap={{ scale: 0.95 }}\n                onClick={toggleDarkMode}\n                className={cn(\n                  'rounded-lg p-2 transition-all duration-200',\n                  darkMode\n                    ? 'text-slate-400 hover:text-yellow-400 hover:bg-slate-700/50'\n                    : 'text-slate-600 hover:text-slate-900 hover:bg-white/50'\n                )}\n              >\n                {darkMode ? <SunIcon className=\"h-5 w-5\" /> : <MoonIcon className=\"h-5 w-5\" />}\n              </motion.button>\n\n              {/* Notifications */}\n              <motion.button\n                whileHover={{ scale: 1.05 }}\n                whileTap={{ scale: 0.95 }}\n                onClick={() => setNotifications([])}\n                className={cn(\n                  'relative rounded-lg p-2 transition-all duration-200',\n                  darkMode\n                    ? 'text-slate-400 hover:text-white hover:bg-slate-700/50'\n                    : 'text-slate-600 hover:text-slate-900 hover:bg-white/50'\n                )}\n              >\n                <BellIcon className=\"h-5 w-5\" />\n                {notifications.length > 0 && (\n                  <motion.span\n                    initial={{ scale: 0 }}\n                    animate={{ scale: 1 }}\n                    className=\"absolute -top-1 -right-1 h-5 w-5 rounded-full bg-red-500 text-xs text-white flex items-center justify-center font-medium\"\n                  >\n                    {notifications.length}\n                  </motion.span>\n                )}\n              </motion.button>\n            </div>\n          </div>\n        </div>\n\n        {/* Page Content */}\n        <main className=\"relative\">\n          <motion.div\n            initial={{ opacity: 0, y: 20 }}\n            animate={{ opacity: 1, y: 0 }}\n            transition={{ duration: 0.5 }}\n            className=\"px-4 py-8 sm:px-6 lg:px-8\"\n          >\n            {children}\n          </motion.div>\n        </main>\n      </div>\n    </div>\n  );\n}\n\n// Sidebar Content Component\nfunction SidebarContent({ navigation, darkMode, onClose }) {\n  return (\n    <div className=\"flex h-full flex-col\">\n      {/* Logo */}\n      <motion.div\n        initial={{ opacity: 0, x: -20 }}\n        animate={{ opacity: 1, x: 0 }}\n        className=\"flex h-16 items-center justify-between px-6\"\n      >\n        <div className=\"flex items-center space-x-3\">\n          <motion.div\n            whileHover={{ rotate: 360 }}\n            transition={{ duration: 0.5 }}\n            className={cn(\n              'flex h-10 w-10 items-center justify-center rounded-xl',\n              darkMode\n                ? 'bg-gradient-to-br from-blue-500 to-purple-600'\n                : 'bg-gradient-to-br from-blue-500 to-purple-600'\n            )}\n          >\n            <span className=\"text-xl font-bold text-white\">W</span>\n          </motion.div>\n          <div>\n            <h2 className={cn('text-lg font-bold', darkMode ? 'text-white' : 'text-slate-900')}>\n              WhatsDeX\n            </h2>\n            <p className={cn('text-xs', darkMode ? 'text-slate-400' : 'text-slate-600')}>\n              AI-Powered Bot\n            </p>\n          </div>\n        </div>\n\n        {/* Mobile close button */}\n        {onClose && (\n          <button\n            onClick={onClose}\n            className={cn(\n              'rounded-lg p-1 transition-colors',\n              darkMode\n                ? 'text-slate-400 hover:text-white hover:bg-slate-700/50'\n                : 'text-slate-600 hover:text-slate-900 hover:bg-white/50'\n            )}\n          >\n            <XMarkIcon className=\"h-5 w-5\" />\n          </button>\n        )}\n      </motion.div>\n\n      {/* Navigation */}\n      <nav className=\"flex-1 space-y-1 px-4 py-4\">\n        {navigation.map((item, index) => (\n          <motion.a\n            key={item.name}\n            initial={{ opacity: 0, x: -20 }}\n            animate={{ opacity: 1, x: 0 }}\n            transition={{ delay: index * 0.1 }}\n            href={item.href}\n            className={cn(\n              'group flex items-center rounded-xl px-3 py-3 text-sm font-medium transition-all duration-200 hover:scale-105',\n              getNavigationItemClass(item, darkMode)\n            )}\n          >\n            <item.icon className=\"mr-3 h-5 w-5 flex-shrink-0\" />\n            {item.name}\n            {item.current && (\n              <motion.div\n                layoutId=\"activeTab\"\n                className=\"ml-auto h-2 w-2 rounded-full bg-blue-500\"\n              />\n            )}\n          </motion.a>\n        ))}\n      </nav>\n\n      {/* Status Indicator */}\n      <motion.div\n        initial={{ opacity: 0, y: 20 }}\n        animate={{ opacity: 1, y: 0 }}\n        transition={{ delay: 0.5 }}\n        className=\"border-t border-slate-700/50 p-4\"\n      >\n        <div className=\"flex items-center space-x-3\">\n          <div className=\"flex h-3 w-3\">\n            <motion.div\n              animate={{ scale: [1, 1.2, 1] }}\n              transition={{ duration: 2, repeat: Infinity }}\n              className=\"h-3 w-3 rounded-full bg-green-500\"\n            />\n          </div>\n          <div>\n            <p className={cn('text-sm font-medium', darkMode ? 'text-white' : 'text-slate-900')}>\n              System Online\n            </p>\n            <p className={cn('text-xs', darkMode ? 'text-slate-400' : 'text-slate-600')}>\n              All services running\n            </p>\n          </div>\n        </div>\n      </motion.div>\n    </div>\n  );\n}\n\nexport default Layout;\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\web\\components\\common\\withAuth.js","messages":[{"ruleId":"func-names","severity":1,"message":"Unexpected unnamed function.","line":5,"column":3,"nodeType":"FunctionExpression","messageId":"unnamed","endLine":5,"endColumn":12},{"ruleId":"react/jsx-filename-extension","severity":2,"message":"JSX not allowed in files with extension '.js'","line":15,"column":12,"nodeType":"JSXElement","messageId":"noJSXWithExtension","endLine":15,"endColumn":43}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useRouter } from 'next/router';\nimport { useEffect } from 'react';\n\nconst withAuth = WrappedComponent =>\n  function (props) {\n    const router = useRouter();\n\n    useEffect(() => {\n      const token = localStorage.getItem('token');\n      if (!token) {\n        router.replace('/login');\n      }\n    }, [router]);\n\n    return <WrappedComponent {...props} />;\n  };\n\nexport default withAuth;\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\web\\components\\ui\\animated-list.tsx","messages":[{"ruleId":"import-x/extensions","severity":2,"message":"Missing file extension for \"@/lib/utils\"","line":4,"column":20,"nodeType":"Literal","messageId":"missing","endLine":4,"endColumn":33},{"ruleId":"import-x/no-unresolved","severity":2,"message":"Unable to resolve path to module '@/lib/utils'.","line":4,"column":20,"nodeType":"Literal","messageId":"unresolved","endLine":4,"endColumn":33},{"ruleId":"react/require-default-props","severity":2,"message":"propType \"delay\" is not required, but has no corresponding defaultProps declaration.","line":23,"column":3,"nodeType":"TSPropertySignature","messageId":"shouldHaveDefault","endLine":23,"endColumn":18},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of arrow function.","line":31,"column":18,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":31,"endColumn":20}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { ComponentPropsWithoutRef, useEffect, useMemo, useState } from 'react';\nimport { AnimatePresence, motion, MotionProps } from 'motion/react';\n\nimport { cn } from '@/lib/utils';\n\nexport function AnimatedListItem({ children }: { children: React.ReactNode }) {\n  const animations: MotionProps = {\n    initial: { scale: 0, opacity: 0 },\n    animate: { scale: 1, opacity: 1, originY: 0 },\n    exit: { scale: 0, opacity: 0 },\n    transition: { type: 'spring', stiffness: 350, damping: 40 },\n  };\n\n  return (\n    <motion.div {...animations} layout className=\"mx-auto w-full\">\n      {children}\n    </motion.div>\n  );\n}\n\nexport interface AnimatedListProps extends ComponentPropsWithoutRef<'div'> {\n  children: React.ReactNode;\n  delay?: number;\n}\n\nexport const AnimatedList = React.memo(\n  ({ children, className, delay = 1000, ...props }: AnimatedListProps) => {\n    const [index, setIndex] = useState(0);\n    const childrenArray = useMemo(() => React.Children.toArray(children), [children]);\n\n    useEffect(() => {\n      if (index < childrenArray.length - 1) {\n        const timeout = setTimeout(() => {\n          setIndex(prevIndex => (prevIndex + 1) % childrenArray.length);\n        }, delay);\n\n        return () => clearTimeout(timeout);\n      }\n    }, [index, delay, childrenArray.length]);\n\n    const itemsToShow = useMemo(() => {\n      const result = childrenArray.slice(0, index + 1).reverse();\n      return result;\n    }, [index, childrenArray]);\n\n    return (\n      <div className={cn(`flex flex-col items-center gap-4`, className)} {...props}>\n        <AnimatePresence>\n          {itemsToShow.map(item => (\n            <AnimatedListItem key={(item as React.ReactElement).key}>{item}</AnimatedListItem>\n          ))}\n        </AnimatePresence>\n      </div>\n    );\n  }\n);\n\nAnimatedList.displayName = 'AnimatedList';\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\web\\components\\ui\\area-chart-01.js","messages":[{"ruleId":"import-x/extensions","severity":2,"message":"Missing file extension for \"@/components/ui/chart\"","line":13,"column":8,"nodeType":"Literal","messageId":"missing","endLine":13,"endColumn":31},{"ruleId":"import-x/no-unresolved","severity":2,"message":"Unable to resolve path to module '@/components/ui/chart'.","line":13,"column":8,"nodeType":"Literal","messageId":"unresolved","endLine":13,"endColumn":31},{"ruleId":"import-x/extensions","severity":2,"message":"Missing file extension for \"@/components/ui/select\"","line":20,"column":8,"nodeType":"Literal","messageId":"missing","endLine":20,"endColumn":32},{"ruleId":"import-x/no-unresolved","severity":2,"message":"Unable to resolve path to module '@/components/ui/select'.","line":20,"column":8,"nodeType":"Literal","messageId":"unresolved","endLine":20,"endColumn":32},{"ruleId":"prettier/prettier","severity":2,"message":"Parsing error: Missing semicolon.","line":130,"column":3,"nodeType":null},{"ruleId":"react/jsx-filename-extension","severity":2,"message":"JSX not allowed in files with extension '.js'","line":150,"column":5,"nodeType":"JSXElement","messageId":"noJSXWithExtension","endLine":255,"endColumn":11},{"ruleId":"react/no-unstable-nested-components","severity":2,"message":"Do not define components during render. React will see a new component type on every render and destroy the entire subtreeâ€™s DOM nodes and state (https://reactjs.org/docs/reconciliation.html#elements-of-different-types). Instead, move this component definition out of the parent component â€œChartAreaDefaultâ€ and pass data as props. If you want to allow component creation in props, set allowAsProps option to true.","line":251,"column":35,"nodeType":"ArrowFunctionExpression","endLine":251,"endColumn":128},{"ruleId":"react/prop-types","severity":2,"message":"'payload' is missing in props validation","line":251,"column":81,"nodeType":"Identifier","messageId":"missingPropType","endLine":251,"endColumn":88},{"ruleId":"react/prop-types","severity":2,"message":"'verticalAlign' is missing in props validation","line":251,"column":111,"nodeType":"Identifier","messageId":"missingPropType","endLine":251,"endColumn":124}],"suppressedMessages":[],"errorCount":9,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client'\n\nimport * as React from \"react\"\nimport { Area, AreaChart, CartesianGrid, XAxis } from \"recharts\"\n\nimport {\n  ChartConfig,\n  ChartContainer,\n  ChartLegend,\n  ChartLegendContent,\n  ChartTooltip,\n  ChartTooltipContent,\n} from \"@/components/ui/chart\"\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\"\n\nexport const description = \"An interactive area chart\"\n\nconst chartData = [\n  { date: \"2024-04-01\", desktop: 222, mobile: 150 },\n  { date: \"2024-04-02\", desktop: 97, mobile: 180 },\n  { date: \"2024-04-03\", desktop: 167, mobile: 120 },\n  { date: \"2024-04-04\", desktop: 242, mobile: 260 },\n  { date: \"2024-04-05\", desktop: 373, mobile: 290 },\n  { date: \"2024-04-06\", desktop: 301, mobile: 340 },\n  { date: \"2024-04-07\", desktop: 245, mobile: 180 },\n  { date: \"2024-04-08\", desktop: 409, mobile: 320 },\n  { date: \"2024-04-09\", desktop: 59, mobile: 110 },\n  { date: \"2024-04-10\", desktop: 261, mobile: 190 },\n  { date: \"2024-04-11\", desktop: 327, mobile: 350 },\n  { date: \"2024-04-12\", desktop: 292, mobile: 210 },\n  { date: \"2024-04-13\", desktop: 342, mobile: 380 },\n  { date: \"2024-04-14\", desktop: 137, mobile: 220 },\n  { date: \"2024-04-15\", desktop: 120, mobile: 170 },\n  { date: \"2024-04-16\", desktop: 138, mobile: 190 },\n  { date: \"2024-04-17\", desktop: 446, mobile: 360 },\n  { date: \"2024-04-18\", desktop: 364, mobile: 410 },\n  { date: \"2024-04-19\", desktop: 243, mobile: 180 },\n  { date: \"2024-04-20\", desktop: 89, mobile: 150 },\n  { date: \"2024-04-21\", desktop: 137, mobile: 200 },\n  { date: \"2024-04-22\", desktop: 224, mobile: 170 },\n  { date: \"2024-04-23\", desktop: 138, mobile: 230 },\n  { date: \"2024-04-24\", desktop: 387, mobile: 290 },\n  { date: \"2024-04-25\", desktop: 215, mobile: 250 },\n  { date: \"2024-04-26\", desktop: 75, mobile: 130 },\n  { date: \"2024-04-27\", desktop: 383, mobile: 420 },\n  { date: \"2024-04-28\", desktop: 122, mobile: 180 },\n  { date: \"2024-04-29\", desktop: 315, mobile: 240 },\n  { date: \"2024-04-30\", desktop: 454, mobile: 380 },\n  { date: \"2024-05-01\", desktop: 165, mobile: 220 },\n  { date: \"2024-05-02\", desktop: 293, mobile: 310 },\n  { date: \"2024-05-03\", desktop: 247, mobile: 190 },\n  { date: \"2024-05-04\", desktop: 385, mobile: 420 },\n  { date: \"2024-05-05\", desktop: 481, mobile: 390 },\n  { date: \"2024-05-06\", desktop: 498, mobile: 520 },\n  { date: \"2024-05-07\", desktop: 388, mobile: 300 },\n  { date: \"2024-05-08\", desktop: 149, mobile: 210 },\n  { date: \"2024-05-09\", desktop: 227, mobile: 180 },\n  { date: \"2024-05-10\", desktop: 293, mobile: 330 },\n  { date: \"2024-05-11\", desktop: 335, mobile: 270 },\n  { date: \"2024-05-12\", desktop: 197, mobile: 240 },\n  { date: \"2024-05-13\", desktop: 197, mobile: 160 },\n  { date: \"2024-05-14\", desktop: 448, mobile: 490 },\n  { date: \"2024-05-15\", desktop: 473, mobile: 380 },\n  { date: \"2024-05-16\", desktop: 338, mobile: 400 },\n  { date: \"2024-05-17\", desktop: 499, mobile: 420 },\n  { date: \"2024-05-18\", desktop: 315, mobile: 350 },\n  { date: \"2024-05-19\", desktop: 235, mobile: 180 },\n  { date: \"2024-05-20\", desktop: 177, mobile: 230 },\n  { date: \"2024-05-21\", desktop: 82, mobile: 140 },\n  { date: \"2024-05-22\", desktop: 81, mobile: 120 },\n  { date: \"2024-05-23\", desktop: 252, mobile: 290 },\n  { date: \"2024-05-24\", desktop: 294, mobile: 220 },\n  { date: \"2024-05-25\", desktop: 201, mobile: 250 },\n  { date: \"2024-05-26\", desktop: 213, mobile: 170 },\n  { date: \"2024-05-27\", desktop: 420, mobile: 460 },\n  { date: \"2024-05-28\", desktop: 233, mobile: 190 },\n  { date: \"2024-05-29\", desktop: 78, mobile: 130 },\n  { date: \"2024-05-30\", desktop: 340, mobile: 280 },\n  { date: \"2024-05-31\", desktop: 178, mobile: 230 },\n  { date: \"2024-06-01\", desktop: 178, mobile: 200 },\n  { date: \"2024-06-02\", desktop: 470, mobile: 410 },\n  { date: \"2024-06-03\", desktop: 103, mobile: 160 },\n  { date: \"2024-06-04\", desktop: 439, mobile: 380 },\n  { date: \"2024-06-05\", desktop: 88, mobile: 140 },\n  { date: \"2024-06-06\", desktop: 294, mobile: 250 },\n  { date: \"2024-06-07\", desktop: 323, mobile: 370 },\n  { date: \"2024-06-08\", desktop: 385, mobile: 320 },\n  { date: \"2024-06-09\", desktop: 438, mobile: 480 },\n  { date: \"2024-06-10\", desktop: 155, mobile: 200 },\n  { date: \"2024-06-11\", desktop: 92, mobile: 150 },\n  { date: \"2024-06-12\", desktop: 492, mobile: 420 },\n  { date: \"2024-06-13\", desktop: 81, mobile: 130 },\n  { date: \"2024-06-14\", desktop: 426, mobile: 380 },\n  { date: \"2024-06-15\", desktop: 307, mobile: 350 },\n  { date: \"2024-06-16\", desktop: 371, mobile: 310 },\n  { date: \"2024-06-17\", desktop: 475, mobile: 520 },\n  { date: \"2024-06-18\", desktop: 107, mobile: 170 },\n  { date: \"2024-06-19\", desktop: 341, mobile: 290 },\n  { date: \"2024-06-20\", desktop: 408, mobile: 450 },\n  { date: \"2024-06-21\", desktop: 169, mobile: 210 },\n  { date: \"2024-06-22\", desktop: 317, mobile: 270 },\n  { date: \"2024-06-23\", desktop: 480, mobile: 530 },\n  { date: \"2024-06-24\", desktop: 132, mobile: 180 },\n  { date: \"2024-06-25\", desktop: 141, mobile: 190 },\n  { date: \"2024-06-26\", desktop: 434, mobile: 380 },\n  { date: \"2024-06-27\", desktop: 448, mobile: 490 },\n  { date: \"2024-06-28\", desktop: 149, mobile: 200 },\n  { date: \"2024-06-29\", desktop: 103, mobile: 160 },\n  { date: \"2024-06-30\", desktop: 446, mobile: 400 },\n]\n\nconst chartConfig = {\n  visitors: {\n    label: \"Visitors\",\n  },\n  desktop: {\n    label: \"Desktop\",\n    color: \"var(--chart-1)\",\n  },\n  mobile: {\n    label: \"Mobile\",\n    color: \"var(--chart-2)\",\n  },\n} satisfies ChartConfig\n\nexport function ChartAreaDefault() {\n  const [timeRange, setTimeRange] = React.useState(\"90d\")\n\n  const filteredData = chartData.filter((item) => {\n    const date = new Date(item.date)\n    const referenceDate = new Date(\"2024-06-30\")\n    let daysToSubtract = 90\n    if (timeRange === \"30d\") {\n      daysToSubtract = 30\n    } else if (timeRange === \"7d\") {\n      daysToSubtract = 7\n    }\n    const startDate = new Date(referenceDate)\n    startDate.setDate(startDate.getDate() - daysToSubtract)\n    return date >= startDate\n  })\n\n  return (\n    <div className=\"w-full h-full flex flex-col p-4\">\n      <div className=\"flex items-center gap-2 border-b pb-4 mb-4 sm:flex-row\">\n        <div className=\"grid flex-1 gap-1\">\n          <h3 className=\"text-lg font-semibold\">Area Chart - Interactive</h3>\n          <p className=\"text-sm text-muted-foreground\">\n            Showing total visitors for the last 3 months\n          </p>\n        </div>\n        <Select value={timeRange} onValueChange={setTimeRange}>\n          <SelectTrigger\n            className=\"hidden w-[160px] rounded-lg sm:ml-auto sm:flex\"\n            aria-label=\"Select a value\"\n          >\n            <SelectValue placeholder=\"Last 3 months\" />\n          </SelectTrigger>\n          <SelectContent className=\"rounded-xl\">\n            <SelectItem value=\"90d\" className=\"rounded-lg\">\n              Last 3 months\n            </SelectItem>\n            <SelectItem value=\"30d\" className=\"rounded-lg\">\n              Last 30 days\n            </SelectItem>\n            <SelectItem value=\"7d\" className=\"rounded-lg\">\n              Last 7 days\n            </SelectItem>\n          </SelectContent>\n        </Select>\n      </div>\n      <div className=\"flex-1 flex items-center justify-center min-h-0\">\n        <ChartContainer\n          config={chartConfig}\n          className=\"h-[250px] w-full\"\n        >\n          <AreaChart data={filteredData}>\n            <defs>\n              <linearGradient id=\"area-chart-01-fillDesktop\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\n                <stop\n                  offset=\"5%\"\n                  stopColor=\"var(--color-desktop)\"\n                  stopOpacity={0.8}\n                />\n                <stop\n                  offset=\"95%\"\n                  stopColor=\"var(--color-desktop)\"\n                  stopOpacity={0.1}\n                />\n              </linearGradient>\n              <linearGradient id=\"area-chart-01-fillMobile\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\n                <stop\n                  offset=\"5%\"\n                  stopColor=\"var(--color-mobile)\"\n                  stopOpacity={0.8}\n                />\n                <stop\n                  offset=\"95%\"\n                  stopColor=\"var(--color-mobile)\"\n                  stopOpacity={0.1}\n                />\n              </linearGradient>\n            </defs>\n            <CartesianGrid vertical={false} />\n            <XAxis\n              dataKey=\"date\"\n              tickLine={false}\n              axisLine={false}\n              tickMargin={8}\n              minTickGap={32}\n              tickFormatter={(value) => {\n                const date = new Date(value)\n                return date.toLocaleDateString(\"en-US\", {\n                  month: \"short\",\n                  day: \"numeric\",\n                })\n              }}\n            />\n            <ChartTooltip\n              cursor={false}\n              content={\n                <ChartTooltipContent\n                  labelFormatter={(value) => new Date(value).toLocaleDateString(\"en-US\", {\n                      month: \"short\",\n                      day: \"numeric\",\n                    })}\n                  indicator=\"dot\"\n                />\n              }\n            />\n            <Area\n              dataKey=\"mobile\"\n              type=\"natural\"\n              fill=\"url(#area-chart-01-fillMobile)\"\n              stroke=\"var(--color-mobile)\"\n              stackId=\"a\"\n            />\n            <Area\n              dataKey=\"desktop\"\n              type=\"natural\"\n              fill=\"url(#area-chart-01-fillDesktop)\"\n              stroke=\"var(--color-desktop)\"\n              stackId=\"a\"\n            />\n            <ChartLegend content={(props) => <ChartLegendContent payload={props.payload} verticalAlign={props.verticalAlign} />} />\n          </AreaChart>\n        </ChartContainer>\n      </div>\n    </div>\n  )\n}\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\web\\components\\ui\\badge.tsx","messages":[{"ruleId":"import-x/extensions","severity":2,"message":"Missing file extension for \"@/lib/utils\"","line":4,"column":20,"nodeType":"Literal","messageId":"missing","endLine":4,"endColumn":33},{"ruleId":"import-x/no-unresolved","severity":2,"message":"Unable to resolve path to module '@/lib/utils'.","line":4,"column":20,"nodeType":"Literal","messageId":"unresolved","endLine":4,"endColumn":33}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from 'react';\nimport { cva, type VariantProps } from 'class-variance-authority';\n\nimport { cn } from '@/lib/utils';\n\nconst badgeVariants = cva(\n  'inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2',\n  {\n    variants: {\n      variant: {\n        default: 'border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80',\n        secondary:\n          'border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80',\n        destructive:\n          'border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80',\n        outline: 'text-foreground',\n        success:\n          'border-transparent bg-green-500/20 text-green-600 dark:text-green-400 hover:bg-green-500/30',\n        warning:\n          'border-transparent bg-yellow-500/20 text-yellow-700 dark:text-yellow-400 hover:bg-yellow-500/30',\n        error:\n          'border-transparent bg-red-500/20 text-red-600 dark:text-red-400 hover:bg-red-500/30',\n        info: 'border-transparent bg-blue-500/20 text-blue-600 dark:text-blue-400 hover:bg-blue-500/30',\n      },\n    },\n    defaultVariants: {\n      variant: 'default',\n    },\n  }\n);\n\nexport interface BadgeProps\n  extends React.HTMLAttributes<HTMLDivElement>,\n    VariantProps<typeof badgeVariants> {}\n\nfunction Badge({ className, variant, ...props }: BadgeProps) {\n  return <div className={cn(badgeVariants({ variant }), className)} {...props} />;\n}\n\nexport { Badge, badgeVariants };\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\web\\components\\ui\\bento-grid.tsx","messages":[{"ruleId":"import-x/extensions","severity":2,"message":"Missing file extension for \"@/lib/utils\"","line":4,"column":20,"nodeType":"Literal","messageId":"missing","endLine":4,"endColumn":33},{"ruleId":"import-x/no-unresolved","severity":2,"message":"Unable to resolve path to module '@/lib/utils'.","line":4,"column":20,"nodeType":"Literal","messageId":"unresolved","endLine":4,"endColumn":33},{"ruleId":"import-x/extensions","severity":2,"message":"Missing file extension for \"@/components/ui/button\"","line":5,"column":24,"nodeType":"Literal","messageId":"missing","endLine":5,"endColumn":48},{"ruleId":"import-x/no-unresolved","severity":2,"message":"Unable to resolve path to module '@/components/ui/button'.","line":5,"column":24,"nodeType":"Literal","messageId":"unresolved","endLine":5,"endColumn":48},{"ruleId":"react/require-default-props","severity":2,"message":"propType \"className\" is not required, but has no corresponding defaultProps declaration.","line":9,"column":3,"nodeType":"TSPropertySignature","messageId":"shouldHaveDefault","endLine":9,"endColumn":22}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { ComponentPropsWithoutRef, ReactNode } from 'react';\nimport { ArrowRightIcon } from '@radix-ui/react-icons';\n\nimport { cn } from '@/lib/utils';\nimport { Button } from '@/components/ui/button';\n\ninterface BentoGridProps extends ComponentPropsWithoutRef<'div'> {\n  children: ReactNode;\n  className?: string;\n}\n\ninterface BentoCardProps extends ComponentPropsWithoutRef<'div'> {\n  name: string;\n  className: string;\n  background: ReactNode;\n  Icon: React.ElementType;\n  description: string;\n  href: string;\n  cta: string;\n}\n\nfunction BentoGrid({ children, className, ...props }: BentoGridProps) {\n  return (\n    <div className={cn('grid w-full auto-rows-[22rem] grid-cols-3 gap-4', className)} {...props}>\n      {children}\n    </div>\n  );\n}\n\nfunction BentoCard({\n  name,\n  className,\n  background,\n  Icon,\n  description,\n  href,\n  cta,\n  ...props\n}: BentoCardProps) {\n  return (\n    <div\n      key={name}\n      className={cn(\n        'group relative col-span-3 flex flex-col justify-between overflow-hidden rounded-xl',\n        // light styles\n        'bg-background [box-shadow:0_0_0_1px_rgba(0,0,0,.03),0_2px_4px_rgba(0,0,0,.05),0_12px_24px_rgba(0,0,0,.05)]',\n        // dark styles\n        'dark:bg-background transform-gpu dark:[box-shadow:0_-20px_80px_-20px_#ffffff1f_inset] dark:[border:1px_solid_rgba(255,255,255,.1)]',\n        className\n      )}\n      {...props}\n    >\n      <div>{background}</div>\n      <div className=\"p-4\">\n        <div className=\"pointer-events-none z-10 flex transform-gpu flex-col gap-1 transition-all duration-300 lg:group-hover:-translate-y-10\">\n          <Icon className=\"h-12 w-12 origin-left transform-gpu text-neutral-700 transition-all duration-300 ease-in-out group-hover:scale-75\" />\n          <h3 className=\"text-xl font-semibold text-neutral-700 dark:text-neutral-300\">{name}</h3>\n          <p className=\"max-w-lg text-neutral-400\">{description}</p>\n        </div>\n\n        <div\n          className={cn(\n            'pointer-events-none flex w-full translate-y-0 transform-gpu flex-row items-center transition-all duration-300 group-hover:translate-y-0 group-hover:opacity-100 lg:hidden'\n          )}\n        >\n          <Button variant=\"link\" asChild size=\"sm\" className=\"pointer-events-auto p-0\">\n            <a href={href}>\n              {cta}\n              <ArrowRightIcon className=\"ms-2 h-4 w-4 rtl:rotate-180\" />\n            </a>\n          </Button>\n        </div>\n      </div>\n\n      <div\n        className={cn(\n          'pointer-events-none absolute bottom-0 hidden w-full translate-y-10 transform-gpu flex-row items-center p-4 opacity-0 transition-all duration-300 group-hover:translate-y-0 group-hover:opacity-100 lg:flex'\n        )}\n      >\n        <Button variant=\"link\" asChild size=\"sm\" className=\"pointer-events-auto p-0\">\n          <a href={href}>\n            {cta}\n            <ArrowRightIcon className=\"ms-2 h-4 w-4 rtl:rotate-180\" />\n          </a>\n        </Button>\n      </div>\n\n      <div className=\"pointer-events-none absolute inset-0 transform-gpu transition-all duration-300 group-hover:bg-black/[.03] group-hover:dark:bg-neutral-800/10\" />\n    </div>\n  );\n}\n\nexport { BentoCard, BentoGrid };\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\web\\components\\ui\\breadcrumb.tsx","messages":[{"ruleId":"import-x/extensions","severity":2,"message":"Missing file extension for \"@/lib/utils\"","line":5,"column":20,"nodeType":"Literal","messageId":"missing","endLine":5,"endColumn":33},{"ruleId":"import-x/no-unresolved","severity":2,"message":"Unable to resolve path to module '@/lib/utils'.","line":5,"column":20,"nodeType":"Literal","messageId":"unresolved","endLine":5,"endColumn":33},{"ruleId":"react/require-default-props","severity":2,"message":"propType \"separator\" is not required, but has no corresponding defaultProps declaration.","line":10,"column":5,"nodeType":"TSPropertySignature","messageId":"shouldHaveDefault","endLine":10,"endColumn":33},{"ruleId":"react/require-default-props","severity":2,"message":"propType \"asChild\" is not required, but has no corresponding defaultProps declaration.","line":39,"column":5,"nodeType":"TSPropertySignature","messageId":"shouldHaveDefault","endLine":39,"endColumn":23}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from 'react';\nimport { Slot } from '@radix-ui/react-slot';\nimport { ChevronRight, MoreHorizontal } from 'lucide-react';\n\nimport { cn } from '@/lib/utils';\n\nconst Breadcrumb = React.forwardRef<\n  HTMLElement,\n  React.ComponentPropsWithoutRef<'nav'> & {\n    separator?: React.ReactNode;\n  }\n>(({ ...props }, ref) => <nav ref={ref} aria-label=\"breadcrumb\" {...props} />);\nBreadcrumb.displayName = 'Breadcrumb';\n\nconst BreadcrumbList = React.forwardRef<HTMLOListElement, React.ComponentPropsWithoutRef<'ol'>>(\n  ({ className, ...props }, ref) => (\n    <ol\n      ref={ref}\n      className={cn(\n        'flex flex-wrap items-center gap-1.5 break-words text-sm text-muted-foreground sm:gap-2.5',\n        className\n      )}\n      {...props}\n    />\n  )\n);\nBreadcrumbList.displayName = 'BreadcrumbList';\n\nconst BreadcrumbItem = React.forwardRef<HTMLLIElement, React.ComponentPropsWithoutRef<'li'>>(\n  ({ className, ...props }, ref) => (\n    <li ref={ref} className={cn('inline-flex items-center gap-1.5', className)} {...props} />\n  )\n);\nBreadcrumbItem.displayName = 'BreadcrumbItem';\n\nconst BreadcrumbLink = React.forwardRef<\n  HTMLAnchorElement,\n  React.ComponentPropsWithoutRef<'a'> & {\n    asChild?: boolean;\n  }\n>(({ asChild, className, ...props }, ref) => {\n  const Comp = asChild ? Slot : 'a';\n\n  return (\n    <Comp\n      ref={ref}\n      className={cn('transition-colors hover:text-foreground', className)}\n      {...props}\n    />\n  );\n});\nBreadcrumbLink.displayName = 'BreadcrumbLink';\n\nconst BreadcrumbPage = React.forwardRef<HTMLSpanElement, React.ComponentPropsWithoutRef<'span'>>(\n  ({ className, ...props }, ref) => (\n    <span\n      ref={ref}\n      role=\"link\"\n      aria-disabled=\"true\"\n      aria-current=\"page\"\n      className={cn('font-normal text-foreground', className)}\n      {...props}\n    />\n  )\n);\nBreadcrumbPage.displayName = 'BreadcrumbPage';\n\nfunction BreadcrumbSeparator({ children, className, ...props }: React.ComponentProps<'li'>) {\n  return (\n    <li\n      role=\"presentation\"\n      aria-hidden=\"true\"\n      className={cn('[&>svg]:w-3.5 [&>svg]:h-3.5', className)}\n      {...props}\n    >\n      {children ?? <ChevronRight />}\n    </li>\n  );\n}\nBreadcrumbSeparator.displayName = 'BreadcrumbSeparator';\n\nfunction BreadcrumbEllipsis({ className, ...props }: React.ComponentProps<'span'>) {\n  return (\n    <span\n      role=\"presentation\"\n      aria-hidden=\"true\"\n      className={cn('flex h-9 w-9 items-center justify-center', className)}\n      {...props}\n    >\n      <MoreHorizontal className=\"h-4 w-4\" />\n      <span className=\"sr-only\">More</span>\n    </span>\n  );\n}\nBreadcrumbEllipsis.displayName = 'BreadcrumbElipssis';\n\nexport {\n  Breadcrumb,\n  BreadcrumbList,\n  BreadcrumbItem,\n  BreadcrumbLink,\n  BreadcrumbPage,\n  BreadcrumbSeparator,\n  BreadcrumbEllipsis,\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\web\\components\\ui\\button.tsx","messages":[{"ruleId":"import-x/extensions","severity":2,"message":"Missing file extension for \"@/lib/utils\"","line":5,"column":20,"nodeType":"Literal","messageId":"missing","endLine":5,"endColumn":33},{"ruleId":"import-x/no-unresolved","severity":2,"message":"Unable to resolve path to module '@/lib/utils'.","line":5,"column":20,"nodeType":"Literal","messageId":"unresolved","endLine":5,"endColumn":33},{"ruleId":"react/require-default-props","severity":2,"message":"propType \"asChild\" is not required, but has no corresponding defaultProps declaration.","line":37,"column":3,"nodeType":"TSPropertySignature","messageId":"shouldHaveDefault","endLine":37,"endColumn":21}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from 'react';\nimport { Slot } from '@radix-ui/react-slot';\nimport { cva, type VariantProps } from 'class-variance-authority';\n\nimport { cn } from '@/lib/utils';\n\nconst buttonVariants = cva(\n  'inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0',\n  {\n    variants: {\n      variant: {\n        default: 'bg-primary text-primary-foreground shadow hover:bg-primary/90',\n        destructive: 'bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90',\n        outline:\n          'border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground',\n        secondary: 'bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80',\n        ghost: 'hover:bg-accent hover:text-accent-foreground',\n        link: 'text-primary underline-offset-4 hover:underline',\n      },\n      size: {\n        default: 'h-9 px-4 py-2',\n        sm: 'h-8 rounded-md px-3 text-xs',\n        lg: 'h-10 rounded-md px-8',\n        icon: 'h-9 w-9',\n      },\n    },\n    defaultVariants: {\n      variant: 'default',\n      size: 'default',\n    },\n  }\n);\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof buttonVariants> {\n  asChild?: boolean;\n}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? Slot : 'button';\n    return (\n      <Comp className={cn(buttonVariants({ variant, size, className }))} ref={ref} {...props} />\n    );\n  }\n);\nButton.displayName = 'Button';\n\nexport { Button, buttonVariants };\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\web\\components\\ui\\card.tsx","messages":[{"ruleId":"import-x/extensions","severity":2,"message":"Missing file extension for \"@/lib/utils\"","line":3,"column":20,"nodeType":"Literal","messageId":"missing","endLine":3,"endColumn":33},{"ruleId":"import-x/no-unresolved","severity":2,"message":"Unable to resolve path to module '@/lib/utils'.","line":3,"column":20,"nodeType":"Literal","messageId":"unresolved","endLine":3,"endColumn":33}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from 'react';\n\nimport { cn } from '@/lib/utils';\n\nconst Card = React.forwardRef<HTMLDivElement, React.HTMLAttributes<HTMLDivElement>>(\n  ({ className, ...props }, ref) => (\n    <div\n      ref={ref}\n      className={cn('rounded-xl border bg-card text-card-foreground shadow', className)}\n      {...props}\n    />\n  )\n);\nCard.displayName = 'Card';\n\nconst CardHeader = React.forwardRef<HTMLDivElement, React.HTMLAttributes<HTMLDivElement>>(\n  ({ className, ...props }, ref) => (\n    <div ref={ref} className={cn('flex flex-col space-y-1.5 p-6', className)} {...props} />\n  )\n);\nCardHeader.displayName = 'CardHeader';\n\nconst CardTitle = React.forwardRef<HTMLDivElement, React.HTMLAttributes<HTMLDivElement>>(\n  ({ className, ...props }, ref) => (\n    <div\n      ref={ref}\n      className={cn('font-semibold leading-none tracking-tight', className)}\n      {...props}\n    />\n  )\n);\nCardTitle.displayName = 'CardTitle';\n\nconst CardDescription = React.forwardRef<HTMLDivElement, React.HTMLAttributes<HTMLDivElement>>(\n  ({ className, ...props }, ref) => (\n    <div ref={ref} className={cn('text-sm text-muted-foreground', className)} {...props} />\n  )\n);\nCardDescription.displayName = 'CardDescription';\n\nconst CardContent = React.forwardRef<HTMLDivElement, React.HTMLAttributes<HTMLDivElement>>(\n  ({ className, ...props }, ref) => (\n    <div ref={ref} className={cn('p-6 pt-0', className)} {...props} />\n  )\n);\nCardContent.displayName = 'CardContent';\n\nconst CardFooter = React.forwardRef<HTMLDivElement, React.HTMLAttributes<HTMLDivElement>>(\n  ({ className, ...props }, ref) => (\n    <div ref={ref} className={cn('flex items-center p-6 pt-0', className)} {...props} />\n  )\n);\nCardFooter.displayName = 'CardFooter';\n\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent };\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\web\\components\\ui\\chart.tsx","messages":[{"ruleId":"import-x/extensions","severity":2,"message":"Missing file extension for \"@/lib/utils\"","line":4,"column":20,"nodeType":"Literal","messageId":"missing","endLine":4,"endColumn":33},{"ruleId":"import-x/no-unresolved","severity":2,"message":"Unable to resolve path to module '@/lib/utils'.","line":4,"column":20,"nodeType":"Literal","messageId":"unresolved","endLine":4,"endColumn":33},{"ruleId":"react/jsx-no-constructed-context-values","severity":2,"message":"The object passed as the value prop to the Context provider (at line 47) changes every render. To fix this consider wrapping it in a useMemo hook.","line":47,"column":35,"nodeType":"ObjectExpression","messageId":"defaultMsg","endLine":47,"endColumn":45},{"ruleId":"@typescript-eslint/no-use-before-define","severity":2,"message":"'ChartStyle' was used before it was defined.","line":57,"column":10,"nodeType":"JSXIdentifier","messageId":"noUseBeforeDefine","endLine":57,"endColumn":20},{"ruleId":"@typescript-eslint/no-shadow","severity":2,"message":"'config' is already declared in the upper scope on line 65 column 27.","line":66,"column":57,"nodeType":"Identifier","messageId":"noShadow","endLine":66,"endColumn":63},{"ruleId":"react/no-danger","severity":1,"message":"Dangerous property 'dangerouslySetInnerHTML' found","line":74,"column":7,"nodeType":"JSXAttribute","messageId":"dangerousProp","endLine":89,"endColumn":9},{"ruleId":"react/require-default-props","severity":2,"message":"propType \"hideLabel\" is not required, but has no corresponding defaultProps declaration.","line":100,"column":7,"nodeType":"TSPropertySignature","messageId":"shouldHaveDefault","endLine":100,"endColumn":27},{"ruleId":"react/require-default-props","severity":2,"message":"propType \"hideIndicator\" is not required, but has no corresponding defaultProps declaration.","line":101,"column":7,"nodeType":"TSPropertySignature","messageId":"shouldHaveDefault","endLine":101,"endColumn":31},{"ruleId":"react/require-default-props","severity":2,"message":"propType \"indicator\" is not required, but has no corresponding defaultProps declaration.","line":102,"column":7,"nodeType":"TSPropertySignature","messageId":"shouldHaveDefault","endLine":102,"endColumn":45},{"ruleId":"react/require-default-props","severity":2,"message":"propType \"nameKey\" is not required, but has no corresponding defaultProps declaration.","line":103,"column":7,"nodeType":"TSPropertySignature","messageId":"shouldHaveDefault","endLine":103,"endColumn":24},{"ruleId":"react/require-default-props","severity":2,"message":"propType \"labelKey\" is not required, but has no corresponding defaultProps declaration.","line":104,"column":7,"nodeType":"TSPropertySignature","messageId":"shouldHaveDefault","endLine":104,"endColumn":25},{"ruleId":"@typescript-eslint/no-use-before-define","severity":2,"message":"'getPayloadConfigFromPayload' was used before it was defined.","line":134,"column":26,"nodeType":"Identifier","messageId":"noUseBeforeDefine","endLine":134,"endColumn":53},{"ruleId":"@typescript-eslint/no-use-before-define","severity":2,"message":"'getPayloadConfigFromPayload' was used before it was defined.","line":171,"column":34,"nodeType":"Identifier","messageId":"noUseBeforeDefine","endLine":171,"endColumn":61},{"ruleId":"react/require-default-props","severity":2,"message":"propType \"hideIcon\" is not required, but has no corresponding defaultProps declaration.","line":246,"column":7,"nodeType":"TSPropertySignature","messageId":"shouldHaveDefault","endLine":246,"endColumn":26},{"ruleId":"react/require-default-props","severity":2,"message":"propType \"nameKey\" is not required, but has no corresponding defaultProps declaration.","line":247,"column":7,"nodeType":"TSPropertySignature","messageId":"shouldHaveDefault","endLine":247,"endColumn":24},{"ruleId":"@typescript-eslint/no-use-before-define","severity":2,"message":"'getPayloadConfigFromPayload' was used before it was defined.","line":269,"column":30,"nodeType":"Identifier","messageId":"noUseBeforeDefine","endLine":269,"endColumn":57}],"suppressedMessages":[],"errorCount":15,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from 'react';\nimport * as RechartsPrimitive from 'recharts';\n\nimport { cn } from '@/lib/utils';\n\n// Format: { THEME_NAME: CSS_SELECTOR }\nconst THEMES = { light: '', dark: '.dark' } as const;\n\nexport type ChartConfig = Record<\n  string,\n  {\n    label?: React.ReactNode;\n    icon?: React.ComponentType;\n  } & (\n    | { color?: string; theme?: never }\n    | { color?: never; theme: Record<keyof typeof THEMES, string> }\n  )\n>;\n\ninterface ChartContextProps {\n  config: ChartConfig;\n}\n\nconst ChartContext = React.createContext<ChartContextProps | null>(null);\n\nfunction useChart() {\n  const context = React.useContext(ChartContext);\n\n  if (!context) {\n    throw new Error('useChart must be used within a <ChartContainer />');\n  }\n\n  return context;\n}\n\nconst ChartContainer = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<'div'> & {\n    config: ChartConfig;\n    children: React.ComponentProps<typeof RechartsPrimitive.ResponsiveContainer>['children'];\n  }\n>(({ id, className, children, config, ...props }, ref) => {\n  const uniqueId = React.useId();\n  const chartId = `chart-${id || uniqueId.replace(/:/g, '')}`;\n\n  return (\n    <ChartContext.Provider value={{ config }}>\n      <div\n        data-chart={chartId}\n        ref={ref}\n        className={cn(\n          \"flex aspect-video justify-center text-xs [&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-none [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-sector]:outline-none [&_.recharts-surface]:outline-none\",\n          className\n        )}\n        {...props}\n      >\n        <ChartStyle id={chartId} config={config} />\n        <RechartsPrimitive.ResponsiveContainer>{children}</RechartsPrimitive.ResponsiveContainer>\n      </div>\n    </ChartContext.Provider>\n  );\n});\nChartContainer.displayName = 'Chart';\n\nfunction ChartStyle({ id, config }: { id: string; config: ChartConfig }) {\n  const colorConfig = Object.entries(config).filter(([, config]) => config.theme || config.color);\n\n  if (!colorConfig.length) {\n    return null;\n  }\n\n  return (\n    <style\n      dangerouslySetInnerHTML={{\n        __html: Object.entries(THEMES)\n          .map(\n            ([theme, prefix]) => `\n${prefix} [data-chart=${id}] {\n${colorConfig\n  .map(([key, itemConfig]) => {\n    const color = itemConfig.theme?.[theme as keyof typeof itemConfig.theme] || itemConfig.color;\n    return color ? `  --color-${key}: ${color};` : null;\n  })\n  .join('\\n')}\n}\n`\n          )\n          .join('\\n'),\n      }}\n    />\n  );\n}\n\nconst ChartTooltip = RechartsPrimitive.Tooltip;\n\nconst ChartTooltipContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<typeof RechartsPrimitive.Tooltip> &\n    React.ComponentProps<'div'> & {\n      hideLabel?: boolean;\n      hideIndicator?: boolean;\n      indicator?: 'line' | 'dot' | 'dashed';\n      nameKey?: string;\n      labelKey?: string;\n    }\n>(\n  (\n    {\n      active,\n      payload,\n      className,\n      indicator = 'dot',\n      hideLabel = false,\n      hideIndicator = false,\n      label,\n      labelFormatter,\n      labelClassName,\n      formatter,\n      color,\n      nameKey,\n      labelKey,\n    },\n    ref\n  ) => {\n    const { config } = useChart();\n\n    const tooltipLabel = React.useMemo(() => {\n      if (hideLabel || !payload?.length) {\n        return null;\n      }\n\n      const [item] = payload;\n      const key = `${labelKey || item?.dataKey || item?.name || 'value'}`;\n      const itemConfig = getPayloadConfigFromPayload(config, item, key);\n      const value =\n        !labelKey && typeof label === 'string' ? config[label]?.label || label : itemConfig?.label;\n\n      if (labelFormatter) {\n        return (\n          <div className={cn('font-medium', labelClassName)}>{labelFormatter(value, payload)}</div>\n        );\n      }\n\n      if (!value) {\n        return null;\n      }\n\n      return <div className={cn('font-medium', labelClassName)}>{value}</div>;\n    }, [label, labelFormatter, payload, hideLabel, labelClassName, config, labelKey]);\n\n    if (!active || !payload?.length) {\n      return null;\n    }\n\n    const nestLabel = payload.length === 1 && indicator !== 'dot';\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          'grid min-w-[8rem] items-start gap-1.5 rounded-lg border border-border/50 bg-background px-2.5 py-1.5 text-xs shadow-xl',\n          className\n        )}\n      >\n        {!nestLabel ? tooltipLabel : null}\n        <div className=\"grid gap-1.5\">\n          {payload\n            .filter(item => item.type !== 'none')\n            .map((item, index) => {\n              const key = `${nameKey || item.name || item.dataKey || 'value'}`;\n              const itemConfig = getPayloadConfigFromPayload(config, item, key);\n              const indicatorColor = color || item.payload.fill || item.color;\n\n              return (\n                <div\n                  key={item.dataKey}\n                  className={cn(\n                    'flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5 [&>svg]:text-muted-foreground',\n                    indicator === 'dot' && 'items-center'\n                  )}\n                >\n                  {formatter && item?.value !== undefined && item.name ? (\n                    formatter(item.value, item.name, item, index, item.payload)\n                  ) : (\n                    <>\n                      {itemConfig?.icon ? (\n                        <itemConfig.icon />\n                      ) : (\n                        !hideIndicator && (\n                          <div\n                            className={cn(\n                              'shrink-0 rounded-[2px] border-[--color-border] bg-[--color-bg]',\n                              {\n                                'h-2.5 w-2.5': indicator === 'dot',\n                                'w-1': indicator === 'line',\n                                'w-0 border-[1.5px] border-dashed bg-transparent':\n                                  indicator === 'dashed',\n                                'my-0.5': nestLabel && indicator === 'dashed',\n                              }\n                            )}\n                            style={\n                              {\n                                '--color-bg': indicatorColor,\n                                '--color-border': indicatorColor,\n                              } as React.CSSProperties\n                            }\n                          />\n                        )\n                      )}\n                      <div\n                        className={cn(\n                          'flex flex-1 justify-between leading-none',\n                          nestLabel ? 'items-end' : 'items-center'\n                        )}\n                      >\n                        <div className=\"grid gap-1.5\">\n                          {nestLabel ? tooltipLabel : null}\n                          <span className=\"text-muted-foreground\">\n                            {itemConfig?.label || item.name}\n                          </span>\n                        </div>\n                        {item.value && (\n                          <span className=\"font-mono font-medium tabular-nums text-foreground\">\n                            {item.value.toLocaleString()}\n                          </span>\n                        )}\n                      </div>\n                    </>\n                  )}\n                </div>\n              );\n            })}\n        </div>\n      </div>\n    );\n  }\n);\nChartTooltipContent.displayName = 'ChartTooltip';\n\nconst ChartLegend = RechartsPrimitive.Legend;\n\nconst ChartLegendContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<'div'> &\n    Pick<RechartsPrimitive.LegendProps, 'payload' | 'verticalAlign'> & {\n      hideIcon?: boolean;\n      nameKey?: string;\n    }\n>(({ className, hideIcon = false, payload, verticalAlign = 'bottom', nameKey }, ref) => {\n  const { config } = useChart();\n\n  if (!payload?.length) {\n    return null;\n  }\n\n  return (\n    <div\n      ref={ref}\n      className={cn(\n        'flex items-center justify-center gap-4',\n        verticalAlign === 'top' ? 'pb-3' : 'pt-3',\n        className\n      )}\n    >\n      {payload\n        .filter(item => item.type !== 'none')\n        .map(item => {\n          const key = `${nameKey || item.dataKey || 'value'}`;\n          const itemConfig = getPayloadConfigFromPayload(config, item, key);\n\n          return (\n            <div\n              key={item.value}\n              className={cn(\n                'flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3 [&>svg]:text-muted-foreground'\n              )}\n            >\n              {itemConfig?.icon && !hideIcon ? (\n                <itemConfig.icon />\n              ) : (\n                <div\n                  className=\"h-2 w-2 shrink-0 rounded-[2px]\"\n                  style={{\n                    backgroundColor: item.color,\n                  }}\n                />\n              )}\n              {itemConfig?.label}\n            </div>\n          );\n        })}\n    </div>\n  );\n});\nChartLegendContent.displayName = 'ChartLegend';\n\n// Helper to extract item config from a payload.\nfunction getPayloadConfigFromPayload(config: ChartConfig, payload: unknown, key: string) {\n  if (typeof payload !== 'object' || payload === null) {\n    return undefined;\n  }\n\n  const payloadPayload =\n    'payload' in payload && typeof payload.payload === 'object' && payload.payload !== null\n      ? payload.payload\n      : undefined;\n\n  let configLabelKey: string = key;\n\n  if (key in payload && typeof payload[key as keyof typeof payload] === 'string') {\n    configLabelKey = payload[key as keyof typeof payload] as string;\n  } else if (\n    payloadPayload &&\n    key in payloadPayload &&\n    typeof payloadPayload[key as keyof typeof payloadPayload] === 'string'\n  ) {\n    configLabelKey = payloadPayload[key as keyof typeof payloadPayload] as string;\n  }\n\n  return configLabelKey in config ? config[configLabelKey] : config[key];\n}\n\nexport {\n  ChartContainer,\n  ChartTooltip,\n  ChartTooltipContent,\n  ChartLegend,\n  ChartLegendContent,\n  ChartStyle,\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\web\\components\\ui\\datatable.tsx","messages":[{"ruleId":"import-x/extensions","severity":2,"message":"Missing file extension for \"@/shared/components/ui/table\"","line":26,"column":8,"nodeType":"Literal","messageId":"missing","endLine":26,"endColumn":38},{"ruleId":"import-x/no-unresolved","severity":2,"message":"Unable to resolve path to module '@/shared/components/ui/table'.","line":26,"column":8,"nodeType":"Literal","messageId":"unresolved","endLine":26,"endColumn":38},{"ruleId":"import-x/extensions","severity":2,"message":"Missing file extension for \"@/shared/components/ui/button\"","line":28,"column":24,"nodeType":"Literal","messageId":"missing","endLine":28,"endColumn":55},{"ruleId":"import-x/no-unresolved","severity":2,"message":"Unable to resolve path to module '@/shared/components/ui/button'.","line":28,"column":24,"nodeType":"Literal","messageId":"unresolved","endLine":28,"endColumn":55},{"ruleId":"import-x/extensions","severity":2,"message":"Missing file extension for \"@/shared/components/ui/input\"","line":29,"column":23,"nodeType":"Literal","messageId":"missing","endLine":29,"endColumn":53},{"ruleId":"import-x/no-unresolved","severity":2,"message":"Unable to resolve path to module '@/shared/components/ui/input'.","line":29,"column":23,"nodeType":"Literal","messageId":"unresolved","endLine":29,"endColumn":53},{"ruleId":"import-x/extensions","severity":2,"message":"Missing file extension for \"@/shared/components/ui/select\"","line":36,"column":8,"nodeType":"Literal","messageId":"missing","endLine":36,"endColumn":39},{"ruleId":"import-x/no-unresolved","severity":2,"message":"Unable to resolve path to module '@/shared/components/ui/select'.","line":36,"column":8,"nodeType":"Literal","messageId":"unresolved","endLine":36,"endColumn":39},{"ruleId":"react/require-default-props","severity":2,"message":"propType \"searchKey\" is not required, but has no corresponding defaultProps declaration.","line":41,"column":3,"nodeType":"TSPropertySignature","messageId":"shouldHaveDefault","endLine":41,"endColumn":22},{"ruleId":"import-x/prefer-default-export","severity":2,"message":"Prefer default export on a file with single export.","line":44,"column":1,"nodeType":"ExportNamedDeclaration","messageId":"single","endLine":205,"endColumn":2}],"suppressedMessages":[],"errorCount":10,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from 'react';\nimport {\n  ColumnDef,\n  flexRender,\n  getCoreRowModel,\n  useReactTable,\n  getPaginationRowModel,\n  SortingState,\n  getSortedRowModel,\n  ColumnFiltersState,\n  getFilteredRowModel,\n  VisibilityState,\n  getFacetedRowModel,\n  getFacetedUniqueValues,\n  getFacetedMinMaxValues,\n} from '@tanstack/react-table';\n\nimport { ChevronLeft, ChevronRight, ChevronsLeft, ChevronsRight } from 'lucide-react';\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from '@/shared/components/ui/table';\n\nimport { Button } from '@/shared/components/ui/button';\nimport { Input } from '@/shared/components/ui/input';\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from '@/shared/components/ui/select';\n\ninterface DataTableProps<TData, TValue> {\n  columns: ColumnDef<TData, TValue>[];\n  data: TData[];\n  searchKey?: string;\n}\n\nexport function DataTable<TData, TValue>({\n  columns,\n  data,\n  searchKey,\n}: DataTableProps<TData, TValue>) {\n  const [rowSelection, setRowSelection] = React.useState({});\n  const [columnVisibility, setColumnVisibility] = React.useState<VisibilityState>({});\n  const [columnFilters, setColumnFilters] = React.useState<ColumnFiltersState>([]);\n  const [sorting, setSorting] = React.useState<SortingState>([]);\n\n  const table = useReactTable({\n    data,\n    columns,\n    state: {\n      sorting,\n      columnVisibility,\n      rowSelection,\n      columnFilters,\n    },\n    enableRowSelection: true,\n    onRowSelectionChange: setRowSelection,\n    onSortingChange: setSorting,\n    onColumnFiltersChange: setColumnFilters,\n    onColumnVisibilityChange: setColumnVisibility,\n    getCoreRowModel: getCoreRowModel(),\n    getSortedRowModel: getSortedRowModel(),\n    getFilteredRowModel: getFilteredRowModel(),\n    getPaginationRowModel: getPaginationRowModel(),\n    getFacetedRowModel: getFacetedRowModel(),\n    getFacetedUniqueValues: getFacetedUniqueValues(),\n    getFacetedMinMaxValues: getFacetedMinMaxValues(),\n  });\n\n  return (\n    <div className=\"w-full space-y-4\">\n      {searchKey && (\n        <div className=\"flex items-center py-4\">\n          <Input\n            placeholder={`Filter by ${searchKey}...`}\n            value={(table.getColumn(searchKey)?.getFilterValue() as string) ?? ''}\n            onChange={event => table.getColumn(searchKey)?.setFilterValue(event.target.value)}\n            className=\"max-w-sm\"\n          />\n        </div>\n      )}\n      <div className=\"rounded-md border\">\n        <Table>\n          <TableHeader>\n            {table.getHeaderGroups().map(headerGroup => (\n              <TableRow key={headerGroup.id}>\n                {headerGroup.headers.map(header => (\n                  <TableHead key={header.id}>\n                    {header.isPlaceholder\n                      ? null\n                      : (() => {\n                          const rendered = flexRender(\n                            header.column.columnDef.header,\n                            header.getContext()\n                          );\n                          if (typeof rendered === 'bigint') {\n                            return rendered.toString();\n                          }\n                          return rendered;\n                        })()}\n                  </TableHead>\n                ))}\n              </TableRow>\n            ))}\n          </TableHeader>\n          <TableBody>\n            {table.getRowModel().rows?.length ? (\n              table.getRowModel().rows.map(row => (\n                <TableRow key={row.id} data-state={row.getIsSelected() && 'selected'}>\n                  {row.getVisibleCells().map(cell => (\n                    <TableCell key={cell.id}>\n                      {flexRender(cell.column.columnDef.cell, cell.getContext())}\n                    </TableCell>\n                  ))}\n                </TableRow>\n              ))\n            ) : (\n              <TableRow>\n                <TableCell colSpan={columns.length} className=\"h-24 text-center\">\n                  No results.\n                </TableCell>\n              </TableRow>\n            )}\n          </TableBody>\n        </Table>\n      </div>\n      <div className=\"flex items-center justify-between px-2\">\n        <div className=\"flex-1 text-sm text-muted-foreground\">\n          {table.getFilteredSelectedRowModel().rows.length} of{' '}\n          {table.getFilteredRowModel().rows.length} row(s) selected.\n        </div>\n        <div className=\"flex items-center space-x-6 lg:space-x-8\">\n          <div className=\"flex items-center space-x-2\">\n            <p className=\"text-sm font-medium\">Rows per page</p>\n            <Select\n              value={`${table.getState().pagination.pageSize}`}\n              onValueChange={value => {\n                table.setPageSize(Number(value));\n              }}\n            >\n              <SelectTrigger className=\"h-8 w-[70px]\">\n                <SelectValue placeholder={table.getState().pagination.pageSize} />\n              </SelectTrigger>\n              <SelectContent side=\"top\">\n                {[10, 20, 30, 40, 50].map(pageSize => (\n                  <SelectItem key={pageSize} value={`${pageSize}`}>\n                    {pageSize}\n                  </SelectItem>\n                ))}\n              </SelectContent>\n            </Select>\n          </div>\n          <div className=\"flex w-[100px] items-center justify-center text-sm font-medium\">\n            Page {table.getState().pagination.pageIndex + 1} of {table.getPageCount()}\n          </div>\n          <div className=\"flex items-center space-x-2\">\n            <Button\n              variant=\"outline\"\n              className=\"hidden h-8 w-8 p-0 lg:flex\"\n              onClick={() => table.setPageIndex(0)}\n              disabled={!table.getCanPreviousPage()}\n            >\n              <span className=\"sr-only\">Go to first page</span>\n              <ChevronsLeft className=\"h-4 w-4\" />\n            </Button>\n            <Button\n              variant=\"outline\"\n              className=\"h-8 w-8 p-0\"\n              onClick={() => table.previousPage()}\n              disabled={!table.getCanPreviousPage()}\n            >\n              <span className=\"sr-only\">Go to previous page</span>\n              <ChevronLeft className=\"h-4 w-4\" />\n            </Button>\n            <Button\n              variant=\"outline\"\n              className=\"h-8 w-8 p-0\"\n              onClick={() => table.nextPage()}\n              disabled={!table.getCanNextPage()}\n            >\n              <span className=\"sr-only\">Go to next page</span>\n              <ChevronRight className=\"h-4 w-4\" />\n            </Button>\n            <Button\n              variant=\"outline\"\n              className=\"hidden h-8 w-8 p-0 lg:flex\"\n              onClick={() => table.setPageIndex(table.getPageCount() - 1)}\n              disabled={!table.getCanNextPage()}\n            >\n              <span className=\"sr-only\">Go to last page</span>\n              <ChevronsRight className=\"h-4 w-4\" />\n            </Button>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\web\\components\\ui\\dialog.tsx","messages":[{"ruleId":"import-x/extensions","severity":2,"message":"Missing file extension for \"@/lib/utils\"","line":5,"column":20,"nodeType":"Literal","messageId":"missing","endLine":5,"endColumn":33},{"ruleId":"import-x/no-unresolved","severity":2,"message":"Unable to resolve path to module '@/lib/utils'.","line":5,"column":20,"nodeType":"Literal","messageId":"unresolved","endLine":5,"endColumn":33}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from 'react';\nimport * as DialogPrimitive from '@radix-ui/react-dialog';\nimport { X } from 'lucide-react';\n\nimport { cn } from '@/lib/utils';\n\nconst Dialog = DialogPrimitive.Root;\n\nconst DialogTrigger = DialogPrimitive.Trigger;\n\nconst DialogPortal = DialogPrimitive.Portal;\n\nconst DialogClose = DialogPrimitive.Close;\n\nconst DialogOverlay = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Overlay\n    ref={ref}\n    className={cn(\n      'fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0',\n      className\n    )}\n    {...props}\n  />\n));\nDialogOverlay.displayName = DialogPrimitive.Overlay.displayName;\n\nconst DialogContent = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DialogPortal>\n    <DialogOverlay />\n    <DialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        'fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg',\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <DialogPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </DialogPrimitive.Close>\n    </DialogPrimitive.Content>\n  </DialogPortal>\n));\nDialogContent.displayName = DialogPrimitive.Content.displayName;\n\nfunction DialogHeader({ className, ...props }: React.HTMLAttributes<HTMLDivElement>) {\n  return (\n    <div\n      className={cn('flex flex-col space-y-1.5 text-center sm:text-left', className)}\n      {...props}\n    />\n  );\n}\nDialogHeader.displayName = 'DialogHeader';\n\nfunction DialogFooter({ className, ...props }: React.HTMLAttributes<HTMLDivElement>) {\n  return (\n    <div\n      className={cn('flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2', className)}\n      {...props}\n    />\n  );\n}\nDialogFooter.displayName = 'DialogFooter';\n\nconst DialogTitle = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Title\n    ref={ref}\n    className={cn('text-lg font-semibold leading-none tracking-tight', className)}\n    {...props}\n  />\n));\nDialogTitle.displayName = DialogPrimitive.Title.displayName;\n\nconst DialogDescription = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Description\n    ref={ref}\n    className={cn('text-sm text-muted-foreground', className)}\n    {...props}\n  />\n));\nDialogDescription.displayName = DialogPrimitive.Description.displayName;\n\nexport {\n  Dialog,\n  DialogPortal,\n  DialogOverlay,\n  DialogTrigger,\n  DialogClose,\n  DialogContent,\n  DialogHeader,\n  DialogFooter,\n  DialogTitle,\n  DialogDescription,\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\web\\components\\ui\\dropdown-menu.tsx","messages":[{"ruleId":"import-x/extensions","severity":2,"message":"Missing file extension for \"@/lib/utils\"","line":5,"column":20,"nodeType":"Literal","messageId":"missing","endLine":5,"endColumn":33},{"ruleId":"import-x/no-unresolved","severity":2,"message":"Unable to resolve path to module '@/lib/utils'.","line":5,"column":20,"nodeType":"Literal","messageId":"unresolved","endLine":5,"endColumn":33},{"ruleId":"react/require-default-props","severity":2,"message":"propType \"inset\" is not required, but has no corresponding defaultProps declaration.","line":22,"column":5,"nodeType":"TSPropertySignature","messageId":"shouldHaveDefault","endLine":22,"endColumn":21},{"ruleId":"react/require-default-props","severity":2,"message":"propType \"inset\" is not required, but has no corresponding defaultProps declaration.","line":77,"column":5,"nodeType":"TSPropertySignature","messageId":"shouldHaveDefault","endLine":77,"endColumn":21},{"ruleId":"react/require-default-props","severity":2,"message":"propType \"inset\" is not required, but has no corresponding defaultProps declaration.","line":140,"column":5,"nodeType":"TSPropertySignature","messageId":"shouldHaveDefault","endLine":140,"endColumn":21}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from 'react';\nimport * as DropdownMenuPrimitive from '@radix-ui/react-dropdown-menu';\nimport { Check, ChevronRight, Circle } from 'lucide-react';\n\nimport { cn } from '@/lib/utils';\n\nconst DropdownMenu = DropdownMenuPrimitive.Root;\n\nconst DropdownMenuTrigger = DropdownMenuPrimitive.Trigger;\n\nconst DropdownMenuGroup = DropdownMenuPrimitive.Group;\n\nconst DropdownMenuPortal = DropdownMenuPrimitive.Portal;\n\nconst DropdownMenuSub = DropdownMenuPrimitive.Sub;\n\nconst DropdownMenuRadioGroup = DropdownMenuPrimitive.RadioGroup;\n\nconst DropdownMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubTrigger> & {\n    inset?: boolean;\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      'flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0',\n      inset && 'pl-8',\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto\" />\n  </DropdownMenuPrimitive.SubTrigger>\n));\nDropdownMenuSubTrigger.displayName = DropdownMenuPrimitive.SubTrigger.displayName;\n\nconst DropdownMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      'z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]',\n      className\n    )}\n    {...props}\n  />\n));\nDropdownMenuSubContent.displayName = DropdownMenuPrimitive.SubContent.displayName;\n\nconst DropdownMenuContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <DropdownMenuPrimitive.Portal>\n    <DropdownMenuPrimitive.Content\n      ref={ref}\n      sideOffset={sideOffset}\n      className={cn(\n        'z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md',\n        'data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]',\n        className\n      )}\n      {...props}\n    />\n  </DropdownMenuPrimitive.Portal>\n));\nDropdownMenuContent.displayName = DropdownMenuPrimitive.Content.displayName;\n\nconst DropdownMenuItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Item> & {\n    inset?: boolean;\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      'relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&>svg]:size-4 [&>svg]:shrink-0',\n      inset && 'pl-8',\n      className\n    )}\n    {...props}\n  />\n));\nDropdownMenuItem.displayName = DropdownMenuPrimitive.Item.displayName;\n\nconst DropdownMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <DropdownMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      'relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50',\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.CheckboxItem>\n));\nDropdownMenuCheckboxItem.displayName = DropdownMenuPrimitive.CheckboxItem.displayName;\n\nconst DropdownMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      'relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50',\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.RadioItem>\n));\nDropdownMenuRadioItem.displayName = DropdownMenuPrimitive.RadioItem.displayName;\n\nconst DropdownMenuLabel = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Label> & {\n    inset?: boolean;\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Label\n    ref={ref}\n    className={cn('px-2 py-1.5 text-sm font-semibold', inset && 'pl-8', className)}\n    {...props}\n  />\n));\nDropdownMenuLabel.displayName = DropdownMenuPrimitive.Label.displayName;\n\nconst DropdownMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.Separator\n    ref={ref}\n    className={cn('-mx-1 my-1 h-px bg-muted', className)}\n    {...props}\n  />\n));\nDropdownMenuSeparator.displayName = DropdownMenuPrimitive.Separator.displayName;\n\nfunction DropdownMenuShortcut({ className, ...props }: React.HTMLAttributes<HTMLSpanElement>) {\n  return (\n    <span className={cn('ml-auto text-xs tracking-widest opacity-60', className)} {...props} />\n  );\n}\nDropdownMenuShortcut.displayName = 'DropdownMenuShortcut';\n\nexport {\n  DropdownMenu,\n  DropdownMenuTrigger,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuCheckboxItem,\n  DropdownMenuRadioItem,\n  DropdownMenuLabel,\n  DropdownMenuSeparator,\n  DropdownMenuShortcut,\n  DropdownMenuGroup,\n  DropdownMenuPortal,\n  DropdownMenuSub,\n  DropdownMenuSubContent,\n  DropdownMenuSubTrigger,\n  DropdownMenuRadioGroup,\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\web\\components\\ui\\input.tsx","messages":[{"ruleId":"import-x/extensions","severity":2,"message":"Missing file extension for \"@/lib/utils\"","line":3,"column":20,"nodeType":"Literal","messageId":"missing","endLine":3,"endColumn":33},{"ruleId":"import-x/no-unresolved","severity":2,"message":"Unable to resolve path to module '@/lib/utils'.","line":3,"column":20,"nodeType":"Literal","messageId":"unresolved","endLine":3,"endColumn":33},{"ruleId":"import-x/prefer-default-export","severity":2,"message":"Prefer default export on a file with single export.","line":20,"column":10,"nodeType":"ExportSpecifier","messageId":"single","endLine":20,"endColumn":15}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from 'react';\n\nimport { cn } from '@/lib/utils';\n\nconst Input = React.forwardRef<HTMLInputElement, React.ComponentProps<'input'>>(\n  ({ className, type, ...props }, ref) => (\n    <input\n      type={type}\n      className={cn(\n        'flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm',\n        className\n      )}\n      ref={ref}\n      {...props}\n    />\n  )\n);\nInput.displayName = 'Input';\n\nexport { Input };\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\web\\components\\ui\\number-ticker.tsx","messages":[{"ruleId":"import-x/extensions","severity":2,"message":"Missing file extension for \"@/lib/utils\"","line":4,"column":20,"nodeType":"Literal","messageId":"missing","endLine":4,"endColumn":33},{"ruleId":"import-x/no-unresolved","severity":2,"message":"Unable to resolve path to module '@/lib/utils'.","line":4,"column":20,"nodeType":"Literal","messageId":"unresolved","endLine":4,"endColumn":33},{"ruleId":"react/require-default-props","severity":2,"message":"propType \"startValue\" is not required, but has no corresponding defaultProps declaration.","line":8,"column":3,"nodeType":"TSPropertySignature","messageId":"shouldHaveDefault","endLine":8,"endColumn":23},{"ruleId":"react/require-default-props","severity":2,"message":"propType \"direction\" is not required, but has no corresponding defaultProps declaration.","line":9,"column":3,"nodeType":"TSPropertySignature","messageId":"shouldHaveDefault","endLine":9,"endColumn":29},{"ruleId":"react/require-default-props","severity":2,"message":"propType \"delay\" is not required, but has no corresponding defaultProps declaration.","line":10,"column":3,"nodeType":"TSPropertySignature","messageId":"shouldHaveDefault","endLine":10,"endColumn":18},{"ruleId":"react/require-default-props","severity":2,"message":"propType \"decimalPlaces\" is not required, but has no corresponding defaultProps declaration.","line":11,"column":3,"nodeType":"TSPropertySignature","messageId":"shouldHaveDefault","endLine":11,"endColumn":26},{"ruleId":"import-x/prefer-default-export","severity":2,"message":"Prefer default export on a file with single export.","line":14,"column":1,"nodeType":"ExportNamedDeclaration","messageId":"single","endLine":65,"endColumn":2},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of arrow function.","line":31,"column":16,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":31,"endColumn":18}],"suppressedMessages":[],"errorCount":8,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { ComponentPropsWithoutRef, useEffect, useRef } from 'react';\nimport { useInView, useMotionValue, useSpring } from 'motion/react';\n\nimport { cn } from '@/lib/utils';\n\ninterface NumberTickerProps extends ComponentPropsWithoutRef<'span'> {\n  value: number;\n  startValue?: number;\n  direction?: 'up' | 'down';\n  delay?: number;\n  decimalPlaces?: number;\n}\n\nexport function NumberTicker({\n  value,\n  startValue = 0,\n  direction = 'up',\n  delay = 0,\n  className,\n  decimalPlaces = 0,\n  ...props\n}: NumberTickerProps) {\n  const ref = useRef<HTMLSpanElement>(null);\n  const motionValue = useMotionValue(direction === 'down' ? value : startValue);\n  const springValue = useSpring(motionValue, {\n    damping: 60,\n    stiffness: 100,\n  });\n  const isInView = useInView(ref, { once: true, margin: '0px' });\n\n  useEffect(() => {\n    if (isInView) {\n      const timer = setTimeout(() => {\n        motionValue.set(direction === 'down' ? startValue : value);\n      }, delay * 1000);\n      return () => clearTimeout(timer);\n    }\n  }, [motionValue, isInView, delay, value, direction, startValue]);\n\n  useEffect(\n    () =>\n      springValue.on('change', latest => {\n        if (ref.current) {\n          ref.current.textContent = Intl.NumberFormat('en-US', {\n            minimumFractionDigits: decimalPlaces,\n            maximumFractionDigits: decimalPlaces,\n          }).format(Number(latest.toFixed(decimalPlaces)));\n        }\n      }),\n    [springValue, decimalPlaces]\n  );\n\n  return (\n    <span\n      ref={ref}\n      className={cn(\n        'inline-block tracking-wider text-black tabular-nums dark:text-white',\n        className\n      )}\n      {...props}\n    >\n      {startValue}\n    </span>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\web\\components\\ui\\pagination.tsx","messages":[{"ruleId":"import-x/extensions","severity":2,"message":"Missing file extension for \"@/lib/utils\"","line":4,"column":20,"nodeType":"Literal","messageId":"missing","endLine":4,"endColumn":33},{"ruleId":"import-x/no-unresolved","severity":2,"message":"Unable to resolve path to module '@/lib/utils'.","line":4,"column":20,"nodeType":"Literal","messageId":"unresolved","endLine":4,"endColumn":33},{"ruleId":"import-x/extensions","severity":2,"message":"Missing file extension for \"@/components/ui/button\"","line":5,"column":45,"nodeType":"Literal","messageId":"missing","endLine":5,"endColumn":69},{"ruleId":"import-x/no-unresolved","severity":2,"message":"Unable to resolve path to module '@/components/ui/button'.","line":5,"column":45,"nodeType":"Literal","messageId":"unresolved","endLine":5,"endColumn":69},{"ruleId":"react/require-default-props","severity":2,"message":"propType \"isActive\" is not required, but has no corresponding defaultProps declaration.","line":32,"column":3,"nodeType":"TSPropertySignature","messageId":"shouldHaveDefault","endLine":32,"endColumn":22},{"ruleId":"jsx-a11y/anchor-has-content","severity":2,"message":"Anchors must have content and the content must be accessible by a screen reader.","line":38,"column":5,"nodeType":"JSXOpeningElement","endLine":48,"endColumn":7}],"suppressedMessages":[],"errorCount":6,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from 'react';\nimport { ChevronLeft, ChevronRight, MoreHorizontal } from 'lucide-react';\n\nimport { cn } from '@/lib/utils';\nimport { ButtonProps, buttonVariants } from '@/components/ui/button';\n\nfunction Pagination({ className, ...props }: React.ComponentProps<'nav'>) {\n  return (\n    <nav\n      role=\"navigation\"\n      aria-label=\"pagination\"\n      className={cn('mx-auto flex w-full justify-center', className)}\n      {...props}\n    />\n  );\n}\nPagination.displayName = 'Pagination';\n\nconst PaginationContent = React.forwardRef<HTMLUListElement, React.ComponentProps<'ul'>>(\n  ({ className, ...props }, ref) => (\n    <ul ref={ref} className={cn('flex flex-row items-center gap-1', className)} {...props} />\n  )\n);\nPaginationContent.displayName = 'PaginationContent';\n\nconst PaginationItem = React.forwardRef<HTMLLIElement, React.ComponentProps<'li'>>(\n  ({ className, ...props }, ref) => <li ref={ref} className={cn('', className)} {...props} />\n);\nPaginationItem.displayName = 'PaginationItem';\n\ntype PaginationLinkProps = {\n  isActive?: boolean;\n} & Pick<ButtonProps, 'size'> &\n  React.ComponentProps<'a'>;\n\nfunction PaginationLink({ className, isActive, size = 'icon', ...props }: PaginationLinkProps) {\n  return (\n    <a\n      aria-current={isActive ? 'page' : undefined}\n      className={cn(\n        buttonVariants({\n          variant: isActive ? 'outline' : 'ghost',\n          size,\n        }),\n        className\n      )}\n      {...props}\n    />\n  );\n}\nPaginationLink.displayName = 'PaginationLink';\n\nfunction PaginationPrevious({ className, ...props }: React.ComponentProps<typeof PaginationLink>) {\n  return (\n    <PaginationLink\n      aria-label=\"Go to previous page\"\n      size=\"default\"\n      className={cn('gap-1 pl-2.5', className)}\n      {...props}\n    >\n      <ChevronLeft className=\"h-4 w-4\" />\n      <span>Previous</span>\n    </PaginationLink>\n  );\n}\nPaginationPrevious.displayName = 'PaginationPrevious';\n\nfunction PaginationNext({ className, ...props }: React.ComponentProps<typeof PaginationLink>) {\n  return (\n    <PaginationLink\n      aria-label=\"Go to next page\"\n      size=\"default\"\n      className={cn('gap-1 pr-2.5', className)}\n      {...props}\n    >\n      <span>Next</span>\n      <ChevronRight className=\"h-4 w-4\" />\n    </PaginationLink>\n  );\n}\nPaginationNext.displayName = 'PaginationNext';\n\nfunction PaginationEllipsis({ className, ...props }: React.ComponentProps<'span'>) {\n  return (\n    <span\n      aria-hidden\n      className={cn('flex h-9 w-9 items-center justify-center', className)}\n      {...props}\n    >\n      <MoreHorizontal className=\"h-4 w-4\" />\n      <span className=\"sr-only\">More pages</span>\n    </span>\n  );\n}\nPaginationEllipsis.displayName = 'PaginationEllipsis';\n\nexport {\n  Pagination,\n  PaginationContent,\n  PaginationLink,\n  PaginationItem,\n  PaginationPrevious,\n  PaginationNext,\n  PaginationEllipsis,\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\web\\components\\ui\\progress.tsx","messages":[{"ruleId":"import-x/extensions","severity":2,"message":"Missing file extension for \"@/lib/utils\"","line":4,"column":20,"nodeType":"Literal","messageId":"missing","endLine":4,"endColumn":33},{"ruleId":"import-x/no-unresolved","severity":2,"message":"Unable to resolve path to module '@/lib/utils'.","line":4,"column":20,"nodeType":"Literal","messageId":"unresolved","endLine":4,"endColumn":33},{"ruleId":"import-x/prefer-default-export","severity":2,"message":"Prefer default export on a file with single export.","line":23,"column":10,"nodeType":"ExportSpecifier","messageId":"single","endLine":23,"endColumn":18}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from 'react';\nimport * as ProgressPrimitive from '@radix-ui/react-progress';\n\nimport { cn } from '@/lib/utils';\n\nconst Progress = React.forwardRef<\n  React.ElementRef<typeof ProgressPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ProgressPrimitive.Root>\n>(({ className, value, ...props }, ref) => (\n  <ProgressPrimitive.Root\n    ref={ref}\n    className={cn('relative h-2 w-full overflow-hidden rounded-full bg-primary/20', className)}\n    {...props}\n  >\n    <ProgressPrimitive.Indicator\n      className=\"h-full w-full flex-1 bg-primary transition-all\"\n      style={{ transform: `translateX(-${100 - (value || 0)}%)` }}\n    />\n  </ProgressPrimitive.Root>\n));\nProgress.displayName = ProgressPrimitive.Root.displayName;\n\nexport { Progress };\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\web\\components\\ui\\select.tsx","messages":[{"ruleId":"import-x/extensions","severity":2,"message":"Missing file extension for \"@/lib/utils\"","line":5,"column":20,"nodeType":"Literal","messageId":"missing","endLine":5,"endColumn":33},{"ruleId":"import-x/no-unresolved","severity":2,"message":"Unable to resolve path to module '@/lib/utils'.","line":5,"column":20,"nodeType":"Literal","messageId":"unresolved","endLine":5,"endColumn":33}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from 'react';\nimport * as SelectPrimitive from '@radix-ui/react-select';\nimport { Check, ChevronDown, ChevronUp } from 'lucide-react';\n\nimport { cn } from '@/lib/utils';\n\nconst Select = SelectPrimitive.Root;\n\nconst SelectGroup = SelectPrimitive.Group;\n\nconst SelectValue = SelectPrimitive.Value;\n\nconst SelectTrigger = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      'flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1',\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <SelectPrimitive.Icon asChild>\n      <ChevronDown className=\"h-4 w-4 opacity-50\" />\n    </SelectPrimitive.Icon>\n  </SelectPrimitive.Trigger>\n));\nSelectTrigger.displayName = SelectPrimitive.Trigger.displayName;\n\nconst SelectScrollUpButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollUpButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollUpButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollUpButton\n    ref={ref}\n    className={cn('flex cursor-default items-center justify-center py-1', className)}\n    {...props}\n  >\n    <ChevronUp className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollUpButton>\n));\nSelectScrollUpButton.displayName = SelectPrimitive.ScrollUpButton.displayName;\n\nconst SelectScrollDownButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollDownButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollDownButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollDownButton\n    ref={ref}\n    className={cn('flex cursor-default items-center justify-center py-1', className)}\n    {...props}\n  >\n    <ChevronDown className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollDownButton>\n));\nSelectScrollDownButton.displayName = SelectPrimitive.ScrollDownButton.displayName;\n\nconst SelectContent = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Content>\n>(({ className, children, position = 'popper', ...props }, ref) => (\n  <SelectPrimitive.Portal>\n    <SelectPrimitive.Content\n      ref={ref}\n      className={cn(\n        'relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]',\n        position === 'popper' &&\n          'data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1',\n        className\n      )}\n      position={position}\n      {...props}\n    >\n      <SelectScrollUpButton />\n      <SelectPrimitive.Viewport\n        className={cn(\n          'p-1',\n          position === 'popper' &&\n            'h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]'\n        )}\n      >\n        {children}\n      </SelectPrimitive.Viewport>\n      <SelectScrollDownButton />\n    </SelectPrimitive.Content>\n  </SelectPrimitive.Portal>\n));\nSelectContent.displayName = SelectPrimitive.Content.displayName;\n\nconst SelectLabel = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Label>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Label\n    ref={ref}\n    className={cn('px-2 py-1.5 text-sm font-semibold', className)}\n    {...props}\n  />\n));\nSelectLabel.displayName = SelectPrimitive.Label.displayName;\n\nconst SelectItem = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Item>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Item\n    ref={ref}\n    className={cn(\n      'relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50',\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute right-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <SelectPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </SelectPrimitive.ItemIndicator>\n    </span>\n    <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\n  </SelectPrimitive.Item>\n));\nSelectItem.displayName = SelectPrimitive.Item.displayName;\n\nconst SelectSeparator = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Separator\n    ref={ref}\n    className={cn('-mx-1 my-1 h-px bg-muted', className)}\n    {...props}\n  />\n));\nSelectSeparator.displayName = SelectPrimitive.Separator.displayName;\n\nexport {\n  Select,\n  SelectGroup,\n  SelectValue,\n  SelectTrigger,\n  SelectContent,\n  SelectLabel,\n  SelectItem,\n  SelectSeparator,\n  SelectScrollUpButton,\n  SelectScrollDownButton,\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\web\\components\\ui\\shadcn-io\\area-chart-01\\index.tsx","messages":[{"ruleId":"import-x/extensions","severity":2,"message":"Missing file extension for \"@/components/ui/chart\"","line":13,"column":8,"nodeType":"Literal","messageId":"missing","endLine":13,"endColumn":31},{"ruleId":"import-x/no-unresolved","severity":2,"message":"Unable to resolve path to module '@/components/ui/chart'.","line":13,"column":8,"nodeType":"Literal","messageId":"unresolved","endLine":13,"endColumn":31},{"ruleId":"import-x/extensions","severity":2,"message":"Missing file extension for \"@/components/ui/select\"","line":20,"column":8,"nodeType":"Literal","messageId":"missing","endLine":20,"endColumn":32},{"ruleId":"import-x/no-unresolved","severity":2,"message":"Unable to resolve path to module '@/components/ui/select'.","line":20,"column":8,"nodeType":"Literal","messageId":"unresolved","endLine":20,"endColumn":32},{"ruleId":"react/no-unstable-nested-components","severity":2,"message":"Do not define components during render. React will see a new component type on every render and destroy the entire subtreeâ€™s DOM nodes and state (https://reactjs.org/docs/reconciliation.html#elements-of-different-types). Instead, move this component definition out of the parent component â€œChartAreaInteractiveâ€ and pass data as props. If you want to allow component creation in props, set allowAsProps option to true.","line":235,"column":24,"nodeType":"ArrowFunctionExpression","endLine":237,"endColumn":16},{"ruleId":"react/prop-types","severity":2,"message":"'payload' is missing in props validation","line":236,"column":52,"nodeType":"Identifier","messageId":"missingPropType","endLine":236,"endColumn":59},{"ruleId":"react/prop-types","severity":2,"message":"'verticalAlign' is missing in props validation","line":236,"column":82,"nodeType":"Identifier","messageId":"missingPropType","endLine":236,"endColumn":95}],"suppressedMessages":[],"errorCount":7,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport * as React from 'react';\nimport { Area, AreaChart, CartesianGrid, XAxis } from 'recharts';\n\nimport {\n  ChartConfig,\n  ChartContainer,\n  ChartLegend,\n  ChartLegendContent,\n  ChartTooltip,\n  ChartTooltipContent,\n} from '@/components/ui/chart';\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from '@/components/ui/select';\n\nexport const description = 'An interactive area chart';\n\nconst chartData = [\n  { date: '2024-04-01', desktop: 222, mobile: 150 },\n  { date: '2024-04-02', desktop: 97, mobile: 180 },\n  { date: '2024-04-03', desktop: 167, mobile: 120 },\n  { date: '2024-04-04', desktop: 242, mobile: 260 },\n  { date: '2024-04-05', desktop: 373, mobile: 290 },\n  { date: '2024-04-06', desktop: 301, mobile: 340 },\n  { date: '2024-04-07', desktop: 245, mobile: 180 },\n  { date: '2024-04-08', desktop: 409, mobile: 320 },\n  { date: '2024-04-09', desktop: 59, mobile: 110 },\n  { date: '2024-04-10', desktop: 261, mobile: 190 },\n  { date: '2024-04-11', desktop: 327, mobile: 350 },\n  { date: '2024-04-12', desktop: 292, mobile: 210 },\n  { date: '2024-04-13', desktop: 342, mobile: 380 },\n  { date: '2024-04-14', desktop: 137, mobile: 220 },\n  { date: '2024-04-15', desktop: 120, mobile: 170 },\n  { date: '2024-04-16', desktop: 138, mobile: 190 },\n  { date: '2024-04-17', desktop: 446, mobile: 360 },\n  { date: '2024-04-18', desktop: 364, mobile: 410 },\n  { date: '2024-04-19', desktop: 243, mobile: 180 },\n  { date: '2024-04-20', desktop: 89, mobile: 150 },\n  { date: '2024-04-21', desktop: 137, mobile: 200 },\n  { date: '2024-04-22', desktop: 224, mobile: 170 },\n  { date: '2024-04-23', desktop: 138, mobile: 230 },\n  { date: '2024-04-24', desktop: 387, mobile: 290 },\n  { date: '2024-04-25', desktop: 215, mobile: 250 },\n  { date: '2024-04-26', desktop: 75, mobile: 130 },\n  { date: '2024-04-27', desktop: 383, mobile: 420 },\n  { date: '2024-04-28', desktop: 122, mobile: 180 },\n  { date: '2024-04-29', desktop: 315, mobile: 240 },\n  { date: '2024-04-30', desktop: 454, mobile: 380 },\n  { date: '2024-05-01', desktop: 165, mobile: 220 },\n  { date: '2024-05-02', desktop: 293, mobile: 310 },\n  { date: '2024-05-03', desktop: 247, mobile: 190 },\n  { date: '2024-05-04', desktop: 385, mobile: 420 },\n  { date: '2024-05-05', desktop: 481, mobile: 390 },\n  { date: '2024-05-06', desktop: 498, mobile: 520 },\n  { date: '2024-05-07', desktop: 388, mobile: 300 },\n  { date: '2024-05-08', desktop: 149, mobile: 210 },\n  { date: '2024-05-09', desktop: 227, mobile: 180 },\n  { date: '2024-05-10', desktop: 293, mobile: 330 },\n  { date: '2024-05-11', desktop: 335, mobile: 270 },\n  { date: '2024-05-12', desktop: 197, mobile: 240 },\n  { date: '2024-05-13', desktop: 197, mobile: 160 },\n  { date: '2024-05-14', desktop: 448, mobile: 490 },\n  { date: '2024-05-15', desktop: 473, mobile: 380 },\n  { date: '2024-05-16', desktop: 338, mobile: 400 },\n  { date: '2024-05-17', desktop: 499, mobile: 420 },\n  { date: '2024-05-18', desktop: 315, a: 350 },\n  { date: '2024-05-19', desktop: 235, mobile: 180 },\n  { date: '2024-05-20', desktop: 177, mobile: 230 },\n  { date: '2024-05-21', desktop: 82, mobile: 140 },\n  { date: '2024-05-22', desktop: 81, mobile: 120 },\n  { date: '2024-05-23', desktop: 252, mobile: 290 },\n  { date: '2024-05-24', desktop: 294, mobile: 220 },\n  { date: '2024-05-25', desktop: 201, mobile: 250 },\n  { date: '2024-05-26', desktop: 213, mobile: 170 },\n  { date: '2024-05-27', desktop: 420, mobile: 460 },\n  { date: '2024-05-28', desktop: 233, mobile: 190 },\n  { date: '2024-05-29', desktop: 78, mobile: 130 },\n  { date: '2024-05-30', desktop: 340, mobile: 280 },\n  { date: '2024-05-31', desktop: 178, mobile: 230 },\n  { date: '2024-06-01', desktop: 178, mobile: 200 },\n  { date: '2024-06-02', desktop: 470, mobile: 410 },\n  { date: '2024-06-03', desktop: 103, mobile: 160 },\n  { date: '2024-06-04', desktop: 439, mobile: 380 },\n  { date: '2024-06-05', desktop: 88, mobile: 140 },\n  { date: '2024-06-06', desktop: 294, mobile: 250 },\n  { date: '2024-06-07', desktop: 323, mobile: 370 },\n  { date: '2024-06-08', desktop: 385, mobile: 320 },\n  { date: '2024-06-09', desktop: 438, mobile: 480 },\n  { date: '2024-06-10', desktop: 155, mobile: 200 },\n  { date: '2024-06-11', desktop: 92, mobile: 150 },\n  { date: '2024-06-12', desktop: 492, mobile: 420 },\n  { date: '2024-06-13', desktop: 81, mobile: 130 },\n  { date: '2024-06-14', desktop: 426, mobile: 380 },\n  { date: '2024-06-15', desktop: 307, mobile: 350 },\n  { date: '2024-06-16', desktop: 371, mobile: 310 },\n  { date: '2024-06-17', desktop: 475, mobile: 520 },\n  { date: '2024-06-18', desktop: 107, mobile: 170 },\n  { date: '2024-06-19', desktop: 341, mobile: 290 },\n  { date: '2024-06-20', desktop: 408, mobile: 450 },\n  { date: '2024-06-21', desktop: 169, mobile: 210 },\n  { date: '2024-06-22', desktop: 317, mobile: 270 },\n  { date: '2024-06-23', desktop: 480, mobile: 530 },\n  { date: '2024-06-24', desktop: 132, mobile: 180 },\n  { date: '2024-06-25', desktop: 141, mobile: 190 },\n  { date: '2024-06-26', desktop: 434, mobile: 380 },\n  { date: '2024-06-27', desktop: 448, mobile: 490 },\n  { date: '2024-06-28', desktop: 149, mobile: 200 },\n  { date: '2024-06-29', desktop: 103, mobile: 160 },\n  { date: '2024-06-30', desktop: 446, mobile: 400 },\n];\n\nconst chartConfig = {\n  visitors: {\n    label: 'Visitors',\n  },\n  desktop: {\n    label: 'Desktop',\n    color: 'var(--chart-1)',\n  },\n  mobile: {\n    label: 'Mobile',\n    color: 'var(--chart-2)',\n  },\n} satisfies ChartConfig;\n\nexport function ChartAreaInteractive() {\n  const [timeRange, setTimeRange] = React.useState('90d');\n\n  const filteredData = chartData.filter(item => {\n    const date = new Date(item.date);\n    const referenceDate = new Date('2024-06-30');\n    let daysToSubtract = 90;\n    if (timeRange === '30d') {\n      daysToSubtract = 30;\n    } else if (timeRange === '7d') {\n      daysToSubtract = 7;\n    }\n    const startDate = new Date(referenceDate);\n    startDate.setDate(startDate.getDate() - daysToSubtract);\n    return date >= startDate;\n  });\n\n  return (\n    <div className=\"w-full h-full flex flex-col p-4\">\n      <div className=\"flex items-center gap-2 border-b pb-4 mb-4 sm:flex-row\">\n        <div className=\"grid flex-1 gap-1\">\n          <h3 className=\"text-lg font-semibold\">Area Chart - Interactive</h3>\n          <p className=\"text-sm text-muted-foreground\">\n            Showing total visitors for the last 3 months\n          </p>\n        </div>\n        <Select value={timeRange} onValueChange={setTimeRange}>\n          <SelectTrigger\n            className=\"hidden w-[160px] rounded-lg sm:ml-auto sm:flex\"\n            aria-label=\"Select a value\"\n          >\n            <SelectValue placeholder=\"Last 3 months\" />\n          </SelectTrigger>\n          <SelectContent className=\"rounded-xl\">\n            <SelectItem value=\"90d\" className=\"rounded-lg\">\n              Last 3 months\n            </SelectItem>\n            <SelectItem value=\"30d\" className=\"rounded-lg\">\n              Last 30 days\n            </SelectItem>\n            <SelectItem value=\"7d\" className=\"rounded-lg\">\n              Last 7 days\n            </SelectItem>\n          </SelectContent>\n        </Select>\n      </div>\n      <div className=\"flex-1 flex items-center justify-center min-h-0\">\n        <ChartContainer config={chartConfig} className=\"h-[250px] w-full\">\n          <AreaChart data={filteredData}>\n            <defs>\n              <linearGradient id=\"area-chart-01-fillDesktop\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\n                <stop offset=\"5%\" stopColor=\"var(--color-desktop)\" stopOpacity={0.8} />\n                <stop offset=\"95%\" stopColor=\"var(--color-desktop)\" stopOpacity={0.1} />\n              </linearGradient>\n              <linearGradient id=\"area-chart-01-fillMobile\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\n                <stop offset=\"5%\" stopColor=\"var(--color-mobile)\" stopOpacity={0.8} />\n                <stop offset=\"95%\" stopColor=\"var(--color-mobile)\" stopOpacity={0.1} />\n              </linearGradient>\n            </defs>\n            <CartesianGrid vertical={false} />\n            <XAxis\n              dataKey=\"date\"\n              tickLine={false}\n              axisLine={false}\n              tickMargin={8}\n              minTickGap={32}\n              tickFormatter={value => {\n                const date = new Date(value);\n                return date.toLocaleDateString('en-US', {\n                  month: 'short',\n                  day: 'numeric',\n                });\n              }}\n            />\n            <ChartTooltip\n              cursor={false}\n              content={\n                <ChartTooltipContent\n                  labelFormatter={value =>\n                    new Date(value).toLocaleDateString('en-US', {\n                      month: 'short',\n                      day: 'numeric',\n                    })\n                  }\n                  indicator=\"dot\"\n                />\n              }\n            />\n            <Area\n              dataKey=\"mobile\"\n              type=\"natural\"\n              fill=\"url(#area-chart-01-fillMobile)\"\n              stroke=\"var(--color-mobile)\"\n              stackId=\"a\"\n            />\n            <Area\n              dataKey=\"desktop\"\n              type=\"natural\"\n              fill=\"url(#area-chart-01-fillDesktop)\"\n              stroke=\"var(--color-desktop)\"\n              stackId=\"a\"\n            />\n            <ChartLegend\n              content={props => (\n                <ChartLegendContent payload={props.payload} verticalAlign={props.verticalAlign} />\n              )}\n            />\n          </AreaChart>\n        </ChartContainer>\n      </div>\n    </div>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\web\\components\\ui\\skeleton.tsx","messages":[{"ruleId":"import-x/extensions","severity":2,"message":"Missing file extension for \"@/lib/utils\"","line":1,"column":20,"nodeType":"Literal","messageId":"missing","endLine":1,"endColumn":33},{"ruleId":"import-x/no-unresolved","severity":2,"message":"Unable to resolve path to module '@/lib/utils'.","line":1,"column":20,"nodeType":"Literal","messageId":"unresolved","endLine":1,"endColumn":33},{"ruleId":"import-x/prefer-default-export","severity":2,"message":"Prefer default export on a file with single export.","line":7,"column":10,"nodeType":"ExportSpecifier","messageId":"single","endLine":7,"endColumn":18}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { cn } from '@/lib/utils';\n\nfunction Skeleton({ className, ...props }: React.HTMLAttributes<HTMLDivElement>) {\n  return <div className={cn('animate-pulse rounded-md bg-muted', className)} {...props} />;\n}\n\nexport { Skeleton };\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\web\\components\\ui\\table.tsx","messages":[{"ruleId":"import-x/extensions","severity":2,"message":"Missing file extension for \"@/lib/utils\"","line":3,"column":20,"nodeType":"Literal","messageId":"missing","endLine":3,"endColumn":33},{"ruleId":"import-x/no-unresolved","severity":2,"message":"Unable to resolve path to module '@/lib/utils'.","line":3,"column":20,"nodeType":"Literal","messageId":"unresolved","endLine":3,"endColumn":33},{"ruleId":"react/prop-types","severity":2,"message":"'className' is missing in props validation","line":59,"column":6,"nodeType":"Property","messageId":"missingPropType","endLine":59,"endColumn":15},{"ruleId":"react/prop-types","severity":2,"message":"'className' is missing in props validation","line":74,"column":6,"nodeType":"Property","messageId":"missingPropType","endLine":74,"endColumn":15}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from 'react';\n\nimport { cn } from '@/lib/utils';\n\nconst Table = React.forwardRef<HTMLTableElement, React.HTMLAttributes<HTMLTableElement>>(\n  ({ className, ...props }, ref) => (\n    <div className=\"relative w-full overflow-auto\">\n      <table ref={ref} className={cn('w-full caption-bottom text-sm', className)} {...props} />\n    </div>\n  )\n);\nTable.displayName = 'Table';\n\nconst TableHeader = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <thead ref={ref} className={cn('[&_tr]:border-b', className)} {...props} />\n));\nTableHeader.displayName = 'TableHeader';\n\nconst TableBody = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tbody ref={ref} className={cn('[&_tr:last-child]:border-0', className)} {...props} />\n));\nTableBody.displayName = 'TableBody';\n\nconst TableFooter = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tfoot\n    ref={ref}\n    className={cn('border-t bg-muted/50 font-medium [&>tr]:last:border-b-0', className)}\n    {...props}\n  />\n));\nTableFooter.displayName = 'TableFooter';\n\nconst TableRow = React.forwardRef<HTMLTableRowElement, React.HTMLAttributes<HTMLTableRowElement>>(\n  ({ className, ...props }, ref) => (\n    <tr\n      ref={ref}\n      className={cn(\n        'border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted',\n        className\n      )}\n      {...props}\n    />\n  )\n);\nTableRow.displayName = 'TableRow';\n\nconst TableHead = React.forwardRef<\n  HTMLTableCellElement,\n  React.ThHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <th\n    ref={ref}\n    className={cn(\n      'h-10 px-2 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]',\n      className\n    )}\n    {...props}\n  />\n));\nTableHead.displayName = 'TableHead';\n\nconst TableCell = React.forwardRef<\n  HTMLTableCellElement,\n  React.TdHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <td\n    ref={ref}\n    className={cn(\n      'p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]',\n      className\n    )}\n    {...props}\n  />\n));\nTableCell.displayName = 'TableCell';\n\nconst TableCaption = React.forwardRef<\n  HTMLTableCaptionElement,\n  React.HTMLAttributes<HTMLTableCaptionElement>\n>(({ className, ...props }, ref) => (\n  <caption ref={ref} className={cn('mt-4 text-sm text-muted-foreground', className)} {...props} />\n));\nTableCaption.displayName = 'TableCaption';\n\nexport { Table, TableHeader, TableBody, TableFooter, TableHead, TableRow, TableCell, TableCaption };\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\web\\components\\ui\\toast.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'CheckCircle' is defined but never used.","line":4,"column":13,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":24},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'AlertCircle' is defined but never used.","line":4,"column":26,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":37},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'AlertTriangle' is defined but never used.","line":4,"column":39,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":52},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Info' is defined but never used.","line":4,"column":54,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":58}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from 'react';\nimport * as ToastPrimitives from '@radix-ui/react-toast';\nimport { cva, type VariantProps } from 'class-variance-authority';\nimport { X, CheckCircle, AlertCircle, AlertTriangle, Info } from 'lucide-react';\n\nimport { cn } from '../../lib/utils';\n\nconst ToastProvider = ToastPrimitives.Provider;\n\nconst ToastViewport = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Viewport>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Viewport>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Viewport\n    ref={ref}\n    className={cn(\n      'fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]',\n      className\n    )}\n    {...props}\n  />\n));\nToastViewport.displayName = ToastPrimitives.Viewport.displayName;\n\nconst toastVariants = cva(\n  'group pointer-events-auto relative flex w-full items-center justify-between space-x-2 overflow-hidden rounded-xl border p-4 pr-6 shadow-glass-lg transition-all backdrop-blur-xl data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full',\n  {\n    variants: {\n      variant: {\n        default: 'border-white/20 bg-white/10 dark:bg-slate-900/10 text-foreground',\n        destructive: 'border-red-500/30 bg-red-500/10 text-red-600 dark:text-red-400',\n        success: 'border-green-500/30 bg-green-500/10 text-green-600 dark:text-green-400',\n        warning: 'border-yellow-500/30 bg-yellow-500/10 text-yellow-600 dark:text-yellow-400',\n        info: 'border-blue-500/30 bg-blue-500/10 text-blue-600 dark:text-blue-400',\n      },\n    },\n    defaultVariants: {\n      variant: 'default',\n    },\n  }\n);\n\nconst Toast = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Root> & VariantProps<typeof toastVariants>\n>(({ className, variant, ...props }, ref) => (\n  <ToastPrimitives.Root\n    ref={ref}\n    className={cn(toastVariants({ variant }), className)}\n    {...props}\n  />\n));\nToast.displayName = ToastPrimitives.Root.displayName;\n\nconst ToastAction = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Action>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Action>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Action\n    ref={ref}\n    className={cn(\n      'inline-flex h-8 shrink-0 items-center justify-center rounded-lg border border-white/20 bg-white/10 dark:bg-slate-700/30 px-3 text-sm font-medium transition-all duration-200 hover:bg-white/20 dark:hover:bg-slate-600/40 hover:border-white/30 focus:outline-none focus:ring-2 focus:ring-blue-500/50 disabled:pointer-events-none disabled:opacity-50 backdrop-blur-sm',\n      className\n    )}\n    {...props}\n  />\n));\nToastAction.displayName = ToastPrimitives.Action.displayName;\n\nconst ToastClose = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Close>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Close>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Close\n    ref={ref}\n    className={cn(\n      'absolute right-1 top-1 rounded-lg p-1 text-slate-400 opacity-0 transition-all duration-200 hover:text-slate-600 hover:bg-white/10 dark:hover:text-slate-300 dark:hover:bg-slate-700/50 focus:opacity-100 focus:outline-none focus:ring-2 focus:ring-blue-500/50 group-hover:opacity-100',\n      className\n    )}\n    toast-close=\"\"\n    {...props}\n  >\n    <X className=\"h-4 w-4\" />\n  </ToastPrimitives.Close>\n));\nToastClose.displayName = ToastPrimitives.Close.displayName;\n\nconst ToastTitle = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Title>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Title>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Title\n    ref={ref}\n    className={cn('text-sm font-semibold [&+div]:text-xs', className)}\n    {...props}\n  />\n));\nToastTitle.displayName = ToastPrimitives.Title.displayName;\n\nconst ToastDescription = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Description>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Description>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Description\n    ref={ref}\n    className={cn('text-sm opacity-90', className)}\n    {...props}\n  />\n));\nToastDescription.displayName = ToastPrimitives.Description.displayName;\n\ntype ToastProps = React.ComponentPropsWithoutRef<typeof Toast>;\n\ntype ToastActionElement = React.ReactElement<typeof ToastAction>;\n\nexport {\n  type ToastProps,\n  type ToastActionElement,\n  ToastProvider,\n  ToastViewport,\n  Toast,\n  ToastTitle,\n  ToastDescription,\n  ToastClose,\n  ToastAction,\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\web\\components\\ui\\toaster.tsx","messages":[{"ruleId":"import-x/prefer-default-export","severity":2,"message":"Prefer default export on a file with single export.","line":11,"column":1,"nodeType":"ExportNamedDeclaration","messageId":"single","endLine":29,"endColumn":2}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useToast } from '../../hooks/use-toast';\nimport {\n  Toast,\n  ToastClose,\n  ToastDescription,\n  ToastProvider,\n  ToastTitle,\n  ToastViewport,\n} from './toast';\n\nexport function Toaster() {\n  const { toasts } = useToast();\n\n  return (\n    <ToastProvider>\n      {toasts.map(({ id, title, description, action, ...props }) => (\n        <Toast key={id} {...props}>\n          <div className=\"grid gap-1\">\n            {title && <ToastTitle>{title}</ToastTitle>}\n            {description && <ToastDescription>{description}</ToastDescription>}\n          </div>\n          {action}\n          <ToastClose />\n        </Toast>\n      ))}\n      <ToastViewport />\n    </ToastProvider>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\web\\components\\ui\\tooltip.tsx","messages":[{"ruleId":"import-x/extensions","severity":2,"message":"Missing file extension for \"@/lib/utils\"","line":4,"column":20,"nodeType":"Literal","messageId":"missing","endLine":4,"endColumn":33},{"ruleId":"import-x/no-unresolved","severity":2,"message":"Unable to resolve path to module '@/lib/utils'.","line":4,"column":20,"nodeType":"Literal","messageId":"unresolved","endLine":4,"endColumn":33}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from 'react';\nimport * as TooltipPrimitive from '@radix-ui/react-tooltip';\n\nimport { cn } from '@/lib/utils';\n\nconst TooltipProvider = TooltipPrimitive.Provider;\n\nconst Tooltip = TooltipPrimitive.Root;\n\nconst TooltipTrigger = TooltipPrimitive.Trigger;\n\nconst TooltipContent = React.forwardRef<\n  React.ElementRef<typeof TooltipPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TooltipPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <TooltipPrimitive.Portal>\n    <TooltipPrimitive.Content\n      ref={ref}\n      sideOffset={sideOffset}\n      className={cn(\n        'z-50 overflow-hidden rounded-md bg-primary px-3 py-1.5 text-xs text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]',\n        className\n      )}\n      {...props}\n    />\n  </TooltipPrimitive.Portal>\n));\nTooltipContent.displayName = TooltipPrimitive.Content.displayName;\n\nexport { Tooltip, TooltipTrigger, TooltipContent, TooltipProvider };\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\web\\contexts\\ThemeContext.js","messages":[{"ruleId":"react/prop-types","severity":2,"message":"'children' is missing in props validation","line":5,"column":33,"nodeType":"Property","messageId":"missingPropType","endLine":5,"endColumn":41},{"ruleId":"react-hooks/exhaustive-deps","severity":2,"message":"React Hook useMemo has a missing dependency: 'toggleDarkMode'. Either include it or remove the dependency array.","line":31,"column":63,"nodeType":"ArrayExpression","endLine":31,"endColumn":73,"suggestions":[{"desc":"Update the dependencies array to be: [darkMode, toggleDarkMode]","fix":{"range":[944,954],"text":"[darkMode, toggleDarkMode]"}}]},{"ruleId":"react/jsx-filename-extension","severity":2,"message":"JSX not allowed in files with extension '.js'","line":33,"column":10,"nodeType":"JSXElement","messageId":"noJSXWithExtension","endLine":33,"endColumn":81}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { createContext, useState, useEffect, useMemo } from 'react';\n\nexport const ThemeContext = createContext();\n\nexport function ThemeProvider({ children }) {\n  const [darkMode, setDarkMode] = useState(false);\n\n  useEffect(() => {\n    const savedTheme = localStorage.getItem('theme');\n    const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;\n\n    if (savedTheme === 'dark' || (!savedTheme && prefersDark)) {\n      setDarkMode(true);\n      document.documentElement.classList.add('dark');\n    }\n  }, []);\n\n  const toggleDarkMode = () => {\n    const newDarkMode = !darkMode;\n    setDarkMode(newDarkMode);\n\n    if (newDarkMode) {\n      document.documentElement.classList.add('dark');\n      localStorage.setItem('theme', 'dark');\n    } else {\n      document.documentElement.classList.remove('dark');\n      localStorage.setItem('theme', 'light');\n    }\n  };\n\n  const value = useMemo(() => ({ darkMode, toggleDarkMode }), [darkMode]);\n\n  return <ThemeContext.Provider value={value}>{children}</ThemeContext.Provider>;\n}\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\web\\eslint.config.mjs","messages":[{"ruleId":"no-underscore-dangle","severity":2,"message":"Unexpected dangling '_' in '__filename'.","line":8,"column":7,"nodeType":"VariableDeclarator","messageId":"unexpectedUnderscore","endLine":8,"endColumn":50},{"ruleId":"no-underscore-dangle","severity":2,"message":"Unexpected dangling '_' in '__dirname'.","line":9,"column":7,"nodeType":"VariableDeclarator","messageId":"unexpectedUnderscore","endLine":9,"endColumn":43}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { defineConfig } from 'eslint/config';\nimport globals from 'globals';\nimport path from 'node:path';\nimport { fileURLToPath } from 'node:url';\nimport js from '@eslint/js';\nimport { FlatCompat } from '@eslint/eslintrc';\n\nconst __filename = fileURLToPath(import.meta.url);\nconst __dirname = path.dirname(__filename);\nconst compat = new FlatCompat({\n  baseDirectory: __dirname,\n  recommendedConfig: js.configs.recommended,\n  allConfig: js.configs.all,\n});\n\nexport default defineConfig([\n  {\n    extends: compat.extends('next/core-web-vitals'),\n\n    languageOptions: {\n      globals: {\n        ...globals.browser,\n        ...globals.node,\n      },\n\n      ecmaVersion: 2020,\n      sourceType: 'module',\n\n      parserOptions: {\n        ecmaFeatures: {\n          jsx: true,\n        },\n      },\n    },\n\n    settings: {\n      react: {\n        version: 'detect',\n      },\n\n      'import/resolver': {\n        typescript: {\n          alwaysTryTypes: true,\n          project: './tsconfig.json',\n        },\n      },\n    },\n\n    rules: {\n      'import/extensions': 'off',\n      'import/no-unresolved': 'error',\n\n      'import/no-extraneous-dependencies': [\n        'error',\n        {\n          devDependencies: true,\n          optionalDependencies: false,\n          peerDependencies: false,\n        },\n      ],\n\n      'import/no-relative-packages': 'off',\n      'no-use-before-define': 'error',\n      'no-unsafe-optional-chaining': 'off',\n      'max-len': 'off',\n      'no-unused-vars': 'error',\n      'react-hooks/exhaustive-deps': 'error',\n      'no-promise-executor-return': 'off',\n      'no-alert': 'error',\n      'no-nested-ternary': 'error',\n      '@next/next/no-img-element': 'off',\n      'no-shadow': 'error',\n      'react/display-name': 'off',\n      'import/prefer-default-export': 'off',\n      'no-console': 'warn',\n      'prefer-template': 'error',\n      'no-plusplus': 'off',\n      'no-return-assign': 'off',\n      'no-undef': 'error',\n      'no-bitwise': 'off',\n      'no-restricted-properties': 'off',\n      'operator-linebreak': 'off',\n      'comma-dangle': 'off',\n      'arrow-parens': 'off',\n      'consistent-return': 'off',\n      'no-restricted-syntax': 'off',\n      'no-prototype-builtins': 'off',\n      'eol-last': 'off',\n      'linebreak-style': 'off',\n      quotes: 'off',\n      indent: 'off',\n      'object-curly-newline': 'off',\n      'arrow-body-style': 'off',\n      'react/jsx-no-undef': 'error',\n    },\n  },\n]);\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\web\\hooks\\use-toast.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'actionTypes' is assigned a value but only used as a type.","line":18,"column":7,"nodeType":null,"messageId":"usedOnlyAsType","endLine":18,"endColumn":18},{"ruleId":"@typescript-eslint/no-use-before-define","severity":2,"message":"'dispatch' was used before it was defined.","line":65,"column":5,"nodeType":"Identifier","messageId":"noUseBeforeDefine","endLine":65,"endColumn":13},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of arrow function.","line":74,"column":62,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":74,"endColumn":64},{"ruleId":"default-case","severity":2,"message":"Expected a default case.","line":75,"column":3,"nodeType":"SwitchStatement","messageId":"missingDefaultCase","endLine":124,"endColumn":4},{"ruleId":"@typescript-eslint/no-shadow","severity":2,"message":"'toast' is already declared in the upper scope on line 140 column 10.","line":96,"column":30,"nodeType":"Identifier","messageId":"noShadow","endLine":96,"endColumn":35},{"ruleId":"@typescript-eslint/no-shadow","severity":2,"message":"'props' is already declared in the upper scope on line 140 column 21.","line":143,"column":19,"nodeType":"Identifier","messageId":"noShadow","endLine":143,"endColumn":38}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\n// Inspired by react-hot-toast library\nimport * as React from 'react';\n\nimport type { ToastActionElement, ToastProps } from '../components/ui/toast';\n\nconst TOAST_LIMIT = 1;\nconst TOAST_REMOVE_DELAY = 1000000;\n\ntype ToasterToast = ToastProps & {\n  id: string;\n  title?: React.ReactNode;\n  description?: React.ReactNode;\n  action?: ToastActionElement;\n};\n\nconst actionTypes = {\n  ADD_TOAST: 'ADD_TOAST',\n  UPDATE_TOAST: 'UPDATE_TOAST',\n  DISMISS_TOAST: 'DISMISS_TOAST',\n  REMOVE_TOAST: 'REMOVE_TOAST',\n} as const;\n\nlet count = 0;\n\nfunction genId() {\n  count = (count + 1) % Number.MAX_SAFE_INTEGER;\n  return count.toString();\n}\n\ntype ActionType = typeof actionTypes;\n\ntype Action =\n  | {\n      type: ActionType['ADD_TOAST'];\n      toast: ToasterToast;\n    }\n  | {\n      type: ActionType['UPDATE_TOAST'];\n      toast: Partial<ToasterToast>;\n    }\n  | {\n      type: ActionType['DISMISS_TOAST'];\n      toastId?: ToasterToast['id'];\n    }\n  | {\n      type: ActionType['REMOVE_TOAST'];\n      toastId?: ToasterToast['id'];\n    };\n\ninterface State {\n  toasts: ToasterToast[];\n}\n\nconst toastTimeouts = new Map<string, ReturnType<typeof setTimeout>>();\n\nconst addToRemoveQueue = (toastId: string) => {\n  if (toastTimeouts.has(toastId)) {\n    return;\n  }\n\n  const timeout = setTimeout(() => {\n    toastTimeouts.delete(toastId);\n    dispatch({\n      type: 'REMOVE_TOAST',\n      toastId,\n    });\n  }, TOAST_REMOVE_DELAY);\n\n  toastTimeouts.set(toastId, timeout);\n};\n\nexport const reducer = (state: State, action: Action): State => {\n  switch (action.type) {\n    case 'ADD_TOAST':\n      return {\n        ...state,\n        toasts: [action.toast, ...state.toasts].slice(0, TOAST_LIMIT),\n      };\n\n    case 'UPDATE_TOAST':\n      return {\n        ...state,\n        toasts: state.toasts.map(t => (t.id === action.toast.id ? { ...t, ...action.toast } : t)),\n      };\n\n    case 'DISMISS_TOAST': {\n      const { toastId } = action;\n\n      // ! Side effects ! - This could be extracted into a dismissToast() action,\n      // but I'll keep it here for simplicity\n      if (toastId) {\n        addToRemoveQueue(toastId);\n      } else {\n        state.toasts.forEach(toast => {\n          addToRemoveQueue(toast.id);\n        });\n      }\n\n      return {\n        ...state,\n        toasts: state.toasts.map(t =>\n          t.id === toastId || toastId === undefined\n            ? {\n                ...t,\n                open: false,\n              }\n            : t\n        ),\n      };\n    }\n    case 'REMOVE_TOAST':\n      if (action.toastId === undefined) {\n        return {\n          ...state,\n          toasts: [],\n        };\n      }\n      return {\n        ...state,\n        toasts: state.toasts.filter(t => t.id !== action.toastId),\n      };\n  }\n};\n\nconst listeners: ((state: State) => void)[] = [];\n\nlet memoryState: State = { toasts: [] };\n\nfunction dispatch(action: Action) {\n  memoryState = reducer(memoryState, action);\n  listeners.forEach(listener => {\n    listener(memoryState);\n  });\n}\n\ntype Toast = Omit<ToasterToast, 'id'>;\n\nfunction toast({ ...props }: Toast) {\n  const id = genId();\n\n  const update = (props: ToasterToast) =>\n    dispatch({\n      type: 'UPDATE_TOAST',\n      toast: { ...props, id },\n    });\n  const dismiss = () => dispatch({ type: 'DISMISS_TOAST', toastId: id });\n\n  dispatch({\n    type: 'ADD_TOAST',\n    toast: {\n      ...props,\n      id,\n      open: true,\n      onOpenChange: open => {\n        if (!open) dismiss();\n      },\n    },\n  });\n\n  return {\n    id,\n    dismiss,\n    update,\n  };\n}\n\nfunction useToast() {\n  const [state, setState] = React.useState<State>(memoryState);\n\n  React.useEffect(() => {\n    listeners.push(setState);\n    return () => {\n      const index = listeners.indexOf(setState);\n      if (index > -1) {\n        listeners.splice(index, 1);\n      }\n    };\n  }, [state]);\n\n  return {\n    ...state,\n    toast,\n    dismiss: (toastId?: string) => dispatch({ type: 'DISMISS_TOAST', toastId }),\n  };\n}\n\nexport { useToast, toast };\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\web\\lib\\shadcn-plugin.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":16,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":23},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":155,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":155,"endColumn":7}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const plugin = require('tailwindcss/plugin');\n\nconst shadcnPlugin = plugin(\n  // 1. Add CSS variable definitions to the base layer\n  ({ addBase }) => {\n    addBase({\n      ':root': {\n        '--background': '0 0% 100%',\n        '--foreground': '0 0% 3.9%',\n        '--card': '0 0% 100%',\n        '--card-foreground': '0 0% 3.9%',\n        '--popover': '0 0% 100%',\n        '--popover-foreground': '0 0% 3.9%',\n        '--primary': '0 0% 9%',\n        '--primary-foreground': '0 0% 98%',\n        '--secondary': '0 0% 96.1%',\n        '--secondary-foreground': '0 0% 9%',\n        '--muted': '0 0% 96.1%',\n        '--muted-foreground': '0 0% 45.1%',\n        '--accent': '0 0% 96.1%',\n        '--accent-foreground': '0 0% 9%',\n        '--destructive': '0 84.2% 60.2%',\n        '--destructive-foreground': '0 0% 98%',\n        '--border': '0 0% 89.8%',\n        '--input': '0 0% 89.8%',\n        '--ring': '0 0% 3.9%',\n        '--radius': '0.5rem',\n        '--chart-1': '12 76% 61%',\n        '--chart-2': '173 58% 39%',\n        '--chart-3': '197 37% 24%',\n        '--chart-4': '43 74% 66%',\n        '--chart-5': '27 87% 67%',\n      },\n      '.dark': {\n        '--background': '0 0% 3.9%',\n        '--foreground': '0 0% 98%',\n        '--card': '0 0% 3.9%',\n        '--card-foreground': '0 0% 98%',\n        '--popover': '0 0% 3.9%',\n        '--popover-foreground': '0 0% 98%',\n        '--primary': '0 0% 98%',\n        '--primary-foreground': '0 0% 9%',\n        '--secondary': '0 0% 14.9%',\n        '--secondary-foreground': '0 0% 98%',\n        '--muted': '0 0% 14.9%',\n        '--muted-foreground': '0 0% 63.9%',\n        '--accent': '0 0% 14.9%',\n        '--accent-foreground': '0 0% 98%',\n        '--destructive': '0 62.8% 30.6%',\n        '--destructive-foreground': '0 0% 98%',\n        '--border': '0 0% 14.9%',\n        '--input': '0 0% 14.9%',\n        '--ring': '0 0% 83.1%',\n        '--chart-1': '220 70% 50%',\n        '--chart-2': '160 60% 45%',\n        '--chart-3': '30 80% 55%',\n        '--chart-4': '280 65% 60%',\n        '--chart-5': '340 75% 55%',\n      },\n    });\n\n    addBase({\n      '* ': {\n        '@apply border-border': {},\n      },\n      body: {\n        '@apply bg-background text-foreground': {},\n        'font-feature-settings': '\"rlig\" 1, \"calt\" 1',\n      },\n    });\n  },\n\n  // 2. Extend the Tailwind theme with plugin utilities\n  {\n    theme: {\n      container: {\n        center: true,\n        padding: '2rem',\n        screens: {\n          '2xl': '1400px',\n        },\n      },\n      extend: {\n        colors: {\n          border: 'hsl(var(--border))',\n          input: 'hsl(var(--input))',\n          ring: 'hsl(var(--ring))',\n          background: 'hsl(var(--background))',\n          foreground: 'hsl(var(--foreground))',\n          primary: {\n            DEFAULT: 'hsl(var(--primary))',\n            foreground: 'hsl(var(--primary-foreground))',\n          },\n          secondary: {\n            DEFAULT: 'hsl(var(--secondary))',\n            foreground: 'hsl(var(--secondary-foreground))',\n          },\n          destructive: {\n            DEFAULT: 'hsl(var(--destructive))',\n            foreground: 'hsl(var(--destructive-foreground))',\n          },\n          muted: {\n            DEFAULT: 'hsl(var(--muted))',\n            foreground: 'hsl(var(--muted-foreground))',\n          },\n          accent: {\n            DEFAULT: 'hsl(var(--accent))',\n            foreground: 'hsl(var(--accent-foreground))',\n          },\n          popover: {\n            DEFAULT: 'hsl(var(--popover))',\n            foreground: 'hsl(var(--popover-foreground))',\n          },\n          card: {\n            DEFAULT: 'hsl(var(--card))',\n            foreground: 'hsl(var(--card-foreground))',\n          },\n          chart: {\n            1: 'hsl(var(--chart-1))',\n            2: 'hsl(var(--chart-2))',\n            3: 'hsl(var(--chart-3))',\n            4: 'hsl(var(--chart-4))',\n            5: 'hsl(var(--chart-5))',\n          },\n        },\n        borderRadius: {\n          lg: `var(--radius)`,\n          md: `calc(var(--radius) - 2px)`,\n          sm: `calc(var(--radius) - 4px)`,\n        },\n        keyframes: {\n          'accordion-down': {\n            from: { height: '0' },\n            to: { height: 'var(--radix-accordion-content-height)' },\n          },\n          'accordion-up': {\n            from: { height: 'var(--radix-accordion-content-height)' },\n            to: { height: '0' },\n          },\n          'caret-blink': {\n            '0%,70%,100%': { opacity: '1' },\n            '20%,50%': { opacity: '0' },\n          },\n        },\n        animation: {\n          'accordion-down': 'accordion-down 0.2s ease-out',\n          'accordion-up': 'accordion-up 0.2s ease-out',\n          'caret-blink': 'caret-blink 1.25s ease-out infinite',\n        },\n      },\n    },\n  }\n);\n\nmodule.exports = { shadcnPlugin };\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\web\\lib\\utils.js","messages":[{"ruleId":"import-x/prefer-default-export","severity":2,"message":"Prefer default export on a file with single export.","line":4,"column":1,"nodeType":"ExportNamedDeclaration","messageId":"single","endLine":6,"endColumn":2}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { clsx } from 'clsx';\nimport { twMerge } from 'tailwind-merge';\n\nexport function cn(...inputs) {\n  return twMerge(clsx(inputs));\n}\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\web\\lib\\utils.ts","messages":[{"ruleId":"import-x/prefer-default-export","severity":2,"message":"Prefer default export on a file with single export.","line":4,"column":1,"nodeType":"ExportNamedDeclaration","messageId":"single","endLine":6,"endColumn":2}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { clsx, type ClassValue } from 'clsx';\nimport { twMerge } from 'tailwind-merge';\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs));\n}\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\web\\next-env.d.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\web\\next.config.mjs","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'join' is defined but never used.","line":3,"column":19,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":23,"suggestions":[{"messageId":"removeVar","data":{"varName":"join"},"fix":{"range":[96,102],"text":""},"desc":"Remove unused variable 'join'."}]},{"ruleId":"no-underscore-dangle","severity":2,"message":"Unexpected dangling '_' in '__filename'.","line":5,"column":7,"nodeType":"VariableDeclarator","messageId":"unexpectedUnderscore","endLine":5,"endColumn":50},{"ruleId":"no-underscore-dangle","severity":2,"message":"Unexpected dangling '_' in '__dirname'.","line":6,"column":7,"nodeType":"VariableDeclarator","messageId":"unexpectedUnderscore","endLine":6,"endColumn":38},{"ruleId":"no-unused-vars","severity":1,"message":"'__dirname' is assigned a value but never used.","line":6,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":16,"suggestions":[{"messageId":"removeVar","data":{"varName":"__dirname"},"fix":{"range":[170,208],"text":""},"desc":"Remove unused variable '__dirname'."}]},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":82,"column":26,"nodeType":"Identifier","messageId":"undef","endLine":82,"endColumn":33},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":98,"column":20,"nodeType":"Identifier","messageId":"undef","endLine":98,"endColumn":27}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Add these lines at the top of your file\nimport { fileURLToPath } from 'url';\nimport { dirname, join } from 'path';\n\nconst __filename = fileURLToPath(import.meta.url);\nconst __dirname = dirname(__filename);\n\n/** @type {import('next').NextConfig} */\nconst nextConfig = {\n  transpilePackages: ['@whatsdex/shared', '@whiskeysockets/baileys'],\n  reactStrictMode: true,\n\n  // Image optimization\n  images: {\n    remotePatterns: [\n      {\n        protocol: 'http',\n        hostname: 'localhost',\n      },\n      {\n        protocol: 'https',\n        hostname: 'whatsdex.com',\n      },\n    ],\n    formats: ['image/webp', 'image/avif'],\n    deviceSizes: [640, 750, 828, 1080, 1200, 1920, 2048, 3840],\n    imageSizes: [16, 32, 48, 64, 96, 128, 256, 384],\n  },\n\n  // Experimental features\n  experimental: {\n    esmExternals: 'loose', // This is often the key fix for Baileys\n    // optimizeCss: true,\n    // scrollRestoration: true,\n  },\n\n  // Server external packages\n  // serverExternalPackages: ['sharp'],\n\n  // Headers for security and performance\n  async headers() {\n    return [\n      {\n        source: '/(.*)',\n        headers: [\n          {\n            key: 'X-Frame-Options',\n            value: 'DENY',\n          },\n          {\n            key: 'X-Content-Type-Options',\n            value: 'nosniff',\n          },\n          {\n            key: 'Referrer-Policy',\n            value: 'origin-when-cross-origin',\n          },\n          {\n            key: 'Permissions-Policy',\n            value: 'camera=(), microphone=(), geolocation=()',\n          },\n        ],\n      },\n    ];\n  },\n\n  // Redirects\n  async redirects() {\n    return [\n      {\n        source: '/home',\n        destination: '/',\n        permanent: true,\n      },\n    ];\n  },\n\n  // Environment variables\n  env: {\n    NEXT_PUBLIC_APP_NAME: 'WhatsDeX Dashboard',\n    NEXT_PUBLIC_APP_VERSION: '1.0.0',\n    NEXT_PUBLIC_API_URL: process.env.NEXT_PUBLIC_API_URL || 'http://localhost:3001',\n  },\n\n  // Turbopack configuration\n  // turbopack: {\n  //   root: join(__dirname, '../..'),\n  //   rules: {\n  //     '*.svg': {\n  //       loaders: ['@svgr/webpack'],\n  //       as: '*.js',\n  //     },\n  //   },\n  // },\n\n  // Build optimization\n  compiler: {\n    removeConsole: process.env.NODE_ENV === 'production',\n  },\n\n  // Output configuration\n  output: 'standalone',\n};\n\nexport default nextConfig;\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\web\\pages\\_app.js","messages":[{"ruleId":"import-x/extensions","severity":2,"message":"Missing file extension for \"../components/ui/toaster\"","line":7,"column":42,"nodeType":"Literal","messageId":"missing","endLine":7,"endColumn":68},{"ruleId":"import-x/no-unresolved","severity":2,"message":"Unable to resolve path to module '../components/ui/toaster'.","line":7,"column":42,"nodeType":"Literal","messageId":"unresolved","endLine":7,"endColumn":68},{"ruleId":"react/prop-types","severity":2,"message":"'Component' is missing in props validation","line":11,"column":18,"nodeType":"Property","messageId":"missingPropType","endLine":11,"endColumn":27},{"ruleId":"react/prop-types","severity":2,"message":"'pageProps' is missing in props validation","line":11,"column":29,"nodeType":"Property","messageId":"missingPropType","endLine":11,"endColumn":38},{"ruleId":"react/jsx-filename-extension","severity":2,"message":"JSX not allowed in files with extension '.js'","line":26,"column":5,"nodeType":"JSXElement","messageId":"noJSXWithExtension","endLine":78,"endColumn":21}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import '../styles/globals.css';\nimport { useEffect } from 'react';\nimport { Toaster } from 'react-hot-toast';\nimport { useRouter } from 'next/router';\nimport Layout from '../components/common/Layout';\nimport { ThemeProvider } from '../contexts/ThemeContext';\nimport { Toaster as ShadcnToaster } from '../components/ui/toaster';\n\nimport { initSocket } from '../socket';\n\nfunction MyApp({ Component, pageProps }) {\n  const router = useRouter();\n\n  useEffect(() => {\n    initSocket();\n    // Add smooth scrolling\n    document.documentElement.style.scrollBehavior = 'smooth';\n\n    // Prevent FOUC (Flash of Unstyled Content)\n    document.documentElement.classList.add('loaded');\n  }, []);\n\n  const isAdminPage = router.pathname.startsWith('/admin');\n\n  return (\n    <ThemeProvider>\n      {isAdminPage ? (\n        <Layout>\n          <Component {...pageProps} />\n        </Layout>\n      ) : (\n        <Component {...pageProps} />\n      )}\n      <Toaster\n        position=\"top-right\"\n        toastOptions={{\n          duration: 4000,\n          style: {\n            background: 'rgba(255, 255, 255, 0.9)',\n            backdropFilter: 'blur(10px)',\n            border: '1px solid rgba(255, 255, 255, 0.2)',\n            color: '#1f2937',\n            borderRadius: '12px',\n            boxShadow: '0 8px 32px 0 rgba(31, 38, 135, 0.37)',\n          },\n          success: {\n            style: {\n              background: 'rgba(34, 197, 94, 0.1)',\n              border: '1px solid rgba(34, 197, 94, 0.3)',\n              color: '#16a34a',\n            },\n            iconTheme: {\n              primary: '#16a34a',\n              secondary: '#f0fdf4',\n            },\n          },\n          error: {\n            style: {\n              background: 'rgba(239, 68, 68, 0.1)',\n              border: '1px solid rgba(239, 68, 68, 0.3)',\n              color: '#dc2626',\n            },\n            iconTheme: {\n              primary: '#dc2626',\n              secondary: '#fef2f2',\n            },\n          },\n          loading: {\n            style: {\n              background: 'rgba(59, 130, 246, 0.1)',\n              border: '1px solid rgba(59, 130, 246, 0.3)',\n              color: '#2563eb',\n            },\n          },\n        }}\n      />\n      <ShadcnToaster />\n    </ThemeProvider>\n  );\n}\n\nexport default MyApp;\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\web\\pages\\admin\\analytics.js","messages":[{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":19,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":19,"endColumn":20,"suggestions":[{"fix":{"range":[676,727],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"react/jsx-filename-extension","severity":2,"message":"JSX not allowed in files with extension '.js'","line":47,"column":7,"nodeType":"JSXElement","messageId":"noJSXWithExtension","endLine":52,"endColumn":13},{"ruleId":"no-unsafe-optional-chaining","severity":2,"message":"Unsafe arithmetic operation on optional chaining. It can result in NaN.","line":135,"column":35,"nodeType":"ChainExpression","messageId":"unsafeArithmetic","endLine":135,"endColumn":65},{"ruleId":"no-unsafe-optional-chaining","severity":2,"message":"Unsafe arithmetic operation on optional chaining. It can result in NaN.","line":151,"column":29,"nodeType":"ChainExpression","messageId":"unsafeArithmetic","endLine":151,"endColumn":69}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect, useCallback } from 'react';\nimport Head from 'next/head';\nimport withAuth from '../../components/common/withAuth';\n\nfunction AnalyticsPage() {\n  const [analytics, setAnalytics] = useState({});\n  const [loading, setLoading] = useState(true);\n  const [timeRange, setTimeRange] = useState('24h');\n  const [selectedMetric, setSelectedMetric] = useState('overview');\n\n  const fetchAnalytics = useCallback(async () => {\n    try {\n      const response = await fetch(`/api/auth/analytics?range=${timeRange}`);\n      const data = await response.json();\n      if (data.success) {\n        setAnalytics(data.data);\n      }\n    } catch (error) {\n      console.error('Failed to fetch analytics:', error);\n    } finally {\n      setLoading(false);\n    }\n  }, [timeRange]);\n\n  useEffect(() => {\n    fetchAnalytics();\n    const interval = setInterval(fetchAnalytics, 30000); // Update every 30 seconds\n    return () => clearInterval(interval);\n  }, [fetchAnalytics]);\n\n  const formatNumber = num => {\n    if (num >= 1000000) return `${(num / 1000000).toFixed(1)}M`;\n    if (num >= 1000) return `${(num / 1000).toFixed(1)}K`;\n    return num.toString();\n  };\n\n  const formatTime = ms => {\n    if (ms < 1000) return `${ms}ms`;\n    if (ms < 60000) return `${(ms / 1000).toFixed(1)}s`;\n    return `${(ms / 60000).toFixed(1)}m`;\n  };\n\n  const formatPercentage = value => `${(value * 100).toFixed(1)}%`;\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4\" />\n          <p className=\"text-gray-600\">Loading analytics...</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100\">\n      <Head>\n        <title>Ultra-Smart Auth Analytics</title>\n        <meta name=\"description\" content=\"Comprehensive authentication analytics dashboard\" />\n        <link rel=\"icon\" href=\"/favicon.ico\" />\n      </Head>\n\n      <div className=\"container mx-auto px-4 py-8\">\n        {/* Header */}\n        <div className=\"text-center mb-8\">\n          <h1 className=\"text-4xl font-bold text-gray-900 mb-2\">\n            ðŸ“Š Ultra-Smart Authentication Analytics\n          </h1>\n          <p className=\"text-lg text-gray-600\">\n            Real-time insights into authentication performance and user behavior\n          </p>\n        </div>\n\n        {/* Controls */}\n        <div className=\"bg-white rounded-xl shadow-lg p-6 mb-6\">\n          <div className=\"flex flex-wrap gap-4 items-center justify-between\">\n            <div className=\"flex gap-4\">\n              <select\n                value={timeRange}\n                onChange={e => setTimeRange(e.target.value)}\n                className=\"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n              >\n                <option value=\"1h\">Last Hour</option>\n                <option value=\"24h\">Last 24 Hours</option>\n                <option value=\"7d\">Last 7 Days</option>\n                <option value=\"30d\">Last 30 Days</option>\n              </select>\n\n              <select\n                value={selectedMetric}\n                onChange={e => setSelectedMetric(e.target.value)}\n                className=\"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n              >\n                <option value=\"overview\">Overview</option>\n                <option value=\"qr-codes\">QR Codes</option>\n                <option value=\"pairing-codes\">Pairing Codes</option>\n                <option value=\"reconnection\">Reconnection</option>\n                <option value=\"sessions\">Sessions</option>\n              </select>\n            </div>\n\n            <div className=\"text-sm text-gray-500\">\n              Last updated: {new Date().toLocaleTimeString()}\n            </div>\n          </div>\n        </div>\n\n        {/* Overview Dashboard */}\n        {selectedMetric === 'overview' && (\n          <div className=\"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-4 gap-6 mb-8\">\n            {/* Overall Stats */}\n            <div className=\"bg-white rounded-xl shadow-lg p-6\">\n              <div className=\"flex items-center justify-between mb-4\">\n                <h3 className=\"text-lg font-semibold text-gray-800\">Total Connections</h3>\n                <div className=\"text-2xl\">ðŸ”—</div>\n              </div>\n              <div className=\"text-3xl font-bold text-blue-600 mb-2\">\n                {formatNumber(analytics.overall?.totalConnections || 0)}\n              </div>\n              <div className=\"text-sm text-gray-500\">\n                {analytics.comparison?.totalConnectionsChange > 0\n                  ? `+${analytics.comparison?.totalConnectionsChange.toFixed(1)}%`\n                  : `${analytics.comparison?.totalConnectionsChange.toFixed(1)}%`}{' '}\n                from last period\n              </div>\n            </div>\n\n            <div className=\"bg-white rounded-xl shadow-lg p-6\">\n              <div className=\"flex items-center justify-between mb-4\">\n                <h3 className=\"text-lg font-semibold text-gray-800\">Success Rate</h3>\n                <div className=\"text-2xl\">âœ…</div>\n              </div>\n              <div className=\"text-3xl font-bold text-green-600 mb-2\">\n                {formatPercentage(analytics.overall?.successRate / 100 || 0)}\n              </div>\n              <div className=\"text-sm text-gray-500\">\n                {analytics.comparison?.successRateChange > 0\n                  ? `+${analytics.comparison?.successRateChange.toFixed(1)}%`\n                  : `${analytics.comparison?.successRateChange.toFixed(1)}%`}{' '}\n                from last period\n              </div>\n            </div>\n\n            <div className=\"bg-white rounded-xl shadow-lg p-6\">\n              <div className=\"flex items-center justify-between mb-4\">\n                <h3 className=\"text-lg font-semibold text-gray-800\">Avg Connection Time</h3>\n                <div className=\"text-2xl\">â±ï¸</div>\n              </div>\n              <div className=\"text-3xl font-bold text-orange-600 mb-2\">\n                {formatTime(analytics.overall?.averageConnectionTime * 1000 || 0)}\n              </div>\n              <div className=\"text-sm text-gray-500\">\n                {analytics.comparison?.averageConnectionTimeChange > 0\n                  ? `+${analytics.comparison?.averageConnectionTimeChange.toFixed(1)}s`\n                  : `${analytics.comparison?.averageConnectionTimeChange.toFixed(1)}s`}{' '}\n                from last period\n              </div>\n            </div>\n\n            <div className=\"bg-white rounded-xl shadow-lg p-6\">\n              <div className=\"flex items-center justify-between mb-4\">\n                <h3 className=\"text-lg font-semibold text-gray-800\">Active Sessions</h3>\n                <div className=\"text-2xl\">ðŸ”µ</div>\n              </div>\n              <div className=\"text-3xl font-bold text-purple-600 mb-2\">\n                {analytics.overall?.activeConnections || 0}\n              </div>\n              <div className=\"text-sm text-gray-500\">Currently online</div>\n            </div>\n          </div>\n        )}\n\n        {/* QR Code Analytics */}\n        {selectedMetric === 'qr-codes' && (\n          <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n            <div className=\"bg-white rounded-xl shadow-lg p-6\">\n              <h3 className=\"text-xl font-semibold text-gray-800 mb-4\">ðŸ“± QR Code Performance</h3>\n              <div className=\"space-y-4\">\n                <div className=\"flex justify-between items-center\">\n                  <span className=\"text-gray-600\">Active QR Codes</span>\n                  <span className=\"font-semibold\">{analytics.qrStats?.activeQRs || 0}</span>\n                </div>\n                <div className=\"flex justify-between items-center\">\n                  <span className=\"text-gray-600\">Total Generated</span>\n                  <span className=\"font-semibold\">{analytics.qrStats?.totalGenerated || 0}</span>\n                </div>\n                <div className=\"flex justify-between items-center\">\n                  <span className=\"text-gray-600\">Success Rate</span>\n                  <span className=\"font-semibold text-green-600\">\n                    {analytics.qrStats?.averageSuccessRate || 'N/A'}\n                  </span>\n                </div>\n                <div className=\"flex justify-between items-center\">\n                  <span className=\"text-gray-600\">Generation Time</span>\n                  <span className=\"font-semibold\">\n                    {analytics.qrStats?.averageGenerationTime || 'N/A'}\n                  </span>\n                </div>\n                <div className=\"flex justify-between items-center\">\n                  <span className=\"text-gray-600\">Optimal Refresh Time</span>\n                  <span className=\"font-semibold\">\n                    {analytics.qrStats?.optimalRefreshTime || 'N/A'}\n                  </span>\n                </div>\n              </div>\n            </div>\n\n            <div className=\"bg-white rounded-xl shadow-lg p-6\">\n              <h3 className=\"text-xl font-semibold text-gray-800 mb-4\">ðŸ¤– AI Learning</h3>\n              <div className=\"space-y-4\">\n                <div className=\"flex justify-between items-center\">\n                  <span className=\"text-gray-600\">Successful Patterns</span>\n                  <span className=\"font-semibold text-green-600\">\n                    {analytics.qrStats?.learningPatterns?.successful || 0}\n                  </span>\n                </div>\n                <div className=\"flex justify-between items-center\">\n                  <span className=\"text-gray-600\">Failed Patterns</span>\n                  <span className=\"font-semibold text-red-600\">\n                    {analytics.qrStats?.learningPatterns?.failed || 0}\n                  </span>\n                </div>\n                <div className=\"text-sm text-gray-500 mt-4\">\n                  AI continuously learns from authentication patterns to optimize QR code generation\n                  and refresh timing.\n                </div>\n              </div>\n            </div>\n          </div>\n        )}\n\n        {/* Pairing Code Analytics */}\n        {selectedMetric === 'pairing-codes' && (\n          <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n            <div className=\"bg-white rounded-xl shadow-lg p-6\">\n              <h3 className=\"text-xl font-semibold text-gray-800 mb-4\">\n                ðŸ”¢ Pairing Code Performance\n              </h3>\n              <div className=\"space-y-4\">\n                <div className=\"flex justify-between items-center\">\n                  <span className=\"text-gray-600\">Active Codes</span>\n                  <span className=\"font-semibold\">{analytics.pairingStats?.activeCodes || 0}</span>\n                </div>\n                <div className=\"flex justify-between items-center\">\n                  <span className=\"text-gray-600\">Total Generated</span>\n                  <span className=\"font-semibold\">\n                    {analytics.pairingStats?.totalGenerated || 0}\n                  </span>\n                </div>\n                <div className=\"flex justify-between items-center\">\n                  <span className=\"text-gray-600\">Success Rate</span>\n                  <span className=\"font-semibold text-green-600\">\n                    {analytics.pairingStats?.successRate || 'N/A'}\n                  </span>\n                </div>\n                <div className=\"flex justify-between items-center\">\n                  <span className=\"text-gray-600\">Avg Usage Time</span>\n                  <span className=\"font-semibold\">\n                    {analytics.pairingStats?.averageUseTime || 'N/A'}\n                  </span>\n                </div>\n                <div className=\"flex justify-between items-center\">\n                  <span className=\"text-gray-600\">Accessibility Usage</span>\n                  <span className=\"font-semibold text-blue-600\">\n                    {analytics.pairingStats?.accessibilityUsage || 0}\n                  </span>\n                </div>\n              </div>\n            </div>\n\n            <div className=\"bg-white rounded-xl shadow-lg p-6\">\n              <h3 className=\"text-xl font-semibold text-gray-800 mb-4\">ðŸŽ¯ User Preferences</h3>\n              <div className=\"space-y-4\">\n                <div className=\"flex justify-between items-center\">\n                  <span className=\"text-gray-600\">Preferred Format</span>\n                  <span className=\"font-semibold capitalize\">\n                    {analytics.pairingStats?.userPreferences?.format || 'phonetic'}\n                  </span>\n                </div>\n                <div className=\"flex justify-between items-center\">\n                  <span className=\"text-gray-600\">Preferred Length</span>\n                  <span className=\"font-semibold capitalize\">\n                    {analytics.pairingStats?.userPreferences?.length || 'medium'}\n                  </span>\n                </div>\n                <div className=\"flex justify-between items-center\">\n                  <span className=\"text-gray-600\">Voice Guidance</span>\n                  <span className=\"font-semibold\">\n                    {analytics.pairingStats?.userPreferences?.voice ? 'âœ… Enabled' : 'âŒ Disabled'}\n                  </span>\n                </div>\n                <div className=\"flex justify-between items-center\">\n                  <span className=\"text-gray-600\">Accessibility</span>\n                  <span className=\"font-semibold\">\n                    {analytics.pairingStats?.userPreferences?.accessibility\n                      ? 'âœ… Enabled'\n                      : 'âŒ Disabled'}\n                  </span>\n                </div>\n              </div>\n            </div>\n          </div>\n        )}\n\n        {/* Reconnection Analytics */}\n        {selectedMetric === 'reconnection' && (\n          <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n            <div className=\"bg-white rounded-xl shadow-lg p-6\">\n              <h3 className=\"text-xl font-semibold text-gray-800 mb-4\">ðŸ”„ Reconnection Engine</h3>\n              <div className=\"space-y-4\">\n                <div className=\"flex justify-between items-center\">\n                  <span className=\"text-gray-600\">Connection Status</span>\n                  <span\n                    className={`font-semibold ${analytics.reconnectionStats?.connectionState?.isConnected ? 'text-green-600' : 'text-red-600'}`}\n                  >\n                    {analytics.reconnectionStats?.connectionState?.isConnected\n                      ? 'âœ… Connected'\n                      : 'âŒ Disconnected'}\n                  </span>\n                </div>\n                <div className=\"flex justify-between items-center\">\n                  <span className=\"text-gray-600\">Active Attempts</span>\n                  <span className=\"font-semibold\">\n                    {analytics.reconnectionStats?.activeAttempts || 0}\n                  </span>\n                </div>\n                <div className=\"flex justify-between items-center\">\n                  <span className=\"text-gray-600\">Success Rate</span>\n                  <span className=\"font-semibold text-green-600\">\n                    {formatPercentage(\n                      analytics.reconnectionStats?.connectionState?.successRate || 0\n                    )}\n                  </span>\n                </div>\n                <div className=\"flex justify-between items-center\">\n                  <span className=\"text-gray-600\">Avg Reconnection Time</span>\n                  <span className=\"font-semibold\">\n                    {formatTime(\n                      analytics.reconnectionStats?.connectionState?.averageReconnectionTime || 0\n                    )}\n                  </span>\n                </div>\n                <div className=\"flex justify-between items-center\">\n                  <span className=\"text-gray-600\">Total Retries</span>\n                  <span className=\"font-semibold\">\n                    {analytics.reconnectionStats?.connectionState?.totalRetries || 0}\n                  </span>\n                </div>\n              </div>\n            </div>\n\n            <div className=\"bg-white rounded-xl shadow-lg p-6\">\n              <h3 className=\"text-xl font-semibold text-gray-800 mb-4\">ðŸ§  AI Learning</h3>\n              <div className=\"space-y-4\">\n                <div className=\"flex justify-between items-center\">\n                  <span className=\"text-gray-600\">Successful Strategies</span>\n                  <span className=\"font-semibold text-green-600\">\n                    {analytics.reconnectionStats?.learningData?.successfulStrategies?.length || 0}\n                  </span>\n                </div>\n                <div className=\"flex justify-between items-center\">\n                  <span className=\"text-gray-600\">Failed Strategies</span>\n                  <span className=\"font-semibold text-red-600\">\n                    {analytics.reconnectionStats?.learningData?.failedStrategies?.length || 0}\n                  </span>\n                </div>\n                <div className=\"flex justify-between items-center\">\n                  <span className=\"text-gray-600\">Network Patterns</span>\n                  <span className=\"font-semibold\">\n                    {analytics.reconnectionStats?.learningData?.networkPatterns?.size || 0}\n                  </span>\n                </div>\n                <div className=\"flex justify-between items-center\">\n                  <span className=\"text-gray-600\">Time Patterns</span>\n                  <span className=\"font-semibold\">\n                    {analytics.reconnectionStats?.learningData?.timePatterns?.size || 0}\n                  </span>\n                </div>\n                <div className=\"flex justify-between items-center\">\n                  <span className=\"text-gray-600\">Device Patterns</span>\n                  <span className=\"font-semibold\">\n                    {analytics.reconnectionStats?.learningData?.devicePatterns?.size || 0}\n                  </span>\n                </div>\n              </div>\n            </div>\n          </div>\n        )}\n\n        {/* Session Analytics */}\n        {selectedMetric === 'sessions' && (\n          <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n            <div className=\"bg-white rounded-xl shadow-lg p-6\">\n              <h3 className=\"text-xl font-semibold text-gray-800 mb-4\">ðŸ” Session Management</h3>\n              <div className=\"space-y-4\">\n                <div className=\"flex justify-between items-center\">\n                  <span className=\"text-gray-600\">Active Sessions</span>\n                  <span className=\"font-semibold\">\n                    {analytics.sessionStats?.activeSessions || 0}\n                  </span>\n                </div>\n                <div className=\"flex justify-between items-center\">\n                  <span className=\"text-gray-600\">Total Devices</span>\n                  <span className=\"font-semibold\">{analytics.sessionStats?.totalDevices || 0}</span>\n                </div>\n                <div className=\"flex justify-between items-center\">\n                  <span className=\"text-gray-600\">Avg Session Duration</span>\n                  <span className=\"font-semibold\">\n                    {analytics.sessionStats?.averageSessionDuration || 0} min\n                  </span>\n                </div>\n                <div className=\"flex justify-between items-center\">\n                  <span className=\"text-gray-600\">Recovery Points</span>\n                  <span className=\"font-semibold\">\n                    {analytics.sessionStats?.recoveryPoints || 0}\n                  </span>\n                </div>\n                <div className=\"flex justify-between items-center\">\n                  <span className=\"text-gray-600\">Session History</span>\n                  <span className=\"font-semibold\">\n                    {analytics.sessionStats?.sessionHistory || 0}\n                  </span>\n                </div>\n              </div>\n            </div>\n\n            <div className=\"bg-white rounded-xl shadow-lg p-6\">\n              <h3 className=\"text-xl font-semibold text-gray-800 mb-4\">ðŸ“± Device Distribution</h3>\n              <div className=\"space-y-3\">\n                {analytics.sessionStats?.deviceStats &&\n                  Object.entries(analytics.sessionStats.deviceStats).map(([deviceId, stats]) => (\n                    <div\n                      key={deviceId}\n                      className=\"flex justify-between items-center p-3 bg-gray-50 rounded-lg\"\n                    >\n                      <div>\n                        <div className=\"font-medium text-gray-800\">\n                          {deviceId.substring(0, 8)}...\n                        </div>\n                        <div className=\"text-sm text-gray-500\">\n                          {stats.types.join(', ')} â€¢ {stats.count} session\n                          {stats.count !== 1 ? 's' : ''}\n                        </div>\n                      </div>\n                      <div className=\"text-lg\">{stats.types.includes('mobile') ? 'ðŸ“±' : 'ðŸ’»'}</div>\n                    </div>\n                  ))}\n                {(!analytics.sessionStats?.deviceStats ||\n                  Object.keys(analytics.sessionStats.deviceStats).length === 0) && (\n                  <div className=\"text-center text-gray-500 py-8\">No device data available</div>\n                )}\n              </div>\n            </div>\n          </div>\n        )}\n\n        {/* Performance Charts Placeholder */}\n        <div className=\"bg-white rounded-xl shadow-lg p-6\">\n          <h3 className=\"text-xl font-semibold text-gray-800 mb-4\">ðŸ“ˆ Performance Trends</h3>\n          <div className=\"text-center py-12\">\n            <div className=\"text-6xl mb-4\">ðŸ“Š</div>\n            <p className=\"text-gray-600 mb-4\">\n              Advanced performance charts and trend analysis coming soon\n            </p>\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 text-center\">\n              <div className=\"p-4 bg-blue-50 rounded-lg\">\n                <div className=\"text-2xl font-bold text-blue-600\">99.9%</div>\n                <div className=\"text-sm text-gray-600\">Uptime</div>\n              </div>\n              <div className=\"p-4 bg-green-50 rounded-lg\">\n                <div className=\"text-2xl font-bold text-green-600\">&lt; 10s</div>\n                <div className=\"text-sm text-gray-600\">Avg Response Time</div>\n              </div>\n              <div className=\"p-4 bg-purple-50 rounded-lg\">\n                <div className=\"text-2xl font-bold text-purple-600\">24/7</div>\n                <div className=\"text-sm text-gray-600\">Monitoring</div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default withAuth(AnalyticsPage);\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\web\\pages\\admin\\auth.js","messages":[{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":47,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":47,"endColumn":18,"suggestions":[{"fix":{"range":[1682,1733],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":49,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":49,"endColumn":20,"suggestions":[{"fix":{"range":[1760,1809],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'err' is defined but never used.","line":88,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":88,"endColumn":17},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":112,"column":28,"nodeType":"Identifier","messageId":"undef","endLine":112,"endColumn":35},{"ruleId":"react/jsx-filename-extension","severity":2,"message":"JSX not allowed in files with extension '.js'","line":179,"column":5,"nodeType":"JSXElement","messageId":"noJSXWithExtension","endLine":424,"endColumn":11},{"ruleId":"react/button-has-type","severity":2,"message":"Missing an explicit type attribute for button","line":235,"column":15,"nodeType":"JSXElement","messageId":"missingType","endLine":241,"endColumn":24},{"ruleId":"react/button-has-type","severity":2,"message":"Missing an explicit type attribute for button","line":245,"column":15,"nodeType":"JSXElement","messageId":"missingType","endLine":250,"endColumn":24},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":280,"column":19,"nodeType":"JSXOpeningElement","endLine":280,"endColumn":94},{"ruleId":"react/button-has-type","severity":2,"message":"Missing an explicit type attribute for button","line":284,"column":19,"nodeType":"JSXElement","messageId":"missingType","endLine":289,"endColumn":28},{"ruleId":"react/button-has-type","severity":2,"message":"Missing an explicit type attribute for button","line":290,"column":19,"nodeType":"JSXElement","messageId":"missingType","endLine":295,"endColumn":28},{"ruleId":"react/button-has-type","severity":2,"message":"Missing an explicit type attribute for button","line":337,"column":19,"nodeType":"JSXElement","messageId":"missingType","endLine":342,"endColumn":28},{"ruleId":"react/button-has-type","severity":2,"message":"Missing an explicit type attribute for button","line":344,"column":21,"nodeType":"JSXElement","messageId":"missingType","endLine":349,"endColumn":30},{"ruleId":"jsx-a11y/label-has-associated-control","severity":2,"message":"A form label must be associated with a control.","line":381,"column":13,"nodeType":"JSXOpeningElement","endLine":381,"endColumn":62}],"suppressedMessages":[],"errorCount":9,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect, useRef, useCallback } from 'react';\nimport Head from 'next/head';\nimport io from 'socket.io-client';\nimport withAuth from '../../components/common/withAuth';\n\nfunction AuthPage() {\n  const [connectionStatus, setConnectionStatus] = useState('disconnected');\n  const [qrCode, setQrCode] = useState(null);\n  const [pairingCode, setPairingCode] = useState(null);\n  const [connectionProgress, setConnectionProgress] = useState(0);\n  const [connectionTime, setConnectionTime] = useState(0);\n  const [retryCount, setRetryCount] = useState(0);\n  const [analytics, setAnalytics] = useState({});\n  const [selectedMethod, setSelectedMethod] = useState('qr');\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [voiceEnabled, setVoiceEnabled] = useState(false);\n\n  const socketRef = useRef();\n  const timerRef = useRef();\n  const startTimeRef = useRef();\n\n  const handleConnectionStatus = useCallback(status => {\n    setConnectionStatus(status.status);\n    setRetryCount(status.retryCount || 0);\n\n    if (status.status === 'connecting' && !startTimeRef.current) {\n      startTimeRef.current = Date.now();\n      timerRef.current = setInterval(() => {\n        setConnectionTime(Date.now() - startTimeRef.current);\n      }, 1000);\n    } else if (status.status === 'connected') {\n      if (timerRef.current) {\n        clearInterval(timerRef.current);\n      }\n    }\n  }, []);\n\n  const handleQRCode = useCallback(data => {\n    setQrCode(data);\n    setError(null);\n  }, []);\n\n  const playVoiceCode = useCallback(async voiceData => {\n    try {\n      // In a real implementation, this would play the audio\n      console.log('Playing voice code:', voiceData.text);\n    } catch (err) {\n      console.error('Failed to play voice code:', err);\n    }\n  }, []);\n\n  const handlePairingCode = useCallback(\n    data => {\n      setPairingCode(data);\n      setError(null);\n\n      // Auto-play voice if enabled\n      if (voiceEnabled && data.voice) {\n        playVoiceCode(data.voice);\n      }\n    },\n    [voiceEnabled, playVoiceCode]\n  );\n\n  const handleConnectionProgress = useCallback(progress => {\n    setConnectionProgress(progress);\n  }, []);\n\n  const handleAnalyticsUpdate = useCallback(data => {\n    setAnalytics(data);\n  }, []);\n\n  const handleError = useCallback(err => {\n    setError(err.message);\n    setIsLoading(false);\n  }, []);\n\n  const startConnection = async () => {\n    setIsLoading(true);\n    setError(null);\n\n    try {\n      socketRef.current.emit('start_connection', {\n        method: selectedMethod,\n        voiceEnabled,\n      });\n    } catch (err) {\n      setError('Failed to start connection process');\n      setIsLoading(false);\n    }\n  };\n\n  const stopConnection = () => {\n    socketRef.current.emit('stop_connection');\n    setIsLoading(false);\n    if (timerRef.current) {\n      clearInterval(timerRef.current);\n    }\n  };\n\n  const refreshQR = () => {\n    socketRef.current.emit('refresh_qr');\n  };\n\n  const refreshPairingCode = () => {\n    socketRef.current.emit('refresh_pairing_code');\n  };\n\n  useEffect(() => {\n    // Initialize socket connection\n    socketRef.current = io(process.env.NEXT_PUBLIC_SOCKET_URL || 'http://localhost:3000');\n\n    // Socket event listeners\n    socketRef.current.on('connection_status', handleConnectionStatus);\n    socketRef.current.on('qr_code', handleQRCode);\n    socketRef.current.on('pairing_code', handlePairingCode);\n    socketRef.current.on('connection_progress', handleConnectionProgress);\n    socketRef.current.on('analytics_update', handleAnalyticsUpdate);\n    socketRef.current.on('error', handleError);\n\n    // Request initial status\n    socketRef.current.emit('get_status');\n\n    return () => {\n      if (socketRef.current) {\n        socketRef.current.disconnect();\n      }\n      if (timerRef.current) {\n        clearInterval(timerRef.current);\n      }\n    };\n  }, [\n    handleConnectionStatus,\n    handleQRCode,\n    handlePairingCode,\n    handleConnectionProgress,\n    handleAnalyticsUpdate,\n    handleError,\n  ]);\n\n  const formatTime = ms => {\n    const seconds = Math.floor(ms / 1000);\n    const minutes = Math.floor(seconds / 60);\n    return `${minutes}:${(seconds % 60).toString().padStart(2, '0')}`;\n  };\n\n  const getStatusColor = status => {\n    switch (status) {\n      case 'connected':\n        return 'text-green-600 bg-green-100';\n      case 'connecting':\n        return 'text-blue-600 bg-blue-100';\n      case 'disconnected':\n        return 'text-red-600 bg-red-100';\n      case 'error':\n        return 'text-red-600 bg-red-100';\n      default:\n        return 'text-gray-600 bg-gray-100';\n    }\n  };\n\n  const getStatusIcon = status => {\n    switch (status) {\n      case 'connected':\n        return 'âœ…';\n      case 'connecting':\n        return 'ðŸ”„';\n      case 'disconnected':\n        return 'âŒ';\n      case 'error':\n        return 'âš ï¸';\n      default:\n        return 'â³';\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100\">\n      <Head>\n        <title>Ultra-Smart WhatsApp Authentication</title>\n        <meta name=\"description\" content=\"Revolutionary WhatsApp bot authentication system\" />\n        <link rel=\"icon\" href=\"/favicon.ico\" />\n      </Head>\n\n      <div className=\"container mx-auto px-4 py-8\">\n        {/* Header */}\n        <div className=\"text-center mb-8\">\n          <h1 className=\"text-4xl font-bold text-gray-900 mb-2\">\n            ðŸ” Ultra-Smart WhatsApp Authentication\n          </h1>\n          <p className=\"text-lg text-gray-600\">\n            Revolutionary connection system with AI-powered intelligence\n          </p>\n        </div>\n\n        {/* Connection Status Card */}\n        <div className=\"bg-white rounded-xl shadow-lg p-6 mb-6\">\n          <div className=\"flex items-center justify-between mb-4\">\n            <h2 className=\"text-2xl font-semibold text-gray-800\">Connection Status</h2>\n            <div\n              className={`px-4 py-2 rounded-full text-sm font-medium ${getStatusColor(connectionStatus)}`}\n            >\n              {getStatusIcon(connectionStatus)}{' '}\n              {connectionStatus.charAt(0).toUpperCase() + connectionStatus.slice(1)}\n            </div>\n          </div>\n\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4\">\n            <div className=\"text-center\">\n              <div className=\"text-2xl font-bold text-blue-600\">{formatTime(connectionTime)}</div>\n              <div className=\"text-sm text-gray-500\">Connection Time</div>\n            </div>\n            <div className=\"text-center\">\n              <div className=\"text-2xl font-bold text-orange-600\">{retryCount}</div>\n              <div className=\"text-sm text-gray-500\">Retry Attempts</div>\n            </div>\n            <div className=\"text-center\">\n              <div className=\"text-2xl font-bold text-green-600\">{connectionProgress}%</div>\n              <div className=\"text-sm text-gray-500\">Progress</div>\n            </div>\n          </div>\n\n          {/* Progress Bar */}\n          <div className=\"w-full bg-gray-200 rounded-full h-3 mb-4\">\n            <div\n              className=\"bg-blue-600 h-3 rounded-full transition-all duration-300\"\n              style={{ width: `${connectionProgress}%` }}\n            />\n          </div>\n\n          {/* Control Buttons */}\n          <div className=\"flex flex-wrap gap-3 justify-center\">\n            {connectionStatus === 'disconnected' && (\n              <button\n                onClick={startConnection}\n                disabled={isLoading}\n                className=\"bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white px-6 py-3 rounded-lg font-medium transition-colors\"\n              >\n                {isLoading ? 'ðŸ”„ Starting...' : 'ðŸš€ Start Connection'}\n              </button>\n            )}\n\n            {connectionStatus === 'connecting' && (\n              <button\n                onClick={stopConnection}\n                className=\"bg-red-600 hover:bg-red-700 text-white px-6 py-3 rounded-lg font-medium transition-colors\"\n              >\n                ðŸ›‘ Stop Connection\n              </button>\n            )}\n\n            {connectionStatus === 'connected' && (\n              <div className=\"text-center text-green-600 font-medium\">\n                âœ… Successfully Connected!\n              </div>\n            )}\n          </div>\n        </div>\n\n        {/* Authentication Methods */}\n        <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6\">\n          {/* QR Code Method */}\n          <div className=\"bg-white rounded-xl shadow-lg p-6\">\n            <div className=\"flex items-center justify-between mb-4\">\n              <h3 className=\"text-xl font-semibold text-gray-800\">ðŸ“± QR Code</h3>\n              <input\n                type=\"radio\"\n                name=\"method\"\n                value=\"qr\"\n                checked={selectedMethod === 'qr'}\n                onChange={e => setSelectedMethod(e.target.value)}\n                className=\"w-4 h-4 text-blue-600\"\n              />\n            </div>\n\n            {selectedMethod === 'qr' && qrCode && (\n              <div className=\"text-center\">\n                <div className=\"bg-gray-50 p-4 rounded-lg mb-4\">\n                  <img src={qrCode.qr} alt=\"QR Code\" className=\"mx-auto max-w-full h-auto\" />\n                </div>\n\n                <div className=\"flex gap-2 justify-center mb-4\">\n                  <button\n                    onClick={refreshQR}\n                    className=\"bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-lg text-sm transition-colors\"\n                  >\n                    ðŸ”„ Refresh QR\n                  </button>\n                  <button\n                    onClick={() => window.open(qrCode.qr, '_blank')}\n                    className=\"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg text-sm transition-colors\"\n                  >\n                    ðŸ“± Open in App\n                  </button>\n                </div>\n\n                <div className=\"text-sm text-gray-600\">\n                  <p>ðŸ“± Open WhatsApp on your phone</p>\n                  <p>ðŸ“· Scan this QR code</p>\n                  <p>â° Auto-refreshes every 45 seconds</p>\n                </div>\n              </div>\n            )}\n\n            {selectedMethod === 'qr' && !qrCode && (\n              <div className=\"text-center text-gray-500 py-8\">\n                Select QR Code method and start connection to generate QR code\n              </div>\n            )}\n          </div>\n\n          {/* Pairing Code Method */}\n          <div className=\"bg-white rounded-xl shadow-lg p-6\">\n            <div className=\"flex items-center justify-between mb-4\">\n              <h3 className=\"text-xl font-semibold text-gray-800\">ðŸ”¢ Pairing Code</h3>\n              <input\n                type=\"radio\"\n                name=\"method\"\n                value=\"pairing\"\n                checked={selectedMethod === 'pairing'}\n                onChange={e => setSelectedMethod(e.target.value)}\n                className=\"w-4 h-4 text-blue-600\"\n              />\n            </div>\n\n            {selectedMethod === 'pairing' && pairingCode && (\n              <div className=\"text-center\">\n                <div className=\"bg-gray-50 p-6 rounded-lg mb-4\">\n                  <div className=\"text-3xl font-mono font-bold text-blue-600 mb-2\">\n                    {pairingCode.phonetic}\n                  </div>\n                  <div className=\"text-lg font-mono text-gray-600\">{pairingCode.alphanumeric}</div>\n                </div>\n\n                <div className=\"flex gap-2 justify-center mb-4\">\n                  <button\n                    onClick={refreshPairingCode}\n                    className=\"bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-lg text-sm transition-colors\"\n                  >\n                    ðŸ”„ New Code\n                  </button>\n                  {pairingCode.voice && (\n                    <button\n                      onClick={() => playVoiceCode(pairingCode.voice)}\n                      className=\"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg text-sm transition-colors\"\n                    >\n                      ðŸ”Š Play Voice\n                    </button>\n                  )}\n                </div>\n\n                <div className=\"text-sm text-gray-600\">\n                  <p>ðŸ“± Open WhatsApp on your phone</p>\n                  <p>ðŸ”— Go to Linked Devices</p>\n                  <p>ðŸ”¢ Enter the pairing code above</p>\n                  <p>â° Code expires in 5 minutes</p>\n                </div>\n              </div>\n            )}\n\n            {selectedMethod === 'pairing' && !pairingCode && (\n              <div className=\"text-center text-gray-500 py-8\">\n                Select Pairing Code method and start connection to generate code\n              </div>\n            )}\n          </div>\n        </div>\n\n        {/* Settings */}\n        <div className=\"bg-white rounded-xl shadow-lg p-6 mb-6\">\n          <h3 className=\"text-xl font-semibold text-gray-800 mb-4\">âš™ï¸ Settings</h3>\n          <div className=\"flex items-center gap-3\">\n            <input\n              type=\"checkbox\"\n              id=\"voice\"\n              checked={voiceEnabled}\n              onChange={e => setVoiceEnabled(e.target.checked)}\n              className=\"w-4 h-4 text-blue-600\"\n            />\n            <label htmlFor=\"voice\" className=\"text-gray-700\">\n              ðŸ”Š Enable voice guidance for pairing codes\n            </label>\n          </div>\n        </div>\n\n        {/* Analytics Dashboard */}\n        <div className=\"bg-white rounded-xl shadow-lg p-6\">\n          <h3 className=\"text-xl font-semibold text-gray-800 mb-4\">ðŸ“Š Analytics</h3>\n          <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\n            <div className=\"text-center\">\n              <div className=\"text-2xl font-bold text-blue-600\">\n                {analytics.totalConnections || 0}\n              </div>\n              <div className=\"text-sm text-gray-500\">Total Connections</div>\n            </div>\n            <div className=\"text-center\">\n              <div className=\"text-2xl font-bold text-green-600\">{analytics.successRate || 0}%</div>\n              <div className=\"text-sm text-gray-500\">Success Rate</div>\n            </div>\n            <div className=\"text-center\">\n              <div className=\"text-2xl font-bold text-orange-600\">\n                {analytics.averageTime || 0}s\n              </div>\n              <div className=\"text-sm text-gray-500\">Avg Connection Time</div>\n            </div>\n            <div className=\"text-center\">\n              <div className=\"text-2xl font-bold text-purple-600\">{analytics.activeQRs || 0}</div>\n              <div className=\"text-sm text-gray-500\">Active QR Codes</div>\n            </div>\n          </div>\n        </div>\n\n        {/* Error Display */}\n        {error && (\n          <div className=\"bg-red-50 border border-red-200 rounded-lg p-4 mt-6\">\n            <div className=\"flex items-center\">\n              <div className=\"text-red-600 mr-2\">âš ï¸</div>\n              <div className=\"text-red-800\">{error}</div>\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default withAuth(AuthPage);\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\web\\pages\\admin\\index.js","messages":[{"ruleId":"import-x/extensions","severity":2,"message":"Missing file extension for \"./users\"","line":19,"column":28,"nodeType":"Literal","messageId":"missing","endLine":19,"endColumn":37},{"ruleId":"import-x/no-unresolved","severity":2,"message":"Unable to resolve path to module './users'.","line":19,"column":28,"nodeType":"Literal","messageId":"unresolved","endLine":19,"endColumn":37},{"ruleId":"no-promise-executor-return","severity":2,"message":"Return values from promise executor functions cannot be read.","line":32,"column":36,"nodeType":"CallExpression","messageId":"returnsValue","endLine":32,"endColumn":61,"suggestions":[{"messageId":"wrapBraces","fix":{"range":[749,774],"text":"{setTimeout(resolve, 1000)}"},"desc":"Wrap the expression in `{}`."}]},{"ruleId":"react/no-unstable-nested-components","severity":2,"message":"Do not define components during render. React will see a new component type on every render and destroy the entire subtreeâ€™s DOM nodes and state (https://reactjs.org/docs/reconciliation.html#elements-of-different-types). Instead, move this component definition out of the parent component â€œAdminDashboardâ€ and pass data as props.","line":89,"column":3,"nodeType":"FunctionDeclaration","endLine":116,"endColumn":4},{"ruleId":"react/prop-types","severity":2,"message":"'title' is missing in props validation","line":89,"column":23,"nodeType":"Property","messageId":"missingPropType","endLine":89,"endColumn":28},{"ruleId":"react/prop-types","severity":2,"message":"'value' is missing in props validation","line":89,"column":30,"nodeType":"Property","messageId":"missingPropType","endLine":89,"endColumn":35},{"ruleId":"react/prop-types","severity":2,"message":"'change' is missing in props validation","line":89,"column":37,"nodeType":"Property","messageId":"missingPropType","endLine":89,"endColumn":43},{"ruleId":"react/prop-types","severity":2,"message":"'icon' is missing in props validation","line":89,"column":45,"nodeType":"Property","messageId":"missingPropType","endLine":89,"endColumn":55},{"ruleId":"react/prop-types","severity":2,"message":"'color' is missing in props validation","line":89,"column":57,"nodeType":"Property","messageId":"missingPropType","endLine":89,"endColumn":71},{"ruleId":"react/jsx-filename-extension","severity":2,"message":"JSX not allowed in files with extension '.js'","line":99,"column":7,"nodeType":"JSXElement","messageId":"noJSXWithExtension","endLine":114,"endColumn":20},{"ruleId":"react/no-unstable-nested-components","severity":2,"message":"Do not define components during render. React will see a new component type on every render and destroy the entire subtreeâ€™s DOM nodes and state (https://reactjs.org/docs/reconciliation.html#elements-of-different-types). Instead, move this component definition out of the parent component â€œAdminDashboardâ€ and pass data as props.","line":118,"column":3,"nodeType":"FunctionDeclaration","endLine":147,"endColumn":4},{"ruleId":"react/prop-types","severity":2,"message":"'activity' is missing in props validation","line":118,"column":27,"nodeType":"Property","messageId":"missingPropType","endLine":118,"endColumn":35},{"ruleId":"react/prop-types","severity":2,"message":"'activity.status' is missing in props validation","line":138,"column":33,"nodeType":"Identifier","messageId":"missingPropType","endLine":138,"endColumn":39},{"ruleId":"react/prop-types","severity":2,"message":"'activity.action' is missing in props validation","line":140,"column":86,"nodeType":"Identifier","messageId":"missingPropType","endLine":140,"endColumn":92},{"ruleId":"react/prop-types","severity":2,"message":"'activity.user' is missing in props validation","line":142,"column":23,"nodeType":"Identifier","messageId":"missingPropType","endLine":142,"endColumn":27},{"ruleId":"react/prop-types","severity":2,"message":"'activity.timestamp' is missing in props validation","line":142,"column":41,"nodeType":"Identifier","messageId":"missingPropType","endLine":142,"endColumn":50},{"ruleId":"react/prop-types","severity":2,"message":"'activity.timestamp.toLocaleTimeString' is missing in props validation","line":142,"column":51,"nodeType":"Identifier","messageId":"missingPropType","endLine":142,"endColumn":69},{"ruleId":"react/button-has-type","severity":2,"message":"Missing an explicit type attribute for button","line":188,"column":19,"nodeType":"JSXElement","messageId":"missingType","endLine":199,"endColumn":28},{"ruleId":"react/no-array-index-key","severity":2,"message":"Do not use Array index in keys","line":214,"column":30,"nodeType":"Identifier","messageId":"noArrayIndex","endLine":214,"endColumn":31},{"ruleId":"react/no-array-index-key","severity":2,"message":"Do not use Array index in keys","line":289,"column":37,"nodeType":"Identifier","messageId":"noArrayIndex","endLine":289,"endColumn":38},{"ruleId":"react/button-has-type","severity":2,"message":"Missing an explicit type attribute for button","line":309,"column":21,"nodeType":"JSXElement","messageId":"missingType","endLine":314,"endColumn":30},{"ruleId":"react/button-has-type","severity":2,"message":"Missing an explicit type attribute for button","line":315,"column":21,"nodeType":"JSXElement","messageId":"missingType","endLine":320,"endColumn":30},{"ruleId":"react/button-has-type","severity":2,"message":"Missing an explicit type attribute for button","line":321,"column":21,"nodeType":"JSXElement","messageId":"missingType","endLine":326,"endColumn":30},{"ruleId":"react/button-has-type","severity":2,"message":"Missing an explicit type attribute for button","line":327,"column":21,"nodeType":"JSXElement","messageId":"missingType","endLine":332,"endColumn":30}],"suppressedMessages":[],"errorCount":24,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect } from 'react';\nimport {\n  Users,\n  Activity,\n  Settings,\n  Shield,\n  BarChart3,\n  AlertTriangle,\n  CheckCircle,\n  XCircle,\n  Clock,\n  DollarSign,\n  TrendingUp,\n  Server,\n  Database,\n  Zap,\n} from 'lucide-react';\nimport { motion } from 'framer-motion';\nimport UserManagement from './users';\n\nimport withAuth from '../../components/common/withAuth';\n\nfunction AdminDashboard() {\n  const [activeTab, setActiveTab] = useState('overview');\n  const [systemStats, setSystemStats] = useState(null);\n  const [recentActivity, setRecentActivity] = useState([]);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    // Simulate loading data\n    const loadData = async () => {\n      await new Promise(resolve => setTimeout(resolve, 1000));\n\n      setSystemStats({\n        totalUsers: 12543,\n        activeUsers: 8921,\n        totalCommands: 45632,\n        aiRequests: 12847,\n        systemUptime: 99.8,\n        responseTime: 245,\n        errorRate: 0.2,\n        revenue: 15420,\n        serverLoad: 45,\n        memoryUsage: 68,\n        databaseSize: 2.4,\n      });\n\n      setRecentActivity([\n        {\n          id: 1,\n          type: 'user',\n          action: 'New user registered',\n          user: 'john_doe',\n          timestamp: new Date(Date.now() - 5 * 60 * 1000),\n          status: 'success',\n        },\n        {\n          id: 2,\n          type: 'system',\n          action: 'Database backup completed',\n          user: 'System',\n          timestamp: new Date(Date.now() - 12 * 60 * 1000),\n          status: 'success',\n        },\n        {\n          id: 3,\n          type: 'security',\n          action: 'Failed login attempt',\n          user: 'unknown',\n          timestamp: new Date(Date.now() - 25 * 60 * 1000),\n          status: 'warning',\n        },\n        {\n          id: 4,\n          type: 'error',\n          action: 'Command execution failed',\n          user: 'mike_jones',\n          timestamp: new Date(Date.now() - 35 * 60 * 1000),\n          status: 'error',\n        },\n      ]);\n\n      setLoading(false);\n    };\n\n    loadData();\n  }, []);\n\n  function StatCard({ title, value, change, icon: Icon, color = 'blue' }) {\n    const colors = {\n      blue: 'bg-blue-500',\n      green: 'bg-green-500',\n      yellow: 'bg-yellow-500',\n      red: 'bg-red-500',\n      purple: 'bg-purple-500',\n    };\n\n    return (\n      <motion.div\n        initial={{ opacity: 0, y: 20 }}\n        animate={{ opacity: 1, y: 0 }}\n        className=\"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 border border-gray-200 dark:border-gray-700\"\n      >\n        <div className=\"flex items-center justify-between\">\n          <div>\n            <p className=\"text-sm font-medium text-gray-600 dark:text-gray-400\">{title}</p>\n            <p className=\"text-3xl font-bold text-gray-900 dark:text-white mt-2\">{value}</p>\n            {change && <p className=\"text-sm text-green-600 dark:text-green-400 mt-1\">{change}</p>}\n          </div>\n          <div className={`p-3 rounded-full ${colors[color]} bg-opacity-10`}>\n            <Icon className={`w-6 h-6 ${colors[color].replace('bg-', 'text-')}`} />\n          </div>\n        </div>\n      </motion.div>\n    );\n  }\n\n  function ActivityItem({ activity }) {\n    const getStatusIcon = status => {\n      switch (status) {\n        case 'success':\n          return <CheckCircle className=\"w-5 h-5 text-green-500\" />;\n        case 'warning':\n          return <AlertTriangle className=\"w-5 h-5 text-yellow-500\" />;\n        case 'error':\n          return <XCircle className=\"w-5 h-5 text-red-500\" />;\n        default:\n          return <Clock className=\"w-5 h-5 text-gray-500\" />;\n      }\n    };\n\n    return (\n      <motion.div\n        initial={{ opacity: 0, x: -20 }}\n        animate={{ opacity: 1, x: 0 }}\n        className=\"flex items-center space-x-4 p-4 bg-gray-50 dark:bg-gray-700 rounded-lg\"\n      >\n        {getStatusIcon(activity.status)}\n        <div className=\"flex-1\">\n          <p className=\"text-sm font-medium text-gray-900 dark:text-white\">{activity.action}</p>\n          <p className=\"text-xs text-gray-600 dark:text-gray-400\">\n            {activity.user} â€¢ {activity.timestamp.toLocaleTimeString()}\n          </p>\n        </div>\n      </motion.div>\n    );\n  }\n\n  const tabs = [\n    { id: 'overview', name: 'Overview', icon: BarChart3 },\n    { id: 'users', name: 'Users', icon: Users },\n    { id: 'analytics', name: 'Analytics', icon: Activity },\n    { id: 'system', name: 'System', icon: Server },\n    { id: 'security', name: 'Security', icon: Shield },\n    { id: 'settings', name: 'Settings', icon: Settings },\n  ];\n\n  return (\n    <div className=\"min-h-screen bg-gray-100 dark:bg-gray-900\">\n      {/* Header */}\n      <header className=\"bg-white dark:bg-gray-800 shadow-sm border-b border-gray-200 dark:border-gray-700\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"flex justify-between items-center py-6\">\n            <div>\n              <h1 className=\"text-3xl font-bold text-gray-900 dark:text-white\">WhatsDeX Admin</h1>\n              <p className=\"text-gray-600 dark:text-gray-400 mt-1\">\n                System administration and monitoring\n              </p>\n            </div>\n            <div className=\"flex items-center space-x-4\">\n              <div className=\"flex items-center space-x-2\">\n                <div className=\"w-3 h-3 bg-green-500 rounded-full animate-pulse\" />\n                <span className=\"text-sm text-gray-600 dark:text-gray-400\">System Online</span>\n              </div>\n            </div>\n          </div>\n        </div>\n      </header>\n\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n        <div className=\"flex space-x-8\">\n          {/* Sidebar */}\n          <div className=\"w-64 flex-shrink-0\">\n            <nav className=\"space-y-2\">\n              {tabs.map(tab => {\n                const Icon = tab.icon;\n                return (\n                  <button\n                    key={tab.id}\n                    onClick={() => setActiveTab(tab.id)}\n                    className={`w-full flex items-center space-x-3 px-4 py-3 rounded-lg text-left transition-colors ${\n                      activeTab === tab.id\n                        ? 'bg-blue-500 text-white'\n                        : 'text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700'\n                    }`}\n                  >\n                    <Icon className=\"w-5 h-5\" />\n                    <span>{tab.name}</span>\n                  </button>\n                );\n              })}\n            </nav>\n          </div>\n\n          {/* Main Content */}\n          <div className=\"flex-1\">\n            {activeTab === 'overview' && (\n              <div className=\"space-y-8\">\n                {/* Stats Grid */}\n                <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\">\n                  {loading ? (\n                    Array.from({ length: 8 }).map((_, i) => (\n                      <div\n                        key={i}\n                        className=\"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 animate-pulse\"\n                      >\n                        <div className=\"h-4 bg-gray-300 dark:bg-gray-600 rounded w-3/4 mb-4\" />\n                        <div className=\"h-8 bg-gray-300 dark:bg-gray-600 rounded w-1/2\" />\n                      </div>\n                    ))\n                  ) : (\n                    <>\n                      <StatCard\n                        title=\"Total Users\"\n                        value={systemStats.totalUsers.toLocaleString()}\n                        change=\"+12.5% from last month\"\n                        icon={Users}\n                        color=\"blue\"\n                      />\n                      <StatCard\n                        title=\"Active Users\"\n                        value={systemStats.activeUsers.toLocaleString()}\n                        change=\"+8.2% from last week\"\n                        icon={Activity}\n                        color=\"green\"\n                      />\n                      <StatCard\n                        title=\"Revenue\"\n                        value={`$${systemStats.revenue.toLocaleString()}`}\n                        change=\"+23.1% from last month\"\n                        icon={DollarSign}\n                        color=\"purple\"\n                      />\n                      <StatCard\n                        title=\"System Uptime\"\n                        value={`${systemStats.systemUptime}%`}\n                        change=\"+0.1% from yesterday\"\n                        icon={Server}\n                        color=\"green\"\n                      />\n                      <StatCard\n                        title=\"Avg Response Time\"\n                        value={`${systemStats.responseTime}ms`}\n                        change=\"-5ms from yesterday\"\n                        icon={Zap}\n                        color=\"yellow\"\n                      />\n                      <StatCard\n                        title=\"Error Rate\"\n                        value={`${systemStats.errorRate}%`}\n                        change=\"-0.1% from yesterday\"\n                        icon={AlertTriangle}\n                        color=\"red\"\n                      />\n                      <StatCard\n                        title=\"Server Load\"\n                        value={`${systemStats.serverLoad}%`}\n                        icon={TrendingUp}\n                        color=\"blue\"\n                      />\n                      <StatCard\n                        title=\"Memory Usage\"\n                        value={`${systemStats.memoryUsage}%`}\n                        icon={Database}\n                        color=\"purple\"\n                      />\n                    </>\n                  )}\n                </div>\n\n                {/* Recent Activity */}\n                <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6\">\n                  <h2 className=\"text-xl font-bold text-gray-900 dark:text-white mb-6\">\n                    Recent Activity\n                  </h2>\n                  <div className=\"space-y-4\">\n                    {loading\n                      ? Array.from({ length: 4 }).map((_, i) => (\n                          <div key={i} className=\"flex items-center space-x-4 p-4 animate-pulse\">\n                            <div className=\"w-5 h-5 bg-gray-300 dark:bg-gray-600 rounded-full\" />\n                            <div className=\"flex-1\">\n                              <div className=\"h-4 bg-gray-300 dark:bg-gray-600 rounded w-3/4 mb-2\" />\n                              <div className=\"h-3 bg-gray-300 dark:bg-gray-600 rounded w-1/2\" />\n                            </div>\n                          </div>\n                        ))\n                      : recentActivity.map(activity => (\n                          <ActivityItem key={activity.id} activity={activity} />\n                        ))}\n                  </div>\n                </div>\n\n                {/* Quick Actions */}\n                <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6\">\n                  <h2 className=\"text-xl font-bold text-gray-900 dark:text-white mb-6\">\n                    Quick Actions\n                  </h2>\n                  <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\n                    <button className=\"flex flex-col items-center p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg hover:bg-blue-100 dark:hover:bg-blue-900/30 transition-colors\">\n                      <Users className=\"w-8 h-8 text-blue-600 dark:text-blue-400 mb-2\" />\n                      <span className=\"text-sm font-medium text-gray-900 dark:text-white\">\n                        Manage Users\n                      </span>\n                    </button>\n                    <button className=\"flex flex-col items-center p-4 bg-green-50 dark:bg-green-900/20 rounded-lg hover:bg-green-100 dark:hover:bg-green-900/30 transition-colors\">\n                      <Activity className=\"w-8 h-8 text-green-600 dark:text-green-400 mb-2\" />\n                      <span className=\"text-sm font-medium text-gray-900 dark:text-white\">\n                        View Analytics\n                      </span>\n                    </button>\n                    <button className=\"flex flex-col items-center p-4 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg hover:bg-yellow-100 dark:hover:bg-yellow-900/30 transition-colors\">\n                      <Settings className=\"w-8 h-8 text-yellow-600 dark:text-yellow-400 mb-2\" />\n                      <span className=\"text-sm font-medium text-gray-900 dark:text-white\">\n                        System Settings\n                      </span>\n                    </button>\n                    <button className=\"flex flex-col items-center p-4 bg-red-50 dark:bg-red-900/20 rounded-lg hover:bg-red-100 dark:hover:bg-red-900/30 transition-colors\">\n                      <Shield className=\"w-8 h-8 text-red-600 dark:text-red-400 mb-2\" />\n                      <span className=\"text-sm font-medium text-gray-900 dark:text-white\">\n                        Security Logs\n                      </span>\n                    </button>\n                  </div>\n                </div>\n              </div>\n            )}\n\n            {activeTab === 'users' && <UserManagement />}\n\n            {activeTab === 'analytics' && (\n              <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6\">\n                <h2 className=\"text-xl font-bold text-gray-900 dark:text-white mb-6\">\n                  Analytics Dashboard\n                </h2>\n                <p className=\"text-gray-600 dark:text-gray-400\">\n                  Advanced analytics and reporting will be implemented here.\n                </p>\n              </div>\n            )}\n\n            {activeTab === 'system' && (\n              <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6\">\n                <h2 className=\"text-xl font-bold text-gray-900 dark:text-white mb-6\">\n                  System Monitoring\n                </h2>\n                <p className=\"text-gray-600 dark:text-gray-400\">\n                  System health and performance monitoring will be implemented here.\n                </p>\n              </div>\n            )}\n\n            {activeTab === 'security' && (\n              <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6\">\n                <h2 className=\"text-xl font-bold text-gray-900 dark:text-white mb-6\">\n                  Security Center\n                </h2>\n                <p className=\"text-gray-600 dark:text-gray-400\">\n                  Security monitoring and threat detection will be implemented here.\n                </p>\n              </div>\n            )}\n\n            {activeTab === 'settings' && (\n              <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6\">\n                <h2 className=\"text-xl font-bold text-gray-900 dark:text-white mb-6\">\n                  System Settings\n                </h2>\n                <p className=\"text-gray-600 dark:text-gray-400\">\n                  System configuration and settings will be implemented here.\n                </p>\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default withAuth(AdminDashboard);\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\web\\pages\\admin\\settings.js","messages":[{"ruleId":"no-promise-executor-return","severity":2,"message":"Return values from promise executor functions cannot be read.","line":39,"column":36,"nodeType":"CallExpression","messageId":"returnsValue","endLine":39,"endColumn":61,"suggestions":[{"messageId":"wrapBraces","fix":{"range":[1000,1025],"text":"{setTimeout(resolve, 1000)}"},"desc":"Wrap the expression in `{}`."}]},{"ruleId":"no-promise-executor-return","severity":2,"message":"Return values from promise executor functions cannot be read.","line":211,"column":36,"nodeType":"CallExpression","messageId":"returnsValue","endLine":211,"endColumn":61,"suggestions":[{"messageId":"wrapBraces","fix":{"range":[6360,6385],"text":"{setTimeout(resolve, 2000)}"},"desc":"Wrap the expression in `{}`."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":215,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":215,"endColumn":20,"suggestions":[{"fix":{"range":[6476,6525],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":222,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":222,"endColumn":16,"suggestions":[{"fix":{"range":[6612,6665],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":248,"column":11,"nodeType":"MemberExpression","messageId":"unexpected","endLine":248,"endColumn":24,"suggestions":[{"fix":{"range":[7561,7615],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"react/jsx-filename-extension","severity":2,"message":"JSX not allowed in files with extension '.js'","line":268,"column":9,"nodeType":"JSXElement","messageId":"noJSXWithExtension","endLine":274,"endColumn":11},{"ruleId":"jsx-a11y/label-has-associated-control","severity":2,"message":"A form label must be associated with a control.","line":333,"column":9,"nodeType":"JSXOpeningElement","endLine":333,"endColumn":87},{"ruleId":"react/button-has-type","severity":2,"message":"Missing an explicit type attribute for button","line":589,"column":11,"nodeType":"JSXElement","messageId":"missingType","endLine":595,"endColumn":20},{"ruleId":"jsx-a11y/label-has-associated-control","severity":2,"message":"A form label must be associated with a control.","line":596,"column":11,"nodeType":"JSXOpeningElement","endLine":596,"endColumn":135},{"ruleId":"react/button-has-type","severity":2,"message":"Missing an explicit type attribute for button","line":601,"column":11,"nodeType":"JSXElement","messageId":"missingType","endLine":607,"endColumn":20},{"ruleId":"react/button-has-type","severity":2,"message":"Missing an explicit type attribute for button","line":608,"column":11,"nodeType":"JSXElement","messageId":"missingType","endLine":619,"endColumn":20},{"ruleId":"react/button-has-type","severity":2,"message":"Missing an explicit type attribute for button","line":655,"column":17,"nodeType":"JSXElement","messageId":"missingType","endLine":668,"endColumn":26},{"ruleId":"jsx-a11y/label-has-associated-control","severity":2,"message":"A form label must be associated with a control.","line":1097,"column":21,"nodeType":"JSXOpeningElement","endLine":1097,"endColumn":99}],"suppressedMessages":[],"errorCount":10,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect } from 'react';\nimport {\n  Settings,\n  Save,\n  RefreshCw,\n  AlertTriangle,\n  CheckCircle,\n  Key,\n  Shield,\n  Database,\n  Mail,\n  Bell,\n  Zap,\n  Server,\n  Users,\n  DollarSign,\n  Eye,\n  EyeOff,\n  Download,\n  Upload,\n  RotateCcw,\n} from 'lucide-react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport withAuth from '../../components/common/withAuth';\n\nfunction SystemSettings() {\n  const [settings, setSettings] = useState({});\n  const [loading, setLoading] = useState(true);\n  const [saving, setSaving] = useState(false);\n  const [activeTab, setActiveTab] = useState('general');\n  const [hasChanges, setHasChanges] = useState(false);\n  const [showPassword, setShowPassword] = useState({});\n  const [validationErrors, setValidationErrors] = useState({});\n  const [lastSaved, setLastSaved] = useState(null);\n\n  // Mock settings data - replace with actual API calls\n  useEffect(() => {\n    const loadSettings = async () => {\n      await new Promise(resolve => setTimeout(resolve, 1000));\n\n      const mockSettings = {\n        general: {\n          botName: 'WhatsDeX',\n          botDescription: 'Advanced WhatsApp Bot with AI Features',\n          ownerName: 'CodeDeX',\n          ownerEmail: 'admin@whatsdex.com',\n          timezone: 'Africa/Accra',\n          language: 'en',\n          maintenanceMode: false,\n          debugMode: false,\n        },\n        security: {\n          jwtSecret: 'your-jwt-secret-key',\n          bcryptRounds: 12,\n          sessionTimeout: 24,\n          maxLoginAttempts: 5,\n          lockoutDuration: 30,\n          rateLimitWindow: 15,\n          rateLimitMaxRequests: 100,\n          enable2FA: true,\n          passwordMinLength: 8,\n          requireSpecialChars: true,\n        },\n        api: {\n          openaiApiKey: 'sk-your-openai-key',\n          stripeSecretKey: 'sk_test_your-stripe-key',\n          stripeWebhookSecret: 'whsec_your-webhook-secret',\n          firebaseProjectId: 'your-firebase-project',\n          googleCloudApiKey: 'your-google-cloud-key',\n          telegramBotToken: 'your-telegram-token',\n          discordBotToken: 'your-discord-token',\n        },\n        database: {\n          host: 'localhost',\n          port: 5432,\n          database: 'whatsdex',\n          username: 'postgres',\n          password: 'your-db-password',\n          ssl: true,\n          connectionPoolSize: 10,\n          connectionTimeout: 30000,\n          queryTimeout: 30000,\n        },\n        email: {\n          smtpHost: 'smtp.gmail.com',\n          smtpPort: 587,\n          smtpUser: 'noreply@whatsdex.com',\n          smtpPassword: 'your-email-password',\n          fromEmail: 'noreply@whatsdex.com',\n          fromName: 'WhatsDeX',\n          enableTLS: true,\n          enableAuth: true,\n        },\n        notifications: {\n          emailNotifications: true,\n          pushNotifications: true,\n          smsNotifications: false,\n          webhookUrl: 'https://your-webhook-url.com',\n          slackWebhook: 'https://hooks.slack.com/your-slack-webhook',\n          discordWebhook: 'https://discord.com/api/webhooks/your-webhook',\n        },\n        performance: {\n          cacheEnabled: true,\n          redisUrl: 'redis://localhost:6379',\n          cacheTTL: 3600,\n          maxFileSize: 10485760,\n          uploadPath: './uploads',\n          compressionEnabled: true,\n          gzipLevel: 6,\n        },\n        monetization: {\n          stripeEnabled: true,\n          paypalEnabled: false,\n          coinbaseEnabled: false,\n          subscriptionEnabled: true,\n          freeTrialDays: 7,\n          defaultCurrency: 'USD',\n          taxRate: 0.0,\n          minimumPayout: 50,\n        },\n        moderation: {\n          contentModerationEnabled: true,\n          autoModeration: true,\n          moderationThreshold: 0.8,\n          bannedWords: ['spam', 'scam', 'offensive'],\n          maxMessageLength: 4096,\n          rateLimitEnabled: true,\n          spamDetectionEnabled: true,\n        },\n        backup: {\n          autoBackupEnabled: true,\n          backupFrequency: 'daily',\n          backupRetention: 30,\n          backupPath: './backups',\n          compressionEnabled: true,\n          encryptionEnabled: true,\n          cloudBackupEnabled: false,\n        },\n      };\n\n      setSettings(mockSettings);\n      setLoading(false);\n    };\n\n    loadSettings();\n  }, []);\n\n  const tabs = [\n    { id: 'general', name: 'General', icon: Settings },\n    { id: 'security', name: 'Security', icon: Shield },\n    { id: 'api', name: 'API Keys', icon: Key },\n    { id: 'database', name: 'Database', icon: Database },\n    { id: 'email', name: 'Email', icon: Mail },\n    { id: 'notifications', name: 'Notifications', icon: Bell },\n    { id: 'performance', name: 'Performance', icon: Zap },\n    { id: 'monetization', name: 'Monetization', icon: DollarSign },\n    { id: 'moderation', name: 'Moderation', icon: Users },\n    { id: 'backup', name: 'Backup', icon: Server },\n  ];\n\n  const handleSettingChange = (category, key, value) => {\n    setSettings(prev => ({\n      ...prev,\n      [category]: {\n        ...prev[category],\n        [key]: value,\n      },\n    }));\n    setHasChanges(true);\n    setValidationErrors(prev => ({ ...prev, [`${category}.${key}`]: null }));\n  };\n\n  const validateSettings = () => {\n    const errors = {};\n\n    // Email validation\n    if (settings.general?.ownerEmail && !/\\S+@\\S+\\.\\S+/.test(settings.general.ownerEmail)) {\n      errors['general.ownerEmail'] = 'Invalid email format';\n    }\n\n    // Port validation\n    if (settings.database?.port && (settings.database.port < 1 || settings.database.port > 65535)) {\n      errors['database.port'] = 'Port must be between 1 and 65535';\n    }\n\n    // Password strength\n    if (settings.security?.passwordMinLength && settings.security.passwordMinLength < 6) {\n      errors['security.passwordMinLength'] = 'Minimum password length should be at least 6';\n    }\n\n    // URL validation\n    if (\n      settings.notifications?.webhookUrl &&\n      !/^https?:\\/\\/.+/.test(settings.notifications.webhookUrl)\n    ) {\n      errors['notifications.webhookUrl'] = 'Invalid URL format';\n    }\n\n    setValidationErrors(errors);\n    return Object.keys(errors).length === 0;\n  };\n\n  const handleSave = async () => {\n    if (!validateSettings()) {\n      return;\n    }\n\n    setSaving(true);\n    try {\n      // Mock API call\n      await new Promise(resolve => setTimeout(resolve, 2000));\n      setLastSaved(new Date());\n      setHasChanges(false);\n    } catch (error) {\n      console.error('Failed to save settings:', error);\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  const handleReset = () => {\n    console.log('User confirmed reset. Reloading page.'); // Placeholder for UI confirmation\n    window.location.reload();\n  };\n\n  const exportSettings = () => {\n    const dataStr = JSON.stringify(settings, null, 2);\n    const dataUri = `data:application/json;charset=utf-8,${encodeURIComponent(dataStr)}`;\n\n    const exportFileDefaultName = `whatsdex_settings_${new Date().toISOString().split('T')[0]}.json`;\n\n    const linkElement = document.createElement('a');\n    linkElement.setAttribute('href', dataUri);\n    linkElement.setAttribute('download', exportFileDefaultName);\n    linkElement.click();\n  };\n\n  const importSettings = event => {\n    const file = event.target.files[0];\n    if (file) {\n      const reader = new FileReader();\n      reader.onload = e => {\n        try {\n          const importedSettings = JSON.parse(e.target.result);\n          setSettings(importedSettings);\n          setHasChanges(true);\n        } catch (error) {\n          console.error('Invalid settings file format:', error); // Placeholder for UI alert\n        }\n      };\n      reader.readAsText(file);\n    }\n  };\n\n  const renderSettingField = (category, key, value, type = 'text', options = {}) => {\n    const fieldId = `${category}.${key}`;\n    const error = validationErrors[fieldId];\n    const isPassword =\n      type === 'password' ||\n      key.toLowerCase().includes('password') ||\n      key.toLowerCase().includes('secret') ||\n      key.toLowerCase().includes('token');\n    const showPwd = showPassword[fieldId];\n\n    let inputElement;\n    if (type === 'textarea') {\n      inputElement = (\n        <textarea\n          value={value || ''}\n          onChange={e => handleSettingChange(category, key, e.target.value)}\n          rows={4}\n          className={`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white ${error ? 'border-red-500' : 'border-gray-300 dark:border-gray-600'}`}\n          placeholder={options.placeholder}\n        />\n      );\n    } else if (type === 'select') {\n      inputElement = (\n        <select\n          value={value || ''}\n          onChange={e => handleSettingChange(category, key, e.target.value)}\n          className={`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white ${error ? 'border-red-500' : 'border-gray-300 dark:border-gray-600'}`}\n        >\n          {options.options?.map(option => (\n            <option key={option.value} value={option.value}>\n              {option.label}\n            </option>\n          ))}\n        </select>\n      );\n    } else if (type === 'checkbox') {\n      inputElement = (\n        <div className=\"flex items-center\">\n          <input\n            type=\"checkbox\"\n            checked={value || false}\n            onChange={e => handleSettingChange(category, key, e.target.checked)}\n            className=\"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded\"\n          />\n          <span className=\"ml-2 text-sm text-gray-600 dark:text-gray-400\">\n            {options.description}\n          </span>\n        </div>\n      );\n    } else {\n      inputElement = (\n        <div className=\"relative\">\n          <input\n            type={isPassword && !showPwd ? 'password' : 'text'}\n            value={value || ''}\n            onChange={e => handleSettingChange(category, key, e.target.value)}\n            className={`w-full px-3 py-2 pr-10 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white ${error ? 'border-red-500' : 'border-gray-300 dark:border-gray-600'}`}\n            placeholder={options.placeholder}\n          />\n          {isPassword && (\n            <button\n              type=\"button\"\n              onClick={() => setShowPassword(prev => ({ ...prev, [fieldId]: !prev[fieldId] }))}\n              className=\"absolute inset-y-0 right-0 pr-3 flex items-center\"\n            >\n              {showPwd ? (\n                <EyeOff className=\"h-4 w-4 text-gray-400\" />\n              ) : (\n                <Eye className=\"h-4 w-4 text-gray-400\" />\n              )}\n            </button>\n          )}\n        </div>\n      );\n    }\n\n    return (\n      <div key={fieldId} className=\"space-y-2\">\n        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">\n          {options.label || key.replace(/([A-Z])/g, ' $1').replace(/^./, str => str.toUpperCase())}\n          {options.required && <span className=\"text-red-500 ml-1\">*</span>}\n        </label>\n        {inputElement}\n        {error && (\n          <p className=\"text-sm text-red-600 dark:text-red-400 flex items-center\">\n            <AlertTriangle className=\"w-4 h-4 mr-1\" />\n            {error}\n          </p>\n        )}\n        {options.description && type !== 'checkbox' && (\n          <p className=\"text-xs text-gray-500 dark:text-gray-400\">{options.description}</p>\n        )}\n      </div>\n    );\n  };\n\n  const renderGeneralSettings = () => (\n    <div className=\"space-y-6\">\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n        {renderSettingField('general', 'botName', settings.general?.botName, 'text', {\n          label: 'Bot Name',\n          required: true,\n          description: 'The display name of your bot',\n        })}\n        {renderSettingField(\n          'general',\n          'botDescription',\n          settings.general?.botDescription,\n          'textarea',\n          {\n            label: 'Bot Description',\n            description: \"Brief description of your bot's functionality\",\n          }\n        )}\n        {renderSettingField('general', 'ownerName', settings.general?.ownerName, 'text', {\n          label: 'Owner Name',\n          required: true,\n        })}\n        {renderSettingField('general', 'ownerEmail', settings.general?.ownerEmail, 'text', {\n          label: 'Owner Email',\n          required: true,\n          placeholder: 'admin@example.com',\n        })}\n        {renderSettingField('general', 'timezone', settings.general?.timezone, 'select', {\n          label: 'Timezone',\n          options: [\n            { value: 'Africa/Accra', label: 'Africa/Accra (GMT+0)' },\n            { value: 'America/New_York', label: 'America/New_York (GMT-5)' },\n            { value: 'Europe/London', label: 'Europe/London (GMT+0)' },\n            { value: 'Asia/Tokyo', label: 'Asia/Tokyo (GMT+9)' },\n          ],\n        })}\n        {renderSettingField('general', 'language', settings.general?.language, 'select', {\n          label: 'Default Language',\n          options: [\n            { value: 'en', label: 'English' },\n            { value: 'es', label: 'Spanish' },\n            { value: 'fr', label: 'French' },\n            { value: 'de', label: 'German' },\n          ],\n        })}\n      </div>\n\n      <div className=\"space-y-4\">\n        {renderSettingField(\n          'general',\n          'maintenanceMode',\n          settings.general?.maintenanceMode,\n          'checkbox',\n          {\n            description: 'Enable maintenance mode (bot will be temporarily unavailable)',\n          }\n        )}\n        {renderSettingField('general', 'debugMode', settings.general?.debugMode, 'checkbox', {\n          description: 'Enable debug mode (additional logging and error details)',\n        })}\n      </div>\n    </div>\n  );\n\n  const renderSecuritySettings = () => (\n    <div className=\"space-y-6\">\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n        {renderSettingField('security', 'jwtSecret', settings.security?.jwtSecret, 'password', {\n          label: 'JWT Secret Key',\n          required: true,\n          description: 'Secret key for JWT token generation',\n        })}\n        {renderSettingField('security', 'bcryptRounds', settings.security?.bcryptRounds, 'number', {\n          label: 'Bcrypt Rounds',\n          description: 'Number of rounds for password hashing (higher = more secure but slower)',\n        })}\n        {renderSettingField(\n          'security',\n          'sessionTimeout',\n          settings.security?.sessionTimeout,\n          'number',\n          {\n            label: 'Session Timeout (hours)',\n            description: 'How long user sessions remain active',\n          }\n        )}\n        {renderSettingField(\n          'security',\n          'maxLoginAttempts',\n          settings.security?.maxLoginAttempts,\n          'number',\n          {\n            label: 'Max Login Attempts',\n            description: 'Maximum failed login attempts before account lockout',\n          }\n        )}\n        {renderSettingField(\n          'security',\n          'lockoutDuration',\n          settings.security?.lockoutDuration,\n          'number',\n          {\n            label: 'Lockout Duration (minutes)',\n            description: 'How long to lock account after failed attempts',\n          }\n        )}\n        {renderSettingField(\n          'security',\n          'rateLimitWindow',\n          settings.security?.rateLimitWindow,\n          'number',\n          {\n            label: 'Rate Limit Window (minutes)',\n            description: 'Time window for rate limiting',\n          }\n        )}\n        {renderSettingField(\n          'security',\n          'rateLimitMaxRequests',\n          settings.security?.rateLimitMaxRequests,\n          'number',\n          {\n            label: 'Max Requests per Window',\n            description: 'Maximum requests allowed in the rate limit window',\n          }\n        )}\n        {renderSettingField(\n          'security',\n          'passwordMinLength',\n          settings.security?.passwordMinLength,\n          'number',\n          {\n            label: 'Minimum Password Length',\n            description: 'Minimum characters required for passwords',\n          }\n        )}\n      </div>\n\n      <div className=\"space-y-4\">\n        {renderSettingField('security', 'enable2FA', settings.security?.enable2FA, 'checkbox', {\n          description: 'Enable two-factor authentication for admin accounts',\n        })}\n        {renderSettingField(\n          'security',\n          'requireSpecialChars',\n          settings.security?.requireSpecialChars,\n          'checkbox',\n          {\n            description: 'Require special characters in passwords',\n          }\n        )}\n      </div>\n    </div>\n  );\n\n  const renderApiSettings = () => (\n    <div className=\"space-y-6\">\n      <div className=\"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4\">\n        <div className=\"flex\">\n          <AlertTriangle className=\"w-5 h-5 text-yellow-400\" />\n          <div className=\"ml-3\">\n            <h3 className=\"text-sm font-medium text-yellow-800 dark:text-yellow-200\">\n              Security Warning\n            </h3>\n            <div className=\"mt-2 text-sm text-yellow-700 dark:text-yellow-300\">\n              <p>\n                API keys contain sensitive information. Ensure you are on a secure connection and\n                consider using environment variables for production deployments.\n              </p>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"space-y-6\">\n        {renderSettingField('api', 'openaiApiKey', settings.api?.openaiApiKey, 'password', {\n          label: 'OpenAI API Key',\n          description: 'Required for AI chat and image generation features',\n        })}\n        {renderSettingField('api', 'stripeSecretKey', settings.api?.stripeSecretKey, 'password', {\n          label: 'Stripe Secret Key',\n          description: 'Required for payment processing and subscriptions',\n        })}\n        {renderSettingField(\n          'api',\n          'stripeWebhookSecret',\n          settings.api?.stripeWebhookSecret,\n          'password',\n          {\n            label: 'Stripe Webhook Secret',\n            description: 'Required for webhook signature verification',\n          }\n        )}\n        {renderSettingField('api', 'firebaseProjectId', settings.api?.firebaseProjectId, 'text', {\n          label: 'Firebase Project ID',\n          description: 'Required for Firebase authentication and database',\n        })}\n        {renderSettingField(\n          'api',\n          'googleCloudApiKey',\n          settings.api?.googleCloudApiKey,\n          'password',\n          {\n            label: 'Google Cloud API Key',\n            description: 'Required for Google Cloud services integration',\n          }\n        )}\n        {renderSettingField('api', 'telegramBotToken', settings.api?.telegramBotToken, 'password', {\n          label: 'Telegram Bot Token',\n          description: 'Required for Telegram bot integration',\n        })}\n        {renderSettingField('api', 'discordBotToken', settings.api?.discordBotToken, 'password', {\n          label: 'Discord Bot Token',\n          description: 'Required for Discord bot integration',\n        })}\n      </div>\n    </div>\n  );\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center h-64\">\n        <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600\" />\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <div className=\"flex justify-between items-center\">\n        <div>\n          <h1 className=\"text-3xl font-bold text-gray-900 dark:text-white\">System Configuration</h1>\n          <p className=\"text-gray-600 dark:text-gray-400 mt-1\">\n            Manage system settings, API keys, and configuration parameters\n          </p>\n        </div>\n        <div className=\"flex items-center space-x-3\">\n          <button\n            onClick={exportSettings}\n            className=\"flex items-center space-x-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors\"\n          >\n            <Download className=\"w-4 h-4\" />\n            <span>Export</span>\n          </button>\n          <label className=\"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 cursor-pointer\">\n            <Upload className=\"w-4 h-4\" />\n            <span>Import</span>\n            <input type=\"file\" accept=\".json\" onChange={importSettings} className=\"hidden\" />\n          </label>\n          <button\n            onClick={handleReset}\n            className=\"flex items-center space-x-2 px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors\"\n          >\n            <RotateCcw className=\"w-4 h-4\" />\n            <span>Reset</span>\n          </button>\n          <button\n            onClick={handleSave}\n            disabled={!hasChanges || saving}\n            className={`flex items-center space-x-2 px-6 py-2 rounded-lg transition-colors ${\n              hasChanges && !saving\n                ? 'bg-blue-600 text-white hover:bg-blue-700'\n                : 'bg-gray-400 text-gray-200 cursor-not-allowed'\n            }`}\n          >\n            {saving ? <RefreshCw className=\"w-4 h-4 animate-spin\" /> : <Save className=\"w-4 h-4\" />}\n            <span>{saving ? 'Saving...' : 'Save Changes'}</span>\n          </button>\n        </div>\n      </div>\n\n      {/* Status Indicators */}\n      <div className=\"flex items-center space-x-6\">\n        {hasChanges && (\n          <div className=\"flex items-center space-x-2 text-yellow-600 dark:text-yellow-400\">\n            <AlertTriangle className=\"w-4 h-4\" />\n            <span className=\"text-sm\">Unsaved changes</span>\n          </div>\n        )}\n        {lastSaved && (\n          <div className=\"flex items-center space-x-2 text-green-600 dark:text-green-400\">\n            <CheckCircle className=\"w-4 h-4\" />\n            <span className=\"text-sm\">Last saved: {lastSaved.toLocaleTimeString()}</span>\n          </div>\n        )}\n        {Object.keys(validationErrors).length > 0 && (\n          <div className=\"flex items-center space-x-2 text-red-600 dark:text-red-400\">\n            <AlertTriangle className=\"w-4 h-4\" />\n            <span className=\"text-sm\">\n              {Object.keys(validationErrors).length} validation error\n              {Object.keys(validationErrors).length > 1 ? 's' : ''}\n            </span>\n          </div>\n        )}\n      </div>\n\n      {/* Settings Tabs */}\n      <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700\">\n        <div className=\"border-b border-gray-200 dark:border-gray-700\">\n          <nav className=\"flex space-x-8 px-6\">\n            {tabs.map(tab => {\n              const Icon = tab.icon;\n              return (\n                <button\n                  key={tab.id}\n                  onClick={() => setActiveTab(tab.id)}\n                  className={`py-4 px-1 border-b-2 font-medium text-sm ${\n                    activeTab === tab.id\n                      ? 'border-blue-500 text-blue-600 dark:text-blue-400'\n                      : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300'\n                  }`}\n                >\n                  <div className=\"flex items-center space-x-2\">\n                    <Icon className=\"w-4 h-4\" />\n                    <span>{tab.name}</span>\n                  </div>\n                </button>\n              );\n            })}\n          </nav>\n        </div>\n\n        <div className=\"p-6\">\n          <AnimatePresence mode=\"wait\">\n            <motion.div\n              key={activeTab}\n              initial={{ opacity: 0, y: 20 }}\n              animate={{ opacity: 1, y: 0 }}\n              exit={{ opacity: 0, y: -20 }}\n              transition={{ duration: 0.2 }}\n            >\n              {activeTab === 'general' && renderGeneralSettings()}\n              {activeTab === 'security' && renderSecuritySettings()}\n              {activeTab === 'api' && renderApiSettings()}\n              {activeTab === 'database' && (\n                <div className=\"space-y-6\">\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                    {renderSettingField('database', 'host', settings.database?.host, 'text', {\n                      label: 'Database Host',\n                      required: true,\n                    })}\n                    {renderSettingField('database', 'port', settings.database?.port, 'number', {\n                      label: 'Database Port',\n                      required: true,\n                    })}\n                    {renderSettingField(\n                      'database',\n                      'database',\n                      settings.database?.database,\n                      'text',\n                      {\n                        label: 'Database Name',\n                        required: true,\n                      }\n                    )}\n                    {renderSettingField(\n                      'database',\n                      'username',\n                      settings.database?.username,\n                      'text',\n                      {\n                        label: 'Database Username',\n                        required: true,\n                      }\n                    )}\n                    {renderSettingField(\n                      'database',\n                      'password',\n                      settings.database?.password,\n                      'password',\n                      {\n                        label: 'Database Password',\n                        required: true,\n                      }\n                    )}\n                    {renderSettingField(\n                      'database',\n                      'connectionPoolSize',\n                      settings.database?.connectionPoolSize,\n                      'number',\n                      {\n                        label: 'Connection Pool Size',\n                        description: 'Maximum number of database connections',\n                      }\n                    )}\n                  </div>\n                  <div className=\"space-y-4\">\n                    {renderSettingField('database', 'ssl', settings.database?.ssl, 'checkbox', {\n                      description: 'Enable SSL/TLS encryption for database connections',\n                    })}\n                  </div>\n                </div>\n              )}\n              {activeTab === 'email' && (\n                <div className=\"space-y-6\">\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                    {renderSettingField('email', 'smtpHost', settings.email?.smtpHost, 'text', {\n                      label: 'SMTP Host',\n                      required: true,\n                      placeholder: 'smtp.gmail.com',\n                    })}\n                    {renderSettingField('email', 'smtpPort', settings.email?.smtpPort, 'number', {\n                      label: 'SMTP Port',\n                      required: true,\n                    })}\n                    {renderSettingField('email', 'smtpUser', settings.email?.smtpUser, 'text', {\n                      label: 'SMTP Username',\n                      required: true,\n                    })}\n                    {renderSettingField(\n                      'email',\n                      'smtpPassword',\n                      settings.email?.smtpPassword,\n                      'password',\n                      {\n                        label: 'SMTP Password',\n                        required: true,\n                      }\n                    )}\n                    {renderSettingField('email', 'fromEmail', settings.email?.fromEmail, 'text', {\n                      label: 'From Email Address',\n                      required: true,\n                    })}\n                    {renderSettingField('email', 'fromName', settings.email?.fromName, 'text', {\n                      label: 'From Name',\n                      required: true,\n                    })}\n                  </div>\n                  <div className=\"space-y-4\">\n                    {renderSettingField(\n                      'email',\n                      'enableTLS',\n                      settings.email?.enableTLS,\n                      'checkbox',\n                      {\n                        description: 'Enable TLS encryption for email connections',\n                      }\n                    )}\n                    {renderSettingField(\n                      'email',\n                      'enableAuth',\n                      settings.email?.enableAuth,\n                      'checkbox',\n                      {\n                        description: 'Enable SMTP authentication',\n                      }\n                    )}\n                  </div>\n                </div>\n              )}\n              {activeTab === 'notifications' && (\n                <div className=\"space-y-6\">\n                  <div className=\"space-y-4\">\n                    {renderSettingField(\n                      'notifications',\n                      'emailNotifications',\n                      settings.notifications?.emailNotifications,\n                      'checkbox',\n                      {\n                        description: 'Enable email notifications for system events',\n                      }\n                    )}\n                    {renderSettingField(\n                      'notifications',\n                      'pushNotifications',\n                      settings.notifications?.pushNotifications,\n                      'checkbox',\n                      {\n                        description: 'Enable push notifications for important events',\n                      }\n                    )}\n                    {renderSettingField(\n                      'notifications',\n                      'smsNotifications',\n                      settings.notifications?.smsNotifications,\n                      'checkbox',\n                      {\n                        description: 'Enable SMS notifications for critical alerts',\n                      }\n                    )}\n                  </div>\n                  <div className=\"grid grid-cols-1 gap-6\">\n                    {renderSettingField(\n                      'notifications',\n                      'webhookUrl',\n                      settings.notifications?.webhookUrl,\n                      'text',\n                      {\n                        label: 'Webhook URL',\n                        placeholder: 'https://your-webhook-url.com',\n                      }\n                    )}\n                    {renderSettingField(\n                      'notifications',\n                      'slackWebhook',\n                      settings.notifications?.slackWebhook,\n                      'password',\n                      {\n                        label: 'Slack Webhook URL',\n                        placeholder: 'https://hooks.slack.com/your-slack-webhook',\n                      }\n                    )}\n                    {renderSettingField(\n                      'notifications',\n                      'discordWebhook',\n                      settings.notifications?.discordWebhook,\n                      'password',\n                      {\n                        label: 'Discord Webhook URL',\n                        placeholder: 'https://discord.com/api/webhooks/your-webhook',\n                      }\n                    )}\n                  </div>\n                </div>\n              )}\n              {activeTab === 'performance' && (\n                <div className=\"space-y-6\">\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                    {renderSettingField(\n                      'performance',\n                      'cacheTTL',\n                      settings.performance?.cacheTTL,\n                      'number',\n                      {\n                        label: 'Cache TTL (seconds)',\n                        description: 'How long to cache data in Redis',\n                      }\n                    )}\n                    {renderSettingField(\n                      'performance',\n                      'maxFileSize',\n                      settings.performance?.maxFileSize,\n                      'number',\n                      {\n                        label: 'Max File Size (bytes)',\n                        description: 'Maximum file size for uploads',\n                      }\n                    )}\n                    {renderSettingField(\n                      'performance',\n                      'uploadPath',\n                      settings.performance?.uploadPath,\n                      'text',\n                      {\n                        label: 'Upload Path',\n                        description: 'Directory path for file uploads',\n                      }\n                    )}\n                    {renderSettingField(\n                      'performance',\n                      'gzipLevel',\n                      settings.performance?.gzipLevel,\n                      'number',\n                      {\n                        label: 'GZIP Compression Level',\n                        description: 'Compression level for responses (1-9)',\n                      }\n                    )}\n                  </div>\n                  <div className=\"space-y-4\">\n                    {renderSettingField(\n                      'performance',\n                      'cacheEnabled',\n                      settings.performance?.cacheEnabled,\n                      'checkbox',\n                      {\n                        description: 'Enable Redis caching for improved performance',\n                      }\n                    )}\n                    {renderSettingField(\n                      'performance',\n                      'compressionEnabled',\n                      settings.performance?.compressionEnabled,\n                      'checkbox',\n                      {\n                        description: 'Enable GZIP compression for responses',\n                      }\n                    )}\n                  </div>\n                  <div className=\"grid grid-cols-1 gap-6\">\n                    {renderSettingField(\n                      'performance',\n                      'redisUrl',\n                      settings.performance?.redisUrl,\n                      'text',\n                      {\n                        label: 'Redis URL',\n                        placeholder: 'redis://localhost:6379',\n                      }\n                    )}\n                  </div>\n                </div>\n              )}\n              {activeTab === 'monetization' && (\n                <div className=\"space-y-6\">\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                    {renderSettingField(\n                      'monetization',\n                      'freeTrialDays',\n                      settings.monetization?.freeTrialDays,\n                      'number',\n                      {\n                        label: 'Free Trial Days',\n                        description: 'Number of free trial days for new users',\n                      }\n                    )}\n                    {renderSettingField(\n                      'monetization',\n                      'defaultCurrency',\n                      settings.monetization?.defaultCurrency,\n                      'select',\n                      {\n                        label: 'Default Currency',\n                        options: [\n                          { value: 'USD', label: 'US Dollar (USD)' },\n                          { value: 'EUR', label: 'Euro (EUR)' },\n                          { value: 'GBP', label: 'British Pound (GBP)' },\n                          { value: 'JPY', label: 'Japanese Yen (JPY)' },\n                        ],\n                      }\n                    )}\n                    {renderSettingField(\n                      'monetization',\n                      'taxRate',\n                      settings.monetization?.taxRate,\n                      'number',\n                      {\n                        label: 'Tax Rate (%)',\n                        description: 'Tax rate applied to transactions',\n                      }\n                    )}\n                    {renderSettingField(\n                      'monetization',\n                      'minimumPayout',\n                      settings.monetization?.minimumPayout,\n                      'number',\n                      {\n                        label: 'Minimum Payout Amount',\n                        description: 'Minimum amount required for payouts',\n                      }\n                    )}\n                  </div>\n                  <div className=\"space-y-4\">\n                    {renderSettingField(\n                      'monetization',\n                      'stripeEnabled',\n                      settings.monetization?.stripeEnabled,\n                      'checkbox',\n                      {\n                        description: 'Enable Stripe payment processing',\n                      }\n                    )}\n                    {renderSettingField(\n                      'monetization',\n                      'paypalEnabled',\n                      settings.monetization?.paypalEnabled,\n                      'checkbox',\n                      {\n                        description: 'Enable PayPal payment processing',\n                      }\n                    )}\n                    {renderSettingField(\n                      'monetization',\n                      'coinbaseEnabled',\n                      settings.monetization?.coinbaseEnabled,\n                      'checkbox',\n                      {\n                        description: 'Enable Coinbase Commerce for crypto payments',\n                      }\n                    )}\n                    {renderSettingField(\n                      'monetization',\n                      'subscriptionEnabled',\n                      settings.monetization?.subscriptionEnabled,\n                      'checkbox',\n                      {\n                        description: 'Enable subscription-based pricing',\n                      }\n                    )}\n                  </div>\n                </div>\n              )}\n              {activeTab === 'moderation' && (\n                <div className=\"space-y-6\">\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                    {renderSettingField(\n                      'moderation',\n                      'moderationThreshold',\n                      settings.moderation?.moderationThreshold,\n                      'number',\n                      {\n                        label: 'Moderation Threshold',\n                        description: 'Confidence threshold for content moderation (0.0-1.0)',\n                      }\n                    )}\n                    {renderSettingField(\n                      'moderation',\n                      'maxMessageLength',\n                      settings.moderation?.maxMessageLength,\n                      'number',\n                      {\n                        label: 'Max Message Length',\n                        description: 'Maximum allowed message length in characters',\n                      }\n                    )}\n                  </div>\n                  <div className=\"space-y-4\">\n                    {renderSettingField(\n                      'moderation',\n                      'contentModerationEnabled',\n                      settings.moderation?.contentModerationEnabled,\n                      'checkbox',\n                      {\n                        description: 'Enable AI-powered content moderation',\n                      }\n                    )}\n                    {renderSettingField(\n                      'moderation',\n                      'autoModeration',\n                      settings.moderation?.autoModeration,\n                      'checkbox',\n                      {\n                        description: 'Automatically moderate content based on AI analysis',\n                      }\n                    )}\n                    {renderSettingField(\n                      'moderation',\n                      'rateLimitEnabled',\n                      settings.moderation?.rateLimitEnabled,\n                      'checkbox',\n                      {\n                        description: 'Enable rate limiting to prevent spam',\n                      }\n                    )}\n                    {renderSettingField(\n                      'moderation',\n                      'spamDetectionEnabled',\n                      settings.moderation?.spamDetectionEnabled,\n                      'checkbox',\n                      {\n                        description: 'Enable spam detection and filtering',\n                      }\n                    )}\n                  </div>\n                  <div className=\"space-y-4\">\n                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">\n                      Banned Words\n                    </label>\n                    <textarea\n                      value={settings.moderation?.bannedWords?.join('\\n') || ''}\n                      onChange={e =>\n                        handleSettingChange(\n                          'moderation',\n                          'bannedWords',\n                          e.target.value.split('\\n').filter(word => word.trim())\n                        )\n                      }\n                      rows={4}\n                      className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white\"\n                      placeholder=\"Enter banned words, one per line\"\n                    />\n                    <p className=\"text-xs text-gray-500 dark:text-gray-400\">\n                      Words that will be automatically filtered from messages\n                    </p>\n                  </div>\n                </div>\n              )}\n              {activeTab === 'backup' && (\n                <div className=\"space-y-6\">\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                    {renderSettingField(\n                      'backup',\n                      'backupFrequency',\n                      settings.backup?.backupFrequency,\n                      'select',\n                      {\n                        label: 'Backup Frequency',\n                        options: [\n                          { value: 'hourly', label: 'Hourly' },\n                          { value: 'daily', label: 'Daily' },\n                          { value: 'weekly', label: 'Weekly' },\n                          { value: 'monthly', label: 'Monthly' },\n                        ],\n                      }\n                    )}\n                    {renderSettingField(\n                      'backup',\n                      'backupRetention',\n                      settings.backup?.backupRetention,\n                      'number',\n                      {\n                        label: 'Backup Retention (days)',\n                        description: 'How long to keep backup files',\n                      }\n                    )}\n                    {renderSettingField(\n                      'backup',\n                      'backupPath',\n                      settings.backup?.backupPath,\n                      'text',\n                      {\n                        label: 'Backup Path',\n                        description: 'Directory path for storing backups',\n                      }\n                    )}\n                  </div>\n                  <div className=\"space-y-4\">\n                    {renderSettingField(\n                      'backup',\n                      'autoBackupEnabled',\n                      settings.backup?.autoBackupEnabled,\n                      'checkbox',\n                      {\n                        description: 'Enable automatic backup scheduling',\n                      }\n                    )}\n                    {renderSettingField(\n                      'backup',\n                      'compressionEnabled',\n                      settings.backup?.compressionEnabled,\n                      'checkbox',\n                      {\n                        description: 'Compress backup files to save space',\n                      }\n                    )}\n                    {renderSettingField(\n                      'backup',\n                      'encryptionEnabled',\n                      settings.backup?.encryptionEnabled,\n                      'checkbox',\n                      {\n                        description: 'Encrypt backup files for security',\n                      }\n                    )}\n                    {renderSettingField(\n                      'backup',\n                      'cloudBackupEnabled',\n                      settings.backup?.cloudBackupEnabled,\n                      'checkbox',\n                      {\n                        description: 'Enable cloud backup storage (AWS S3, Google Cloud, etc.)',\n                      }\n                    )}\n                  </div>\n                </div>\n              )}\n            </motion.div>\n          </AnimatePresence>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default withAuth(SystemSettings);\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\web\\pages\\admin\\users.tsx","messages":[{"ruleId":"import-x/extensions","severity":2,"message":"Missing file extension for \"@/components/ui/card\"","line":25,"column":75,"nodeType":"Literal","messageId":"missing","endLine":25,"endColumn":97},{"ruleId":"import-x/no-unresolved","severity":2,"message":"Unable to resolve path to module '@/components/ui/card'.","line":25,"column":75,"nodeType":"Literal","messageId":"unresolved","endLine":25,"endColumn":97},{"ruleId":"import-x/extensions","severity":2,"message":"Missing file extension for \"@/components/ui/button\"","line":26,"column":24,"nodeType":"Literal","messageId":"missing","endLine":26,"endColumn":48},{"ruleId":"import-x/no-unresolved","severity":2,"message":"Unable to resolve path to module '@/components/ui/button'.","line":26,"column":24,"nodeType":"Literal","messageId":"unresolved","endLine":26,"endColumn":48},{"ruleId":"import-x/extensions","severity":2,"message":"Missing file extension for \"@/components/ui/badge\"","line":27,"column":23,"nodeType":"Literal","messageId":"missing","endLine":27,"endColumn":46},{"ruleId":"import-x/no-unresolved","severity":2,"message":"Unable to resolve path to module '@/components/ui/badge'.","line":27,"column":23,"nodeType":"Literal","messageId":"unresolved","endLine":27,"endColumn":46},{"ruleId":"import-x/extensions","severity":2,"message":"Missing file extension for \"@/components/ui/input\"","line":28,"column":23,"nodeType":"Literal","messageId":"missing","endLine":28,"endColumn":46},{"ruleId":"import-x/no-unresolved","severity":2,"message":"Unable to resolve path to module '@/components/ui/input'.","line":28,"column":23,"nodeType":"Literal","messageId":"unresolved","endLine":28,"endColumn":46},{"ruleId":"import-x/extensions","severity":2,"message":"Missing file extension for \"@/components/ui/select\"","line":35,"column":8,"nodeType":"Literal","messageId":"missing","endLine":35,"endColumn":32},{"ruleId":"import-x/no-unresolved","severity":2,"message":"Unable to resolve path to module '@/components/ui/select'.","line":35,"column":8,"nodeType":"Literal","messageId":"unresolved","endLine":35,"endColumn":32},{"ruleId":"import-x/extensions","severity":2,"message":"Missing file extension for \"@/components/ui/dialog\"","line":44,"column":8,"nodeType":"Literal","messageId":"missing","endLine":44,"endColumn":32},{"ruleId":"import-x/no-unresolved","severity":2,"message":"Unable to resolve path to module '@/components/ui/dialog'.","line":44,"column":8,"nodeType":"Literal","messageId":"unresolved","endLine":44,"endColumn":32},{"ruleId":"import-x/extensions","severity":2,"message":"Missing file extension for \"@/components/ui/dropdown-menu\"","line":52,"column":8,"nodeType":"Literal","messageId":"missing","endLine":52,"endColumn":39},{"ruleId":"import-x/no-unresolved","severity":2,"message":"Unable to resolve path to module '@/components/ui/dropdown-menu'.","line":52,"column":8,"nodeType":"Literal","messageId":"unresolved","endLine":52,"endColumn":39},{"ruleId":"import-x/extensions","severity":2,"message":"Missing file extension for \"@/components/ui/datatable\"","line":53,"column":27,"nodeType":"Literal","messageId":"missing","endLine":53,"endColumn":54},{"ruleId":"import-x/no-unresolved","severity":2,"message":"Unable to resolve path to module '@/components/ui/datatable'.","line":53,"column":27,"nodeType":"Literal","messageId":"unresolved","endLine":53,"endColumn":54},{"ruleId":"import-x/extensions","severity":2,"message":"Missing file extension for \"@/components/ui/pagination\"","line":62,"column":8,"nodeType":"Literal","messageId":"missing","endLine":62,"endColumn":36},{"ruleId":"import-x/no-unresolved","severity":2,"message":"Unable to resolve path to module '@/components/ui/pagination'.","line":62,"column":8,"nodeType":"Literal","messageId":"unresolved","endLine":62,"endColumn":36},{"ruleId":"import-x/extensions","severity":2,"message":"Missing file extension \"js\" for \"../../components/common/withAuth\"","line":63,"column":22,"nodeType":"Literal","messageId":"missingKnown","endLine":63,"endColumn":56,"suggestions":[{"fix":{"range":[1300,1334],"text":"'../../components/common/withAuth.js'"},"messageId":"addMissing","data":{"extension":"js","importPath":"../../components/common/withAuth","fixedImportPath":"../../components/common/withAuth.js"},"desc":"Add \"js\" file extension from \"../../components/common/withAuth\" into \"../../components/common/withAuth.js\""}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":146,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":146,"endColumn":22,"suggestions":[{"fix":{"range":[3838,3883],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":181,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":181,"endColumn":16,"suggestions":[{"fix":{"range":[5078,5117],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":201,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":201,"endColumn":16,"suggestions":[{"fix":{"range":[5594,5641],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"react/no-unstable-nested-components","severity":2,"message":"Do not define components during render. React will see a new component type on every render and destroy the entire subtreeâ€™s DOM nodes and state (https://reactjs.org/docs/reconciliation.html#elements-of-different-types). Instead, move this component definition out of the parent component â€œUserManagementâ€ and pass data as props. If you want to allow component creation in props, set allowAsProps option to true.","line":291,"column":13,"nodeType":"ArrowFunctionExpression","endLine":299,"endColumn":8},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":293,"column":11,"nodeType":"JSXOpeningElement","endLine":293,"endColumn":101},{"ruleId":"react/no-unstable-nested-components","severity":2,"message":"Do not define components during render. React will see a new component type on every render and destroy the entire subtreeâ€™s DOM nodes and state (https://reactjs.org/docs/reconciliation.html#elements-of-different-types). Instead, move this component definition out of the parent component â€œUserManagementâ€ and pass data as props. If you want to allow component creation in props, set allowAsProps option to true.","line":304,"column":13,"nodeType":"ArrowFunctionExpression","endLine":306,"endColumn":8},{"ruleId":"react/no-unstable-nested-components","severity":2,"message":"Do not define components during render. React will see a new component type on every render and destroy the entire subtreeâ€™s DOM nodes and state (https://reactjs.org/docs/reconciliation.html#elements-of-different-types). Instead, move this component definition out of the parent component â€œUserManagementâ€ and pass data as props. If you want to allow component creation in props, set allowAsProps option to true.","line":311,"column":13,"nodeType":"ArrowFunctionExpression","endLine":315,"endColumn":8},{"ruleId":"react/no-unstable-nested-components","severity":2,"message":"Do not define components during render. React will see a new component type on every render and destroy the entire subtreeâ€™s DOM nodes and state (https://reactjs.org/docs/reconciliation.html#elements-of-different-types). Instead, move this component definition out of the parent component â€œUserManagementâ€ and pass data as props. If you want to allow component creation in props, set allowAsProps option to true.","line":329,"column":13,"nodeType":"ArrowFunctionExpression","endLine":377,"endColumn":8},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":596,"column":17,"nodeType":"JSXOpeningElement","endLine":600,"endColumn":19}],"suppressedMessages":[],"errorCount":23,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect } from 'react';\nimport {\n  Users,\n  Search,\n  Filter,\n  MoreHorizontal,\n  Ban,\n  CheckCircle,\n  XCircle,\n  Crown,\n  DollarSign,\n  Download,\n  Eye,\n  Edit,\n  Trash2,\n  UserPlus,\n  Mail,\n  Phone,\n  Calendar,\n  Activity,\n  TrendingUp,\n  AlertTriangle,\n} from 'lucide-react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Badge } from '@/components/ui/badge';\nimport { Input } from '@/components/ui/input';\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from '@/components/ui/select';\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogTitle,\n  DialogTrigger,\n} from '@/components/ui/dialog';\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuLabel,\n  DropdownMenuSeparator,\n  DropdownMenuTrigger,\n} from '@/components/ui/dropdown-menu';\nimport { DataTable } from '@/components/ui/datatable';\nimport {\n  Pagination,\n  PaginationContent,\n  PaginationEllipsis,\n  PaginationItem,\n  PaginationLink,\n  PaginationNext,\n  PaginationPrevious,\n} from '@/components/ui/pagination';\nimport withAuth from '../../components/common/withAuth';\n\ninterface User {\n  id: string;\n  name: string;\n  email: string;\n  phone: string;\n  avatar: string;\n  plan: 'free' | 'basic' | 'pro' | 'enterprise';\n  status: 'active' | 'inactive' | 'banned';\n  joinDate: Date;\n  lastActive: Date;\n  commandsUsed: number;\n  aiRequests: number;\n  totalSpent: number;\n  level: number;\n  xp: number;\n}\n\ninterface Stats {\n  total: number;\n  active: number;\n  premium: number;\n  banned: number;\n}\n\nfunction UserManagement() {\n  const [users, setUsers] = useState<User[]>([]);\n  const [filteredUsers, setFilteredUsers] = useState<User[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [searchTerm, setSearchTerm] = useState('');\n  const [filterStatus, setFilterStatus] = useState('all');\n  const [filterPlan, setFilterPlan] = useState('all');\n  const [selectedUsers, setSelectedUsers] = useState<string[]>([]);\n  const [showUserModal, setShowUserModal] = useState(false);\n  const [selectedUser, setSelectedUser] = useState<User | null>(null);\n  const [paginatedUsers, setPaginatedUsers] = useState<User[]>([]);\n  const [stats, setStats] = useState<Stats>({\n    total: 0,\n    active: 0,\n    premium: 0,\n    banned: 0,\n  });\n  const [currentPage, setCurrentPage] = useState(1);\n  const [totalPages, setTotalPages] = useState(1);\n\n  useEffect(() => {\n    const loadUsers = async () => {\n      setLoading(true);\n      try {\n        const response = await fetch('/api/users');\n        if (!response.ok) {\n          throw new Error('Failed to fetch users');\n        }\n        const fetchedUsers = await response.json();\n\n        // The dates will come as strings, so we need to convert them back to Date objects\n        const formattedUsers = fetchedUsers.map((user: any) => ({\n          ...user,\n          joinDate: new Date(user.joinDate),\n          lastActive: new Date(user.lastActive),\n        }));\n\n        setUsers(formattedUsers);\n        setFilteredUsers(formattedUsers); // Initially, all users are shown\n\n        const calculatedStats: Stats = formattedUsers.reduce(\n          (acc: Stats, user: User) => ({\n            total: acc.total + 1,\n            active: acc.active + (user.status === 'active' ? 1 : 0),\n            premium: acc.premium + (user.plan !== 'free' ? 1 : 0),\n            banned: acc.banned + (user.status === 'banned' ? 1 : 0),\n          }),\n          {\n            total: 0,\n            active: 0,\n            premium: 0,\n            banned: 0,\n          }\n        );\n\n        setStats(calculatedStats);\n      } catch (error) {\n        console.error('Error loading users:', error);\n        // Handle error state in UI if necessary\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    loadUsers();\n  }, []);\n\n  useEffect(() => {\n    const filtered = users.filter(user => {\n      const matchesSearch =\n        user.name.toLowerCase().includes(searchTerm.toLowerCase()) ||\n        user.email.toLowerCase().includes(searchTerm.toLowerCase()) ||\n        user.phone.includes(searchTerm);\n      const matchesStatus = filterStatus === 'all' || user.status === filterStatus;\n      const matchesPlan = filterPlan === 'all' || user.plan === filterPlan;\n      return matchesSearch && matchesStatus && matchesPlan;\n    });\n\n    setFilteredUsers(filtered);\n    setSelectedUsers([]);\n\n    // Pagination logic\n    const usersPerPage = 10;\n    const totalPagesCount = Math.ceil(filtered.length / usersPerPage);\n    setTotalPages(totalPagesCount);\n\n    const indexOfLastUser = currentPage * usersPerPage;\n    const indexOfFirstUser = indexOfLastUser - usersPerPage;\n    setPaginatedUsers(filtered.slice(indexOfFirstUser, indexOfLastUser));\n  }, [users, searchTerm, filterStatus, filterPlan, currentPage]);\n\n  const handleUserAction = async (action: string, userId: string) => {\n    console.log(`${action} user:`, userId);\n    setUsers(\n      users.map(user => {\n        if (user.id === userId) {\n          let newStatus = user.status;\n          if (action === 'ban') {\n            newStatus = 'banned';\n          } else if (action === 'unban') {\n            newStatus = 'active';\n          }\n          return { ...user, status: newStatus };\n        }\n        return user;\n      })\n    );\n  };\n\n  const handleBulkAction = async (action: string) => {\n    if (selectedUsers.length === 0) return;\n\n    console.log(`${action} users:`, selectedUsers);\n\n    setUsers(\n      users.map(user => {\n        if (selectedUsers.includes(user.id)) {\n          let newStatus = user.status;\n          if (action === 'ban') {\n            newStatus = 'banned';\n          } else if (action === 'unban') {\n            newStatus = 'active';\n          }\n          return { ...user, status: newStatus };\n        }\n        return user;\n      })\n    );\n\n    setSelectedUsers([]);\n  };\n\n  const exportUsers = () => {\n    const csvData = filteredUsers.map(user => ({\n      ID: user.id,\n      Name: user.name,\n      Email: user.email,\n      Phone: user.phone,\n      Plan: user.plan,\n      Status: user.status,\n      JoinDate: user.joinDate.toISOString(),\n      LastActive: user.lastActive.toISOString(),\n      CommandsUsed: user.commandsUsed,\n      AIRequests: user.aiRequests,\n      TotalSpent: user.totalSpent,\n      Level: user.level,\n      XP: user.xp,\n    }));\n\n    const csvString = [\n      Object.keys(csvData[0]).join(','),\n      ...csvData.map(row => Object.values(row).join(',')),\n    ].join('\\n');\n\n    const blob = new Blob([csvString], { type: 'text/csv' });\n    const url = window.URL.createObjectURL(blob);\n    const a = document.createElement('a');\n    a.href = url;\n    a.download = `users_export_${new Date().toISOString().split('T')[0]}.csv`;\n    a.click();\n    window.URL.revokeObjectURL(url);\n  };\n\n  const handleClearFilters = () => {\n    setSearchTerm('');\n    setFilterStatus('all');\n    setFilterPlan('all');\n    setCurrentPage(1); // Reset to first page when filters are cleared\n  };\n\n  const getStatusVariant = (status: User['status']) => {\n    switch (status) {\n      case 'active':\n        return 'default' as const;\n      case 'inactive':\n        return 'secondary' as const;\n      case 'banned':\n        return 'destructive' as const;\n      default:\n        return 'secondary' as const;\n    }\n  };\n\n  const getPlanVariant = (plan: User['plan']) => {\n    switch (plan) {\n      case 'free':\n        return 'secondary' as const;\n      case 'basic':\n        return 'outline' as const;\n      case 'pro':\n        return 'default' as const;\n      case 'enterprise':\n        return 'secondary' as const;\n      default:\n        return 'secondary' as const;\n    }\n  };\n\n  const columns = [\n    {\n      accessorKey: 'name',\n      header: 'User',\n      cell: ({ row }: any) => (\n        <div className=\"flex items-center space-x-3\">\n          <img className=\"h-8 w-8 rounded-full\" src={row.original.avatar} alt={row.original.name} />\n          <div>\n            <div className=\"font-medium\">{row.original.name}</div>\n            <div className=\"text-sm text-muted-foreground\">{row.original.email}</div>\n          </div>\n        </div>\n      ),\n    },\n    {\n      accessorKey: 'plan',\n      header: 'Plan',\n      cell: ({ row }: any) => (\n        <Badge variant={getPlanVariant(row.original.plan)}>{row.original.plan.toUpperCase()}</Badge>\n      ),\n    },\n    {\n      accessorKey: 'status',\n      header: 'Status',\n      cell: ({ row }: any) => (\n        <Badge variant={getStatusVariant(row.original.status)}>\n          {row.original.status.toUpperCase()}\n        </Badge>\n      ),\n    },\n    {\n      accessorKey: 'commandsUsed',\n      header: 'Commands Used',\n      cell: ({ row }: any) => row.original.commandsUsed,\n    },\n    {\n      accessorKey: 'lastActive',\n      header: 'Last Active',\n      cell: ({ row }: any) => row.original.lastActive.toLocaleDateString(),\n    },\n    {\n      id: 'actions',\n      cell: ({ row }: any) => (\n        <div className=\"flex items-center space-x-2\">\n          <DialogTrigger asChild>\n            <Button\n              variant=\"ghost\"\n              size=\"sm\"\n              onClick={() => {\n                setSelectedUser(row.original);\n              }}\n            >\n              <Eye className=\"h-4 w-4\" />\n            </Button>\n          </DialogTrigger>\n          <DropdownMenu>\n            <DropdownMenuTrigger asChild>\n              <Button variant=\"ghost\" size=\"sm\">\n                <MoreHorizontal className=\"h-4 w-4\" />\n              </Button>\n            </DropdownMenuTrigger>\n            <DropdownMenuContent align=\"end\">\n              <DropdownMenuLabel>Actions</DropdownMenuLabel>\n              <DropdownMenuItem\n                onClick={() =>\n                  handleUserAction(\n                    row.original.status === 'banned' ? 'unban' : 'ban',\n                    row.original.id\n                  )\n                }\n              >\n                {row.original.status === 'banned' ? (\n                  <CheckCircle className=\"mr-2 h-4 w-4\" />\n                ) : (\n                  <Ban className=\"mr-2 h-4 w-4\" />\n                )}\n                {row.original.status === 'banned' ? 'Unban' : 'Ban'}\n              </DropdownMenuItem>\n              <DropdownMenuSeparator />\n              <DropdownMenuItem onClick={() => handleUserAction('edit', row.original.id)}>\n                <Edit className=\"mr-2 h-4 w-4\" />\n                Edit\n              </DropdownMenuItem>\n              <DropdownMenuItem>\n                <Trash2 className=\"mr-2 h-4 w-4\" />\n                Delete\n              </DropdownMenuItem>\n            </DropdownMenuContent>\n          </DropdownMenu>\n        </div>\n      ),\n    },\n  ];\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center h-64\">\n        <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600\" />\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <div className=\"flex justify-between items-center\">\n        <div>\n          <h1 className=\"text-3xl font-bold text-gray-900 dark:text-white\">User Management</h1>\n          <p className=\"text-gray-600 dark:text-gray-400 mt-1\">\n            Manage user accounts, subscriptions, and permissions\n          </p>\n        </div>\n        <div className=\"flex space-x-3\">\n          <Button variant=\"outline\" onClick={exportUsers}>\n            <Download className=\"mr-2 h-4 w-4\" />\n            Export\n          </Button>\n          <Button>\n            <UserPlus className=\"mr-2 h-4 w-4\" />\n            Add User\n          </Button>\n        </div>\n      </div>\n\n      {/* Stats Cards */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\">\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium\">Total Users</CardTitle>\n            <Users className=\"h-4 w-4 text-muted-foreground\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold\">{stats.total.toLocaleString()}</div>\n          </CardContent>\n        </Card>\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium\">Active Users</CardTitle>\n            <Activity className=\"h-4 w-4 text-muted-foreground\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold\">{stats.active.toLocaleString()}</div>\n          </CardContent>\n        </Card>\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium\">Premium Users</CardTitle>\n            <Crown className=\"h-4 w-4 text-muted-foreground\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold\">{stats.premium.toLocaleString()}</div>\n          </CardContent>\n        </Card>\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium\">Banned Users</CardTitle>\n            <AlertTriangle className=\"h-4 w-4 text-muted-foreground\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold\">{stats.banned.toLocaleString()}</div>\n          </CardContent>\n        </Card>\n      </div>\n\n      {/* Filters and Search */}\n      <Card>\n        <CardHeader>\n          <CardTitle>Filters</CardTitle>\n        </CardHeader>\n        <CardContent className=\"flex flex-col lg:flex-row gap-4\">\n          <div className=\"flex-1\">\n            <div className=\"relative\">\n              <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-5 h-5\" />\n              <Input\n                placeholder=\"Search users by name, email, or phone...\"\n                value={searchTerm}\n                onChange={e => setSearchTerm(e.target.value)}\n                className=\"pl-10\"\n              />\n            </div>\n          </div>\n\n          <div className=\"flex gap-4\">\n            <Select value={filterStatus} onValueChange={setFilterStatus}>\n              <SelectTrigger className=\"w-[180px]\">\n                <SelectValue placeholder=\"All Status\" />\n              </SelectTrigger>\n              <SelectContent>\n                <SelectItem value=\"all\">All Status</SelectItem>\n                <SelectItem value=\"active\">Active</SelectItem>\n                <SelectItem value=\"inactive\">Inactive</SelectItem>\n                <SelectItem value=\"banned\">Banned</SelectItem>\n              </SelectContent>\n            </Select>\n\n            <Select value={filterPlan} onValueChange={setFilterPlan}>\n              <SelectTrigger className=\"w-[180px]\">\n                <SelectValue placeholder=\"All Plans\" />\n              </SelectTrigger>\n              <SelectContent>\n                <SelectItem value=\"all\">All Plans</SelectItem>\n                <SelectItem value=\"free\">Free</SelectItem>\n                <SelectItem value=\"basic\">Basic</SelectItem>\n                <SelectItem value=\"pro\">Pro</SelectItem>\n                <SelectItem value=\"enterprise\">Enterprise</SelectItem>\n              </SelectContent>\n            </Select>\n            <Button variant=\"outline\" onClick={handleClearFilters}>\n              <XCircle className=\"mr-2 h-4 w-4\" />\n              Clear Filters\n            </Button>\n            <Button variant=\"outline\">\n              <Filter className=\"mr-2 h-4 w-4\" />\n              Filter\n            </Button>\n          </div>\n        </CardContent>\n\n        {selectedUsers.length > 0 && (\n          <CardContent className=\"p-4 bg-accent/50\">\n            <div className=\"flex items-center justify-between\">\n              <span className=\"text-sm text-foreground\">\n                {selectedUsers.length} user{selectedUsers.length > 1 ? 's' : ''} selected\n              </span>\n              <div className=\"flex space-x-2\">\n                <Button variant=\"destructive\" size=\"sm\" onClick={() => handleBulkAction('ban')}>\n                  Ban Selected\n                </Button>\n                <Button variant=\"default\" size=\"sm\" onClick={() => handleBulkAction('unban')}>\n                  Unban Selected\n                </Button>\n              </div>\n            </div>\n          </CardContent>\n        )}\n      </Card>\n\n      {/* Users Table */}\n      <Card>\n        <CardHeader>\n          <CardTitle>Users</CardTitle>\n          <CardDescription>Manage and view user accounts</CardDescription>\n        </CardHeader>\n        <CardContent>\n          <AnimatePresence>\n            <motion.div\n              initial={{ opacity: 0, y: 20 }}\n              animate={{ opacity: 1, y: 0 }}\n              exit={{ opacity: 0, y: -20 }}\n              transition={{ duration: 0.3 }}\n            >\n              <DataTable columns={columns} data={paginatedUsers} searchKey=\"name\" />\n            </motion.div>\n          </AnimatePresence>\n        </CardContent>\n        <div className=\"flex justify-center py-4\">\n          <Pagination>\n            <PaginationContent>\n              <PaginationItem>\n                <PaginationPrevious\n                  href=\"#\"\n                  onClick={() => setCurrentPage(prev => Math.max(prev - 1, 1))}\n                  className={currentPage === 1 ? 'pointer-events-none opacity-50' : undefined}\n                />\n              </PaginationItem>\n              {Array.from({ length: totalPages }, (_, i) => i + 1).map(page => {\n                if (\n                  totalPages > 5 &&\n                  ((page > 2 && page < currentPage - 1) ||\n                    (page < totalPages - 1 && page > currentPage + 1))\n                ) {\n                  return <PaginationEllipsis key={page} />;\n                }\n                return (\n                  <PaginationItem key={page}>\n                    <PaginationLink\n                      href=\"#\"\n                      isActive={page === currentPage}\n                      onClick={() => setCurrentPage(page)}\n                    >\n                      {page}\n                    </PaginationLink>\n                  </PaginationItem>\n                );\n              })}\n              <PaginationItem>\n                <PaginationNext\n                  href=\"#\"\n                  onClick={() => setCurrentPage(prev => Math.min(prev + 1, totalPages))}\n                  className={\n                    currentPage === totalPages ? 'pointer-events-none opacity-50' : undefined\n                  }\n                />\n              </PaginationItem>\n            </PaginationContent>\n          </Pagination>\n        </div>\n      </Card>\n\n      {/* User Detail Modal */}\n      <Dialog open={showUserModal} onOpenChange={setShowUserModal}>\n        <DialogContent className=\"max-w-2xl\">\n          <DialogHeader>\n            <DialogTitle>User Details</DialogTitle>\n            <DialogDescription>View and manage user information</DialogDescription>\n          </DialogHeader>\n          {selectedUser && (\n            <div className=\"space-y-6\">\n              <div className=\"flex items-center space-x-4\">\n                <img\n                  className=\"h-16 w-16 rounded-full\"\n                  src={selectedUser.avatar}\n                  alt={selectedUser.name}\n                />\n                <div>\n                  <h3 className=\"text-xl font-semibold\">{selectedUser.name}</h3>\n                  <p className=\"text-gray-600\">\n                    Level {selectedUser.level} â€¢ {selectedUser.xp} XP\n                  </p>\n                </div>\n              </div>\n\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                <div className=\"flex items-center space-x-2\">\n                  <Mail className=\"h-4 w-4 text-muted-foreground\" />\n                  <span>{selectedUser.email}</span>\n                </div>\n                <div className=\"flex items-center space-x-2\">\n                  <Phone className=\"h-4 w-4 text-muted-foreground\" />\n                  <span>{selectedUser.phone}</span>\n                </div>\n                <div className=\"flex items-center space-x-2\">\n                  <Calendar className=\"h-4 w-4 text-muted-foreground\" />\n                  <span>Joined {selectedUser.joinDate.toLocaleDateString()}</span>\n                </div>\n                <div className=\"flex items-center space-x-2\">\n                  <Activity className=\"h-4 w-4 text-muted-foreground\" />\n                  <span>Last active {selectedUser.lastActive.toLocaleDateString()}</span>\n                </div>\n              </div>\n\n              <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\n                <div className=\"text-center p-4 bg-muted rounded-lg\">\n                  <div className=\"flex items-center justify-center text-2xl font-bold text-primary\">\n                    <TrendingUp className=\"h-6 w-6 mr-1\" />\n                    {selectedUser.commandsUsed}\n                  </div>\n                  <div className=\"text-sm text-muted-foreground\">Commands Used</div>\n                </div>\n                <div className=\"text-center p-4 bg-muted rounded-lg\">\n                  <div className=\"text-2xl font-bold text-secondary\">{selectedUser.aiRequests}</div>\n                  <div className=\"text-sm text-muted-foreground\">AI Requests</div>\n                </div>\n                <div className=\"text-center p-4 bg-muted rounded-lg\">\n                  <div className=\"flex items-center justify-center text-2xl font-bold text-success\">\n                    <DollarSign className=\"h-6 w-6 mr-1\" />\n                    {selectedUser.totalSpent}\n                  </div>\n                  <div className=\"text-sm text-muted-foreground\">Total Spent</div>\n                </div>\n                <div className=\"text-center p-4 bg-muted rounded-lg\">\n                  <div className=\"text-2xl font-bold text-warning\">{selectedUser.level}</div>\n                  <div className=\"text-sm text-muted-foreground\">Current Level</div>\n                </div>\n              </div>\n\n              <DialogFooter>\n                <Button\n                  variant=\"destructive\"\n                  onClick={() =>\n                    handleUserAction(\n                      selectedUser.status === 'banned' ? 'unban' : 'ban',\n                      selectedUser.id\n                    )\n                  }\n                >\n                  {selectedUser.status === 'banned' ? 'Unban User' : 'Ban User'}\n                </Button>\n                <Button onClick={() => handleUserAction('edit', selectedUser.id)}>Edit User</Button>\n                <Button variant=\"outline\" onClick={() => setShowUserModal(false)}>\n                  Close\n                </Button>\n              </DialogFooter>\n            </div>\n          )}\n        </DialogContent>\n      </Dialog>\n    </div>\n  );\n}\n\nexport default withAuth(UserManagement);\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\web\\pages\\analytics.js","messages":[{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":18,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":18,"endColumn":20,"suggestions":[{"fix":{"range":[634,685],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"react/jsx-filename-extension","severity":2,"message":"JSX not allowed in files with extension '.js'","line":45,"column":7,"nodeType":"JSXElement","messageId":"noJSXWithExtension","endLine":50,"endColumn":13},{"ruleId":"no-unsafe-optional-chaining","severity":2,"message":"Unsafe arithmetic operation on optional chaining. It can result in NaN.","line":128,"column":35,"nodeType":"ChainExpression","messageId":"unsafeArithmetic","endLine":128,"endColumn":65},{"ruleId":"no-unsafe-optional-chaining","severity":2,"message":"Unsafe arithmetic operation on optional chaining. It can result in NaN.","line":139,"column":29,"nodeType":"ChainExpression","messageId":"unsafeArithmetic","endLine":139,"endColumn":69}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect, useCallback } from 'react';\nimport Head from 'next/head';\n\nexport default function AnalyticsPage() {\n  const [analytics, setAnalytics] = useState({});\n  const [loading, setLoading] = useState(true);\n  const [timeRange, setTimeRange] = useState('24h');\n  const [selectedMetric, setSelectedMetric] = useState('overview');\n\n  const fetchAnalytics = useCallback(async () => {\n    try {\n      const response = await fetch(`/api/auth/analytics?range=${timeRange}`);\n      const data = await response.json();\n      if (data.success) {\n        setAnalytics(data.data);\n      }\n    } catch (error) {\n      console.error('Failed to fetch analytics:', error);\n    } finally {\n      setLoading(false);\n    }\n  }, [timeRange]);\n\n  useEffect(() => {\n    fetchAnalytics();\n    const interval = setInterval(fetchAnalytics, 30000); // Update every 30 seconds\n    return () => clearInterval(interval);\n  }, [timeRange, fetchAnalytics]);\n  const formatNumber = num => {\n    if (num >= 1000000) return `${(num / 1000000).toFixed(1)}M`;\n    if (num >= 1000) return `${(num / 1000).toFixed(1)}K`;\n    return num.toString();\n  };\n\n  const formatTime = ms => {\n    if (ms < 1000) return `${ms}ms`;\n    if (ms < 60000) return `${(ms / 1000).toFixed(1)}s`;\n    return `${(ms / 60000).toFixed(1)}m`;\n  };\n\n  const formatPercentage = value => `${(value * 100).toFixed(1)}%`;\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4\" />\n          <p className=\"text-gray-600\">Loading analytics...</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100\">\n      <Head>\n        <title>Ultra-Smart Auth Analytics</title>\n        <meta name=\"description\" content=\"Comprehensive authentication analytics dashboard\" />\n        <link rel=\"icon\" href=\"/favicon.ico\" />\n      </Head>\n\n      <div className=\"container mx-auto px-4 py-8\">\n        {/* Header */}\n        <div className=\"text-center mb-8\">\n          <h1 className=\"text-4xl font-bold text-gray-900 mb-2\">\n            ðŸ“Š Ultra-Smart Authentication Analytics\n          </h1>\n          <p className=\"text-lg text-gray-600\">\n            Real-time insights into authentication performance and user behavior\n          </p>\n        </div>\n\n        {/* Controls */}\n        <div className=\"bg-white rounded-xl shadow-lg p-6 mb-6\">\n          <div className=\"flex flex-wrap gap-4 items-center justify-between\">\n            <div className=\"flex gap-4\">\n              <select\n                value={timeRange}\n                onChange={e => setTimeRange(e.target.value)}\n                className=\"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n              >\n                <option value=\"1h\">Last Hour</option>\n                <option value=\"24h\">Last 24 Hours</option>\n                <option value=\"7d\">Last 7 Days</option>\n                <option value=\"30d\">Last 30 Days</option>\n              </select>\n\n              <select\n                value={selectedMetric}\n                onChange={e => setSelectedMetric(e.target.value)}\n                className=\"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n              >\n                <option value=\"overview\">Overview</option>\n                <option value=\"qr-codes\">QR Codes</option>\n                <option value=\"pairing-codes\">Pairing Codes</option>\n                <option value=\"reconnection\">Reconnection</option>\n                <option value=\"sessions\">Sessions</option>\n              </select>\n            </div>\n\n            <div className=\"text-sm text-gray-500\">\n              Last updated: {new Date().toLocaleTimeString()}\n            </div>\n          </div>\n        </div>\n\n        {/* Overview Dashboard */}\n        {selectedMetric === 'overview' && (\n          <div className=\"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-4 gap-6 mb-8\">\n            {/* Overall Stats */}\n            <div className=\"bg-white rounded-xl shadow-lg p-6\">\n              <div className=\"flex items-center justify-between mb-4\">\n                <h3 className=\"text-lg font-semibold text-gray-800\">Total Connections</h3>\n                <div className=\"text-2xl\">ðŸ”—</div>\n              </div>\n              <div className=\"text-3xl font-bold text-blue-600 mb-2\">\n                {formatNumber(analytics.overall?.totalConnections || 0)}\n              </div>\n              <div className=\"text-sm text-gray-500\">+12% from last period</div>\n            </div>\n\n            <div className=\"bg-white rounded-xl shadow-lg p-6\">\n              <div className=\"flex items-center justify-between mb-4\">\n                <h3 className=\"text-lg font-semibold text-gray-800\">Success Rate</h3>\n                <div className=\"text-2xl\">âœ…</div>\n              </div>\n              <div className=\"text-3xl font-bold text-green-600 mb-2\">\n                {formatPercentage(analytics.overall?.successRate / 100 || 0)}\n              </div>\n              <div className=\"text-sm text-gray-500\">+2.1% from last period</div>\n            </div>\n\n            <div className=\"bg-white rounded-xl shadow-lg p-6\">\n              <div className=\"flex items-center justify-between mb-4\">\n                <h3 className=\"text-lg font-semibold text-gray-800\">Avg Connection Time</h3>\n                <div className=\"text-2xl\">â±ï¸</div>\n              </div>\n              <div className=\"text-3xl font-bold text-orange-600 mb-2\">\n                {formatTime(analytics.overall?.averageConnectionTime * 1000 || 0)}\n              </div>\n              <div className=\"text-sm text-gray-500\">-1.2s from last period</div>\n            </div>\n\n            <div className=\"bg-white rounded-xl shadow-lg p-6\">\n              <div className=\"flex items-center justify-between mb-4\">\n                <h3 className=\"text-lg font-semibold text-gray-800\">Active Sessions</h3>\n                <div className=\"text-2xl\">ðŸ”µ</div>\n              </div>\n              <div className=\"text-3xl font-bold text-purple-600 mb-2\">\n                {analytics.overall?.activeConnections || 0}\n              </div>\n              <div className=\"text-sm text-gray-500\">Currently online</div>\n            </div>\n          </div>\n        )}\n\n        {/* QR Code Analytics */}\n        {selectedMetric === 'qr-codes' && (\n          <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n            <div className=\"bg-white rounded-xl shadow-lg p-6\">\n              <h3 className=\"text-xl font-semibold text-gray-800 mb-4\">ðŸ“± QR Code Performance</h3>\n              <div className=\"space-y-4\">\n                <div className=\"flex justify-between items-center\">\n                  <span className=\"text-gray-600\">Active QR Codes</span>\n                  <span className=\"font-semibold\">{analytics.qrStats?.activeQRs || 0}</span>\n                </div>\n                <div className=\"flex justify-between items-center\">\n                  <span className=\"text-gray-600\">Total Generated</span>\n                  <span className=\"font-semibold\">{analytics.qrStats?.totalGenerated || 0}</span>\n                </div>\n                <div className=\"flex justify-between items-center\">\n                  <span className=\"text-gray-600\">Success Rate</span>\n                  <span className=\"font-semibold text-green-600\">\n                    {analytics.qrStats?.averageSuccessRate || 'N/A'}\n                  </span>\n                </div>\n                <div className=\"flex justify-between items-center\">\n                  <span className=\"text-gray-600\">Generation Time</span>\n                  <span className=\"font-semibold\">\n                    {analytics.qrStats?.averageGenerationTime || 'N/A'}\n                  </span>\n                </div>\n                <div className=\"flex justify-between items-center\">\n                  <span className=\"text-gray-600\">Optimal Refresh Time</span>\n                  <span className=\"font-semibold\">\n                    {analytics.qrStats?.optimalRefreshTime || 'N/A'}\n                  </span>\n                </div>\n              </div>\n            </div>\n\n            <div className=\"bg-white rounded-xl shadow-lg p-6\">\n              <h3 className=\"text-xl font-semibold text-gray-800 mb-4\">ðŸ¤– AI Learning</h3>\n              <div className=\"space-y-4\">\n                <div className=\"flex justify-between items-center\">\n                  <span className=\"text-gray-600\">Successful Patterns</span>\n                  <span className=\"font-semibold text-green-600\">\n                    {analytics.qrStats?.learningPatterns?.successful || 0}\n                  </span>\n                </div>\n                <div className=\"flex justify-between items-center\">\n                  <span className=\"text-gray-600\">Failed Patterns</span>\n                  <span className=\"font-semibold text-red-600\">\n                    {analytics.qrStats?.learningPatterns?.failed || 0}\n                  </span>\n                </div>\n                <div className=\"text-sm text-gray-500 mt-4\">\n                  AI continuously learns from authentication patterns to optimize QR code generation\n                  and refresh timing.\n                </div>\n              </div>\n            </div>\n          </div>\n        )}\n\n        {/* Pairing Code Analytics */}\n        {selectedMetric === 'pairing-codes' && (\n          <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n            <div className=\"bg-white rounded-xl shadow-lg p-6\">\n              <h3 className=\"text-xl font-semibold text-gray-800 mb-4\">\n                ðŸ”¢ Pairing Code Performance\n              </h3>\n              <div className=\"space-y-4\">\n                <div className=\"flex justify-between items-center\">\n                  <span className=\"text-gray-600\">Active Codes</span>\n                  <span className=\"font-semibold\">{analytics.pairingStats?.activeCodes || 0}</span>\n                </div>\n                <div className=\"flex justify-between items-center\">\n                  <span className=\"text-gray-600\">Total Generated</span>\n                  <span className=\"font-semibold\">\n                    {analytics.pairingStats?.totalGenerated || 0}\n                  </span>\n                </div>\n                <div className=\"flex justify-between items-center\">\n                  <span className=\"text-gray-600\">Success Rate</span>\n                  <span className=\"font-semibold text-green-600\">\n                    {analytics.pairingStats?.successRate || 'N/A'}\n                  </span>\n                </div>\n                <div className=\"flex justify-between items-center\">\n                  <span className=\"text-gray-600\">Avg Usage Time</span>\n                  <span className=\"font-semibold\">\n                    {analytics.pairingStats?.averageUseTime || 'N/A'}\n                  </span>\n                </div>\n                <div className=\"flex justify-between items-center\">\n                  <span className=\"text-gray-600\">Accessibility Usage</span>\n                  <span className=\"font-semibold text-blue-600\">\n                    {analytics.pairingStats?.accessibilityUsage || 0}\n                  </span>\n                </div>\n              </div>\n            </div>\n\n            <div className=\"bg-white rounded-xl shadow-lg p-6\">\n              <h3 className=\"text-xl font-semibold text-gray-800 mb-4\">ðŸŽ¯ User Preferences</h3>\n              <div className=\"space-y-4\">\n                <div className=\"flex justify-between items-center\">\n                  <span className=\"text-gray-600\">Preferred Format</span>\n                  <span className=\"font-semibold capitalize\">\n                    {analytics.pairingStats?.userPreferences?.format || 'phonetic'}\n                  </span>\n                </div>\n                <div className=\"flex justify-between items-center\">\n                  <span className=\"text-gray-600\">Preferred Length</span>\n                  <span className=\"font-semibold capitalize\">\n                    {analytics.pairingStats?.userPreferences?.length || 'medium'}\n                  </span>\n                </div>\n                <div className=\"flex justify-between items-center\">\n                  <span className=\"text-gray-600\">Voice Guidance</span>\n                  <span className=\"font-semibold\">\n                    {analytics.pairingStats?.userPreferences?.voice ? 'âœ… Enabled' : 'âŒ Disabled'}\n                  </span>\n                </div>\n                <div className=\"flex justify-between items-center\">\n                  <span className=\"text-gray-600\">Accessibility</span>\n                  <span className=\"font-semibold\">\n                    {analytics.pairingStats?.userPreferences?.accessibility\n                      ? 'âœ… Enabled'\n                      : 'âŒ Disabled'}\n                  </span>\n                </div>\n              </div>\n            </div>\n          </div>\n        )}\n\n        {/* Reconnection Analytics */}\n        {selectedMetric === 'reconnection' && (\n          <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n            <div className=\"bg-white rounded-xl shadow-lg p-6\">\n              <h3 className=\"text-xl font-semibold text-gray-800 mb-4\">ðŸ”„ Reconnection Engine</h3>\n              <div className=\"space-y-4\">\n                <div className=\"flex justify-between items-center\">\n                  <span className=\"text-gray-600\">Connection Status</span>\n                  <span\n                    className={`font-semibold ${analytics.reconnectionStats?.connectionState?.isConnected ? 'text-green-600' : 'text-red-600'}`}\n                  >\n                    {analytics.reconnectionStats?.connectionState?.isConnected\n                      ? 'âœ… Connected'\n                      : 'âŒ Disconnected'}\n                  </span>\n                </div>\n                <div className=\"flex justify-between items-center\">\n                  <span className=\"text-gray-600\">Active Attempts</span>\n                  <span className=\"font-semibold\">\n                    {analytics.reconnectionStats?.activeAttempts || 0}\n                  </span>\n                </div>\n                <div className=\"flex justify-between items-center\">\n                  <span className=\"text-gray-600\">Success Rate</span>\n                  <span className=\"font-semibold text-green-600\">\n                    {formatPercentage(\n                      analytics.reconnectionStats?.connectionState?.successRate || 0\n                    )}\n                  </span>\n                </div>\n                <div className=\"flex justify-between items-center\">\n                  <span className=\"text-gray-600\">Avg Reconnection Time</span>\n                  <span className=\"font-semibold\">\n                    {formatTime(\n                      analytics.reconnectionStats?.connectionState?.averageReconnectionTime || 0\n                    )}\n                  </span>\n                </div>\n                <div className=\"flex justify-between items-center\">\n                  <span className=\"text-gray-600\">Total Retries</span>\n                  <span className=\"font-semibold\">\n                    {analytics.reconnectionStats?.connectionState?.totalRetries || 0}\n                  </span>\n                </div>\n              </div>\n            </div>\n\n            <div className=\"bg-white rounded-xl shadow-lg p-6\">\n              <h3 className=\"text-xl font-semibold text-gray-800 mb-4\">ðŸ§  AI Learning</h3>\n              <div className=\"space-y-4\">\n                <div className=\"flex justify-between items-center\">\n                  <span className=\"text-gray-600\">Successful Strategies</span>\n                  <span className=\"font-semibold text-green-600\">\n                    {analytics.reconnectionStats?.learningData?.successfulStrategies?.length || 0}\n                  </span>\n                </div>\n                <div className=\"flex justify-between items-center\">\n                  <span className=\"text-gray-600\">Failed Strategies</span>\n                  <span className=\"font-semibold text-red-600\">\n                    {analytics.reconnectionStats?.learningData?.failedStrategies?.length || 0}\n                  </span>\n                </div>\n                <div className=\"flex justify-between items-center\">\n                  <span className=\"text-gray-600\">Network Patterns</span>\n                  <span className=\"font-semibold\">\n                    {analytics.reconnectionStats?.learningData?.networkPatterns?.size || 0}\n                  </span>\n                </div>\n                <div className=\"flex justify-between items-center\">\n                  <span className=\"text-gray-600\">Time Patterns</span>\n                  <span className=\"font-semibold\">\n                    {analytics.reconnectionStats?.learningData?.timePatterns?.size || 0}\n                  </span>\n                </div>\n                <div className=\"flex justify-between items-center\">\n                  <span className=\"text-gray-600\">Device Patterns</span>\n                  <span className=\"font-semibold\">\n                    {analytics.reconnectionStats?.learningData?.devicePatterns?.size || 0}\n                  </span>\n                </div>\n              </div>\n            </div>\n          </div>\n        )}\n\n        {/* Session Analytics */}\n        {selectedMetric === 'sessions' && (\n          <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n            <div className=\"bg-white rounded-xl shadow-lg p-6\">\n              <h3 className=\"text-xl font-semibold text-gray-800 mb-4\">ðŸ” Session Management</h3>\n              <div className=\"space-y-4\">\n                <div className=\"flex justify-between items-center\">\n                  <span className=\"text-gray-600\">Active Sessions</span>\n                  <span className=\"font-semibold\">\n                    {analytics.sessionStats?.activeSessions || 0}\n                  </span>\n                </div>\n                <div className=\"flex justify-between items-center\">\n                  <span className=\"text-gray-600\">Total Devices</span>\n                  <span className=\"font-semibold\">{analytics.sessionStats?.totalDevices || 0}</span>\n                </div>\n                <div className=\"flex justify-between items-center\">\n                  <span className=\"text-gray-600\">Avg Session Duration</span>\n                  <span className=\"font-semibold\">\n                    {analytics.sessionStats?.averageSessionDuration || 0} min\n                  </span>\n                </div>\n                <div className=\"flex justify-between items-center\">\n                  <span className=\"text-gray-600\">Recovery Points</span>\n                  <span className=\"font-semibold\">\n                    {analytics.sessionStats?.recoveryPoints || 0}\n                  </span>\n                </div>\n                <div className=\"flex justify-between items-center\">\n                  <span className=\"text-gray-600\">Session History</span>\n                  <span className=\"font-semibold\">\n                    {analytics.sessionStats?.sessionHistory || 0}\n                  </span>\n                </div>\n              </div>\n            </div>\n\n            <div className=\"bg-white rounded-xl shadow-lg p-6\">\n              <h3 className=\"text-xl font-semibold text-gray-800 mb-4\">ðŸ“± Device Distribution</h3>\n              <div className=\"space-y-3\">\n                {analytics.sessionStats?.deviceStats &&\n                  Object.entries(analytics.sessionStats.deviceStats).map(([deviceId, stats]) => (\n                    <div\n                      key={deviceId}\n                      className=\"flex justify-between items-center p-3 bg-gray-50 rounded-lg\"\n                    >\n                      <div>\n                        <div className=\"font-medium text-gray-800\">\n                          {deviceId.substring(0, 8)}...\n                        </div>\n                        <div className=\"text-sm text-gray-500\">\n                          {stats.types.join(', ')} â€¢ {stats.count} session\n                          {stats.count !== 1 ? 's' : ''}\n                        </div>\n                      </div>\n                      <div className=\"text-lg\">{stats.types.includes('mobile') ? 'ðŸ“±' : 'ðŸ’»'}</div>\n                    </div>\n                  ))}\n                {(!analytics.sessionStats?.deviceStats ||\n                  Object.keys(analytics.sessionStats.deviceStats).length === 0) && (\n                  <div className=\"text-center text-gray-500 py-8\">No device data available</div>\n                )}\n              </div>\n            </div>\n          </div>\n        )}\n\n        {/* Performance Charts Placeholder */}\n        <div className=\"bg-white rounded-xl shadow-lg p-6\">\n          <h3 className=\"text-xl font-semibold text-gray-800 mb-4\">ðŸ“ˆ Performance Trends</h3>\n          <div className=\"text-center py-12\">\n            <div className=\"text-6xl mb-4\">ðŸ“Š</div>\n            <p className=\"text-gray-600 mb-4\">\n              Advanced performance charts and trend analysis coming soon\n            </p>\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 text-center\">\n              <div className=\"p-4 bg-blue-50 rounded-lg\">\n                <div className=\"text-2xl font-bold text-blue-600\">99.9%</div>\n                <div className=\"text-sm text-gray-600\">Uptime</div>\n              </div>\n              <div className=\"p-4 bg-green-50 rounded-lg\">\n                <div className=\"text-2xl font-bold text-green-600\">&lt; 10s</div>\n                <div className=\"text-sm text-gray-600\">Avg Response Time</div>\n              </div>\n              <div className=\"p-4 bg-purple-50 rounded-lg\">\n                <div className=\"text-2xl font-bold text-purple-600\">24/7</div>\n                <div className=\"text-sm text-gray-600\">Monitoring</div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\web\\pages\\api\\audit\\log.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":13,"column":29,"nodeType":"Identifier","messageId":"undef","endLine":13,"endColumn":36},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async function 'handler'.","line":30,"column":31,"nodeType":"FunctionDeclaration","messageId":"missingReturn","endLine":30,"endColumn":38},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":49,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":49,"endColumn":18,"suggestions":[{"fix":{"range":[1134,1188],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { createLogger, format, transports } from 'winston';\nimport path from 'path';\nimport fs from 'fs/promises';\n\n// Initialize the logger\nlet logger;\n\nasync function getLogger() {\n  if (logger) {\n    return logger;\n  }\n\n  const logsDir = path.join(process.cwd(), 'logs', 'audit');\n  await fs.mkdir(logsDir, { recursive: true });\n\n  const fileTransport = new transports.File({\n    filename: path.join(logsDir, 'audit.log'),\n    format: format.combine(format.timestamp(), format.json()),\n  });\n\n  logger = createLogger({\n    level: 'info',\n    format: format.json(),\n    transports: [fileTransport],\n  });\n\n  return logger;\n}\n\nexport default async function handler(req, res) {\n  if (req.method !== 'POST') {\n    res.setHeader('Allow', ['POST']);\n    return res.status(405).end(`Method ${req.method} Not Allowed`);\n  }\n\n  try {\n    const logData = req.body;\n    const auditLogger = await getLogger();\n\n    // Add a timestamp if it doesn't exist\n    if (!logData.timestamp) {\n      logData.timestamp = new Date().toISOString();\n    }\n\n    auditLogger.info(logData);\n\n    res.status(200).json({ status: 'ok' });\n  } catch (error) {\n    console.error('Error in audit log API route:', error);\n    res.status(500).json({ status: 'error', message: 'Internal Server Error' });\n  }\n}\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\web\\pages\\api\\bot-message.js","messages":[{"ruleId":"import-x/no-unresolved","severity":2,"message":"Unable to resolve path to module 'whatsdex/src/utils/createBotContext'.","line":1,"column":30,"nodeType":"Literal","messageId":"unresolved","endLine":1,"endColumn":67},{"ruleId":"import-x/no-unresolved","severity":2,"message":"Unable to resolve path to module 'whatsdex/src/services/WhatsDeXBrain'.","line":2,"column":27,"nodeType":"Literal","messageId":"unresolved","endLine":2,"endColumn":64},{"ruleId":"import-x/no-unresolved","severity":2,"message":"Unable to resolve path to module 'whatsdex/context'.","line":3,"column":29,"nodeType":"Literal","messageId":"unresolved","endLine":3,"endColumn":47},{"ruleId":"import-x/prefer-default-export","severity":2,"message":"Prefer default export on a file with single export.","line":6,"column":1,"nodeType":"ExportNamedDeclaration","messageId":"single","endLine":23,"endColumn":2},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":20,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":20,"endColumn":18,"suggestions":[{"fix":{"range":[860,918],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import createBotContext from 'whatsdex/src/utils/createBotContext';\nimport WhatsDeXBrain from 'whatsdex/src/services/WhatsDeXBrain';\nimport originalContext from 'whatsdex/context'; // Assuming context.js is in the root\n\n// This function will be called by the BullMQ worker\nexport async function processWebhookMessage(incomingMessage, requestInfo) {\n  try {\n    // Reconstruct the ctx object\n    // Pass null for botInstance as it's not available here, and originalContext\n    const ctx = await createBotContext(null, incomingMessage, originalContext, requestInfo);\n\n    // Initialize WhatsDeXBrain with a placeholder bot and the original context\n    const brain = new WhatsDeXBrain(null, originalContext);\n\n    // Process the message with the brain\n    await brain.processMessage(ctx);\n\n    return { status: 'Received and Processed' };\n  } catch (error) {\n    console.error('Error processing webhook message:', error);\n    throw new Error('Failed to process webhook message');\n  }\n}\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\web\\pages\\api\\login.js","messages":[{"ruleId":"import-x/no-extraneous-dependencies","severity":2,"message":"'jsonwebtoken' should be listed in the project's dependencies. Run 'npm i jsonwebtoken' to add it","line":1,"column":1,"nodeType":"ImportDeclaration","messageId":"missing","endLine":1,"endColumn":32},{"ruleId":"import/no-extraneous-dependencies","message":"Definition for rule 'import/no-extraneous-dependencies' was not found.","line":1,"column":33,"endLine":1,"endColumn":89,"severity":2,"nodeType":null},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":13,"column":9,"nodeType":"Identifier","messageId":"undef","endLine":13,"endColumn":16}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import jwt from 'jsonwebtoken'; // eslint-disable-line import/no-extraneous-dependencies\n\nexport default function handler(req, res) {\n  if (req.method === 'POST') {\n    const { email, password } = req.body;\n\n    // In a real application, you would validate these credentials against a database\n    // For this example, we'll use hardcoded values\n    if (email === 'admin@example.com' && password === 'password') {\n      // Generate a JWT token\n      const token = jwt.sign(\n        { userId: 'admin', role: 'admin' },\n        process.env.JWT_SECRET || 'your-jwt-secret-key',\n        { expiresIn: '1h' }\n      );\n\n      res.status(200).json({ success: true, token });\n    } else {\n      res.status(401).json({ success: false, message: 'Invalid credentials' });\n    }\n  } else {\n    res.setHeader('Allow', ['POST']);\n    res.status(405).end(`Method ${req.method} Not Allowed`);\n  }\n}\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\web\\pages\\api\\send.js","messages":[{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async function 'handler'.","line":1,"column":31,"nodeType":"FunctionDeclaration","messageId":"missingReturn","endLine":1,"endColumn":38},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":9,"column":37,"nodeType":"Identifier","messageId":"undef","endLine":9,"endColumn":44},{"ruleId":"no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":17,"column":12,"nodeType":"Identifier","messageId":"unusedVar","endLine":17,"endColumn":17}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"export default async function handler(req, res) {\n  if (req.method !== 'POST') {\n    return res.status(405).json({ message: 'Method not allowed' });\n  }\n\n  const { to, message } = req.body;\n\n  try {\n    const response = await fetch(`${process.env.BOT_SERVICE_URL}/send`, {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({ to, message }),\n    });\n\n    const data = await response.json();\n    res.status(response.status).json(data);\n  } catch (error) {\n    res.status(500).json({ error: 'Failed to send message' });\n  }\n}\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\web\\pages\\api\\users.js","messages":[{"ruleId":"import-x/no-extraneous-dependencies","severity":2,"message":"'@prisma/client' should be listed in the project's dependencies. Run 'npm i @prisma/client' to add it","line":1,"column":1,"nodeType":"ImportDeclaration","messageId":"missing","endLine":1,"endColumn":47},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":51,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":51,"endColumn":20,"suggestions":[{"fix":{"range":[1835,1882],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { PrismaClient } from '@prisma/client';\n\nconst prisma = new PrismaClient();\n\nexport default async function handle(req, res) {\n  if (req.method === 'GET') {\n    try {\n      const users = await prisma.user.findMany({\n        select: {\n          id: true,\n          name: true,\n          email: true,\n          phone: true,\n          avatar: true,\n          premium: true, // This will be mapped to 'plan'\n          banned: true, // This will be mapped to 'status'\n          createdAt: true, // This will be mapped to 'joinDate'\n          lastActivity: true, // This will be mapped to 'lastActive'\n          commands: {\n            select: {\n              id: true,\n            },\n          }, // This will be used to calculate 'commandsUsed'\n          aiRequests: true, // Assuming this is a field in your User model\n          totalSpent: true, // Assuming this is a field in your User model\n          level: true,\n          xp: true,\n        },\n      });\n\n      // Map the database fields to the fields expected by the frontend\n      const formattedUsers = users.map(user => ({\n        id: user.id,\n        name: user.name || 'N/A',\n        email: user.email || 'N/A',\n        phone: user.phone || 'N/A',\n        avatar: user.avatar || `https://api.dicebear.com/7.x/avataaars/svg?seed=${user.id}`,\n        plan: user.premium ? 'pro' : 'free', // Example mapping\n        status: user.banned ? 'banned' : 'active', // Example mapping\n        joinDate: user.createdAt,\n        lastActive: user.lastActivity,\n        commandsUsed: user.commands.length,\n        aiRequests: user.aiRequests || 0, // Default value if not present\n        totalSpent: user.totalSpent || 0, // Default value if not present\n        level: user.level,\n        xp: user.xp,\n      }));\n\n      res.status(200).json(formattedUsers);\n    } catch (error) {\n      console.error('Failed to fetch users:', error);\n      res.status(500).json({ error: 'An error occurred while fetching users.' });\n    } finally {\n      await prisma.$disconnect();\n    }\n  } else {\n    res.setHeader('Allow', ['GET']);\n    res.status(405).end(`Method ${req.method} Not Allowed`);\n  }\n}\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\web\\pages\\auth.js","messages":[{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":25,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":25,"endColumn":18,"suggestions":[{"fix":{"range":[1027,1078],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":27,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":27,"endColumn":20,"suggestions":[{"fix":{"range":[1105,1154],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'err' is defined but never used.","line":87,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":87,"endColumn":17},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":111,"column":28,"nodeType":"Identifier","messageId":"undef","endLine":111,"endColumn":35},{"ruleId":"react/jsx-filename-extension","severity":2,"message":"JSX not allowed in files with extension '.js'","line":177,"column":5,"nodeType":"JSXElement","messageId":"noJSXWithExtension","endLine":422,"endColumn":11},{"ruleId":"react/button-has-type","severity":2,"message":"Missing an explicit type attribute for button","line":233,"column":15,"nodeType":"JSXElement","messageId":"missingType","endLine":239,"endColumn":24},{"ruleId":"react/button-has-type","severity":2,"message":"Missing an explicit type attribute for button","line":243,"column":15,"nodeType":"JSXElement","messageId":"missingType","endLine":248,"endColumn":24},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":278,"column":19,"nodeType":"JSXOpeningElement","endLine":278,"endColumn":94},{"ruleId":"react/button-has-type","severity":2,"message":"Missing an explicit type attribute for button","line":282,"column":19,"nodeType":"JSXElement","messageId":"missingType","endLine":287,"endColumn":28},{"ruleId":"react/button-has-type","severity":2,"message":"Missing an explicit type attribute for button","line":288,"column":19,"nodeType":"JSXElement","messageId":"missingType","endLine":293,"endColumn":28},{"ruleId":"react/button-has-type","severity":2,"message":"Missing an explicit type attribute for button","line":335,"column":19,"nodeType":"JSXElement","messageId":"missingType","endLine":340,"endColumn":28},{"ruleId":"react/button-has-type","severity":2,"message":"Missing an explicit type attribute for button","line":342,"column":21,"nodeType":"JSXElement","messageId":"missingType","endLine":347,"endColumn":30},{"ruleId":"jsx-a11y/label-has-associated-control","severity":2,"message":"A form label must be associated with a control.","line":379,"column":13,"nodeType":"JSXOpeningElement","endLine":379,"endColumn":62}],"suppressedMessages":[],"errorCount":9,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect, useRef, useCallback } from 'react';\nimport Head from 'next/head';\nimport io from 'socket.io-client';\n\nexport default function AuthPage() {\n  const [connectionStatus, setConnectionStatus] = useState('disconnected');\n  const [qrCode, setQrCode] = useState(null);\n  const [pairingCode, setPairingCode] = useState(null);\n  const [connectionProgress, setConnectionProgress] = useState(0);\n  const [connectionTime, setConnectionTime] = useState(0);\n  const [retryCount, setRetryCount] = useState(0);\n  const [analytics, setAnalytics] = useState({});\n  const [selectedMethod, setSelectedMethod] = useState('qr');\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [voiceEnabled, setVoiceEnabled] = useState(false);\n\n  const socketRef = useRef();\n  const timerRef = useRef();\n  const startTimeRef = useRef();\n\n  const playVoiceCode = useCallback(async voiceData => {\n    try {\n      // In a real implementation, this would play the audio\n      console.log('Playing voice code:', voiceData.text);\n    } catch (err) {\n      console.error('Failed to play voice code:', err);\n    }\n  }, []);\n\n  const handleConnectionStatus = useCallback(status => {\n    setConnectionStatus(status.status);\n    setRetryCount(status.retryCount || 0);\n\n    if (status.status === 'connecting' && !startTimeRef.current) {\n      startTimeRef.current = Date.now();\n      timerRef.current = setInterval(() => {\n        setConnectionTime(Date.now() - startTimeRef.current);\n      }, 1000);\n    } else if (status.status === 'connected') {\n      if (timerRef.current) {\n        clearInterval(timerRef.current);\n      }\n    }\n  }, []);\n\n  const handleQRCode = useCallback(data => {\n    setQrCode(data);\n    setError(null);\n  }, []);\n\n  const handlePairingCode = useCallback(\n    data => {\n      setPairingCode(data);\n      setError(null);\n\n      // Auto-play voice if enabled\n      if (voiceEnabled && data.voice) {\n        playVoiceCode(data.voice);\n      }\n    },\n    [voiceEnabled, playVoiceCode]\n  );\n\n  const handleConnectionProgress = useCallback(progress => {\n    setConnectionProgress(progress);\n  }, []);\n\n  const handleAnalyticsUpdate = useCallback(data => {\n    setAnalytics(data);\n  }, []);\n\n  const handleError = useCallback(err => {\n    setError(err.message);\n    setIsLoading(false);\n  }, []);\n\n  const startConnection = useCallback(async () => {\n    setIsLoading(true);\n    setError(null);\n\n    try {\n      socketRef.current.emit('start_connection', {\n        method: selectedMethod,\n        voiceEnabled,\n      });\n    } catch (err) {\n      setError('Failed to start connection process');\n      setIsLoading(false);\n    }\n  }, [selectedMethod, voiceEnabled]);\n\n  const stopConnection = useCallback(() => {\n    socketRef.current.emit('stop_connection');\n    setIsLoading(false);\n    if (timerRef.current) {\n      clearInterval(timerRef.current);\n    }\n  }, []);\n\n  const refreshQR = useCallback(() => {\n    socketRef.current.emit('refresh_qr');\n  }, []);\n\n  const refreshPairingCode = useCallback(() => {\n    socketRef.current.emit('refresh_pairing_code');\n  }, []);\n\n  useEffect(() => {\n    // Initialize socket connection\n    socketRef.current = io(process.env.NEXT_PUBLIC_SOCKET_URL || 'http://localhost:3000');\n\n    // Socket event listeners\n    socketRef.current.on('connection_status', handleConnectionStatus);\n    socketRef.current.on('qr_code', handleQRCode);\n    socketRef.current.on('pairing_code', handlePairingCode);\n    socketRef.current.on('connection_progress', handleConnectionProgress);\n    socketRef.current.on('analytics_update', handleAnalyticsUpdate);\n    socketRef.current.on('error', handleError);\n\n    // Request initial status\n    socketRef.current.emit('get_status');\n\n    return () => {\n      if (socketRef.current) {\n        socketRef.current.disconnect();\n      }\n      if (timerRef.current) {\n        clearInterval(timerRef.current);\n      }\n    };\n  }, [\n    handleConnectionStatus,\n    handleQRCode,\n    handlePairingCode,\n    handleConnectionProgress,\n    handleAnalyticsUpdate,\n    handleError,\n  ]);\n  const formatTime = ms => {\n    const seconds = Math.floor(ms / 1000);\n    const minutes = Math.floor(seconds / 60);\n    return `${minutes}:${(seconds % 60).toString().padStart(2, '0')}`;\n  };\n\n  const getStatusColor = status => {\n    switch (status) {\n      case 'connected':\n        return 'text-green-600 bg-green-100';\n      case 'connecting':\n        return 'text-blue-600 bg-blue-100';\n      case 'disconnected':\n        return 'text-red-600 bg-red-100';\n      case 'error':\n        return 'text-red-600 bg-red-100';\n      default:\n        return 'text-gray-600 bg-gray-100';\n    }\n  };\n\n  const getStatusIcon = status => {\n    switch (status) {\n      case 'connected':\n        return 'âœ…';\n      case 'connecting':\n        return 'ðŸ”„';\n      case 'disconnected':\n        return 'âŒ';\n      case 'error':\n        return 'âš ï¸';\n      default:\n        return 'â³';\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100\">\n      <Head>\n        <title>Ultra-Smart WhatsApp Authentication</title>\n        <meta name=\"description\" content=\"Revolutionary WhatsApp bot authentication system\" />\n        <link rel=\"icon\" href=\"/favicon.ico\" />\n      </Head>\n\n      <div className=\"container mx-auto px-4 py-8\">\n        {/* Header */}\n        <div className=\"text-center mb-8\">\n          <h1 className=\"text-4xl font-bold text-gray-900 mb-2\">\n            ðŸ” Ultra-Smart WhatsApp Authentication\n          </h1>\n          <p className=\"text-lg text-gray-600\">\n            Revolutionary connection system with AI-powered intelligence\n          </p>\n        </div>\n\n        {/* Connection Status Card */}\n        <div className=\"bg-white rounded-xl shadow-lg p-6 mb-6\">\n          <div className=\"flex items-center justify-between mb-4\">\n            <h2 className=\"text-2xl font-semibold text-gray-800\">Connection Status</h2>\n            <div\n              className={`px-4 py-2 rounded-full text-sm font-medium ${getStatusColor(connectionStatus)}`}\n            >\n              {getStatusIcon(connectionStatus)}{' '}\n              {connectionStatus.charAt(0).toUpperCase() + connectionStatus.slice(1)}\n            </div>\n          </div>\n\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4\">\n            <div className=\"text-center\">\n              <div className=\"text-2xl font-bold text-blue-600\">{formatTime(connectionTime)}</div>\n              <div className=\"text-sm text-gray-500\">Connection Time</div>\n            </div>\n            <div className=\"text-center\">\n              <div className=\"text-2xl font-bold text-orange-600\">{retryCount}</div>\n              <div className=\"text-sm text-gray-500\">Retry Attempts</div>\n            </div>\n            <div className=\"text-center\">\n              <div className=\"text-2xl font-bold text-green-600\">{connectionProgress}%</div>\n              <div className=\"text-sm text-gray-500\">Progress</div>\n            </div>\n          </div>\n\n          {/* Progress Bar */}\n          <div className=\"w-full bg-gray-200 rounded-full h-3 mb-4\">\n            <div\n              className=\"bg-blue-600 h-3 rounded-full transition-all duration-300\"\n              style={{ width: `${connectionProgress}%` }}\n            />\n          </div>\n\n          {/* Control Buttons */}\n          <div className=\"flex flex-wrap gap-3 justify-center\">\n            {connectionStatus === 'disconnected' && (\n              <button\n                onClick={startConnection}\n                disabled={isLoading}\n                className=\"bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white px-6 py-3 rounded-lg font-medium transition-colors\"\n              >\n                {isLoading ? 'ðŸ”„ Starting...' : 'ðŸš€ Start Connection'}\n              </button>\n            )}\n\n            {connectionStatus === 'connecting' && (\n              <button\n                onClick={stopConnection}\n                className=\"bg-red-600 hover:bg-red-700 text-white px-6 py-3 rounded-lg font-medium transition-colors\"\n              >\n                ðŸ›‘ Stop Connection\n              </button>\n            )}\n\n            {connectionStatus === 'connected' && (\n              <div className=\"text-center text-green-600 font-medium\">\n                âœ… Successfully Connected!\n              </div>\n            )}\n          </div>\n        </div>\n\n        {/* Authentication Methods */}\n        <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6\">\n          {/* QR Code Method */}\n          <div className=\"bg-white rounded-xl shadow-lg p-6\">\n            <div className=\"flex items-center justify-between mb-4\">\n              <h3 className=\"text-xl font-semibold text-gray-800\">ðŸ“± QR Code</h3>\n              <input\n                type=\"radio\"\n                name=\"method\"\n                value=\"qr\"\n                checked={selectedMethod === 'qr'}\n                onChange={e => setSelectedMethod(e.target.value)}\n                className=\"w-4 h-4 text-blue-600\"\n              />\n            </div>\n\n            {selectedMethod === 'qr' && qrCode && (\n              <div className=\"text-center\">\n                <div className=\"bg-gray-50 p-4 rounded-lg mb-4\">\n                  <img src={qrCode.qr} alt=\"QR Code\" className=\"mx-auto max-w-full h-auto\" />\n                </div>\n\n                <div className=\"flex gap-2 justify-center mb-4\">\n                  <button\n                    onClick={refreshQR}\n                    className=\"bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-lg text-sm transition-colors\"\n                  >\n                    ðŸ”„ Refresh QR\n                  </button>\n                  <button\n                    onClick={() => window.open(qrCode.qr, '_blank')}\n                    className=\"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg text-sm transition-colors\"\n                  >\n                    ðŸ“± Open in App\n                  </button>\n                </div>\n\n                <div className=\"text-sm text-gray-600\">\n                  <p>ðŸ“± Open WhatsApp on your phone</p>\n                  <p>ðŸ“· Scan this QR code</p>\n                  <p>â° Auto-refreshes every 45 seconds</p>\n                </div>\n              </div>\n            )}\n\n            {selectedMethod === 'qr' && !qrCode && (\n              <div className=\"text-center text-gray-500 py-8\">\n                Select QR Code method and start connection to generate QR code\n              </div>\n            )}\n          </div>\n\n          {/* Pairing Code Method */}\n          <div className=\"bg-white rounded-xl shadow-lg p-6\">\n            <div className=\"flex items-center justify-between mb-4\">\n              <h3 className=\"text-xl font-semibold text-gray-800\">ðŸ”¢ Pairing Code</h3>\n              <input\n                type=\"radio\"\n                name=\"method\"\n                value=\"pairing\"\n                checked={selectedMethod === 'pairing'}\n                onChange={e => setSelectedMethod(e.target.value)}\n                className=\"w-4 h-4 text-blue-600\"\n              />\n            </div>\n\n            {selectedMethod === 'pairing' && pairingCode && (\n              <div className=\"text-center\">\n                <div className=\"bg-gray-50 p-6 rounded-lg mb-4\">\n                  <div className=\"text-3xl font-mono font-bold text-blue-600 mb-2\">\n                    {pairingCode.phonetic}\n                  </div>\n                  <div className=\"text-lg font-mono text-gray-600\">{pairingCode.alphanumeric}</div>\n                </div>\n\n                <div className=\"flex gap-2 justify-center mb-4\">\n                  <button\n                    onClick={refreshPairingCode}\n                    className=\"bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-lg text-sm transition-colors\"\n                  >\n                    ðŸ”„ New Code\n                  </button>\n                  {pairingCode.voice && (\n                    <button\n                      onClick={() => playVoiceCode(pairingCode.voice)}\n                      className=\"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg text-sm transition-colors\"\n                    >\n                      ðŸ”Š Play Voice\n                    </button>\n                  )}\n                </div>\n\n                <div className=\"text-sm text-gray-600\">\n                  <p>ðŸ“± Open WhatsApp on your phone</p>\n                  <p>ðŸ”— Go to Linked Devices</p>\n                  <p>ðŸ”¢ Enter the pairing code above</p>\n                  <p>â° Code expires in 5 minutes</p>\n                </div>\n              </div>\n            )}\n\n            {selectedMethod === 'pairing' && !pairingCode && (\n              <div className=\"text-center text-gray-500 py-8\">\n                Select Pairing Code method and start connection to generate code\n              </div>\n            )}\n          </div>\n        </div>\n\n        {/* Settings */}\n        <div className=\"bg-white rounded-xl shadow-lg p-6 mb-6\">\n          <h3 className=\"text-xl font-semibold text-gray-800 mb-4\">âš™ï¸ Settings</h3>\n          <div className=\"flex items-center gap-3\">\n            <input\n              type=\"checkbox\"\n              id=\"voice\"\n              checked={voiceEnabled}\n              onChange={e => setVoiceEnabled(e.target.checked)}\n              className=\"w-4 h-4 text-blue-600\"\n            />\n            <label htmlFor=\"voice\" className=\"text-gray-700\">\n              ðŸ”Š Enable voice guidance for pairing codes\n            </label>\n          </div>\n        </div>\n\n        {/* Analytics Dashboard */}\n        <div className=\"bg-white rounded-xl shadow-lg p-6\">\n          <h3 className=\"text-xl font-semibold text-gray-800 mb-4\">ðŸ“Š Analytics</h3>\n          <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\n            <div className=\"text-center\">\n              <div className=\"text-2xl font-bold text-blue-600\">\n                {analytics.totalConnections || 0}\n              </div>\n              <div className=\"text-sm text-gray-500\">Total Connections</div>\n            </div>\n            <div className=\"text-center\">\n              <div className=\"text-2xl font-bold text-green-600\">{analytics.successRate || 0}%</div>\n              <div className=\"text-sm text-gray-500\">Success Rate</div>\n            </div>\n            <div className=\"text-center\">\n              <div className=\"text-2xl font-bold text-orange-600\">\n                {analytics.averageTime || 0}s\n              </div>\n              <div className=\"text-sm text-gray-500\">Avg Connection Time</div>\n            </div>\n            <div className=\"text-center\">\n              <div className=\"text-2xl font-bold text-purple-600\">{analytics.activeQRs || 0}</div>\n              <div className=\"text-sm text-gray-500\">Active QR Codes</div>\n            </div>\n          </div>\n        </div>\n\n        {/* Error Display */}\n        {error && (\n          <div className=\"bg-red-50 border border-red-200 rounded-lg p-4 mt-6\">\n            <div className=\"flex items-center\">\n              <div className=\"text-red-600 mr-2\">âš ï¸</div>\n              <div className=\"text-red-800\">{error}</div>\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\web\\pages\\index.js","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'LineChart' is defined but never used.","line":14,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":14,"endColumn":12,"suggestions":[{"messageId":"removeVar","data":{"varName":"LineChart"},"fix":{"range":[272,282],"text":""},"desc":"Remove unused variable 'LineChart'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Line' is defined but never used.","line":15,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":15,"endColumn":7,"suggestions":[{"messageId":"removeVar","data":{"varName":"Line"},"fix":{"range":[281,289],"text":""},"desc":"Remove unused variable 'Line'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'AreaChart' is defined but never used.","line":16,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":16,"endColumn":12,"suggestions":[{"messageId":"removeVar","data":{"varName":"AreaChart"},"fix":{"range":[289,302],"text":""},"desc":"Remove unused variable 'AreaChart'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Area' is defined but never used.","line":17,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":17,"endColumn":7,"suggestions":[{"messageId":"removeVar","data":{"varName":"Area"},"fix":{"range":[302,310],"text":""},"desc":"Remove unused variable 'Area'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'BarChart' is defined but never used.","line":18,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":18,"endColumn":11,"suggestions":[{"messageId":"removeVar","data":{"varName":"BarChart"},"fix":{"range":[310,322],"text":""},"desc":"Remove unused variable 'BarChart'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Bar' is defined but never used.","line":19,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":19,"endColumn":6,"suggestions":[{"messageId":"removeVar","data":{"varName":"Bar"},"fix":{"range":[322,329],"text":""},"desc":"Remove unused variable 'Bar'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'XAxis' is defined but never used.","line":20,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":20,"endColumn":8,"suggestions":[{"messageId":"removeVar","data":{"varName":"XAxis"},"fix":{"range":[329,338],"text":""},"desc":"Remove unused variable 'XAxis'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'YAxis' is defined but never used.","line":21,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":21,"endColumn":8,"suggestions":[{"messageId":"removeVar","data":{"varName":"YAxis"},"fix":{"range":[338,347],"text":""},"desc":"Remove unused variable 'YAxis'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'CartesianGrid' is defined but never used.","line":22,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":22,"endColumn":16,"suggestions":[{"messageId":"removeVar","data":{"varName":"CartesianGrid"},"fix":{"range":[347,364],"text":""},"desc":"Remove unused variable 'CartesianGrid'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Tooltip' is defined but never used.","line":23,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":23,"endColumn":10,"suggestions":[{"messageId":"removeVar","data":{"varName":"Tooltip"},"fix":{"range":[364,375],"text":""},"desc":"Remove unused variable 'Tooltip'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'ResponsiveContainer' is defined but never used.","line":24,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":24,"endColumn":22,"suggestions":[{"messageId":"removeVar","data":{"varName":"ResponsiveContainer"},"fix":{"range":[375,398],"text":""},"desc":"Remove unused variable 'ResponsiveContainer'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'PieChart' is defined but never used.","line":25,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":25,"endColumn":11,"suggestions":[{"messageId":"removeVar","data":{"varName":"PieChart"},"fix":{"range":[398,410],"text":""},"desc":"Remove unused variable 'PieChart'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Pie' is defined but never used.","line":26,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":26,"endColumn":6,"suggestions":[{"messageId":"removeVar","data":{"varName":"Pie"},"fix":{"range":[410,417],"text":""},"desc":"Remove unused variable 'Pie'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Cell' is defined but never used.","line":27,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":27,"endColumn":7,"suggestions":[{"messageId":"removeVar","data":{"varName":"Cell"},"fix":{"range":[417,425],"text":""},"desc":"Remove unused variable 'Cell'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'toast' is defined but never used.","line":29,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":29,"endColumn":13,"suggestions":[{"messageId":"removeVar","data":{"varName":"toast"},"fix":{"range":[453,459],"text":""},"desc":"Remove unused variable 'toast'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Toaster' is defined but never used.","line":29,"column":17,"nodeType":"Identifier","messageId":"unusedVar","endLine":29,"endColumn":24,"suggestions":[{"messageId":"removeVar","data":{"varName":"Toaster"},"fix":{"range":[458,471],"text":""},"desc":"Remove unused variable 'Toaster'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'useToast' is defined but never used.","line":30,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":30,"endColumn":18,"suggestions":[{"messageId":"removeVar","data":{"varName":"useToast"},"fix":{"range":[496,541],"text":""},"desc":"Remove unused variable 'useToast'."}]},{"ruleId":"import-x/extensions","severity":2,"message":"Missing file extension for \"@/hooks/use-toast\"","line":30,"column":26,"nodeType":"Literal","messageId":"missing","endLine":30,"endColumn":45},{"ruleId":"import-x/no-unresolved","severity":2,"message":"Unable to resolve path to module '@/hooks/use-toast'.","line":30,"column":26,"nodeType":"Literal","messageId":"unresolved","endLine":30,"endColumn":45},{"ruleId":"import-x/extensions","severity":2,"message":"Missing file extension for \"@/components/ui/button\"","line":31,"column":24,"nodeType":"Literal","messageId":"missing","endLine":31,"endColumn":48},{"ruleId":"import-x/no-unresolved","severity":2,"message":"Unable to resolve path to module '@/components/ui/button'.","line":31,"column":24,"nodeType":"Literal","messageId":"unresolved","endLine":31,"endColumn":48},{"ruleId":"import-x/extensions","severity":2,"message":"Missing file extension for \"@/components/ui/bento-grid\"","line":32,"column":38,"nodeType":"Literal","messageId":"missing","endLine":32,"endColumn":66},{"ruleId":"import-x/no-unresolved","severity":2,"message":"Unable to resolve path to module '@/components/ui/bento-grid'.","line":32,"column":38,"nodeType":"Literal","messageId":"unresolved","endLine":32,"endColumn":66},{"ruleId":"import-x/extensions","severity":2,"message":"Missing file extension for \"@/components/ui/shadcn-io/area-chart-01\"","line":33,"column":38,"nodeType":"Literal","messageId":"missing","endLine":33,"endColumn":79},{"ruleId":"import-x/no-unresolved","severity":2,"message":"Unable to resolve path to module '@/components/ui/shadcn-io/area-chart-01'.","line":33,"column":38,"nodeType":"Literal","messageId":"unresolved","endLine":33,"endColumn":79},{"ruleId":"import-x/extensions","severity":2,"message":"Missing file extension for \"@/components/ui/badge\"","line":34,"column":23,"nodeType":"Literal","messageId":"missing","endLine":34,"endColumn":46},{"ruleId":"import-x/no-unresolved","severity":2,"message":"Unable to resolve path to module '@/components/ui/badge'.","line":34,"column":23,"nodeType":"Literal","messageId":"unresolved","endLine":34,"endColumn":46},{"ruleId":"import-x/extensions","severity":2,"message":"Missing file extension for \"@/components/common/Layout\"","line":35,"column":20,"nodeType":"Literal","messageId":"missing","endLine":35,"endColumn":48},{"ruleId":"import-x/no-unresolved","severity":2,"message":"Unable to resolve path to module '@/components/common/Layout'.","line":35,"column":20,"nodeType":"Literal","messageId":"unresolved","endLine":35,"endColumn":48},{"ruleId":"import-x/extensions","severity":2,"message":"Missing file extension for \"@/lib/utils\"","line":36,"column":20,"nodeType":"Literal","messageId":"missing","endLine":36,"endColumn":33},{"ruleId":"import-x/no-unresolved","severity":2,"message":"Unable to resolve path to module '@/lib/utils'.","line":36,"column":20,"nodeType":"Literal","messageId":"unresolved","endLine":36,"endColumn":33},{"ruleId":"import-x/extensions","severity":2,"message":"Missing file extension for \"@/socket\"","line":37,"column":27,"nodeType":"Literal","messageId":"missing","endLine":37,"endColumn":37},{"ruleId":"import-x/no-unresolved","severity":2,"message":"Unable to resolve path to module '@/socket'.","line":37,"column":27,"nodeType":"Literal","messageId":"unresolved","endLine":37,"endColumn":37},{"ruleId":"import-x/extensions","severity":2,"message":"Missing file extension for \"@/components/ui/animated-list\"","line":38,"column":30,"nodeType":"Literal","messageId":"missing","endLine":38,"endColumn":61},{"ruleId":"import-x/no-unresolved","severity":2,"message":"Unable to resolve path to module '@/components/ui/animated-list'.","line":38,"column":30,"nodeType":"Literal","messageId":"unresolved","endLine":38,"endColumn":61},{"ruleId":"import-x/extensions","severity":2,"message":"Missing file extension for \"@/components/ui/card\"","line":39,"column":58,"nodeType":"Literal","messageId":"missing","endLine":39,"endColumn":80},{"ruleId":"import-x/no-unresolved","severity":2,"message":"Unable to resolve path to module '@/components/ui/card'.","line":39,"column":58,"nodeType":"Literal","messageId":"unresolved","endLine":39,"endColumn":80},{"ruleId":"import-x/extensions","severity":2,"message":"Missing file extension for \"@/components/ui/number-ticker\"","line":40,"column":30,"nodeType":"Literal","messageId":"missing","endLine":40,"endColumn":61},{"ruleId":"import-x/no-unresolved","severity":2,"message":"Unable to resolve path to module '@/components/ui/number-ticker'.","line":40,"column":30,"nodeType":"Literal","messageId":"unresolved","endLine":40,"endColumn":61},{"ruleId":"import-x/extensions","severity":2,"message":"Missing file extension for \"@/components/ui/skeleton\"","line":41,"column":26,"nodeType":"Literal","messageId":"missing","endLine":41,"endColumn":52},{"ruleId":"import-x/no-unresolved","severity":2,"message":"Unable to resolve path to module '@/components/ui/skeleton'.","line":41,"column":26,"nodeType":"Literal","messageId":"unresolved","endLine":41,"endColumn":52},{"ruleId":"react/prop-types","severity":2,"message":"'activity' is missing in props validation","line":96,"column":32,"nodeType":"Property","messageId":"missingPropType","endLine":96,"endColumn":40},{"ruleId":"react/prop-types","severity":2,"message":"'activity.status' is missing in props validation","line":97,"column":57,"nodeType":"Identifier","messageId":"missingPropType","endLine":97,"endColumn":63},{"ruleId":"no-unused-vars","severity":1,"message":"'StatusIcon' is assigned a value but never used.","line":98,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":98,"endColumn":19,"suggestions":[{"messageId":"removeVar","data":{"varName":"StatusIcon"},"fix":{"range":[2431,2468],"text":""},"desc":"Remove unused variable 'StatusIcon'."}]},{"ruleId":"react/jsx-filename-extension","severity":2,"message":"JSX not allowed in files with extension '.js'","line":101,"column":5,"nodeType":"JSXElement","messageId":"noJSXWithExtension","endLine":126,"endColumn":12},{"ruleId":"react/prop-types","severity":2,"message":"'activity.user' is missing in props validation","line":103,"column":62,"nodeType":"Identifier","messageId":"missingPropType","endLine":103,"endColumn":66},{"ruleId":"react/prop-types","severity":2,"message":"'activity.action' is missing in props validation","line":109,"column":73,"nodeType":"Identifier","messageId":"missingPropType","endLine":109,"endColumn":79},{"ruleId":"react/prop-types","severity":2,"message":"'activity.timestamp' is missing in props validation","line":113,"column":23,"nodeType":"Identifier","messageId":"missingPropType","endLine":113,"endColumn":32},{"ruleId":"react/prop-types","severity":2,"message":"'activity.timestamp.toLocaleTimeString' is missing in props validation","line":113,"column":33,"nodeType":"Identifier","messageId":"missingPropType","endLine":113,"endColumn":51},{"ruleId":"react/prop-types","severity":2,"message":"'activity.duration' is missing in props validation","line":118,"column":21,"nodeType":"Identifier","messageId":"missingPropType","endLine":118,"endColumn":29},{"ruleId":"react/prop-types","severity":2,"message":"'activity.duration' is missing in props validation","line":121,"column":25,"nodeType":"Identifier","messageId":"missingPropType","endLine":121,"endColumn":33},{"ruleId":"no-unused-vars","severity":1,"message":"'StatCard' is defined but never used.","line":130,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":130,"endColumn":18,"suggestions":[{"messageId":"removeVar","data":{"varName":"StatCard"},"fix":{"range":[3543,4298],"text":""},"desc":"Remove unused variable 'StatCard'."}]},{"ruleId":"react/prop-types","severity":2,"message":"'title' is missing in props validation","line":130,"column":21,"nodeType":"Property","messageId":"missingPropType","endLine":130,"endColumn":26},{"ruleId":"react/prop-types","severity":2,"message":"'value' is missing in props validation","line":130,"column":28,"nodeType":"Property","messageId":"missingPropType","endLine":130,"endColumn":33},{"ruleId":"react/prop-types","severity":2,"message":"'change' is missing in props validation","line":130,"column":35,"nodeType":"Property","messageId":"missingPropType","endLine":130,"endColumn":41},{"ruleId":"react/prop-types","severity":2,"message":"'changeType' is missing in props validation","line":130,"column":43,"nodeType":"Property","messageId":"missingPropType","endLine":130,"endColumn":53},{"ruleId":"react/prop-types","severity":2,"message":"'icon' is missing in props validation","line":130,"column":55,"nodeType":"Property","messageId":"missingPropType","endLine":130,"endColumn":65},{"ruleId":"react/prop-types","severity":2,"message":"'variant' is missing in props validation","line":130,"column":67,"nodeType":"Property","messageId":"missingPropType","endLine":130,"endColumn":86},{"ruleId":"no-unused-vars","severity":1,"message":"'stats' is assigned a value but never used.","line":153,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":153,"endColumn":15,"suggestions":[{"messageId":"removeVar","data":{"varName":"stats"},"fix":{"range":[4395,4400],"text":""},"desc":"Remove unused variable 'stats'."}]},{"ruleId":"no-promise-executor-return","severity":2,"message":"Return values from promise executor functions cannot be read.","line":184,"column":36,"nodeType":"CallExpression","messageId":"returnsValue","endLine":184,"endColumn":61,"suggestions":[{"messageId":"wrapBraces","fix":{"range":[5198,5223],"text":"{setTimeout(resolve, 2000)}"},"desc":"Wrap the expression in `{}`."}]}],"suppressedMessages":[],"errorCount":40,"fatalErrorCount":0,"warningCount":20,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect } from 'react';\nimport { motion } from 'framer-motion';\nimport {\n  ChartBarIcon,\n  UsersIcon,\n  CpuChipIcon,\n  SignalIcon,\n  ClockIcon,\n  CheckCircleIcon,\n  ExclamationTriangleIcon,\n  BoltIcon,\n} from '@heroicons/react/24/outline';\nimport {\n  LineChart,\n  Line,\n  AreaChart,\n  Area,\n  BarChart,\n  Bar,\n  XAxis,\n  YAxis,\n  CartesianGrid,\n  Tooltip,\n  ResponsiveContainer,\n  PieChart,\n  Pie,\n  Cell,\n} from 'recharts';\nimport toast, { Toaster } from 'react-hot-toast';\nimport { useToast } from '@/hooks/use-toast';\nimport { Button } from '@/components/ui/button';\nimport { BentoGrid, BentoCard } from '@/components/ui/bento-grid';\nimport { ChartAreaInteractive } from '@/components/ui/shadcn-io/area-chart-01';\nimport { Badge } from '@/components/ui/badge';\nimport Layout from '@/components/common/Layout';\nimport { cn } from '@/lib/utils';\nimport { getSocket } from '@/socket';\nimport { AnimatedList } from '@/components/ui/animated-list';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { NumberTicker } from '@/components/ui/number-ticker';\nimport { Skeleton } from '@/components/ui/skeleton';\n\nconst getChangeTypeClass = changeType => {\n  switch (changeType) {\n    case 'positive':\n      return 'text-green-600 dark:text-green-400';\n    case 'negative':\n      return 'text-red-600 dark:text-red-400';\n    default:\n      return 'text-secondary-600 dark:text-secondary-400';\n  }\n};\n\n// Activity Status Badge Configuration\nconst getActivityStatusConfig = status => {\n  switch (status) {\n    case 'success':\n      return {\n        variant: 'success',\n        icon: CheckCircleIcon,\n        label: 'Success',\n      };\n    case 'error':\n      return {\n        variant: 'error',\n        icon: ExclamationTriangleIcon,\n        label: 'Error',\n      };\n    case 'processing':\n      return {\n        variant: 'info',\n        icon: ClockIcon,\n        label: 'Processing',\n      };\n    case 'warning':\n      return {\n        variant: 'warning',\n        icon: ExclamationTriangleIcon,\n        label: 'Warning',\n      };\n    case 'fast':\n      return {\n        variant: 'success',\n        icon: BoltIcon,\n        label: 'Fast',\n      };\n    default:\n      return {\n        variant: 'default',\n        icon: SignalIcon,\n        label: 'Unknown',\n      };\n  }\n};\n\nexport function ActivityItem({ activity }) {\n  const statusConfig = getActivityStatusConfig(activity.status);\n  const StatusIcon = statusConfig.icon;\n\n  return (\n    <Card className=\"w-full\">\n      <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n        <CardTitle className=\"text-sm font-medium\">{activity.user}</CardTitle>\n        <Badge variant={statusConfig.variant} className=\"flex-shrink-0\">\n          {statusConfig.label}\n        </Badge>\n      </CardHeader>\n      <CardContent>\n        <p className=\"text-sm text-muted-foreground truncate\">{activity.action}</p>\n        <div className=\"flex items-center gap-3 mt-1 text-xs text-secondary-500 dark:text-secondary-500\">\n          <span className=\"flex items-center gap-1\">\n            <ClockIcon className=\"w-3 h-3\" />\n            {activity.timestamp.toLocaleTimeString([], {\n              hour: '2-digit',\n              minute: '2-digit',\n            })}\n          </span>\n          {activity.duration && (\n            <span className=\"flex items-center gap-1\">\n              <BoltIcon className=\"w-3 h-3\" />\n              {activity.duration}\n            </span>\n          )}\n        </div>\n      </CardContent>\n    </Card>\n  );\n}\n\nfunction StatCard({ title, value, change, changeType, icon: Icon, variant = 'default' }) {\n  return (\n    <Card className={cn('w-full', variant === 'accent' && 'bg-accent/50')}>\n      <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n        <CardTitle className=\"text-sm font-medium\">{title}</CardTitle>\n        <Icon className=\"h-4 w-4 text-muted-foreground\" />\n      </CardHeader>\n      <CardContent>\n        <div className=\"text-2xl font-bold\">\n          <NumberTicker value={value} />\n        </div>\n        {change && (\n          <p className={cn('text-xs text-muted-foreground', getChangeTypeClass(changeType))}>\n            {change} from last month\n          </p>\n        )}\n      </CardContent>\n    </Card>\n  );\n}\n\nexport default function Dashboard() {\n  const [loading, setLoading] = useState(true);\n  const [stats, setStats] = useState(null);\n  const [recentActivity, setRecentActivity] = useState([]);\n\n  useEffect(() => {\n    const socket = getSocket();\n\n    const handleUpdateStats = newStats => {\n      setStats(newStats);\n    };\n\n    const handleNewActivity = newActivity => {\n      setRecentActivity(prevActivity => [newActivity, ...prevActivity]);\n    };\n\n    if (socket) {\n      socket.on('update-stats', handleUpdateStats);\n      socket.on('new-activity', handleNewActivity);\n    }\n\n    return () => {\n      if (socket) {\n        socket.off('update-stats', handleUpdateStats);\n        socket.off('new-activity', handleNewActivity);\n      }\n    };\n  }, []);\n\n  // Simulate data loading\n  useEffect(() => {\n    const loadData = async () => {\n      // Simulate API call\n      await new Promise(resolve => setTimeout(resolve, 2000));\n\n      setStats({\n        totalUsers: 12543,\n        activeUsers: 8921,\n        totalCommands: 45632,\n        aiRequests: 12847,\n        systemUptime: 99.8,\n        responseTime: 245,\n        errorRate: 0.2,\n        cacheHitRate: 94.5,\n      });\n\n      setRecentActivity([\n        {\n          id: 1,\n          type: 'command',\n          user: 'john_doe',\n          action: 'Used /gemini command',\n          timestamp: new Date(Date.now() - 5 * 60 * 1000),\n          status: 'fast',\n          duration: '0.8s',\n        },\n        {\n          id: 2,\n          type: 'ai',\n          user: 'sarah_smith',\n          action: 'Generated image with DALL-E',\n          timestamp: new Date(Date.now() - 12 * 60 * 1000),\n          status: 'success',\n          duration: '4.2s',\n        },\n        {\n          id: 3,\n          type: 'system',\n          user: 'System',\n          action: 'Database backup completed',\n          timestamp: new Date(Date.now() - 25 * 60 * 1000),\n          status: 'success',\n          duration: '15.3s',\n        },\n        {\n          id: 4,\n          type: 'processing',\n          user: 'alex_kim',\n          action: 'Processing video download',\n          timestamp: new Date(Date.now() - 30 * 60 * 1000),\n          status: 'processing',\n          duration: '...',\n        },\n        {\n          id: 5,\n          type: 'warning',\n          user: 'System',\n          action: 'High memory usage detected',\n          timestamp: new Date(Date.now() - 33 * 60 * 1000),\n          status: 'warning',\n          duration: '-',\n        },\n        {\n          id: 6,\n          type: 'error',\n          user: 'mike_jones',\n          action: 'Command execution failed',\n          timestamp: new Date(Date.now() - 35 * 60 * 1000),\n          status: 'error',\n          duration: '0.1s',\n        },\n      ]);\n\n      setLoading(false);\n    };\n\n    loadData();\n  }, []);\n\n  return (\n    <Layout title=\"Dashboard\">\n      <div className=\"space-y-8\">\n        {/* Welcome Section */}\n        <motion.div\n          initial={{ opacity: 0, y: -20 }}\n          animate={{ opacity: 1, y: 0 }}\n          className=\"text-center\"\n        >\n          <h1 className=\"text-4xl font-bold text-secondary-900 dark:text-white mb-2\">\n            Welcome to{' '}\n            <span className=\"bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent\">\n              WhatsDeX\n            </span>\n          </h1>\n          <p className=\"text-lg text-secondary-600 dark:text-secondary-400\">\n            Your AI-powered WhatsApp bot management dashboard\n          </p>\n        </motion.div>\n\n        {/* Stats Grid */}\n        <BentoGrid className=\"grid-cols-1 md:grid-cols-2 lg:grid-cols-4\">\n          <BentoCard className=\"md:col-span-2 lg:col-span-2\">\n            <ChartAreaInteractive />\n          </BentoCard>\n          <BentoCard>\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"text-xl font-bold\">Recent Activity</CardTitle>\n              </CardHeader>\n              <CardContent>\n                {loading ? (\n                  <Skeleton className=\"h-64\" />\n                ) : (\n                  <AnimatedList>\n                    {recentActivity.map(activity => (\n                      <ActivityItem key={activity.id} activity={activity} />\n                    ))}\n                  </AnimatedList>\n                )}\n              </CardContent>\n            </Card>\n          </BentoCard>\n        </BentoGrid>\n\n        {/* Main Content Grid */}\n\n        <BentoGrid className=\"grid-cols-1 lg:grid-cols-3 gap-8\">\n          <BentoCard\n            name=\"Performance Metrics\"\n            description=\"Detailed view of system performance over time.\"\n            Icon={ChartBarIcon}\n            href=\"#\"\n            cta=\"View Report\"\n            className=\"lg:col-span-2\"\n            background={<ChartAreaInteractive />}\n          />\n\n          <BentoCard\n            name=\"Recent Activity\"\n            description=\"Latest user interactions and system events.\"\n            Icon={ClockIcon}\n            href=\"#\"\n            cta=\"View All\"\n            className=\"lg:col-span-1\"\n            background={\n              <Card>\n                <CardHeader>\n                  <CardTitle className=\"text-xl font-bold\">Recent Activity</CardTitle>\n                </CardHeader>\n\n                <CardContent>\n                  {loading ? (\n                    <Skeleton className=\"h-64\" />\n                  ) : (\n                    <AnimatedList>\n                      {recentActivity.map(activity => (\n                        <ActivityItem key={activity.id} activity={activity} />\n                      ))}\n                    </AnimatedList>\n                  )}\n                </CardContent>\n              </Card>\n            }\n          />\n        </BentoGrid>\n\n        {/* Quick Actions */}\n        <Card>\n          <CardHeader>\n            <CardTitle className=\"text-xl font-bold\">Quick Actions</CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\n              <Button variant=\"primary\" className=\"h-20 flex-col space-y-2\">\n                <CpuChipIcon className=\"w-6 h-6\" />\n                <span>AI Settings</span>\n              </Button>\n              <Button variant=\"success\" className=\"h-20 flex-col space-y-2\">\n                <UsersIcon className=\"w-6 h-6\" />\n                <span>Manage Users</span>\n              </Button>\n              <Button variant=\"secondary\" className=\"h-20 flex-col space-y-2\">\n                <ChartBarIcon className=\"w-6 h-6\" />\n                <span>View Analytics</span>\n              </Button>\n              <Button variant=\"ghost\" className=\"h-20 flex-col space-y-2\">\n                <SignalIcon className=\"w-6 h-6\" />\n                <span>System Status</span>\n              </Button>\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n    </Layout>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\web\\pages\\login.js","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'err' is defined but never used.","line":37,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":37,"endColumn":17},{"ruleId":"react/jsx-filename-extension","severity":2,"message":"JSX not allowed in files with extension '.js'","line":43,"column":5,"nodeType":"JSXElement","messageId":"noJSXWithExtension","endLine":99,"endColumn":11},{"ruleId":"jsx-a11y/label-has-associated-control","severity":2,"message":"A form label must be associated with a control.","line":50,"column":13,"nodeType":"JSXOpeningElement","endLine":53,"endColumn":14},{"ruleId":"jsx-a11y/label-has-associated-control","severity":2,"message":"A form label must be associated with a control.","line":69,"column":13,"nodeType":"JSXOpeningElement","endLine":72,"endColumn":14}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState } from 'react';\nimport { useRouter } from 'next/router';\n\nexport default function LoginPage() {\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [error, setError] = useState('');\n  const router = useRouter();\n\n  const handleSubmit = async e => {\n    e.preventDefault();\n    setError('');\n\n    // Basic validation\n    if (!email || !password) {\n      setError('Email and password are required');\n      return;\n    }\n\n    try {\n      const response = await fetch('/api/login', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({ email, password }),\n      });\n\n      const data = await response.json();\n\n      if (response.ok && data.success) {\n        localStorage.setItem('token', data.token);\n        router.push('/admin');\n      } else {\n        setError(data.message || 'Invalid email or password');\n      }\n    } catch (err) {\n      setError('An error occurred. Please try again.');\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen flex items-center justify-center bg-gray-100 dark:bg-gray-900\">\n      <div className=\"max-w-md w-full bg-white dark:bg-gray-800 rounded-lg shadow-lg p-8\">\n        <h1 className=\"text-3xl font-bold text-center text-gray-900 dark:text-white mb-6\">\n          Admin Login\n        </h1>\n        <form onSubmit={handleSubmit} className=\"space-y-6\">\n          <div>\n            <label\n              htmlFor=\"email\"\n              className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\"\n            >\n              Email Address\n            </label>\n            <input\n              id=\"email\"\n              name=\"email\"\n              type=\"email\"\n              autoComplete=\"email\"\n              required\n              value={email}\n              onChange={e => setEmail(e.target.value)}\n              className=\"mt-1 block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm\"\n            />\n          </div>\n\n          <div>\n            <label\n              htmlFor=\"password\"\n              className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\"\n            >\n              Password\n            </label>\n            <input\n              id=\"password\"\n              name=\"password\"\n              type=\"password\"\n              autoComplete=\"current-password\"\n              required\n              value={password}\n              onChange={e => setPassword(e.target.value)}\n              className=\"mt-1 block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm\"\n            />\n          </div>\n\n          {error && <div className=\"text-red-500 text-sm text-center\">{error}</div>}\n\n          <div>\n            <button\n              type=\"submit\"\n              className=\"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500\"\n            >\n              Sign in\n            </button>\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\web\\postcss.config.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":1,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":7}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"module.exports = {\n  plugins: {\n    tailwindcss: {}, // V3 stable config\n    autoprefixer: {},\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\web\\proxy.js","messages":[{"ruleId":"import-x/prefer-default-export","severity":2,"message":"Prefer default export on a file with single export.","line":3,"column":1,"nodeType":"ExportNamedDeclaration","messageId":"single","endLine":5,"endColumn":2},{"ruleId":"no-unused-vars","severity":1,"message":"'request' is defined but never used. Allowed unused args must match /^_/u.","line":3,"column":23,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":30,"suggestions":[{"messageId":"removeVar","data":{"varName":"request"},"fix":{"range":[67,74],"text":""},"desc":"Remove unused variable 'request'."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { NextResponse } from 'next/server';\n\nexport function proxy(request) {\n  return NextResponse.next();\n}\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\web\\socket.js","messages":[{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":11,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":11,"endColumn":16,"suggestions":[{"fix":{"range":[205,247],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":15,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":15,"endColumn":16,"suggestions":[{"fix":{"range":[293,340],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"consistent-return","severity":2,"message":"Arrow function expected no return value.","line":18,"column":3,"nodeType":"ReturnStatement","messageId":"unexpectedReturnValue","endLine":18,"endColumn":17}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { io } from 'socket.io-client';\n\nlet socket;\n\nexport const initSocket = () => {\n  if (socket) return;\n\n  socket = io(); // Assumes the server is on the same host\n\n  socket.on('connect', () => {\n    console.log('Connected to socket server');\n  });\n\n  socket.on('disconnect', () => {\n    console.log('Disconnected from socket server');\n  });\n\n  return socket;\n};\n\nexport const getSocket = () => socket;\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\web\\tailwind.config.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":24,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":31},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":2,"column":26,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":33},{"ruleId":"no-undef","severity":2,"message":"'module' is not defined.","line":5,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":5,"endColumn":7},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":343,"column":13,"nodeType":"Identifier","messageId":"undef","endLine":343,"endColumn":20}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const { fontFamily } = require('tailwindcss/defaultTheme');\nconst { shadcnPlugin } = require('./lib/shadcn-plugin');\n\n/** @type {import('tailwindcss').Config} */\nmodule.exports = {\n  darkMode: ['class'],\n  content: [\n    './pages/**/*.{js,ts,jsx,tsx,mdx}',\n    './components/**/*.{js,ts,jsx,tsx,mdx}',\n    './app/**/*.{js,ts,jsx,tsx,mdx}',\n    './src/**/*.{js,ts,jsx,tsx,mdx}',\n    '../shared/**/*.{js,ts,jsx,tsx,mdx}',\n    './styles/**/*.css',\n  ],\n  theme: {\n    extend: {\n      colors: {\n        primary: {\n          50: '#f0f9ff',\n          100: '#e0f2fe',\n          200: '#bae6fd',\n          300: '#7dd3fc',\n          400: '#38bdf8',\n          500: '#0ea5e9',\n          600: '#0284c7',\n          700: '#0369a1',\n          800: '#075985',\n          900: '#0c4a6e',\n          950: '#082f49',\n        },\n        secondary: {\n          50: '#f8fafc',\n          100: '#f1f5f9',\n          200: '#e2e8f0',\n          300: '#cbd5e1',\n          400: '#94a3b8',\n          500: '#64748b',\n          600: '#475569',\n          700: '#334155',\n          800: '#1e293b',\n          900: '#0f172a',\n          950: '#020617',\n        },\n        success: {\n          50: '#f0fdf4',\n          100: '#dcfce7',\n          200: '#bbf7d0',\n          300: '#86efac',\n          400: '#4ade80',\n          500: '#22c55e',\n          600: '#16a34a',\n          700: '#15803d',\n          800: '#166534',\n          900: '#14532d',\n          950: '#052e16',\n        },\n        warning: {\n          50: '#fffbeb',\n          100: '#fef3c7',\n          200: '#fde68a',\n          300: '#fcd34d',\n          400: '#fbbf24',\n          500: '#f59e0b',\n          600: '#d97706',\n          700: '#b45309',\n          800: '#92400e',\n          900: '#78350f',\n          950: '#451a03',\n        },\n        glass: {\n          50: 'rgba(255, 255, 255, 0.05)',\n          100: 'rgba(255, 255, 255, 0.1)',\n          200: 'rgba(255, 255, 255, 0.15)',\n          300: 'rgba(255, 255, 255, 0.2)',\n          400: 'rgba(255, 255, 255, 0.25)',\n          500: 'rgba(255, 255, 255, 0.3)',\n          600: 'rgba(255, 255, 255, 0.4)',\n          700: 'rgba(255, 255, 255, 0.5)',\n          800: 'rgba(255, 255, 255, 0.6)',\n          900: 'rgba(255, 255, 255, 0.7)',\n        },\n        'glass-dark': {\n          50: 'rgba(0, 0, 0, 0.05)',\n          100: 'rgba(0, 0, 0, 0.1)',\n          200: 'rgba(0, 0, 0, 0.15)',\n          300: 'rgba(0, 0, 0, 0.2)',\n          400: 'rgba(0, 0, 0, 0.25)',\n          500: 'rgba(0, 0, 0, 0.3)',\n          600: 'rgba(0, 0, 0, 0.4)',\n          700: 'rgba(0, 0, 0, 0.5)',\n          800: 'rgba(0, 0, 0, 0.6)',\n          900: 'rgba(0, 0, 0, 0.7)',\n        },\n      },\n      backgroundImage: {\n        'gradient-radial': 'radial-gradient(var(--tw-gradient-stops))',\n        'gradient-conic': 'conic-gradient(from 180deg at 50% 50%, var(--tw-gradient-stops))',\n        'glass-gradient': 'linear-gradient(135deg, rgba(255,255,255,0.1), rgba(255,255,255,0.05))',\n        'glass-gradient-dark': 'linear-gradient(135deg, rgba(0,0,0,0.1), rgba(0,0,0,0.05))',\n      },\n      backdropBlur: {\n        xs: '2px',\n      },\n      boxShadow: {\n        glass: '0 8px 32px 0 rgba(31, 38, 135, 0.37)',\n        'glass-sm': '0 4px 16px 0 rgba(31, 38, 135, 0.2)',\n        'glass-lg': '0 16px 64px 0 rgba(31, 38, 135, 0.5)',\n        neon: '0 0 5px theme(colors.primary), 0 0 10px theme(colors.primary), 0 0 15px theme(colors.primary)',\n      },\n      borderRadius: {\n        '4xl': '2rem',\n        '5xl': '2.5rem',\n        '6xl': '3rem',\n      },\n      keyframes: {\n        fadeIn: {\n          '0%': {\n            opacity: '0',\n          },\n          '100%': {\n            opacity: '1',\n          },\n        },\n        fadeOut: {\n          '0%': {\n            opacity: '1',\n          },\n          '100%': {\n            opacity: '0',\n          },\n        },\n        slideInLeft: {\n          '0%': {\n            transform: 'translateX(-100%)',\n            opacity: '0',\n          },\n          '100%': {\n            transform: 'translateX(0)',\n            opacity: '1',\n          },\n        },\n        slideInRight: {\n          '0%': {\n            transform: 'translateX(100%)',\n            opacity: '0',\n          },\n          '100%': {\n            transform: 'translateX(0)',\n            opacity: '1',\n          },\n        },\n        slideInUp: {\n          '0%': {\n            transform: 'translateY(100%)',\n            opacity: '0',\n          },\n          '100%': {\n            transform: 'translateY(0)',\n            opacity: '1',\n          },\n        },\n        slideInDown: {\n          '0%': {\n            transform: 'translateY(-100%)',\n            opacity: '0',\n          },\n          '100%': {\n            transform: 'translateY(0)',\n            opacity: '1',\n          },\n        },\n        bounceIn: {\n          '0%': {\n            transform: 'scale(0.3)',\n            opacity: '0',\n          },\n          '50%': {\n            transform: 'scale(1.05)',\n          },\n          '70%': {\n            transform: 'scale(0.9)',\n          },\n          '100%': {\n            transform: 'scale(1)',\n            opacity: '1',\n          },\n        },\n        scaleIn: {\n          '0%': {\n            transform: 'scale(0)',\n            opacity: '0',\n          },\n          '100%': {\n            transform: 'scale(1)',\n            opacity: '1',\n          },\n        },\n        rotateIn: {\n          '0%': {\n            transform: 'rotate(-180deg)',\n            opacity: '0',\n          },\n          '100%': {\n            transform: 'rotate(0)',\n            opacity: '1',\n          },\n        },\n        float: {\n          '0%, 100%': {\n            transform: 'translateY(0px)',\n          },\n          '50%': {\n            transform: 'translateY(-10px)',\n          },\n        },\n        shimmer: {\n          '0%': {\n            transform: 'translateX(-100%)',\n          },\n          '100%': {\n            transform: 'translateX(100%)',\n          },\n        },\n        glow: {\n          '0%': {\n            boxShadow: '0 0 5px theme(colors.primary)',\n          },\n          '100%': {\n            boxShadow: '0 0 20px theme(colors.primary), 0 0 30px theme(colors.primary)',\n          },\n        },\n      },\n      animation: {\n        'accordion-down': 'accordion-down 0.2s ease-out',\n        'accordion-up': 'accordion-up 0.2s ease-out',\n        'fade-in': 'fadeIn 0.5s ease-in-out',\n        'fade-out': 'fadeOut 0.5s ease-in-out',\n        'slide-in-left': 'slideInLeft 0.3s ease-out',\n        'slide-in-right': 'slideInRight 0.3s ease-out',\n        'slide-in-up': 'slideInUp 0.3s ease-out',\n        'slide-in-down': 'slideInDown 0.3s ease-out',\n        'bounce-in': 'bounceIn 0.6s ease-out',\n        'scale-in': 'scaleIn 0.3s ease-out',\n        'rotate-in': 'rotateIn 0.5s ease-out',\n        float: 'float 3s ease-in-out infinite',\n        'pulse-slow': 'pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite',\n        shimmer: 'shimmer 2s linear infinite',\n        glow: 'glow 2s ease-in-out infinite alternate',\n      },\n      fontFamily: {\n        sans: ['var(--font-sans)', ...fontFamily.sans],\n        mono: ['JetBrains Mono', 'monospace'],\n        display: ['Poppins', 'system-ui', 'sans-serif'],\n      },\n      fontSize: {\n        xs: [\n          '0.75rem',\n          {\n            lineHeight: '1rem',\n          },\n        ],\n        sm: [\n          '0.875rem',\n          {\n            lineHeight: '1.25rem',\n          },\n        ],\n        base: [\n          '1rem',\n          {\n            lineHeight: '1.5rem',\n          },\n        ],\n        lg: [\n          '1.125rem',\n          {\n            lineHeight: '1.75rem',\n          },\n        ],\n        xl: [\n          '1.25rem',\n          {\n            lineHeight: '1.75rem',\n          },\n        ],\n        '2xl': [\n          '1.5rem',\n          {\n            lineHeight: '2rem',\n          },\n        ],\n        '3xl': [\n          '1.875rem',\n          {\n            lineHeight: '2.25rem',\n          },\n        ],\n        '4xl': [\n          '2.25rem',\n          {\n            lineHeight: '2.5rem',\n          },\n        ],\n        '5xl': [\n          '3rem',\n          {\n            lineHeight: '1',\n          },\n        ],\n        '6xl': [\n          '3.75rem',\n          {\n            lineHeight: '1',\n          },\n        ],\n        '7xl': [\n          '4.5rem',\n          {\n            lineHeight: '1',\n          },\n        ],\n        '8xl': [\n          '6rem',\n          {\n            lineHeight: '1',\n          },\n        ],\n        '9xl': [\n          '8rem',\n          {\n            lineHeight: '1',\n          },\n        ],\n      },\n      spacing: {\n        18: '4.5rem',\n        88: '22rem',\n        128: '32rem',\n        144: '36rem',\n      },\n    },\n  },\n  plugins: [require('tailwindcss-animate'), shadcnPlugin],\n};\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\web\\worker.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":20,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":27},{"ruleId":"no-unused-vars","severity":1,"message":"'originalContext' is assigned a value but never used.","line":2,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":22,"suggestions":[{"messageId":"removeVar","data":{"varName":"originalContext"},"fix":{"range":[38,84],"text":""},"desc":"Remove unused variable 'originalContext'."}]},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":2,"column":25,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":32},{"ruleId":"no-unused-vars","severity":1,"message":"'createBotContext' is assigned a value but never used.","line":3,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":23,"suggestions":[{"messageId":"removeVar","data":{"varName":"createBotContext"},"fix":{"range":[123,189],"text":""},"desc":"Remove unused variable 'createBotContext'."}]},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":3,"column":26,"nodeType":"Identifier","messageId":"undef","endLine":3,"endColumn":33},{"ruleId":"no-unused-vars","severity":1,"message":"'WhatsDeXBrain' is assigned a value but never used.","line":4,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":4,"endColumn":20,"suggestions":[{"messageId":"removeVar","data":{"varName":"WhatsDeXBrain"},"fix":{"range":[190,253],"text":""},"desc":"Remove unused variable 'WhatsDeXBrain'."}]},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":4,"column":23,"nodeType":"Identifier","messageId":"undef","endLine":4,"endColumn":30},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":13,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":13,"endColumn":16,"suggestions":[{"fix":{"range":[595,653],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":15,"column":39,"nodeType":"Identifier","messageId":"undef","endLine":15,"endColumn":46},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":27,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":27,"endColumn":18,"suggestions":[{"fix":{"range":[1145,1204],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":29,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":29,"endColumn":20,"suggestions":[{"fix":{"range":[1233,1294],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":35,"column":13,"nodeType":"Identifier","messageId":"undef","endLine":35,"endColumn":20},{"ruleId":"radix","severity":2,"message":"Missing radix parameter.","line":36,"column":13,"nodeType":"CallExpression","messageId":"missingRadix","endLine":36,"endColumn":55,"suggestions":[{"messageId":"addRadixParameter10","fix":{"range":[1487,1487],"text":", 10"},"desc":"Add radix parameter `10` for parsing decimal numbers."}]},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":36,"column":22,"nodeType":"Identifier","messageId":"undef","endLine":36,"endColumn":29},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":37,"column":17,"nodeType":"Identifier","messageId":"undef","endLine":37,"endColumn":24},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":38,"column":12,"nodeType":"Identifier","messageId":"undef","endLine":38,"endColumn":19},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":44,"column":3,"nodeType":"MemberExpression","messageId":"unexpected","endLine":44,"endColumn":14,"suggestions":[{"fix":{"range":[1645,1685],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":48,"column":3,"nodeType":"MemberExpression","messageId":"unexpected","endLine":48,"endColumn":16,"suggestions":[{"fix":{"range":[1729,1793],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":51,"column":1,"nodeType":"MemberExpression","messageId":"unexpected","endLine":51,"endColumn":12,"suggestions":[{"fix":{"range":[1799,1865],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]}],"suppressedMessages":[],"errorCount":10,"fatalErrorCount":0,"warningCount":9,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const { Worker } = require('bullmq');\nconst originalContext = require('../context'); // Assuming context.js is in the root\nconst createBotContext = require('../src/utils/createBotContext');\nconst WhatsDeXBrain = require('../src/services/WhatsDeXBrain');\n\n// IMPORTANT: BullMQ requires a direct Redis connection (ioredis compatible),\n// not the REST API URL/TOKEN used by @upstash/redis.\n// You will need to get the REDIS_HOST, REDIS_PORT, and REDIS_PASSWORD for direct connection from Upstash.\nconst worker = new Worker(\n  'whatsapp-messages',\n  async job => {\n    const { msg } = job.data;\n    console.log('Processing message from queue:', msg.key.id);\n\n    const { processWebhookMessage } = require('./pages/api/bot-message'); // Import the processing function\n\n    // ... inside the worker's process function ...\n    try {\n      // We don't have req.headers here, so we'll use placeholders for ip, userAgent, etc.\n      const requestInfo = {\n        ip: 'queue-worker',\n        userAgent: 'queue-worker',\n        sessionId: 'queue-worker',\n        location: 'queue-worker',\n      };\n      await processWebhookMessage(msg, requestInfo);\n      console.log('Message processed successfully:', msg.key.id);\n    } catch (error) {\n      console.error('Error processing message from queue:', error);\n      throw error; // Re-throw to indicate job failure\n    }\n  },\n  {\n    connection: {\n      host: process.env.REDIS_HOST || 'localhost',\n      port: parseInt(process.env.REDIS_PORT || '6379'),\n      password: process.env.REDIS_PASSWORD,\n      tls: process.env.REDIS_TLS === 'true' ? {} : undefined,\n    },\n  }\n);\n\nworker.on('completed', job => {\n  console.log(`Job ${job.id} completed.`);\n});\n\nworker.on('failed', (job, err) => {\n  console.error(`Job ${job.id} failed with error ${err.message}`);\n});\n\nconsole.log('BullMQ Worker started for whatsapp-messages queue.');\n","usedDeprecatedRules":[]},{"filePath":"w:\\CodeDeX\\WhatsDeX\\whatsdex-bot-service\\index.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":1,"column":22,"nodeType":"Identifier","messageId":"undef","endLine":1,"endColumn":29},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":2,"column":30,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":37},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":3,"column":14,"nodeType":"Identifier","messageId":"undef","endLine":3,"endColumn":21},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":4,"column":17,"nodeType":"Identifier","messageId":"undef","endLine":4,"endColumn":24},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":5,"column":16,"nodeType":"Identifier","messageId":"undef","endLine":5,"endColumn":23},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":6,"column":18,"nodeType":"Identifier","messageId":"undef","endLine":6,"endColumn":25},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":7,"column":31,"nodeType":"Identifier","messageId":"undef","endLine":7,"endColumn":38},{"ruleId":"no-undef","severity":2,"message":"'require' is not defined.","line":8,"column":19,"nodeType":"Identifier","messageId":"undef","endLine":8,"endColumn":26},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":24,"column":11,"nodeType":"Identifier","messageId":"undef","endLine":24,"endColumn":18},{"ruleId":"radix","severity":2,"message":"Missing radix parameter.","line":25,"column":11,"nodeType":"CallExpression","messageId":"missingRadix","endLine":25,"endColumn":53,"suggestions":[{"messageId":"addRadixParameter10","fix":{"range":[940,940],"text":", 10"},"desc":"Add radix parameter `10` for parsing decimal numbers."}]},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":25,"column":20,"nodeType":"Identifier","messageId":"undef","endLine":25,"endColumn":27},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":26,"column":15,"nodeType":"Identifier","messageId":"undef","endLine":26,"endColumn":22},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":27,"column":10,"nodeType":"Identifier","messageId":"undef","endLine":27,"endColumn":17},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useRedisAuthState\" is called in function \"connectToWhatsApp\" that is neither a React function component nor a custom React Hook function. React component names must start with an uppercase letter. React Hook names must start with the word \"use\".","line":32,"column":38,"nodeType":"Identifier","endLine":32,"endColumn":55},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":34,"column":13,"nodeType":"Identifier","messageId":"undef","endLine":34,"endColumn":20},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":35,"column":17,"nodeType":"Identifier","messageId":"undef","endLine":35,"endColumn":24},{"ruleId":"no-unused-vars","severity":1,"message":"'qr' is assigned a value but never used.","line":49,"column":41,"nodeType":"Identifier","messageId":"unusedVar","endLine":49,"endColumn":43,"suggestions":[{"messageId":"removeVar","data":{"varName":"qr"},"fix":{"range":[1616,1620],"text":""},"desc":"Remove unused variable 'qr'."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":57,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":57,"endColumn":18,"suggestions":[{"fix":{"range":[1850,1915],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":62,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":62,"endColumn":18,"suggestions":[{"fix":{"range":[2052,2084],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":73,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":73,"endColumn":18,"suggestions":[{"fix":{"range":[2322,2373],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":75,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":75,"endColumn":20,"suggestions":[{"fix":{"range":[2402,2458],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"consistent-return","severity":2,"message":"Expected to return a value at the end of async arrow function.","line":83,"column":36,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":83,"endColumn":38},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":96,"column":14,"nodeType":"Identifier","messageId":"undef","endLine":96,"endColumn":21},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":98,"column":3,"nodeType":"MemberExpression","messageId":"unexpected","endLine":98,"endColumn":14,"suggestions":[{"fix":{"range":[2952,3005],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]}],"suppressedMessages":[],"errorCount":18,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const makeWASocket = require('@whiskeysockets/baileys').default;\nconst { DisconnectReason } = require('@whiskeysockets/baileys');\nconst pino = require('pino');\nconst express = require('express');\nconst dotenv = require('dotenv');\nconst { Boom } = require('@hapi/boom');\nconst { useRedisAuthState } = require('baileys-redis-auth');\nconst { Queue } = require('bullmq'); // Import Queue from bullmq\n\n// Load environment variables\ndotenv.config();\n\nconst app = express();\napp.use(express.json());\n\nlet bot;\n\n// Initialize BullMQ Queue\n// IMPORTANT: BullMQ requires a direct Redis connection (ioredis compatible),\n// not the REST API URL/TOKEN used by @upstash/redis.\n// You will need to get the REDIS_HOST, REDIS_PORT, and REDIS_PASSWORD for direct connection from Upstash.\nconst messageQueue = new Queue('whatsapp-messages', {\n  connection: {\n    host: process.env.REDIS_HOST || 'localhost',\n    port: parseInt(process.env.REDIS_PORT || '6379'),\n    password: process.env.REDIS_PASSWORD,\n    tls: process.env.REDIS_TLS === 'true' ? {} : undefined,\n  },\n});\n\nasync function connectToWhatsApp() {\n  const { state, saveCreds } = await useRedisAuthState(\n    {\n      host: process.env.UPSTASH_REDIS_REST_URL, // This is for baileys-redis-auth\n      password: process.env.UPSTASH_REDIS_REST_TOKEN, // This is for baileys-redis-auth\n    },\n    'whatsapp-session'\n  );\n\n  bot = makeWASocket({\n    auth: state,\n    logger: pino({ level: 'silent' }),\n    browser: ['WhatsDeX', 'Chrome', '1.0.0'],\n  });\n\n  bot.ev.on('creds.update', saveCreds);\n\n  bot.ev.on('connection.update', update => {\n    const { connection, lastDisconnect, qr } = update;\n\n    if (connection === 'close') {\n      const shouldReconnect =\n        lastDisconnect.error instanceof Boom\n          ? lastDisconnect.error.output.statusCode !== DisconnectReason.loggedOut\n          : true;\n\n      console.log('Connection closed, reconnecting:', shouldReconnect);\n      if (shouldReconnect) {\n        setTimeout(() => connectToWhatsApp(), 5000);\n      }\n    } else if (connection === 'open') {\n      console.log('âœ… Bot connected!');\n    }\n  });\n\n  // Add messages to BullMQ queue\n  bot.ev.on('messages.upsert', async m => {\n    const msg = m.messages[0];\n    if (!msg.message) return;\n\n    try {\n      await messageQueue.add('incoming-whatsapp-message', { msg });\n      console.log('Message added to queue:', msg.key.id);\n    } catch (error) {\n      console.error('Failed to add message to queue:', error);\n    }\n  });\n\n  return bot;\n}\n\n// API endpoint for Next.js to trigger actions\napp.post('/send', async (req, res) => {\n  try {\n    const { to, message } = req.body;\n    if (!bot) {\n      return res.status(503).send({ error: 'Bot not connected' });\n    }\n    await bot.sendMessage(to, message);\n    res.status(200).send({ status: 'Message sent' });\n  } catch (error) {\n    res.status(500).send({ error: error.message });\n  }\n});\n\nconst port = process.env.PORT || 3001;\napp.listen(port, () => {\n  console.log(`Bot service listening on port ${port}`);\n});\n\nconnectToWhatsApp();\n","usedDeprecatedRules":[]}]
